<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>å›½äº§åŒ–POCæµ‹è¯•å·¥å…·ä½¿ç”¨æŒ‡å—</title>
    <url>/2022/07/06/02_%E6%B5%8B%E8%AF%95/01_POC%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<h1 id="ä¸€ã€æ€§èƒ½æµ‹è¯•"><a href="#ä¸€ã€æ€§èƒ½æµ‹è¯•" class="headerlink" title="ä¸€ã€æ€§èƒ½æµ‹è¯•"></a>ä¸€ã€æ€§èƒ½æµ‹è¯•</h1><blockquote>
<p>æµ‹è¯•å°å¼æœº&#x2F;ç¬”è®°æœ¬çš„è½¯ç¡¬ä»¶æ€§èƒ½</p>
</blockquote>
<h2 id="1-å¼€æœºæ—¶é—´"><a href="#1-å¼€æœºæ—¶é—´" class="headerlink" title="1 å¼€æœºæ—¶é—´"></a>1 å¼€æœºæ—¶é—´</h2><blockquote>
<p>æµ‹è¯•æ•´æœºå¯åŠ¨çš„æ—¶é—´ï¼ˆä»æŒ‰ä¸‹ç”µæºå¼€å§‹è®¡æ—¶ï¼Œåˆ°å‡ºç°ç™»å½•ç•Œé¢è®¡æ—¶ç»“æŸï¼‰</p>
</blockquote>
<p>æµ‹è¯•æ­¥éª¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">æ‰‹æœºè®¡æ—¶</span><br><span class="line">ä»æŒ‰ä¸‹ç”µæºçš„ä¸€åˆ»åˆ°è¿›å…¥ç³»ç»Ÿçš„æ—¶é—´</span><br></pre></td></tr></table></figure>



<h2 id="2-CPUæ€§èƒ½æµ‹è¯•ï¼ˆæ•´å‹-x2F-æµ®ç‚¹å‹ï¼‰"><a href="#2-CPUæ€§èƒ½æµ‹è¯•ï¼ˆæ•´å‹-x2F-æµ®ç‚¹å‹ï¼‰" class="headerlink" title="2 CPUæ€§èƒ½æµ‹è¯•ï¼ˆæ•´å‹&#x2F;æµ®ç‚¹å‹ï¼‰"></a>2 CPUæ€§èƒ½æµ‹è¯•ï¼ˆæ•´å‹&#x2F;æµ®ç‚¹å‹ï¼‰</h2><blockquote>
<p>æµ‹è¯•CPUæ•´å‹è®¡ç®—æ€§èƒ½ï¼ŒåŒ…æ‹¬å•çº¿ç¨‹åŸºå‡†å€¼ã€æ»¡çº¿ç¨‹åŸºå‡†å€¼</p>
<p>æµ‹è¯•CPUæµ®ç‚¹è®¡ç®—æ€§èƒ½ï¼ŒåŒ…æ‹¬å•çº¿ç¨‹åŸºå‡†å€¼ã€æ»¡çº¿ç¨‹åŸºå‡†å€¼</p>
</blockquote>
<h3 id="2-1-CPU2006"><a href="#2-1-CPU2006" class="headerlink" title="2.1 CPU2006"></a>2.1 CPU2006</h3><blockquote>
<p>æµ‹è¯•ç¯å¢ƒ:</p>
<p>â€‹	CPUï¼šé£è…¾D2000</p>
<p>â€‹	å†…å­˜ï¼š16G</p>
<p>â€‹	ç³»ç»Ÿï¼šéº’éºŸV10-SP1-2107 æ¡Œé¢æ“ä½œç³»ç»Ÿ</p>
</blockquote>
<p>1ã€å‡†å¤‡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">æµ‹è¯•å·¥å…·åŒ…ï¼š</span><br><span class="line">d2000-spec2006test.tar.gz</span><br></pre></td></tr></table></figure>

<p>2ã€æµ‹è¯•æ­¥éª¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1ã€æŠŠä¸‹è½½å¥½çš„d2000-spec2006test.tar.gzæµ‹è¯•åŒ…æ”¾åˆ°æ ¹ç›®å½•ä¸‹ï¼ˆå»ºè®®æ•´æœºå†…å­˜â‰¥16GBï¼Œå¦åˆ™ä¼šå½±å“æµ‹è¯•è·‘åˆ†ï¼‰</span><br><span class="line"><span class="meta">#</span><span class="bash">å¦‚æœä¸çŸ¥é“å¦‚ä½•æ”¾åˆ°æ ¹ç›®å½•ä¸‹ï¼Œå¯ä»¥å…ˆæŠŠd2000-spec2006test.tar.gzè¿™ä¸ªåŒ…æ”¾åˆ°æ¡Œé¢ï¼Œç„¶åç‚¹å‡»é¼ æ ‡å³é”®æ‰“å¼€ç»ˆç«¯ï¼Œsudo su ï¼Œç„¶åè¾“å…¥å¯†ç è¿›å…¥rootæƒé™ï¼Œç„¶åè¾“å…¥cp -r d2000-spec2006test.tar.gz /  ï¼Œè¿™æ ·å°±å¤åˆ¶åˆ°äº†æ ¹ç›®å½•ä¸‹ã€‚</span> </span><br><span class="line">2ã€cd / ï¼Œè¿›å…¥æ ¹ç›®å½•ï¼Œsudo su ï¼Œç„¶åè¾“å…¥å¯†ç ï¼Œè¿›å…¥rootæƒé™ã€‚</span><br><span class="line">3ã€è§£å‹ï¼Œtar -xvf d2000-spec2006test.tar.gz</span><br><span class="line">4ã€æ›´æ”¹æƒé™ï¼Œchmod -R 777 cpu2006-1.2</span><br><span class="line">5ã€è¿›å…¥spec2006ç›®å½•ï¼Œcd cpu2006-1.2</span><br><span class="line">6ã€æ‰§è¡Œè„šæœ¬ï¼Œbash run.sh   #é…ç½®ä¾èµ–ç¯å¢ƒï¼Œï¼ï¼éœ€è¦è”ç½‘ï¼Œä¼šè‡ªåŠ¨ä¸‹è½½éƒ¨åˆ†ä¾èµ–ï¼ï¼</span><br><span class="line">7ã€source /etc/profile  #æ›´æ–°profileæ–‡ä»¶,æ­¤å¤„ä¸€å®šè¦æ›´æ–°</span><br><span class="line">8ã€source ./shrc    #é…ç½®ç¯å¢ƒå˜é‡	</span><br><span class="line">9ã€ulimit -s unlimited #å†…å­˜åˆ†é…æ— é™åˆ¶ï¼Œå¤§äºæˆ–è€…ç­‰äº16Gå†…å­˜çš„æœºå™¨å¯ä»¥åŠ æ­¤å‘½ä»¤ï¼Œå¦‚æœæ˜¯8Gå†…å­˜çš„æœºå™¨ä¸è¦è¿è¡Œæ­¤å‘½ä»¤ï¼Œä¼šå› å†…å­˜ä¸å¤Ÿç”¨å½±å“æ•´å‹æµ‹è¯•çš„429æµ‹è¯•é¡¹</span><br><span class="line">10ã€echo 3 &gt; /proc/sys/vm/drop_caches   #æ‰§è¡Œæµ‹è¯•å‰ï¼Œå»ºè®®æ¸…ä¸€ä¸‹ç¼“å­˜</span><br><span class="line">11ã€gcc -v   #æµ‹è¯•å‰æŸ¥çœ‹ä¸€ä¸‹gccçš„ç‰ˆæœ¬æ˜¯å¦ä¸ºGCC931,è‹¥ä¸æ˜¯GCC931ï¼Œè¾“å…¥source /etc/profileï¼Œ å†gcc -væŸ¥çœ‹ç‰ˆæœ¬ï¼Œæ˜¯GCC931å³å¯æ‰§è¡Œç¬¬12æ­¥å¯åŠ¨æµ‹è¯•</span><br><span class="line">12ã€bash d2000-test.sh  #æ‰§è¡Œ8æ ¸ã€å•æ ¸çš„æ•´å½¢å’Œæµ®ç‚¹æµ‹è¯•</span><br></pre></td></tr></table></figure>

<p>3ã€ç»“æœæŸ¥çœ‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">PDFæµ‹è¯•ç»“æœå­˜æ”¾åœ¨resultsæ–‡ä»¶å¤¹</span><br></pre></td></tr></table></figure>

<p>4ã€ç¼–è¯‘é—®é¢˜å¤„ç†ï¼ˆå¦‚é‡åˆ°ç¼–è¯‘é—®é¢˜ï¼Œå¯å‚è€ƒï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 450æŠ¥é”™ï¼š</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mpsinput.cc: In member <span class="keyword">function</span> <span class="string">&#x27;bool soplex::MPSInput::readLine()&#x27;</span>: mpsinput.cc:75:52: error: no match <span class="keyword">for</span> <span class="string">&#x27;operator==&#x27;</span> (operand types are <span class="string">&#x27;std::basic_istream&lt;char&gt;::__istream_type&#x27;</span> &#123;aka <span class="string">&#x27;std::basic_istream&lt;char&gt;&#x27;</span>&#125; and <span class="string">&#x27;int&#x27;</span>)</span></span><br><span class="line">g++ -std=c++03</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> lto1 fatal error bytecode stream generated with lto version</span> </span><br><span class="line">ç¼–è¯‘é€‰é¡¹æ·»åŠ : fno-lto</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è§£å†³zfnlmé—®é¢˜:</span></span><br><span class="line">actual argument contains too few elements for dummy argument &#x27;zfnlm&#x27;</span><br><span class="line">cfgæ–‡ä»¶ç¼–è¯‘é€‰é¡¹è®¾ç½®ï¼š -std=legacy</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> undefined reference to <span class="string">&#x27;__gcov_exit&#x27;</span></span></span><br><span class="line">-lgcov --coverage</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> glob.c:(.text+0x53c): undefined reference to `__alloca<span class="string">&#x27;</span></span></span><br><span class="line">ç¼–è¾‘glob.cæ–‡ä»¶</span><br><span class="line">ä¿®æ”¹ç¬¬54è¡Œ&quot;==&quot;æ”¹ä¸º&quot;&gt;=&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="string"> if _GNU_GLOB_INTERFACE_VERSION &gt;= GLOB_INTERFACE_VERSION</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="string"> 2006çš„é¢˜483åœ¨v10-sp1-2107è·‘èµ·æ¥ï¼Œæˆ‘å¹²äº†ä»€ä¹ˆï¼Ÿ å¦åˆ™è€æ˜¯æŠ¥é”™483.xalancbmk  non-zero return code (rc=254, signal=0) XMLç­‰</span></span></span><br><span class="line">1ã€å®‰è£…ç»Ÿä¿¡UOSçš„GCC8.3.0</span><br><span class="line">2ã€SPEC2006çš„å·¥å…·é›†é‡æ–°ç¼–è¯‘ï¼Œå†å®‰è£…</span><br><span class="line">3ã€æ¸…é™¤é¢˜ä¸‹é¢çš„run/build/exe</span><br><span class="line">4ã€æ‰§è¡Œäº†ä¸€æ¬¡apt-get install gcc?? ä¸çŸ¥é“æœ‰æ²¡æœ‰å½±å“</span><br><span class="line">5ã€æ”¾åˆ°æ²¡æœ‰ä¸­æ–‡çš„è·¯å¾„/home/gretwall/cpu2006</span><br><span class="line">6ã€ä½¿ç”¨æ™®é€šç”¨æˆ·greatwallæ‰§è¡Œ</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="string"> 416æŠ¥é”™</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="string"> Note: The following floating-point exceptions are signalling: IEEE_UNDERFLOW_FLAG IEEE_DENORMAL</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>4ã€æµ‹è¯•é¡¹è¯´æ˜</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">source shrc</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¤šæ ¸æµ‹è¯•ï¼ˆ8ï¼‰</span></span><br><span class="line">runspec -c greatwall.cfg -r 8 -n 1 -i ref -T base -I all</span><br><span class="line">é€‰é¡¹è§£æï¼š</span><br><span class="line">	-c # æŒ‡å®šconfig/ä¸­çš„é…ç½®æ–‡ä»¶</span><br><span class="line">	-r # --rateçš„ç¼©å†™ï¼Œè·‘rateæµ‹è¯•ï¼ŒæŒ‡å®šæµ‹è¯•çš„å‰¯æœ¬æ•°ï¼ˆCopiesï¼‰</span><br><span class="line">	--speed # æŒ‡å®šè·‘speedæµ‹è¯•ï¼Œå’Œæµ‹è¯•å‰¯æœ¬æ•°ï¼ˆCopiesï¼‰ï¼ˆé»˜è®¤è·‘speedæµ‹è¯•ï¼‰</span><br><span class="line">	-n # æŒ‡å®šæµ‹è¯•çš„æ¬¡æ•°	</span><br><span class="line">	-iï¼ˆ-sizeï¼‰ # æŒ‡å®šæµ‹è¯•çš„è§„æ¨¡ï¼Œç”±å°åˆ°å¤§ä¸ºtest/train/ref,å…¶ä¸­testæœ€å¿«ï¼Œé€‚åˆç”¨æ¥éªŒè¯CPUçš„å®Œæ•´æ€§ï¼Œè·‘åˆ†è¦ç”¨ref</span><br><span class="line">	--reportable / --noreportable # è¡¨ç¤ºæ£€æµ‹/ä¸æ£€æµ‹ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯å¦ä¿®æ”¹è¿‡</span><br><span class="line">	--action=build	# åªç¼–è¯‘ï¼Œä¸æµ‹è¯•</span><br><span class="line">	--rebuild	# é‡æ–°ç¼–è¯‘é€‰é¢˜çš„äºŒè¿›åˆ¶æ–‡ä»¶</span><br><span class="line">	--tuneï¼ˆ-Tï¼‰ # å¯é€‰peak / base / allï¼Œé»˜è®¤è·‘all</span><br><span class="line">	æœ€åçš„å‚æ•°	# int-(inté€‰é¢˜) / fp-(fpé€‰é¢˜) / all-(æ‰€æœ‰é€‰é¢˜) / å•ä¸ªé€‰é¢˜-ï¼ˆå¦‚483ï¼‰ </span><br></pre></td></tr></table></figure>

<p>5ã€å»é™¤PDFæŠ¥å‘Šçš„Invalidæ ‡è®°</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp CINT2006.559.ref.rsf CINT2006.559.ref.rsf.retry</span><br><span class="line">rawformat --flagsurl myfixedflags.xml --output_format pdf,raw CINT2006.559.ref.rsf.retry</span><br></pre></td></tr></table></figure>



<h3 id="2-2-CPU2017"><a href="#2-2-CPU2017" class="headerlink" title="2.2 CPU2017"></a>2.2 CPU2017</h3><h2 id="3-lmbenchæµ‹è¯•ï¼ˆç”¨æ—¶3å°æ—¶ï¼‰"><a href="#3-lmbenchæµ‹è¯•ï¼ˆç”¨æ—¶3å°æ—¶ï¼‰" class="headerlink" title="3 lmbenchæµ‹è¯•ï¼ˆç”¨æ—¶3å°æ—¶ï¼‰"></a>3 lmbenchæµ‹è¯•ï¼ˆç”¨æ—¶3å°æ—¶ï¼‰</h2><blockquote>
<p>æµ‹è¯•ç®€å•çš„ç³»ç»Ÿè°ƒç”¨æ—¶é—´ã€shellå‘½ä»¤å¯åŠ¨æ—¶é—´ã€ç³»ç»Ÿä¿¡å·å¤„ç†æ—¶é—´ã€ç»Ÿè®¡2p&#x2F;16Kçš„ä¸Šä¸‹æ–‡åˆ‡æ¢æ€§èƒ½ã€16p&#x2F;64Kçš„ä¸Šä¸‹æ–‡åˆ‡æ¢æ€§èƒ½ã€0K&#x2F;10Kæ–‡ä»¶åˆ›å»ºæ—¶é—´ã€0K&#x2F;10Kæ–‡ä»¶åˆ é™¤æ—¶é—´</p>
</blockquote>
<p>æºç åŒ…å‡†å¤‡ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget http://www.bitmover.com/lmbench/lmbench3.tar.gz</span><br></pre></td></tr></table></figure>

<p>ç¼–è¯‘å‰çš„å‡†å¤‡ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar xvf lmbench3.tar.gz</span><br><span class="line">cd lmbench3</span><br><span class="line">mkdir SCCS</span><br><span class="line">touch  SCCS/s.ChangeSet</span><br></pre></td></tr></table></figure>

<p>ç¼–è¯‘å¹¶æµ‹è¯•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">make results OS=arch-linux</span><br></pre></td></tr></table></figure>

<p>è¯»å–æµ‹è¯•ç»“æœ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make see</span><br></pre></td></tr></table></figure>

<p>é”™è¯¯ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">æŠ¥é”™: undefined reference to &#x27;llseek&#x27;</span><br><span class="line">è§£å†³æ–¹æ³•:</span><br><span class="line">ä¿®æ”¹src/disk.cæ–‡ä»¶</span><br><span class="line">å°†llseekæ”¹ä¸ºlseek64</span><br></pre></td></tr></table></figure>

<h2 id="4-æ–‡ä»¶è¯»å†™æµ‹è¯•"><a href="#4-æ–‡ä»¶è¯»å†™æµ‹è¯•" class="headerlink" title="4 æ–‡ä»¶è¯»å†™æµ‹è¯•"></a>4 æ–‡ä»¶è¯»å†™æµ‹è¯•</h2><blockquote>
<p>æµ‹è¯•ç¡¬ç›˜å†…æ–‡ä»¶ï¼ˆ10Gï¼‰æ‹·è´æ€§èƒ½ï¼Œè®°å½•æ—¶é—´</p>
</blockquote>
<p>æµ‹è¯•æ­¥éª¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»º10Gçš„å¤§æ–‡ä»¶</span></span><br><span class="line">dd if=/dev/zero of=big_file count=10 bs=1G</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•æ‹·è´æ—¶é—´</span></span><br><span class="line">time cp big_file  big_file_bak</span><br></pre></td></tr></table></figure>



<h2 id="5-USBå­˜å‚¨è®¾å¤‡è¯»å†™æ€§èƒ½"><a href="#5-USBå­˜å‚¨è®¾å¤‡è¯»å†™æ€§èƒ½" class="headerlink" title="5 USBå­˜å‚¨è®¾å¤‡è¯»å†™æ€§èƒ½"></a>5 USBå­˜å‚¨è®¾å¤‡è¯»å†™æ€§èƒ½</h2><blockquote>
<p>æµ‹è¯•USBå­˜å‚¨è®¾å¤‡è¯»å†™æ€§èƒ½ï¼ˆMb&#x2F;sï¼‰ï¼Œå¹³å‡è¯»å†™é€Ÿåº¦ç­‰</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¯é€‰å‡†å¤‡</span></span><br><span class="line">1.å°†Uç›˜ï¼ˆUSB3.0ï¼‰æ’å…¥è¢«æµ‹è¯•æœºå™¨,å‡å®šè¯†åˆ«è®¾å¤‡ä¸ºsdc</span><br><span class="line">2.åˆ›å»ºvfatæ–‡ä»¶ç³»ç»Ÿåˆ†åŒº</span><br><span class="line">/dev/sdb1åˆ†åŒºå®¹é‡å¤§äº30GB</span><br><span class="line">umount /dev/sdc1</span><br><span class="line">mkfs -t vfat /dev/sdc1</span><br><span class="line">mkdir /upan</span><br><span class="line">mount -t vfat /dev/sdc1 /upan</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•å†™æ€§èƒ½</span></span><br><span class="line">cd /upan</span><br><span class="line">dd if=/dev/zero of=./largefile bs=64k count=10000</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•è¯»æ€§èƒ½</span></span><br><span class="line">sync &amp;&amp; echo 3 &gt; /proc/sys/vm/drop_caches</span><br><span class="line">dd if=./largefile of=/dev/null bs=64k</span><br></pre></td></tr></table></figure>



<h2 id="6-ç¡¬ç›˜è¯»å†™æµ‹è¯•-IOZONE-x2F"><a href="#6-ç¡¬ç›˜è¯»å†™æµ‹è¯•-IOZONE-x2F" class="headerlink" title="6 ç¡¬ç›˜è¯»å†™æµ‹è¯•-IOZONE&#x2F;"></a>6 ç¡¬ç›˜è¯»å†™æµ‹è¯•-IOZONE&#x2F;</h2><p>å®‰è£…æ­¥éª¤ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¸‹è½½æºç åŒ…</span></span><br><span class="line">wget http://www.iozone.org/src/current/iozone3_487.tar</span><br><span class="line"><span class="meta">#</span><span class="bash"> è§£å‹</span></span><br><span class="line">tar -vxf iozone3_487.tar &amp;&amp; cd iozone3_489/src/current</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç¼–è¯‘</span></span><br><span class="line">make linux</span><br></pre></td></tr></table></figure>

<p>å‚æ•°è¯´æ˜ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">iozone</span><br><span class="line">    -a å…¨é¢æµ‹è¯•ï¼Œæ¯”å¦‚å—å¤§å°å®ƒä¼šè‡ªåŠ¨åŠ </span><br><span class="line">    -i N ç”¨æ¥é€‰æ‹©æµ‹è¯•é¡¹, æ¯”å¦‚Read/Write/Random æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯0 1 2,å¯ä»¥æŒ‡å®šæˆ-i 0 -i 1 -i2.è¿™äº›åˆ«çš„è¯¦ç»†å†…å®¹è¯·æŸ¥man</span><br><span class="line">        0=write/rewrite</span><br><span class="line">        1=read/re-read</span><br><span class="line">        2=random-read/write</span><br><span class="line">        3=Read-backwards</span><br><span class="line">        4=Re-write-record</span><br><span class="line">        5=stride-read</span><br><span class="line">        6=fwrite/re-fwrite</span><br><span class="line">        7=fread/Re-fread</span><br><span class="line">        8=random mix</span><br><span class="line">        9=pwrite/Re-pwrite</span><br><span class="line">        10=pread/Re-pread</span><br><span class="line">        11=pwritev/Re-pwritev</span><br><span class="line">    	12=preadv/Re-preadv</span><br><span class="line">    -r block size æŒ‡å®šä¸€æ¬¡å†™å…¥/è¯»å‡ºçš„å—å¤§å°</span><br><span class="line">    -s file size æŒ‡å®šæµ‹è¯•æ–‡ä»¶çš„å¤§å°</span><br><span class="line">    -f filename æŒ‡å®šæµ‹è¯•æ–‡ä»¶çš„åå­—,å®Œæˆåä¼šè‡ªåŠ¨åˆ é™¤(è¿™ä¸ªæ–‡ä»¶å¿…é¡»æŒ‡å®šä½ è¦æµ‹è¯•çš„é‚£ä¸ªç¡¬ç›˜ä¸­)</span><br><span class="line">    -F file1 file2â€¦ æŒ‡å®šå¤šçº¿ç¨‹ä¸‹æµ‹è¯•çš„æ–‡ä»¶å</span><br><span class="line">    </span><br><span class="line">    æ‰¹é‡æµ‹è¯•é¡¹:</span><br><span class="line">    -g -n æŒ‡å®šæµ‹è¯•æ–‡ä»¶å¤§å°èŒƒå›´,æœ€å¤§æµ‹è¯•æ–‡ä»¶ä¸º4G,å¯ä»¥è¿™æ ·å†™ -g 4G</span><br><span class="line">    -y -q æŒ‡å®šæµ‹è¯•å—çš„å¤§å°èŒƒå›´</span><br><span class="line">    </span><br><span class="line">    è¾“å‡º:</span><br><span class="line">    ä¸‹é¢æ˜¯å‡ ä¸ªæ—¥å¿—è®°å½•çš„å‚æ•°.å¥½åƒè¦è¾“å‡ºæˆå›¾è±¡è¿›è¡Œåˆ†æï¼Œéœ€è¦æŒ‡å®š-açš„æµ‹è¯•æ‰èƒ½è¾“å‡º</span><br><span class="line">    -R äº§ç”ŸExcelåˆ°æ ‡å‡†è¾“å‡º</span><br><span class="line">    -b æŒ‡å®šè¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶ä¸Š. æ¯”å¦‚ -Rb ttt.xls</span><br></pre></td></tr></table></figure>

<blockquote>
<p>1ã€æµ‹è¯•ç¡¬ç›˜è¯»å†™æ€§èƒ½ï¼ˆMb&#x2F;sï¼‰ï¼ŒåŒ…æ‹¬éšæœºå’Œé¡ºåºè¯»å†™å¹³å‡è¯»å†™é€Ÿåº¦ï¼ˆIOzoneè®¾ç½®å—å¤§å°16Mï¼Œæ–‡ä»¶å¤§å°ä¸ºç‰©ç†å†…å­˜2å€ã€1å€ã€1&#x2F;2å€ä¸‰ç»„æ•°æ®ï¼‰</p>
</blockquote>
<p>æµ‹è¯•æ­¥éª¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> éœ€è¦rootæƒé™</span></span><br><span class="line">sudo su</span><br><span class="line"><span class="meta">#</span><span class="bash"> å—å¤§å°16Mï¼Œæ–‡ä»¶å¤§å°ä¸ºç‰©ç†å†…å­˜2å€ï¼ˆæµ‹è¯•æœºå™¨å†…å­˜ä¸º8Gçš„æƒ…å†µä¸‹ï¼‰</span></span><br><span class="line">./iozone -i 0 -i 1 -i 2 -s 16g -r 16m -f /iozone.tmpfile -Rb ./report/iotest_16G_0.xls</span><br><span class="line"><span class="meta">#</span><span class="bash"> å—å¤§å°16Mï¼Œæ–‡ä»¶å¤§å°ä¸ºç‰©ç†å†…å­˜1å€ï¼ˆæµ‹è¯•æœºå™¨å†…å­˜ä¸º8Gçš„æƒ…å†µä¸‹ï¼‰</span></span><br><span class="line">./iozone -i 0 -i 1 -i 2 -s 8g -r 16m -f /iozone.tmpfile -Rb ./report/iotest_8G_0.xls</span><br><span class="line"><span class="meta">#</span><span class="bash"> å—å¤§å°16Mï¼Œæ–‡ä»¶å¤§å°ä¸ºç‰©ç†å†…å­˜0.5å€ï¼ˆæµ‹è¯•æœºå™¨å†…å­˜ä¸º8Gçš„æƒ…å†µä¸‹ï¼‰</span></span><br><span class="line">./iozone -i 0 -i 1 -i 2 -s 4g -r 16m -f /iozone.tmpfile -Rb ./report/iotest_4G_0.xls</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2ã€æµ‹è¯•æ•°æ®ç›˜ï¼ˆè£¸è®¾å¤‡ï¼‰çš„åœ¨å—å¤§å°ä¸º512Bã€1MBä¸‹çš„è¯»å†™æ€§èƒ½ï¼ˆåŒ…æ‹¬IOPSã€å¸¦å®½å’Œå“åº”æ—¶é—´ï¼‰</p>
</blockquote>
<h2 id="7-å†…å­˜è¯»å†™æ€§èƒ½æµ‹è¯•-Stream"><a href="#7-å†…å­˜è¯»å†™æ€§èƒ½æµ‹è¯•-Stream" class="headerlink" title="7 å†…å­˜è¯»å†™æ€§èƒ½æµ‹è¯•-Stream"></a>7 å†…å­˜è¯»å†™æ€§èƒ½æµ‹è¯•-Stream</h2><blockquote>
<p>æµ‹è¯•å•çº¿å’Œå¹¶å‘è¯»å†™æ€§èƒ½ï¼ˆMb&#x2F;sï¼‰</p>
</blockquote>
<p>æµ‹è¯•æ­¥éª¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…gfortran</span></span><br><span class="line">sudo apt-get install gfortran</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç¼–è¯‘stream</span></span><br><span class="line">make</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•</span></span><br><span class="line">stream_c 200000000   # å‚æ•°ä¸ºArrayå¤§å°</span><br></pre></td></tr></table></figure>

<p>å¤šçº¿ç¨‹æµ‹è¯•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># å•çº¿ç¨‹ç¼–è¯‘</span><br><span class="line">gcc -O3 stream.c -o stream</span><br><span class="line"># å¤šçº¿ç¨‹ç¼–è¯‘</span><br><span class="line">gcc -O3 -fopenmp stream.c -o stream.omp</span><br></pre></td></tr></table></figure>

<h2 id="10-æ“ä½œç³»ç»Ÿç»¼åˆæ€§èƒ½æµ‹è¯•-unixbenchï¼ˆç”¨æ—¶1å°æ—¶ï¼‰"><a href="#10-æ“ä½œç³»ç»Ÿç»¼åˆæ€§èƒ½æµ‹è¯•-unixbenchï¼ˆç”¨æ—¶1å°æ—¶ï¼‰" class="headerlink" title="10 æ“ä½œç³»ç»Ÿç»¼åˆæ€§èƒ½æµ‹è¯•-unixbenchï¼ˆç”¨æ—¶1å°æ—¶ï¼‰"></a>10 æ“ä½œç³»ç»Ÿç»¼åˆæ€§èƒ½æµ‹è¯•-unixbenchï¼ˆç”¨æ—¶1å°æ—¶ï¼‰</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è§£å‹UnixBenchå·¥å…·åŒ…ï¼š</span></span><br><span class="line">unzip Unixbench-Kylin.zip</span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥Unixbenchè§£å‹åçš„ç›®å½•ä¸‹</span></span><br><span class="line">cd UnixBench</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹Makefileæ–‡ä»¶74è¡Œ</span></span><br><span class="line">OPTON = -O3 -fomit-frame-pointer -fforce-addr -ffast-math -Wall -static -flto</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç¼–è¯‘ï¼š</span></span><br><span class="line">sudo make clean &amp;&amp; make</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ¸…é™¤ç¼“å­˜ï¼š</span></span><br><span class="line">sudo su</span><br><span class="line">sync</span><br><span class="line">echo 3 &gt; /proc/sys/vm/drop_caches</span><br><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•å•çº¿ç¨‹å’Œå¤šçº¿ç¨‹æ€§èƒ½ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</span></span><br><span class="line">sudo ./Run -c 1 -c N</span><br><span class="line">// å…¶ä¸­Nä»£è¡¨cpuæ ¸æ•°</span><br></pre></td></tr></table></figure>



<h2 id="11-æ˜¾å¡æ€§èƒ½æµ‹è¯•-unixbenchï¼ˆç”¨æ—¶çº¦åŠå°æ—¶ï¼‰"><a href="#11-æ˜¾å¡æ€§èƒ½æµ‹è¯•-unixbenchï¼ˆç”¨æ—¶çº¦åŠå°æ—¶ï¼‰" class="headerlink" title="11 æ˜¾å¡æ€§èƒ½æµ‹è¯•-unixbenchï¼ˆç”¨æ—¶çº¦åŠå°æ—¶ï¼‰"></a>11 æ˜¾å¡æ€§èƒ½æµ‹è¯•-unixbenchï¼ˆç”¨æ—¶çº¦åŠå°æ—¶ï¼‰</h2><blockquote>
<p>1ã€æµ‹è¯•2Dæ˜¾ç¤ºå¤„ç†æ€§èƒ½ï¼Œä¸»è¦åŒ…æ‹¬ç”»ç‚¹ã€ç”»çº¿ã€ç”»ä¸‰è§’å½¢ã€ç”»å¹³è¡Œå››è¾¹å½¢ã€ç”»æ­£æ–¹å½¢ã€ç”»å¤šè¾¹å½¢ç­‰æ€§èƒ½æµ‹è¯•</p>
<p>2ã€æµ‹è¯•3Dæ˜¾ç¤ºå¤„ç†æ€§èƒ½ï¼Œä¸»è¦åŒ…æ‹¬3Dçš„æ˜¾ç¤ºã€è‰²å½©å¡«å……ã€æ¸²æŸ“ã€æ—‹è½¬ç­‰æ€§èƒ½æµ‹è¯•</p>
</blockquote>
<p>ç¼–è¯‘Unibench</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…ä¾èµ–</span></span><br><span class="line">apt-get install libgl1-mesa-dev</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹Makefileæ–‡ä»¶,é˜²æ­¢ç¼–è¯‘æŠ¥é”™</span></span><br><span class="line">vim UnixBench/Makefile</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç¬¬47è¡Œå–æ¶ˆæ³¨é‡Š</span></span><br><span class="line">GRAPHIC_TESTS = defined</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç¬¬50è¡ŒåŠ ä¸Š-lm</span></span><br><span class="line">GL_LIBS = -lGL -lXext -lX11 -lm</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç¬¬74è¡Œä¿®æ”¹</span></span><br><span class="line">OPTON = -O2 -fomit-frame-pointer -fforce-addr -ffast-math -Wall</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹Runæ–‡ä»¶</span></span><br><span class="line">vim UnixBench/Run</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç¬¬109-112è¡Œï¼Œä¿®æ”¹å¯æ”¯æŒçš„æœ€å¤§æ ¸æ•°ï¼Œå½“å‰æ˜¯8</span></span><br><span class="line">&#x27;system&#x27;    =&gt; &#123; &#x27;name&#x27; =&gt; &quot;System Benchmarks&quot;, &#x27;maxCopies&#x27; =&gt; 8 &#125;,</span><br><span class="line">&#x27;2d&#x27;        =&gt; &#123; &#x27;name&#x27; =&gt; &quot;2D Graphics Benchmarks&quot;, &#x27;maxCopies&#x27; =&gt; 8 &#125;,</span><br><span class="line">&#x27;3d&#x27;        =&gt; &#123; &#x27;name&#x27; =&gt; &quot;3D Graphics Benchmarks&quot;, &#x27;maxCopies&#x27; =&gt; 8 &#125;,</span><br><span class="line">&#x27;misc&#x27;      =&gt; &#123; &#x27;name&#x27; =&gt; &quot;Non-Index Benchmarks&quot;, &#x27;maxCopies&#x27; =&gt; 8 &#125;,</span><br></pre></td></tr></table></figure>

<p>ç¼–è¯‘è¿è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make clean &amp;&amp; make -j 8</span><br><span class="line">./Run graphics</span><br></pre></td></tr></table></figure>

<p>3Dæµ‹è¯•ä¼˜åŒ–</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºæ–‡ä»¶10-vsync.conf</span></span><br><span class="line">&lt;driconf&gt;</span><br><span class="line">    &lt;option name=&quot;vblank_mode&quot; value=&quot;0&quot; /&gt;</span><br><span class="line">&lt;/driconf&gt;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‹·è´æ–‡ä»¶åˆ°æŒ‡å®šè·¯å¾„</span></span><br><span class="line">sudo cp 10-vsync.conf  ~/.drirc</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿è¡Œæµ‹è¯•</span></span><br><span class="line">vblank_mode=0 ./Run ubgears</span><br></pre></td></tr></table></figure>

<h2 id="11-æ˜¾å¡æµ‹è¯•-Glmark2"><a href="#11-æ˜¾å¡æµ‹è¯•-Glmark2" class="headerlink" title="11 æ˜¾å¡æµ‹è¯•-Glmark2"></a>11 æ˜¾å¡æµ‹è¯•-Glmark2</h2><p>å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo ./waf configure --with-flavors=x11-gl</span><br><span class="line">sudo ./waf build -j 4</span><br><span class="line">sudo ./waf install</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">glmark2</span><br></pre></td></tr></table></figure>

<h2 id="12-æ˜¾å¡æµ‹è¯•-Glxgears"><a href="#12-æ˜¾å¡æµ‹è¯•-Glxgears" class="headerlink" title="12 æ˜¾å¡æµ‹è¯•-Glxgears"></a>12 æ˜¾å¡æµ‹è¯•-Glxgears</h2><p>å®‰è£…</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install mesa-utils</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ç»ˆç«¯æ‰§è¡Œ</span></span><br><span class="line">glxgears</span><br></pre></td></tr></table></figure>

<h2 id="12-ç½‘ç»œæ€§èƒ½æµ‹è¯•-Netperf"><a href="#12-ç½‘ç»œæ€§èƒ½æµ‹è¯•-Netperf" class="headerlink" title="12 ç½‘ç»œæ€§èƒ½æµ‹è¯•-Netperf"></a>12 ç½‘ç»œæ€§èƒ½æµ‹è¯•-Netperf</h2><blockquote>
<p>æµ‹è¯•ç½‘ç»œä¼ è¾“é€Ÿç‡ã€ç½‘ç»œååç‡ã€ç½‘ç»œå“åº”æ—¶é—´ç­‰ï¼ŒåŒ…æ‹¬TCPã€UDPæµååé€Ÿç‡ç­‰</p>
</blockquote>
]]></content>
      <categories>
        <category>æµ‹è¯•</category>
        <category>ä¿¡åˆ›POCæµ‹è¯•</category>
      </categories>
      <tags>
        <tag>å·¥ä½œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxç³»ç»Ÿè‡ªå¯åŠ¨åº”ç”¨</title>
    <url>/2022/07/22/04_%E6%9D%82%E8%AE%B0/Linux%E7%B3%BB%E7%BB%9F%E8%87%AA%E5%90%AF%E5%8A%A8%E5%BA%94%E7%94%A8/</url>
    <content><![CDATA[<p>â€œå‰è¨€ï¼šå·¥ä½œä¸Šæœ‰è¿™æ–¹é¢çš„éœ€æ±‚ï¼Œç‰¹è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿ä¹‹åå‚è€ƒâ€</p>
<h3 id="1-åˆ›å»ºrc-localæœåŠ¡æ–‡ä»¶ğŸŒ"><a href="#1-åˆ›å»ºrc-localæœåŠ¡æ–‡ä»¶ğŸŒ" class="headerlink" title="1 åˆ›å»ºrc-localæœåŠ¡æ–‡ä»¶ğŸŒ"></a>1 åˆ›å»ºrc-localæœåŠ¡æ–‡ä»¶ğŸŒ</h3><p>åˆ›å»ºæ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/systemd/system/rc-local.service</span><br></pre></td></tr></table></figure>

<p>å†…å®¹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=/etc/rc.local Compatibility</span><br><span class="line">ConditionPathExists=/etc/rc.local</span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/etc/rc.local start</span><br><span class="line">TimeoutSec=0</span><br><span class="line">StandardOutput=tty</span><br><span class="line">RemainAfterExit=yes</span><br><span class="line">SysVStartPriority=99</span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<h3 id="2-æ¿€æ´»rc-localæœåŠ¡ğŸŒ"><a href="#2-æ¿€æ´»rc-localæœåŠ¡ğŸŒ" class="headerlink" title="2 æ¿€æ´»rc-localæœåŠ¡ğŸŒ"></a>2 æ¿€æ´»rc-localæœåŠ¡ğŸŒ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo systemctl enable rc-local.service	</span><br></pre></td></tr></table></figure>

<h3 id="3-æ·»åŠ æœåŠ¡æ–‡ä»¶ğŸŒ"><a href="#3-æ·»åŠ æœåŠ¡æ–‡ä»¶ğŸŒ" class="headerlink" title="3 æ·»åŠ æœåŠ¡æ–‡ä»¶ğŸŒ"></a>3 æ·»åŠ æœåŠ¡æ–‡ä»¶ğŸŒ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/rc.local</span><br></pre></td></tr></table></figure>

<p>å†…å®¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh -e</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="comment">#</span></span></span><br><span class="line">rc.local</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="comment">#</span></span></span><br><span class="line">This script is executed at the end of each multiuser runlevel.</span><br><span class="line"><span class="meta">#</span><span class="bash"> Make sure that the script will <span class="string">&quot;exit 0&quot;</span> on success or any other</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> value on error.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="comment">#</span></span></span><br><span class="line">In order to enable or disable this script just change the execution</span><br><span class="line"><span class="meta">#</span><span class="bash"> bits.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="comment">#</span></span></span><br><span class="line">By default this script does nothing.</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸‹é¢æ˜¯è¦å¼€æœºå¯åŠ¨çš„å‘½ä»¤</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨nginx</span></span><br><span class="line">/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨redis</span></span><br><span class="line">/home/sofware/redis/redis-4.8.0/src/redis-server /home/sofware/redis/redis-4.8.0/redis.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨nacos</span></span><br><span class="line">/bin/bash -f /home/Software/nacos/startup.sh -m standalone</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure>

<p>ç»™è„šæœ¬æ–‡ä»¶æ·»åŠ æ‰§è¡Œæƒé™  </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">ç»™äºˆè„šæœ¬æ‰§è¡Œæƒé™</span></span><br><span class="line">sudo chmod +x /etc/rc.local</span><br></pre></td></tr></table></figure>

<h3 id="4-å¯åŠ¨rc-localæœåŠ¡ğŸŒ"><a href="#4-å¯åŠ¨rc-localæœåŠ¡ğŸŒ" class="headerlink" title="4 å¯åŠ¨rc-localæœåŠ¡ğŸŒ"></a>4 å¯åŠ¨rc-localæœåŠ¡ğŸŒ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemc start rc-local.service</span><br></pre></td></tr></table></figure>

<h3 id="5-æŸ¥çœ‹æœåŠ¡å¯åŠ¨æƒ…å†µğŸŒ"><a href="#5-æŸ¥çœ‹æœåŠ¡å¯åŠ¨æƒ…å†µğŸŒ" class="headerlink" title="5 æŸ¥çœ‹æœåŠ¡å¯åŠ¨æƒ…å†µğŸŒ"></a>5 æŸ¥çœ‹æœåŠ¡å¯åŠ¨æƒ…å†µğŸŒ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl status rc-local</span><br></pre></td></tr></table></figure>

<p>æ­£å¸¸æƒ…å†µä¸‹<code>Active</code>çŠ¶æ€æ˜¾ç¤º<code>active(exited)</code>  </p>
]]></content>
      <categories>
        <category>æ‚è®°</category>
      </categories>
  </entry>
  <entry>
    <title>Github IOå¦‚ä½•ç»‘å®šåŸŸå</title>
    <url>/2022/07/20/04_%E6%9D%82%E8%AE%B0/Githubio%E5%A6%82%E4%BD%95%E7%BB%91%E5%AE%9A%E5%9F%9F%E5%90%8D/</url>
    <content><![CDATA[<blockquote>
<p>â€œå¦‚ä½•å°†è‡ªå·±çš„åŸŸåç»‘å®šåˆ°Github IOâ€</p>
</blockquote>
<h2 id="1-è·å–åŸåœ°å€IP"><a href="#1-è·å–åŸåœ°å€IP" class="headerlink" title="1 è·å–åŸåœ°å€IP"></a>1 è·å–åŸåœ°å€IP</h2><p>é€šè¿‡pingè·å–</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@3yserver ~]# ping gsproj.github.io</span><br><span class="line">PING gsproj.github.io (185.199.110.153) 56(84) bytes of data.</span><br><span class="line">64 bytes from cdn-185-199-110-153.github.com (185.199.110.153): icmp_seq=1 ttl=54 time=36.1 ms</span><br><span class="line">64 bytes from cdn-185-199-110-153.github.com (185.199.110.153): icmp_seq=2 ttl=54 time=36.0 ms</span><br><span class="line">64 bytes from cdn-185-199-110-153.github.com (185.199.110.153): icmp_seq=3 ttl=54 time=35.9 ms</span><br><span class="line">64 bytes from cdn-185-199-110-153.github.com (185.199.110.153): icmp_seq=4 ttl=54 time=35.9 ms</span><br><span class="line">64 bytes from cdn-185-199-110-153.github.com (185.199.110.153): icmp_seq=5 ttl=54 time=38.3 ms</span><br><span class="line">64 bytes from cdn-185-199-110-153.github.com (185.199.110.153): icmp_seq=6 ttl=54 time=36.1 ms</span><br></pre></td></tr></table></figure>

<h2 id="2-åœ¨CDNå°†IPåœ°å€å’ŒåŸŸåç»‘å®š"><a href="#2-åœ¨CDNå°†IPåœ°å€å’ŒåŸŸåç»‘å®š" class="headerlink" title="2 åœ¨CDNå°†IPåœ°å€å’ŒåŸŸåç»‘å®š"></a>2 åœ¨CDNå°†IPåœ°å€å’ŒåŸŸåç»‘å®š</h2><p><img src="/../../img/image-20220718111616313.png" alt="image-20220718111616313"></p>
<h2 id="3-åŸŸåç”³è¯·ç½‘ç«™å¡«å†™DNSè§£æåœ°å€"><a href="#3-åŸŸåç”³è¯·ç½‘ç«™å¡«å†™DNSè§£æåœ°å€" class="headerlink" title="3 åŸŸåç”³è¯·ç½‘ç«™å¡«å†™DNSè§£æåœ°å€"></a>3 åŸŸåç”³è¯·ç½‘ç«™å¡«å†™DNSè§£æåœ°å€</h2><p><img src="/../../img/image-20220718112050165.png" alt="image-20220718112050165"></p>
<h2 id="3-ç¡®ä¿æ–°åŸŸåèƒ½pingé€šï¼Œè§£ææ­£å¸¸"><a href="#3-ç¡®ä¿æ–°åŸŸåèƒ½pingé€šï¼Œè§£ææ­£å¸¸" class="headerlink" title="3 ç¡®ä¿æ–°åŸŸåèƒ½pingé€šï¼Œè§£ææ­£å¸¸"></a>3 ç¡®ä¿æ–°åŸŸåèƒ½pingé€šï¼Œè§£ææ­£å¸¸</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@3yserver ~]# ping codefish.cf</span><br><span class="line">PING codefish.cf (104.21.96.42) 56(84) bytes of data.</span><br><span class="line">64 bytes from 104.21.96.42 (104.21.96.42): icmp_seq=1 ttl=59 time=2.63 ms</span><br><span class="line">64 bytes from 104.21.96.42 (104.21.96.42): icmp_seq=2 ttl=59 time=2.64 ms</span><br><span class="line">64 bytes from 104.21.96.42 (104.21.96.42): icmp_seq=3 ttl=59 time=2.73 ms</span><br><span class="line">64 bytes from 104.21.96.42 (104.21.96.42): icmp_seq=4 ttl=59 time=2.71 ms</span><br><span class="line">64 bytes from 104.21.96.42 (104.21.96.42): icmp_seq=5 ttl=59 time=2.62 ms</span><br></pre></td></tr></table></figure>

<blockquote>
<p>PS: æ­¤å¤„IPä¸æ˜¯185å¼€å¤´çš„IPï¼Œæ˜¯å› ä¸ºcloudflareåšäº†ä»£ç†ï¼Œä¸å½±å“ä½¿ç”¨ï¼Œå¯ä»¥é€šå°±å¯ä»¥</p>
</blockquote>
<h2 id="4-åœ¨Githubæ·»åŠ åŸŸå"><a href="#4-åœ¨Githubæ·»åŠ åŸŸå" class="headerlink" title="4 åœ¨Githubæ·»åŠ åŸŸå"></a>4 åœ¨Githubæ·»åŠ åŸŸå</h2><p><img src="/../../img/image-20220718111923212.png" alt="image-20220718111923212"></p>
]]></content>
      <categories>
        <category>æ‚è®°</category>
      </categories>
  </entry>
  <entry>
    <title>KylinV10 æ¡Œé¢ç‰ˆSVNæ­å»º</title>
    <url>/2022/07/11/04_%E6%9D%82%E8%AE%B0/SVN%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<h2 id="ä¸€ã€æœåŠ¡ç«¯é…ç½®"><a href="#ä¸€ã€æœåŠ¡ç«¯é…ç½®" class="headerlink" title="ä¸€ã€æœåŠ¡ç«¯é…ç½®"></a>ä¸€ã€æœåŠ¡ç«¯é…ç½®</h2><h3 id="1-1-å®‰è£…SVN"><a href="#1-1-å®‰è£…SVN" class="headerlink" title="1.1 å®‰è£…SVN"></a>1.1 å®‰è£…SVN</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get install subversion</span><br></pre></td></tr></table></figure>

<h3 id="1-2-æ–°å»ºä»“åº“æ–‡ä»¶å¤¹"><a href="#1-2-æ–°å»ºä»“åº“æ–‡ä»¶å¤¹" class="headerlink" title="1.2 æ–°å»ºä»“åº“æ–‡ä»¶å¤¹"></a>1.2 æ–°å»ºä»“åº“æ–‡ä»¶å¤¹</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºé¡¹ç›®ä»“åº“æ–‡ä»¶å¤¹</span></span><br><span class="line">mkdir /data/svn/project</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹æ–‡ä»¶å¤¹æƒé™</span></span><br><span class="line">chmod -R 777 /data/svn/project</span><br></pre></td></tr></table></figure>

<h3 id="1-3-åˆ›å»ºç‰ˆæœ¬åº“"><a href="#1-3-åˆ›å»ºç‰ˆæœ¬åº“" class="headerlink" title="1.3 åˆ›å»ºç‰ˆæœ¬åº“"></a>1.3 åˆ›å»ºç‰ˆæœ¬åº“</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">svnadmin create /data/svn/project</span><br></pre></td></tr></table></figure>

<p>å®Œæˆåä¼šåœ¨æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆä¸€ç³»åˆ—æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">greatwall@greatwall-GW-001M1A-FTF:/data/svn/project$ ls</span><br><span class="line">conf  db  format  hooks  locks  README.txt</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹dbæƒé™</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chmod -R 777 db</span><br></pre></td></tr></table></figure>

<h3 id="1-4-è®¾ç½®è®¿é—®æƒé™"><a href="#1-4-è®¾ç½®è®¿é—®æƒé™" class="headerlink" title="1.4 è®¾ç½®è®¿é—®æƒé™"></a>1.4 è®¾ç½®è®¿é—®æƒé™</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim /data/svn/project/conf/svnserve.conf</span><br></pre></td></tr></table></figure>

<p>åšå¦‚ä¸‹ä¿®æ”¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">greatwall@greatwall-GW-001M1A-FTF:/data/svn/project/conf$ cat svnserve.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## This file controls the configuration of the svnserve daemon, if you</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## use it to allow access to this repository.  (If you only allow</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## access through http: and/or file: URLs, then this file is</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## irrelevant.)</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Visit http://subversion.apache.org/ for more information.</span></span></span><br><span class="line"></span><br><span class="line">[general]</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The anon-access and auth-access options control access to the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## repository for unauthenticated (a.k.a. anonymous) users and</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## authenticated users, respectively.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Valid values are &quot;write&quot;, &quot;read&quot;, and &quot;none&quot;.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Setting the value to &quot;none&quot; prohibits both reading and writing;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## &quot;read&quot; allows read-only access, and &quot;write&quot; allows complete</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## read/write access to the repository.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The sample settings below are the defaults and specify that anonymous</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## users have read-only access to the repository, while authenticated</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## users have read and write access to the repository.</span></span></span><br><span class="line">anon-access = none	# éè®¤è¯ç”¨æˆ·ä¸è®©å†™</span><br><span class="line">auth-access = write</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The password-db option controls the location of the password</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## database file.  Unless you specify a path starting with a /,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## the file&#x27;s location is relative to the directory containing</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## this configuration file.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## If SASL is enabled (see below), this file will NOT be used.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Uncomment the line below to use the default password file.</span></span></span><br><span class="line">password-db = passwd</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The authz-db option controls the location of the authorization</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## rules for path-based access control.  Unless you specify a path</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## starting with a /, the file&#x27;s location is relative to the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## directory containing this file.  The specified path may be a</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## repository relative URL (^/) or an absolute file:// URL to a text</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## file in a Subversion repository.  If you don&#x27;t specify an authz-db,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## no path-based access control is done.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Uncomment the line below to use the default authorization file.</span></span></span><br><span class="line">authz-db = authz</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The groups-db option controls the location of the groups file.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Unless you specify a path starting with a /, the file&#x27;s location is</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## relative to the directory containing this file.  The specified path</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## may be a repository relative URL (^/) or an absolute file:// URL to a</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## text file in a Subversion repository.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> groups-db = groups</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## This option specifies the authentication realm of the repository.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## If two repositories have the same authentication realm, they should</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## have the same password database, and vice versa.  The default realm</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## is repository&#x27;s uuid.</span></span></span><br><span class="line">realm = My First Repository</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The force-username-case option causes svnserve to case-normalize</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## usernames before comparing them against the authorization rules in the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## authz-db file configured above.  Valid values are &quot;upper&quot; (to upper-</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## case the usernames), &quot;lower&quot; (to lowercase the usernames), and</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## &quot;none&quot; (to compare usernames as-is without case conversion, which</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## is the default behavior).</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> force-username-case = none</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The hooks-env options specifies a path to the hook script environment</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## configuration file. This option overrides the per-repository default</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## and can be used to configure the hook script environment for multiple</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## repositories in a single file, if an absolute path is specified.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Unless you specify an absolute path, the file&#x27;s location is relative</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## to the directory containing this file.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> hooks-env = hooks-env</span></span><br><span class="line"></span><br><span class="line">[sasl]</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## This option specifies whether you want to use the Cyrus SASL</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## library for authentication. Default is false.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## This section will be ignored if svnserve is not built with Cyrus</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## SASL support; to check, run &#x27;svnserve --version&#x27; and look for a line</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## reading &#x27;Cyrus SASL authentication is available.&#x27;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> use-sasl = <span class="literal">true</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## These options specify the desired strength of the security layer</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## that you want SASL to provide. 0 means no encryption, 1 means</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## integrity-checking only, values larger than 1 are correlated</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## to the effective key length for encryption (e.g. 128 means 128-bit</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## encryption). The values below are the defaults.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> min-encryption = 0</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> max-encryption = 256</span></span><br></pre></td></tr></table></figure>

<h3 id="1-5-æ·»åŠ è®¿é—®ç”¨æˆ·"><a href="#1-5-æ·»åŠ è®¿é—®ç”¨æˆ·" class="headerlink" title="1.5 æ·»åŠ è®¿é—®ç”¨æˆ·"></a>1.5 æ·»åŠ è®¿é—®ç”¨æˆ·</h3><p>ä¿®æ”¹passwdæ–‡ä»¶ï¼Œæ·»åŠ è®¿é—®ç”¨æˆ·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">greatwall@greatwall-GW-001M1A-FTF:/data/svn/project/conf$ cat passwd</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## This file is an example password file for svnserve.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Its format is similar to that of svnserve.conf. As shown in the</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## example below it contains one section labelled [users].</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The name and password for each user follow, one account per line.</span></span></span><br><span class="line"></span><br><span class="line">[users]</span><br><span class="line"><span class="meta">#</span><span class="bash"> harry = harryssecret</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> sally = sallyssecret</span></span><br><span class="line">admin=mysecret</span><br><span class="line">gs=mysecret</span><br></pre></td></tr></table></figure>

<h3 id="1-6-è®¾ç½®ç”¨æˆ·æƒé™"><a href="#1-6-è®¾ç½®ç”¨æˆ·æƒé™" class="headerlink" title="1.6 è®¾ç½®ç”¨æˆ·æƒé™"></a>1.6 è®¾ç½®ç”¨æˆ·æƒé™</h3><p>ä¿®æ”¹authzæ–‡ä»¶ï¼Œè®¾ç½®ç”¨æˆ·æƒé™</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">greatwall@greatwall-GW-001M1A-FTF:/data/svn/project/conf$ cat authz</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## This file is an example authorization file for svnserve.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## Its format is identical to that of mod_authz_svn authorization</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## files.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## As shown below each section defines authorizations for the path and</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## (optional) repository specified by the section name.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## The authorizations follow. An authorization line can refer to:</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##  - a single user,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##  - a group of users defined in a special [groups] section,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##  - an alias defined in a special [aliases] section,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##  - all authenticated users, using the &#x27;$authenticated&#x27; token,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##  - only anonymous users, using the &#x27;$anonymous&#x27; token,</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##  - anyone, using the &#x27;*&#x27; wildcard.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## A match can be inverted by prefixing the rule with &#x27;~&#x27;. Rules can</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## grant read (&#x27;r&#x27;) access, read-write (&#x27;rw&#x27;) access, or no access</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## (&#x27;&#x27;).</span></span></span><br><span class="line"></span><br><span class="line">[aliases]</span><br><span class="line"><span class="meta">#</span><span class="bash"> joe = /C=XZ/ST=Dessert/L=Snake City/O=Snake Oil, Ltd./OU=Research Institute/CN=Joe Average</span></span><br><span class="line"></span><br><span class="line">[groups]</span><br><span class="line"><span class="meta">#</span><span class="bash"> harry_and_sally = harry,sally</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> harry_sally_and_joe = harry,sally,&amp;joe</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> [/foo/bar]</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> harry = rw</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &amp;joe = r</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> * =</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> [repository:/baz/fuz]</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> @harry_and_sally = rw</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> * = r</span></span><br><span class="line"></span><br><span class="line">team1=admin,gs	# åˆ›å»ºç”¨æˆ·ç»„</span><br><span class="line"></span><br><span class="line">[/]</span><br><span class="line">@team1 = rw # ç”¨æˆ·ç»„æƒé™è®¾ç½®ä¸ºè¯»å†™</span><br><span class="line">* = r</span><br></pre></td></tr></table></figure>

<h3 id="1-7-å¯åŠ¨æœåŠ¡"><a href="#1-7-å¯åŠ¨æœåŠ¡" class="headerlink" title="1.7 å¯åŠ¨æœåŠ¡"></a>1.7 å¯åŠ¨æœåŠ¡</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">svnserve -d -r /data/svn</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹æœåŠ¡æ˜¯å¦åœ¨è¿è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ps aux | grep svnserve</span><br></pre></td></tr></table></figure>

<p>å¹²æ‰æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">killall svnserve</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€å®¢æˆ·ç«¯è¿æ¥"><a href="#äºŒã€å®¢æˆ·ç«¯è¿æ¥" class="headerlink" title="äºŒã€å®¢æˆ·ç«¯è¿æ¥"></a>äºŒã€å®¢æˆ·ç«¯è¿æ¥</h2><p>svn:&#x2F;&#x2F;10.47.76.90&#x2F;project</p>
]]></content>
      <categories>
        <category>æ‚è®°</category>
      </categories>
  </entry>
  <entry>
    <title>æµ‹è¯•å·¥å…·ä½¿ç”¨è¯´æ˜-å®Œå–„ä¸­</title>
    <url>/2022/07/06/02_%E6%B5%8B%E8%AF%95/02_%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E-%E5%AE%8C%E5%96%84%E4%B8%AD/</url>
    <content><![CDATA[<h1 id="æµ‹è¯•å·¥å…·ä½¿ç”¨è¯´æ˜-æ±‡æ€»"><a href="#æµ‹è¯•å·¥å…·ä½¿ç”¨è¯´æ˜-æ±‡æ€»" class="headerlink" title="æµ‹è¯•å·¥å…·ä½¿ç”¨è¯´æ˜-æ±‡æ€»"></a>æµ‹è¯•å·¥å…·ä½¿ç”¨è¯´æ˜-æ±‡æ€»</h1><h1 id="ä¸€ã€SPEC-CPU-2017-æµ‹è¯•"><a href="#ä¸€ã€SPEC-CPU-2017-æµ‹è¯•" class="headerlink" title="ä¸€ã€SPEC CPU 2017 æµ‹è¯•"></a>ä¸€ã€SPEC CPU 2017 æµ‹è¯•</h1><h2 id="1-1-æ¦‚è¿°"><a href="#1-1-æ¦‚è¿°" class="headerlink" title="1.1 æ¦‚è¿°"></a>1.1 æ¦‚è¿°</h2><p>â€‹	æ ‡å‡†æ€§èƒ½è¯„æµ‹æœºæ„ï¼ˆSPECï¼‰å¼€å‘çš„ç”¨äºè¯„æµ‹CPUæ€§èƒ½çš„åŸºå‡†ç¨‹åºæµ‹è¯•ç»„ï¼Œæ˜¯ä¸€å¥—CPUå­ç³»ç»Ÿæµ‹è¯•å·¥å…·ã€‚å¤„ç†å™¨ã€å†…å­˜å’Œç¼–è¯‘éƒ½ä¼šå½±å“æœ€ç»ˆçš„æµ‹è¯•ç»“æœï¼Œç›®å‰SPEC CPUæ˜¯ä¸šç•Œé¦–é€‰çš„CPUè¯„æµ‹å·¥å…·ã€‚ </p>
<h2 id="1-2-å·¥å…·å®‰è£…"><a href="#1-2-å·¥å…·å®‰è£…" class="headerlink" title="1.2 å·¥å…·å®‰è£…"></a>1.2 å·¥å…·å®‰è£…</h2><p>è·å–é•œåƒåŒ…ï¼š</p>
<p>â€‹	cpu2017-1_0_5.iso</p>
<p>æŒ‚è½½IOS</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mount -o loop -t iso9660 cpu2017-1_0_5.iso /xxx/cpu2017CD</span><br></pre></td></tr></table></figure>

<p>å®‰è£…å·¥å…·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /xxx/cpu2017CD</span><br><span class="line">./install.sh</span><br></pre></td></tr></table></figure>

<h2 id="1-3-æµ‹è¯•æ­¥éª¤"><a href="#1-3-æµ‹è¯•æ­¥éª¤" class="headerlink" title="1.3 æµ‹è¯•æ­¥éª¤"></a>1.3 æµ‹è¯•æ­¥éª¤</h2><p>spec2017ä¸»è¦åˆ†ä¸ºå››é¡¹æµ‹è¯•ï¼š</p>
<ul>
<li>â€‹	intrate</li>
<li>â€‹	fprate</li>
<li>â€‹	intspeed</li>
<li>â€‹	fpspeed</li>
</ul>
<p>â€‹	æ ¹æ®éœ€è¦æµ‹è¯•çš„cpuå‹å·ï¼Œå¯ä»¥åˆ°å®˜ç½‘ä¸‹è½½ç›¸åº”çš„cfgæ–‡ä»¶ï¼Œä¿®æ”¹iccã€Jemallocåº“ã€qkmallocåº“çš„è·¯å¾„ï¼Œæ”¾å…¥configæ–‡ä»¶å¤¹ä¸­ã€‚</p>
<p>æµ‹è¯•å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">source shrc</span><br><span class="line">ulimit -s unlimited</span><br><span class="line"><span class="meta">#</span><span class="bash"> speed æµ‹è¯•</span></span><br><span class="line">runcpu --config=icc-speed-official.cfg --threads=48 --define cores=48 -n 3 -i ref fpspeed intspeed</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> rate æµ‹è¯•</span></span><br><span class="line">runcpu --config=icc-rate-official.cfg -copies=48 -n 3 -i ref intrate fprate</span><br><span class="line"></span><br><span class="line">-----------------------------------------------------------------------</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä»…ç¼–è¯‘ä¸è·‘æµ‹è¯•</span></span><br><span class="line">--action=build</span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡æ–°ç¼–è¯‘</span></span><br><span class="line">--rebuild</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç»‘æ ¸è·‘</span></span><br><span class="line">taskset -c </span><br></pre></td></tr></table></figure>

<h2 id="1-4-æµ‹è¯•ä¼˜åŒ–"><a href="#1-4-æµ‹è¯•ä¼˜åŒ–" class="headerlink" title="1.4 æµ‹è¯•ä¼˜åŒ–"></a>1.4 æµ‹è¯•ä¼˜åŒ–</h2><blockquote>
<p>Biosè®¾ç½®ï¼š</p>
<p>â€‹	å¼€å¯è¶…çº¿ç¨‹</p>
<p>â€‹	 å°è¯•å¼€å¯LLC-PREFETCH</p>
</blockquote>
<h2 id="1-5-å…¶ä»–äº‹é¡¹ï¼š"><a href="#1-5-å…¶ä»–äº‹é¡¹ï¼š" class="headerlink" title="1.5 å…¶ä»–äº‹é¡¹ï¼š"></a>1.5 å…¶ä»–äº‹é¡¹ï¼š</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cfgæ–‡ä»¶ä¸­çš„submitå¯ä»¥è®¾ç½®ç»‘æ ¸é€‰é¡¹</span><br></pre></td></tr></table></figure>

<h1 id="äºŒã€SPEC-CPU-2006-æµ‹è¯•"><a href="#äºŒã€SPEC-CPU-2006-æµ‹è¯•" class="headerlink" title="äºŒã€SPEC CPU 2006 æµ‹è¯•"></a>äºŒã€SPEC CPU 2006 æµ‹è¯•</h1><h2 id="2-1-æ¦‚è¿°"><a href="#2-1-æ¦‚è¿°" class="headerlink" title="2.1 æ¦‚è¿°"></a>2.1 æ¦‚è¿°</h2><p>â€‹	ä½œç”¨åŒSpec CPU 2017, è¿‘å¹´æ¥é€æ¸è¢«æ·˜æ±°</p>
<h2 id="2-2-æµ‹è¯•æ­¥éª¤"><a href="#2-2-æµ‹è¯•æ­¥éª¤" class="headerlink" title="2.2 æµ‹è¯•æ­¥éª¤"></a>2.2 æµ‹è¯•æ­¥éª¤</h2><p>1ã€spec2006.tgz è§£å‹ï¼Œä½¿ç”¨install.shå®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">SPEC CPU2006 Installation</span><br><span class="line">Top of the CPU2006 tree is &#x27;/vol8/tarball/cpu2006&#x27;</span><br><span class="line">These appear to be valid toolsets:</span><br><span class="line">ft-spec2006-tool</span><br><span class="line">aarch64-linux</span><br><span class="line">Enter the architecture you are using:</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt; aarch64-linux</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">source shrc</span><br><span class="line"><span class="meta">#</span><span class="bash"> å•æ ¸æµ‹è¯•</span></span><br><span class="line">runspec -c linux64-arm64-gcc52.cfg -i ref -n 3 -I all </span><br><span class="line"><span class="meta">#</span><span class="bash"> å¤šæ ¸æµ‹è¯•ï¼ˆ16ï¼‰</span></span><br><span class="line">runspec -c linux64-arm64-gcc52.cfg -r 16 -n 3 -i ref -I all</span><br></pre></td></tr></table></figure>

<h1 id="ä¸‰ã€-SPEC-OMP-2012-æµ‹è¯•"><a href="#ä¸‰ã€-SPEC-OMP-2012-æµ‹è¯•" class="headerlink" title="ä¸‰ã€ SPEC OMP 2012 æµ‹è¯•"></a>ä¸‰ã€ SPEC OMP 2012 æµ‹è¯•</h1><h2 id="3-1-æ¦‚è¿°"><a href="#3-1-æ¦‚è¿°" class="headerlink" title="3.1 æ¦‚è¿°"></a>3.1 æ¦‚è¿°</h2><p>â€‹	åŸºäºSPECæµ‹è¯•å¥—ä»¶çš„OpenMPè¯„æµ‹å·¥å…·ï¼Œå…¶ä¸­åŒ…å«15ä¸ªåŸºäºOpenMPçš„å¹¶è¡Œç¨‹åºã€‚</p>
<h2 id="3-2-å·¥å…·å®‰è£…"><a href="#3-2-å·¥å…·å®‰è£…" class="headerlink" title="3.2 å·¥å…·å®‰è£…"></a>3.2 å·¥å…·å®‰è£…</h2><p>â€‹	è·å–æºåŒ…ï¼š</p>
<p>â€‹		omp2012-1.1.zip</p>
<p>â€‹	è§£å‹åä½¿ç”¨install.shå®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">./install.sh -d /home/xx</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä»…ç¼–è¯‘</span></span><br><span class="line">runspec --action=build --config=gcc.cfg -i ref -I all</span><br></pre></td></tr></table></figure>

<h2 id="3-3-æµ‹è¯•æ­¥éª¤"><a href="#3-3-æµ‹è¯•æ­¥éª¤" class="headerlink" title="3.3 æµ‹è¯•æ­¥éª¤"></a>3.3 æµ‹è¯•æ­¥éª¤</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">source shrc</span><br><span class="line">ulimit -s unlimited</span><br><span class="line">export OMP_NUM_THREADS=48</span><br><span class="line">runspec --config=gcc.cfg --threads 48 -n 3 -i ref -I all</span><br></pre></td></tr></table></figure>

<h1 id="å››ã€NPB-æµ‹è¯•"><a href="#å››ã€NPB-æµ‹è¯•" class="headerlink" title="å››ã€NPB æµ‹è¯•"></a>å››ã€NPB æµ‹è¯•</h1><h2 id="4-1-æ¦‚è¿°"><a href="#4-1-æ¦‚è¿°" class="headerlink" title="4.1 æ¦‚è¿°"></a>4.1 æ¦‚è¿°</h2><p>â€‹	NASå¹¶è¡ŒåŸºå‡†æµ‹è¯•ç¨‹åºï¼ˆNPBï¼‰ï¼Œæ˜¯ç”±ç¾å›½èˆªç©ºèˆªå¤©å±€å¼€å‘çš„ä¸€å¥—ä»£è¡¨æµä½“åŠ¨åŠ›å­¦è®¡ç®—çš„åº”ç”¨ç¨‹åºé›†ï¼Œå®ƒå·²ç»æˆä¸ºå…¬è®¤çš„ç”¨äºæµ‹è¯„å¤§è§„æ¨¡å¹¶è¡Œæœºå’Œè¶…çº§è®¡ç®—æœºçš„æ ‡å‡†æµ‹è¯•ç¨‹åºã€‚NPBå¯ç”¨äºå¸¸ç”¨çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå¦‚MPIå’ŒOpenMPã€‚</p>
<h2 id="4-2-å·¥å…·å®‰è£…"><a href="#4-2-å·¥å…·å®‰è£…" class="headerlink" title="4.2 å·¥å…·å®‰è£…"></a>4.2 å·¥å…·å®‰è£…</h2><p>æºåŒ…è·å–ï¼š</p>
<p>â€‹	NPB3.4.tar.gz         OpenMP || MPICH</p>
<p>â€‹	NPB3.4-MZ.tar.gz  OpenMP &amp;&amp; MPICH</p>
<p>è§£å‹å³å¯ã€‚</p>
<h2 id="4-3-æµ‹è¯•æ­¥éª¤"><a href="#4-3-æµ‹è¯•æ­¥éª¤" class="headerlink" title="4.3 æµ‹è¯•æ­¥éª¤"></a>4.3 æµ‹è¯•æ­¥éª¤</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make suite</span><br><span class="line">cd bin</span><br><span class="line">mpirun -np 4 ./xxx</span><br></pre></td></tr></table></figure>

<h1 id="äº”ã€Stream-æµ‹è¯•"><a href="#äº”ã€Stream-æµ‹è¯•" class="headerlink" title="äº”ã€Stream æµ‹è¯•"></a>äº”ã€Stream æµ‹è¯•</h1><h2 id="5-1-æ¦‚è¿°"><a href="#5-1-æ¦‚è¿°" class="headerlink" title="5.1 æ¦‚è¿°"></a>5.1 æ¦‚è¿°</h2><p>â€‹	STREAMæ˜¯ä¸€å¥—ç»¼åˆæ€§èƒ½æµ‹è¯•ç¨‹åºé›†ï¼Œé€šè¿‡fortranå’ŒCä¸¤ç§é«˜çº§ä¸”é«˜æ•ˆçš„è¯­è¨€ç¼–å†™å®Œæˆï¼Œç”±äºè¿™ä¸¤ç§è¯­è¨€åœ¨æ•°å­¦è®¡ç®—æ–¹é¢çš„é«˜æ•ˆç‡ï¼Œ ä½¿å¾— STREAM æµ‹è¯•ä¾‹ç¨‹å¯ä»¥å……åˆ†å‘æŒ¥å‡ºå†…å­˜çš„èƒ½åŠ›ã€‚Streamæµ‹è¯•æ˜¯å†…å­˜æµ‹è¯•ä¸­ä¸šç•Œå…¬è®¤çš„å†…å­˜å¸¦å®½æ€§èƒ½æµ‹è¯•åŸºå‡†å·¥å…·ã€‚</p>
<h2 id="5-2-å·¥å…·å®‰è£…"><a href="#5-2-å·¥å…·å®‰è£…" class="headerlink" title="5.2 å·¥å…·å®‰è£…"></a>5.2 å·¥å…·å®‰è£…</h2><p>æºåŒ…è·å–ï¼š</p>
<p>â€‹	stream.tgz  åˆ˜æ–°å¨ƒä¿®æ”¹è¿‡</p>
<p>â€‹	<font color='red'>Intelå¹³å°è¯·ç”¨ICC</font></p>
<p>è§£å‹åç¼–è¯‘stream.c, ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">icc -O3 -fopenmp -DNTIMES=10 -mcmodel=large -o stream_c stream.c</span><br></pre></td></tr></table></figure>

<p>æ²¡æœ‰ä¿®æ”¹è¿‡çš„æ€ä¹ˆç¼–è¯‘å‘¢ï¼Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">icc -mtune=native -march=native -O3 -mcmodel=large -fopenmp -DSTREAM_ARRAY_SIZE=100000000 -DNTIMES=30 -DOFFSET=512 stream.c -o stream-gs</span><br></pre></td></tr></table></figure>

<h2 id="5-3-æµ‹è¯•æ­¥éª¤"><a href="#5-3-æµ‹è¯•æ­¥éª¤" class="headerlink" title="5.3 æµ‹è¯•æ­¥éª¤"></a>5.3 æµ‹è¯•æ­¥éª¤</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export OMP_NUM_THREADS=48/32/16/8/4  # è®¾ç½®æ¯ä¸ªè¿›ç¨‹çš„çº¿ç¨‹æ•°</span><br><span class="line">./stream_c 200000 # ä½¿ç”¨200Gå†…å­˜</span><br></pre></td></tr></table></figure>

<h2 id="5-4-å…¶ä»–äº‹é¡¹"><a href="#5-4-å…¶ä»–äº‹é¡¹" class="headerlink" title="5.4 å…¶ä»–äº‹é¡¹"></a>5.4 å…¶ä»–äº‹é¡¹</h2><blockquote>
<p><code>STREAM_ARRAY_SIZE</code>å³<code>N</code>æŒ‡å®šè®¡ç®—ä¸­a[],b[],c[]ä¸‰ä¸ªæ•°ç»„çš„å¤§å°ï¼Œä¸”æ•°ç»„çš„å€¼é‡‡ç”¨äº†åŒç²¾åº¦ï¼ˆ8ä¸ªå­—èŠ‚ï¼‰ã€‚æ•°ç»„çš„ç»´æ•° Nå®šä¹‰æ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<p>ä¸€ã€è¦å……åˆ†è€ƒè™‘å†…å­˜å®¹é‡çš„éœ€æ±‚ï¼Œç²—ç•¥ä¼°è®¡æ˜¯ NÃ— 8ï¼ˆåŒç²¾åº¦æµ®ç‚¹ç±»å‹ï¼‰ Ã— 3 ï¼ˆä¸‰ä¸ªæ•°ç»„ï¼‰&lt;&#x3D; 0.6*Mï¼›M æ˜¯ç”¨æˆ·çš„å¯ç”¨å†…å­˜ã€‚</p>
<p>äºŒã€è¦ä¿è¯æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨åˆ°çš„å†…å­˜å®¹é‡è¦å¤§äºå¤„ç†å™¨å†…çš„ç¼“å­˜ï¼Œåªæœ‰è¿™æ ·æ‰ä¼šæœ‰å†…å­˜çš„æ“ä½œï¼Œè€Œä¸ä»…ä»…æ˜¯å¯¹å¤„ç†å™¨å†…ç¼“å­˜çš„æ“ä½œã€‚</p>
<p>ä¸‰ã€ä¸ºäº†ä¿è¯æµ‹è¯•å¯ä»¥æŒç»­ä¸€æ®µæ—¶é—´ï¼Œæµ‹è¯•è¿‡ç¨‹ä¸­å†…å­˜å¸¦å®½å¯ä»¥è¾¾åˆ°ä¸€å®šçš„æœ€å¤§å€¼ï¼Œ ä»è€Œé¿å…å¾—ä¸åˆ°å®é™…æœ€å¤§å³°å€¼çš„æƒ…å†µï¼Œå¦‚æœå››é¡¹æµ‹è¯•ä¸­æœ‰å®Œæˆæ—¶é—´å°äº20å¾®ç§’çš„æƒ…å†µï¼Œå°±éœ€è¦é€‚å½“çš„å¢å¤§æµ‹è¯•æ•°ç»„çš„ç»´åº¦ Nã€‚</p>
</blockquote>
<h1 id="å…­ã€Linpack-æµ‹è¯•"><a href="#å…­ã€Linpack-æµ‹è¯•" class="headerlink" title="å…­ã€Linpack æµ‹è¯•"></a>å…­ã€Linpack æµ‹è¯•</h1><h2 id="6-1-æ¦‚è¿°"><a href="#6-1-æ¦‚è¿°" class="headerlink" title="6.1 æ¦‚è¿°"></a>6.1 æ¦‚è¿°</h2><p>â€‹	Linpackæ˜¯å›½é™…ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„æµ‹è¯•é«˜æ€§èƒ½è®¡ç®—æœºç³»ç»Ÿæµ®ç‚¹æ€§èƒ½çš„åŸºå‡†æµ‹è¯•ã€‚é€šè¿‡å¯¹é«˜æ€§èƒ½è®¡ç®—æœºé‡‡ç”¨é«˜æ–¯æ¶ˆå…ƒæ³•æ±‚è§£ä¸€å…ƒ Næ¬¡ç¨ å¯†çº¿æ€§ä»£æ•°æ–¹ç¨‹ç»„çš„æµ‹è¯•ï¼Œè¯„ä»·é«˜æ€§èƒ½è®¡ç®—æœºçš„æµ®ç‚¹è®¡ç®—æ€§èƒ½ã€‚Linpackçš„ç»“æœæŒ‰æ¯ç§’æµ®ç‚¹è¿ç®—æ¬¡æ•°ï¼ˆflopsï¼‰è¡¨ç¤ºã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">N ^ 2 * 8 = æ€»å†…å­˜</span><br></pre></td></tr></table></figure>

<h2 id="6-2-å·¥å…·å®‰è£…"><a href="#6-2-å·¥å…·å®‰è£…" class="headerlink" title="6.2 å·¥å…·å®‰è£…"></a>6.2 å·¥å…·å®‰è£…</h2><p>æºåŒ…è·å–ï¼š</p>
<p>â€‹	linpack.tgz</p>
<p>è§£å‹å³å¯ã€‚</p>
<h2 id="6-3-æµ‹è¯•æ­¥éª¤"><a href="#6-3-æµ‹è¯•æ­¥éª¤" class="headerlink" title="6.3 æµ‹è¯•æ­¥éª¤"></a>6.3 æµ‹è¯•æ­¥éª¤</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1è¿›48çº¿100Gå†…å­˜</span></span><br><span class="line">./xhpl -n 1 -b 384 -p 1 -q 1 -m 100000</span><br><span class="line"><span class="meta">#</span><span class="bash"> 1è¿›48çº¿200Gå†…å­˜</span></span><br><span class="line">./xhpl -n 1 -b 384 -p 1 -q 1 -m 200000</span><br><span class="line"><span class="meta">#</span><span class="bash"> 2è¿›24çº¿å…±100Gå†…å­˜</span></span><br><span class="line">mpirun -n 2 ./xhpl -b 384 -p 1 -q 2 -m 50000</span><br><span class="line"><span class="meta">#</span><span class="bash"> 2è¿›24çº¿å…±200Gå†…å­˜</span></span><br><span class="line">mpirun -n 2 ./xhpl -b 384 -p 1 -q 2 -m 100000</span><br></pre></td></tr></table></figure>

<p>ç”¨mpirunæäº¤xhplrun.shæ•ˆæœæ›´å¥½</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">PRO_SIZE=$&#123;PMI_SIZE&#125;</span><br><span class="line">threads=`echo $&#123;Cores&#125;/$&#123;PMI_SIZE&#125; | bc`</span><br><span class="line">PMI_RANK_my=$&#123;PMI_RANK&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-4-æµ‹è¯•ä¼˜åŒ–ï¼ˆé‡ç‚¹ï¼‰"><a href="#6-4-æµ‹è¯•ä¼˜åŒ–ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="6.4 æµ‹è¯•ä¼˜åŒ–ï¼ˆé‡ç‚¹ï¼‰"></a>6.4 æµ‹è¯•ä¼˜åŒ–ï¼ˆé‡ç‚¹ï¼‰</h2><blockquote>
<p>ä¸€ã€è®¡ç®—ç†è®ºå†…å­˜æ€»å¸¦å®½</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">è®¡ç®—æ–¹æ³•ï¼š</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">æŸ¥çœ‹å†…å­˜å¸¦å®½ï¼š</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">dmidecode | grep -A 16 <span class="string">&quot;Memory Device&quot;</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">ä¾‹å¦‚å†…å­˜ä¿¡æ¯ä¸ºï¼š</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">ä¸‰æ˜Ÿ DDR4</span> </span><br><span class="line"><span class="meta">&gt;</span><span class="bash">16G æ¯æ ¹</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">2666 MT/sï¼ˆMhzï¼‰</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">æŸ¥çœ‹cpuæ”¯æŒçš„é€šé“æ•°ï¼Œä¾‹å¦‚intel 6252Næ”¯æŒ6é€šé“ï¼Œä¸¤ä¸ªCPUæ”¯æŒ12é€šé“</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">ç†è®ºå¸¦å®½è®¡ç®—DDR4ï¼š</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">å•æ¡å†…å­˜å¸¦å®½ = å†…å­˜æ ¸å¿ƒé¢‘ç‡ x å†…å­˜æ€»çº¿ä½æ•° x å€å¢ç³»æ•°</span></span><br><span class="line"> = 2666 * 64 / 8 = 21328 MB/s = 21.3G/s</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">12é€šé“æ€»å†…å­˜å¸¦å®½ = 21328 * 12 = 255936 = 250G/s</span></span><br></pre></td></tr></table></figure>

<p>äºŒã€ä½¿ç”¨streamæµ‹è¯•å®é™…å†…å­˜æ€»å¸¦å®½</p>
<p>â€‹	å¦‚æœå¯ä»¥è¾¾åˆ°90%æˆ–ä»¥ä¸Šï¼Œè¯´æ˜å†…å­˜å¸¦å®½æ­£å¸¸, ç»§ç»­Linpackæµ‹è¯•</p>
<p>ä¸‰ã€è®¡ç®—CPUç†è®ºå³°å€¼</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">è®¡ç®—æ–¹æ³•ï¼š</span></span><br><span class="line">Mhz * æ¯ä¸ªæ—¶é’Ÿå‘¨æœŸæ‰§è¡Œæµ®ç‚¹è¿ç®—çš„æ¬¡æ•° * CPUæ•°ç›®</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">=</span></span><br><span class="line">2.3 x ( 8 x 2 x 2 ) x 48 = 3532.8 Gflops</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">è¯´æ˜ï¼š</span></span><br><span class="line">å³°å€¼è®¡ç®—åˆ†ä¸ºå•ç²¾åº¦å’ŒåŒç²¾åº¦æµ®ç‚¹è¿ç®—</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">å•ç²¾åº¦ï¼š</span></span><br><span class="line">32bitçš„æŒ‡ä»¤é•¿åº¦çš„è¿ç®—ï¼Œå¯¹åº”32ä½æ“ä½œç³»ç»Ÿ</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">åŒç²¾åº¦ï¼š</span></span><br><span class="line">64bitçš„æŒ‡ä»¤é•¿åº¦çš„è¿ç®—ï¼Œå¯¹åº”64ä½æ“ä½œç³»ç»Ÿ</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">æŸ¥æ‰¾CPUå¯ä»¥å¤„ç†ä»€ä¹ˆæ ·çš„æŒ‡ä»¤é›†ï¼š</span></span><br><span class="line">ä¾‹å¦‚Intelå®˜ç½‘æŸ¥åˆ°Intel Xeon 6252N</span><br><span class="line">æ”¯æŒAVX-512ï¼Œ</span><br><span class="line"><span class="meta">#</span><span class="bash"> of AVX-512 FMA Units = 2</span></span><br><span class="line">(Fused Multiply Add instructions) èåˆäº† ä¹˜æ³• å’Œ åŠ æ³•</span><br><span class="line">å³å¯ä»¥å•ä¸ªå‘¨æœŸåŒæ—¶æ‰§è¡Œ2æ¡512bitçš„åŠ æ³•å’Œ2æ¡512bitçš„ä¹˜æ³•</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">ç†è§£ä¸Šè¿°ä¸¤ä¸ªæ¦‚å¿µï¼Œå¯ä»¥å¼€å§‹è®¡ç®—ï¼ˆCPUå•å‘¨æœŸæµ®ç‚¹è®¡ç®—èƒ½åŠ›ï¼‰</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">Intel 6252N (æ”¯æŒavx512ï¼Œæœ‰512ä½)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">å•ç²¾åº¦ï¼š</span></span><br><span class="line">2.3 x 512/32 x 2 x 2 = 147.2Gflops </span><br><span class="line"><span class="meta">&gt;</span><span class="bash">åŒç²¾åº¦</span></span><br><span class="line">2.3 x 512/64 x 2 x 2 = 73.6Gflops</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">åŒç²¾åº¦å…±48æ ¸</span></span><br><span class="line">74.6 x 48 = 3580</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">FT2000+ å’Œ FT1500A (åªæœ‰128ä½)ï¼ŒFT3000åŠ å…¥sveæŒ‡ä»¤é›†(128-256ä½)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">å•ç²¾åº¦ï¼š</span> </span><br><span class="line">2.2 x 128/32 * 2 = 4.4</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">åŒç²¾åº¦:</span></span><br><span class="line">2.2 x 128/64 * 2 = 8.8</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">åŒç²¾åº¦å…±64æ ¸</span></span><br><span class="line">8.8 x 64 = 563.2</span><br></pre></td></tr></table></figure>

<p>å››ã€ä½¿ç”¨Linapackæµ‹è¯•CPUå®é™…å³°å€¼</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">å¦‚æœæ€§èƒ½è¾¾åˆ°ç†è®ºå³°å€¼çš„70%è¯´æ˜æ­£å¸¸ï¼Œå¦‚æœæœªè¾¾åˆ°å°è¯•ä»¥ä¸‹ä¼˜åŒ–</span></span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">1ã€ä½¿ç”¨mpirunè¿è¡Œxhpl, æŒ‰`lscpu` ä¸­çš„NUMAåˆ†ç»„ç»‘å®š,`æ¯”å¦‚48æ ¸ï¼Œåˆ†ä¸ºä¸¤ä¸ªNuma Node`, åˆ™ç”¨mpirun`è·‘ä¸¤ä¸ªxhplè¿›ç¨‹`ï¼Œæ¯ä¸ªè¿›ç¨‹ä½¿ç”¨ OMP_NUM_THREADS=24, è·‘24çº¿ç¨‹ï¼Œè¿™æ ·å¯ä»¥å°†æ ¸ç”¨æ»¡ã€‚</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">åœ¨`Intel`å¹³å°ï¼Œä¸¤ä¸ªè¿›ç¨‹åˆ†åˆ«ä½¿ç”¨ HPL_HOST_CORE=<span class="string">&#x27;0-23&#x27;</span> ä»¥åŠ HPL_HOST_CORE=<span class="string">&#x27;24-47&#x27;</span> ç»‘å®šæ ¸</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">åœ¨`Arm64`å¹³å°ï¼Œåˆ™ä½¿ç”¨ GOMP_CPU_AFFINITY=<span class="string">&#x27;0-23&#x27;</span> ä»¥åŠ GOMP_CPU_AFFINITY=<span class="string">&#x27;24-47&#x27;</span> ç»‘å®š</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">2ã€å†…å­˜ä¸ç”¨åˆ†é…å¤ªå¤§ï¼Œæ ¹æ®streamæµ‹è¯•ç»“æœåˆ†é…ï¼Œä»å°å¼€å§‹æµ‹</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">3ã€Intelå¹³å°ç¼–è¯‘å™¨ä½¿ç”¨ICCï¼Œæµ‹è¯•linpackä½¿ç”¨iccè‡ªå¸¦çš„linpackï¼Œmpiä½¿ç”¨iccè‡ªå¸¦çš„</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">4ã€Biosä¸­å…³é—­è¶…çº¿ç¨‹ï¼Œå¼€å¯è¶…é¢‘(turbo/P-state)</span></span><br></pre></td></tr></table></figure>

<p><strong><font color="blue">å…ˆæµ‹stream,åˆ¤æ–­å¸¦å®½æ˜¯å¦æ­£å¸¸ï¼Œå†æµ‹linpackï¼Œç„¶åå†æµ‹Spec Cpu</font></strong></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Intelå¹³å°å¯ä»¥ä½¿ç”¨çš„æ§åˆ¶é¢‘ç‡çš„å‘½ä»¤</span></span><br><span class="line">cpupower -c all frequency-set -g performance</span><br><span class="line">cpupower -c 0-95 frequency-set -g userspace</span><br><span class="line">cpupower -c 0-95 frequency-set -f 2700000</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å½“å‰é¢‘ç‡æ§åˆ¶æ˜¯å¦ä¸ºperfomanceï¼Ÿ</span></span><br><span class="line">cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è·‘xhplä¹‹å‰è®¾ç½®æŒ‡ä»¤é›†ï¼Œæˆ–è®¸æœ‰ç”¨</span></span><br><span class="line">export MKL_ENABLE_INSTRUCTIONS=AVX512</span><br></pre></td></tr></table></figure>

<p><img src="G:\å·¥ä½œ\2020å¹´3æœˆ\CN9æ€§èƒ½æµ‹è¯•\æµ‹è¯•ç»„åˆ.png" alt="image-20200415171716940"></p>
<h2 id="6-5-HPL-datä¿®æ”¹"><a href="#6-5-HPL-datä¿®æ”¹" class="headerlink" title="6.5 HPL.datä¿®æ”¹"></a>6.5 HPL.datä¿®æ”¹</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ç¬¬1-2è¡Œï¼Œæ³¨é‡Šè¯´æ˜è¡Œ</span></span><br><span class="line">HPLinpack benchmark input file   </span><br><span class="line">Innovative Computing Laboratory, University of Tennessee  </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç¬¬ 3-4 è¡Œï¼Œè¾“å‡ºç»“æœæ–‡ä»¶çš„å½¢å¼</span></span><br><span class="line">HPL.out      output file name (if any)  </span><br><span class="line">6            device out (6=stdout,7=stderr,file) </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5-6è¡Œï¼Œæ±‚è§£çŸ©é˜µçš„å¤§å°</span></span><br><span class="line">1            # of problems sizes (N)  </span><br><span class="line">1000         Ns   </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 7-8è¡Œ æ±‚è§£çŸ©é˜µåˆ†å—çš„å¤§å°</span></span><br><span class="line">1            # of NBs</span><br><span class="line">192 256      NBs</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 9è¡Œ å¤„ç†å™¨é˜µåˆ—çš„æ’åˆ—æ–¹å¼ï¼Œè¡Œè¿˜æ˜¯åˆ—</span></span><br><span class="line">0ï¼šé€‚ç”¨äºèŠ‚ç‚¹è¾ƒå°‘ï¼Œå•ä¸ªèŠ‚ç‚¹CPUè¾ƒå¤šçš„èƒ–ç³»ç»Ÿ</span><br><span class="line">1ï¼šé€‚ç”¨äºèŠ‚ç‚¹è¾ƒå¤šï¼Œå•ä¸ªèŠ‚ç‚¹CPUè¾ƒå°‘çš„ç˜¦ç³»ç»Ÿï¼ˆæœºç¾¤ä¸Šè¿œå¥½äºæŒ‰è¡Œæ’åˆ—ï¼‰</span><br><span class="line">1            PMAP process mapping (0=Row-,1=Column-major) </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 10-12è¡Œ å®šä¹‰äºŒç»´å¤„ç†ç½‘æ ¼P/Q</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> P X Q = è¿›ç¨‹æ•°ï¼ŒPå°½é‡å°äºQ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> P=2^n,Pæœ€å¥½é€‰æ‹©2çš„å¹‚</span></span><br><span class="line">1            # of process grids (P x Q) </span><br><span class="line">1 2          Ps</span><br><span class="line">1 2          Qs</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 13è¡Œ è®¾ç½®é˜€å€¼ï¼Œä¸ç”¨ä¿®æ”¹</span></span><br><span class="line">16.0         threshold</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 14-21è¡Œ è®¾ç½®Lçš„åˆ†è§£æ–¹å¼</span></span><br><span class="line">1            # of panel fact</span><br><span class="line">2 1 0        PFACTs (0=left, 1=Crout, 2=Right) # å¯¹æ€§èƒ½å½±å“ä¸å¤§</span><br><span class="line">1            # of recursive stopping criterium</span><br><span class="line">4 8          NBMINs (&gt;= 1)   # 4æˆ–8éƒ½ä¸é”™</span><br><span class="line">1            # of panels in recursion</span><br><span class="line">2            NDIVs  # é€‰2æ¯”è¾ƒç†æƒ³</span><br><span class="line">1            # of recursive panel fact.</span><br><span class="line">1 0 2        RFACTs (0=left, 1=Crout, 2=Right) # å¯¹æ€§èƒ½å½±å“ä¸å¤§</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 22-23è¡Œ è®¾ç½®Lçš„æ¨ªå‘å¹¿æ’­æ–¹å¼</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å‰å››ç§ï¼Œé€‚ç”¨äºå¿«é€Ÿç½‘ç»œï¼Œåä¸¤ç§é€‚ç”¨äºé€Ÿåº¦è¾ƒæ…¢çš„ç½‘ç»œ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å°è§„æ¨¡ç³»ç»Ÿï¼Œé€‰æ‹©0/1ï¼Œå¤§è§„æ¨¡ç³»ç»Ÿé€‰æ‹©3</span></span><br><span class="line">1            # of broadcast</span><br><span class="line">0            BCASTs (0=1rg,1=1rM,2=2rg,3=2rM,4=Lng,5=LnM)</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 24-25è¡Œ è®¾ç½®æ¨ªå‘é€šä¿¡çš„é€šä¿¡æ·±åº¦</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å°è§„æ¨¡ç³»ç»Ÿé€‰æ‹©1/2ï¼Œå¤§è§„æ¨¡ç³»ç»Ÿ2-5ä¹‹é—´</span></span><br><span class="line">1            # of lookahead depth</span><br><span class="line">1            DEPTHs (&gt;=0)</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 26-27 è®¾ç½®Uçš„å¹¿æ’­ç®—æ³•</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å°è§„æ¨¡ç³»ç»Ÿï¼Œä½¿ç”¨ç¼ºçœå€¼å³å¯</span></span><br><span class="line">0            SWAP (0=bin-exch,1=long,2=mix)</span><br><span class="line">1            swapping threshold</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 28-29è¡Œ Lå’ŒUçš„æ•°æ®å­˜æ”¾æ ¼å¼</span></span><br><span class="line">0ï¼šæŒ‰åˆ—å­˜æ”¾</span><br><span class="line">1ï¼šæŒ‰è¡Œå­˜æ”¾</span><br><span class="line">0            L1 in (0=transposed,1=no-transposed) form</span><br><span class="line">0            U  in (0=transposed,1=no-transposed) form</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 30-31 ç¼ºçœå€¼å³å¯</span></span><br><span class="line">0            Equilibration (0=no,1=yes)</span><br><span class="line">8            memory alignment in double (&gt; 0)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="6-6-æµ‹è¯•è„šæœ¬ç¼–å†™"><a href="#6-6-æµ‹è¯•è„šæœ¬ç¼–å†™" class="headerlink" title="6.6 æµ‹è¯•è„šæœ¬ç¼–å†™"></a>6.6 æµ‹è¯•è„šæœ¬ç¼–å†™</h2><h3 id="6-6-1-æœ¬åœ°mpirunæµ‹è¯•è„šæœ¬ï¼ˆIntelç‰ˆæœ¬ï¼‰"><a href="#6-6-1-æœ¬åœ°mpirunæµ‹è¯•è„šæœ¬ï¼ˆIntelç‰ˆæœ¬ï¼‰" class="headerlink" title="6.6.1 æœ¬åœ°mpirunæµ‹è¯•è„šæœ¬ï¼ˆIntelç‰ˆæœ¬ï¼‰"></a>6.6.1 æœ¬åœ°mpirunæµ‹è¯•è„šæœ¬ï¼ˆIntelç‰ˆæœ¬ï¼‰</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æœ¬åœ°å•èŠ‚ç‚¹æµ‹è¯•ï¼Œéœ€è¦æ ¹æ®`lscpu`ä¸­numaåˆ†åŒºæƒ…å†µ(node)çš„ä½¿ç”¨mpirunæµ‹è¯•xhpl</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> eg:åœ¨æœªå¼€è¶…çº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œåˆ†ä¸ºä¸¤ä¸ªnodeï¼Œæ¯ä¸ªnodeä¸­æœ‰12ä¸ªæ ¸ï¼Œåˆ™æœ€ä½³æµ‹è¯•æ–¹æ³•ä¸ºmpirun -np 2 ./myrun.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä»¥ä¸‹ä¸ºmyrun.shçš„å…·ä½“å®ç°</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">ulimit -s unlimited</span><br><span class="line">Cores=48</span><br><span class="line">ThreadsNum=`echo &quot;$&#123;Cores&#125;/$&#123;PMI_SIZE&#125;&quot; | bc` # è®¡ç®—æ¯ä¸ªè¿›ç¨‹è·‘çš„çº¿ç¨‹æ•°</span><br><span class="line">case $&#123;PMI_SIZE&#125; in</span><br><span class="line">2)</span><br><span class="line">        case $&#123;PMI_RANK&#125; in</span><br><span class="line">        0)</span><br><span class="line">        export OMP_NUM_THREADS=$&#123;ThreadsNum&#125;</span><br><span class="line">        export HPL_HOST_CORE=&#x27;0-23&#x27;</span><br><span class="line">        ./xhpl -n 1 -b 384 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">        ;;</span><br><span class="line">        1)</span><br><span class="line">        export OMP_NUM_THREADS=$&#123;ThreadsNum&#125;</span><br><span class="line">        export HPL_HOST_CORE=&#x27;24-47&#x27;</span><br><span class="line">        ./xhpl -n 1 -b 384 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">        ;;</span><br><span class="line">        esac</span><br><span class="line">;;</span><br><span class="line">esac</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="6-6-2-Slurm-srunæµ‹è¯•è„šæœ¬-FTç‰ˆæœ¬"><a href="#6-6-2-Slurm-srunæµ‹è¯•è„šæœ¬-FTç‰ˆæœ¬" class="headerlink" title="6.6.2 Slurm srunæµ‹è¯•è„šæœ¬(FTç‰ˆæœ¬)"></a>6.6.2 Slurm srunæµ‹è¯•è„šæœ¬(FTç‰ˆæœ¬)</h2><p>xhplrun.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">ulimit -s unlimited</span><br><span class="line">Cores=48</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">==================================================================</span><br><span class="line">PMI_SIZE=$SLURM_NPROCS</span><br><span class="line">PMI_RANK=$SLURM_PROCID</span><br><span class="line">MPI_NUM_NODE=$SLURM_NNODES</span><br><span class="line">MPI_PER_NODE=$((PMI_SIZE / MPI_NUM_NODES))</span><br><span class="line">MPI_RANK_FOR_NODE=$((PMI_RANK % MPI_PER_NODE))</span><br><span class="line"></span><br><span class="line">PRO_SIZE=$&#123;MPI_PER_NODE&#125;</span><br><span class="line">PMI_RANK_my=$&#123;MPI_RANK_FOR_NODE&#125;</span><br><span class="line">==================================================================</span><br><span class="line"></span><br><span class="line">echo $&#123;PRO_SIZE&#125; $&#123;PMI_RANK_my&#125; $&#123;threads&#125; $&#123;PMI_SIZE&#125; $&#123;PMI_RANK&#125; $&#123;MPI_NUM_NODES&#125; $&#123;MPI_PER_NODE&#125; $&#123;MPI_RANK_FOR_NODE&#125;</span><br><span class="line"></span><br><span class="line">export HPL_CMDLINE=1</span><br><span class="line">case $&#123;PRO_SIZE&#125; in</span><br><span class="line">1)</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 0-1 -N 0-1 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 0,4 -N 0-7 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 0-7 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;0-63&#x27;</span><br><span class="line">numactl -i 0-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line">case $&#123;PMI_RANK_my&#125; in</span><br><span class="line">0)</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 0-3 -N 0-3 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -m 3 -N 0-3 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;0-31&#x27;</span><br><span class="line">numactl -i 4-7 -N 0-3 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">1)</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 4-7 -N 4-7 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -m 7 -N 4-7 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;32-63&#x27;</span><br><span class="line">numactl -i 0-3 -N 4-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">esac</span><br><span class="line"><span class="meta">#</span><span class="bash">mpirun -n 1 numactl -i 0-3 -N 0-3 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span> : -n 1 numactl -i 4-7 -N 4-7 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p>yhrun æäº¤ä½œä¸š runpro.sh</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">duqi</span></span><br><span class="line"></span><br><span class="line">if [ $# -ne 5 ]</span><br><span class="line">then</span><br><span class="line">        echo Usage: ./runpro.sh nodes_list nodes_num proc_per_node mem_per_proc logdir</span><br><span class="line">        exit 0</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">export HPL_CMDLINE=1</span><br><span class="line"></span><br><span class="line">export LD_LIBRARY_PATH=/usr/local/mpi3/lib:$LD_LIBRARY_PATH</span><br><span class="line"></span><br><span class="line">nodes=$&#123;1&#125;</span><br><span class="line">nnodes=$&#123;2&#125;</span><br><span class="line">nprocs=$&#123;3&#125;</span><br><span class="line">nmem=$&#123;4&#125;</span><br><span class="line">logdir=$&#123;5&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mkdir -p $&#123;logdir&#125;</span><br><span class="line"></span><br><span class="line">tnprocs=$(($&#123;nnodes&#125;*$&#123;nprocs&#125;))</span><br><span class="line">P=1</span><br><span class="line">Q=1</span><br><span class="line">for i in `seq 1 $&#123;tnprocs&#125;`</span><br><span class="line">do</span><br><span class="line">        for j in `seq 1 $&#123;tnprocs&#125;`</span><br><span class="line">        do</span><br><span class="line">                PQ=$(($&#123;i&#125;*$&#123;j&#125;))</span><br><span class="line">                if [ $&#123;PQ&#125; -eq $&#123;tnprocs&#125; ] &amp;&amp; [ $&#123;i&#125; -le $&#123;j&#125; ]</span><br><span class="line">                then</span><br><span class="line">                        P=$&#123;i&#125;</span><br><span class="line">                        Q=$&#123;j&#125;</span><br><span class="line">                fi</span><br><span class="line">        done</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">for i in `yhcontrol show hostname $&#123;nodes&#125;`</span><br><span class="line">do</span><br><span class="line">        scp HPL.dat $i:/root/linpack &amp;</span><br><span class="line">done</span><br><span class="line">wait</span><br><span class="line">sleep 1</span><br><span class="line"></span><br><span class="line">j=0</span><br><span class="line">runnodes=&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">for i in `yhcontrol show hostname $&#123;nodes&#125;`</span><br><span class="line">do</span><br><span class="line">        runnodes+=$&#123;i&#125;,</span><br><span class="line">        let j++</span><br><span class="line">        if [ $&#123;j&#125; -eq $&#123;nnodes&#125; ]</span><br><span class="line">        then</span><br><span class="line">                echo &quot;yhrun -p all -N $&#123;nnodes&#125; -n $&#123;tnprocs&#125; -w $&#123;runnodes&#125; -D /root/linpack /root/linpack/xhplrun.sh $&#123;P&#125; $&#123;Q&#125; $&#123;nmem&#125; &amp;&gt;&gt; $&#123;logdir&#125;/$&#123;i&#125;.log &amp;&quot;</span><br><span class="line">                echo $&#123;runnodes&#125; &amp;&gt;&gt; $&#123;logdir&#125;/$&#123;i&#125;.log</span><br><span class="line">                yhrun -p all -N $&#123;nnodes&#125; -n $&#123;tnprocs&#125; -w $&#123;runnodes&#125; -D /root/linpack /root/linpack/xhplrun.sh $&#123;P&#125; $&#123;Q&#125; $&#123;nmem&#125; &amp;&gt;&gt; $&#123;logdir&#125;/$&#123;i&#125;.log &amp;</span><br><span class="line">                j=0</span><br><span class="line">                runnodes=&#x27;&#x27;</span><br><span class="line">        fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h2 id="6-7-Biosè®¾ç½®"><a href="#6-7-Biosè®¾ç½®" class="headerlink" title="6.7 Biosè®¾ç½®"></a>6.7 Biosè®¾ç½®</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ç¦å“¥çš„ï¼š</span><br><span class="line">    UPI Configuration</span><br><span class="line">        Link Lop -&gt; disable</span><br><span class="line">        Link L1  -&gt; disable </span><br><span class="line">        IO Directory Cache -&gt; enable</span><br><span class="line">        Isoc Mode -&gt; enable</span><br><span class="line"></span><br><span class="line">    Memory Configuration</span><br><span class="line">        Eufsrce POR -&gt; enable</span><br><span class="line">        PPR Type -&gt; Soft PPR</span><br><span class="line">        Memory Frequency -&gt; 2666</span><br><span class="line">        Data Scrambling for NVMDIMM -&gt; enable</span><br><span class="line">        Data Scrambling for DDR4 -&gt; enable</span><br><span class="line">        Enable AOR -&gt; enable</span><br><span class="line">        Refresh Option -&gt; enable</span><br><span class="line">        Memory RAS</span><br><span class="line">            Memory Rank Sparing -&gt; enable</span><br><span class="line"></span><br><span class="line">    IIO Configuration</span><br><span class="line">        PCI-E Port Max Payload Size -&gt; 256B</span><br><span class="line"></span><br><span class="line">    CPU P-State</span><br><span class="line">        SpeedStep -&gt; disable/enable?</span><br><span class="line">        PBF </span><br><span class="line">        Hardware P-State -&gt; enable</span><br><span class="line">        Package c state -&gt; No limit </span><br><span class="line">	</span><br><span class="line">ç½‘ä¸Šæ‰¾çš„ç³»ç»ŸBiosè®¾ç½®ä¼˜åŒ–</span><br><span class="line">    å…³é—­è¶…çº¿ç¨‹</span><br><span class="line">    æ‰“å¼€EIST</span><br><span class="line">    æ‰“å¼€Turbo Mode</span><br><span class="line">    Boot Performance modeè®¾ç½®ä¸ºmax performance</span><br><span class="line">    Energy Performance BIASè®¾ç½®ä¸ºPerformance</span><br><span class="line">    æ‰“å¼€Monitor/Mwait</span><br><span class="line">    Package C stat limitè®¾ç½®ä¸ºC0/C1 state</span><br><span class="line">    å…³é—­CPU C3 report</span><br><span class="line">    å…³é—­CPU C6 report</span><br><span class="line">    å…³é—­Enhanced Halt State</span><br><span class="line">    å…³é—­Intel VT for Directed I/O</span><br><span class="line">    Linux OSä¸‹CPU Power Managementè®¾ç½®ä¸ºmax performance</span><br><span class="line">    QPIåŠMemory Frequencyä¿æŒä¸ºMax Frequency</span><br><span class="line">    å…³é—­NUMAåŠŸèƒ½ </span><br></pre></td></tr></table></figure>

<h2 id="6-8-ç»“æœåé¦ˆ"><a href="#6-8-ç»“æœåé¦ˆ" class="headerlink" title="6.8 ç»“æœåé¦ˆ"></a>6.8 <span id="jump">ç»“æœåé¦ˆ</span></h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">linpackæµ‹è¯•ä»¥æˆ‘ä»¬ä¸ºä¸»å¯¼</span></span><br><span class="line"></span><br><span class="line">1ã€grep FAILED å…³é”®å­—,æŸ¥çœ‹æ˜¯å¦æœ‰èŠ‚ç‚¹è®¡ç®—é”™è¯¯</span><br><span class="line">2ã€grep WR æŸ¥çœ‹èŠ‚ç‚¹æ€§èƒ½æ˜¯å¦æ­£å¸¸</span><br><span class="line">3ã€ç»Ÿè®¡è·‘æ­»çš„ç‚¹</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚ä½•åé¦ˆï¼Ÿ</span></span><br><span class="line">ä¸€è½®Linpack40åˆ†é’Ÿæµ‹è¯•å®Œæˆ</span><br><span class="line">	ä¸€ã€6ä¸ªç‚¹æœ¬æ˜¯drain*çŠ¶æ€</span><br><span class="line">	äºŒã€3ä¸ªç‚¹è·‘æ­»ï¼Œcn[1,2,3]</span><br><span class="line">	ä¸‰ã€5ä¸ªç‚¹Linpackè®¡ç®—FAILED</span><br><span class="line">	å››ã€å…¶ä»–ç‚¹linpakcæ€§èƒ½æ­£å¸¸</span><br><span class="line">å¯ä»¥è€ƒè™‘æ›´æ¢ä¸‹ä¸€æ‰¹</span><br></pre></td></tr></table></figure>

<h2 id="6-9-é£å†·ç³»ç»Ÿlinpackæµ‹è¯•å…¨è¿‡ç¨‹è®°å½•"><a href="#6-9-é£å†·ç³»ç»Ÿlinpackæµ‹è¯•å…¨è¿‡ç¨‹è®°å½•" class="headerlink" title="6.9 é£å†·ç³»ç»Ÿlinpackæµ‹è¯•å…¨è¿‡ç¨‹è®°å½•"></a>6.9 é£å†·ç³»ç»Ÿlinpackæµ‹è¯•å…¨è¿‡ç¨‹è®°å½•</h2><blockquote>
<h5 id="1ã€äº†è§£é£å†·ç³»ç»Ÿçš„æ¶æ„"><a href="#1ã€äº†è§£é£å†·ç³»ç»Ÿçš„æ¶æ„" class="headerlink" title="1ã€äº†è§£é£å†·ç³»ç»Ÿçš„æ¶æ„"></a>1ã€äº†è§£é£å†·ç³»ç»Ÿçš„æ¶æ„</h5><p>æŒ‰æ‰¹æ¬¡æµ‹è¯•ï¼Œæµ‹å®Œä¸€æ‰¹æ¢ä¸‹ä¸€æ‰¹</p>
<p>ä¸€æ‰¹ä¸º192ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªæ¡†32ä¸ªèŠ‚ç‚¹ï¼Œå…±6ä¸ªæ¡†</p>
<p>æ¯ä¸ªèŠ‚ç‚¹128Gå†…å­˜ï¼ŒèŠ¯ç‰‡ä¸ºFT2000+, é€šè¿‡mhzè·å–é¢‘ç‡ä¸º2000ï¼ˆé™é¢‘ï¼‰ï¼Œ64ç‰©ç†æ ¸</p>
<p>ç³»ç»Ÿç‰ˆæœ¬ï¼š 4.19.46-cn+</p>
<h5 id="2ã€è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„ç†è®ºå³°å€¼"><a href="#2ã€è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„ç†è®ºå³°å€¼" class="headerlink" title="2ã€è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„ç†è®ºå³°å€¼"></a>2ã€è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„ç†è®ºå³°å€¼</h5><p>2000 * 128 &#x2F; 64 * 2 * 64&#x3D; 512000</p>
<h5 id="3ã€å¼€å§‹æµ‹è¯•"><a href="#3ã€å¼€å§‹æµ‹è¯•" class="headerlink" title="3ã€å¼€å§‹æµ‹è¯•"></a>3ã€å¼€å§‹æµ‹è¯•</h5><p>runpro.shè„šæœ¬å‚æ•°è¯´æ˜:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">./runpro.sh NodeList NodeBind ProcessesPerNode MemSize</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">NodeList èŠ‚ç‚¹åˆ—è¡¨,ä¾‹å¦‚cn[0-8]</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">NodeBind å‡ ä¸ªèŠ‚ç‚¹ç»‘å®šè¿è¡Œï¼Œä¾‹å¦‚2ï¼Œåˆ™è®¡ç®—æ•ˆç‡æ—¶ï¼Œéœ€è¦å°†ç»“æœå¾—åˆ°çš„æ•ˆç‡/2/512</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">ProcessesPerNode æ¯ç»™èŠ‚ç‚¹è¿è¡Œå‡ ä¸ªxhplè¿›ç¨‹ï¼Œæ ¹æ®numa nodeæ¥ï¼ŒFTä¸€èˆ¬æ˜¯8</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">MemSize æ¯ä¸ªèŠ‚ç‚¹ä¸­ï¼Œæ¯ä¸ªè¿›ç¨‹åˆ†é…çš„å†…å­˜ï¼Œä¸€èˆ¬ä½¿ç”¨åˆ°çº¦æ€»å†…å­˜çš„80%ï¼Œä¾‹å¦‚å•èŠ‚ç‚¹128Gï¼Œå¡«å†™12000ï¼ˆå•ä½ä¸ºMbï¼‰ï¼Œåˆ™æ€»ä½¿ç”¨96Gå†…å­˜</span></span><br></pre></td></tr></table></figure>

<p>å•èŠ‚ç‚¹æµ‹è¯•ï¼š</p>
<p>â€‹	ä¸éœ€è¦äº’è”æµ‹è¯•ç½‘ç»œè”é€šæ€§ï¼Œä»…å¯¹å•èŠ‚ç‚¹è¿›è¡Œå‹åŠ›æµ‹è¯•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">./runpro.sh cn0 1 8 12000 logdir</span></span><br></pre></td></tr></table></figure>

<p>å¤šèŠ‚ç‚¹æµ‹è¯•ï¼š</p>
<p>â€‹	éœ€è¦äº’è”æµ‹è¯•ç½‘ç»œè”é€šæ€§ï¼Œ 2ï¼Œ4ï¼Œ 8ï¼Œ 16ï¼Œ 32ï¼Œ 64ï¼Œ 128ï¼Œå¦‚æœè¦æ±‚æµ‹å¤šèŠ‚ç‚¹ç¨³å®šæ€§ï¼Œæµ‹è¯•çš„8ç‚¹8è¿›8çº¿ï¼Œç»“æœæŒ‰<a href="#jump">ç« èŠ‚6.8</a>åé¦ˆ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">./runpro.sh cn0 1 8 12000 logdir</span></span><br></pre></td></tr></table></figure>

<p>é—®é¢˜è§£å†³ä¸€ï¼š</p>
<p>â€‹	æµ‹è¯•åˆ°128èŠ‚ç‚¹ï¼Œæ€§èƒ½å¼‚å¸¸ï¼Œæ•ˆç‡ä»…æœ‰43%</p>
<p>äº’è”é‚£è¾¹å›åº”ï¼š</p>
<p>â€‹	èŠ‚ç‚¹æ•°è¶…è¿‡64ï¼Œé€šä¿¡å°±è·¨æ¡†</p>
<p>ç¦å“¥å»ºè®®çš„åšæ³•ï¼š</p>
<p>â€‹	æŠŠ128ä¸ªèŠ‚ç‚¹åˆ†åˆ°4ä¸ªæ¡†ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼Œçœ‹æ˜¯ä¸æ˜¯å¸¦å®½çš„åŸå› </p>
<p>æœ€åçš„è§£å†³æ–¹æ³•ï¼š</p>
<p>â€‹	ç½‘ç»œæ‹“æ‰‘æ›´æ¢ï¼ŒçŸ©é˜µå€¼ä¸èƒ½ç›¸ç­‰ï¼Œä½¿ç”¨åŸæœ¬32 x 32ï¼Œæ”¹ä¸º16 x 64ï¼Œä½†æ˜¯æ¢æˆ160èŠ‚ç‚¹åè¿˜æ˜¯æœ‰é—®é¢˜</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">./runpro.sh cn[xx-xx] 128 8 12000 dir</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">å…¶ä¸­æ‰§è¡Œçš„xhplrun.shçš„å‚æ•°ä¸º</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">xhplrun.sh 32 32 12000</span></span><br></pre></td></tr></table></figure>


</blockquote>
<h1 id="ä¸ƒã€Lmbench-æµ‹è¯•"><a href="#ä¸ƒã€Lmbench-æµ‹è¯•" class="headerlink" title="ä¸ƒã€Lmbench æµ‹è¯•"></a>ä¸ƒã€Lmbench æµ‹è¯•</h1><h2 id="7-1-æ¦‚è¿°"><a href="#7-1-æ¦‚è¿°" class="headerlink" title="7.1 æ¦‚è¿°"></a>7.1 æ¦‚è¿°</h2><p>â€‹	Lmbenchæ˜¯ä¸€å¥—ç®€æ˜“ï¼Œå¯ç§»æ¤çš„ï¼Œç¬¦åˆANSI&#x2F;Cæ ‡å‡†ä¸ºUNIX&#x2F;POSIXè€Œåˆ¶å®šçš„å¾®å‹æµ‹è¯„å·¥å…·ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå®ƒè¡¡é‡ä¸¤ä¸ªå…³é”®ç‰¹å¾ï¼šååº”æ—¶é—´å’Œå¸¦å®½ã€‚LmBenchæ—¨åœ¨ä½¿ç³»ç»Ÿå¼€å‘è€…æ·±å…¥äº†è§£å…³é”®æ“ä½œçš„åŸºç¡€æˆæœ¬ã€‚</p>
<h2 id="7-2-å·¥å…·å®‰è£…"><a href="#7-2-å·¥å…·å®‰è£…" class="headerlink" title="7.2 å·¥å…·å®‰è£…"></a>7.2 å·¥å…·å®‰è£…</h2><p>è·å–æºåŒ…ï¼š</p>
<p>â€‹	lmbench3.tar.gz</p>
<p>gccç¼–è¯‘å®‰è£…</p>
<h2 id="7-3-æµ‹è¯•æ­¥éª¤"><a href="#7-3-æµ‹è¯•æ­¥éª¤" class="headerlink" title="7.3 æµ‹è¯•æ­¥éª¤"></a>7.3 æµ‹è¯•æ­¥éª¤</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd src</span><br><span class="line">make results</span><br><span class="line">make see</span><br><span class="line">å†…å­˜10Gã€‚</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">é”™è¯¯å¤„ç†ï¼š</span><br><span class="line">[root@cn9 lmbench3]# cd src/</span><br><span class="line">[root@cn9 src]# make results</span><br><span class="line">gmake[1]: Entering directory `/home/testcpu/test652/tools/lmbench3/src&#x27;</span><br><span class="line">gmake[1]: *** No rule to make target `../SCCS/s.ChangeSet&#x27;, needed by `bk.ver&#x27;.  Stop.</span><br><span class="line">gmake[1]: Leaving directory `/home/testcpu/test652/tools/lmbench3/src&#x27;</span><br><span class="line">è§£å†³æ–¹æ³•ï¼š</span><br><span class="line">	vim Makefile</span><br><span class="line">	231è¡Œä¿®æ”¹ï¼š</span><br><span class="line"><span class="meta">	$</span><span class="bash">O/lmbench : ../scripts/lmbench bk.ver</span></span><br><span class="line">	æ”¹ä¸º</span><br><span class="line"><span class="meta">	$</span><span class="bash">O/lmbench : ../scripts/lmbench</span></span><br></pre></td></tr></table></figure>

<h1 id="å…«ã€IOR-æµ‹è¯•ï¼ˆæš‚æ— ï¼‰"><a href="#å…«ã€IOR-æµ‹è¯•ï¼ˆæš‚æ— ï¼‰" class="headerlink" title="å…«ã€IOR æµ‹è¯•ï¼ˆæš‚æ— ï¼‰"></a>å…«ã€IOR æµ‹è¯•ï¼ˆæš‚æ— ï¼‰</h1><h1 id="ä¹ã€alltoallæµ‹è¯•"><a href="#ä¹ã€alltoallæµ‹è¯•" class="headerlink" title="ä¹ã€alltoallæµ‹è¯•"></a>ä¹ã€alltoallæµ‹è¯•</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yhrun -n 128 -N 8 -w cn34,cn35,cn36,cn37,cn38,cn39,cn40,cn41, /root/xm_alltoall 102400 1000</span><br></pre></td></tr></table></figure>

<h1 id="é™„å½•ï¼šå¸¸ç”¨å·¥å…·é“¾ç¼–è¯‘æ–¹æ³•"><a href="#é™„å½•ï¼šå¸¸ç”¨å·¥å…·é“¾ç¼–è¯‘æ–¹æ³•" class="headerlink" title="é™„å½•ï¼šå¸¸ç”¨å·¥å…·é“¾ç¼–è¯‘æ–¹æ³•"></a>é™„å½•ï¼šå¸¸ç”¨å·¥å…·é“¾ç¼–è¯‘æ–¹æ³•</h1><h2 id="ä¸€ã€GCCç¼–è¯‘"><a href="#ä¸€ã€GCCç¼–è¯‘" class="headerlink" title="ä¸€ã€GCCç¼–è¯‘"></a>ä¸€ã€GCCç¼–è¯‘</h2><p>éœ€è¦ä¾æ¬¡ç¼–è¯‘ä¾èµ–è½¯ä»¶ï¼Œç„¶ååœ¨ç¼–è¯‘gccä¸­ä½¿ç”¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è®¾ç½®islçš„åº“è·¯å¾„</span></span><br><span class="line">export LD_LIBRARY_PATH=/home/testcpu/test652/tools/gcc830/lib:$LD_LIBRARY_PATH</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç¼–è¯‘GCC</span></span><br><span class="line">../configure --prefix=/home/testcpu/test652/tools/gcc830 --enable-lto --disable-bootstrap --enable-languages=c,c++,fortran --with-gmp=/home/testcpu/test652/tools/gcc830 --with-mpfr=/home/testcpu/test652/tools/gcc830 --with-mpc=/home/testcpu/test652/tools/gcc830 --with-isl=/home/testcpu/test652/tools/gcc830</span><br></pre></td></tr></table></figure>

<h3 id="1-1-ä¾èµ–è½¯ä»¶ç¼–è¯‘"><a href="#1-1-ä¾èµ–è½¯ä»¶ç¼–è¯‘" class="headerlink" title="1.1 ä¾èµ–è½¯ä»¶ç¼–è¯‘"></a>1.1 ä¾èµ–è½¯ä»¶ç¼–è¯‘</h3><h4 id="1-1-2-ç¼–è¯‘å®‰è£…gmp"><a href="#1-1-2-ç¼–è¯‘å®‰è£…gmp" class="headerlink" title="1.1.2 ç¼–è¯‘å®‰è£…gmp"></a>1.1.2 ç¼–è¯‘å®‰è£…gmp</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/home/testcpu/test652/tools/gcc830</span><br><span class="line">make </span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line">./configure --with-gmp=/home/testcpu/test652/tools/gcc83 --with-mpfr=/home/testcpu/test652/tools/gcc83  --prefix=/home/testcpu/test652/tools/gcc83</span><br></pre></td></tr></table></figure>

<h4 id="1-1-3-ç¼–è¯‘å®‰è£…mpfr"><a href="#1-1-3-ç¼–è¯‘å®‰è£…mpfr" class="headerlink" title="1.1.3 ç¼–è¯‘å®‰è£…mpfr"></a>1.1.3 ç¼–è¯‘å®‰è£…mpfr</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/home/testcpu/test652/tools/gcc830 --with-gmp=/home/testcpu/test652/tools/gcc830</span><br><span class="line">make </span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<h4 id="1-1-4-ç¼–è¯‘å®‰è£…mpc"><a href="#1-1-4-ç¼–è¯‘å®‰è£…mpc" class="headerlink" title="1.1.4 ç¼–è¯‘å®‰è£…mpc"></a>1.1.4 ç¼–è¯‘å®‰è£…mpc</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/home/testcpu/test652/tools/gcc830 --with-gmp=/home/testcpu/test652/tools/gcc830 --with-mpfr=/home/testcpu/test652/tools/gcc830</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<h4 id="1-1-5-ç¼–è¯‘å®‰è£…isl"><a href="#1-1-5-ç¼–è¯‘å®‰è£…isl" class="headerlink" title="1.1.5 ç¼–è¯‘å®‰è£…isl"></a>1.1.5 ç¼–è¯‘å®‰è£…isl</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/home/testcpu/test652/tools/gcc830 --with-gmp-prefix=/home/testcpu/test652/tools/gcc830</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"> yum install gcc-* gtk2 gtk3 x11 libX11.x86_64 libX11-devel.x86_64 libXorg libXss libXScrnSaver.x86_64 xorg-x11-server-Xorg.x86_64 xulrunner.x86_64 xulrunner.i686 libstdc++.i686 libstdc++-devel.i686</span><br><span class="line">glibc.i686 glibc-devel.i686 libgcc* xulrunner.x86_64 xulrunner.i686 glibc-devel.x86_64 glibc.x86_64 autoconf-archive.noarch gtk2 gtk3 pango libXScrnSaver libX11.x86_64 libX11-devel.x86_64 libX11-common.noarch libxkbcommon-x11.x86_64 xorg-x11-server-common.x86_64 libstdc++* -y</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">mount -o loop -t iso9660 /home/testcpu/test652/images/rhel-server-7.6-x86_64-dvd.iso /home/testcpu/test652/mnt/CDROM</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">yum install gcc-* gtk2 gtk3 glibc-devel.i686 x11 libX11.x86_64 libX11-devel.x86_64 libXorg libXss libXScrnSaver.x86_64 xorg-x11-server-Xorg.x86_64 xulrunner.x86_64 xulrunner.i686 libstdc++.i686 libstdc++-devel.i686 glibc* libgcc* xulrunner* autoconf-archive.noarch gtk2 gtk3 pango libXScrnSaver libX11.x86_64 libX11-devel.x86_64 libX11-common.noarch libxkbcommon-x11.x86_64 xorg-x11-server-common.x86_64 libstdc++* -y</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€MPICH3ç¼–è¯‘"><a href="#äºŒã€MPICH3ç¼–è¯‘" class="headerlink" title="äºŒã€MPICH3ç¼–è¯‘"></a>äºŒã€MPICH3ç¼–è¯‘</h2><p>è®¾ç½®gcc830çš„ç¯å¢ƒå˜é‡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export PATH=/home/testcpu/test652/tools/gcc830/bin:$PATH</span><br><span class="line">export LD_LIBRARY_PATH=/home/testcpu/test652/tools/gcc830/lib:$LD_LIBRARY_PATH</span><br><span class="line">export LD_INCLUDE_PATH=/home/testcpu/test652/tools/gcc830/include:$LD_INCLUDE_PATH</span><br><span class="line">export CPATH=/home/testcpu/test652/tools/gcc830/include:$CPATH</span><br><span class="line">export LD_LIBRARY_PATH=/home/testcpu/test652/tools/gcc830/lib64:$LD_LIBRARY_PATH</span><br><span class="line">export LD_LIBRARY_PATH=/home/testcpu/test652/tools/gcc830/libexec:$LD_LIBRARY_PATH</span><br></pre></td></tr></table></figure>

<p>å†ç¼–è¯‘</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/home/testcpu/test652/tools/mpi3-gcc830 --enable-fast --enable-shared=yes --enable-threads=runtime --with-ch3-rank-bits=32 --enable-romio --with-file-system=ufs+nfs --with-mpe</span><br><span class="line">make </span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®ç¯å¢ƒå˜é‡ä½¿ç”¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export PATH=/home/testcpu/test652/tools/mpi3-gcc830/bin:$PATH</span><br><span class="line">export LD_LIBRARY_PATH=/home/testcpu/test652/tools/mpi3-gcc830/lib:$LD_LIBRARY_PATH</span><br><span class="line">export LD_INCLUDE_PATH=/home/testcpu/test652/tools/mpi3-gcc830/include:$LD_INCLUDE_PATH</span><br></pre></td></tr></table></figure>



<h3 id="ä¸‰ã€Redhatè®¾ç½®æœ¬åœ°é•œåƒæº"><a href="#ä¸‰ã€Redhatè®¾ç½®æœ¬åœ°é•œåƒæº" class="headerlink" title="ä¸‰ã€Redhatè®¾ç½®æœ¬åœ°é•œåƒæº"></a>ä¸‰ã€Redhatè®¾ç½®æœ¬åœ°é•œåƒæº</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mount -o loop -t iso9660 /home/IOSYS/test652/images/rhel-server-7.6-x86_64-dvd.iso /home/IOSYS/test652/mnt/CDROM</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/yum.repos.d/redhat.repo</span><br><span class="line"></span><br><span class="line">[rhel7.6]</span><br><span class="line">name=rhel7.6</span><br><span class="line">baseurl=file:///home/testcpu/test652/mnt/CDROM</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">priority=1</span><br><span class="line"></span><br><span class="line">yum clean</span><br><span class="line">yum update</span><br><span class="line">yum repolist</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€æ‰¾ä¸åˆ°soåº“çš„è§£å†³æ–¹æ³•"><a href="#å››ã€æ‰¾ä¸åˆ°soåº“çš„è§£å†³æ–¹æ³•" class="headerlink" title="å››ã€æ‰¾ä¸åˆ°soåº“çš„è§£å†³æ–¹æ³•"></a>å››ã€æ‰¾ä¸åˆ°soåº“çš„è§£å†³æ–¹æ³•</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ–¹æ³•ä¸€ï¼š</span></span><br><span class="line">	è®¾ç½®LD_LIBRARY_PATH</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ–¹æ³•äºŒï¼š</span></span><br><span class="line"> 	vim /etc/ld.so.conf</span><br><span class="line"> 	----------------------------------------------------</span><br><span class="line"> 	include ld.so.conf.d/*.conf</span><br><span class="line">	/opt/intel/compilers_and_libraries/linux/lib/intel64</span><br><span class="line">	ldconfig æ›´æ–°</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€å¤åˆ¶ä»¥åŠæŸ¥çœ‹ç«¯å£å ç”¨"><a href="#äº”ã€å¤åˆ¶ä»¥åŠæŸ¥çœ‹ç«¯å£å ç”¨" class="headerlink" title="äº”ã€å¤åˆ¶ä»¥åŠæŸ¥çœ‹ç«¯å£å ç”¨"></a>äº”ã€å¤åˆ¶ä»¥åŠæŸ¥çœ‹ç«¯å£å ç”¨</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹ç«¯å£å ç”¨</span></span><br><span class="line">netstat -nultp | grep 8080</span><br><span class="line">netstat -anp  | grep 80</span><br><span class="line">netstat -ano | grep 18130</span><br><span class="line">lsof -i:18130</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¤åˆ¶</span></span><br><span class="line">rsync -chavP /var/opt/gitlab/postgresql .</span><br><span class="line">rsync -avzP å¤åˆ¶æ˜¾ç¤ºè¿›åº¦</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹Biosç‰ˆæœ¬</span></span><br><span class="line">dmidecode</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">mpiicc -DAdd__ -DF77_INTEGER=int -DStringSunStyle -DHPL_DETAILED_TIMING -DHPL_PROGRESS_REPORT -I/root/hpl/include -I/root/hpl/include/Linux_Intel64 -I/opt/intel/compilers_and_libraries_2019.4.243/linux/mkl/mkl/include  -O3 -w -ansi-alias -i-static -z noexecstack -z relro -z now -nocompchk -Wall -qopenmp -mt_mpi -o /root/hpl/bin/Linux_Intel64/xhpl HPL_pddriver.o         HPL_pdinfo.o           HPL_pdtest.o /root/hpl/lib/Linux_Intel64/libhpl.a  -L/opt/intel/compilers_and_libraries_2019.4.243/linux/mkl/mkl/lib/intel64 -Wl,--start-group /opt/intel/compilers_and_libraries_2019.4.243/linux/mkl/lib/intel64/libmkl_intel_lp64.a /opt/intel/compilers_and_libraries_2019.4.243/linux/mkl/lib/intel64/libmkl_intel_thread.a /opt/intel/compilers_and_libraries_2019.4.243/linux/mkl/lib/intel64/libmkl_core.a -Wl,--end-group -lpthread -ldl</span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€æŸ¥çœ‹cpuä¸»é¢‘ç‡-å’Œ-å†…å­˜ä¿¡æ¯"><a href="#å…­ã€æŸ¥çœ‹cpuä¸»é¢‘ç‡-å’Œ-å†…å­˜ä¿¡æ¯" class="headerlink" title="å…­ã€æŸ¥çœ‹cpuä¸»é¢‘ç‡ å’Œ å†…å­˜ä¿¡æ¯"></a>å…­ã€æŸ¥çœ‹cpuä¸»é¢‘ç‡ å’Œ å†…å­˜ä¿¡æ¯</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹CPUä¿¡æ¯</span></span><br><span class="line">lscpu å…¶ä¸­ socketsä¸ªæ•°ä»£è¡¨ç‰©ç†æ ¸ä¸ªæ•°</span><br><span class="line">cat /proc/cpuinfo</span><br><span class="line">lmbenchçš„mhz</span><br><span class="line">/usr/bin/turbostat</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å†…å­˜ä¿¡æ¯</span></span><br><span class="line">cat /proc/meminfo</span><br><span class="line">dmidecode | grep -A 16 &quot;Memory Device&quot;ã€</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒã€GLSL-1-50-is-not-supported"><a href="#ä¸ƒã€GLSL-1-50-is-not-supported" class="headerlink" title="ä¸ƒã€GLSL 1.50 is not supported"></a>ä¸ƒã€GLSL 1.50 is not supported</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŠ¥é”™ï¼š</span></span><br><span class="line">ERROR: In /home/gs/src/VTK8.2/VTK-8.2.0/Rendering/OpenGL2/vtkShaderProgram.cxx, line 447</span><br><span class="line">vtkShaderProgram (0x2b87270): 0:1(10): error: GLSL 1.50 is not supported. Supported versions are: 1.10, 1.20, 1.30, 1.00 ES, and 3.00 ES</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è§£å†³æ–¹æ³•</span></span><br><span class="line">export MESA_GL_VERSION_OVERRIDE=3.2</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cn[16-19,24-27,144-147,152-155]</span><br></pre></td></tr></table></figure>

<h2 id="å…«ã€é™„å½•"><a href="#å…«ã€é™„å½•" class="headerlink" title="å…«ã€é™„å½•"></a>å…«ã€é™„å½•</h2><h3 id="8-1-Linpackè„šæœ¬"><a href="#8-1-Linpackè„šæœ¬" class="headerlink" title="8.1 Linpackè„šæœ¬"></a>8.1 Linpackè„šæœ¬</h3><blockquote>
<p>runpro.sh</p>
<p>.&#x2F;runpro.sh nodes_list nodes_num proc_per_node mem_per_proc logdir</p>
<p>node_list èŠ‚ç‚¹åˆ—è¡¨</p>
<p>nodes_num å‡ ä¸ªç‚¹è¿åœ¨ä¸€èµ·è·‘ï¼Œå•ç‚¹ åŒç‚¹ å¤šç‚¹</p>
<p> proc_per_node æ¯ä¸ªèŠ‚ç‚¹è·‘å‡ ä¸ªè¿›ç¨‹ï¼Œçœ‹nodeåˆ†ä¸ºå‡ ä¸ªï¼ŒFTä¸€èˆ¬æ˜¯8</p>
<p> mem 12000 æ¯ä¸ªè¿›ç¨‹åˆ†é…çš„å†…å­˜ï¼Œ*8 å¤§æ¦‚&#x3D; æ€»å†…å­˜çš„80%</p>
<p> logdir æ—¥å¿—æ–‡ä»¶</p>
<p> å•ç‚¹8è¿›ç¨‹ï¼Œä¸€è½®â‰ˆ35åˆ†é’Ÿ</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">duqi</span></span><br><span class="line"></span><br><span class="line">if [ $# -ne 5 ]</span><br><span class="line">then</span><br><span class="line">        echo Usage: ./runpro.sh nodes_list nodes_num proc_per_node mem_per_proc logdir</span><br><span class="line">        exit 0</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">export HPL_CMDLINE=1</span><br><span class="line">export LD_LIBRARY_PATH=/usr/local/mpi3/lib:LD_LIBRARY_PATH</span><br><span class="line"></span><br><span class="line">nodes=$&#123;1&#125;</span><br><span class="line">nnodes=$&#123;2&#125;</span><br><span class="line">nprocs=$&#123;3&#125;</span><br><span class="line">nmem=$&#123;4&#125;</span><br><span class="line">logdir=$&#123;5&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mkdir -p $&#123;logdir&#125;</span><br><span class="line"></span><br><span class="line">tnprocs=$(($&#123;nnodes&#125;*$&#123;nprocs&#125;))</span><br><span class="line">P=1</span><br><span class="line">Q=1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">num_max=1</span><br><span class="line">for i in `seq 1 $&#123;tnprocs&#125;`</span><br><span class="line">do</span><br><span class="line">        j=$(($&#123;i&#125;*$&#123;i&#125;))</span><br><span class="line">        if [ $&#123;tnprocs&#125; -le $&#123;j&#125; ]; then</span><br><span class="line">                num_max=$&#123;i&#125;</span><br><span class="line">                break</span><br><span class="line">        fi</span><br><span class="line">done</span><br><span class="line">for i in `seq 1 $&#123;num_max&#125;`</span><br><span class="line">do</span><br><span class="line">        for j in `seq $&#123;num_max&#125; $&#123;tnprocs&#125;`</span><br><span class="line">        do</span><br><span class="line">                PQ=$(($&#123;i&#125;*$&#123;j&#125;))</span><br><span class="line">                if [ $&#123;PQ&#125; -eq $&#123;tnprocs&#125; ]</span><br><span class="line">                then</span><br><span class="line">                        P=$&#123;i&#125;</span><br><span class="line">                        Q=$&#123;j&#125;</span><br><span class="line">                fi</span><br><span class="line">        done</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">for i in `yhcontrol show hostname $&#123;nodes&#125;`</span><br><span class="line">do</span><br><span class="line">        scp HPL.dat $i:/root/linpack &amp;</span><br><span class="line">done</span><br><span class="line">sleep 1</span><br><span class="line"></span><br><span class="line">j=0</span><br><span class="line">runnodes=&#x27;&#x27;</span><br><span class="line"></span><br><span class="line">for i in `yhcontrol show hostname $&#123;nodes&#125;`</span><br><span class="line">do</span><br><span class="line">        runnodes+=$&#123;i&#125;,</span><br><span class="line">        let j++</span><br><span class="line">        if [ $&#123;j&#125; -eq $&#123;nnodes&#125; ]</span><br><span class="line">        then</span><br><span class="line">                echo &quot;yhrun -p All -N $&#123;nnodes&#125; -n $&#123;tnprocs&#125; -w $&#123;runnodes&#125; -D /root/linpack /root/linpack/xhplrun.sh $&#123;P&#125; $&#123;Q&#125; $&#123;nmem&#125; &amp;&gt;&gt; $&#123;logdir&#125;/$&#123;i&#125;.log &amp;&quot;</span><br><span class="line">                echo $&#123;runnodes&#125; &amp;&gt;&gt; $&#123;logdir&#125;/$&#123;i&#125;.log &amp;</span><br><span class="line">                echo &quot;yhrun -p All -N $&#123;nnodes&#125; -n $&#123;tnprocs&#125; -w $&#123;runnodes&#125; -D /root/linpack /root/linpack/xhplrun.sh $&#123;P&#125; $&#123;Q&#125; $&#123;nmem&#125;&quot; &amp;&gt;&gt; $&#123;logdir&#125;/list.log</span><br><span class="line">                yhrun -p All -N $&#123;nnodes&#125; -n $&#123;tnprocs&#125; -w $&#123;runnodes&#125; -D /root/linpack /root/linpack/xhplrun.sh $&#123;P&#125; $&#123;Q&#125; $&#123;nmem&#125; &amp;&gt;&gt; $&#123;logdir&#125;/$&#123;i&#125;.log &amp;</span><br><span class="line">                j=0</span><br><span class="line">                runnodes=&#x27;&#x27;</span><br><span class="line">        fi</span><br><span class="line">done</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>xhplrun.sh</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">duqi</span></span><br><span class="line"></span><br><span class="line">ulimit -s unlimited</span><br><span class="line"></span><br><span class="line">Cores=64</span><br><span class="line"><span class="meta">#</span><span class="bash">==========================================================</span></span><br><span class="line">PMI_SIZE=$SLURM_NPROCS</span><br><span class="line"></span><br><span class="line">PMI_RANK=$SLURM_PROCID</span><br><span class="line"></span><br><span class="line">MPI_NUM_NODES=$SLURM_NNODES</span><br><span class="line"></span><br><span class="line">MPI_PER_NODE=$((PMI_SIZE / MPI_NUM_NODES))</span><br><span class="line"></span><br><span class="line">MPI_RANK_FOR_NODE=$((PMI_RANK % MPI_PER_NODE))</span><br><span class="line"><span class="meta">#</span><span class="bash">==========================================================</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">threads=`echo $&#123;Cores&#125;*$&#123;SLURM_NNODES&#125;/$&#123;PMI_SIZE&#125; | bc`</span><br><span class="line"></span><br><span class="line">PRO_SIZE=$&#123;MPI_PER_NODE&#125;</span><br><span class="line">PMI_RANK_my=$&#123;MPI_RANK_FOR_NODE&#125;</span><br><span class="line"></span><br><span class="line">echo $&#123;PRO_SIZE&#125; $&#123;PMI_RANK_my&#125; $&#123;threads&#125; $&#123;PMI_SIZE&#125; $&#123;PMI_RANK&#125; $&#123;MPI_NUM_NODES&#125; $&#123;MPI_PER_NODE&#125; $&#123;MPI_RANK_FOR_NODE&#125;</span><br><span class="line"></span><br><span class="line">export HPL_CMDLINE=1</span><br><span class="line">case $&#123;PRO_SIZE&#125; in</span><br><span class="line">1)</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 0-1 -N 0-1 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 0,4 -N 0-7 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 0-7 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;0-63&#x27;</span><br><span class="line">numactl -i 0-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line">case $&#123;PMI_RANK_my&#125; in</span><br><span class="line">0)</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 0-3 -N 0-3 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -m 3 -N 0-3 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;0-31&#x27;</span><br><span class="line">numactl -i 4-7 -N 0-3 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">1)</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 4-7 -N 4-7 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -m 7 -N 4-7 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;32-63&#x27;</span><br><span class="line">numactl -i 0-3 -N 4-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">esac</span><br><span class="line"><span class="meta">#</span><span class="bash">mpirun -n 1 numactl -i 0-3 -N 0-3 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span> : -n 1 numactl -i 4-7 -N 4-7 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">4)</span><br><span class="line">case $&#123;PMI_RANK_my&#125; in</span><br><span class="line">0)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;0-15&#x27;</span><br><span class="line">numactl -i 0-7 -N 0-1 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 2-3 -N 0-1 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">1)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;16-31&#x27;</span><br><span class="line">numactl -i 0-7 -N 2-3 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 4-5 -N 2-3 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;32-47&#x27;</span><br><span class="line">numactl -i 0-7 -N 4-5 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 6-7 -N 4-5 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">3)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;48-63&#x27;</span><br><span class="line">numactl -i 0-7 -N 6-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 0-1 -N 6-7 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">esac</span><br><span class="line">;;</span><br><span class="line">8)</span><br><span class="line">case $&#123;PMI_RANK_my&#125; in</span><br><span class="line">0)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;0-7&#x27;</span><br><span class="line">numactl -i 0-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 4 -N 0 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">1)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;8-15&#x27;</span><br><span class="line">numactl -i 0-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 2 -N 1 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;16-23&#x27;</span><br><span class="line">numactl -i 0-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 6 -N 2 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">3)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;24-31&#x27;</span><br><span class="line">numactl -i 0-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 1 -N 3 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">4)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;32-39&#x27;</span><br><span class="line">numactl -i 0-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 0 -N 4 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">5)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;40-47&#x27;</span><br><span class="line">numactl -i 0-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 7 -N 5 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">6)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;48-55&#x27;</span><br><span class="line">numactl -i 0-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 5 -N 6 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">7)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;56-63&#x27;</span><br><span class="line">numactl -i 0-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 3 -N 7 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line">;;</span><br><span class="line">esac</span><br><span class="line">;;</span><br><span class="line">16)</span><br><span class="line">case $&#123;PMI_RANK_my&#125; in</span><br><span class="line">0)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;0-3&#x27;</span><br><span class="line">numactl -i 0-7 -C 0-3 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">1)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;4-7&#x27;</span><br><span class="line">numactl -i 0-7 -C 4-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;8-11&#x27;</span><br><span class="line">numactl -i 0-7 -C 8-11 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">3)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;12-15&#x27;</span><br><span class="line">numactl -i 0-7 -C 12-15 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">4)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;16-19&#x27;</span><br><span class="line">numactl -i 0-7 -C 16-19 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">5)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;20-23&#x27;</span><br><span class="line">numactl -i 0-7 -C 20-23 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">6)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;24-27&#x27;</span><br><span class="line">numactl -i 0-7 -C 24-27 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">7)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;28-31&#x27;</span><br><span class="line">numactl -i 0-7 -C 28-31 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">8)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;32-35&#x27;</span><br><span class="line">numactl -i 0-7 -C 32-35 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">9)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;36-39&#x27;</span><br><span class="line">numactl -i 0-7 -C 36-39 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">10)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;40-43&#x27;</span><br><span class="line">numactl -i 0-7 -C 40-43 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">11)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;44-47&#x27;</span><br><span class="line">numactl -i 0-7 -C 44-47 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">12)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;48-51&#x27;</span><br><span class="line">numactl -i 0-7 -C 48-51 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">13)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;52-55&#x27;</span><br><span class="line">numactl -i 0-7 -C 52-55 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">14)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;56-59&#x27;</span><br><span class="line">numactl -i 0-7 -C 56-59 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">15)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;60-63&#x27;</span><br><span class="line">numactl -i 0-7 -C 60-63 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">esac</span><br><span class="line">;;</span><br><span class="line">32)</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">export</span> OMP_NUM_THREADS=<span class="variable">$&#123;threads&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 0-7 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">;;</span></span><br><span class="line">case $&#123;PMI_RANK_my&#125; in</span><br><span class="line">0)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;0-1&#x27;</span><br><span class="line">numactl -i 0-7 -C 0-1 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">1)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;2-3&#x27;</span><br><span class="line">numactl -i 0-7 -C 2-3 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;4-5&#x27;</span><br><span class="line">numactl -i 0-7 -C 4-5 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">3)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;6-7&#x27;</span><br><span class="line">numactl -i 0-7 -C 6-7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">4)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;8-9&#x27;</span><br><span class="line">numactl -i 0-7 -C 8-9 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">5)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;10-11&#x27;</span><br><span class="line">numactl -i 0-7 -C 10-11 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">6)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;12-13&#x27;</span><br><span class="line">numactl -i 0-7 -C 12-13 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">7)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;14-15&#x27;</span><br><span class="line">numactl -i 0-7 -C 14-15 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">8)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;16-17&#x27;</span><br><span class="line">numactl -i 0-7 -C 16-17 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">9)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;18-19&#x27;</span><br><span class="line">numactl -i 0-7 -C 18-19 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">10)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;20-21&#x27;</span><br><span class="line">numactl -i 0-7 -C 20-21 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">11)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;22-23&#x27;</span><br><span class="line">numactl -i 0-7 -C 22-23 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">12)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;24-25&#x27;</span><br><span class="line">numactl -i 0-7 -C 24-25 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">13)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;26-27&#x27;</span><br><span class="line">numactl -i 0-7 -C 26-27 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">14)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;28-29&#x27;</span><br><span class="line">numactl -i 0-7 -C 28-29 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">15)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;30-31&#x27;</span><br><span class="line">numactl -i 0-7 -C 30-31 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">16)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;32-33&#x27;</span><br><span class="line">numactl -i 0-7 -C 32-33 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">17)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;34-35&#x27;</span><br><span class="line">numactl -i 0-7 -C 34-35 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">18)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;36-37&#x27;</span><br><span class="line">numactl -i 0-7 -C 36-37 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">19)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;38-39&#x27;</span><br><span class="line">numactl -i 0-7 -C 38-39 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">20)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;40-41&#x27;</span><br><span class="line">numactl -i 0-7 -C 40-41 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">21)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;42-43&#x27;</span><br><span class="line">numactl -i 0-7 -C 42-43 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">22)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;44-45&#x27;</span><br><span class="line">numactl -i 0-7 -C 44-45 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">23)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;46-47&#x27;</span><br><span class="line">numactl -i 0-7 -C 46-47 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">24)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;48-49&#x27;</span><br><span class="line">numactl -i 0-7 -C 48-49 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">25)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;50-51&#x27;</span><br><span class="line">numactl -i 0-7 -C 50-51 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">26)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;52-53&#x27;</span><br><span class="line">numactl -i 0-7 -C 52-53 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">27)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;54-55&#x27;</span><br><span class="line">numactl -i 0-7 -C 54-55 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">28)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;56-57&#x27;</span><br><span class="line">numactl -i 0-7 -C 56-57 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">29)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;58-59&#x27;</span><br><span class="line">numactl -i 0-7 -C 58-59 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">30)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;60-61&#x27;</span><br><span class="line">numactl -i 0-7 -C 60-61 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">31)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;62-63&#x27;</span><br><span class="line">numactl -i 0-7 -C 62-63 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">esac</span><br><span class="line">;;</span><br><span class="line">64)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">export</span> GOMP_CPU_AFFINITY=<span class="string">&#x27;0-63&#x27;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">numactl -i 0-7 ./xhpl -n 1 -b 192 -p <span class="variable">$&#123;1&#125;</span> -q <span class="variable">$&#123;2&#125;</span> -m <span class="variable">$&#123;3&#125;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">;;</span></span><br><span class="line">case $&#123;PMI_RANK_my&#125; in</span><br><span class="line">0)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;0&#x27;</span><br><span class="line">numactl -i 0-7 -C 0 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">1)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;1&#x27;</span><br><span class="line">numactl -i 0-7 -C 1 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;2&#x27;</span><br><span class="line">numactl -i 0-7 -C 2 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">3)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;3&#x27;</span><br><span class="line">numactl -i 0-7 -C 3 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">4)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;4&#x27;</span><br><span class="line">numactl -i 0-7 -C 4 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">5)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;5&#x27;</span><br><span class="line">numactl -i 0-7 -C 5 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">6)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;6&#x27;</span><br><span class="line">numactl -i 0-7 -C 6 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">7)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;7&#x27;</span><br><span class="line">numactl -i 0-7 -C 7 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">8)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;8&#x27;</span><br><span class="line">numactl -i 0-7 -C 8 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">9)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;9&#x27;</span><br><span class="line">numactl -i 0-7 -C 9 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">10)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;10&#x27;</span><br><span class="line">numactl -i 0-7 -C 10 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">11)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;11&#x27;</span><br><span class="line">numactl -i 0-7 -C 11 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">12)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;12&#x27;</span><br><span class="line">numactl -i 0-7 -C 12 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">13)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;13&#x27;</span><br><span class="line">numactl -i 0-7 -C 13 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">14)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;14&#x27;</span><br><span class="line">numactl -i 0-7 -C 14 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">15)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;15&#x27;</span><br><span class="line">numactl -i 0-7 -C 15 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">16)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;16&#x27;</span><br><span class="line">numactl -i 0-7 -C 16 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">17)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;17&#x27;</span><br><span class="line">numactl -i 0-7 -C 17 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">18)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;18&#x27;</span><br><span class="line">numactl -i 0-7 -C 18 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">19)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;19&#x27;</span><br><span class="line">numactl -i 0-7 -C 19 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">20)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;20&#x27;</span><br><span class="line">numactl -i 0-7 -C 20 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">21)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;21&#x27;</span><br><span class="line">numactl -i 0-7 -C 21 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">22)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;22&#x27;</span><br><span class="line">numactl -i 0-7 -C 22 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">23)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;23&#x27;</span><br><span class="line">numactl -i 0-7 -C 23 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">24)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;24&#x27;</span><br><span class="line">numactl -i 0-7 -C 24 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">25)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;25&#x27;</span><br><span class="line">numactl -i 0-7 -C 25 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">26)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;26&#x27;</span><br><span class="line">numactl -i 0-7 -C 26 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">27)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;27&#x27;</span><br><span class="line">numactl -i 0-7 -C 27 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">28)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;28&#x27;</span><br><span class="line">numactl -i 0-7 -C 28 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">29)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;29&#x27;</span><br><span class="line">numactl -i 0-7 -C 29 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">30)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;30&#x27;</span><br><span class="line">numactl -i 0-7 -C 30 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">31)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;31&#x27;</span><br><span class="line">numactl -i 0-7 -C 31 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">32)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;32&#x27;</span><br><span class="line">numactl -i 0-7 -C 32 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">33)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;33&#x27;</span><br><span class="line">numactl -i 0-7 -C 33 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">34)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;34&#x27;</span><br><span class="line">numactl -i 0-7 -C 34 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">35)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;35&#x27;</span><br><span class="line">numactl -i 0-7 -C 35 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">36)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;36&#x27;</span><br><span class="line">numactl -i 0-7 -C 36 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">37)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;37&#x27;</span><br><span class="line">numactl -i 0-7 -C 37 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">38)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;38&#x27;</span><br><span class="line">numactl -i 0-7 -C 38 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">39)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;39&#x27;</span><br><span class="line">numactl -i 0-7 -C 39 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">40)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;40&#x27;</span><br><span class="line">numactl -i 0-7 -C 40 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">41)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;41&#x27;</span><br><span class="line">numactl -i 0-7 -C 41 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">42)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;42&#x27;</span><br><span class="line">numactl -i 0-7 -C 42 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">43)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;43&#x27;</span><br><span class="line">numactl -i 0-7 -C 43 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">44)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;44&#x27;</span><br><span class="line">numactl -i 0-7 -C 44 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">45)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;45&#x27;</span><br><span class="line">numactl -i 0-7 -C 45 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">46)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;46&#x27;</span><br><span class="line">numactl -i 0-7 -C 46 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">47)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;47&#x27;</span><br><span class="line">numactl -i 0-7 -C 47 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">48)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;48&#x27;</span><br><span class="line">numactl -i 0-7 -C 48 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">49)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;49&#x27;</span><br><span class="line">numactl -i 0-7 -C 49 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">50)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;50&#x27;</span><br><span class="line">numactl -i 0-7 -C 50 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">51)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;51&#x27;</span><br><span class="line">numactl -i 0-7 -C 51 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">52)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;52&#x27;</span><br><span class="line">numactl -i 0-7 -C 52 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">53)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;53&#x27;</span><br><span class="line">numactl -i 0-7 -C 53 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">54)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;54&#x27;</span><br><span class="line">numactl -i 0-7 -C 54 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">55)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;55&#x27;</span><br><span class="line">numactl -i 0-7 -C 55 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">56)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;56&#x27;</span><br><span class="line">numactl -i 0-7 -C 56 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">57)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;57&#x27;</span><br><span class="line">numactl -i 0-7 -C 57 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">58)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;58&#x27;</span><br><span class="line">numactl -i 0-7 -C 58 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">59)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;59&#x27;</span><br><span class="line">numactl -i 0-7 -C 59 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">60)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;60&#x27;</span><br><span class="line">numactl -i 0-7 -C 60 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">61)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;61&#x27;</span><br><span class="line">numactl -i 0-7 -C 61 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">62)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;62&#x27;</span><br><span class="line">numactl -i 0-7 -C 62 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">63)</span><br><span class="line">export OMP_NUM_THREADS=$&#123;threads&#125;</span><br><span class="line">export GOMP_CPU_AFFINITY=&#x27;63&#x27;</span><br><span class="line">numactl -i 0-7 -C 63 ./xhpl -n 1 -b 192 -p $&#123;1&#125; -q $&#123;2&#125; -m $&#123;3&#125;</span><br><span class="line">;;</span><br><span class="line">esac</span><br><span class="line">;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<h3 id="8-2-ç¼–è¯‘é—®é¢˜"><a href="#8-2-ç¼–è¯‘é—®é¢˜" class="headerlink" title="8.2 ç¼–è¯‘é—®é¢˜"></a>8.2 ç¼–è¯‘é—®é¢˜</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-lc </span><br><span class="line">	è§£å†³æ‰¾ä¸åˆ°memcpyé—®é¢˜ </span><br><span class="line">-lstdc++</span><br><span class="line">	è§£å†³vtable for xxxx é—®é¢˜</span><br><span class="line">-lgcc_s</span><br><span class="line">	undefined reference to `_Unwind_Resume&#x27;</span><br><span class="line">	undefined reference to `__popcountdi2&#x27;</span><br><span class="line"><span class="meta">	</span></span><br><span class="line"><span class="meta">#</span><span class="bash">include &lt;sys/types.h&gt;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">include &lt;sys/types.h&gt;</span></span><br><span class="line">	 implicit declaration of function â€˜fstatâ€™</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">include &lt;sys/sysmacros.h&gt;</span></span><br><span class="line">	implicit declaration of function â€˜majorâ€™</span><br></pre></td></tr></table></figure>

<h1 id="åã€Linuxæ“ä½œ"><a href="#åã€Linuxæ“ä½œ" class="headerlink" title="åã€Linuxæ“ä½œ"></a>åã€Linuxæ“ä½œ</h1><h2 id="10-1-ncatç«¯å£è½¬å‘"><a href="#10-1-ncatç«¯å£è½¬å‘" class="headerlink" title="10.1 ncatç«¯å£è½¬å‘"></a>10.1 ncatç«¯å£è½¬å‘</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ncat --sh-exec &quot;ncat 25.8.27.6 15929&quot; -l 15929 --keep-open</span><br></pre></td></tr></table></figure>

<h1 id="åä¸€ã€DDTå®‰è£…"><a href="#åä¸€ã€DDTå®‰è£…" class="headerlink" title="åä¸€ã€DDTå®‰è£…"></a>åä¸€ã€DDTå®‰è£…</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cp Licence /home/gs/tools/arm/forge/licences/</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cp Licence.14713 /home/gs/tools/arm/licenceserver/licences/</span></span><br><span class="line"></span><br><span class="line">export PATH=/opt/mpi3.3/bin:/home/gs/tools/arm/forge/bin:/home/gs/tools/arm/licenceserver/bin:$PATH</span><br><span class="line">export LD_LIBRARY_PATH=/opt/mpi3.3/lib:$LD_LIBRARY_PATH</span><br><span class="line">ifconfig eth3 hw ether 00:1b:21:14:15:60</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">glexé«˜é€Ÿç½‘ç‰ˆæœ¬çš„MPIæ”¹ä¸ºæœ¬åœ°è°ƒè¯•ç”¨</span></span><br><span class="line">export MPICH_NO_LOCAL=0 //ï¼Ÿä¸ä¸€å®šéœ€è¦</span><br><span class="line">export MPICH_NEMESIS_NETMOD=tcp</span><br><span class="line">export PATH=/usr/local/mpi3/bin:$PATH</span><br><span class="line">export LD_LIBRARY_PATH=/usr/local/mpi3/lib:$LD_LIBRARY_PATH</span><br></pre></td></tr></table></figure>



<h1 id="åäºŒã€SPECä½¿ç”¨"><a href="#åäºŒã€SPECä½¿ç”¨" class="headerlink" title="åäºŒã€SPECä½¿ç”¨"></a>åäºŒã€SPECä½¿ç”¨</h1><h2 id="12-1-SPECä½¿ç”¨ç³»ç»Ÿå·¥å…·"><a href="#12-1-SPECä½¿ç”¨ç³»ç»Ÿå·¥å…·" class="headerlink" title="12.1 SPECä½¿ç”¨ç³»ç»Ÿå·¥å…·"></a>12.1 SPECä½¿ç”¨ç³»ç»Ÿå·¥å…·</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> SEPCè®¾ç½®ä½¿ç”¨ç³»ç»Ÿçš„å·¥å…·</span></span><br><span class="line">vim /home/gs/tools/spack-v5/etc/spack/defaults/packages.yaml</span><br><span class="line"><span class="meta">#</span><span class="bash"> å‚è€ƒï¼š</span></span><br><span class="line">../../../lib/spack/docs/build_settings.rst</span><br></pre></td></tr></table></figure>

<h1 id="åä¸‰ã€miåè®®"><a href="#åä¸‰ã€miåè®®" class="headerlink" title="åä¸‰ã€miåè®®"></a>åä¸‰ã€miåè®®</h1><h2 id="13-1-ä½¿ç”¨miå¯åŠ¨è°ƒè¯•"><a href="#13-1-ä½¿ç”¨miå¯åŠ¨è°ƒè¯•" class="headerlink" title="13.1 ä½¿ç”¨miå¯åŠ¨è°ƒè¯•"></a>13.1 ä½¿ç”¨miå¯åŠ¨è°ƒè¯•</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gs@ft-svr:~/matrix$ gdb --interpreter mi test</span><br><span class="line">=thread-group-added,id=&quot;i1&quot;</span><br><span class="line">~&quot;GNU gdb (Ubuntu 8.2.91.20190405-0ubuntu3) 8.2.91.20190405-git\n&quot;</span><br><span class="line">~&quot;Copyright (C) 2019 Free Software Foundation, Inc.\n&quot;</span><br><span class="line">~&quot;License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.&quot;</span><br><span class="line">~&quot;\nType \&quot;show copying\&quot; and \&quot;show warranty\&quot; for details.\n&quot;</span><br><span class="line">~&quot;This GDB was configured as \&quot;aarch64-linux-gnu\&quot;.\n&quot;</span><br><span class="line">~&quot;Type \&quot;show configuration\&quot; for configuration details.\n&quot;</span><br><span class="line">~&quot;For bug reporting instructions, please see:\n&quot;</span><br><span class="line">~&quot;&lt;http://www.gnu.org/software/gdb/bugs/&gt;.\n&quot;</span><br><span class="line">~&quot;Find the GDB manual and other documentation resources online at:\n    &lt;http://www.gnu.org/software/gdb/documentation/&gt;.&quot;</span><br><span class="line">~&quot;\n\n&quot;</span><br><span class="line">~&quot;For help, type \&quot;help\&quot;.\n&quot;</span><br><span class="line">~&quot;Type \&quot;apropos word\&quot; to search for commands related to \&quot;word\&quot;...\n&quot;</span><br><span class="line">~&quot;Reading symbols from test...\n&quot;</span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>

<h2 id="13-2-æ–­ç‚¹å‘½ä»¤ï¼ˆBreakPointï¼‰"><a href="#13-2-æ–­ç‚¹å‘½ä»¤ï¼ˆBreakPointï¼‰" class="headerlink" title="13.2 æ–­ç‚¹å‘½ä»¤ï¼ˆBreakPointï¼‰"></a>13.2 æ–­ç‚¹å‘½ä»¤ï¼ˆBreakPointï¼‰</h2><h3 id="13-2-1-break-after"><a href="#13-2-1-break-after" class="headerlink" title="13.2.1 -break-after"></a>13.2.1 -break-after</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-break-after number count</span><br><span class="line">ç¬¬numberä¸ªæ–­ç‚¹åœ¨æ‰§è¡Œcountæ¬¡åæœ‰æ•ˆ</span><br></pre></td></tr></table></figure>

<h3 id="13-2-2-break-condition"><a href="#13-2-2-break-condition" class="headerlink" title="13.2.2 -break-condition"></a>13.2.2 -break-condition</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-break-condition number expr</span><br><span class="line">ç¬¬numberä¸ªæ–­ç‚¹åœ¨è¡¨è¾¾å¼exprä¸ºtrueæ—¶æœ‰æ•ˆ</span><br></pre></td></tr></table></figure>

<h3 id="13-2-3-break-delete"><a href="#13-2-3-break-delete" class="headerlink" title="13.2.3 -break-delete"></a>13.2.3 -break-delete</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-break-delete(breakpoint number)+</span><br><span class="line">åˆ é™¤æŒ‡å®šnumberçš„å¤šä¸ªæ–­ç‚¹</span><br></pre></td></tr></table></figure>

<h3 id="13-2-4-break-disable"><a href="#13-2-4-break-disable" class="headerlink" title="13.2.4 -break-disable"></a>13.2.4 -break-disable</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-break-disable(breakpoint number)+</span><br><span class="line">ä½¿ç”¨æŒ‡å®šNumberçš„å¤šä¸ªæ–­ç‚¹å¤±æ•ˆ</span><br></pre></td></tr></table></figure>

<h3 id="13-2-5-break-enable"><a href="#13-2-5-break-enable" class="headerlink" title="13.2.5 -break-enable"></a>13.2.5 -break-enable</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-break-enable(breakpoint number)+</span><br><span class="line">ä½¿ç”¨æŒ‡å®šNumberçš„å¤šä¸ªæ–­ç‚¹ç”Ÿæ•ˆ</span><br></pre></td></tr></table></figure>

<h3 id="13-2-6-break-info"><a href="#13-2-6-break-info" class="headerlink" title="13.2.6 -break-info"></a>13.2.6 -break-info</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-break-info breakpoint</span><br><span class="line">å¾—åˆ°æŒ‡å®šæ–­ç‚¹çš„ä¿¡æ¯</span><br></pre></td></tr></table></figure>

<h3 id="13-2-7-break-insert"><a href="#13-2-7-break-insert" class="headerlink" title="13.2.7 -break-insert"></a>13.2.7 -break-insert</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-break-insert</span><br><span class="line">	-t				æ’å…¥ä¸´æ—¶æ–­ç‚¹</span><br><span class="line">	-h				æ’å…¥ç¡¬ä»¶æ–­ç‚¹</span><br><span class="line">	-r				æ’å…¥æ­£åˆ™æ–­ç‚¹ï¼Œå½“å‡½æ•°ååŒ¹é…æ­£åˆ™è¡¨è¾¾å¼æ—¶ç”Ÿæ•ˆ</span><br><span class="line">	-c condition    æ’å…¥æ¡ä»¶æ–­ç‚¹</span><br><span class="line">	-i ignore-count æ’å…¥ä¸€ä¸ªæŒ‡å®šæ— æ•ˆæ¬¡æ•°çš„æ–­ç‚¹</span><br><span class="line">	-p thread  		</span><br><span class="line">	line | addr(func) </span><br></pre></td></tr></table></figure>

<h3 id="13-2-8-break-list"><a href="#13-2-8-break-list" class="headerlink" title="13.2.8. -break-list"></a>13.2.8. -break-list</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-break-list</span><br><span class="line">æ˜¾ç¤ºå·²æ’å…¥çš„æ–­ç‚¹åˆ—è¡¨</span><br></pre></td></tr></table></figure>

<h3 id="13-2-9-break-watch"><a href="#13-2-9-break-watch" class="headerlink" title="13.2.9 -break-watch"></a>13.2.9 -break-watch</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-break-watch [-a|-r] variable</span><br><span class="line">åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿç‚¹ï¼Œ-aæ ‡è¯†å¯¹variableè¯»å†™æ—¶æœ‰æ•ˆï¼Œ-ræ ‡è¯†åªè¯»æ—¶æœ‰æ•ˆ</span><br></pre></td></tr></table></figure>

<h2 id="13-3-ç¨‹åºç¯å¢ƒå‘½ä»¤-Program-Context"><a href="#13-3-ç¨‹åºç¯å¢ƒå‘½ä»¤-Program-Context" class="headerlink" title="13.3 ç¨‹åºç¯å¢ƒå‘½ä»¤(Program Context)"></a>13.3 ç¨‹åºç¯å¢ƒå‘½ä»¤(Program Context)</h2><h2 id="13-4-çº¿ç¨‹-thread"><a href="#13-4-çº¿ç¨‹-thread" class="headerlink" title="13.4 çº¿ç¨‹(thread)"></a>13.4 çº¿ç¨‹(thread)</h2><h2 id="13-5-ç¨‹åºæ‰§è¡Œ-Program-Execution"><a href="#13-5-ç¨‹åºæ‰§è¡Œ-Program-Execution" class="headerlink" title="13.5 ç¨‹åºæ‰§è¡Œ(Program Execution)"></a>13.5 ç¨‹åºæ‰§è¡Œ(Program Execution)</h2><h2 id="13-6-æ ˆ-Stack"><a href="#13-6-æ ˆ-Stack" class="headerlink" title="13.6 æ ˆ(Stack)"></a>13.6 æ ˆ(Stack)</h2><h2 id="13-7-å˜é‡-Variable"><a href="#13-7-å˜é‡-Variable" class="headerlink" title="13.7 å˜é‡(Variable)"></a>13.7 å˜é‡(Variable)</h2><h2 id="13-8-æ•°æ®-Data"><a href="#13-8-æ•°æ®-Data" class="headerlink" title="13.8 æ•°æ®(Data)"></a>13.8 æ•°æ®(Data)</h2><h2 id="13-9-è·Ÿè¸ªç‚¹-TracePoint"><a href="#13-9-è·Ÿè¸ªç‚¹-TracePoint" class="headerlink" title="13.9 è·Ÿè¸ªç‚¹(TracePoint)"></a>13.9 è·Ÿè¸ªç‚¹(TracePoint)</h2><h2 id="13-10-ç¬¦å·-Symbol"><a href="#13-10-ç¬¦å·-Symbol" class="headerlink" title="13.10 ç¬¦å·(Symbol)"></a>13.10 ç¬¦å·(Symbol)</h2><h2 id="13-11-æ–‡ä»¶-File"><a href="#13-11-æ–‡ä»¶-File" class="headerlink" title="13.11 æ–‡ä»¶(File)"></a>13.11 æ–‡ä»¶(File)</h2><h2 id="13-12-ç›®æ ‡æ•°æ®-Target-Manipulation"><a href="#13-12-ç›®æ ‡æ•°æ®-Target-Manipulation" class="headerlink" title="13.12 ç›®æ ‡æ•°æ®(Target Manipulation)"></a>13.12 ç›®æ ‡æ•°æ®(Target Manipulation)</h2><h2 id="13-13-å…¶ä»–"><a href="#13-13-å…¶ä»–" class="headerlink" title="13.13 å…¶ä»–"></a>13.13 å…¶ä»–</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-enable-pretty-printing</span><br><span class="line">-var-create - * map</span><br><span class="line">-var-list-children --all-values var1 0 10</span><br><span class="line"></span><br><span class="line">-data-evaluate-expression map</span><br><span class="line">^done,value=&quot;std::map with 140737353945088 elements&lt;error reading variable: Cannot access memory at address 0x1f0fc35f415e51&gt;&quot;</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">//    // è®¾ç½®æ ‡è®°ç±»å‹ä¸é¢œè‰²</span><br><span class="line">//    this-&gt;markerDefine(QsciScintilla::Circle, 0);</span><br><span class="line">//    this-&gt;setMarkerBackgroundColor(QColor(&quot;#ee6666&quot;), 0);</span><br><span class="line">//    this-&gt;markerDefine(QsciScintilla::Circle, 1);</span><br><span class="line">//    this-&gt;setMarkerBackgroundColor(QColor(&quot;#aaaaaa&quot;), 1);</span><br><span class="line">//    this-&gt;markerDefine(QsciScintilla::RightArrow, 2);</span><br><span class="line">//    this-&gt;setMarkerBackgroundColor(QColor(&quot;#eaf593&quot;), 2);</span><br></pre></td></tr></table></figure>

<h1 id="åå››ã€Gitæ”¹å¯†ç "><a href="#åå››ã€Gitæ”¹å¯†ç " class="headerlink" title="åå››ã€Gitæ”¹å¯†ç "></a>åå››ã€Gitæ”¹å¯†ç </h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gitlab-rails console production</span><br><span class="line"></span><br><span class="line">irb(main):002:0&gt; user=User.where(email:&#x27;cuiyingbomail@163.com&#x27;).first</span><br><span class="line">=&gt; #&lt;User id:30 @cyb&gt;</span><br><span class="line">irb(main):003:0&gt; user.password=12345678</span><br><span class="line">=&gt; 12345678</span><br><span class="line">irb(main):004:0&gt; user.password_confirmation=12345678</span><br><span class="line">=&gt; 12345678</span><br><span class="line">irb(main):005:0&gt; user.save!</span><br><span class="line">Enqueued ActionMailer::DeliveryJob (Job ID: 540244db-c6ec-44f9-880e-72338b955aa5) to Sidekiq(mailers) with arguments: &quot;DeviseMailer&quot;, &quot;password_change&quot;, &quot;deliver_now&quot;, #&lt;GlobalID:0x00007f57f5da3208 @uri=#&lt;URI::GID gid://gitlab/User/30&gt;&gt;</span><br><span class="line">=&gt; true</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="åäº”ã€YHPDEï¼ˆeclipseï¼‰FTéƒ¨ç½²"><a href="#åäº”ã€YHPDEï¼ˆeclipseï¼‰FTéƒ¨ç½²" class="headerlink" title="åäº”ã€YHPDEï¼ˆeclipseï¼‰FTéƒ¨ç½²"></a>åäº”ã€YHPDEï¼ˆeclipseï¼‰FTéƒ¨ç½²</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1ã€å®‰è£…eclipse:</span><br><span class="line">	gitlab</span><br><span class="line">2ã€æ’ä»¶å®‰è£…ï¼Œå‚è€ƒæ‰‹å†Œ</span><br><span class="line">2ã€æ–°ç‰ˆSLURMéœ€è¦</span><br><span class="line">vim org.eclipse.ptp.rm.slurm.proxy_4.0.7.201104291906/src/ptp_slurm_proxy.c</span><br><span class="line">1625è¡Œï¼šslurm_allocation_lookup_lite -&gt; slurm_allocation_lookup</span><br><span class="line">2942è¡Œ: primary = 1; -&gt;  primary = 0;</span><br><span class="line">2943è¡Œï¼šsecondary = 2; -&gt; secondary = 1;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>æµ‹è¯•</category>
        <category>ä¿¡åˆ›POCæµ‹è¯•</category>
      </categories>
      <tags>
        <tag>å·¥ä½œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Oracle VPSéƒ¨ç½²V2Ray</title>
    <url>/2022/07/15/04_%E6%9D%82%E8%AE%B0/%E7%94%B2%E9%AA%A8%E6%96%87VPS%E6%90%AD%E5%BB%BA%E6%A2%AF%E5%AD%90/</url>
    <content><![CDATA[<h2 id="1-å‰è¨€"><a href="#1-å‰è¨€" class="headerlink" title="1 å‰è¨€"></a>1 å‰è¨€</h2><p>â€‹	æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ç”²éª¨æ–‡ï¼ˆOracleï¼‰çš„å…è´¹VPSéƒ¨ç½²V2Ray</p>
<p>ç”²éª¨æ–‡æœåŠ¡å™¨ç”³è¯·åœ°å€ï¼š</p>
<p><a href="https://www.oracle.com/cloud/free/">https://www.oracle.com/cloud/free/</a></p>
<blockquote>
<p>c7 &#x2F; 7q &#x2F; F+</p>
</blockquote>
<h2 id="2-åŸŸåç”³è¯·"><a href="#2-åŸŸåç”³è¯·" class="headerlink" title="2 åŸŸåç”³è¯·"></a>2 åŸŸåç”³è¯·</h2><p><font color='red'><strong>ï¼ï¼æœ¬èŠ‚ä½¿ç”¨Firefoxæµè§ˆå™¨æ“ä½œï¼ï¼</strong></font></p>
<h3 id="2-1-Firefoxæµè§ˆå™¨Gooreplaceræ’ä»¶è®¾ç½®"><a href="#2-1-Firefoxæµè§ˆå™¨Gooreplaceræ’ä»¶è®¾ç½®" class="headerlink" title="2.1 Firefoxæµè§ˆå™¨Gooreplaceræ’ä»¶è®¾ç½®"></a>2.1 Firefoxæµè§ˆå™¨Gooreplaceræ’ä»¶è®¾ç½®</h3><blockquote>
<p>é˜²æ­¢freenomåœ¨è®¢å•æäº¤é˜¶æ®µå¤±è´¥</p>
</blockquote>
<p>å®‰è£…å®Œæ’ä»¶åï¼Œç‚¹å‡»â€œé…ç½®è§„åˆ™â€</p>
<p><img src="/../../img/image-20220715144835831.png" alt="image-20220715144835831"></p>
<p>è§„åˆ™é…ç½®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">é‡å®šå‘å¡«å†™ï¼š</span><br><span class="line">https://www.google.com/recaptcha</span><br><span class="line">ç›®æ ‡åœ°å€å¡«å†™ï¼š</span><br><span class="line">https://www.recaptcha.net/recaptcha</span><br></pre></td></tr></table></figure>

<p><img src="/../../img/image-20220715145007138.png" alt="image-20220715145007138"></p>
<h3 id="2-2-freenomåŸŸåç”³è¯·"><a href="#2-2-freenomåŸŸåç”³è¯·" class="headerlink" title="2.2 freenomåŸŸåç”³è¯·"></a>2.2 freenomåŸŸåç”³è¯·</h3><blockquote>
<p>freenomå¯ä»¥ç”³è¯·å…è´¹çš„åŸŸåï¼Œç”³è¯·åœ°å€ï¼š</p>
<p><a href="https://www.freenom.com/en/index.html">https://www.freenom.com/en/index.html</a></p>
</blockquote>
<ul>
<li><p>ç™»å½•ï¼Œé€‰æ‹©â€æ³¨å†Œä¸€ä¸ªæ–°åŸŸåâ€<img src="/../../img/image-20220715145353695.png" alt="image-20220715145353695"></p>
</li>
<li><p>è¾“å…¥éœ€è¦æ³¨å†Œçš„åŸŸåå</p>
</li>
</ul>
<p><img src="/../../img/image-20220715145306545.png" alt="image-20220715145306545"></p>
<ul>
<li>é€‰æ‹©å…è´¹åŸŸåï¼ŒåŠ å…¥è´­ç‰©è½¦</li>
</ul>
<p><img src="/../../img/image-20220715145556778.png" alt="image-20220715145556778"></p>
<ul>
<li>æœŸé™ä¿®æ”¹ä¸º12ä¸ªæœˆ</li>
</ul>
<p><img src="/../../img/image-20220715145640940.png" alt="image-20220715145640940"></p>
<ul>
<li>å‹¾é€‰å…è®¸åè®®ï¼Œç‚¹å‡»å®Œæˆ</li>
</ul>
<p><img src="/../../img/image-20220715145722733.png" alt="image-20220715145722733"></p>
<ul>
<li>çœ‹åˆ°æ­¤ç•Œé¢ï¼Œè¯´æ˜ç”³è¯·æˆåŠŸï¼Œå¦‚æœç”³è¯·å¤±è´¥ï¼Œå›åˆ°2.1æ£€æŸ¥Gooreplaceræ’ä»¶æ˜¯å¦é…ç½®æ­£å¸¸</li>
</ul>
<p><img src="/../../img/image-20220715145825655.png" alt="image-20220715145825655"></p>
<ul>
<li>æŸ¥çœ‹æˆ‘çš„åŸŸå</li>
</ul>
<p><img src="/../../img/image-20220715150619814.png" alt="image-20220715150619814"></p>
<ul>
<li><p>è®¾ç½®åŸŸå</p>
<p><img src="/../../img/image-20220715150723654.png" alt="image-20220715150723654"></p>
</li>
<li><p>æ·»åŠ åŸŸåè§£æ</p>
</li>
</ul>
<p><img src="/../../img/image-20220715150801833.png" alt="image-20220715150801833"></p>
<ul>
<li><p>å¡«å†™åŸŸåè§£ææœåŠ¡å™¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">PAITYN.NS.CLOUDFLARE.COM</span><br><span class="line">SYEEF.NS.CLOUDFLARE.COM</span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src="/../../img/image-20220715150832903.png" alt="image-20220715150832903"></p>
<h2 id="3-åŸŸåè§£æé…ç½®ï¼ˆCDNï¼‰"><a href="#3-åŸŸåè§£æé…ç½®ï¼ˆCDNï¼‰" class="headerlink" title="3 åŸŸåè§£æé…ç½®ï¼ˆCDNï¼‰"></a>3 åŸŸåè§£æé…ç½®ï¼ˆCDNï¼‰</h2><blockquote>
<p>è¿™é‡Œä½¿ç”¨cloudflare</p>
</blockquote>
<p>æ·»åŠ ç«™ç‚¹</p>
<p><img src="/../../img/image-20220715151303012.png" alt="image-20220715151303012"></p>
<p>é€‰æ‹©å…è´¹çš„æ–¹æ¡ˆ</p>
<p><img src="/../../img/image-20220715151454194.png" alt="image-20220715151454194"></p>
<p>æ·»åŠ VPSæœåŠ¡å™¨åœ°å€</p>
<p><img src="/../../img/image-20220715151735023.png" alt="image-20220715151735023"></p>
<p>æ ¡éªŒæœåŠ¡å™¨æ˜¯å¦ç”Ÿæ•ˆï¼š</p>
<blockquote>
<p>è§£æçš„IPä¸ä¸€è‡´ï¼Œæ˜¯å› ä¸ºå‹¾é€‰äº†â€ä»£ç†â€œï¼Œä¸å½±å“æ­£å¸¸ä½¿ç”¨</p>
</blockquote>
<p><img src="/../../img/image-20220715151954505.png" alt="image-20220715151954505"></p>
<h2 id="4-VPSéƒ¨ç½²V2Ray"><a href="#4-VPSéƒ¨ç½²V2Ray" class="headerlink" title="4 VPSéƒ¨ç½²V2Ray"></a>4 VPSéƒ¨ç½²V2Ray</h2><blockquote>
<p>å‚è€ƒï¼š<a href="https://www.ioiox.com/archives/99.html">https://www.ioiox.com/archives/99.html</a></p>
</blockquote>
<h3 id="4-1-ç³»ç»Ÿè®¾ç½®"><a href="#4-1-ç³»ç»Ÿè®¾ç½®" class="headerlink" title="4.1 ç³»ç»Ÿè®¾ç½®"></a>4.1 ç³»ç»Ÿè®¾ç½®</h3><h4 id="SSHæœåŠ¡"><a href="#SSHæœåŠ¡" class="headerlink" title="SSHæœåŠ¡"></a>SSHæœåŠ¡</h4><p>åˆ‡æ¢è‡³rootåˆ›å»ºå¯†ç </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo -i</span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ‡æ¢è‡³ root è´¦å·</span></span><br><span class="line">passwd</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹å¯†ç </span></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹sshé…ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç¼–è¾‘ sshd_config</span></span><br><span class="line"></span><br><span class="line">æ·»åŠ æˆ–ä¿®æ”¹Port 22222ä»¥ç¡®ä¿SSHç«¯å£å®‰å…¨.</span><br><span class="line">æŸ¥æ‰¾åˆ°#PermitRootLogin yes,å»æ‰#æ³¨é‡Šç¬¦å·.</span><br><span class="line">æŸ¥æ‰¾åˆ°#PasswordAuthentication yes,å»æ‰#æ³¨é‡Šç¬¦å·.</span><br><span class="line">æŸ¥æ‰¾åˆ°#ClientAliveInterval 0,å»æ‰#æ³¨é‡Šç¬¦å·,0æ”¹ä¸º30.</span><br><span class="line">æŸ¥æ‰¾åˆ°#MaxSessions 10,å»æ‰#æ³¨é‡Šç¬¦å·.</span><br></pre></td></tr></table></figure>

<p>é‡å¯sshæœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart sshd</span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡å¯ sshd ç”Ÿæ•ˆ</span></span><br></pre></td></tr></table></figure>

<h4 id="é˜²ç«å¢™"><a href="#é˜²ç«å¢™" class="headerlink" title="é˜²ç«å¢™"></a>é˜²ç«å¢™</h4><p>å…³é—­é˜²ç«å¢™</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl disable firewalld</span><br></pre></td></tr></table></figure>

<h4 id="ä¿®æ”¹ä¸»æœºå"><a href="#ä¿®æ”¹ä¸»æœºå" class="headerlink" title="ä¿®æ”¹ä¸»æœºå"></a>ä¿®æ”¹ä¸»æœºå</h4><blockquote>
<p>ç”²éª¨æ–‡äº‘çš„<code>CentOS 7</code>åœ¨ä½¿ç”¨<code>hostnamectl set-hostname</code>å‘½ä»¤ä¿®æ”¹ä¸»æœºåæ—¶,é‡å¯æœåŠ¡å™¨åä¾æ—§ä¼šæ¢å¤ä¸º Web ç«¯åˆ›å»ºå®ä¾‹æ—¶æ‰€è®¾ç½®çš„åå­—.ç½‘ä¸ŠæŸ¥æ‰¾äº†å„ç§æ–¹æ³•éƒ½æ— æ•ˆ,æœ€ç»ˆæ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆ.</p>
</blockquote>
<p>ç¼–è¾‘ä¿®æ”¹<code>oci-hostname.conf</code>æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vi /etc/oci-hostname.conf</span><br></pre></td></tr></table></figure>

<p>å°†<code>PRESERVE_HOSTINFO=0</code>ä¸­çš„çš„å€¼<code>0</code>ä¿®æ”¹ä¸º<code>1</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> This configuration file controls the hostname persistence behavior <span class="keyword">for</span> Oracle Linux</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> compute instance on Oracle Cloud Infrastructure (formerly Baremetal Cloud Services)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Set PRESERVE_HOSTINFO to one of the following values</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   0 -- default behavior to update hostname, /etc/hosts and /etc/resolv.conf to</span> </span><br><span class="line"><span class="meta">#</span><span class="bash">        reflect the hostname <span class="built_in">set</span> during instance creation from the metadata service</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   1 -- preserve user configured hostname across reboots; update /etc/hosts and</span> </span><br><span class="line"><span class="meta">#</span><span class="bash">           /etc/resolv.conf from the metadata service</span>  </span><br><span class="line"><span class="meta">#</span><span class="bash">   2 -- preserve user configured hostname across instance reboots; no custom</span>  </span><br><span class="line"><span class="meta">#</span><span class="bash">        changes to /etc/hosts and /etc/resolv.conf from the metadata service,</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        but dhclient will still overwrite /etc/resolv.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   3 -- preserve hostname and /etc/hosts entries across instance reboots;</span> </span><br><span class="line"><span class="meta">#</span><span class="bash">        update /etc/resolv.conf from instance metadata service</span></span><br><span class="line">PRESERVE_HOSTINFO=0</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>hostnamectl set-hostname</code>å‘½ä»¤ä¿®æ”¹ä¸»æœºåå³å¯.é‡å¯ä¹Ÿä¸ä¼šå¤±æ•ˆ.</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hostnamectl set-hostname xxxxxx</span><br></pre></td></tr></table></figure>

<h4 id="å¸è½½ç›¸å…³ç¨‹åº"><a href="#å¸è½½ç›¸å…³ç¨‹åº" class="headerlink" title="å¸è½½ç›¸å…³ç¨‹åº"></a>å¸è½½ç›¸å…³ç¨‹åº</h4><h5 id="rpcbind"><a href="#rpcbind" class="headerlink" title="rpcbind"></a>rpcbind</h5><p>ä½¿ç”¨<code>netstat -ntlp</code>å‘½ä»¤å‘ç°<code>rpcbind</code>ç›‘å¬äº†<code>111</code>ç«¯å£,å¦‚æ‹…å¿ƒå®‰å…¨å¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¸è½½ç¦ç”¨:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl stop rpcbind</span><br><span class="line">systemctl stop rpcbind.socket</span><br><span class="line">systemctl disable rpcbind</span><br><span class="line">systemctl disable rpcbind.socket </span><br></pre></td></tr></table></figure>

<h5 id="oracle-cloud-agent"><a href="#oracle-cloud-agent" class="headerlink" title="oracle-cloud-agent"></a>oracle-cloud-agent</h5><p>å¸è½½ç”²éª¨æ–‡äº‘å®˜æ–¹åå°ç›‘æ§ç¨‹åº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl stop oracle-cloud-agent</span><br><span class="line">systemctl disable oracle-cloud-agent</span><br><span class="line">systemctl stop oracle-cloud-agent-updater</span><br><span class="line">systemctl disable oracle-cloud-agent-updater</span><br></pre></td></tr></table></figure>



<h3 id="4-2-å®‰è£…BBRPlus"><a href="#4-2-å®‰è£…BBRPlus" class="headerlink" title="4.2 å®‰è£…BBRPlus"></a>4.2 å®‰è£…BBRPlus</h3><blockquote>
<p>å‚è€ƒï¼š<a href="https://www.ioiox.com/archives/63.html">https://www.ioiox.com/archives/63.html</a></p>
<p>Oracle VPSéƒ¨ç½²BBRï¼ŒæŒ‰æ™®é€šçš„æ–¹å¼å®‰è£…ï¼Œå°†å¯¼è‡´BBRå®‰è£…å¹¶é‡å¯æœºå™¨åï¼ŒæœåŠ¡å™¨å¤±è”ï¼Œéœ€è¦å®‰è£…ç‰¹å®šçš„å†…æ ¸ï¼Œå¹¶ä½œä¸€äº›åˆ—è®¾ç½®</p>
</blockquote>
<h4 id="å‡çº§å†…æ ¸"><a href="#å‡çº§å†…æ ¸" class="headerlink" title="å‡çº§å†…æ ¸"></a>å‡çº§å†…æ ¸</h4><p>æ›´æ–° yum</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y update</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹å†…æ ¸</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">uname -r</span><br><span class="line"><span class="meta">#</span><span class="bash"> å†…æ ¸ç‰ˆæœ¬ 3.10.0-1062.12.1.el7.x86_64</span></span><br></pre></td></tr></table></figure>

<p>æ‰‹åŠ¨ä¸‹è½½<code>ç§‹æ°´ BBRPlus</code>ç‰ˆå†…æ ¸</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/chiakge/Linux-NetSpeed/master/bbrplus/centos/7/kernel-4.14.129-bbrplus.rpm</span><br></pre></td></tr></table></figure>

<p>æ‰‹åŠ¨å®‰è£…å†…æ ¸</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y install kernel-4.14.129-bbrplus.rpm</span><br></pre></td></tr></table></figure>

<p>æ›´æ–°å¼•å¯¼</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">grub2-mkconfig -o /boot/grub2/grub.cfg</span><br><span class="line">grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg</span><br></pre></td></tr></table></figure>

<p>åˆ—å‡ºç³»ç»Ÿå¼€æœºå¯åŠ¨é¡¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo awk -F\&#x27; &#x27;$1==&quot;menuentry &quot; &#123;print i++ &quot; : &quot; $2&#125;&#x27; /boot/efi/EFI/centos/grub.cfg</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®æ–°ç‰ˆå†…æ ¸é»˜è®¤å¯åŠ¨é¡¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">grub2-set-default 0</span><br></pre></td></tr></table></figure>

<p>é‡å¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>

<h4 id="å¼€å¯-BBRPlus-åŠä¼˜åŒ–"><a href="#å¼€å¯-BBRPlus-åŠä¼˜åŒ–" class="headerlink" title="å¼€å¯ BBRPlus åŠä¼˜åŒ–"></a>å¼€å¯ BBRPlus åŠä¼˜åŒ–</h4><p>ä¸‹è½½ç§‹æ°´ä¸€é”®è„šæœ¬<code>tcp.sh</code>,é€‰æ‹©<code>7</code>å¼€å¯<code>BBRPlus</code>åŠ é€Ÿ.<br>ç­‰è„šæœ¬é€€å‡ºåï¼Œå†æ¬¡<code>./tcp.sh</code>è¿è¡Œè„šæœ¬,é€‰æ‹©<code>10</code>ä¼˜åŒ–ï¼Œè¿‡ç¨‹ä¸­éœ€è¦é‡å¯ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget -N --no-check-certificate &quot;https://raw.githubusercontent.com/chiakge/Linux-NetSpeed/master/tcp.sh&quot; &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh</span><br></pre></td></tr></table></figure>



<h3 id="4-3-å®‰è£…V2Ray"><a href="#4-3-å®‰è£…V2Ray" class="headerlink" title="4.3 å®‰è£…V2Ray"></a>4.3 å®‰è£…V2Ray</h3><p>åœ¨æ¢¯å­æœåŠ¡å™¨ï¼Œæ‰§è¡Œä¸€é”®æ­å»ºè„šæœ¬</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">bash &lt;(curl -sL https://gist.githubusercontent.com/JodenHe/815dd91277b722d36a860d39c2296083/raw/7f2b5ac0f8137b245d44741fc4a9f40cffa36755/v2Ray-install.sh)</span><br></pre></td></tr></table></figure>

<p><img src="/../../img/image-20220715155109519.png" alt="image-20220715155109519"></p>
<p>BBRå·²ç»å®‰è£…è¿‡ï¼Œè¿™é‡Œé€‰n ï¼ˆç¬”è€…ç¬¬ä¸€æ¬¡åœ¨è¿™é€‰yç›´æ¥å®‰è£…BBRï¼Œç»“æœæœåŠ¡å™¨é‡å¯åå¤±è”ï¼Œæ²¡æ³•ç™»å½•ï¼Œåé‡‡ç”¨4.2å°èŠ‚çš„æ–¹å¼ï¼Œå…ˆå®‰è£…BBRPlusï¼‰</p>
<p><img src="/../../img/image-20220715155122886.png" alt="image-20220715155122886"></p>
<p>å®‰è£…æˆåŠŸï¼Œå¯ä»¥ä½¿ç”¨é“¾æ¥é…ç½®V2RayN</p>
<p><img src="/../../img/image-20220715155230097.png" alt="image-20220715155230097"></p>
<h2 id="5-v2Ray-å®¢æˆ·ç«¯"><a href="#5-v2Ray-å®¢æˆ·ç«¯" class="headerlink" title="5 v2Ray å®¢æˆ·ç«¯"></a>5 v2Ray å®¢æˆ·ç«¯</h2><p>å‚è€ƒï¼š<a href="https://tlanyan.pp.ua/v2ray-clients-download/">https://tlanyan.pp.ua/v2ray-clients-download/</a></p>
<p>ç¬”è€…ä½¿ç”¨çš„windowså®¢æˆ·ç«¯ä¸ºï¼š<code>V2rayN</code>, å®‰å“å®¢æˆ·ç«¯ä¸ºï¼š<code>V2rayNG</code></p>
<h2 id="6-å‚è€ƒ"><a href="#6-å‚è€ƒ" class="headerlink" title="6 å‚è€ƒ"></a>6 å‚è€ƒ</h2><p><a href="https://toutyrater.github.io/">https://toutyrater.github.io/</a></p>
<p><a href="https://tlanyan.pp.ua/v2ray-clients-download/">https://tlanyan.pp.ua/v2ray-clients-download/</a></p>
<p><a href="https://baijiahao.baidu.com/s?id=1689185764130254565&amp;wfr=spider&amp;for=pc">https://baijiahao.baidu.com/s?id=1689185764130254565&amp;wfr=spider&amp;for=pc</a></p>
<p><a href="https://www.ioiox.com/archives/99.html">https://www.ioiox.com/archives/99.html</a></p>
<p><a href="https://blog.joden123.top/2022/02/20/proxy/v2ray-install/">https://blog.joden123.top/2022/02/20/proxy/v2ray-install/</a></p>
]]></content>
      <categories>
        <category>æ‚è®°</category>
      </categories>
  </entry>
  <entry>
    <title>Hexoåšå®¢ç»´æŠ¤</title>
    <url>/2022/07/07/04_%E6%9D%82%E8%AE%B0/hexo%E7%BB%B4%E6%8A%A4/</url>
    <content><![CDATA[<h2 id="1-Hexoåšå®¢ç»´æŠ¤"><a href="#1-Hexoåšå®¢ç»´æŠ¤" class="headerlink" title="1 Hexoåšå®¢ç»´æŠ¤"></a>1 Hexoåšå®¢ç»´æŠ¤</h2><p>ç‰ˆæœ¬ï¼š<code>Next 8.12.2</code></p>
<p>1ã€ä¸‹è½½å®‰è£…nodejs</p>
<p><a href="https://nodejs.org/en/">https://nodejs.org/en/</a></p>
<p>2ã€åˆ‡æ¢npmä¸ºé˜¿é‡Œæº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<p>3ã€ä½¿ç”¨npmå®‰è£…hexo</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦åˆ™ä¼šæŠ¥é”™:</p>
<p>$ hexo clean<br>ERROR Cannot find module â€˜hexoâ€™ from â€˜C:\Users\fr724\Desktop\æ–°å»ºæ–‡ä»¶å¤¹\gsproj.github.ioâ€™<br>ERROR Local hexo loading failed in ~\Desktop\æ–°å»ºæ–‡ä»¶å¤¹\gsproj.github.io<br>ERROR Try running: â€˜rm -rf node_modules &amp;&amp; npm install â€“forceâ€™</p>
</blockquote>
<p>4ã€ä½¿ç”¨npmå®‰è£…æœç´¢åŠŸèƒ½ä¾èµ–</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-excerpt --save</span><br></pre></td></tr></table></figure>

<p>5ã€å†…å®¹ä¸Šçº¿</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo d # ä¸Šçº¿åˆ°githubio</span><br><span class="line">hexo s # æœ¬åœ°è¯•è¿è¡Œ</span><br></pre></td></tr></table></figure>



<h2 id="2-åŠŸèƒ½æ·»åŠ "><a href="#2-åŠŸèƒ½æ·»åŠ " class="headerlink" title="2 åŠŸèƒ½æ·»åŠ "></a>2 åŠŸèƒ½æ·»åŠ </h2><h3 id="2-1-æœç´¢åŠŸèƒ½"><a href="#2-1-æœç´¢åŠŸèƒ½" class="headerlink" title="2.1 æœç´¢åŠŸèƒ½"></a>2.1 æœç´¢åŠŸèƒ½</h3><p>å®‰è£…ä¾èµ–</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ä¸»é¢˜è®¾ç½®æ–‡ä»¶<code>themes/next/_config.yml</code></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Local Search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/next-theme/hexo-generator-searchdb</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>	<span class="comment"># æ­¤å¤„æ”¹ä¸ºtrue</span></span><br><span class="line">  <span class="comment"># If auto, trigger search by changing input.</span></span><br><span class="line">  <span class="comment"># If manual, trigger search by pressing enter key or search button.</span></span><br><span class="line">  <span class="attr">trigger:</span> <span class="string">auto</span></span><br><span class="line">  <span class="comment"># Show top n results per article, show all results by setting to -1</span></span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># Unescape html strings to the readable one.</span></span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Preload the search data when the page loads.</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-èœå•æ˜¾ç¤ºå½’æ¡£-x2F-ä¹¦ç­¾"><a href="#2-2-èœå•æ˜¾ç¤ºå½’æ¡£-x2F-ä¹¦ç­¾" class="headerlink" title="2.2 èœå•æ˜¾ç¤ºå½’æ¡£&#x2F;ä¹¦ç­¾"></a>2.2 èœå•æ˜¾ç¤ºå½’æ¡£&#x2F;ä¹¦ç­¾</h3><p>ä¿®æ”¹ä¸»é¢˜è®¾ç½®æ–‡ä»¶next&#x2F;_config.yml</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="comment">#home: / || fa fa-home</span></span><br><span class="line">  <span class="comment">#about: /about/ || fa fa-user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span>	<span class="comment"># å–æ¶ˆæ³¨é‡Š</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-th</span>	<span class="comment"># å–æ¶ˆæ³¨é‡Š</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span>	<span class="comment"># å–æ¶ˆæ³¨é‡Š</span></span><br><span class="line">  <span class="comment">#schedule: /schedule/ || fa fa-calendar</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml || fa fa-sitemap</span></span><br><span class="line">  <span class="comment">#commonweal: /404/ || fa fa-heartbeat</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/../../img/image-20220719101836015.png" alt="image-20220719101836015"></p>
<h3 id="2-3-é¼ æ ‡ç‚¹å‡»çƒŸèŠ±æ•ˆæœ"><a href="#2-3-é¼ æ ‡ç‚¹å‡»çƒŸèŠ±æ•ˆæœ" class="headerlink" title="2.3 é¼ æ ‡ç‚¹å‡»çƒŸèŠ±æ•ˆæœ"></a>2.3 é¼ æ ‡ç‚¹å‡»çƒŸèŠ±æ•ˆæœ</h3><p>ä¸‹è½½<a href="https://aliyun-oss-pic-bucket.oss-cn-beijing.aliyuncs.com/file/fireworks.js">fireworks.js</a>æ–‡ä»¶æ”¾åˆ°<code>themes/next/source\js\cursor</code>ä¸­</p>
<p>åˆ›å»º<code>themes/next/layout/_custom</code>æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»º<code>custom.swig</code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="comment"># é¼ æ ‡ç‚¹å‡»çƒŸèŠ±ç‰¹æ•ˆ #&#125;</span></span><br><span class="line">&#123;% <span class="keyword">if</span> theme.cursor_effect == <span class="string">&quot;fireworks&quot;</span> %&#125;</span><br><span class="line">  &lt;script <span class="keyword">async</span> src=<span class="string">&quot;/js/cursor/fireworks.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&#123;% elseif theme.cursor_effect == <span class="string">&quot;explosion&quot;</span> %&#125;</span><br><span class="line">  &lt;canvas <span class="class"><span class="keyword">class</span>=&quot;<span class="title">fireworks</span>&quot; <span class="title">style</span>=&quot;<span class="title">position</span>:</span> fixed;left: <span class="number">0</span>;top: <span class="number">0</span>;z-index: <span class="number">1</span>; pointer-events: none;<span class="string">&quot; &gt;&lt;/canvas&gt;</span></span><br><span class="line"><span class="string">  &lt;script src=&quot;</span>//cdn.bootcss.com/animejs/<span class="number">2.2</span><span class="number">.0</span>/anime.<span class="built_in">min</span>.js<span class="string">&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">  &lt;script async src=&quot;</span>/js/cursor/explosion.<span class="built_in">min</span>.js<span class="string">&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&#123;% elseif theme.cursor_effect == &quot;</span>love<span class="string">&quot; %&#125;</span></span><br><span class="line"><span class="string">  &lt;script async src=&quot;</span>/js/cursor/love.<span class="built_in">min</span>.js<span class="string">&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&#123;% elseif theme.cursor_effect == &quot;</span>text<span class="string">&quot; %&#125;</span></span><br><span class="line"><span class="string">  &lt;script async src=&quot;</span>/js/cursor/text.js<span class="string">&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&#123;% endif %&#125;</span></span><br></pre></td></tr></table></figure>

<p>ç¼–è¾‘&#96;themes&#x2F;next&#x2F;layout&#x2F;_layout.njkæ–‡ä»¶ï¼Œåœ¨å°¾è¡Œå¯¼å…¥swigæ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">  &#123;&#123; partial(&#x27;_scripts/index.njk&#x27;, &#123;&#125;, &#123;cache: theme.cache.enable&#125;) &#125;&#125;</span><br><span class="line">  &#123;&#123; partial(&#x27;_third-party/index.njk&#x27;, &#123;&#125;, &#123;cache: theme.cache.enable&#125;) &#125;&#125;</span><br><span class="line">  &#123;&#123; partial(&#x27;_third-party/statistics/index.njk&#x27;, &#123;&#125;, &#123;cache: theme.cache.enable&#125;) &#125;&#125;</span><br><span class="line"></span><br><span class="line">  &#123;%- include &#x27;_third-party/math/index.njk&#x27; -%&#125;</span><br><span class="line">  &#123;%- include &#x27;_third-party/quicklink.njk&#x27; -%&#125;</span><br><span class="line"></span><br><span class="line">  &#123;&#123;- next_inject(&#x27;bodyEnd&#x27;) &#125;&#125;</span><br><span class="line">  &#123;% include &#x27;_custom/custom.swig&#x27; %&#125;	# å¯¼å…¥swigæ–‡ä»¶</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>ç¼–è¾‘<code>themes/next/_config.yml</code>æ–‡ä»¶ï¼Œæ·»åŠ </p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é¼ æ ‡ç‚¹å‡»çƒŸèŠ±ç‰¹æ•ˆ</span></span><br><span class="line"><span class="attr">cursor_effect:</span> <span class="string">fireworks</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>PS:ä¸€ä¸ªå°ä¿®æ”¹ï¼Œé˜²æ­¢çƒŸèŠ±æ®‹ç•™</strong></p>
<p>å‚è€ƒï¼š<a href="https://yfx2012.top/2022/01/17/hexo/mouse-click-fireworks/">https://yfx2012.top/2022/01/17/hexo/mouse-click-fireworks/</a></p>
<p>ä¿®æ”¹firewaors.jsæ–‡ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">handlePageHide</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.booms = []</span><br><span class="line">  <span class="built_in">this</span>.running = <span class="literal">false</span></span><br><span class="line">  <span class="comment">// ç®€å•ä¿®æ”¹ï¼Œæ¸…ç†åœç•™ä¸åŠ¨çš„çƒŸç«ç‰¹æ•ˆ</span></span><br><span class="line">  <span class="built_in">this</span>.computerContext.clearRect(<span class="number">0</span>, <span class="number">0</span>, <span class="built_in">this</span>.globalWidth, <span class="built_in">this</span>.globalHeight)</span><br><span class="line">  <span class="built_in">this</span>.renderContext.clearRect(<span class="number">0</span>, <span class="number">0</span>, <span class="built_in">this</span>.globalWidth, <span class="built_in">this</span>.globalHeight)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="2-4-å…³é—­æ–‡ç« ç›®å½•çš„è‡ªåŠ¨ç« èŠ‚å·"><a href="#2-4-å…³é—­æ–‡ç« ç›®å½•çš„è‡ªåŠ¨ç« èŠ‚å·" class="headerlink" title="2.4 å…³é—­æ–‡ç« ç›®å½•çš„è‡ªåŠ¨ç« èŠ‚å·"></a>2.4 å…³é—­æ–‡ç« ç›®å½•çš„è‡ªåŠ¨ç« èŠ‚å·</h3><p>æœªä¿®æ”¹å‰ï¼Œè‡ªåŠ¨æ’äº†åºå·ï¼Œçœ‹ä¸Šå»å¾ˆä¹±ï¼š</p>
<p><img src="/../../img/image-20220719104324299.png" alt="image-20220719104324299"></p>
<p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>/themes/next/_config.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Automatically add list number to toc.</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">false</span>	<span class="comment"># æ”¹ä¸ºfalseå…³é—­</span></span><br><span class="line">  <span class="comment"># If true, all words will placed on next lines if header width longer then sidebar width.</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># If true, all level of TOC in a post will be displayed, rather than the activated part of it.</span></span><br><span class="line">  <span class="attr">expand_all:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Maximum heading depth of generated toc.</span></span><br><span class="line">  <span class="attr">max_depth:</span> <span class="number">6</span></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹åï¼Œæ¸…çˆ½äº†å¾ˆå¤šï¼š</p>
<p><img src="/../../img/image-20220719104519550.png" alt="image-20220719104519550"></p>
<h3 id="2-5-æ·»åŠ å¤´åƒ"><a href="#2-5-æ·»åŠ å¤´åƒ" class="headerlink" title="2.5 æ·»åŠ å¤´åƒ"></a>2.5 æ·»åŠ å¤´åƒ</h3><p>å°†å¤´åƒæ–‡ä»¶æ”¾åˆ°<code>themes/next/source/images</code>ä¸­</p>
<p>ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶<code>/themes/next/_config.yml</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Sidebar Avatar</span></span><br><span class="line">avatar:</span><br><span class="line"><span class="meta">  #</span><span class="bash"> Replace the default image and <span class="built_in">set</span> the url here.</span></span><br><span class="line">  url: /images/myavatar.png</span><br></pre></td></tr></table></figure>

<h3 id="2-6-ä¿®æ”¹èƒŒæ™¯å›¾ç‰‡"><a href="#2-6-ä¿®æ”¹èƒŒæ™¯å›¾ç‰‡" class="headerlink" title="2.6 ä¿®æ”¹èƒŒæ™¯å›¾ç‰‡"></a>2.6 ä¿®æ”¹èƒŒæ™¯å›¾ç‰‡</h3><blockquote>
<p>ç™½èŠ±èŠ±çš„æœ‰ç‚¹å•è°ƒ</p>
</blockquote>
<p>å°†èƒŒæ™¯å›¾ç‰‡æ”¾åˆ°<code>themes\next\source\images</code></p>
<p>æ–°å»º<code>source\_data</code>æ–‡ä»¶å¤¹ï¼ˆæ˜¯hexoç›®å½•ä¸‹çš„source,ä¸æ˜¯ä¸»é¢˜çš„sourceï¼‰</p>
<p>åœ¨<code>_data</code>ä¸­æ–°å»º<code>styles.styl</code>æ–‡ä»¶</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">body</span> &#123;</span><br><span class="line">    <span class="string">background:url(/images/xhc.jpg);</span></span><br><span class="line">    <span class="attr">background-repeat:</span> <span class="literal">no</span><span class="string">-repeat;</span></span><br><span class="line">    <span class="string">background-attachment:fixed;</span></span><br><span class="line">    <span class="string">background-position:50%</span> <span class="number">50</span><span class="string">%;</span></span><br><span class="line">    <span class="string">//</span> <span class="attr">background-size:</span> <span class="number">100</span><span class="string">%</span> <span class="number">100</span><span class="string">%;</span></span><br><span class="line">    <span class="attr">background-size:</span> <span class="string">cover;</span></span><br><span class="line">    <span class="string">-webkit-background-size:</span> <span class="string">cover;</span></span><br><span class="line">    <span class="string">-o-background-size:</span> <span class="string">cover;</span></span><br><span class="line">    <span class="string">-moz-background-size:</span> <span class="string">cover;</span></span><br><span class="line">    <span class="string">-ms-background-size:</span> <span class="string">cover;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°†<code>themes/next/_config.yml</code>é…ç½®æ–‡ä»¶ä¸­<code>custom_file_path:</code>ä¸‹çš„<code>#style: source/_data/styles.styl</code>#å·å»æ‰ï¼Œå¦‚ä¸‹</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="comment">#head: source/_data/head.njk</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.njk</span></span><br><span class="line">  <span class="comment">#sidebar: source/_data/sidebar.njk</span></span><br><span class="line">  <span class="comment">#postMeta: source/_data/post-meta.njk</span></span><br><span class="line">  <span class="comment">#postBodyEnd: source/_data/post-body-end.njk</span></span><br><span class="line">  <span class="comment">#footer: source/_data/footer.njk</span></span><br><span class="line">  <span class="comment">#bodyEnd: source/_data/body-end.njk</span></span><br><span class="line">  <span class="comment">#variable: source/_data/variables.styl</span></span><br><span class="line">  <span class="comment">#mixin: source/_data/mixins.styl</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></span><br></pre></td></tr></table></figure>

<h3 id="2-7-ä¿®æ”¹ä¸ºåœ†è§’"><a href="#2-7-ä¿®æ”¹ä¸ºåœ†è§’" class="headerlink" title="2.7 ä¿®æ”¹ä¸ºåœ†è§’"></a>2.7 ä¿®æ”¹ä¸ºåœ†è§’</h3><p>åˆ›å»º<code>source/_data/variables.styl</code>æ–‡ä»¶</p>
<p>åœ¨é‡Œé¢æ·»åŠ ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// åœ†è§’è®¾ç½®</span><br><span class="line">$<span class="attribute">border-radius</span>-inner     = <span class="number">20px</span>;</span><br><span class="line">$<span class="attribute">border-radius</span>           = <span class="number">20px</span>;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°†<code>themes/next/_config.yml</code>é…ç½®æ–‡ä»¶ä¸­<code>custom_file_path:</code>ä¸‹çš„<code>#style: source/_data/variables.styl</code>#å·å»æ‰ï¼Œå¦‚ä¸‹</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="comment">#head: source/_data/head.njk</span></span><br><span class="line">  <span class="comment">#header: source/_data/header.njk</span></span><br><span class="line">  <span class="comment">#sidebar: source/_data/sidebar.njk</span></span><br><span class="line">  <span class="comment">#postMeta: source/_data/post-meta.njk</span></span><br><span class="line">  <span class="comment">#postBodyEnd: source/_data/post-body-end.njk</span></span><br><span class="line">  <span class="comment">#footer: source/_data/footer.njk</span></span><br><span class="line">  <span class="comment">#bodyEnd: source/_data/body-end.njk</span></span><br><span class="line">  <span class="attr">variable:</span> <span class="string">source/_data/variables.styl</span></span><br><span class="line">  <span class="comment">#mixin: source/_data/mixins.styl</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></span><br></pre></td></tr></table></figure>

<p>éƒ¨åˆ†å¾®è°ƒ:</p>
<p>1ï¼‰ä¾§è¾¹æ éƒ¨åˆ†æ²¡æœ‰åœ†è§’</p>
<p>ç¼–è¾‘2.6åˆ›å»ºçš„<code>styles.styl</code>æ–‡ä»¶ï¼Œæ·»åŠ </p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">.site-brand-container</span> &#123;</span><br><span class="line">    <span class="attr">border-radius-inner:</span> <span class="string">20px</span> <span class="string">20px</span> <span class="number">0</span> <span class="number">0</span><span class="string">;</span></span><br><span class="line">    <span class="attr">border-radius:</span> <span class="string">20px</span> <span class="string">20px</span> <span class="number">0</span> <span class="number">0</span><span class="string">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ï¼‰è¿”å›é¡¶éƒ¨æŒ‰é’®æ˜¾ç¤ºä¸ºæ–¹å½¢</p>
<p>ç¼–è¾‘<code>themes\next\source\css\_variables\Gemini.styl</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">//</span> <span class="string">$body-bg-color</span>           <span class="string">=</span> <span class="comment">#eee;	# æ³¨é‡Š</span></span><br><span class="line"><span class="string">$body-bg-color</span>           <span class="string">=</span> <span class="string">transparent;</span>	<span class="comment"># æ–°å¢</span></span><br></pre></td></tr></table></figure>

<h3 id="2-8-åŠ è½½åŠ¨ç”»é€Ÿåº¦è°ƒæ•´"><a href="#2-8-åŠ è½½åŠ¨ç”»é€Ÿåº¦è°ƒæ•´" class="headerlink" title="2.8 åŠ è½½åŠ¨ç”»é€Ÿåº¦è°ƒæ•´"></a>2.8 åŠ è½½åŠ¨ç”»é€Ÿåº¦è°ƒæ•´</h3><p>é¡µé¢åŠ è½½ä¼šæœ‰æ®µåŠ¨ç”»ï¼Œé»˜è®¤æ¯”è¾ƒæ…¢ï¼Œå¯ä»¥è°ƒæ•´</p>
<p>ç¼–è¾‘æ–‡ä»¶<code>themes\next\source\js\motion.js</code>ï¼Œè°ƒæ•´<code>duration</code>çš„å€¼ï¼Œé»˜è®¤200ï¼Œè¶Šå¤§è¶Šæ…¢ï¼Œå¯ä»¥è°ƒå°ä¸€äº›</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">bootstrap: <span class="built_in">function</span>() &#123;</span><br><span class="line">    if (!CONFIG.motion.async) this.queue = [this.queue];</span><br><span class="line">    this<span class="selector-class">.queue</span><span class="selector-class">.forEach</span>(sequence =&gt; &#123;</span><br><span class="line">        const timeline = window<span class="selector-class">.anime</span><span class="selector-class">.timeline</span>(&#123;</span><br><span class="line">            duration: <span class="number">100</span>,	# è°ƒæ•´ä¸º<span class="number">100</span></span><br><span class="line">                easing  : <span class="string">&#x27;linear&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line">        sequence<span class="selector-class">.forEach</span>(item =&gt; &#123;</span><br><span class="line">            if (item<span class="selector-class">.deltaT</span>) timeline<span class="selector-class">.add</span>(item, item<span class="selector-class">.deltaT</span>);</span><br><span class="line">            else timeline<span class="selector-class">.add</span>(item);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-9-å›¾ç‰‡ç‚¹å‡»æ”¾å¤§"><a href="#2-9-å›¾ç‰‡ç‚¹å‡»æ”¾å¤§" class="headerlink" title="2.9 å›¾ç‰‡ç‚¹å‡»æ”¾å¤§"></a>2.9 å›¾ç‰‡ç‚¹å‡»æ”¾å¤§</h3><p>ä¿®æ”¹<code>themes/next/_config.yml</code>é…ç½®</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># FancyBox is a tool that offers a nice and elegant way to add zooming functionality for images.</span></span><br><span class="line"><span class="comment"># For more information: https://fancyapps.com/fancybox/</span></span><br><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="2-10-ç•Œé¢é€æ˜"><a href="#2-10-ç•Œé¢é€æ˜" class="headerlink" title="2.10 ç•Œé¢é€æ˜"></a>2.10 ç•Œé¢é€æ˜</h3><p>ä¿®æ”¹<code>source\_data\styles.styl</code>æ–‡ä»¶ï¼Œæ·»åŠ </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// ç•Œé¢é€æ˜</span><br><span class="line"><span class="selector-class">.main-inner</span>&#123;</span><br><span class="line">	<span class="attribute">opacity</span>: <span class="number">0.9</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header-inner</span>&#123;</span><br><span class="line">	<span class="attribute">opacity</span>: <span class="number">0.9</span>;</span><br><span class="line">	<span class="attribute">z-index</span>: <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-11-macä»£ç å—"><a href="#2-11-macä»£ç å—" class="headerlink" title="2.11 macä»£ç å—"></a>2.11 macä»£ç å—</h3><p>ä¿®æ”¹hexoçš„<code>_config.yml</code>æ–‡ä»¶</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>	<span class="comment"># å¼€å¯highlightæ¸²æŸ“å¼•æ“</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">wrap:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hljs:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span>	<span class="comment"># å…³é—­prismjsæ¸²æŸ“å¼•æ“</span></span><br><span class="line">  <span class="attr">preprocess:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹<code>themes/next/_config.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="comment"># Code Highlight theme</span></span><br><span class="line">  <span class="comment"># All available themes: https://theme-next.js.org/highlight/</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">a11y-dark</span>	<span class="comment"># é€‰ç”¨highlightå¼•æ“ï¼Œå¹¶å¯ç”¨a11y-darké£æ ¼</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">stackoverflow-dark</span></span><br><span class="line">  <span class="attr">prism:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">docco</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">prism-dark</span></span><br><span class="line">  <span class="comment"># Add copy button on codeblock</span></span><br><span class="line">  <span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Available values: default | flat | mac</span></span><br><span class="line">    <span class="attr">style:</span> <span class="string">mac</span>	<span class="comment"># å¯ç”¨macé£æ ¼</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="/../../img/image-20220720150943450.png" alt="image-20220720150943450"></p>
<h3 id="2-12-æ·»åŠ å›åˆ°é¡¶éƒ¨æŒ‰é’®-å°çŒ«"><a href="#2-12-æ·»åŠ å›åˆ°é¡¶éƒ¨æŒ‰é’®-å°çŒ«" class="headerlink" title="2.12 æ·»åŠ å›åˆ°é¡¶éƒ¨æŒ‰é’®-å°çŒ«"></a>2.12 æ·»åŠ å›åˆ°é¡¶éƒ¨æŒ‰é’®-å°çŒ«</h3><p>å°†å°çŒ«å›¾ç‰‡æ”¾åˆ°<code>themes/next/source/images</code>ä¸­</p>
<p>ç¼–è¾‘2.6åˆ›å»ºçš„<code>styles.styl</code>æ–‡ä»¶ï¼Œæ·»åŠ </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">//è‡ªå®šä¹‰å›åˆ°é¡¶éƒ¨æ ·å¼</span><br><span class="line"><span class="selector-class">.back-to-top</span> &#123;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">70px</span>;  //å›¾ç‰‡ç´ æå®½åº¦</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">900px</span>;  //å›¾ç‰‡ç´ æé«˜åº¦</span><br><span class="line">  <span class="attribute">top</span>: -<span class="number">900px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: unset;</span><br><span class="line">  <span class="attribute">transition</span>: all .<span class="number">5s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;/images/scroll.png&quot;</span>);</span><br><span class="line"></span><br><span class="line">  //éšè—ç®­å¤´å›¾æ ‡</span><br><span class="line">  &gt; <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &amp;<span class="selector-class">.back-to-top-on</span> &#123;</span><br><span class="line">    <span class="attribute">bottom</span>: unset;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">100vh</span> &lt; (<span class="number">900px</span> + <span class="number">200px</span>) ? <span class="built_in">calc</span>( <span class="number">100vh</span> - <span class="number">900px</span> - <span class="number">200px</span> ) : <span class="number">0px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¼–è¾‘<code>themes/next/_config.yml</code>æ–‡ä»¶ï¼Œæ‰“å¼€è¿”å›é¡¶éƒ¨æŒ‰é’®å¼€å…³</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">back2top:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>	<span class="comment"># æ”¹ä¸ºtrueæ‰“å¼€</span></span><br><span class="line">  <span class="comment"># Back to top in sidebar.</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Scroll percent label in b2t button.</span></span><br><span class="line">  <span class="attr">scrollpercent:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h3 id="2-13-ç»™blockquoteæ·»åŠ é¢œè‰²"><a href="#2-13-ç»™blockquoteæ·»åŠ é¢œè‰²" class="headerlink" title="2.13 ç»™blockquoteæ·»åŠ é¢œè‰²"></a>2.13 ç»™blockquoteæ·»åŠ é¢œè‰²</h3><p>ç¼–è¾‘<code>themes\next\source\css\_common\scaffolding\base.styl</code></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">blockquote</span> &#123;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">4px</span> solid $grey-lighter;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--blockquote-color);</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line"></span><br><span class="line">  // æ·»åŠ é¢œè‰²</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-color</span> rgba(<span class="number">212</span>,<span class="number">239</span>,<span class="number">223</span>,.<span class="number">6</span>);</span><br><span class="line">  <span class="attribute">border-left</span> <span class="number">4px</span> solid rgb(<span class="number">30</span>,<span class="number">132</span>,<span class="number">73</span>);</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">cite</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;-&#x27;</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<blockquote>
<p><font color=blue><strong>TIPS:</strong></font></p>
<p>è¿™æ˜¯ä¸€æ®µBlockquoteçš„æ¼”ç¤ºæ–‡å­—</p>
</blockquote>
<h3 id="2-14-ä¿®æ”¹é€‰ä¸­æ–‡å­—åº•è‰²"><a href="#2-14-ä¿®æ”¹é€‰ä¸­æ–‡å­—åº•è‰²" class="headerlink" title="2.14 ä¿®æ”¹é€‰ä¸­æ–‡å­—åº•è‰²"></a>2.14 ä¿®æ”¹é€‰ä¸­æ–‡å­—åº•è‰²</h3><p>ç¼–è¾‘2.6åˆ›å»ºçš„<code>styles.styl</code>æ–‡ä»¶ï¼Œæ·»åŠ </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// ä¿®æ”¹é€‰ä¸­æ–‡å­—åº•è‰²</span><br><span class="line"><span class="comment">/* webkit, opera, IE9 */</span></span><br><span class="line"><span class="selector-pseudo">::selection</span> &#123; </span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#00c4b6</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#f7f7f7</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* firefox */</span></span><br><span class="line">::-moz-selection &#123; </span><br><span class="line">    background: <span class="number">#00c4b6</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#f7f7f7</span>;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-15-æ·»åŠ é˜…è¯»å…¨æ–‡åŠŸèƒ½"><a href="#2-15-æ·»åŠ é˜…è¯»å…¨æ–‡åŠŸèƒ½" class="headerlink" title="2.15 æ·»åŠ é˜…è¯»å…¨æ–‡åŠŸèƒ½"></a>2.15 æ·»åŠ é˜…è¯»å…¨æ–‡åŠŸèƒ½</h3><p>å®‰è£…æ’ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-excerpt --save</span><br></pre></td></tr></table></figure>

<p>ç¼–è¾‘hexoçš„<code>_config.yml</code>æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é˜…è¯»å…¨æ–‡</span></span><br><span class="line"><span class="attr">excerpt:</span></span><br><span class="line">  <span class="attr">depth:</span> <span class="number">1</span>	<span class="comment"># ä»–çš„å¤§å°å°±æ˜¯å…¨æ–‡é˜…è¯»é¢„è§ˆé•¿åº¦è®¾ç½®</span></span><br><span class="line">  <span class="attr">excerpt_excludes:</span> []</span><br><span class="line">  <span class="attr">more_excludes:</span> []</span><br><span class="line">  <span class="attr">hideWholePostExcerpts:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>ç¼–è¾‘ä¸»é¢˜çš„<code>_config.yml</code>æ–‡ä»¶ï¼Œæ·»åŠ </p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">excerpt_description:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="2-16-å¼€å¯ä¸è’œå­ç»Ÿè®¡è®¿é—®é‡"><a href="#2-16-å¼€å¯ä¸è’œå­ç»Ÿè®¡è®¿é—®é‡" class="headerlink" title="2.16 å¼€å¯ä¸è’œå­ç»Ÿè®¡è®¿é—®é‡"></a>2.16 å¼€å¯ä¸è’œå­ç»Ÿè®¡è®¿é—®é‡</h3><p>ç¼–è¾‘<code>themes\next\layout\_partials\footer.njk</code>æ–‡ä»¶ï¼Œåœ¨<code>é¦–è¡Œ</code>æ·»åŠ </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;script</span><br><span class="line">  async</span><br><span class="line">  <span class="attribute">src</span>=&quot;https://dn-lbstatics.qbox.me/busuanzi/<span class="number">2.3</span>/busuanzi.pure.mini.js<span class="string">&quot;</span></span><br><span class="line"><span class="string">&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶<code>themes\next\_config.yml</code>ï¼Œå¼€å¯è®¾ç½®</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>	<span class="comment"># å¼€å¯</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span>  <span class="comment"># è®¿å®¢æ•°</span></span><br><span class="line">  <span class="attr">total_visitors_icon:</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span> <span class="comment"># è®¿é—®é‡</span></span><br><span class="line">  <span class="attr">total_views_icon:</span> <span class="string">fa</span> <span class="string">fa-eye</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_views_icon:</span> <span class="string">far</span> <span class="string">fa-eye</span></span><br></pre></td></tr></table></figure>

<h3 id="2-17-å­—ä½“å¤§å°ä¿®æ”¹"><a href="#2-17-å­—ä½“å¤§å°ä¿®æ”¹" class="headerlink" title="2.17 å­—ä½“å¤§å°ä¿®æ”¹"></a>2.17 å­—ä½“å¤§å°ä¿®æ”¹</h3><p>ç¼–è¾‘<code>themes\next\source\css\_variables\base.styl</code>, ä¿®æ”¹å­—ä½“å¤§å°</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// <span class="attribute">Font</span> size</span><br><span class="line">$<span class="attribute">font-size</span>-base           = (hexo-config(&#x27;<span class="attribute">font</span><span class="selector-class">.enable</span>&#x27;) and hexo-config(&#x27;<span class="attribute">font</span><span class="selector-class">.global</span><span class="selector-class">.size</span>&#x27;) is <span class="selector-tag">a</span> &#x27;unit&#x27;) ? unit(hexo-config(&#x27;<span class="attribute">font</span><span class="selector-class">.global</span><span class="selector-class">.size</span>&#x27;), <span class="selector-tag">em</span>) : <span class="number">1em</span>;</span><br><span class="line">$<span class="attribute">font-size</span>-smallest       = <span class="number">10px</span>;</span><br><span class="line">$<span class="attribute">font-size</span>-smaller        = <span class="number">11px</span>;</span><br><span class="line">$<span class="attribute">font-size</span>-small          = <span class="number">12px</span>;</span><br><span class="line">$<span class="attribute">font-size</span>-medium         = <span class="number">13px</span>;</span><br><span class="line">$<span class="attribute">font-size</span>-large          = <span class="number">14px</span>;</span><br><span class="line">$<span class="attribute">font-size</span>-larger         = <span class="number">15px</span>;</span><br><span class="line">$<span class="attribute">font-size</span>-largest        = <span class="number">22px</span>;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>æ‚è®°</category>
      </categories>
  </entry>
  <entry>
    <title>é•¿åŸTD120A2å®‰è£…OpenEuler</title>
    <url>/2022/07/11/04_%E6%9D%82%E8%AE%B0/%E9%95%BF%E5%9F%8ETD120A2%E5%AE%89%E8%A3%85OpenEuler/</url>
    <content><![CDATA[<blockquote>
<p>è®°å½•å®‰è£…è¿‡ç¨‹</p>
</blockquote>
<h3 id="ä¸€ã€ç¯å¢ƒ"><a href="#ä¸€ã€ç¯å¢ƒ" class="headerlink" title="ä¸€ã€ç¯å¢ƒ"></a>ä¸€ã€ç¯å¢ƒ</h3><table>
<thead>
<tr>
<th></th>
<th>å‹å·</th>
</tr>
</thead>
<tbody><tr>
<td>CPU</td>
<td>é£è…¾D2000&#x2F;8æ ¸</td>
</tr>
<tr>
<td>å†…å­˜</td>
<td>ç´«å…‰DDR4 3200</td>
</tr>
<tr>
<td>æ˜¾å¡</td>
<td>AMD RX520</td>
</tr>
<tr>
<td>å®‰è£…ç³»ç»Ÿ</td>
<td>OpenEuler 20.09</td>
</tr>
</tbody></table>
<h3 id="äºŒã€OpenEulerå®‰è£…"><a href="#äºŒã€OpenEulerå®‰è£…" class="headerlink" title="äºŒã€OpenEulerå®‰è£…"></a>äºŒã€OpenEulerå®‰è£…</h3><p>1ã€é•œåƒå‡†å¤‡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">openEuler-20.09-aarch64-dvd.iso</span><br></pre></td></tr></table></figure>

<p>2ã€åˆ¶ä½œå¯åŠ¨ç›˜</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ä½¿ç”¨win32diskimageråˆ¶ä½œUç›˜å¯åŠ¨å™¨</span><br></pre></td></tr></table></figure>

<p>3ã€å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¿›å…¥å®‰è£…ç•Œé¢ï¼š</span><br><span class="line">Install openEuler 20.09...</span><br><span class="line">Test this media &amp; install openEuler 20.09...</span><br><span class="line">Troubleshooting</span><br><span class="line"></span><br><span class="line">é€‰æ‹©åˆ°Install openEuler 20.09...è¡Œ</span><br><span class="line">Ctrl + e è¿›å…¥ç¼–è¾‘ç•Œé¢</span><br><span class="line">åˆ é™¤&quot;video=efifb:off&quot;</span><br><span class="line">Ctrl + x ä¿å­˜å¹¶é€€å‡ºï¼Œè¿›å…¥å›¾å½¢åŒ–å®‰è£…ç•Œé¢</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸ºä»€ä¹ˆè¦åˆ é™¤æ­¤grubå‚æ•°ï¼Ÿ â€”ç›´æ¥å®‰è£…å°†å¡åœ¨æ­¤ç•Œé¢</p>
<p>EFI stub: Booting Linux Kernelâ€¦</p>
<p>EFI stub: EFI_RNG_PROTOCOL unavaliable, no randomness supplied</p>
<p>EFI stub: Using DTB from configuration table</p>
<p>EFT stub: Exiting boot services and installing virtual address mapâ€¦</p>
</blockquote>
<p>4ã€å¯åŠ¨ç³»ç»Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¿›å…¥ç³»ç»Ÿåï¼Œä¿®æ”¹/boot/efi/EFI/openEuler/grub.cfgæ–‡ä»¶</span><br><span class="line">åŒæ ·ï¼Œå°†&quot;video=efifb:off&quot;æ³¨é‡Šæˆ–è€…åˆ é™¤</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;é˜²æ­¢é‡å¯å¡åœ¨å¼•å¯¼ç•Œé¢</span></span><br></pre></td></tr></table></figure>

<p>5ã€æ— çº¿ç½‘å¡è¿æ¥wifi</p>
<blockquote>
<p>TD120A2å®‰è£…OpenEulerå,æœ‰çº¿ç½‘å¡æ— æ³•è¯†åˆ«ï¼Œéœ€è¦å®‰è£…USBæ— çº¿ç½‘å¡ï¼Œå¹¶å®‰è£…é…å¥—çš„é©±åŠ¨ï¼Œæ— çº¿ç½‘å¡è¯†åˆ«åå¯ä»¥è¿æ¥wifi</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nmcli dev wifi # æŸ¥è¯¢wifi</span><br><span class="line">nmcli dev wifi connet ç½‘ç»œå password å¯†ç </span><br></pre></td></tr></table></figure>

<p>6ã€å›¾å½¢åŒ–ç•Œé¢å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo dnf makecache</span><br><span class="line">sudo dnf groupinstall ukui</span><br><span class="line">systemctl set-default graphical</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ‚è®°</category>
      </categories>
  </entry>
  <entry>
    <title>Dockerç³»åˆ—(ä¸€)-å®‰è£…Docker</title>
    <url>/2021/06/28/01_%E8%BF%90%E7%BB%B4/03-Docker/Docker%E7%B3%BB%E5%88%97-%E4%B8%80-%E5%AE%89%E8%A3%85Docker/</url>
    <content><![CDATA[<h2 id="ä¸€ã€å®¹å™¨ç®€ä»‹"><a href="#ä¸€ã€å®¹å™¨ç®€ä»‹" class="headerlink" title="ä¸€ã€å®¹å™¨ç®€ä»‹"></a>ä¸€ã€å®¹å™¨ç®€ä»‹</h2><blockquote>
<p>å®¹å™¨å°±æ˜¯åœ¨éš”ç¦»ç¯å¢ƒä¸­è¿è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Œå¦‚æœè¿›ç¨‹åœæ­¢ï¼Œå®¹å™¨å°±ä¼šé”€æ¯ï¼Œéš”ç¦»ç¯å¢ƒæ‹¥æœ‰è‡ªå·±çš„ç³»ç»Ÿæ–‡ä»¶ï¼Œipåœ°å€ï¼Œä¸»æœºåç­‰ã€‚</p>
</blockquote>
<h3 id="1-å®¹å™¨å’Œè™šæ‹ŸåŒ–çš„åŒºåˆ«"><a href="#1-å®¹å™¨å’Œè™šæ‹ŸåŒ–çš„åŒºåˆ«" class="headerlink" title="1 å®¹å™¨å’Œè™šæ‹ŸåŒ–çš„åŒºåˆ«"></a>1 å®¹å™¨å’Œè™šæ‹ŸåŒ–çš„åŒºåˆ«</h3><ul>
<li><p>KVMè™šæ‹ŸåŒ–ï¼š</p>
<ul>
<li><p>éœ€è¦ç¡¬ä»¶çš„æ”¯æŒï¼Œéœ€è¦æ¨¡æ‹Ÿç¡¬ä»¶ï¼Œå¯ä»¥è¿è¡Œä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå¯åŠ¨æ—¶é—´åˆ†é’Ÿçº§ï¼ˆæœ‰å¼€æœºå¯åŠ¨æµç¨‹ï¼‰</p>
<p>å¼€æœºå¯åŠ¨æµç¨‹</p>
<p>bioså¼€æœºç¡¬ä»¶è‡ªæ£€</p>
<p>æ ¹æ®biosè®¾ç½®çš„ä¼˜å…ˆå¯åŠ¨é¡¹boot</p>
<p>è¯»å–mbr&#x2F;gptå¼•å¯¼ï¼Œè¯»å–mbrç¡¬ç›˜åˆ†åŒºä¿¡æ¯ï¼Œå†…æ ¸åŠ è½½è·¯å¾„</p>
<p>åŠ è½½å†…æ ¸</p>
<p>å¯åŠ¨ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼ˆC6ï¼š&#x2F;sbin&#x2F;initï¼ŒC7ï¼šsystemdï¼‰</p>
<p>ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ</p>
<p>è¿è¡ŒæœåŠ¡</p>
</li>
</ul>
</li>
<li><p>å®¹å™¨ï¼š</p>
<ul>
<li><p>ä¸éœ€è¦ç¡¬ä»¶çš„æ”¯æŒï¼Œä¸éœ€è¦æ¨¡æ‹Ÿç¡¬ä»¶ï¼Œå…¬ç”¨å®¿ä¸»æœºå†…æ ¸ï¼Œå¯åŠ¨æ—¶é—´ç§’çº§ï¼ˆæ²¡æœ‰å¼€æœºå¯åŠ¨æµç¨‹ï¼‰</p>
<p>å®¹å™¨çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ç›´æ¥è¿è¡ŒæœåŠ¡ï¼ŒæŸè€—å°‘ï¼Œå¯åŠ¨å¿«ï¼Œæ€§èƒ½é«˜</p>
</li>
</ul>
</li>
</ul>
<h3 id="2-å®¹å™¨çš„ä¼˜ç¼ºç‚¹"><a href="#2-å®¹å™¨çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="2 å®¹å™¨çš„ä¼˜ç¼ºç‚¹"></a>2 å®¹å™¨çš„ä¼˜ç¼ºç‚¹</h3><ul>
<li><p>ä¼˜ç‚¹</p>
<ul>
<li><p>ä¸å®¿ä¸»æœºä½¿ç”¨åŒä¸€ä¸ªå†…æ ¸ï¼Œæ€§èƒ½æŸè€—å°</p>
<p>ä¸éœ€è¦æŒ‡ä»¤çº§æ¨¡æ‹Ÿ</p>
<p>å®¹å™¨å¯ä»¥å†cpuæ ¸å¿ƒçš„æœ¬åœ°è¿è¡ŒæŒ‡ä»¤ï¼Œä¸éœ€è¦ä»»ä½•ä¸“é—¨çš„è§£é‡Šæœºåˆ¶</p>
<p>é¿å…äº†å‡†è™šæ‹ŸåŒ–å’Œç³»ç»Ÿè°ƒç”¨æ›¿æ¢ä¸­çš„å¤æ‚æ€§</p>
<p>è½»é‡çº§éš”ç¦»ï¼Œåœ¨éš”ç¦»çš„åŒäº‹è¿˜æä¾›å…±äº«æœºåˆ¶ï¼Œä»¥å®ç°å®¹å™¨ä¸å®¿ä¸»æœºçš„èµ„æºå…±äº«</p>
</li>
</ul>
</li>
<li><p>ç¼ºç‚¹</p>
<ul>
<li>ä½¿ç”¨åŒä¸€å†…æ ¸ï¼Œå­˜åœ¨å®‰å…¨æ€§é—®é¢˜</li>
</ul>
</li>
</ul>
<h3 id="3-å®¹å™¨æŠ€æœ¯çš„å‘å±•è¿‡ç¨‹"><a href="#3-å®¹å™¨æŠ€æœ¯çš„å‘å±•è¿‡ç¨‹" class="headerlink" title="3 å®¹å™¨æŠ€æœ¯çš„å‘å±•è¿‡ç¨‹"></a>3 å®¹å™¨æŠ€æœ¯çš„å‘å±•è¿‡ç¨‹</h3><blockquote>
<p>chroot â€” lxc â€”- docker</p>
</blockquote>
<h3 id="4-Dockerç»„æˆ"><a href="#4-Dockerç»„æˆ" class="headerlink" title="4 Dockerç»„æˆ"></a>4 Dockerç»„æˆ</h3><p>â€‹	DockeråŸºäºGoè¯­è¨€å¼€å‘ï¼ŒC&#x2F;Sæ¨¡å¼</p>
<ul>
<li>ä¸»è¦ç»„ä»¶<ul>
<li>é•œåƒ</li>
<li>å®¹å™¨</li>
<li>ä»“åº“ï¼šæœ€å¤§çš„dockerhub</li>
<li>ç½‘ç»œ</li>
<li>å­˜å‚¨</li>
</ul>
</li>
</ul>
<h2 id="äºŒã€Dockerå®‰è£…"><a href="#äºŒã€Dockerå®‰è£…" class="headerlink" title="äºŒã€Dockerå®‰è£…"></a>äºŒã€Dockerå®‰è£…</h2><blockquote>
<p>å‚è€ƒç½‘ç«™ï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/help/docker-ce/">https://mirrors.tuna.tsinghua.edu.cn/help/docker-ce/</a></p>
</blockquote>
<h3 id="1-è”ç½‘åœ¨çº¿å®‰è£…"><a href="#1-è”ç½‘åœ¨çº¿å®‰è£…" class="headerlink" title="1 è”ç½‘åœ¨çº¿å®‰è£…"></a>1 è”ç½‘åœ¨çº¿å®‰è£…</h3><p>å¼€å¯rpmåŒ…ç¼“å­˜ï¼Œæ–¹ä¾¿åˆ¶ä½œç¦»çº¿å®‰è£…åŒ…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/yum.conf</span><br><span class="line">keepcache=1 </span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ ä¹‹å‰å®‰è£…è¿‡ dockerï¼Œè¯·å…ˆåˆ æ‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo yum remove docker docker-common docker-selinux docker-engine</span><br></pre></td></tr></table></figure>

<p>å®‰è£…ä¸€äº›ä¾èµ–</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®ä½ çš„å‘è¡Œç‰ˆä¸‹è½½repoæ–‡ä»¶ï¼ˆCentosï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget -O /etc/yum.repos.d/docker-ce.repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure>

<p>æŠŠè½¯ä»¶ä»“åº“æ›¿æ¢ä¸ºTUNAï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo sed -i &#x27;s+download.docker.com+mirrors.tuna.tsinghua.edu.cn/docker-ce+&#x27; /etc/yum.repos.d/docker-ce.repo</span><br></pre></td></tr></table></figure>

<p>æœ€åå®‰è£…:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo yum makecache fast</span><br><span class="line">    sudo yum install docker-ce</span><br></pre></td></tr></table></figure>

<h3 id="2-æ— ç½‘ç¯å¢ƒä¸‹ç¦»çº¿å®‰è£…"><a href="#2-æ— ç½‘ç¯å¢ƒä¸‹ç¦»çº¿å®‰è£…" class="headerlink" title="2 æ— ç½‘ç¯å¢ƒä¸‹ç¦»çº¿å®‰è£…"></a>2 æ— ç½‘ç¯å¢ƒä¸‹ç¦»çº¿å®‰è£…</h3><p>æœé›†è”ç½‘ç¯å¢ƒä¸‹ä¸‹è½½çš„rpmåŒ…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">find /var/cache/yum/x86_64/7/ -name &quot;*.rpm&quot; | xargs -i mv &#123;&#125; docker_rpm/</span><br><span class="line">tar -zvcf docker_rpm.tgz docker_rpm/</span><br></pre></td></tr></table></figure>

<p>æ‹·è´åˆ°æ— ç½‘ç¯å¢ƒçš„æœåŠ¡å™¨ä¸­å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -vxf docker_rpm.tgz # è§£å‹</span><br><span class="line">cd docker_rpm	</span><br><span class="line">rpm -Uvh ./*.rpm # å®‰è£…</span><br></pre></td></tr></table></figure>

<h3 id="3-å¯åŠ¨æœåŠ¡å¹¶éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ"><a href="#3-å¯åŠ¨æœåŠ¡å¹¶éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ" class="headerlink" title="3 å¯åŠ¨æœåŠ¡å¹¶éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ"></a>3 å¯åŠ¨æœåŠ¡å¹¶éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨æœåŠ¡</span></span><br><span class="line">systemctl enable docker</span><br><span class="line">systemctl start docker</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</span></span><br><span class="line">docker version</span><br><span class="line">docker info</span><br></pre></td></tr></table></figure>

<h3 id="4-Dockeré•œåƒä¸‹è½½åŠ é€Ÿ"><a href="#4-Dockeré•œåƒä¸‹è½½åŠ é€Ÿ" class="headerlink" title="4 Dockeré•œåƒä¸‹è½½åŠ é€Ÿ"></a>4 Dockeré•œåƒä¸‹è½½åŠ é€Ÿ</h3><ul>
<li>é˜¿é‡Œäº‘dockeré•œåƒåŠ é€Ÿå™¨æœåŠ¡</li>
<li>é…ç½®dockeré•œåƒåŠ é€Ÿ(æ¨è)</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line">vi /etc/docker/daemon.json</span><br><span class="line">&#123;    </span><br><span class="line">	&quot;registry-mirrors&quot;:[&quot;https://registry.docker-cn.com&quot;]</span><br><span class="line">&#125; </span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡æ–°åŠ è½½</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>

<h3 id="5-åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªnginxå®¹å™¨"><a href="#5-åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªnginxå®¹å™¨" class="headerlink" title="5 åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªnginxå®¹å™¨"></a>5 åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªnginxå®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d -p 80:80 nginx</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸‰ï¼‰Docker</category>
      </categories>
  </entry>
  <entry>
    <title>Dockerç³»åˆ—(ä¸‰)-å®¹å™¨çš„ç½‘ç»œè®¿é—®</title>
    <url>/2021/06/29/01_%E8%BF%90%E7%BB%B4/03-Docker/Docker%E7%B3%BB%E5%88%97-%E4%B8%89-%E5%AE%B9%E5%99%A8%E7%9A%84%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE/</url>
    <content><![CDATA[<h2 id="ä¸€ã€å®¹å™¨çš„ç½‘ç»œè®¿é—®æµç¨‹"><a href="#ä¸€ã€å®¹å™¨çš„ç½‘ç»œè®¿é—®æµç¨‹" class="headerlink" title="ä¸€ã€å®¹å™¨çš„ç½‘ç»œè®¿é—®æµç¨‹"></a>ä¸€ã€å®¹å™¨çš„ç½‘ç»œè®¿é—®æµç¨‹</h2><blockquote>
<p>å‚è€ƒï¼š<a href="https://z.itpub.net/article/detail/FE8EBAC62D5881E3A432291F8C8E4F02">https://z.itpub.net/article/detail/FE8EBAC62D5881E3A432291F8C8E4F02</a></p>
</blockquote>
<h3 id="1-è™šæ‹Ÿæœºæ³¨æ„äº‹é¡¹"><a href="#1-è™šæ‹Ÿæœºæ³¨æ„äº‹é¡¹" class="headerlink" title="1 è™šæ‹Ÿæœºæ³¨æ„äº‹é¡¹"></a>1 è™šæ‹Ÿæœºæ³¨æ„äº‹é¡¹</h3><p>æŸ¥çœ‹net.ipv4.ip_forwardå€¼æ˜¯å¦ä¸º1</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sysctl -a | grep ipv4 | grep forward </span><br></pre></td></tr></table></figure>

<p>åªæœ‰å€¼ä¸º1æ—¶dockerå®¹å™¨æ‰èƒ½ä¸Šç½‘ï¼Œè€Œvmwareè™šæ‹ŸæœºæŒ‚èµ·å°†ä½¿ä»–å˜æˆ0ï¼Œè§£å†³æ–¹æ³•ï¼š</p>
<ul>
<li>sysctl net.ipv4.ip_forward &#x3D; 1 è®¾ç½®ä¸º1</li>
<li>ä¸è¦æŒ‚èµ·è™šæ‹Ÿæœºï¼Œç›´æ¥å…³æœºé‡å¯ï¼ŒdockeræœåŠ¡åœ¨å¯åŠ¨æ—¶ä¼šå°†å®ƒæ”¹ä¸º1</li>
</ul>
<h2 id="äºŒã€å®¹å™¨ç«¯å£æ˜ å°„"><a href="#äºŒã€å®¹å™¨ç«¯å£æ˜ å°„" class="headerlink" title="äºŒã€å®¹å™¨ç«¯å£æ˜ å°„"></a>äºŒã€å®¹å™¨ç«¯å£æ˜ å°„</h2><h3 id="1-docker-run-pç«¯å£æ˜ å°„å‚æ•°"><a href="#1-docker-run-pç«¯å£æ˜ å°„å‚æ•°" class="headerlink" title="1 docker run -pç«¯å£æ˜ å°„å‚æ•°"></a>1 docker run -pç«¯å£æ˜ å°„å‚æ•°</h3><p>æŒ‡å®šç«¯å£è®¿é—®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å°†å®¹å™¨80ç«¯å£ï¼Œæ˜ å°„åˆ°ä¸»æœº180ç«¯å£</span></span><br><span class="line">docker run -p 180:80</span><br></pre></td></tr></table></figure>

<p>æŒ‡å®šIP+ç«¯å£è®¿é—®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¤šç½‘å¡ç¯å¢ƒä¸‹ï¼Œå°†å®¹å™¨80ç«¯å£æ˜ å°„åˆ°10.0.0.1çš„180ç«¯å£</span></span><br><span class="line">docker run -p 10.0.0.1:180:80</span><br></pre></td></tr></table></figure>

<p>æŒ‡å®šéšæœºç«¯å£</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># å°†å®¹å™¨80ç«¯å£ï¼Œæ˜ å°„åˆ°ä¸»æœºéšæœºç«¯å£</span><br><span class="line">docker run -p 10.0.0.1::80</span><br></pre></td></tr></table></figure>

<p>æŒ‡å®šéšæœºç«¯å£+UDP (é»˜è®¤æ˜ å°„TCP)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å°†å®¹å™¨80ç«¯å£æ˜ å°„åˆ°ä¸»æœºéšæœºç«¯å£ï¼Œå¹¶ä½¿ç”¨UDPåè®®</span></span><br><span class="line">-p 10.0.0.100:80:udp # æŒ‡å®šéšæœºç«¯å£ + udp</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥æŒ‡å®šå¤šä¸ªç«¯å£</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-p 180:80 -p 1443:443 # æŒ‡å®šå¤šä¸ªç«¯å£</span><br></pre></td></tr></table></figure>

<p>éšæœºæ˜ å°„</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -P</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸‰ï¼‰Docker</category>
      </categories>
  </entry>
  <entry>
    <title>Dockerç³»åˆ—(ä¹)-Dokcerè·¨ä¸»æœºå®¹å™¨äº’è¿</title>
    <url>/2021/07/06/01_%E8%BF%90%E7%BB%B4/03-Docker/Docker%E7%B3%BB%E5%88%97-%E4%B9%9D-Dokcer%E8%B7%A8%E4%B8%BB%E6%9C%BA%E5%AE%B9%E5%99%A8%E4%BA%92%E8%BF%9E/</url>
    <content><![CDATA[<h2 id="ä¸€ã€Dockerå®¹å™¨çš„å››ç§ç½‘ç»œç±»å‹"><a href="#ä¸€ã€Dockerå®¹å™¨çš„å››ç§ç½‘ç»œç±»å‹" class="headerlink" title="ä¸€ã€Dockerå®¹å™¨çš„å››ç§ç½‘ç»œç±»å‹"></a>ä¸€ã€Dockerå®¹å™¨çš„å››ç§ç½‘ç»œç±»å‹</h2><blockquote>
<p>å“ªå››ç§ï¼Ÿ</p>
<ul>
<li>bridgeï¼ˆé»˜è®¤ï¼‰ï¼šNATæ¡¥æ¥æ¨¡å¼</li>
<li>noneï¼šä¸åˆ†é…ç½‘ç»œï¼Œä»€ä¹ˆæœåŠ¡éƒ½è®¿é—®ä¸äº†</li>
<li>hostï¼šä¸å®¿ä¸»æœºå…±äº«ç½‘ç»œï¼Œå…±äº«ä¸»æœºåï¼Œç«¯å£å…±ç”¨(å®¿ä¸»æœºç”¨äº†çš„ç«¯å£ï¼Œå®¹å™¨ä¹Ÿä¸èƒ½ç”¨)ï¼Œã€ç½‘ç»œæ€§èƒ½æœ€é«˜ã€‘</li>
<li>container:å®¹å™¨idï¼šä¸å®¹å™¨xxå…±äº«ç½‘ç»œï¼Œå…±äº«ä¸»æœºåã€hostsã€hostnameã€ç«¯å£ç­‰â€¦.ã€K8Så¸¸ç”¨ã€‘</li>
</ul>
</blockquote>
<h3 id="1-æŒ‡å®šä¸æŸ¥çœ‹å®¹å™¨ç½‘ç»œç±»å‹çš„æ–¹æ³•"><a href="#1-æŒ‡å®šä¸æŸ¥çœ‹å®¹å™¨ç½‘ç»œç±»å‹çš„æ–¹æ³•" class="headerlink" title="1 æŒ‡å®šä¸æŸ¥çœ‹å®¹å™¨ç½‘ç»œç±»å‹çš„æ–¹æ³•"></a>1 æŒ‡å®šä¸æŸ¥çœ‹å®¹å™¨ç½‘ç»œç±»å‹çš„æ–¹æ³•</h3><p>æŒ‡å®šå®¹å™¨ç½‘ç»œç±»å‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --network none # æŒ‡å®šç½‘ç»œç±»å‹</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹å®¹å™¨ç½‘ç»œç±»å‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker instpect å®¹å™¨id # å¯ä»¥æŸ¥çœ‹å½“å‰çš„å®¹å™¨ç½‘ç»œç±»å‹</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å­—æ®µ</span></span><br><span class="line">&quot;NetworkSettings&quot;: &#123;</span><br><span class="line">	&quot;Bridge&quot;: &quot;&quot;,</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹æœ‰å“ªäº›ç½‘ç»œç±»å‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker network ls # æŸ¥çœ‹æœ‰å“ªäº›ç½‘ç»œç±»å‹</span><br></pre></td></tr></table></figure>



<h2 id="äºŒã€ä½¿ç”¨macvlanå®ç°"><a href="#äºŒã€ä½¿ç”¨macvlanå®ç°" class="headerlink" title="äºŒã€ä½¿ç”¨macvlanå®ç°"></a>äºŒã€ä½¿ç”¨macvlanå®ç°</h2><blockquote>
<p>ä¼˜åŠ¿ï¼š</p>
<p>â€‹	æ€§èƒ½æ¯”overlayé«˜</p>
<p>â€‹	ä¸ç”¨åšç«¯å£æ˜ å°„ï¼Œå¤–ç•Œå¯ç›´æ¥è®¿é—®</p>
<p>åŠ£åŠ¿ï¼š</p>
<p>â€‹	IPéœ€è¦æ‰‹åŠ¨æŒ‡å®š</p>
</blockquote>
<h3 id="1-æ¡ˆä¾‹ï¼šä½¿ç”¨macvlanå®ç°ä¸¤ä¸ªcentos6-9-sshå®¹å™¨è·¨ä¸»æœºç½‘ç»œé€šä¿¡"><a href="#1-æ¡ˆä¾‹ï¼šä½¿ç”¨macvlanå®ç°ä¸¤ä¸ªcentos6-9-sshå®¹å™¨è·¨ä¸»æœºç½‘ç»œé€šä¿¡" class="headerlink" title="1 æ¡ˆä¾‹ï¼šä½¿ç”¨macvlanå®ç°ä¸¤ä¸ªcentos6.9_sshå®¹å™¨è·¨ä¸»æœºç½‘ç»œé€šä¿¡"></a>1 æ¡ˆä¾‹ï¼šä½¿ç”¨macvlanå®ç°ä¸¤ä¸ªcentos6.9_sshå®¹å™¨è·¨ä¸»æœºç½‘ç»œé€šä¿¡</h3><blockquote>
<p>å®¿ä¸»æœºä¿¡æ¯ï¼ˆè™šæ‹Ÿæœºï¼‰ï¼š</p>
<p>â€‹	docker01: 10.0.0.11 ç½‘å…³: 10.0.0.2</p>
<p>â€‹	docker02: 10.0.0.12 ç½‘å…³: 10.0.0.2</p>
</blockquote>
<p>å®¿ä¸»æœº1,2åˆ†åˆ«åˆ›å»ºmacvlan</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker network create --driver macvlan --subnet 10.0.0.0/24 --gateway 10.0.0.2 -o parent=ens33 macvlan_1</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®ç½‘å¡ä¸ºæ··æ‚æ¨¡å¼ã€Ubuntuéœ€è¦è®¾ç½®ã€‘</p>
<blockquote>
<p>æ··æ‚æ¨¡å¼æ˜¯è®¡ç®—æœºç½‘ç»œä¸­çš„æœ¯è¯­ã€‚ æ˜¯æŒ‡ä¸€å°æœºå™¨çš„ç½‘å¡èƒ½å¤Ÿæ¥æ”¶æ‰€æœ‰ç»è¿‡å®ƒçš„æ•°æ®æµï¼Œè€Œä¸è®ºå…¶ç›®çš„åœ°å€æ˜¯å¦æ˜¯å®ƒã€‚</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ip link set ens33 promisc on</span><br></pre></td></tr></table></figure>

<p>å®¿ä¸»æœº1,2åˆ†åˆ«ä½¿ç”¨centos7.9_ssh:v2é•œåƒåˆ›å»ºå®¹å™¨ï¼Œå¹¶æŒ‡å®šä¸ºmacvlan_1ç½‘ç»œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> docker01</span></span><br><span class="line">docker run -d --network macvlan_1 --ip=10.0.0.100 centos6.9_ssh:v2</span><br><span class="line"><span class="meta">#</span><span class="bash"> docker02</span></span><br><span class="line">docker run -d --network macvlan_1 --ip=10.0.0.200 centos6.9_ssh:v2</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼Œdocker execè¿›å…¥docker01ä¸­è¿è¡Œå®¹å™¨ï¼Œå¼€å¯æŠ“åŒ…ï¼Œå¹¶ä½¿ç”¨docker02ä¸­çš„å®¹å™¨pingå®ƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tcpdump icmp</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡xshellæˆ–è€…mobaxtermå¯ä»¥ç›´æ¥sshåˆ°å®¹å™¨ä¸­ (PS:å¹¶æ²¡æœ‰ -p 22ç«¯å£)</p>
<blockquote>
<p>å®é™…æµ‹è¯•å®¿ä¸»æœºå¹¶ä¸èƒ½sshåˆ°å®¹å™¨ï¼Œæ˜¾ç¤ºNo route to hostï¼Œä½†æ˜¯ç‰©ç†æœºå¯ä»¥è¿æ¥</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh root@10.0.0.100</span><br></pre></td></tr></table></figure>



<h2 id="ä¸‰ã€ä½¿ç”¨overlayå®ç°"><a href="#ä¸‰ã€ä½¿ç”¨overlayå®ç°" class="headerlink" title="ä¸‰ã€ä½¿ç”¨overlayå®ç°"></a>ä¸‰ã€ä½¿ç”¨overlayå®ç°</h2><blockquote>
<p>ä¼˜åŠ¿ï¼š</p>
<p>â€‹	å¯ä»¥è‡ªåŠ¨åˆ†é…ipåœ°å€</p>
<p>åŠ£åŠ¿ï¼š</p>
<p>â€‹	éœ€è¦åšç«¯å£æ˜ å°„æ‰èƒ½è®¿é—®å®¹å™¨æœåŠ¡</p>
<p>overlayå‚è€ƒï¼š<a href="https://www.cnblogs.com/CloudMan6/p/7270551.html">https://www.cnblogs.com/CloudMan6/p/7270551.html</a></p>
</blockquote>
<h3 id="1-æ¡ˆä¾‹ï¼šä½¿ç”¨overlayå®ç°ä¸¤ä¸ªcentos6-9-sshå®¹å™¨è·¨ä¸»æœºç½‘ç»œé€šä¿¡"><a href="#1-æ¡ˆä¾‹ï¼šä½¿ç”¨overlayå®ç°ä¸¤ä¸ªcentos6-9-sshå®¹å™¨è·¨ä¸»æœºç½‘ç»œé€šä¿¡" class="headerlink" title="1 æ¡ˆä¾‹ï¼šä½¿ç”¨overlayå®ç°ä¸¤ä¸ªcentos6.9_sshå®¹å™¨è·¨ä¸»æœºç½‘ç»œé€šä¿¡"></a>1 æ¡ˆä¾‹ï¼šä½¿ç”¨overlayå®ç°ä¸¤ä¸ªcentos6.9_sshå®¹å™¨è·¨ä¸»æœºç½‘ç»œé€šä¿¡</h3><p>docker01å¯åŠ¨consul</p>
<blockquote>
<p>consulæ˜¯ä¸€ä¸ªkey:valueç±»å‹çš„å­˜å‚¨æ•°æ®åº“</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d -p 8500:8500 --restart=always -h consul --name consul progrium/consul -server -bootstrap</span><br></pre></td></tr></table></figure>

<p>docker01,02ä¸Šè®¾ç½®daemon.jsonæ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;hosts&quot;</span>:[<span class="string">&quot;tcp://0.0.0.0:2376&quot;</span>,<span class="string">&quot;unix:///var/run/docker.sock&quot;</span>],</span><br><span class="line"><span class="string">&quot;cluster-store&quot;</span>:<span class="string">&quot;consul://10.0.0.11:8500&quot;</span>,</span><br><span class="line"><span class="string">&quot;cluster-advertise&quot;</span>:<span class="string">&quot;10.0.0.11:2376&quot;</span> # æ­¤å¤„ä¸åŒï¼Œdocker01ä¸º<span class="number">10.0</span><span class="number">.0</span><span class="number">.11</span>ï¼Œdocker02ä¸º<span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹docker.serviceæ–‡ä»¶</p>
<blockquote>
<p>å› ä¸ºdaemon.jsonä¸­çš„hostsé¡¹ä¸docker.serviceä¸­çš„-Hå‚æ•°å†²çªï¼Œéœ€è¦å»æ‰</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /usr/lib/systemd/system/docker.service</span><br><span class="line">ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ é™¤-H fd://</span></span><br><span class="line">ExecStart=/usr/bin/dockerd --containerd=/run/containerd/containerd.sock</span><br></pre></td></tr></table></figure>

<p>é‡å¯dockeræœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•consulæ˜¯å¦æ­å»ºæˆåŠŸ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">æµè§ˆå™¨è®¿é—®ï¼šhttp://10.0.0.11:8500/</span><br><span class="line">åœ¨KEY/VALUEæ ‡ç­¾é¡µæ­£å¸¸æ˜¾ç¤º10.0.0.11å’Œ12ä¸¤å°å®¿ä¸»æœº</span><br></pre></td></tr></table></figure>

<p>docker01,02åˆ›å»ºoverlayç½‘ç»œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker network create -d overlay --subnet 172.16.1.0/24 --gateway 172.16.1.254 ol1</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨å®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> docker01</span></span><br><span class="line">docker run -d --network ol1 --name centos6.9_01 centos6.9_ssh:v2</span><br><span class="line"><span class="meta">#</span><span class="bash"> docker02</span></span><br><span class="line">docker run -d --network ol1 --name centos6.9_02 centos6.9_ssh:v2</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•å®¹å™¨é—´ç½‘ç»œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> docker01ä¸­çš„å®¹å™¨pingå¦ä¸€å®¹å™¨çš„hostname</span></span><br><span class="line">[root@e1e8cc01792d /]# ping centos6.9_02</span><br><span class="line">PING centos6.9_02 (172.16.1.2) 56(84) bytes of data.</span><br><span class="line">64 bytes from centos6.9_02.ol1 (172.16.1.2): icmp_seq=1 ttl=64 time=0.197 ms</span><br><span class="line">64 bytes from centos6.9_02.ol1 (172.16.1.2): icmp_seq=2 ttl=64 time=0.269 ms</span><br><span class="line">64 bytes from centos6.9_02.ol1 (172.16.1.2): icmp_seq=3 ttl=64 time=1.04 ms</span><br></pre></td></tr></table></figure>

<h3 id="2-Overlayçš„ç½‘ç»œè®¿é—®æµç¨‹å›¾"><a href="#2-Overlayçš„ç½‘ç»œè®¿é—®æµç¨‹å›¾" class="headerlink" title="2 Overlayçš„ç½‘ç»œè®¿é—®æµç¨‹å›¾"></a>2 Overlayçš„ç½‘ç»œè®¿é—®æµç¨‹å›¾</h3><img src="/2021/07/06/01_%E8%BF%90%E7%BB%B4/03-Docker/Docker%E7%B3%BB%E5%88%97-%E4%B9%9D-Dokcer%E8%B7%A8%E4%B8%BB%E6%9C%BA%E5%AE%B9%E5%99%A8%E4%BA%92%E8%BF%9E/overlay%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE.png" class="" title="overlayç½‘ç»œè®¿é—®">

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸‰ï¼‰Docker</category>
      </categories>
  </entry>
  <entry>
    <title>Dockerç³»åˆ—(ä¸ƒ)-Dockeré•œåƒåˆ†å±‚ä¸åŒä¸»æœºä¸­å®¹å™¨äº’è¿</title>
    <url>/2021/07/05/01_%E8%BF%90%E7%BB%B4/03-Docker/Docker%E7%B3%BB%E5%88%97-%E4%B8%83-Docker%E9%95%9C%E5%83%8F%E5%88%86%E5%B1%82%E4%B8%8E%E5%90%8C%E4%B8%BB%E6%9C%BA%E4%B8%AD%E5%AE%B9%E5%99%A8%E4%BA%92%E8%BF%9E/</url>
    <content><![CDATA[<h2 id="ä¸€ã€Dockeré•œåƒåˆ†å±‚"><a href="#ä¸€ã€Dockeré•œåƒåˆ†å±‚" class="headerlink" title="ä¸€ã€Dockeré•œåƒåˆ†å±‚"></a>ä¸€ã€Dockeré•œåƒåˆ†å±‚</h2><blockquote>
<p>é•œåƒåˆ†å±‚çš„å¥½å¤„ï¼š</p>
<p>â€‹	å¤ç”¨ã€èŠ‚çœç£ç›˜ç©ºé—´ï¼Œç›¸åŒçš„å†…å®¹åªéœ€åŠ è½½ä¸€ä»½åˆ°å†…å­˜</p>
<p>â€‹	ä¿®æ”¹dockerfileåï¼Œé‡æ–°æ„å»ºæ—¶å¯ä»¥ç”¨ç¼“å­˜ï¼Œé€Ÿåº¦å¿«</p>
</blockquote>
<h3 id="1-æŸ¥çœ‹dockeré•œåƒåˆ†å±‚"><a href="#1-æŸ¥çœ‹dockeré•œåƒåˆ†å±‚" class="headerlink" title="1 æŸ¥çœ‹dockeré•œåƒåˆ†å±‚"></a>1 æŸ¥çœ‹dockeré•œåƒåˆ†å±‚</h3><p>é€šè¿‡å¯¼å…¥é•œåƒå¯ä»¥æŸ¥çœ‹åˆ°é•œåƒåˆ†å±‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker load -i [é•œåƒæ–‡ä»¶]</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡æŸ¥çœ‹é•œåƒå†å²å¯ä»¥æŸ¥çœ‹åˆ°åˆ†å±‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@docker01 ~]# docker image history centos6.9_ssh:v2</span><br><span class="line">IMAGE          CREATED       CREATED BY                                      SIZE      COMMENT</span><br><span class="line">57761235f898   2 days ago    /bin/sh -c #(nop)  CMD [&quot;/usr/sbin/sshd&quot; &quot;-Dâ€¦   0B</span><br><span class="line">c0a2c21457c4   2 days ago    /bin/sh -c echo &#x27;123456&#x27; | passwd --stdin roâ€¦   537B</span><br><span class="line">29d10ff8b8e0   2 days ago    /bin/sh -c service sshd restart                 4.91kB</span><br><span class="line">666b9ddfff15   2 days ago    /bin/sh -c yum install openssh-server -y        154MB</span><br><span class="line">5b00553af9fc   2 days ago    /bin/sh -c #(nop) ADD file:65a30e1b327fec80bâ€¦   1.18kB</span><br><span class="line">2199b8eb8390   2 years ago   /bin/sh -c #(nop)  CMD [&quot;/bin/bash&quot;]            0B</span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop)  LABEL name=CentOS Base Imâ€¦   0B</span><br><span class="line">&lt;missing&gt;      2 years ago   /bin/sh -c #(nop) ADD file:0e6d175401c5b4260â€¦   195MB</span><br></pre></td></tr></table></figure>

<p>æ‰€æœ‰çš„è¿™äº›å±‚éƒ½ä¼šåœ¨<code>Docker</code>ä¸»æœºæœ¬åœ°å­˜å‚¨åŒºåŸŸå†…å­˜å‚¨ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æŒ‡ä»¤æ¥åˆ—å‡ºï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ls /var/lib/docker/overlay2/</span><br></pre></td></tr></table></figure>

<h3 id="2-é€šè¿‡Dockerfileä¼˜åŒ–åˆ†å±‚ä¿¡æ¯"><a href="#2-é€šè¿‡Dockerfileä¼˜åŒ–åˆ†å±‚ä¿¡æ¯" class="headerlink" title="2  é€šè¿‡Dockerfileä¼˜åŒ–åˆ†å±‚ä¿¡æ¯"></a>2  é€šè¿‡Dockerfileä¼˜åŒ–åˆ†å±‚ä¿¡æ¯</h3><ul>
<li>å°½é‡åˆå¹¶RUNå’ŒADDæ¥å‡å°‘é•œåƒåˆ†å±‚æ•°</li>
<li>æ–°åŠ çš„Dockerfileè¯­å¥åŠ åˆ°æœ€åï¼Œä¸è¦åŠ åˆ°å‰é¢</li>
</ul>
<h2 id="äºŒã€åŒä¸»æœºä¸­å®¹å™¨äº’è¿ï¼ˆâ€“linkæ˜¯å•å‘çš„ï¼‰"><a href="#äºŒã€åŒä¸»æœºä¸­å®¹å™¨äº’è¿ï¼ˆâ€“linkæ˜¯å•å‘çš„ï¼‰" class="headerlink" title="äºŒã€åŒä¸»æœºä¸­å®¹å™¨äº’è¿ï¼ˆâ€“linkæ˜¯å•å‘çš„ï¼‰"></a>äºŒã€åŒä¸»æœºä¸­å®¹å™¨äº’è¿ï¼ˆâ€“linkæ˜¯å•å‘çš„ï¼‰</h2><blockquote>
<p>dockerå®˜æ–¹å·²ä¸æ¨èä½¿ç”¨docker run â€“linkæ¥é“¾æ¥2ä¸ªå®¹å™¨äº’ç›¸é€šä¿¡ï¼Œéšåçš„ç‰ˆæœ¬ä¸­ä¼šåˆ é™¤â€“link</p>
</blockquote>
<h3 id="1-åŠŸèƒ½ä»‹ç»"><a href="#1-åŠŸèƒ½ä»‹ç»" class="headerlink" title="1 åŠŸèƒ½ä»‹ç»"></a>1 åŠŸèƒ½ä»‹ç»</h3><p>docker run â€“linkå¯ä»¥ç”¨æ¥é“¾æ¥2ä¸ªå®¹å™¨ï¼Œä½¿å¾—æºå®¹å™¨ï¼ˆè¢«é“¾æ¥çš„å®¹å™¨ï¼‰å’Œæ¥å—å®¹å™¨ï¼ˆä¸»åŠ¨å»é“¾æ¥çš„å®¹å™¨ï¼‰ä¹‹é—´å¯ä»¥äº’ç›¸é€šä¿¡ï¼Œå¹¶ä¸”æ¥æ”¶å®¹å™¨å¯ä»¥è·å–æºå®¹å™¨çš„ä¸€äº›æ•°æ®ï¼Œå¦‚æºå®¹å™¨çš„ç¯å¢ƒå˜é‡ã€‚ä½¿ç”¨æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<p>æºå®¹å™¨å¯åŠ¨ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d --name src_docker nginx </span><br><span class="line">å®¹å™¨ID:xxxx01, IP:172.16.0.2</span><br></pre></td></tr></table></figure>

<p>æ¥å—å®¹å™¨è¿æ¥ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d --name dest_docker --link src_docker:web centos7.9:v2</span><br><span class="line">å®¹å™¨ID:xxxx02, IP:172.16.0.3</span><br></pre></td></tr></table></figure>

<p>è¿›å…¥æ¥å—å®¹å™¨æµ‹è¯•ï¼Œä¸éœ€è¦ping IPï¼Œç›´æ¥pingåˆ«åå°±å¯ä»¥ï¼Œwebå’Œsrc_dockeréƒ½æŒ‡å‘172.16.0.2<font color=red>ï¼ˆå•å‘ï¼‰</font></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it xxxx01 /bin/bash</span><br><span class="line">ping web</span><br><span class="line">ping src_docker</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ¥å—å®¹å™¨çš„&#x2F;etc&#x2F;hostså°†æ›´æ–°</p>
</blockquote>
<h3 id="2-æ¡ˆä¾‹ï¼šæ„å»ºzabbix-server"><a href="#2-æ¡ˆä¾‹ï¼šæ„å»ºzabbix-server" class="headerlink" title="2 æ¡ˆä¾‹ï¼šæ„å»ºzabbix-server"></a>2 æ¡ˆä¾‹ï¼šæ„å»ºzabbix-server</h3><p>å¯åŠ¨ä¸€ä¸ªmysqlçš„å®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --name mysql-server -t \</span><br><span class="line">      -e MYSQL_DATABASE=&quot;zabbix&quot; \</span><br><span class="line">      -e MYSQL_USER=&quot;zabbix&quot; \</span><br><span class="line">      -e MYSQL_PASSWORD=&quot;zabbix_pwd&quot; \</span><br><span class="line">      -e MYSQL_ROOT_PASSWORD=&quot;root_pwd&quot; \</span><br><span class="line">      -d mysql:5.7 \</span><br><span class="line">      --character-set-server=utf8 --collation-server=utf8_bin </span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨java-gatewayå®¹å™¨ç›‘æ§javaæœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --name zabbix-java-gateway -t \</span><br><span class="line">      -d zabbix/zabbix-java-gateway:latest</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨zabbix-mysqlå®¹å™¨ä½¿ç”¨linkè¿æ¥mysqlä¸java-gateway</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --name zabbix-server-mysql -t \</span><br><span class="line">      -e DB_SERVER_HOST=&quot;mysql-server&quot; \</span><br><span class="line">      -e MYSQL_DATABASE=&quot;zabbix&quot; \</span><br><span class="line">      -e MYSQL_USER=&quot;zabbix&quot; \</span><br><span class="line">      -e MYSQL_PASSWORD=&quot;zabbix_pwd&quot; \</span><br><span class="line">      -e MYSQL_ROOT_PASSWORD=&quot;root_pwd&quot; \</span><br><span class="line">      -e ZBX_JAVAGATEWAY=&quot;zabbix-java-gateway&quot; \</span><br><span class="line">      --link mysql-server:mysql \</span><br><span class="line">      --link zabbix-java-gateway:zabbix-java-gateway \</span><br><span class="line">      -p 10051:10051 \</span><br><span class="line">      -d zabbix/zabbix-server-mysql:latest</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨zabbix webæ˜¾ç¤ºï¼Œä½¿ç”¨linkè¿æ¥zabbix-mysqlä¸mysql</p>
<blockquote>
<p>zabbixçš„é»˜è®¤ç«¯å£å·²æœ‰80æ”¹ä¸º8080ï¼Œå¯è§é…ç½®æ–‡ä»¶&#x2F;etc&#x2F;zabbix&#x2F;nginx.conf</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run --name zabbix-web-nginx-mysql -t \</span><br><span class="line">      -e DB_SERVER_HOST=&quot;mysql-server&quot; \</span><br><span class="line">      -e MYSQL_DATABASE=&quot;zabbix&quot; \</span><br><span class="line">      -e MYSQL_USER=&quot;zabbix&quot; \</span><br><span class="line">      -e MYSQL_PASSWORD=&quot;zabbix_pwd&quot; \</span><br><span class="line">      -e MYSQL_ROOT_PASSWORD=&quot;root_pwd&quot; \</span><br><span class="line">      --link mysql-server:mysql \</span><br><span class="line">      --link zabbix-server-mysql:zabbix-server \</span><br><span class="line">      -p 8082:8080 \     </span><br><span class="line">      -d zabbix/zabbix-web-nginx-mysql:latest</span><br></pre></td></tr></table></figure>

<p>ç™»å½•Zabbix</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æµè§ˆå™¨è®¿é—®ï¼š10.0.0.11:8082</span><br><span class="line">Admin</span><br><span class="line">zabbix</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ è¢«ç›‘æ§èŠ‚ç‚¹-å®‰è£…zabbix-agent</p>
<blockquote>
<p>è·å–zabbix-agentï¼š</p>
<p>uname -a æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬</p>
<p>webé¡µé¢æŸ¥çœ‹zabbixç‰ˆæœ¬</p>
<p><a href="https://www.zabbix.com/download">https://www.zabbix.com/download</a> è·å–å¯¹åº”agentçš„å®‰è£…æ–¹æ³•</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rpm -Uvh https://repo.zabbix.com/zabbix/5.4/rhel/7/x86_64/zabbix-release-5.4-1.el7.noarch.rpm</span><br><span class="line">yum clean all</span><br><span class="line">yum install zabbix-agent</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ è¢«ç›‘æ§èŠ‚ç‚¹-agenté…ç½®æ–‡ä»¶ä¿®æ”¹</p>
<blockquote>
<p>117è¡Œï¼šServer&#x3D;10.0.0.11, æ³¨æ„é˜²ç«å¢™å’Œselinuxçš„é˜»æŒ¡</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/zabbix/zabbix_agentd.conf</span><br><span class="line">systemctl restart zabbix-agent</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€dockeré‡å¯åå®¹å™¨ä¸é€€å‡º"><a href="#ä¸‰ã€dockeré‡å¯åå®¹å™¨ä¸é€€å‡º" class="headerlink" title="ä¸‰ã€dockeré‡å¯åå®¹å™¨ä¸é€€å‡º"></a>ä¸‰ã€dockeré‡å¯åå®¹å™¨ä¸é€€å‡º</h2><blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œsystemctl restart dockerä¹‹åï¼Œå®¹å™¨å°†å¤„äºExitedçŠ¶æ€</p>
</blockquote>
<h3 id="1-æ·»åŠ å®¹å™¨å¯åŠ¨å‚æ•°"><a href="#1-æ·»åŠ å®¹å™¨å¯åŠ¨å‚æ•°" class="headerlink" title="1 æ·»åŠ å®¹å™¨å¯åŠ¨å‚æ•°"></a>1 æ·»åŠ å®¹å™¨å¯åŠ¨å‚æ•°</h3><blockquote>
<p>dockeré‡å¯åï¼Œå®¹å™¨å…ˆåœæ­¢ï¼Œå†ç«‹å³é‡æ–°å¯åŠ¨</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --restart=always</span><br></pre></td></tr></table></figure>

<h3 id="2-daemoné…ç½®æ–‡ä»¶ä¿®æ”¹ï¼ˆä¸æ¨èï¼‰"><a href="#2-daemoné…ç½®æ–‡ä»¶ä¿®æ”¹ï¼ˆä¸æ¨èï¼‰" class="headerlink" title="2 daemoné…ç½®æ–‡ä»¶ä¿®æ”¹ï¼ˆä¸æ¨èï¼‰"></a>2 daemoné…ç½®æ–‡ä»¶ä¿®æ”¹ï¼ˆä¸æ¨èï¼‰</h3><blockquote>
<p>dockeré‡å¯åï¼Œå®¹å™¨ä¸ä¼šåœæ­¢ï¼Œä¸€ç›´åœ¨è¿è¡Œï¼Œä¸æ¨èä½¿ç”¨ï¼Œä¸å¥½æ§åˆ¶</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/docker/daemon.json</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ·»åŠ ä¸€è¡Œï¼Œä¸Šè¡Œåé¢åŠ é€—å·</span></span><br><span class="line">&quot;live-restore&quot;:true</span><br></pre></td></tr></table></figure>





<p>â€‹	</p>
]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸‰ï¼‰Docker</category>
      </categories>
  </entry>
  <entry>
    <title>Dockerç³»åˆ—(äº”)-æ‰‹åŠ¨åˆ¶ä½œdockeré•œåƒ</title>
    <url>/2021/06/29/01_%E8%BF%90%E7%BB%B4/03-Docker/Docker%E7%B3%BB%E5%88%97-%E4%BA%94-%E6%89%8B%E5%8A%A8%E5%88%B6%E4%BD%9Cdocker%E9%95%9C%E5%83%8F/</url>
    <content><![CDATA[<h2 id="ä¸€ã€åˆ¶ä½œDockeré•œåƒ"><a href="#ä¸€ã€åˆ¶ä½œDockeré•œåƒ" class="headerlink" title="ä¸€ã€åˆ¶ä½œDockeré•œåƒ"></a>ä¸€ã€åˆ¶ä½œDockeré•œåƒ</h2><h3 id="1-å¯åŠ¨åŸºç¡€å®¹å™¨"><a href="#1-å¯åŠ¨åŸºç¡€å®¹å™¨" class="headerlink" title="1 å¯åŠ¨åŸºç¡€å®¹å™¨"></a>1 å¯åŠ¨åŸºç¡€å®¹å™¨</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run -it centos:6.9 # yum</span><br><span class="line">docker run -it alpine:3.9 # apk</span><br></pre></td></tr></table></figure>

<h3 id="2-åœ¨å®¹å™¨ä¸­å®‰è£…æœåŠ¡"><a href="#2-åœ¨å®¹å™¨ä¸­å®‰è£…æœåŠ¡" class="headerlink" title="2 åœ¨å®¹å™¨ä¸­å®‰è£…æœåŠ¡"></a>2 åœ¨å®¹å™¨ä¸­å®‰è£…æœåŠ¡</h3><p>ä¿®æ”¹yumæºï¼ˆCentos6é˜¿é‡Œæºå·²åœæ­¢ç»´æŠ¤ï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo &#x27;[centos-office]</span><br><span class="line">name=centos-office</span><br><span class="line">failovermethod=priority</span><br><span class="line">baseurl=https://vault.centos.org/6.10/os/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://vault.centos.org/6.10/os/x86_64/RPM-GPG-KEY-CentOS-6&#x27; &gt; CentOS-Base.repo</span><br></pre></td></tr></table></figure>

<p>å®‰è£…å¹¶å¯åŠ¨opensshæœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install openssh-server -y</span><br><span class="line">service sshd restart</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹rootå¯†ç (é»˜è®¤æ²¡æœ‰å¯†ç )</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo &#x27;123456&#x27; | passwd --stdin root</span><br><span class="line"><span class="meta">#</span><span class="bash"> æˆ–è€…</span></span><br><span class="line">echo root:123456 | chpassw</span><br></pre></td></tr></table></figure>

<p>å°†å·²ç»å®‰è£…å¥½sshdæœåŠ¡çš„å®¹å™¨æ‰“åŒ…æˆé•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker container commit 981877f137c9 centos6.9_ssh:v1</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•é•œåƒ</p>
<blockquote>
<p>sshd -Dï¼šä»¥åå°å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡ŒæœåŠ¡</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨sshdå¹¶å°†22ç«¯å£æ˜ å°„å‡ºæ¥ï¼Œå¯ä»¥ä½¿ç”¨xshellè¿æ¥</span></span><br><span class="line">docker run -d -p 1022:22 centos6.9_ssh:v1 /usr/sbin/sshd -D</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€å°æ¡ˆä¾‹ï¼šåˆ›å»ºä¸€ä¸ªssh-nginxåŒæœåŠ¡çš„é•œåƒ"><a href="#äºŒã€å°æ¡ˆä¾‹ï¼šåˆ›å»ºä¸€ä¸ªssh-nginxåŒæœåŠ¡çš„é•œåƒ" class="headerlink" title="äºŒã€å°æ¡ˆä¾‹ï¼šåˆ›å»ºä¸€ä¸ªssh+nginxåŒæœåŠ¡çš„é•œåƒ"></a>äºŒã€å°æ¡ˆä¾‹ï¼šåˆ›å»ºä¸€ä¸ªssh+nginxåŒæœåŠ¡çš„é•œåƒ</h2><p>åˆ›å»ºå®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d -p 1023:22 centos6.9_ssh:v1 /usr/sbin/sshd -D</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹yumæºå’Œepelæº</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç”±äºCentos6é˜¿é‡Œäº‘åœæ­¢ç»´æŠ¤</span><br><span class="line">å‚è€ƒï¼šhttps://blog.csdn.net/u013250554/article/details/110684307</span><br></pre></td></tr></table></figure>

<p>å®‰è£…nginx</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install nginx -y</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºè¿è¡ŒæœåŠ¡çš„è„šæœ¬</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /root/init.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">service sshd restart</span><br><span class="line">nginx -g &#x27;daemon off;&#x27;</span><br></pre></td></tr></table></figure>

<p>å°†å®¹å™¨å°è£…æˆé•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker commit e6a6dsa6 centos6.9_ssh_nginx:v2</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨é•œåƒï¼Œå¼€å¯æœåŠ¡ï¼Œå¹¶å¤¯ä½</p>
<blockquote>
<p>å¯ä»¥ä½¿ç”¨å·¥å…·sshç™»å½•ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®åˆ°nginxçš„æ¬¢è¿é¡µé¢</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d -p 1025:22 -p 80:80 centos6.9_ssh_nginx:v2 /bin/bash /root/init.sh</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®å®¹å™¨å¯†ç "><a href="#ä¸‰ã€é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®å®¹å™¨å¯†ç " class="headerlink" title="ä¸‰ã€é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®å®¹å™¨å¯†ç "></a>ä¸‰ã€é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®å®¹å™¨å¯†ç </h2><p>ä¿®æ”¹&#x2F;root&#x2F;init.shæ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">if [ -z $SSH_PWD ];then</span><br><span class="line">        SSH_PWD=123456</span><br><span class="line">fi</span><br><span class="line">echo &quot;$SSH_PWD&quot; | passwd --stdin root</span><br><span class="line"></span><br><span class="line">service sshd restart</span><br><span class="line">nginx -g &#x27;daemon off;&#x27;</span><br></pre></td></tr></table></figure>

<p>æ‰“åŒ…æˆé•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker commit 12386c6504d4 centos6.9_ssh_nginx_passwd</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œå®¹å™¨</p>
<blockquote>
<p>docker run -eï¼šæŒ‡å®šç¯å¢ƒå˜é‡</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d -p 1022:22 -p 80:80 -e &quot;SSH_PWD=123456&quot; centos6.9_ssh_nginx_passwd /bin/bash /root/init.sh</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸‰ï¼‰Docker</category>
      </categories>
  </entry>
  <entry>
    <title>Dockerç³»åˆ—(äºŒ)-Dockerå¸¸ç”¨ç®¡ç†å‘½ä»¤</title>
    <url>/2021/06/28/01_%E8%BF%90%E7%BB%B4/03-Docker/Docker%E7%B3%BB%E5%88%97-%E4%BA%8C-Docker%E5%B8%B8%E7%94%A8%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h2 id="ä¸€ã€å¸¸ç”¨é•œåƒç®¡ç†å‘½ä»¤"><a href="#ä¸€ã€å¸¸ç”¨é•œåƒç®¡ç†å‘½ä»¤" class="headerlink" title="ä¸€ã€å¸¸ç”¨é•œåƒç®¡ç†å‘½ä»¤"></a>ä¸€ã€å¸¸ç”¨é•œåƒç®¡ç†å‘½ä»¤</h2><blockquote>
<p>â€‹	Dockeré•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°(å¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰)ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚</p>
</blockquote>
<h3 id="1-åœ¨é•œåƒä»“åº“æŸ¥æ‰¾é•œåƒ"><a href="#1-åœ¨é•œåƒä»“åº“æŸ¥æ‰¾é•œåƒ" class="headerlink" title="1 åœ¨é•œåƒä»“åº“æŸ¥æ‰¾é•œåƒ"></a>1 åœ¨é•œåƒä»“åº“æŸ¥æ‰¾é•œåƒ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker search tomcat</span><br></pre></td></tr></table></figure>

<h3 id="2-åœ¨é•œåƒä»“åº“æ‹‰å–é•œåƒ"><a href="#2-åœ¨é•œåƒä»“åº“æ‹‰å–é•œåƒ" class="headerlink" title="2 åœ¨é•œåƒä»“åº“æ‹‰å–é•œåƒ"></a>2 åœ¨é•œåƒä»“åº“æ‹‰å–é•œåƒ</h3><blockquote>
<p>ä¸æŒ‡å®šç‰ˆæœ¬å·æ—¶é»˜è®¤ä¸‹è½½æœ€æ–°ç‰ˆï¼ˆlatestï¼‰ï¼Œç‰ˆæœ¬å¯åœ¨dockerhub(å®˜æ–¹ä»“åº“)ã€DaoCloud(ç§æœ‰ä»“åº“)ç­‰ä»“åº“æŸ¥åˆ°</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> dockerhubæ‹‰å–</span></span><br><span class="line">docker pull alpine:3.6</span><br><span class="line"><span class="meta">#</span><span class="bash"> daocloudæ‹‰å–</span></span><br><span class="line">docker pull daocloud.io/jermine/alpine:latest</span><br></pre></td></tr></table></figure>

<h3 id="3-æŸ¥çœ‹å·²æœ‰é•œåƒ"><a href="#3-æŸ¥çœ‹å·²æœ‰é•œåƒ" class="headerlink" title="3 æŸ¥çœ‹å·²æœ‰é•œåƒ"></a>3 æŸ¥çœ‹å·²æœ‰é•œåƒ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker image ls</span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ«å</span></span><br><span class="line">docker images</span><br></pre></td></tr></table></figure>

<h3 id="4-å¯¼å‡ºé•œåƒ"><a href="#4-å¯¼å‡ºé•œåƒ" class="headerlink" title="4 å¯¼å‡ºé•œåƒ"></a>4 å¯¼å‡ºé•œåƒ</h3><blockquote>
<p>å¼ƒç”¨exportï¼Œå¯¼å‡ºçš„é•œåƒä¸å¸¦ç‰ˆæœ¬TAGä¿¡æ¯</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker image save alpine -o alpine.tar.gz</span><br></pre></td></tr></table></figure>

<h3 id="5-åˆ é™¤é•œåƒ"><a href="#5-åˆ é™¤é•œåƒ" class="headerlink" title="5 åˆ é™¤é•œåƒ"></a>5 åˆ é™¤é•œåƒ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ é™¤alpineé•œåƒ</span></span><br><span class="line">docker image rm d4ff818577bc</span><br></pre></td></tr></table></figure>

<h3 id="6-å¯¼å…¥é•œåƒ"><a href="#6-å¯¼å…¥é•œåƒ" class="headerlink" title="6 å¯¼å…¥é•œåƒ"></a>6 å¯¼å…¥é•œåƒ</h3><blockquote>
<p>å¼ƒç”¨importï¼Œå¯¼å…¥çš„é•œåƒä¸å¸¦ç‰ˆæœ¬TAGä¿¡æ¯</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker image load -i alpine.tar.gz</span><br></pre></td></tr></table></figure>

<h3 id="7-æŸ¥çœ‹é•œåƒå±æ€§"><a href="#7-æŸ¥çœ‹é•œåƒå±æ€§" class="headerlink" title="7 æŸ¥çœ‹é•œåƒå±æ€§"></a>7 æŸ¥çœ‹é•œåƒå±æ€§</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker image inspect 4f380adfc10f</span><br></pre></td></tr></table></figure>

<h3 id="8-é•œåƒæ‰¹é‡åˆ é™¤"><a href="#8-é•œåƒæ‰¹é‡åˆ é™¤" class="headerlink" title="8 é•œåƒæ‰¹é‡åˆ é™¤"></a>8 é•œåƒæ‰¹é‡åˆ é™¤</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker image prune</span><br></pre></td></tr></table></figure>

<h3 id="9-æŒ‡å®šTAGä¿¡æ¯"><a href="#9-æŒ‡å®šTAGä¿¡æ¯" class="headerlink" title="9 æŒ‡å®šTAGä¿¡æ¯"></a>9 æŒ‡å®šTAGä¿¡æ¯</h3><blockquote>
<p>docker imagesæŸ¥çœ‹docker image importçš„é•œåƒï¼Œæ²¡æœ‰é•œåƒåå’ŒTAGï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•æ¥ä¿®æ”¹</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">docker image tag d4ff818577bc oldbly</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€å¸¸ç”¨å®¹å™¨ç®¡ç†å‘½ä»¤"><a href="#äºŒã€å¸¸ç”¨å®¹å™¨ç®¡ç†å‘½ä»¤" class="headerlink" title="äºŒã€å¸¸ç”¨å®¹å™¨ç®¡ç†å‘½ä»¤"></a>äºŒã€å¸¸ç”¨å®¹å™¨ç®¡ç†å‘½ä»¤</h2><blockquote>
<p>â€‹	é•œåƒ(image)å’Œå®¹å™¨(container)çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ç±»å’Œå®ä¾‹ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚<br>â€‹	å®¹å™¨çš„å®è´¨æ˜¯è¿›ç¨‹ï¼Œä½†ä¸ç›´æ¥åœ¨å®¿ä¸»æ‰§è¡Œçš„è¿›ç¨‹ä¸åŒï¼Œå®¹å™¨è¿›ç¨‹è¿è¡Œäºå±äºè‡ªå·±çš„ç‹¬ç«‹çš„å‘½åç©ºé—´ã€‚å› æ­¤å®¹å™¨å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„rootæ–‡ä»¶ç³»ç»Ÿã€è‡ªå·±çš„ç½‘ç»œé…ç½®ã€è‡ªå·±çš„è¿›ç¨‹ç©ºé—´ï¼Œç”šè‡³è‡ªå·±çš„ç”¨æˆ·IDç©ºé—´ã€‚å®¹å™¨å†…çš„è¿›ç¨‹æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒé‡Œï¼Œä½¿ç”¨èµ·æ¥ï¼Œå°±å¥½åƒæ˜¯åœ¨ä¸€ä¸ªç‹¬ç«‹å®¿ä¸»çš„ç³»ç»Ÿä¸‹æ“ä½œä¸€æ ·ã€‚è¿™ç§ç‰¹æ€§ä½¿å®¹å™¨å°è£…çš„åº”ç”¨æ¯”ç›´æ¥åœ¨å®¿ä¸»è¿è¡Œæ›´åŠ å®‰å…¨ã€‚</p>
</blockquote>
<h3 id="1-è¿è¡Œå®¹å™¨"><a href="#1-è¿è¡Œå®¹å™¨" class="headerlink" title="1 è¿è¡Œå®¹å™¨"></a>1 è¿è¡Œå®¹å™¨</h3><blockquote>
<p>1ã€dockerå®¹å™¨å†…çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼ˆåˆå§‹å‘½ä»¤ï¼‰å¿…é¡»ä¸€ç›´å¤„äºå‰å°è¿è¡Œçš„çŠ¶æ€ï¼ˆå¿…é¡»å¤¯ä½ï¼‰ï¼Œå¦åˆ™è¿™ä¸ªå®¹å™¨ï¼Œå°±ä¼šå¤„äºé€€å‡ºçŠ¶æ€ã€‚</p>
<p>2ã€ä¸šåŠ¡åœ¨å®¹å™¨ä¸­è¿è¡Œï¼šå‰å°è¿è¡Œå¤¯ä½ï¼Œå¯åŠ¨æœåŠ¡</p>
<p>3ã€å¦‚æœä¸æŒ‡å®šæ‰§è¡Œå‘½ä»¤ï¼Œä¼šè¿è¡Œé»˜è®¤çš„æ‰§è¡Œå‘½ä»¤</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ”¾åå°è¿è¡Œ</span></span><br><span class="line">docker run -d -p 80:80 nginx:latest</span><br><span class="line">run åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªå®¹å™¨</span><br><span class="line">-d	æ”¾åœ¨åå°è¿è¡Œ</span><br><span class="line">-p 	ç«¯å£æ˜ å°„</span><br><span class="line">-v 	æºåœ°å€(å®¿ä¸»æœº)ï¼šç›®æ ‡åœ°å€(å®¹å™¨)</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> äº¤äº’å¼æ–¹å¼è¿›å…¥å®¹å™¨æ‰§è¡Œ</span></span><br><span class="line">docker run -it --name centos6 centos:6.9 /bin/bash</span><br><span class="line">-it 	åˆ†é…äº¤äº’å¼çš„ç»ˆç«¯</span><br><span class="line">--name 	åˆ¶å®šå®¹å™¨çš„åç§°</span><br><span class="line">/bin/sh å®¹å™¨æ‰§è¡Œçš„å‘½ä»¤ï¼Œæ¯ä¸ªè¿›ç¨‹é»˜è®¤æœ‰åˆå§‹æ‰§è¡Œå‘½ä»¤ï¼Œå¯ä»¥è¦†ç›–</span><br></pre></td></tr></table></figure>

<h3 id="2-æŸ¥çœ‹å·²æœ‰å®¹å™¨"><a href="#2-æŸ¥çœ‹å·²æœ‰å®¹å™¨" class="headerlink" title="2 æŸ¥çœ‹å·²æœ‰å®¹å™¨"></a>2 æŸ¥çœ‹å·²æœ‰å®¹å™¨</h3><blockquote>
<p>-a æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨ï¼ˆé»˜è®¤åªæ˜¾ç¤ºrunningçš„å®¹å™¨ï¼‰</p>
<p>-l æ˜¾ç¤ºæœ€æ–°çš„å®¹å™¨</p>
<p>â€“no-trunc æ˜¾ç¤ºå®Œæ•´id</p>
<p>-q é™é»˜è¾“å‡ºï¼ˆåªæ˜¾ç¤ºå®¹å™¨idï¼‰</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker container ls -a</span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ«å</span></span><br><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>

<h3 id="3-åœæ­¢å®¹å™¨"><a href="#3-åœæ­¢å®¹å™¨" class="headerlink" title="3 åœæ­¢å®¹å™¨"></a>3 åœæ­¢å®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker container stop 55e9c7c</span><br></pre></td></tr></table></figure>

<h3 id="4-æ€æ­»å®¹å™¨"><a href="#4-æ€æ­»å®¹å™¨" class="headerlink" title="4 æ€æ­»å®¹å™¨"></a>4 æ€æ­»å®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker container kill 55e9c7c</span><br></pre></td></tr></table></figure>

<blockquote>
<p>killä¸stopçš„åŒºåˆ«ï¼š</p>
<ul>
<li><p>killï¼šä¸ç®¡å®¹å™¨åŒä¸åŒæ„ï¼Œå‘é€SIGKILLä¿¡å·ï¼Œå¼ºè¡Œç»ˆæ­¢ã€‚</p>
</li>
<li><p>stopï¼šé¦–å…ˆç»™å®¹å™¨å‘é€ä¸€ä¸ªSIGTERMä¿¡å·ï¼Œè®©å®¹å™¨åšä¸€äº›é€€å‡ºå‰å¿…é¡»çš„ä¿æŠ¤æ€§ã€å®‰å…¨æ€§æ“ä½œï¼Œç„¶åè®©å®¹å™¨è‡ªåŠ¨åœæ­¢è¿è¡Œï¼Œå¦‚æœåœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œå®¹å™¨è¿˜æ˜¯æ²¡æœ‰åœæ­¢ï¼Œå†å‘é€SIGKILLä¿¡å·ï¼Œå¼ºè¡Œç»ˆæ­¢ã€‚</p>
</li>
</ul>
</blockquote>
<h3 id="5-å¯åŠ¨å®¹å™¨"><a href="#5-å¯åŠ¨å®¹å™¨" class="headerlink" title="5 å¯åŠ¨å®¹å™¨"></a>5 å¯åŠ¨å®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker container start 55e9c7c</span><br></pre></td></tr></table></figure>

<h3 id="6-è¿›å…¥å®¹å™¨ï¼ˆé‡è¦ï¼è°ƒè¯•ã€æ’é”™ï¼‰"><a href="#6-è¿›å…¥å®¹å™¨ï¼ˆé‡è¦ï¼è°ƒè¯•ã€æ’é”™ï¼‰" class="headerlink" title="6 è¿›å…¥å®¹å™¨ï¼ˆé‡è¦ï¼è°ƒè¯•ã€æ’é”™ï¼‰"></a>6 è¿›å…¥å®¹å™¨ï¼ˆé‡è¦ï¼è°ƒè¯•ã€æ’é”™ï¼‰</h3><p>ä½¿ç”¨åŒä¸€ç»ˆç«¯ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> äº¤äº’å¼æ–¹å¼è¿è¡Œå®¹å™¨ï¼ˆå¼€å¯æ–°ç»ˆç«¯ï¼‰</span></span><br><span class="line">docker run -it --name centos6.9 centos:6.9 /bin/bash</span><br><span class="line"><span class="meta">#</span><span class="bash"> æš‚æ—¶é€€å‡ºå½“å‰ç»ˆç«¯</span></span><br><span class="line">ctrl + p å† ctrl + q</span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡æ–°è¿›å…¥è¯¥ç»ˆç«¯</span></span><br><span class="line">docker attach d4ff818577bc</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ä¸åŒç»ˆç«¯ï¼ˆå¸¸ç”¨ï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it d4ff818577bc /bin/bash</span><br></pre></td></tr></table></figure>

<h3 id="7-åˆ é™¤å®¹å™¨"><a href="#7-åˆ é™¤å®¹å™¨" class="headerlink" title="7 åˆ é™¤å®¹å™¨"></a>7 åˆ é™¤å®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker container rm 55e9c7cb59a6 55e9c7cb59a5</span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ«å</span></span><br><span class="line">docker rm 55e9c7cb59a6</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‰¹é‡åˆ é™¤å®¹å™¨</span></span><br><span class="line">docker rm `docker ps -a -q`</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸‰ï¼‰Docker</category>
      </categories>
  </entry>
  <entry>
    <title>Dockerç³»åˆ—(å…«)-Dockerç§æœ‰ä»“åº“</title>
    <url>/2021/07/06/01_%E8%BF%90%E7%BB%B4/03-Docker/Docker%E7%B3%BB%E5%88%97-%E5%85%AB-Docker%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/</url>
    <content><![CDATA[<h2 id="ä¸€ã€å®˜æ–¹ç§æœ‰ä»“åº“registry"><a href="#ä¸€ã€å®˜æ–¹ç§æœ‰ä»“åº“registry" class="headerlink" title="ä¸€ã€å®˜æ–¹ç§æœ‰ä»“åº“registry"></a>ä¸€ã€å®˜æ–¹ç§æœ‰ä»“åº“registry</h2><h3 id="1-å®‰è£…æ­¥éª¤"><a href="#1-å®‰è£…æ­¥éª¤" class="headerlink" title="1 å®‰è£…æ­¥éª¤"></a>1 å®‰è£…æ­¥éª¤</h3><p>æ‹‰å–ç§æœ‰ä»“åº“é•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull registry</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨ç§æœ‰ä»“åº“å®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -di --name=registry -p 5000:5000 registry</span><br></pre></td></tr></table></figure>

<p>éªŒè¯æ˜¯å¦æ­£å¸¸</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æµè§ˆå™¨è¾“å…¥</span></span><br><span class="line">10.0.0.12:5000/v2/_catalog</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹daemon.jsonï¼Œè®© dockerä¿¡ä»»ç§æœ‰ä»“åº“åœ°å€</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vi /etc/docker/daemon.json</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ·»åŠ </span></span><br><span class="line">&#123;</span><br><span class="line">	&quot;insecure-registries&quot;:[&quot;10.0.0.12:5000&quot;]</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>é‡å¯dockeræœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl reset-failed docker.service</span><br></pre></td></tr></table></figure>

<p>ä¸Šä¼ é•œåƒåˆ°ç§æœ‰ä»“åº“</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker push 10.0.0.11:5000/registry</span><br></pre></td></tr></table></figure>

<p>ä»ç§æœ‰ä»“åº“ä¸‹è½½é•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull http://10.0.0.12:5000/registry</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€ä¼ä¸šçº§ç§æœ‰ä»“åº“Harbor"><a href="#äºŒã€ä¼ä¸šçº§ç§æœ‰ä»“åº“Harbor" class="headerlink" title="äºŒã€ä¼ä¸šçº§ç§æœ‰ä»“åº“Harbor"></a>äºŒã€ä¼ä¸šçº§ç§æœ‰ä»“åº“Harbor</h2><blockquote>
<p>Harborï¼šç¬¬ä¸‰æ–¹registryç»„ä»¶</p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/goharbor/harbor">https://github.com/goharbor/harbor</a></p>
<p>è€ç”·å­©å¼ºå“¥åšå®¢åœ°å€ï¼š<a href="https://oldqiang.com/">https://oldqiang.com/</a></p>
</blockquote>
<h3 id="1-ä¸ºä»€ä¹ˆä½¿ç”¨Harbor"><a href="#1-ä¸ºä»€ä¹ˆä½¿ç”¨Harbor" class="headerlink" title="1 ä¸ºä»€ä¹ˆä½¿ç”¨Harbor"></a>1 ä¸ºä»€ä¹ˆä½¿ç”¨Harbor</h3><p>å› ä¸ºå®˜æ–¹ä»“åº“registryå­˜åœ¨è¯¸å¤šé—®é¢˜ï¼š</p>
<ul>
<li><p>httpsé—®é¢˜</p>
</li>
<li><p>ç½‘é¡µç®€é™‹ï¼ŒæŸ¥çœ‹é•œåƒã€åˆ é™¤é•œåƒä¸æ–¹ä¾¿</p>
</li>
<li><p>æƒé™æ§åˆ¶ä¸æ–¹ä¾¿ï¼ˆè¦ä¹ˆæœ‰æƒé™ï¼Œè¦ä¹ˆå®Œå…¨æ²¡æƒé™ï¼‰ï¼Œä¸æ”¯æŒå¤šç”¨æˆ·</p>
</li>
</ul>
<h3 id="2-Harborå®‰è£…æ­¥éª¤"><a href="#2-Harborå®‰è£…æ­¥éª¤" class="headerlink" title="2 Harborå®‰è£…æ­¥éª¤"></a>2 Harborå®‰è£…æ­¥éª¤</h3><blockquote>
<p>è¿™é‡Œä»¥v2.2.3ä¸ºä¾‹</p>
</blockquote>
<p>ç¦»çº¿å®‰è£…åŒ…è·å–</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget https://github.com/goharbor/harbor/releases/download/v2.2.3/harbor-offline-installer-v2.2.3.tgz</span><br></pre></td></tr></table></figure>

<p>è§£å‹æ–‡ä»¶ï¼Œå¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -vxf harbor-offline-installer-v2.2.3.tgz</span><br><span class="line">cd harbor/</span><br><span class="line">cp harbor.yml.tmpl harbor.yml</span><br><span class="line">vim harbor.yml</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ³¨é‡Šhttpsè®¾ç½®é¡¹ï¼Œå¹¶ä¿®æ”¹ä»¥ä¸‹å†…å®¹</span></span><br><span class="line">hostname = 10.0.0.12  </span><br><span class="line">harbor_admin_password = 1qaz@WSX</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œå®‰è£…è„šæœ¬ï¼ˆæ—¶é—´æ¯”è¾ƒé•¿ï¼‰</p>
<blockquote>
<p>éœ€è¦å…ˆå®‰è£…docker-composeï¼Œ</p>
<p><a href="https://gsproj.github.io/2021/07/07/Docker%E7%B3%BB%E5%88%97-%E5%8D%81-Dokcer%E5%8D%95%E6%9C%BA%E7%BC%96%E6%8E%92docker-compose/">docker-composeå®‰è£…å‚è€ƒ</a></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./install.sh</span><br></pre></td></tr></table></figure>

<p>ç½‘é¡µè®¿é—®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">http://10.0.0.12</span><br><span class="line">admin</span><br></pre></td></tr></table></figure>

<h3 id="3-é•œåƒæ¨é€ä¸ä¸‹è½½"><a href="#3-é•œåƒæ¨é€ä¸ä¸‹è½½" class="headerlink" title="3 é•œåƒæ¨é€ä¸ä¸‹è½½"></a>3 é•œåƒæ¨é€ä¸ä¸‹è½½</h3><p>dockeré…ç½®æ–‡ä»¶æ·»åŠ ç™½åå•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/docker/daemon.json</span><br><span class="line">&quot;insecure-registries&quot;:[&quot;10.0.0.12&quot;],  # ä¸è¦åŠ ç«¯å£,å¯ä»¥æ˜¯IPæˆ–åŸŸåï¼Œä¸­é—´é€—å·éš”å¼€å¯åŠ å¤šä¸ª</span><br></pre></td></tr></table></figure>

<p>é•œåƒæ‰“æ ‡ç­¾</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull 10.0.0.12/xxx/centos6.9_ssh:v2   # xxxæ˜¯ä»“åº“ä¸­çš„åˆ›å»ºçš„é¡¹ç›®å</span><br></pre></td></tr></table></figure>

<p>ç™»å½•åˆ°ä»“åº“</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker login 10.0.0.12</span><br></pre></td></tr></table></figure>

<p>æ¨é€åˆ°ä»“åº“</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker push 10.0.0.12/xxx/centos6.9_ssh:v2</span><br></pre></td></tr></table></figure>

<p>ä»ä»“åº“ä¸‹è½½é•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull 10.0.0.12/xxx/centos6.9_ssh:v2</span><br></pre></td></tr></table></figure>

<h3 id="4-å°†Harborå‡çº§ä¸ºhttpsè®¿é—®"><a href="#4-å°†Harborå‡çº§ä¸ºhttpsè®¿é—®" class="headerlink" title="4 å°†Harborå‡çº§ä¸ºhttpsè®¿é—®"></a>4 å°†Harborå‡çº§ä¸ºhttpsè®¿é—®</h3><p>é…ç½®æ–‡ä»¶ä¿®æ”¹ï¼Œä¸»è¦æ˜¯æ·»åŠ è¯ä¹¦è·¯å¾„</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> https related config</span></span><br><span class="line">https:</span><br><span class="line"><span class="meta">  #</span><span class="bash"> https port <span class="keyword">for</span> harbor, default is 443</span></span><br><span class="line">  port: 443</span><br><span class="line"><span class="meta">  #</span><span class="bash"> The path of cert and key files <span class="keyword">for</span> nginx</span></span><br><span class="line">  certificate: /your/certificate/path</span><br><span class="line">  private_key: /your/private/key/path</span><br></pre></td></tr></table></figure>

<p>å†æ¬¡æ‰§è¡Œå®‰è£…è„šæœ¬</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./install.sh</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸‰ï¼‰Docker</category>
      </categories>
  </entry>
  <entry>
    <title>Dockerç³»åˆ—(å)-Dokcerå•æœºç¼–æ’docker-compose</title>
    <url>/2021/07/07/01_%E8%BF%90%E7%BB%B4/03-Docker/Docker%E7%B3%BB%E5%88%97-%E5%8D%81-Dokcer%E5%8D%95%E6%9C%BA%E7%BC%96%E6%8E%92docker-compose/</url>
    <content><![CDATA[<blockquote>
<p>docker-compose å•æœºç‰ˆçš„å®¹å™¨ç¼–æ’å·¥å…·</p>
</blockquote>
<h2 id="ä¸€ã€å®‰è£…docker-compose"><a href="#ä¸€ã€å®‰è£…docker-compose" class="headerlink" title="ä¸€ã€å®‰è£…docker-compose"></a>ä¸€ã€å®‰è£…docker-compose</h2><p>æ·»åŠ Centos7çš„epelæº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -o epel-7.repo http://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure>

<p>å®‰è£…pip</p>
<blockquote>
<p>Python 2.7å·²äº2020å¹´1æœˆ1æ—¥åˆ°æœŸï¼Œè¯·åœæ­¢ä½¿ç”¨ã€‚è¯·å‡çº§æ‚¨çš„Pythonï¼Œå› ä¸ºä¸å†ç»´æŠ¤Python 2.7ã€‚pip 21.0å°†äº2021å¹´1æœˆåœæ­¢å¯¹Python 2.7çš„æ”¯æŒã€‚pip 21.0å°†åˆ é™¤å¯¹æ­¤åŠŸèƒ½çš„æ”¯æŒã€‚å› æ­¤å®‰è£…&lt;21.0çš„ç‰ˆæœ¬</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install -y python2-pip</span><br><span class="line">pip install --upgrade &quot;pip &lt; 21.0&quot;</span><br></pre></td></tr></table></figure>

<p>å®‰è£…docker-compose</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip install docker-compose</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºæ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾docker-composeè„šæœ¬</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir /opt/docker-compose</span><br></pre></td></tr></table></figure>

<h2 id="ä¸€ã€æ¡ˆä¾‹ï¼šcomposeæ„å»ºwordpresså¹¶ä½¿ç”¨nginxè´Ÿè½½å‡è¡¡"><a href="#ä¸€ã€æ¡ˆä¾‹ï¼šcomposeæ„å»ºwordpresså¹¶ä½¿ç”¨nginxè´Ÿè½½å‡è¡¡" class="headerlink" title="ä¸€ã€æ¡ˆä¾‹ï¼šcomposeæ„å»ºwordpresså¹¶ä½¿ç”¨nginxè´Ÿè½½å‡è¡¡"></a>ä¸€ã€æ¡ˆä¾‹ï¼šcomposeæ„å»ºwordpresså¹¶ä½¿ç”¨nginxè´Ÿè½½å‡è¡¡</h2><p>docker01ä¸»æœºåˆ›å»ºdocker-composeæ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /opt/docker-compose/wordpress/docker-compose.yml</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:5.7</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db_data:/var/lib/mysql</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">somewordpress</span></span><br><span class="line">      <span class="attr">MYSQL_DATABASE:</span> <span class="string">wordpress</span></span><br><span class="line">      <span class="attr">MYSQL_USER:</span> <span class="string">wordpress</span></span><br><span class="line">      <span class="attr">MYSQL_PASSWORD:</span> <span class="string">wordpress</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">wordpress:</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">wordpress:latest</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">web_data:/var/www/html</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">     <span class="bullet">-</span> <span class="string">&quot;80&quot;</span>  <span class="comment"># éšæœºç«¯å£æ˜ å°„åˆ°å†…ç½‘80ç«¯å£</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">     <span class="attr">WORDPRESS_DB_HOST:</span> <span class="string">db:3306</span></span><br><span class="line">     <span class="attr">WORDPRESS_DB_USER:</span> <span class="string">wordpress</span></span><br><span class="line">     <span class="attr">WORDPRESS_DB_PASSWORD:</span> <span class="string">wordpress</span></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">db_data:</span></span><br><span class="line">  <span class="attr">web_data:</span></span><br></pre></td></tr></table></figure>

<p>æ„å»ºDockerå®¹å™¨(ä¸‰ä¸ªwordpressï¼Œä¸€ä¸ªmysqlï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker-compose up --scale wordpress=3 -d</span><br><span class="line">-d åå°è¿è¡Œ</span><br><span class="line">--scale ç”Ÿæˆçš„å®ä¾‹æ•°</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">netstaus -lntupå¯ä»¥çœ‹åˆ°3ä¸ªè¿ç»­çš„ç«¯å£å·</span><br><span class="line">tcp        0      0 0.0.0.0:49156           0.0.0.0:*               LISTEN      2110/docker-proxy</span><br><span class="line">tcp        0      0 0.0.0.0:49157           0.0.0.0:*               LISTEN      2126/docker-proxy</span><br><span class="line">tcp        0      0 0.0.0.0:49158           0.0.0.0:*               LISTEN      2143/docker-proxy</span><br></pre></td></tr></table></figure>

<p>docker02ä¸»æœºå®‰è£…nginxï¼Œç”¨äºè´Ÿè½½å‡è¡¡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -o epel-7.repo http://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br><span class="line">yum install nginx</span><br></pre></td></tr></table></figure>

<p>é…ç½®nginx</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd /etc/nginx/</span><br><span class="line">mv nginx.conf nginx.conf.bak</span><br><span class="line">grep -Ev &#x27;^$|#&#x27; nginx.conf.default  &gt; nginx.conf</span><br><span class="line">vim nginx.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    upstream wordpress &#123;</span><br><span class="line">        server 10.0.0.11:49156;</span><br><span class="line">        server 10.0.0.11:49157;</span><br><span class="line">        server 10.0.0.11:49158;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass  http://wordpress;</span><br><span class="line">            proxy_set_header Host $host;  # ä¸åŠ ä¸Šç½‘é¡µæ²¡æœ‰Hostä¿¡æ¯ï¼Œæ˜¾ç¤ºä¸å…¨</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯nginxæœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nginx -t</span><br><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•è®¿é—®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æµè§ˆå™¨è®¿é—®:10.0.0.12,å¯ä»¥è¿›å…¥wordpress</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹æ˜¯å¦è´Ÿè½½å‡è¡¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºä¸€ä¸ªæŸ¥çœ‹ä¿¡æ¯çš„é¡µé¢</span></span><br><span class="line">cd /var/lib/docker/volumes/wordpress_web_data/_data/</span><br><span class="line">vim info.php</span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> phpinfo(); <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµè§ˆå™¨è®¿é—®ï¼š10.0.0.12&#x2F;info.phpï¼ŒæŸ¥çœ‹å…¶ä¸­IPä¿¡æ¯</p>
<h2 id="äºŒã€æ¡ˆä¾‹ï¼šæ„å»ºzabbix"><a href="#äºŒã€æ¡ˆä¾‹ï¼šæ„å»ºzabbix" class="headerlink" title="äºŒã€æ¡ˆä¾‹ï¼šæ„å»ºzabbix"></a>äºŒã€æ¡ˆä¾‹ï¼šæ„å»ºzabbix</h2>]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸‰ï¼‰Docker</category>
      </categories>
  </entry>
  <entry>
    <title>Dockerç³»åˆ—(å…­)-Dockfileçš„ä½¿ç”¨</title>
    <url>/2021/06/30/01_%E8%BF%90%E7%BB%B4/03-Docker/Docker%E7%B3%BB%E5%88%97-%E5%85%AD-Dockfile%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h2 id="ä¸€ã€Dokerfileç®€ä»‹"><a href="#ä¸€ã€Dokerfileç®€ä»‹" class="headerlink" title="ä¸€ã€Dokerfileç®€ä»‹"></a>ä¸€ã€Dokerfileç®€ä»‹</h2><blockquote>
<p>Dockerfile æ˜¯ä¸€ä¸ªç”¨æ¥è‡ªåŠ¨æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚</p>
<p>å»ºè®®å­˜æ”¾åœ¨&#x2F;opt&#x2F;dockerfileä¸­ï¼Œå¦‚åˆ›å»ºcentosXXçš„é•œåƒï¼Œåˆ™åˆ›å»º&#x2F;opt&#x2F;dockerfile&#x2F;centosXX&#x2F;Dockerfile</p>
</blockquote>
<h3 id="1-Dockerfileçš„ç®€å•ä½¿ç”¨"><a href="#1-Dockerfileçš„ç®€å•ä½¿ç”¨" class="headerlink" title="1 Dockerfileçš„ç®€å•ä½¿ç”¨"></a>1 Dockerfileçš„ç®€å•ä½¿ç”¨</h3><blockquote>
<p>åˆ›å»ºä¸€ä¸ªå¼€å¯sshdæœåŠ¡çš„centos6.9é•œåƒ</p>
</blockquote>
<p>åˆ›å»ºyumæºæ–‡ä»¶ï¼Œç”¨äºæ‹·è´åˆ°centos6.9é•œåƒä¸­</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /opt/dockfile/centos6.9_ssh</span><br><span class="line">vim CentOS-Base.repo</span><br><span class="line">...å†…å®¹çœç•¥</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºDockerfileæ–‡ä»¶&#x2F;opt&#x2F;dockfile&#x2F;centos6.9_ssh&#x2F;Dockerfileï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> centos:<span class="number">6.9</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> CentOS-Base.repo /etc/yum.repos.d</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum install openssh-server -y</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> service sshd restart</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&#x27;123456&#x27;</span> | passwd --stdin root</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;/usr/sbin/sshd&quot;</span>,<span class="string">&quot;-D&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>PSï¼šRUNçš„æ‰§è¡Œè¿‡ç¨‹ï¼šåˆ›å»ºä¸´æ—¶å®¹å™¨ï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œæäº¤æˆä¸´æ—¶é•œåƒï¼Œåˆ é™¤ä¸´æ—¶å®¹å™¨ï¼Œé‡å¤æ­¤æ­¥éª¤ã€‚</p>
</blockquote>
<p>æ„å»ºé•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker build -t centos6.9_ssh:v2 /opt/dockfile/centos6.9_ssh</span><br></pre></td></tr></table></figure>

<blockquote>
<p>PSï¼šæœ€åä¼ å…¥çš„æ˜¯åŒ…å«Dockerfileçš„æ–‡ä»¶å¤¹ï¼ŒåŒºåˆ†å¤§å°å†™ï¼Œå¯ä»¥ç”¨â€.â€ä»£æ›¿ </p>
</blockquote>
<p>éªŒè¯é•œåƒæ˜¯å¦æ­£å¸¸</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d -p 1022:22 centos6.9_ssh:v2</span><br></pre></td></tr></table></figure>

<blockquote>
<p>PSï¼šæœ€åä¸ç”¨æ¥å‘½ä»¤ï¼Œå°†è‡ªåŠ¨æ‰§è¡ŒCMDæŒ‡å®šçš„å‘½ä»¤</p>
</blockquote>
<h3 id="2-å°æ¡ˆä¾‹"><a href="#2-å°æ¡ˆä¾‹" class="headerlink" title="2 å°æ¡ˆä¾‹"></a>2 å°æ¡ˆä¾‹</h3><blockquote>
<p>åˆ›å»ºcentos6.9 + ssh + nginxçš„Dockerfile</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@docker01 centos6.9_ssh_nginx]# pwd</span><br><span class="line">/opt/dockfile/centos6.9_ssh_nginx</span><br><span class="line">[root@docker01 centos6.9_ssh_nginx]# ls</span><br><span class="line">CentOS-Base.repo  Dockerfile  epel.repo  init.sh</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> init.sh</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">service sshd restart</span><br><span class="line">nginx -g &quot;daemon off;&quot;</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™Dockerfile</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">FROM centos:6.9</span><br><span class="line">ADD CentOS-Base.repo /etc/yum.repos.d</span><br><span class="line">ADD epel.repo /etc/yum.repos.d</span><br><span class="line">ADD init.sh /root</span><br><span class="line">RUN yum install openssh-server nginx -y</span><br><span class="line">RUN echo &#x27;123456&#x27; | passwd --stdin root</span><br><span class="line">CMD [&quot;/bin/bash&quot;,&quot;/root/init.sh&quot;]</span><br></pre></td></tr></table></figure>

<p>æ„å»ºé•œåƒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker build -t centos6.9_ssh_nginx:v3 .</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä½¿ç”¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d -p 1022:22 -p 81:80 centos6.9_ssh_nginx:v3</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€DockeræŒ‡ä»¤"><a href="#äºŒã€DockeræŒ‡ä»¤" class="headerlink" title="äºŒã€DockeræŒ‡ä»¤"></a>äºŒã€DockeræŒ‡ä»¤</h2><table>
<thead>
<tr>
<th align="left">å‘½ä»¤</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">FROM</td>
<td align="left">åŸºäºé‚£ä¸ªé•œåƒæ¥æ„å»º</td>
</tr>
<tr>
<td align="left">MAINTAINER</td>
<td align="left">é•œåƒçš„åˆ›å»ºè€…</td>
</tr>
<tr>
<td align="left">ENV</td>
<td align="left">è®¾ç½®ç¯å¢ƒå˜é‡</td>
</tr>
<tr>
<td align="left">ADD</td>
<td align="left">æ·»åŠ å®¿ä¸»æœºæ–‡ä»¶åˆ°å®¹å™¨é‡Œï¼Œæœ‰éœ€è¦è§£å‹çš„æ–‡ä»¶ä¼šè‡ªåŠ¨è§£å‹</td>
</tr>
<tr>
<td align="left">COPY</td>
<td align="left">æ·»åŠ å®¿ä¸»æœºæ–‡ä»¶åˆ°å®¹å™¨é‡Œ</td>
</tr>
<tr>
<td align="left">WORKDIR</td>
<td align="left">åˆ‡æ¢å·¥ä½œç›®å½•</td>
</tr>
<tr>
<td align="left">EXPOSE</td>
<td align="left">å¼€æ”¾å¯ç”¨ç«¯å£</td>
</tr>
<tr>
<td align="left">CMD</td>
<td align="left">å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤ï¼Œå¯è¢«docker runæŒ‡å®šçš„å‘½ä»¤è¦†ç›–</td>
</tr>
<tr>
<td align="left">ENTRYPOINT</td>
<td align="left">å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤ï¼Œä½†ä¸å›è¢«docker runæŒ‡å®šçš„å‘½ä»¤è¦†ç›–ï¼Œå¦‚éœ€è¦†ç›–ï¼Œéœ€è¦åŠ â€“entrypointå‚æ•°</td>
</tr>
<tr>
<td align="left">VOLUME</td>
<td align="left">åˆ›å»ºæŒ‚è½½å·ï¼Œå°†å®¿ä¸»æœºçš„ç›®å½•æŒ‚è½½åˆ°å®¹å™¨é‡Œ</td>
</tr>
</tbody></table>
<h2 id="ä¸‰ã€æ¡ˆä¾‹ï¼šDockerfileæ„å»ºå¯é“äº‘å®¹å™¨"><a href="#ä¸‰ã€æ¡ˆä¾‹ï¼šDockerfileæ„å»ºå¯é“äº‘å®¹å™¨" class="headerlink" title="ä¸‰ã€æ¡ˆä¾‹ï¼šDockerfileæ„å»ºå¯é“äº‘å®¹å™¨"></a>ä¸‰ã€æ¡ˆä¾‹ï¼šDockerfileæ„å»ºå¯é“äº‘å®¹å™¨</h2><blockquote>
<p>é¡¹ç›®ï¼š</p>
<p>â€‹	å¯é“äº‘ç½‘ç›˜kodexplorer</p>
<p>ç¯å¢ƒï¼š</p>
<p>â€‹	httpd+phpæˆ–è€…nginx+php<br>â€‹	phpæ‰€éœ€æ¨¡å—ï¼šphp5.5ä»¥ä¸Š<br>â€‹	åŸºç¡€é•œåƒï¼šcentos:7.9<br>â€‹	é¡¹ç›®ä¸‹è½½åœ°å€: <a href="http://static.kodcloud.com/update/download/kodexplorer4.37.zip">http://static.kodcloud.com/update/download/kodexplorer4.37.zip</a><br>â€‹	é¡¹ç›®å®˜ç½‘ï¼š<a href="https://kodcloud.com/download/">https://kodcloud.com/download/</a></p>
</blockquote>
<h3 id="1-æ‰‹å·¥éƒ¨ç½²ä¸€é"><a href="#1-æ‰‹å·¥éƒ¨ç½²ä¸€é" class="headerlink" title="1 æ‰‹å·¥éƒ¨ç½²ä¸€é"></a>1 æ‰‹å·¥éƒ¨ç½²ä¸€é</h3><blockquote>
<p>å†™Dockerfileå‰è‡ªå·±æ‰‹åŠ¨éƒ¨ç½²ä¸€éï¼Œä¸»è¦æ˜¯nginx + phpçš„æ­å»ºï¼Œå‚è€ƒåšå®¢</p>
<p><a href="https://cloud.tencent.com/developer/article/1015237">https://cloud.tencent.com/developer/article/1015237</a></p>
</blockquote>
<p>ä¿®æ”¹nginx.conf</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> For more information on configuration, see:</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   * Official English Documentation: http://nginx.org/en/docs/</span></span><br><span class="line"><span class="meta">#</span><span class="bash">   * Official Russian Documentation: http://nginx.org/ru/docs/</span></span><br><span class="line"></span><br><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/log/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span></span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">                      &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">                      &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 4096;</span><br><span class="line"></span><br><span class="line">    include             /etc/nginx/mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line"></span><br><span class="line">    # Load modular configuration files from the /etc/nginx/conf.d directory.</span><br><span class="line">    # See http://nginx.org/en/docs/ngx_core_module.html#include</span><br><span class="line">    # for more information.</span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        listen       [::]:80;</span><br><span class="line">        server_name  _;</span><br><span class="line">        root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    	location ~ \.php$ &#123;</span><br><span class="line">        try_files $uri =404;</span><br><span class="line">        fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;</span><br><span class="line">        fastcgi_index index.php;</span><br><span class="line">        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">        include fastcgi_params;</span><br><span class="line">    	&#125;</span><br><span class="line">	</span><br><span class="line">    	location / &#123;</span><br><span class="line">        index  index.php index.html index.htm;</span><br><span class="line">        try_files $uri $uri/ /index.php?$args;</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Settings <span class="keyword">for</span> a TLS enabled server.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="bash"><span class="comment">#    server &#123;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        listen       443 ssl http2;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        listen       [::]:443 ssl http2;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        server_name  _;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        root         /usr/share/nginx/html;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="bash"><span class="comment">#        ssl_certificate &quot;/etc/pki/nginx/server.crt&quot;;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_certificate_key <span class="string">&quot;/etc/pki/nginx/private/server.key&quot;</span>;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_session_cache shared:SSL:1m;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_session_timeout  10m;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_ciphers HIGH:!aNULL:!MD5;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        ssl_prefer_server_ciphers on;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="bash"><span class="comment">#        # Load configuration files for the default server block.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">        include /etc/nginx/default.d/*.conf;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="bash"><span class="comment">#        error_page 404 /404.html;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">            location = /40x.html &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        &#125;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="bash"><span class="comment">#        error_page 500 502 503 504 /50x.html;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">            location = /50x.html &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">        &#125;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    &#125;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹php-fpm.conf</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">;;;;;;;;;;;;;;;;;;;;;</span><br><span class="line">; FPM Configuration ;</span><br><span class="line">;;;;;;;;;;;;;;;;;;;;;</span><br><span class="line"></span><br><span class="line">; All relative paths in this configuration file are relative to PHP&#x27;s install</span><br><span class="line">; prefix.</span><br><span class="line"></span><br><span class="line">; Include one or more files. If glob(3) exists, it is used to include a bunch of</span><br><span class="line">; files from a glob(3) pattern. This directive can be used everywhere in the</span><br><span class="line">; file.</span><br><span class="line">include=/etc/php-fpm.d/*.conf</span><br><span class="line"></span><br><span class="line">;;;;;;;;;;;;;;;;;;</span><br><span class="line">; Global Options ;</span><br><span class="line">;;;;;;;;;;;;;;;;;;</span><br><span class="line"></span><br><span class="line">[global]</span><br><span class="line">; Pid file</span><br><span class="line">; Default Value: none</span><br><span class="line">pid = /run/php-fpm/php-fpm.pid</span><br><span class="line"></span><br><span class="line">; Error log file</span><br><span class="line">; Default Value: /var/log/php-fpm.log</span><br><span class="line">error_log = /var/log/php-fpm/error.log</span><br><span class="line"></span><br><span class="line">; Log level</span><br><span class="line">; Possible Values: alert, error, warning, notice, debug</span><br><span class="line">; Default Value: notice</span><br><span class="line">;log_level = notice</span><br><span class="line"></span><br><span class="line">; If this number of child processes exit with SIGSEGV or SIGBUS within the time</span><br><span class="line">; interval set by emergency_restart_interval then FPM will restart. A value</span><br><span class="line">; of &#x27;0&#x27; means &#x27;Off&#x27;.</span><br><span class="line">; Default Value: 0</span><br><span class="line">;emergency_restart_threshold = 0</span><br><span class="line"></span><br><span class="line">; Interval of time used by emergency_restart_interval to determine when </span><br><span class="line">; a graceful restart will be initiated.  This can be useful to work around</span><br><span class="line">; accidental corruptions in an accelerator&#x27;s shared memory.</span><br><span class="line">; Available Units: s(econds), m(inutes), h(ours), or d(ays)</span><br><span class="line">; Default Unit: seconds</span><br><span class="line">; Default Value: 0</span><br><span class="line">;emergency_restart_interval = 0</span><br><span class="line"></span><br><span class="line">; Time limit for child processes to wait for a reaction on signals from master.</span><br><span class="line">; Available units: s(econds), m(inutes), h(ours), or d(ays)</span><br><span class="line">; Default Unit: seconds</span><br><span class="line">; Default Value: 0</span><br><span class="line">;process_control_timeout = 0</span><br><span class="line"></span><br><span class="line">; Send FPM to background. Set to &#x27;no&#x27; to keep FPM in foreground for debugging.</span><br><span class="line">; Default Value: yes</span><br><span class="line">daemonize = no</span><br><span class="line"></span><br><span class="line">;;;;;;;;;;;;;;;;;;;;</span><br><span class="line">; Pool Definitions ; </span><br><span class="line">;;;;;;;;;;;;;;;;;;;;</span><br><span class="line"></span><br><span class="line">; See /etc/php-fpm.d/*.conf</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹<a href="http://www.conf/">www.conf</a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 12è¡Œ</span></span><br><span class="line">listen = /var/run/php-fpm/php-fpm.sock</span><br><span class="line"><span class="meta">#</span><span class="bash"> 31-32è¡Œ</span></span><br><span class="line">listen.owner = nobody</span><br><span class="line">listen.group = nobody</span><br><span class="line"><span class="meta">#</span><span class="bash"> 39-41è¡Œ</span></span><br><span class="line">user = nginx</span><br><span class="line">; RPM: Keep a group allowed to write in log dir.</span><br><span class="line">group = nginx</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹php.ini</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cgi.fix_pathinfo æŠŠå®ƒçš„å€¼è®¾ç½®ä¸º 0</span><br></pre></td></tr></table></figure>

<h3 id="2-Dockerfileéƒ¨ç½²"><a href="#2-Dockerfileéƒ¨ç½²" class="headerlink" title="2 Dockerfileéƒ¨ç½²"></a>2 Dockerfileéƒ¨ç½²</h3><p>æ–‡ä»¶å­˜æ”¾</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@docker01 centos7.9_kod]# ll</span><br><span class="line">total 92</span><br><span class="line">-rw-r--r--. 1 root root   661 Jul  2 11:21 Dockerfile</span><br><span class="line">-rw-r--r--. 1 root root   171 Jul  1 14:28 init.sh</span><br><span class="line">-rw-r--r--. 1 root root  2715 Jul  1 13:50 nginx.conf</span><br><span class="line">-rw-r--r--. 1 root root  1691 Jul  1 13:50 php-fpm.conf</span><br><span class="line">-rw-r--r--. 1 root root 64945 Jul  1 14:48 php.ini</span><br><span class="line">-rw-r--r--. 1 root root 10029 Jul  1 13:50 www.conf</span><br><span class="line">[root@docker01 centos7.9_kod]# pwd</span><br><span class="line">/opt/dockfile/centos7.9_kod</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™Dockerfile</p>
<figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> centos:<span class="number">7.9</span>.<span class="number">2009</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo &amp;&amp; \</span></span><br><span class="line"><span class="bash">curl -o /etc/yum.repos.d/epel.repo https://mirrors.aliyun.com/repo/epel-7.repo &amp;&amp; \</span></span><br><span class="line"><span class="bash">yum install openssh-server nginx net-tools php-cli php-fpm unzip php-gd php-mbstring  -y</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> nginx.conf /etc/nginx/nginx.conf</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> php-fpm.conf /etc/php-fpm.conf</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> www.conf /etc/php-fpm.d/www.conf</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> php.ini /etc</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> init.sh /root/</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">80</span> <span class="number">22</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /usr/share/nginx/html</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> curl -o kod.zip https://static.kodcloud.com/update/download/kodexplorer4.45.zip &amp;&amp; \</span></span><br><span class="line"><span class="bash">unzip kod.zip &amp;&amp; \</span></span><br><span class="line"><span class="bash">chmod -R 777 /usr/share/nginx/html/</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;/bin/bash&quot;</span>,<span class="string">&quot;/root/init.sh&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p>æ„å»ºé•œåƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker build -t centos7.9_kod:v1 .</span><br></pre></td></tr></table></figure>

<p>è¿è¡Œå®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d -p 80:80 -p 1022:22 -e &quot;SSH_PWD=redhat123&quot; --privileged centos7.9_kod:v1 /usr/sbin/init</span><br></pre></td></tr></table></figure>

<p>è¿›å…¥å®¹å™¨ï¼Œå¹¶è¿è¡Œåˆå§‹åŒ–å‘½ä»¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it 865 /bin/bash</span><br><span class="line"><span class="meta">#</span><span class="bash"> å®¹å™¨å¯åŠ¨æœåŠ¡ï¼Œè®¾ç½®rootå¯†ç </span></span><br><span class="line">[root@88179198e672 html]#systemctl restart sshd php-fpm nginx</span><br><span class="line">[root@88179198e672 html]#echo &quot;redhat123&quot; | passwd --stdin root</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•è®¿é—®ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ç½‘é¡µè®¿é—®ï¼šhttp://10.0.0.11å¯è¿›å»å¯é“äº‘ç•Œé¢</span><br><span class="line">ssh 10.0.0.11 -p1022 å¯ä»¥ç™»å½•é•œåƒ</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸‰ï¼‰Docker</category>
      </categories>
  </entry>
  <entry>
    <title>Dockerç³»åˆ—(å››)-å®¹å™¨çš„æ•°æ®å·æŒ‚è½½ä¸å°æ¡ˆä¾‹ç»ƒä¹ </title>
    <url>/2021/06/29/01_%E8%BF%90%E7%BB%B4/03-Docker/Docker%E7%B3%BB%E5%88%97-%E5%9B%9B-%E5%AE%B9%E5%99%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8D%B7%E6%8C%82%E8%BD%BD%E4%B8%8E%E5%B0%8F%E6%A1%88%E4%BE%8B%E7%BB%83%E4%B9%A0/</url>
    <content><![CDATA[<h2 id="ä¸€ã€æ•°æ®å·æŒ‚è½½"><a href="#ä¸€ã€æ•°æ®å·æŒ‚è½½" class="headerlink" title="ä¸€ã€æ•°æ®å·æŒ‚è½½"></a>ä¸€ã€æ•°æ®å·æŒ‚è½½</h2><h3 id="1-ä¸´æ—¶æŒ‚è½½"><a href="#1-ä¸´æ—¶æŒ‚è½½" class="headerlink" title="1 ä¸´æ—¶æŒ‚è½½"></a>1 ä¸´æ—¶æŒ‚è½½</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å°†/opt/xiaoniaoç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„htmlç›®å½•</span></span><br><span class="line">docker run -d -p 80:80 -v /opt/xiaoniao:/usr/share/nginx/html nginx:latest</span><br></pre></td></tr></table></figure>

<h3 id="2-ä½¿ç”¨å·æŒ‚è½½"><a href="#2-ä½¿ç”¨å·æŒ‚è½½" class="headerlink" title="2 ä½¿ç”¨å·æŒ‚è½½"></a>2 ä½¿ç”¨å·æŒ‚è½½</h3><blockquote>
<p>å®¹å™¨è¢«åˆ é™¤ï¼Œåˆ›å»ºçš„å·å¯ä»¥ä¿ç•™ï¼Œå¯ä»¥å†æ¬¡æŒ‚è½½åˆ°æ–°å»ºçš„å®¹å™¨ä¸­</p>
</blockquote>
<p>åˆ›å»ºåä¸ºmyvolçš„å®¹å™¨å·å¹¶æŒ‚è½½åˆ°å®¹å™¨htmlç›®å½•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d -p 80:80 -v myvol:/usr/share/nginx/html nginx:latest</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹å½“å‰æœ‰å“ªäº›å®¹å™¨å·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker volume ls</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹åä¸ºmyvolçš„å·çš„ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker volume inspect myvol</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤å®¹å™¨å¹¶åˆ é™¤å·ï¼ˆæ— æ•ˆï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> PSï¼šåˆ é™¤å®¹å™¨å¹¶åˆ é™¤å·ï¼Œæ— æ³•å°†å·åˆ é™¤</span></span><br><span class="line">docker rm -f -v [å®¹å™¨ID]</span><br><span class="line">    -v --volume</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€å°æ¡ˆä¾‹ï¼šå¤šç«¯å£å¤šç«™ç‚¹"><a href="#äºŒã€å°æ¡ˆä¾‹ï¼šå¤šç«¯å£å¤šç«™ç‚¹" class="headerlink" title="äºŒã€å°æ¡ˆä¾‹ï¼šå¤šç«¯å£å¤šç«™ç‚¹"></a>äºŒã€å°æ¡ˆä¾‹ï¼šå¤šç«¯å£å¤šç«™ç‚¹</h2><blockquote>
<p>80ç«¯å£è®¿é—®nginxé¦–é¡µ</p>
<p>81ç«¯å£è®¿é—®æ°´æœå¿è€…</p>
</blockquote>
<p>è·å–æ°´æœå¿è€…HTML5å°æ¸¸æˆæºç </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget https://7npmedia.w3cschool.cn/1-FruitNinja.7z</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º81ç«¯å£nginxé…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /opt/fruitninjia.conf</span><br><span class="line">server &#123;</span><br><span class="line">    listen       81;</span><br><span class="line">    listen  [::]:81;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #access_log  /var/log/nginx/host.access.log  main;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /data;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°†æ¸¸æˆæºç æ–‡ä»¶è§£å‹è‡³&#x2F;opt&#x2F;fruitninjiaï¼Œå¹¶è¿è¡Œnginxå®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å°†/opt/fruitninjiaæŒ‚è½½åˆ°å®¹å™¨/dataä¸­</span></span><br><span class="line">docker run -d -p 80:80 -p 81:81 -v /opt/fruitninjia:/data -v /opt/fruitninjia.conf:/etc/nginx/conf.d/fruitninjia.conf nginx</span><br></pre></td></tr></table></figure>

<p>ç½‘é¡µè®¿é—®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">https://10.0.0.11:80</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸‰ï¼‰Docker</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--02--RsyncæœåŠ¡å™¨æ­å»º</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/02-Rsync%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<h2 id="äºŒã€Rsyncä¸æ•°æ®å¤‡ä»½"><a href="#äºŒã€Rsyncä¸æ•°æ®å¤‡ä»½" class="headerlink" title="äºŒã€Rsyncä¸æ•°æ®å¤‡ä»½"></a>äºŒã€Rsyncä¸æ•°æ®å¤‡ä»½</h2><h3 id="2-1-å¤‡ä»½æ¦‚å¿µ"><a href="#2-1-å¤‡ä»½æ¦‚å¿µ" class="headerlink" title="2.1  å¤‡ä»½æ¦‚å¿µ"></a>2.1  å¤‡ä»½æ¦‚å¿µ</h3><p>ä¸ºä»€ä¹ˆè¦åšå¤‡ä»½ï¼Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">æ•°æ®éå¸¸çš„é‡è¦</span><br><span class="line">ä¿è¯æ•°æ®ä¸ä¸¢å¤±</span><br><span class="line">ä¾¿äºå¿«é€Ÿçš„æ¢å¤</span><br></pre></td></tr></table></figure>

<p>å¤‡ä»½æ–¹å¼</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">å®Œå…¨å¤‡ä»½ï¼Œæ¯æ¬¡éƒ½è¿›è¡Œå…¨éƒ¨å¤‡ä»½ (æ•ˆç‡ä½ä¸‹, å ç”¨ç©ºé—´)</span><br><span class="line">å¢é‡å¤‡ä»½ï¼Œä»…å¤‡ä»½å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å·®å¼‚çš„éƒ¨åˆ† (æé«˜å¤‡ä»½æ•ˆç‡,èŠ‚çœç©ºé—´, é€‚åˆå¼‚åœ°å¤‡ä»½ )</span><br></pre></td></tr></table></figure>

<p>ç”¨ä»€ä¹ˆå·¥å…·åšå¤‡ä»½ï¼Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scp  	ç½‘ç»œä¹‹é—´çš„æ‹·è´ï¼Œå…¨é‡æ‹·è´çš„æ–¹å¼  ï¼ˆsshåè®®ï¼‰</span><br><span class="line">rsync	è¿œç¨‹åŒæ­¥ï¼ˆå¢é‡ï¼‰</span><br></pre></td></tr></table></figure>

<h3 id="2-2-rsyncçš„åŸºæœ¬æ¦‚å¿µ"><a href="#2-2-rsyncçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="2.2 rsyncçš„åŸºæœ¬æ¦‚å¿µ"></a>2.2 rsyncçš„åŸºæœ¬æ¦‚å¿µ</h3><blockquote>
<p>rsyncæ˜¯ä¸€æ¬¾å¼€æºçš„å¤‡ä»½å·¥å…·ï¼Œ<br>å¯ä»¥åœ¨ä¸åŒä¸»æœºä¹‹é—´è¿›è¡ŒåŒæ­¥ï¼ˆwindowså’ŒLinuxä¹‹é—´   Macå’ŒLinux   Linuxå’ŒLinuxï¼‰<br>å¯å®ç°å…¨é‡å¤‡ä»½ä¸å¢é‡å¤‡ä»½<br>å› æ­¤éå¸¸é€‚åˆç”¨äºæ¶æ„é›†ä¸­å¼å¤‡ä»½æˆ–å¼‚åœ°å¤‡ä»½ç­‰åº”ç”¨</p>
</blockquote>
<p>rsyncæ•°æ®çš„åŒæ­¥æ¨¡å¼</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">æ¨é€ï¼š æœ¬åœ°å°†æ•°æ®ä¸Šä¼ è‡³å¤‡ä»½æœåŠ¡å™¨ä¸Š	 ï¼ˆä¸Šä¼ ï¼‰</span><br><span class="line">æ‹‰å–ï¼š å¤‡ä»½æœåŠ¡å™¨è·å–æœ¬åœ°æœåŠ¡å™¨çš„æ•°æ®  ï¼ˆä¸‹è½½ï¼‰</span><br></pre></td></tr></table></figure>

<p>rsyncçš„æ•°æ®ä¼ è¾“æ–¹å¼</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">æœ¬åœ°ä¼ è¾“ï¼ˆç±»ä¼¼äºä½¿ç”¨cpå‘½ä»¤ï¼‰</span><br><span class="line">è¿œç¨‹ä¼ è¾“ï¼ˆé€šè¿‡ç½‘ç»œä¼ è¾“  a--&gt;bï¼‰</span><br><span class="line">å®ˆæŠ¤è¿›ç¨‹ï¼ˆè¿è¡Œä¸€ä¸ªæœåŠ¡ä¸€ç›´åœ¨åå°ï¼‰</span><br></pre></td></tr></table></figure>

<p>rsyncé€‰é¡¹è¯¦è§£</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rsyncå‚æ•°:</span><br><span class="line">-a           #å½’æ¡£æ¨¡å¼ä¼ è¾“, ç­‰äº-tropgDl *</span><br><span class="line">-v           #è¯¦ç»†æ¨¡å¼è¾“å‡º, æ‰“å°é€Ÿç‡, æ–‡ä»¶æ•°é‡ç­‰ *</span><br><span class="line">-z           #ä¼ è¾“æ—¶è¿›è¡Œå‹ç¼©ä»¥æé«˜æ•ˆç‡ *</span><br><span class="line">-r           #é€’å½’ä¼ è¾“ç›®å½•åŠå­ç›®å½•ï¼Œå³ç›®å½•ä¸‹å¾—æ‰€æœ‰ç›®å½•éƒ½åŒæ ·ä¼ è¾“ã€‚</span><br><span class="line">-t           #ä¿æŒæ–‡ä»¶æ—¶é—´ä¿¡æ¯</span><br><span class="line">-o           #ä¿æŒæ–‡ä»¶å±ä¸»ä¿¡æ¯</span><br><span class="line">-p           #ä¿æŒæ–‡ä»¶æƒé™</span><br><span class="line">-g           #ä¿æŒæ–‡ä»¶å±ç»„ä¿¡æ¯</span><br><span class="line">-l           #ä¿ç•™è½¯è¿æ¥</span><br><span class="line">-P           #æ˜¾ç¤ºåŒæ­¥çš„è¿‡ç¨‹åŠä¼ è¾“æ—¶çš„è¿›åº¦ç­‰ä¿¡æ¯</span><br><span class="line">-D           #ä¿æŒè®¾å¤‡æ–‡ä»¶ä¿¡æ¯</span><br><span class="line">-L           #ä¿ç•™è½¯è¿æ¥æŒ‡å‘çš„ç›®æ ‡æ–‡ä»¶</span><br><span class="line">-e           #ä½¿ç”¨çš„ä¿¡é“åè®®,æŒ‡å®šæ›¿ä»£rshçš„shellç¨‹åº  ssh</span><br><span class="line">--exclude=PATTERN   #æŒ‡å®šæ’é™¤ä¸éœ€è¦ä¼ è¾“çš„æ–‡ä»¶æ¨¡å¼</span><br><span class="line">--exclude-from=file #æ–‡ä»¶åæ‰€åœ¨çš„ç›®å½•æ–‡ä»¶</span><br><span class="line">--bwlimit=100       #é™é€Ÿä¼ è¾“ *</span><br><span class="line">--partial           #æ–­ç‚¹ç»­ä¼ </span><br><span class="line">--delete            #è®©ç›®æ ‡ç›®å½•å’Œæºç›®å½•æ•°æ®ä¿æŒä¸€è‡´ *</span><br></pre></td></tr></table></figure>

<h3 id="2-3-æœ¬åœ°ä¼ è¾“"><a href="#2-3-æœ¬åœ°ä¼ è¾“" class="headerlink" title="2.3 æœ¬åœ°ä¼ è¾“"></a>2.3 æœ¬åœ°ä¼ è¾“</h3><p>å°†&#x2F;bootæ–‡ä»¶å¤¹æ‹·è´åˆ°&#x2F;tmpä¸­</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rsync -avz /boot /tmp/</span><br></pre></td></tr></table></figure>

<p>å°†bootæ–‡ä»¶å¤¹ä¸­çš„å†…å®¹æ‹·è´åˆ°&#x2F;tmpä¸­</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rsync -avz /boot/ /tmp/</span><br></pre></td></tr></table></figure>

<h3 id="2-3-è¿œç¨‹ä¼ è¾“"><a href="#2-3-è¿œç¨‹ä¼ è¾“" class="headerlink" title="2.3 è¿œç¨‹ä¼ è¾“"></a>2.3 è¿œç¨‹ä¼ è¾“</h3><p>è™šæ‹Ÿæœºå‡†å¤‡</p>
<table>
<thead>
<tr>
<th>ä¸»æœºå</th>
<th>IPåœ°å€</th>
</tr>
</thead>
<tbody><tr>
<td>nfs</td>
<td>172.16.1.31&#x2F;24 å’Œ 10.0.0.31&#x2F;24</td>
</tr>
<tr>
<td>backup</td>
<td>172.16.1.41&#x2F;24 å’Œ 10.0.0.41&#x2F;24</td>
</tr>
</tbody></table>
<p>backupä»nfsæ‹‰å–&#x2F;booç›®å½•åˆ°æœ¬åœ°&#x2F;tmpæ–‡ä»¶å¤¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rsync -avz root@10.0.0.31:/boot /tmp</span><br></pre></td></tr></table></figure>

<p>backupä¸Šä¼ &#x2F;root&#x2F;test.txtåˆ°nfsä¸»æœºçš„&#x2F;tmpæ–‡ä»¶å¤¹ä¸­</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rsync /root/test.txt root@10.0.0.31:/tmp</span><br></pre></td></tr></table></figure>

<h3 id="2-4-å®ˆæŠ¤è¿›ç¨‹ä¼ è¾“ï¼ˆæœåŠ¡æ­å»ºï¼‰"><a href="#2-4-å®ˆæŠ¤è¿›ç¨‹ä¼ è¾“ï¼ˆæœåŠ¡æ­å»ºï¼‰" class="headerlink" title="2.4 å®ˆæŠ¤è¿›ç¨‹ä¼ è¾“ï¼ˆæœåŠ¡æ­å»ºï¼‰"></a>2.4 å®ˆæŠ¤è¿›ç¨‹ä¼ è¾“ï¼ˆæœåŠ¡æ­å»ºï¼‰</h3><blockquote>
<p>ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨rsyncå®ˆæŠ¤è¿›ç¨‹ä¼ è¾“ï¼Ÿ</p>
<p>Rsyncå€ŸåŠ©SSHåè®®åŒæ­¥æ•°æ®å­˜åœ¨çš„ç¼ºé™·ï¼ˆä¸´æ—¶å‘é€æ•°æ®ï¼‰<br>    1.ä½¿ç”¨ç³»ç»Ÿç”¨æˆ·ï¼ˆä¸å®‰å…¨ï¼‰<br>    2.ä½¿ç”¨æ™®é€šç”¨æˆ·ï¼ˆä¼šå¯¼è‡´æƒé™ä¸è¶³æƒ…å†µï¼‰</p>
</blockquote>
<p>backupå……å½“rsyncæœåŠ¡ç«¯ï¼Œnfså……å½“å®¢æˆ·ç«¯ï¼Œé…ç½®æ­¥éª¤ï¼š</p>
<h4 id="2-4-1-æœåŠ¡ç«¯é…ç½®"><a href="#2-4-1-æœåŠ¡ç«¯é…ç½®" class="headerlink" title="2.4.1 æœåŠ¡ç«¯é…ç½®"></a>2.4.1 æœåŠ¡ç«¯é…ç½®</h4><p>è·å–é…ç½®æ–‡ä»¶è·¯å¾„</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@backup ~]# rpm -qc rsync</span><br><span class="line">	/etc/rsyncd.conf			# ä¸»é…ç½®æ–‡ä»¶</span><br><span class="line">	/etc/sysconfig/rsyncd		# é€‰é¡¹</span><br></pre></td></tr></table></figure>

<p>ç¼–è¾‘é…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/rsyncd.conf</span><br><span class="line">---------------------</span><br><span class="line">uid = rsync</span><br><span class="line">gid = rsync</span><br><span class="line">port = 873</span><br><span class="line">fake super = yes</span><br><span class="line">use chroot = no</span><br><span class="line">max connections = 200</span><br><span class="line">timeout = 600</span><br><span class="line">ignore errors</span><br><span class="line">read only = false</span><br><span class="line">list = false</span><br><span class="line">auth users = rsync_backup</span><br><span class="line">secrets file = /etc/rsync.passwd</span><br><span class="line">log file = /var/log/rsyncd.log</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####################################</span></span></span><br><span class="line">[backup]</span><br><span class="line">comment = welcome to oldboyedu backup!</span><br><span class="line">path = /backup</span><br></pre></td></tr></table></figure>

<p>é…ç½®è¯¦ç»†è§£æ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">uid = rsync                      # è¿è¡Œè¿›ç¨‹çš„ç”¨æˆ·</span><br><span class="line">gid = rsync                      # è¿è¡Œè¿›ç¨‹çš„ç”¨æˆ·ç»„</span><br><span class="line">port = 873                       # ç›‘å¬ç«¯å£</span><br><span class="line">fake super = yes                 # æ— éœ€è®©rsyncä»¥rootèº«ä»½è¿è¡Œï¼Œå…è®¸æ¥æ”¶æ–‡ä»¶çš„å®Œæ•´å±æ€§</span><br><span class="line">use chroot = no                  # ç¦é”¢æ¨é€çš„æ•°æ®è‡³æŸä¸ªç›®å½•, ä¸å…è®¸è·³å‡ºè¯¥ç›®å½•</span><br><span class="line">max connections = 200            # æœ€å¤§è¿æ¥æ•°</span><br><span class="line">timeout = 600                    # è¶…æ—¶æ—¶é—´</span><br><span class="line">ignore errors                    # å¿½ç•¥é”™è¯¯ä¿¡æ¯</span><br><span class="line">read only = false                # å¯¹å¤‡ä»½æ•°æ®å¯è¯»å†™</span><br><span class="line">list = false                     # ä¸å…è®¸æŸ¥çœ‹æ¨¡å—ä¿¡æ¯</span><br><span class="line">auth users = rsync_backup        # å®šä¹‰è™šæ‹Ÿç”¨æˆ·ï¼Œä½œä¸ºè¿æ¥è®¤è¯ç”¨æˆ·</span><br><span class="line">secrets file = /etc/rsync.passwd # å®šä¹‰rsyncæœåŠ¡ç”¨æˆ·è¿æ¥è®¤è¯å¯†ç æ–‡ä»¶è·¯å¾„</span><br><span class="line">log file = /var/log/rsyncd.log   # æ—¥å¿—æ–‡ä»¶</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####################################</span></span></span><br><span class="line">[backup]                # å®šä¹‰æ¨¡å—ä¿¡æ¯</span><br><span class="line">comment = commit        # æ¨¡å—æ³¨é‡Šä¿¡æ¯</span><br><span class="line">path = /backup          # å®šä¹‰æ¥æ”¶å¤‡ä»½æ•°æ®ç›®å½•</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºrsyncè¿›ç¨‹å¯åŠ¨æ—¶éœ€è¦ä½¿ç”¨çš„ç”¨æˆ·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@backup ~]# useradd rsync -M -s /sbin/nologin </span><br><span class="line">[root@backup ~]# id rsync</span><br><span class="line">uid=1000(rsync) gid=1000(rsync) groups=1000(rsync)</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºå¯†ç æ–‡ä»¶ï¼Œåœ¨å¯†ç æ–‡ä»¶ä¸­å†™å…¥å¯¹åº”çš„è™šæ‹Ÿç”¨æˆ·ä»¥åŠè™šæ‹Ÿç”¨æˆ·çš„å¯†ç </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/etc/rsync.passwd---ã€‹rsyncè™šæ‹Ÿç”¨æˆ·ä»¥åŠrsyncè™šæ‹Ÿç”¨æˆ·çš„å¯†ç </span><br><span class="line">[root@backup ~]# echo &quot;rsync_backup:123456&quot; &gt; /etc/rsync.passwd</span><br><span class="line">[root@backup ~]# chmod 600 /etc/rsync.passwd </span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºå­˜å‚¨å¤‡ä»½æ•°æ®çš„ç›®å½•ï¼Œå¹¶è¿›è¡Œæˆæƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@backup ~]# mkdir /backup</span><br><span class="line">[root@backup ~]# chown -R rsync.rsync /backup/</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨rsyncæœåŠ¡å¹¶åŠ å…¥å¼€æœºè‡ªå¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@backup ~]# systemctl start rsyncd.service </span><br><span class="line">[root@backup ~]# systemctl enable rsyncd</span><br></pre></td></tr></table></figure>

<p>æ£€æŸ¥rsyncçš„873ç«¯å£æ˜¯å¦å­˜åœ¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@backup ~]# netstat -lntup</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span><br><span class="line">tcp6       0      0 :::873                  :::*                    LISTEN      1269/rsync</span><br></pre></td></tr></table></figure>

<h4 id="2-4-2-å®¢æˆ·ç«¯æµ‹è¯•"><a href="#2-4-2-å®¢æˆ·ç«¯æµ‹è¯•" class="headerlink" title="2.4.2 å®¢æˆ·ç«¯æµ‹è¯•"></a>2.4.2 å®¢æˆ·ç«¯æµ‹è¯•</h4><p>æ¨é€&#x2F;etcæ–‡ä»¶å¤¹åˆ°æœåŠ¡ç«¯&#x2F;backup</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rsync -avz /etc/ rsync_backup@172.16.1.41::backup</span><br><span class="line">éœ€è¦è¾“å…¥å¯†ç </span><br></pre></td></tr></table></figure>

<p>ä»æœåŠ¡ç«¯&#x2F;backupæ‹‰å–æ–‡ä»¶åˆ°&#x2F;tmp</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rsync -avz rsync_backup@172.16.1.41::backup /tmp</span><br><span class="line">éœ€è¦è¾“å…¥å¯†ç </span><br></pre></td></tr></table></figure>

<h3 id="2-5-rsyncè¡¥å……"><a href="#2-5-rsyncè¡¥å……" class="headerlink" title="2.5 rsyncè¡¥å……"></a>2.5 rsyncè¡¥å……</h3><h4 id="2-5-1-æ— å·®å¼‚åŒæ­¥-æ…ç”¨"><a href="#2-5-1-æ— å·®å¼‚åŒæ­¥-æ…ç”¨" class="headerlink" title="2.5.1 æ— å·®å¼‚åŒæ­¥(æ…ç”¨)"></a>2.5.1 æ— å·®å¼‚åŒæ­¥(æ…ç”¨)</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æ¨é€æ–¹å¼å®ç°æ— å·®å¼‚ï¼Œä»¥å®¢æˆ·ç«¯ä¸ºå‡†ï¼Œå®¢æˆ·ç«¯æœ‰ä»€ä¹ˆæœåŠ¡ç«¯å°±æœ‰ä»€ä¹ˆ</span></span><br><span class="line">[root@nfs ~]# rsync -avz --delete /root rsync_backup@172.16.1.41::backup		</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ‹‰å–æ–¹å¼å®ç°æ— å·®å¼‚ï¼Œä»¥æœåŠ¡ç«¯ä¸ºå‡†ï¼ŒæœåŠ¡ç«¯æœ‰ä»€ä¹ˆå®¢æˆ·ç«¯å°±æœ‰ä»€ä¹ˆ</span></span><br><span class="line">[root@nfs ~]# rsync -avz --delete rsync_backup@172.16.1.41::backup /opt/</span><br></pre></td></tr></table></figure>

<h4 id="2-5-2-ä¼ è¾“é™é€Ÿ"><a href="#2-5-2-ä¼ è¾“é™é€Ÿ" class="headerlink" title="2.5.2 ä¼ è¾“é™é€Ÿ"></a>2.5.2 ä¼ è¾“é™é€Ÿ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ç”Ÿæˆå¤§æ–‡ä»¶</span></span><br><span class="line">[root@nfs ~]# dd if=/dev/zero of=./size.disk bs=1M count=500  </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é™åˆ¶ä¼ è¾“çš„é€Ÿç‡ä¸º1MB</span> </span><br><span class="line">[root@nfs ~]# rsync -avzP --bwlimit=1 ./size.disk rsync_backup@172.16.1.41::backup</span><br><span class="line">Password: </span><br><span class="line">sending incremental file list</span><br><span class="line">size.disk</span><br><span class="line">    118,358,016  22%    1.01MB/s    0:06:33</span><br></pre></td></tr></table></figure>

<h4 id="2-5-3-å–æ¶ˆæ¯æ¬¡ä¼ è¾“éœ€è¦è¾“å¯†ç "><a href="#2-5-3-å–æ¶ˆæ¯æ¬¡ä¼ è¾“éœ€è¦è¾“å¯†ç " class="headerlink" title="2.5.3 å–æ¶ˆæ¯æ¬¡ä¼ è¾“éœ€è¦è¾“å¯†ç "></a>2.5.3 å–æ¶ˆæ¯æ¬¡ä¼ è¾“éœ€è¦è¾“å¯†ç </h4><p>åœ¨å®¢æˆ·ç«¯é…ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">æ–¹å¼ä¸€ï¼š</span><br><span class="line">[root@nfs ~]# echo &quot;123456&quot; &gt; /etc/rsync.pass</span><br><span class="line">[root@nfs ~]# chmod 600 /etc/rsync.pass #ä¸Šè¯¥æ–‡ä»¶æ‰¾123456</span><br><span class="line">[root@nfs ~]# rsync -avzP --bwlimit=1 ./size.disk rsync_backup@172.16.1.41::backup --password-file=/etc/rsync.pass</span><br><span class="line"></span><br><span class="line">æ–¹å¼äºŒï¼šå†™Shellè„šæœ¬</span><br><span class="line">[root@nfs ~]# export RSYNC_PASSWORD=123456</span><br><span class="line">[root@nfs ~]# rsync -avzP ./size.disk rsync_backup@172.16.1.41::backup</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€Rsyncå¤‡ä»½æ¡ˆä¾‹"><a href="#ä¸‰ã€Rsyncå¤‡ä»½æ¡ˆä¾‹" class="headerlink" title="ä¸‰ã€Rsyncå¤‡ä»½æ¡ˆä¾‹"></a>ä¸‰ã€Rsyncå¤‡ä»½æ¡ˆä¾‹</h2><blockquote>
<p>å®¢æˆ·ç«¯éœ€æ±‚<br>1.å®¢æˆ·ç«¯æå‰å‡†å¤‡å­˜æ”¾çš„å¤‡ä»½çš„ç›®å½•ï¼Œç›®å½•è§„åˆ™å¦‚ä¸‹:&#x2F;backup&#x2F;nfs_172.16.1.31_2018-09-02<br>2.å®¢æˆ·ç«¯åœ¨æœ¬åœ°æ‰“åŒ…å¤‡ä»½(ç³»ç»Ÿé…ç½®æ–‡ä»¶ã€åº”ç”¨é…ç½®ç­‰)æ‹·è´è‡³&#x2F;backup&#x2F;nfs_172.16.1.31_2018-09-02<br>3.å®¢æˆ·ç«¯æœ€åå°†å¤‡ä»½çš„æ•°æ®è¿›è¡Œæ¨é€è‡³å¤‡ä»½æœåŠ¡å™¨<br>4.å®¢æˆ·ç«¯æ¯å¤©å‡Œæ™¨1ç‚¹å®šæ—¶æ‰§è¡Œè¯¥è„šæœ¬<br>5.å®¢æˆ·ç«¯æœ¬åœ°ä¿ç•™æœ€è¿‘7å¤©çš„æ•°æ®, é¿å…æµªè´¹ç£ç›˜ç©ºé—´</p>
<p>æœåŠ¡ç«¯éœ€æ±‚<br>1.æœåŠ¡ç«¯éƒ¨ç½²rsyncï¼Œç”¨äºæ¥æ”¶å®¢æˆ·ç«¯æ¨é€è¿‡æ¥çš„å¤‡ä»½æ•°æ®<br>2.æœåŠ¡ç«¯éœ€è¦æ¯å¤©æ ¡éªŒå®¢æˆ·ç«¯æ¨é€è¿‡æ¥çš„æ•°æ®æ˜¯å¦å®Œæ•´<br>3.æœåŠ¡ç«¯éœ€è¦æ¯å¤©æ ¡éªŒçš„ç»“æœé€šçŸ¥ç»™ç®¡ç†å‘˜<br>4.æœåŠ¡ç«¯ä»…ä¿ç•™6ä¸ªæœˆçš„å¤‡ä»½æ•°æ®,å…¶ä½™çš„å…¨éƒ¨åˆ é™¤</p>
<p>æ³¨æ„ï¼šæ‰€æœ‰æœåŠ¡å™¨çš„å¤‡ä»½ç›®å½•å¿…é¡»éƒ½ä¸º&#x2F;backup</p>
<p>1.å®¢æˆ·ç«¯å°†éœ€è¦å¤‡ä»½çš„æ–‡ä»¶æ”¾å…¥æŒ‡å®šçš„ç›®å½•ä¸­   &#x2F;backup&#x2F;nfs_172.16.1.31_2018-09-02<br>2.å®¢æˆ·ç«¯æ¯å¤©å‡Œæ™¨1ç‚¹ä½¿ç”¨rsyncå‘½ä»¤æ¨é€ä¸€æ¬¡nfs_172.16.1.31_2018-09-0<br>3.å®¢æˆ·ç«¯ä¿ç•™æœ€è¿‘7å¤©çš„æ•°æ®å³å¯</p>
</blockquote>
<h3 id="3-1-éœ€æ±‚åˆ†æ"><a href="#3-1-éœ€æ±‚åˆ†æ" class="headerlink" title="3.1 éœ€æ±‚åˆ†æ"></a>3.1 éœ€æ±‚åˆ†æ</h3><blockquote>
<p>1.æˆ‘è¦å¤‡ä»½ä»€ä¹ˆï¼Ÿ<br>&#x2F;etc&#x2F;fstab &#x2F;var&#x2F;spool&#x2F;cron&#x2F;USERNAME   &#x2F;server&#x2F;scripts</p>
<p>2.æˆ‘è¦æ€ä¹ˆå¤‡ä»½ï¼Ÿ<br>&#x2F;backup&#x2F;ä¸»æœºå_ipåœ°å€_æ—¶é—´  å‘½åçš„ç›®å½•ä¸­</p>
<p>3.æˆ‘è¦å¤‡ä»½åˆ°å“ªï¼Ÿ<br>rsyncå¤‡ä»½æœåŠ¡å™¨   172.16.1.41</p>
</blockquote>
<h4 id="3-1-1-æœåŠ¡ç«¯é…ç½®"><a href="#3-1-1-æœåŠ¡ç«¯é…ç½®" class="headerlink" title="3.1.1 æœåŠ¡ç«¯é…ç½®"></a>3.1.1 æœåŠ¡ç«¯é…ç½®</h4><p>é…ç½®é‚®ä»¶æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@backup ~]# yum install mailx -y</span><br><span class="line">[root@backup ~]# vim /etc/mail.rc</span><br><span class="line">set from=12345@qq.com</span><br><span class="line">set smtp=smtps://smtp.qq.com:465</span><br><span class="line">set smtp-auth-user=12345@qq.com</span><br><span class="line">set smtp-auth-password=xxxxxx # æˆæƒç </span><br><span class="line">set smtp-auth=login</span><br><span class="line">set ssl-verify=ignore</span><br><span class="line">set nss-config-dir=/etc/pki/nssdb/</span><br></pre></td></tr></table></figure>

<p>è„šæœ¬ç¼–å†™</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@backup ~]# mkdir /server/scripts -p</span><br><span class="line">[root@backup ~]# cat /server/scripts/check_client_data.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">1.å®šä¹‰å˜é‡</span></span><br><span class="line">PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line">SRC=/backup</span><br><span class="line">DATE=$(date +%F)</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">1.ä½¿ç”¨md5è¿›è¡Œæ ¡éªŒï¼Œå¹¶ä¿å­˜æ ¡éªŒçš„ç»“æœ</span></span><br><span class="line">md5sum -c $SRC/*_$DATE/flag_$DATE &gt; $SRC/result_$DATE</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">2.å°†ä¿å­˜çš„ç»“æœæ–‡ä»¶å‘é€ç»™ç®¡ç†å‘˜</span></span><br><span class="line">mail -s &quot;Rsync Backup $DATE&quot; 572891887@qq.com &lt;$SRC/result_$DATE</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">3.ä¿ç•™æœ€è¿‘180å¤©çš„æ•°æ®</span></span><br><span class="line">find $SRC/ -type d -mtime +180|xargs rm -rf </span><br></pre></td></tr></table></figure>

<h4 id="3-1-2-å®¢æˆ·ç«¯é…ç½®"><a href="#3-1-2-å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="3.1.2 å®¢æˆ·ç«¯é…ç½®"></a>3.1.2 å®¢æˆ·ç«¯é…ç½®</h4><p>åˆ›å»ºç›®å½•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir /backup</span><br><span class="line">mkdir -p /server/scripts/</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™å¤‡ä»½è„šæœ¬</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@nfs ~]# cat /server/scripts/client_push_data.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">1.å®šä¹‰å˜é‡</span></span><br><span class="line">PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line">SRC=/backup</span><br><span class="line">HOST=$(hostname)</span><br><span class="line">ADDR=$(ifconfig eth1|awk &#x27;NR==2 &#123;print $2&#125;&#x27;)</span><br><span class="line">DATE=$(date +%F)</span><br><span class="line">DEST=$&#123;HOST&#125;_$&#123;ADDR&#125;_$&#123;DATE&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">2.åˆ›å»ºç›®å½•</span></span><br><span class="line">[ -d $SRC/$DEST ] || mkdir -p $SRC/$DEST</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">3.å¤‡ä»½æ–‡ä»¶</span></span><br><span class="line">cd / &amp;&amp; \</span><br><span class="line">[ -f $SRC/$DEST/sys.tar.gz ] || tar czf $SRC/$DEST/sys.tar.gz etc/fstab etc/passwd &amp;&amp; \</span><br><span class="line">[ -f $SRC/$DEST/other.tar.gz ] || tar czf $SRC/$DEST/other.tar.gz var/spool/cron/ server/scripts &amp;&amp; \</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">4.ä½¿ç”¨md5æ‰“æ ‡è®°</span></span><br><span class="line">[ -f $SRC/$DEST/flag_$DATE ] || md5sum $SRC/$DEST/*.tar.gz  &gt; $SRC/$DEST/flag_$DATE </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">4.æœ¬åœ°æ¨é€åˆ°å¤‡ä»½æœåŠ¡å™¨</span></span><br><span class="line">export RSYNC_PASSWORD=123456</span><br><span class="line">rsync -avz $SRC/$DEST rsync_backup@172.16.1.41::backup</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">5.ä¿ç•™æœ¬åœ°æœ€è¿‘7å¤©çš„æ•°æ®</span></span><br><span class="line">find $SRC/ -type d -mtime +7|xargs rm -rf </span><br></pre></td></tr></table></figure>

<h4 id="3-1-3-æ•´ä½“æµ‹è¯•-è®¾ç½®å®šæ—¶ä»»åŠ¡"><a href="#3-1-3-æ•´ä½“æµ‹è¯•-è®¾ç½®å®šæ—¶ä»»åŠ¡" class="headerlink" title="3.1.3 æ•´ä½“æµ‹è¯•:è®¾ç½®å®šæ—¶ä»»åŠ¡"></a>3.1.3 æ•´ä½“æµ‹è¯•:è®¾ç½®å®šæ—¶ä»»åŠ¡</h4><p>å®¢æˆ·ç«¯æ¯ä¸¤åˆ†é’Ÿå¤‡ä»½æ¨é€ä¸€æ¬¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@nfs backup]# crontab -e</span><br><span class="line">*/2 * * * * sh /server/scripts/client_push_data.sh</span><br></pre></td></tr></table></figure>

<p>æœåŠ¡ç«¯æ¯3åˆ†é’Ÿæ ¡éªŒä¸€æ¬¡ï¼Œå¹¶å‘é€ç¡®è®¤é‚®ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@backup scripts]# crontab -e</span><br><span class="line">*/3 * * * * sh /server/scripts/check_client_data.sh</span><br></pre></td></tr></table></figure>

<h4 id="3-1-5-å¢åŠ å®¢æˆ·ç«¯æ•°é‡"><a href="#3-1-5-å¢åŠ å®¢æˆ·ç«¯æ•°é‡" class="headerlink" title="3.1.5 å¢åŠ å®¢æˆ·ç«¯æ•°é‡"></a>3.1.5 å¢åŠ å®¢æˆ·ç«¯æ•°é‡</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">å¤šåˆ›å»ºå‡ å°å®¢æˆ·ç«¯æœåŠ¡å™¨ï¼Œæµ‹è¯•</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--01-æ•´ä½“æ¶æ„è§„åˆ’</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/01-%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84%E8%A7%84%E5%88%92/</url>
    <content><![CDATA[<h2 id="ä¸€-ã€ç»¼åˆæ¶æ„è§„åˆ’"><a href="#ä¸€-ã€ç»¼åˆæ¶æ„è§„åˆ’" class="headerlink" title="ä¸€ ã€ç»¼åˆæ¶æ„è§„åˆ’"></a>ä¸€ ã€ç»¼åˆæ¶æ„è§„åˆ’</h2><blockquote>
<p>é¡¹ç›®ä¸­æ¶µç›–äº†æ¶æ„ï¼Œæ¶æ„ä¸­åˆæ¶µç›–äº†ä¸åŒçš„è§’è‰²ï¼ˆé«˜å¯ç”¨ã€è´Ÿè½½å‡è¡¡ã€webé›†ç¾¤ï¼‰<br>äº”å±‚æ¶æ„æ¨¡å‹â€“&gt; è´Ÿè½½å‡è¡¡ webæœåŠ¡ å­˜å‚¨æœåŠ¡ ç¼“å­˜æœåŠ¡ æ•°æ®åº“æœåŠ¡ï¼ˆé€šè¿‡tcpè¿æ¥ï¼‰</p>
</blockquote>
<p><img src="/img/%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84%E5%9B%BE.png" alt="ç»¼åˆæ¶æ„å›¾"></p>
<h3 id="1-æ¶æ„è®¿é—®æµç¨‹"><a href="#1-æ¶æ„è®¿é—®æµç¨‹" class="headerlink" title="1 æ¶æ„è®¿é—®æµç¨‹"></a>1 æ¶æ„è®¿é—®æµç¨‹</h3><h4 id="1-1-ç”¨æˆ·è§†è§’"><a href="#1-1-ç”¨æˆ·è§†è§’" class="headerlink" title="1.1 ç”¨æˆ·è§†è§’"></a>1.1 ç”¨æˆ·è§†è§’</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1.ç”¨æˆ·é€šè¿‡æµè§ˆå™¨è¾“å…¥oldboyedu.com-&gt;å›è½¦</span><br><span class="line">2.æµè§ˆå™¨ä¼šå‘ç”Ÿä¸€æ¬¡è·³è½¬ï¼Œåˆ†æURL-&gt;ç„¶åè¿›è¡ŒDNSè§£æ-&gt;è·å–çœŸå®çš„å…¬ç½‘IPåœ°å€</span><br><span class="line">3.ç”¨æˆ·é€šè¿‡tcpçš„ä¸‰æ¬¡æ¡æ‰‹å‘èµ·è¿æ¥-&gt;çœŸå®çš„å…¬ç½‘IP</span><br><span class="line">4.è¿æ¥ä¼šé€šè¿‡å…¬ç½‘-&gt;è·¯ç”±å™¨-&gt;äº¤æ¢æœº-&gt;æŠµè¾¾å‰ç«¯çš„ç¡¬ä»¶é˜²ç«å¢™</span><br><span class="line">5.é˜²ç«å¢™æ ¹æ®è‡ªèº«è®¿é—®è§„åˆ™ï¼Œè¿›è¡ŒåŒ¹é…-&gt;å¦‚æœæ¶æ„çš„è¿æ¥åˆ™æ‹’ç»-&gt;å¦‚æœæ˜¯æ­£å¸¸çš„è¿æ¥åˆ™æ”¾è¡Œ</span><br><span class="line">6.é˜²ç«å¢™ä¼šå°†è¿æ¥è½¬å‘ç»™è´Ÿè½½å‡è¡¡å™¨-&gt;æŸ¥çœ‹ç”¨æˆ·è¯·æ±‚çš„å†…å®¹-&gt;æ ¹æ®å†…å®¹è¿›è¡Œä»»åŠ¡ä¸‹å‘-&gt;ä¸‹å‘ç»™webæœåŠ¡å™¨</span><br><span class="line">7.webæœåŠ¡æ¥æ”¶è¯·æ±‚åä¼šæ ¹æ®è¯·æ±‚è¿›è¡Œåˆ¤æ–­</span><br><span class="line">å¦‚æœæ˜¯è¯·æ±‚å›¾ç‰‡æˆ–è€…é™„ä»¶-&gt;æŸ¥æ‰¾å­˜å‚¨æœåŠ¡å™¨å­˜å‚¨çš„é™æ€èµ„æº</span><br><span class="line">å¦‚æœè¯·æ±‚çš„ç½‘ç«™ä¸Šçš„å†…å®¹-&gt;ç¼“å­˜æœåŠ¡å™¨-&gt;å¦‚æœç¼“å­˜æœåŠ¡å™¨æ²¡æœ‰-&gt;æ•°æ®åº“</span><br><span class="line">æ•°æ®åº“æŸ¥è¯¢å®Œæ•°æ®ä¹‹åä¼šè¿”å›æ•°æ®ç»™webæœåŠ¡å™¨-&gt;åŒæ—¶ä¹Ÿä¼šè¿”å›ä¸€ä»½ç»™ç¼“å­˜æœåŠ¡å™¨</span><br><span class="line">8.æ•°æ®åº“è¿”å›å†…å®¹-&gt;webæœåŠ¡å™¨-&gt;è´Ÿè½½å‡è¡¡-&gt;ç”¨æˆ·</span><br></pre></td></tr></table></figure>

<h4 id="1-2-è¿ç»´è§†è§’"><a href="#1-2-è¿ç»´è§†è§’" class="headerlink" title="1.2 è¿ç»´è§†è§’"></a>1.2 è¿ç»´è§†è§’</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1.ç”¨æˆ·é€šè¿‡å…¬ç½‘è¿æ¥ï¼ˆéš§é“ï¼‰VPNæœåŠ¡å™¨ï¼Œè¿™æ ·æ–¹ä¾¿ç®¡ç†å†…éƒ¨ä¸»æœºï¼Œ</span><br><span class="line">2.è‡ªåŠ¨åŒ–é…ç½®ç®¡ç†ï¼ŒèŠ‚çœäººåŠ›æˆæœ¬ï¼Œä¾¿äºåæœŸç»´æŠ¤ã€‚ç»Ÿä¸€ç¯å¢ƒï¼Œæ ‡å‡†åŒ–</span><br><span class="line">3.è‡ªåŠ¨åŒ–ç›‘æ§æœåŠ¡ï¼Œç›‘æ§ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€ï¼Œäº‹å‰é¢„è­¦ï¼Œäº‹åè¿½æº¯ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="2-æ¶æ„ç¯å¢ƒè§„åˆ’"><a href="#2-æ¶æ„ç¯å¢ƒè§„åˆ’" class="headerlink" title="2 æ¶æ„ç¯å¢ƒè§„åˆ’"></a>2 æ¶æ„ç¯å¢ƒè§„åˆ’</h3><h4 id="2-1-IPåˆ†é…"><a href="#2-1-IPåˆ†é…" class="headerlink" title="2.1 IPåˆ†é…"></a>2.1 IPåˆ†é…</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"> wanip         lanip       hostname</span><br><span class="line">10.0.0.5     172.16.1.5     lb01</span><br><span class="line">10.0.0.6     172.16.1.6     lb02</span><br><span class="line">10.0.0.7     172.16.1.7     web01</span><br><span class="line">10.0.0.8     172.16.1.8     web02</span><br><span class="line">10.0.0.9     172.16.1.9     web03</span><br><span class="line">10.0.0.31    172.16.1.31    nfs</span><br><span class="line">10.0.0.41    172.16.1.41    backup</span><br><span class="line">10.0.0.51    172.16.1.51    db01</span><br><span class="line">10.0.0.61    172.16.1.61    m01</span><br><span class="line">10.0.0.71    172.16.1.71    zabbix</span><br></pre></td></tr></table></figure>

<h4 id="2-2-åŸºç¡€ç¯å¢ƒå‡†å¤‡"><a href="#2-2-åŸºç¡€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2.2 åŸºç¡€ç¯å¢ƒå‡†å¤‡"></a>2.2 åŸºç¡€ç¯å¢ƒå‡†å¤‡</h4><h5 id="2-2-1-è™šæ‹Ÿæœºç³»ç»Ÿå’Œç½‘å¡å‡†å¤‡"><a href="#2-2-1-è™šæ‹Ÿæœºç³»ç»Ÿå’Œç½‘å¡å‡†å¤‡" class="headerlink" title="2.2.1 è™šæ‹Ÿæœºç³»ç»Ÿå’Œç½‘å¡å‡†å¤‡"></a>2.2.1 è™šæ‹Ÿæœºç³»ç»Ÿå’Œç½‘å¡å‡†å¤‡</h5><blockquote>
<p>å®‰è£…å…¨æ–°Centos7ç³»ç»Ÿï¼Œé…ç½®ç½‘å¡ä¸ºeth0åŠeth1å‘½åæ¨¡å¼<br>1.ç¬¬ä¸€å—ç½‘å¡ä¸ºNATæ¨¡å¼[å…¬ç½‘ç¯å¢ƒ]ï¼Œé…ç½®çš„ç½‘æ®µä¸º10.0.0.0ç½‘æ®µ<br>2.ç¬¬äºŒå—ç½‘å¡ä¸ºLANæ¨¡å¼[ç§ç½‘ç¯å¢ƒ]ï¼Œé…ç½®çš„ç½‘æ®µä¸º172.16.1.0ç½‘æ®µ<br>3.ä¼˜åŒ–å®‰è£…å¥½çš„Centos7è™šæ‹Ÿæœºï¼Œå®‰è£…å¸¸ç”¨è½¯ä»¶ã€å…³é—­é˜²ç«å¢™ç­‰ç­‰</p>
</blockquote>
<p>ä¼˜åŒ–æ­¥éª¤</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1.é…ç½®yumä»“åº“</span></span><br><span class="line">rm -f /etc/yum.repos.d/*</span><br><span class="line">curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.å®‰è£…åŸºç¡€è½¯ä»¶åŒ…</span></span><br><span class="line">yum install net-tools vim tree htop iftop \</span><br><span class="line">iotop lrzsz sl wget unzip telnet nmap nc psmisc \</span><br><span class="line">dos2unix bash-completion bash-completion-extra sysstat \</span><br><span class="line">rsync nfs-utils httpd-tools -y</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3.å…³é—­é˜²ç«å¢™firewalld</span></span><br><span class="line">systemctl disable firewalld</span><br><span class="line">systemctl stop firewalld</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4.å…³é—­selinux</span></span><br><span class="line">sed -i &#x27;/^SELINUX=/c SELINUX=disabled&#x27; /etc/selinux/config</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5.è°ƒæ•´å•ä¸ªè¿›ç¨‹æœ€å¤§èƒ½æ‰“å¼€æ–‡ä»¶çš„æ•°é‡</span></span><br><span class="line">echo &#x27;* - nofile 65535&#x27; &gt;&gt; /etc/security/limits.conf</span><br></pre></td></tr></table></figure>

<p>åŸºäºä¼˜åŒ–åçš„è™šæ‹Ÿæœºè¿›è¡Œå…‹éš†</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1.è¿æ¥å…‹éš†ï¼ˆéœ€è¦ä¾èµ–äºæ¯ä½“ï¼‰</span><br><span class="line">2.å®Œæ•´å…‹éš†ï¼ˆå®Œå®Œå…¨å…¨çš„å¤åˆ¶ä¸€ä»½ï¼Œå ç”¨ç£ç›˜ç©ºé—´ï¼‰</span><br></pre></td></tr></table></figure>

<p>å¯¹æ–°å…‹éš†çš„ä¸»æœºè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1.ä¿®æ”¹ä¸»æœºå</span>  </span><br><span class="line">hostnamectl set-hostname backup</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.ä¿®æ”¹IPåœ°å€</span>  </span><br><span class="line">sed -i &#x27;s#200#41#g&#x27; /etc/sysconfig/network-scripts/ifcfg-eth[01]</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3.é‡å¯æœåŠ¡å™¨</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>Dockerç³»åˆ—(é›¶)-Dockerä»‹ç»</title>
    <url>/2021/06/28/01_%E8%BF%90%E7%BB%B4/03-Docker/Docker%E7%B3%BB%E5%88%97-%E9%9B%B6-Docker%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<h1 id="ä¸€ã€å®¹å™¨ç®€ä»‹"><a href="#ä¸€ã€å®¹å™¨ç®€ä»‹" class="headerlink" title="ä¸€ã€å®¹å™¨ç®€ä»‹"></a>ä¸€ã€å®¹å™¨ç®€ä»‹</h1><p>å®¹å™¨å°±æ˜¯åœ¨éš”ç¦»ç¯å¢ƒä¸­è¿è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Œå¦‚æœè¿›ç¨‹åœæ­¢ï¼Œå®¹å™¨å°±ä¼šé”€æ¯ã€‚</p>
<p>éš”ç¦»ç¯å¢ƒæ‹¥æœ‰è‡ªå·±çš„ç³»ç»Ÿæ–‡ä»¶ï¼Œipåœ°å€ï¼Œä¸»æœºåç­‰ã€‚</p>
<h2 id="1-1-å®¹å™¨å’Œè™šæ‹ŸåŒ–çš„åŒºåˆ«"><a href="#1-1-å®¹å™¨å’Œè™šæ‹ŸåŒ–çš„åŒºåˆ«" class="headerlink" title="1.1 å®¹å™¨å’Œè™šæ‹ŸåŒ–çš„åŒºåˆ«"></a>1.1 å®¹å™¨å’Œè™šæ‹ŸåŒ–çš„åŒºåˆ«</h2><p>KVMè™šæ‹ŸåŒ–ï¼š</p>
<p>éœ€è¦ç¡¬ä»¶çš„æ”¯æŒï¼Œéœ€è¦æ¨¡æ‹Ÿç¡¬ä»¶ï¼Œå¯ä»¥è¿è¡Œä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œå¯åŠ¨æ—¶é—´åˆ†é’Ÿçº§ï¼ˆæœ‰å¼€æœºå¯åŠ¨æµç¨‹ï¼‰</p>
<p>å¼€æœºå¯åŠ¨æµç¨‹</p>
<p>bioså¼€æœºç¡¬ä»¶è‡ªæ£€</p>
<p>æ ¹æ®biosè®¾ç½®çš„ä¼˜å…ˆå¯åŠ¨é¡¹boot</p>
<p>è¯»å–mbr&#x2F;gptå¼•å¯¼ï¼Œè¯»å–mbrç¡¬ç›˜åˆ†åŒºä¿¡æ¯ï¼Œå†…æ ¸åŠ è½½è·¯å¾„</p>
<p>åŠ è½½å†…æ ¸</p>
<p>å¯åŠ¨ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼ˆC6ï¼š&#x2F;sbin&#x2F;initï¼ŒC7ï¼šsystemdï¼‰</p>
<p>ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ</p>
<p>è¿è¡ŒæœåŠ¡</p>
<p>å®¹å™¨ï¼š</p>
<p>ä¸éœ€è¦ç¡¬ä»¶çš„æ”¯æŒï¼Œä¸éœ€è¦æ¨¡æ‹Ÿç¡¬ä»¶ï¼Œå…¬ç”¨å®¿ä¸»æœºå†…æ ¸ï¼Œå¯åŠ¨æ—¶é—´ç§’çº§ï¼ˆæ²¡æœ‰å¼€æœºå¯åŠ¨æµç¨‹ï¼‰</p>
<p>å®¹å™¨çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ç›´æ¥è¿è¡ŒæœåŠ¡ï¼ŒæŸè€—å°‘ï¼Œå¯åŠ¨å¿«ï¼Œæ€§èƒ½é«˜</p>
<h2 id="1-2-å®¹å™¨çš„ä¼˜ç¼ºç‚¹ï¼š"><a href="#1-2-å®¹å™¨çš„ä¼˜ç¼ºç‚¹ï¼š" class="headerlink" title="1.2 å®¹å™¨çš„ä¼˜ç¼ºç‚¹ï¼š"></a>1.2 å®¹å™¨çš„ä¼˜ç¼ºç‚¹ï¼š</h2><p>ä¼˜ç‚¹ï¼š</p>
<p>ä¸å®¿ä¸»æœºä½¿ç”¨åŒä¸€ä¸ªå†…æ ¸ï¼Œæ€§èƒ½æŸè€—å°</p>
<p>ä¸éœ€è¦æŒ‡ä»¤çº§æ¨¡æ‹Ÿ</p>
<p>å®¹å™¨å¯ä»¥å†cpuæ ¸å¿ƒçš„æœ¬åœ°è¿è¡ŒæŒ‡ä»¤ï¼Œä¸éœ€è¦ä»»ä½•ä¸“é—¨çš„è§£é‡Šæœºåˆ¶</p>
<p>é¿å…äº†å‡†è™šæ‹ŸåŒ–å’Œç³»ç»Ÿè°ƒç”¨æ›¿æ¢ä¸­çš„å¤æ‚æ€§</p>
<p>è½»é‡çº§éš”ç¦»ï¼Œåœ¨éš”ç¦»çš„åŒäº‹è¿˜æä¾›å…±äº«æœºåˆ¶ï¼Œä»¥å®ç°å®¹å™¨ä¸å®¿ä¸»æœºçš„èµ„æºå…±äº«</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>ä½¿ç”¨åŒä¸€å†…æ ¸ï¼Œå­˜åœ¨å®‰å…¨æ€§é—®é¢˜</p>
<h2 id="1-3-å®¹å™¨æŠ€æœ¯çš„å‘å±•è¿‡ç¨‹"><a href="#1-3-å®¹å™¨æŠ€æœ¯çš„å‘å±•è¿‡ç¨‹" class="headerlink" title="1.3 å®¹å™¨æŠ€æœ¯çš„å‘å±•è¿‡ç¨‹"></a>1.3 å®¹å™¨æŠ€æœ¯çš„å‘å±•è¿‡ç¨‹</h2><p>chroot â€” lxc â€”- docker</p>
<h1 id="äºŒã€Dockerå®‰è£…"><a href="#äºŒã€Dockerå®‰è£…" class="headerlink" title="äºŒã€Dockerå®‰è£…"></a>äºŒã€Dockerå®‰è£…</h1><p># æ·»åŠ dockerå®‰è£…æº </p>
<p>yum-config-manager â€“add-repo <a href="http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo">http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</a> </p>
<p>æŸ¥çœ‹æ‰€æœ‰ä»“åº“ä¸­dockerç‰ˆæœ¬ï¼Œå¹¶é€‰æ‹©ç‰¹å®šç‰ˆæœ¬å®‰è£…ï¼š(æ­¤å¤„æˆ‘ä»¬æŸ¥çœ‹ç¤¾åŒºç‰ˆ docker-ce) yum list docker-ce â€“showduplicates | sort -r # å®‰è£…docker-ce yum install docker-ce -y</p>
<h1 id="ä¸‰ã€Dockeré•œåƒçš„å¸¸ç”¨å‘½ä»¤"><a href="#ä¸‰ã€Dockeré•œåƒçš„å¸¸ç”¨å‘½ä»¤" class="headerlink" title="ä¸‰ã€Dockeré•œåƒçš„å¸¸ç”¨å‘½ä»¤"></a>ä¸‰ã€Dockeré•œåƒçš„å¸¸ç”¨å‘½ä»¤</h1><p># æœç´¢é•œåƒdocker search [é•œåƒåç§°]# æ‹‰å–é•œåƒdocker pull [åŸŸåé•œåƒåç§°]:[ç‰ˆæœ¬å·]ä¾‹å¦‚ï¼šdocker pull daocloud.io&#x2F;hzc&#x2F;alpine:3.6 # é»˜è®¤æ‹‰å–Lastestæœ€æ–°ç‰ˆPS: docker image pull &#x3D; docker pull# å¦‚ä½•æŸ¥çœ‹é•œåƒæœ‰é‚£äº›ç‰ˆæœ¬ï¼Ÿdockerhubç½‘é¡µæœç´¢ daocloud å›½å†…çš„dockhub# é•œåƒåŠ é€Ÿï¼šï¼ˆ1ï¼‰é˜¿é‡Œäº‘dockeré•œåƒåŠ é€Ÿå™¨æœåŠ¡ï¼ˆ2ï¼‰é…ç½®dockeré•œåƒåŠ é€Ÿ(æ¨è) vi &#x2F;etc&#x2F;docker&#x2F;daemon.json {   â€œregistry-mirrorsâ€:[â€œ<a href="https://registry.docker-cn.comâ€]">https://registry.docker-cn.comâ€]</a> } systemctl daemon-reload# ä¸Šä¼ é•œåƒdocker push [é•œåƒåç§°]# æŸ¥çœ‹å·²æœ‰é•œåƒdocker images &#x3D; docker image ls# å¯¼å‡ºé•œåƒdocker image save alpine:latest -o docker_alpine.tar.gz # saveè·Ÿexporté€‰å“ªä¸ªï¼Ÿéƒ½æ˜¯å¯¼å‡ºé•œåƒï¼Œä½†æ˜¯exportæ²¡å¸¦ç‰ˆæœ¬æ ‡ç­¾ï¼Œexportå¼ƒç”¨# å¯¼å…¥é•œåƒdocker image load -i docker_alpine.tar.gz # loadè·Ÿimporté€‰å“ªä¸ªï¼Ÿéƒ½æ˜¯å¯¼å…¥é•œåƒï¼Œloadå¯¹åº”saveï¼Œimportä¸å¸¦ç‰ˆæœ¬æ ‡ç­¾ï¼Œimportå¼ƒç”¨# åˆ é™¤é•œåƒdocker image rm alpine:3.6# æ„å»ºé•œåƒdocker image build# æŸ¥çœ‹æ„å»ºé•œåƒç”¨åˆ°çš„å†å²å‘½ä»¤docker image histroy# æŸ¥çœ‹é•œåƒçš„è¯¦ç»†å±æ€§docker image inspect# æ‰¹é‡åˆ é™¤é•œåƒdocker image prune# ç»™é•œåƒæ‰“æ ‡ç­¾docker image tag [é•œåƒID] oldboy:v1 # Dockerçš„å®¹å™¨ç®¡ç†1ã€æŸ¥çœ‹å®¹å™¨åˆ—è¡¨ docker container ls -a docker ps # é»˜è®¤åªæŸ¥çœ‹æ´»ç€çš„å®¹å™¨ docker ps -a # æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ docker ps -a -q # é™é»˜è¾“å‡ºï¼Œæ˜¾ç¤ºæ‰€æœ‰å®¹å™¨çš„ID docker ps -a -l docker ps -a -l â€“no-trunc # æŸ¥çœ‹å®Œæ•´å‘½ä»¤ï¼ˆä¸éšè—ï¼‰# åœæ­¢å®¹å™¨docker container stop [å®¹å™¨ID] docker container kill [å®¹å™¨ID]# æ¢å¤å®¹å™¨ docker container start ã€å®¹å™¨IDã€‘# å¯åŠ¨å®¹å™¨ docker run -d -p 80:80 nginx:latest run åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªå®¹å™¨ -d   æ”¾åœ¨åå°è¿è¡Œ -p ç«¯å£æ˜ å°„ -v æºåœ°å€(å®¿ä¸»æœº)ï¼šç›®æ ‡åœ°å€(å®¹å™¨) docker run -it â€“name centos6 centos:6.9 &#x2F;bin&#x2F;bash -it åˆ†é…äº¤äº’å¼çš„ç»ˆç«¯ â€“name åˆ¶å®šå®¹å™¨çš„åç§° &#x2F;bin&#x2F;sh å®¹å™¨æ‰§è¡Œçš„å‘½ä»¤ï¼Œæ¯ä¸ªè¿›ç¨‹é»˜è®¤æœ‰åˆå§‹æ‰§è¡Œå‘½ä»¤ï¼Œå¯ä»¥è¦†ç›–â€»è¿›å…¥å®¹å™¨ï¼ˆè°ƒè¯•ã€æ’é”™ï¼‰docker exec - it [å®¹å™¨åç§°&#x2F;ID] &#x2F;bin&#x2F;bash docker attach ã€å®¹å™¨åç§°&#x2F;IDã€‘ (ä½¿ç”¨åŒä¸€ä¸ªç»ˆç«¯)ä¸´æ—¶é€€å‡ºå®¹å™¨ï¼šctrl +på’Œctrl + qé€€å‡º# åˆ é™¤å®¹å™¨docker container rm [å®¹å™¨ID] docker rm [å®¹å™¨ID]å¦‚ä½•æ‰¹é‡åˆ é™¤å®¹å™¨ï¼šdocker rm <code>docker ps -a -q</code></p>
<p><strong>æ€»ç»“ï¼š</strong></p>
<p>dockerå®¹å™¨å†…çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼ˆåˆå§‹å‘½ä»¤ï¼‰å¿…é¡»ä¸€ç›´å¤„äºå‰å°è¿è¡Œçš„çŠ¶æ€ï¼ˆå¿…é¡»å¤¯ä½ï¼‰ï¼Œå¦åˆ™è¿™ä¸ªå®¹å™¨ï¼Œå°±ä¼šå¤„äºé€€å‡ºçŠ¶æ€ã€‚</p>
<p>ä¸šåŠ¡åœ¨å®¹å™¨ä¸­è¿è¡Œï¼šå‰å°è¿è¡Œå¤¯ä½ï¼Œå¯åŠ¨æœåŠ¡</p>
<h1 id="å››ã€-Dockerçš„ç½‘ç»œè®¿é—®"><a href="#å››ã€-Dockerçš„ç½‘ç»œè®¿é—®" class="headerlink" title="å››ã€ Dockerçš„ç½‘ç»œè®¿é—®"></a>å››ã€ Dockerçš„ç½‘ç»œè®¿é—®</h1><h2 id="4-1-å®¹å™¨ç½‘ç»œè®¿é—®æµç¨‹"><a href="#4-1-å®¹å™¨ç½‘ç»œè®¿é—®æµç¨‹" class="headerlink" title="4.1 å®¹å™¨ç½‘ç»œè®¿é—®æµç¨‹"></a>4.1 å®¹å™¨ç½‘ç»œè®¿é—®æµç¨‹</h2><p>å®é™…ä¸Šæ˜¯ç«¯å£æ˜ å°„ï¼Œdockerå®¹å™¨æœ‰è‡ªå·±çš„ipï¼Œéœ€è¦é å®¿ä¸»æœºNATä¸Šç½‘ </p>
<p> -pè®¾ç½®è‡ªåŠ¨ç«¯å£æ˜ å°„ï¼Œåœ¨iptablesä¸­æœ‰å¢çš„Chain Docker, ä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½®NAT</p>
<p>æŸ¥çœ‹å½“å‰è®¾ç½®çš„natï¼šiptables -t nat -L -n</p>
<h2 id="4-2-å®¹å™¨ç½‘ç»œè®¿é—®æ³¨æ„äº‹é¡¹ï¼š"><a href="#4-2-å®¹å™¨ç½‘ç»œè®¿é—®æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="4.2 å®¹å™¨ç½‘ç»œè®¿é—®æ³¨æ„äº‹é¡¹ï¼š"></a>4.2 å®¹å™¨ç½‘ç»œè®¿é—®æ³¨æ„äº‹é¡¹ï¼š</h2><p>sysctl -a | grep ipv4 | grep forward </p>
<p>æŸ¥çœ‹</p>
<p>net.ipv4.ip_forward &#x3D; 1 # ä¸º1æ—¶ï¼Œdockerå®¹å™¨æ‰èƒ½ä¸Šç½‘ï¼Œè™šæ‹ŸæœºæŒ‚èµ·å°†ä½¿ä»–å˜æˆ0</p>
<p>è§£å†³æ–¹æ³•:</p>
<p>1ã€sysctl net.ipv4.ip_forward &#x3D; 1 è®¾ç½®ä¸º1</p>
<p>2ã€ä¸è¦æŒ‚èµ·è™šæ‹Ÿæœºï¼Œç›´æ¥å…³æœºé‡å¯ï¼ŒdockeræœåŠ¡åœ¨å¯åŠ¨æ—¶ä¼šå°†å®ƒæ”¹ä¸º1</p>
<h2 id="4-3-æŒ‡å®šæ˜ å°„-p-å‚æ•°è¯¦è§£"><a href="#4-3-æŒ‡å®šæ˜ å°„-p-å‚æ•°è¯¦è§£" class="headerlink" title="4.3 æŒ‡å®šæ˜ å°„(-p)å‚æ•°è¯¦è§£"></a>4.3 æŒ‡å®šæ˜ å°„(-p)å‚æ•°è¯¦è§£</h2><p>-p hostPort:containerPort # æŒ‡å®šç«¯å£ -p ip:hostPort:containerPort # æŒ‡å®šip+ç«¯å£ -p ip::containerPort # æŒ‡å®šéšæœºç«¯å£ -p 10.0.0.100:53:udp # æŒ‡å®šéšæœºç«¯å£ + udp -p hostPort:containerPort -p hostPort:containerPort # æŒ‡å®šå¤šä¸ªç«¯å£</p>
<h1 id="äº”ã€å®¹å™¨çš„æ•°æ®å·æŒ‚è½½"><a href="#äº”ã€å®¹å™¨çš„æ•°æ®å·æŒ‚è½½" class="headerlink" title="äº”ã€å®¹å™¨çš„æ•°æ®å·æŒ‚è½½"></a>äº”ã€å®¹å™¨çš„æ•°æ®å·æŒ‚è½½</h1><h2 id="5-1-ä¸´æ—¶æŒ‚è½½"><a href="#5-1-ä¸´æ—¶æŒ‚è½½" class="headerlink" title="5.1 ä¸´æ—¶æŒ‚è½½"></a>5.1 ä¸´æ—¶æŒ‚è½½</h2><p># å°†&#x2F;opt&#x2F;xiaoniaoç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„htmlç›®å½• docker run -d -p 80:80 -v &#x2F;opt&#x2F;xiaoniao:&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html nginx:latest</p>
<h2 id="5-2-æŒä¹…åŒ–æŒ‚è½½"><a href="#5-2-æŒä¹…åŒ–æŒ‚è½½" class="headerlink" title="5.2 æŒä¹…åŒ–æŒ‚è½½"></a>5.2 æŒä¹…åŒ–æŒ‚è½½</h2><p>å®¹å™¨è¢«åˆ é™¤ï¼Œåˆ›å»ºçš„å·å¯ä»¥ä¿ç•™ï¼Œå¯ä»¥å†æ¬¡æŒ‚è½½åˆ°æ–°å»ºçš„å®¹å™¨ä¸­</p>
<p># åˆ›å»ºåä¸ºoldboyçš„å®¹å™¨å·å¹¶æŒ‚è½½åˆ°å®¹å™¨htmlç›®å½• docker run -d -p 80:80 -v oldboy:&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html nginx:latest # æŸ¥çœ‹å½“å‰æœ‰å“ªäº›å®¹å™¨å· docker volume ls # æŸ¥çœ‹åä¸ºoldboyçš„å·çš„ä¿¡æ¯ docker volume inspect oldboy # PSï¼šåˆ é™¤å®¹å™¨å¹¶åˆ é™¤å·ï¼Œæ— æ³•å°†å·åˆ é™¤ docker rm -f -v [å®¹å™¨ID]   -v â€“volume</p>
<h1 id="å…­ã€å°æ¡ˆä¾‹ç»ƒä¹ "><a href="#å…­ã€å°æ¡ˆä¾‹ç»ƒä¹ " class="headerlink" title="å…­ã€å°æ¡ˆä¾‹ç»ƒä¹ "></a>å…­ã€å°æ¡ˆä¾‹ç»ƒä¹ </h1><p>&gt;&gt; åŸºäºNginxå¤šç«¯ç‚¹çš„å¤šç«™ç‚¹ åŸºäºnginxå¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œç›‘å¬80å’Œ81ï¼Œè®¿é—®80ï¼Œå‡ºç°nginxé»˜è®¤çš„æ¬¢è¿é¦–é¡µï¼Œè®¿é—®81ï¼Œå‡ºç°å°é¸Ÿé¡µé¢ã€‚</p>
<h1 id="ä¸ƒã€å¦‚ä½•åˆ¶ä½œDockeré•œåƒ"><a href="#ä¸ƒã€å¦‚ä½•åˆ¶ä½œDockeré•œåƒ" class="headerlink" title="ä¸ƒã€å¦‚ä½•åˆ¶ä½œDockeré•œåƒ"></a>ä¸ƒã€å¦‚ä½•åˆ¶ä½œDockeré•œåƒ</h1><h2 id="7-1-å¯åŠ¨ä¸€ä¸ªåŸºç¡€çš„å®¹å™¨"><a href="#7-1-å¯åŠ¨ä¸€ä¸ªåŸºç¡€çš„å®¹å™¨" class="headerlink" title="7.1 å¯åŠ¨ä¸€ä¸ªåŸºç¡€çš„å®¹å™¨"></a>7.1 å¯åŠ¨ä¸€ä¸ªåŸºç¡€çš„å®¹å™¨</h2><p>docker run -it centos:6.9 # yum docker run -it alpine:3.9 # apk</p>
<h2 id="7-2-å®¹å™¨ä¸­å®‰è£…æœåŠ¡"><a href="#7-2-å®¹å™¨ä¸­å®‰è£…æœåŠ¡" class="headerlink" title="7.2 å®¹å™¨ä¸­å®‰è£…æœåŠ¡"></a>7.2 å®¹å™¨ä¸­å®‰è£…æœåŠ¡</h2><p># dnsé‡å®šå‘ echo â€˜192.168.15.84 mirrors.aliyun.comâ€™ &gt;&gt; &#x2F;etc&#x2F;hosts # æ›¿æ¢æºä¸ºé˜¿é‡Œæº curl -o &#x2F;etc&#x2F;yum.repo.d&#x2F;CentOS-Base.repo <a href="https://mirrors.aliyun.com/repo/CentOS-6.repo">https://mirrors.aliyun.com/repo/CentOS-6.repo</a> # å®‰è£…å¹¶å¯åŠ¨opensshæœåŠ¡ yum install openssh-server -y service opensshd restart # ä¿®æ”¹rootå¯†ç  echo â€˜123456â€™ | passwd â€“stdin root æˆ–è€… echo 123456:root | chpassw</p>
<p>7.3 æŠŠå·²ç»å®‰è£…æœåŠ¡çš„å®¹å™¨æ‰“åŒ…æˆé•œåƒ</p>
<p>docker contanier commit 5617e5d123432 centos6.9_ssh:v1</p>
<h2 id="7-4-æµ‹è¯•é•œåƒçš„åŠŸèƒ½"><a href="#7-4-æµ‹è¯•é•œåƒçš„åŠŸèƒ½" class="headerlink" title="7.4 æµ‹è¯•é•œåƒçš„åŠŸèƒ½"></a>7.4 æµ‹è¯•é•œåƒçš„åŠŸèƒ½</h2><p># ä½¿ç”¨é•œåƒå¯åŠ¨ä¸€ä¸ªæ–°å®¹å™¨,å¹¶å¼€å¯sshæœåŠ¡ docker run -d -p 1022:22 centos6.9_ssh:v1 tail -f &#x2F;usr&#x2F;sbin&#x2F;sshd -D</p>
<h2 id="7-5-åˆ›å»ºä¸€ä¸ªssh-nginxåŒæœåŠ¡çš„é•œåƒ"><a href="#7-5-åˆ›å»ºä¸€ä¸ªssh-nginxåŒæœåŠ¡çš„é•œåƒ" class="headerlink" title="7.5 åˆ›å»ºä¸€ä¸ªssh + nginxåŒæœåŠ¡çš„é•œåƒ"></a>7.5 åˆ›å»ºä¸€ä¸ªssh + nginxåŒæœåŠ¡çš„é•œåƒ</h2><p>(1) å¯åŠ¨ä¸€ä¸ªåŸºç¡€å®¹å™¨ docker yun -it -p 80:80 -p 1023:22 centos6.9_ssh:v1 &#x2F;bin&#x2F;bash (2) åœ¨å®¹å™¨ä¸­å®‰è£…æœåŠ¡(hostsä¸repoæºåœ¨æ–°å®¹å™¨ä¼šé‡æ–°æŒ‚è½½) # dnsé‡å®šå‘ echo â€˜192.168.15.84 mirrors.aliyun.comâ€™ &gt;&gt; &#x2F;etc&#x2F;hosts # æ›¿æ¢æºä¸ºé˜¿é‡Œæº curl -o &#x2F;etc&#x2F;yum.repo.d&#x2F;epel.repo <a href="https://mirrors.aliyun.com/repo/epel.repo">https://mirrors.aliyun.com/repo/epel.repo</a> # å®‰è£…nginxæœåŠ¡ yum install nginx -y (3) æŠŠå·²ç»å®‰è£…å¥½æœåŠ¡çš„å®¹å™¨ï¼Œæäº¤ä¸ºé•œåƒ docker commit e6a6dsa6 centos6.9_ssh_nginx:v2 (4) æµ‹è¯•é•œåƒåŠŸèƒ½ vim init.sh &gt;&gt;&gt;&gt;&gt; #!&#x2F;bin&#x2F;bash service sshd restart nginx -g â€˜daemon off;â€™ &gt;&gt;&gt;&gt;&gt; # å¯åŠ¨é•œåƒï¼Œæ‰§è¡Œè„šæœ¬ï¼šå¼€å¯æœåŠ¡ï¼Œå¹¶å¤¯ä½ docker run -d -p 1025:22 -p 80:80 centos6.9_ssh_nginx:v2 &#x2F;bin&#x2F;bash &#x2F;init.sh</p>
<h3 id="7-6-è‡ªå®šä¹‰å®¹å™¨é•œåƒçš„å¯†ç "><a href="#7-6-è‡ªå®šä¹‰å®¹å™¨é•œåƒçš„å¯†ç " class="headerlink" title="7.6 è‡ªå®šä¹‰å®¹å™¨é•œåƒçš„å¯†ç "></a>7.6 è‡ªå®šä¹‰å®¹å™¨é•œåƒçš„å¯†ç </h3><p># ä¿®æ”¹è„šæœ¬ï¼Œæ·»åŠ å¯†ç ç›¸å…³çš„è„šæœ¬è¡Œï¼Œè§å³å›¾ vim init.sh # å¯åŠ¨å®¹å™¨ï¼Œå¹¶é™„å¸¦ç¯å¢ƒå˜é‡ docker run -d -p 1025:22 -p 80:80 -e â€œSSH_PWD&#x3D;123456â€ centos6.9_ssh_nginx:v2 &#x2F;bin&#x2F;bash &#x2F;init.sh</p>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="7-7-ä½œä¸š"><a href="#7-7-ä½œä¸š" class="headerlink" title="7.7 ä½œä¸š"></a>7.7 ä½œä¸š</h3><p>åˆ¶ä½œåŸºäºcentos6çš„lnmpæ¶æ„çš„é•œåƒï¼Œdiscuzè®ºå›</p>
<p>æ€ä¹ˆå¤¯ä½ï¼Ÿ</p>
<p>å¯åŠ¨æ‰€æœ‰éœ€è¦çš„æœåŠ¡</p>
<p>æœ€åtail -F (å¤§Fæ— è®ºæ–‡ä»¶æœ‰æ²¡æœ‰) </p>
<h1 id="-1"><a href="#-1" class="headerlink" title=""></a></h1><h1 id="å…«ã€Dockfileçš„ä½¿ç”¨"><a href="#å…«ã€Dockfileçš„ä½¿ç”¨" class="headerlink" title="å…«ã€Dockfileçš„ä½¿ç”¨"></a>å…«ã€Dockfileçš„ä½¿ç”¨</h1><p>å‘å¸ƒé•œåƒå¤ªå¤§äº†ï¼Œè€Œdockerfileåªæœ‰å‡ kbï¼Œä½¿ç”¨dockfileæ–‡ä»¶å¯ä»¥æ„å»ºå‡ºç›¸åŒçš„é•œåƒï¼Œ</p>
<h2 id="8-1-ä½¿ç”¨dockfileè‡ªåŠ¨æ„å»ºé•œåƒ"><a href="#8-1-ä½¿ç”¨dockfileè‡ªåŠ¨æ„å»ºé•œåƒ" class="headerlink" title="8.1 ä½¿ç”¨dockfileè‡ªåŠ¨æ„å»ºé•œåƒ"></a>8.1 ä½¿ç”¨dockfileè‡ªåŠ¨æ„å»ºé•œåƒ</h2><p>è‡ªåŠ¨æ„å»ºé•œåƒçš„æ­¥éª¤ï¼š</p>
<p>1ã€æ‰‹åŠ¨æ„å»ºä¸€é</p>
<p>2ã€å‚è€ƒå†å²å‘½ä»¤ï¼Œç¼–å†™dockerfile</p>
<p>3ã€æ„å»ºé•œåƒ</p>
<p>dockerfile build -t centos6.9_ssh .</p>
<p>4ã€æµ‹è¯•</p>
<h2 id="8-2-Dockerfileå¸¸ç”¨å‘½ä»¤è¯¦è§£"><a href="#8-2-Dockerfileå¸¸ç”¨å‘½ä»¤è¯¦è§£" class="headerlink" title="8.2 Dockerfileå¸¸ç”¨å‘½ä»¤è¯¦è§£"></a>8.2 Dockerfileå¸¸ç”¨å‘½ä»¤è¯¦è§£</h2>]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸‰ï¼‰Docker</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--04--Sersyncå®æ—¶å¤‡ä»½</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/04-sersync%E5%AE%9E%E6%97%B6%E5%90%8C%E6%AD%A5%E5%A4%87%E4%BB%BD/</url>
    <content><![CDATA[<h2 id="ä¸€ã€SersyncæœåŠ¡ä»‹ç»"><a href="#ä¸€ã€SersyncæœåŠ¡ä»‹ç»" class="headerlink" title="ä¸€ã€SersyncæœåŠ¡ä»‹ç»"></a>ä¸€ã€SersyncæœåŠ¡ä»‹ç»</h2><blockquote>
</blockquote>
<h3 id="1-ä¸ºä»€ä¹ˆè¦ç”¨sersync"><a href="#1-ä¸ºä»€ä¹ˆè¦ç”¨sersync" class="headerlink" title="1 ä¸ºä»€ä¹ˆè¦ç”¨sersync"></a>1 ä¸ºä»€ä¹ˆè¦ç”¨sersync</h3><ul>
<li>sersyncæ˜¯åŸºäºinotifyå¼€å‘çš„ï¼Œç±»ä¼¼äºinotify-toolsçš„å·¥å…·</li>
<li>sersyncå¯ä»¥è®°å½•ä¸‹è¢«ç›‘å¬ç›®å½•ä¸­å‘ç”Ÿå˜åŒ–çš„ï¼ˆåŒ…æ‹¬å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ï¼‰å…·ä½“æŸä¸€ä¸ªæ–‡ä»¶æˆ–è€…æŸä¸€ä¸ªç›®å½•çš„åå­—ï¼Œç„¶åä½¿ç”¨rsyncåŒæ­¥çš„æ—¶å€™ï¼ŒåªåŒæ­¥å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶æˆ–è€…ç›®å½•</li>
<li>å› ä¸ºæœåŠ¡å¼‚å¸¸å¯¼è‡´çš„åŒæ­¥å¤±è´¥æœ‰è®°å½•ï¼Œä¾¿äºæ¢å¤ï¼Œç¡®ä¿é«˜å¯ç”¨ï¼</li>
</ul>
<h3 id="2-rsync-inotify-toolsä¸rsync-sersyncæ¶æ„çš„åŒºåˆ«ï¼Ÿ"><a href="#2-rsync-inotify-toolsä¸rsync-sersyncæ¶æ„çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="2 rsync+inotify-toolsä¸rsync+sersyncæ¶æ„çš„åŒºåˆ«ï¼Ÿ"></a>2 rsync+inotify-toolsä¸rsync+sersyncæ¶æ„çš„åŒºåˆ«ï¼Ÿ</h3><ul>
<li><p>rsync+inotify-tools</p>
<p>aã€inotifyåªèƒ½è®°å½•ä¸‹è¢«ç›‘å¬çš„ç›®å½•å‘ç”Ÿäº†å˜åŒ–ï¼ˆå¢ï¼Œåˆ ï¼Œæ”¹ï¼‰å¹¶æ²¡æœ‰æŠŠå…·ä½“æ˜¯å“ªä¸ªæ–‡ä»¶æˆ–è€…å“ªä¸ªç›®å½•å‘ç”Ÿäº†å˜åŒ–è®°å½•ä¸‹æ¥ï¼›</p>
<p>bã€rsyncåœ¨åŒæ­¥çš„æ—¶å€™ï¼Œå¹¶ä¸çŸ¥é“å…·ä½“æ˜¯å“ªä¸ªæ–‡ä»¶æˆ–ç›®å½•å‘ç”Ÿäº†å˜åŒ–ï¼Œæ¯æ¬¡éƒ½æ˜¯å¯¹æ•´ä¸ªç›®å½•è¿›è¡ŒåŒæ­¥ï¼Œå½“æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œæ•´ä¸ªç›®å½•åŒæ­¥éå¸¸è€—æ—¶ï¼ˆrsyncè¦å¯¹æ•´ä¸ªç›®å½•éå†æŸ¥æ‰¾å¯¹æ¯”æ–‡ä»¶ï¼‰ï¼Œå› æ­¤æ•ˆç‡å¾ˆä½</p>
</li>
<li><p>rsync+sersync</p>
<p>aã€sersyncå¯ä»¥è®°å½•è¢«ç›‘å¬ç›®å½•ä¸­å‘ç”Ÿå˜åŒ–çš„ï¼ˆå¢ï¼Œåˆ ï¼Œæ”¹ï¼‰å…·ä½“æŸä¸ªæ–‡ä»¶æˆ–ç›®å½•çš„åå­—ï¼›</p>
<p>bã€rsyncåœ¨åŒæ­¥æ—¶ï¼ŒåªåŒæ­¥å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶æˆ–ç›®å½•ï¼ˆæ¯æ¬¡å‘ç”Ÿå˜åŒ–çš„æ•°æ®ç›¸å¯¹æ•´ä¸ªåŒæ­¥ç›®å½•æ•°æ®æ¥è¯´å¾ˆå°ï¼Œrsyncåœ¨éå†æŸ¥æ‰¾å¯¹æ¯”æ–‡ä»¶æ—¶ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼‰ï¼Œå› æ­¤æ•ˆç‡å¾ˆé«˜ã€‚</p>
</li>
</ul>
<h2 id="äºŒã€åŒæ­¥è¿‡ç¨‹å’ŒåŸç†"><a href="#äºŒã€åŒæ­¥è¿‡ç¨‹å’ŒåŸç†" class="headerlink" title="äºŒã€åŒæ­¥è¿‡ç¨‹å’ŒåŸç†"></a>äºŒã€åŒæ­¥è¿‡ç¨‹å’ŒåŸç†</h2><h3 id="1-åŒæ­¥è¿‡ç¨‹"><a href="#1-åŒæ­¥è¿‡ç¨‹" class="headerlink" title="1 åŒæ­¥è¿‡ç¨‹"></a>1 åŒæ­¥è¿‡ç¨‹</h3><ol>
<li>åœ¨åŒæ­¥æœåŠ¡å™¨ä¸Šå¼€å¯sersyncæœåŠ¡ï¼Œsersyncè´Ÿè´£ç›‘æ§é…ç½®è·¯å¾„ä¸­çš„æ–‡ä»¶ç³»ç»Ÿäº‹ä»¶å˜åŒ–</li>
<li>è°ƒç”¨rsyncå‘½ä»¤æŠŠæ›´æ–°çš„æ–‡ä»¶åŒæ­¥åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼›</li>
<li>éœ€è¦åœ¨ä¸»æœåŠ¡å™¨é…ç½®sersyncï¼Œåœ¨åŒæ­¥ç›®æ ‡æœåŠ¡å™¨é…ç½®rsync serverï¼ˆæ³¨æ„ï¼šæ˜¯rsyncæœåŠ¡</li>
</ol>
<h3 id="2-åŒæ­¥åŸç†"><a href="#2-åŒæ­¥åŸç†" class="headerlink" title="2 åŒæ­¥åŸç†"></a>2 åŒæ­¥åŸç†</h3><ol>
<li>ç”¨æˆ·å®æ—¶çš„å¾€sersyncæœåŠ¡å™¨ä¸Šå†™å…¥æ›´æ–°æ–‡ä»¶æ•°æ®ï¼›</li>
<li>æ­¤æ—¶éœ€è¦åœ¨åŒæ­¥ä¸»æœåŠ¡å™¨ä¸Šé…ç½®sersyncæœåŠ¡ï¼›</li>
<li>åœ¨å¦ä¸€å°æœåŠ¡å™¨å¼€å¯rsyncå®ˆæŠ¤è¿›ç¨‹æœåŠ¡ï¼Œä»¥åŒæ­¥æ‹‰å–æ¥è‡ªsersyncæœåŠ¡å™¨ä¸Šçš„æ•°æ®ï¼›</li>
</ol>
<blockquote>
<p>é€šè¿‡rsyncçš„å®ˆæŠ¤è¿›ç¨‹æœåŠ¡åå¯ä»¥å‘ç°ï¼Œå®é™…ä¸Šsersyncå°±æ˜¯ç›‘æ§æœ¬åœ°çš„æ•°æ®å†™å…¥æˆ–æ›´æ–°äº‹ä»¶ï¼›ç„¶åï¼Œå†è°ƒç”¨rsyncå®¢æˆ·ç«¯çš„å‘½ä»¤ï¼Œå°†å†™å…¥æˆ–æ›´æ–°äº‹ä»¶å¯¹åº”çš„æ–‡ä»¶é€šè¿‡rsyncæ¨é€åˆ°ç›®æ ‡æœåŠ¡å™¨ã€‚</p>
</blockquote>
<h2 id="ä¸‰ã€æ¡ˆä¾‹"><a href="#ä¸‰ã€æ¡ˆä¾‹" class="headerlink" title="ä¸‰ã€æ¡ˆä¾‹"></a>ä¸‰ã€æ¡ˆä¾‹</h2><blockquote>
<p>æ¡ˆä¾‹: å®ç°webä¸Šä¼ è§†é¢‘æ–‡ä»¶ï¼Œå®åˆ™æ˜¯å†™å…¥NFSè‡³å­˜å‚¨ï¼Œå½“NFSå­˜åœ¨æ–°çš„æ•°æ®åˆ™ä¼šå®æ—¶çš„å¤åˆ¶åˆ°å¤‡ä»½æœåŠ¡å™¨</p>
</blockquote>
<table>
<thead>
<tr>
<th>è§’è‰²</th>
<th>å†…ç½‘IP(LAN)</th>
<th>å¤–ç½‘IP(NAT)</th>
<th>å®‰è£…å·¥å…·</th>
</tr>
</thead>
<tbody><tr>
<td>web01</td>
<td>eth1:172.16.1.7</td>
<td>eth0:10.0.0.7</td>
<td>httpd php</td>
</tr>
<tr>
<td>nfs-server</td>
<td>eth1:172.16.1.31</td>
<td>eth0:10.0.0.31</td>
<td>nfsServerã€rsync+inotify+sersync</td>
</tr>
<tr>
<td>backup</td>
<td>eth1:172.16.1.41</td>
<td>eth0:10.0.0.41</td>
<td>rsync-server</td>
</tr>
</tbody></table>
<p><img src="/img/sersync%E6%B5%81%E7%A8%8B-1628145534424.png" alt="sersyncæµç¨‹"></p>
<h3 id="1-webä¸Šä¼ è§†é¢‘è‡³nfså­˜å‚¨"><a href="#1-webä¸Šä¼ è§†é¢‘è‡³nfså­˜å‚¨" class="headerlink" title="1 webä¸Šä¼ è§†é¢‘è‡³nfså­˜å‚¨"></a>1 webä¸Šä¼ è§†é¢‘è‡³nfså­˜å‚¨</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nfså­˜å‚¨æœåŠ¡  172.16.1.31</span><br><span class="line">	1.å®‰è£…</span><br><span class="line">		[root@nfs ~]# yum install nfs-utils -y</span><br><span class="line">	2.é…ç½®</span><br><span class="line">		[root@nfs ~]# cat /etc/exports</span><br><span class="line">		/data 172.16.1.0/24(rw,sync,all_squash,anonuid=666,anongid=666)</span><br><span class="line">		</span><br><span class="line">		[root@nfs ~]# groupadd -g666 www</span><br><span class="line">		[root@nfs ~]# useradd -u666 -g666 www</span><br><span class="line">		</span><br><span class="line">		[root@nfs ~]# mkdir /data</span><br><span class="line">		[root@nfs ~]# chown -R www.www /data</span><br><span class="line">		</span><br><span class="line">	3.å¯åŠ¨</span><br><span class="line">		[root@nfs ~]# systemctl restart nfs-server</span><br><span class="line">		[root@nfs ~]# sysytemctl enable nfs-server</span><br><span class="line">		</span><br><span class="line">webæœåŠ¡å™¨æ“ä½œï¼š172.16.1.7</span><br><span class="line">	1.å®‰è£…</span><br><span class="line">		[root@web01 ~]# yum install httpd php -y</span><br><span class="line">	2.é…ç½®</span><br><span class="line">		è¿›ç¨‹è¿è¡Œçš„èº«ä»½ï¼ˆæœ€å¥½æ˜¯å’Œnfsçš„åŒ¿åç”¨æˆ·ä¿æŒä¸€è‡´ï¼‰</span><br><span class="line"><span class="meta">			#</span><span class="bash"> sed c åŒ¹é…åˆ°Userå¼€å¤´çš„å­—æ®µï¼Œæ›¿æ¢ä¸ºUser www</span></span><br><span class="line">			[root@web01 html]# sed -i &#x27;/^User/c User www&#x27; /etc/httpd/conf/httpd.conf 	</span><br><span class="line">			[root@web01 html]# sed -i &#x27;/^Group/c Group www&#x27; /etc/httpd/conf/httpd.conf</span><br><span class="line">		æŒ‚è½½</span><br><span class="line">			[root@web01 ~]# mount -t nfs 172.16.1.31:/data /var/www/html		#æ ¸å¿ƒ</span><br><span class="line">		ä¸Šä¼ ä»£ç </span><br><span class="line">			[root@web01 ~]# cd /var/www/html/</span><br><span class="line">			[root@web01 html]# rz kaoshi.zip</span><br><span class="line">			[root@web01 html]# unzip kaoshi.zip</span><br><span class="line">	3.å¯åŠ¨</span><br><span class="line">		[root@web01 ~]# systemctl start httpd</span><br><span class="line"></span><br><span class="line">	4.ä¿®æ”¹ä¸Šä¼ å¤§å°</span><br><span class="line">		[root@web01 ~]# vim /etc/php.iniä¸­è®¾ç½®ï¼š</span><br><span class="line">		upload_max_filesize = 200M;</span><br><span class="line">		post_max_size = 200M;</span><br><span class="line">	</span><br><span class="line">	5.æ³¨æ„: ä¿®æ”¹å®Œé…ç½®è®°å¾—é‡å¯æœåŠ¡</span><br><span class="line">	[root@web01 ~]#  systemctl restart httpd</span><br></pre></td></tr></table></figure>

<h3 id="2-webå’Œnfsçš„æ•°æ®éƒ½å¤‡ä»½åœ¨å¤‡ä»½æœåŠ¡å™¨çš„-x2F-backup"><a href="#2-webå’Œnfsçš„æ•°æ®éƒ½å¤‡ä»½åœ¨å¤‡ä»½æœåŠ¡å™¨çš„-x2F-backup" class="headerlink" title="2 webå’Œnfsçš„æ•°æ®éƒ½å¤‡ä»½åœ¨å¤‡ä»½æœåŠ¡å™¨çš„&#x2F;backup"></a>2 webå’Œnfsçš„æ•°æ®éƒ½å¤‡ä»½åœ¨å¤‡ä»½æœåŠ¡å™¨çš„&#x2F;backup</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">å¤‡ä»½æœåŠ¡å™¨æ“ä½œå¦‚ä¸‹ï¼š172.16.1.41</span><br><span class="line">	1.å®‰è£…</span><br><span class="line">		[root@backup ~]# yum install rsync -y</span><br><span class="line">	2.é…ç½®</span><br><span class="line">		[root@backup ~]# cat /etc/rsyncd.conf</span><br><span class="line">		uid = www</span><br><span class="line">		gid = www</span><br><span class="line">		port = 873</span><br><span class="line">		fake super = yes</span><br><span class="line">		use chroot = no</span><br><span class="line">		max connections = 200</span><br><span class="line">		timeout = 600</span><br><span class="line">		ignore errors</span><br><span class="line">		read only = false</span><br><span class="line">		list = true</span><br><span class="line">		auth users = rsync_backup</span><br><span class="line">		secrets file = /etc/rsync.passwd</span><br><span class="line">		log file = /var/log/rsyncd.log</span><br><span class="line"><span class="meta">		#</span><span class="bash"><span class="comment">####################################</span></span></span><br><span class="line">		[backup]</span><br><span class="line">		path = /backup</span><br><span class="line">		</span><br><span class="line">		[data]</span><br><span class="line">		path = /data</span><br><span class="line">		</span><br><span class="line">		åˆ›å»ºç”¨æˆ·</span><br><span class="line">			[root@backup ~]# groupadd -g666 www</span><br><span class="line">			[root@backup ~]# useradd -u666 -g666 www</span><br><span class="line">		</span><br><span class="line">		å‡†å¤‡è™šæ‹Ÿè¿æ¥ç”¨æˆ·è´¦å·å’Œå¯†ç </span><br><span class="line">		[root@backup ~]# cat /etc/rsync.passwd </span><br><span class="line">		rsync_backup:123456</span><br><span class="line">		[root@backup ~]# chmod 600 /etc/rsync.passwd</span><br><span class="line">		</span><br><span class="line">		åˆ›å»ºæ•°æ®å­˜æ”¾çš„ç›®å½•</span><br><span class="line">		[root@backup ~]# mkdir -p /data /backup</span><br><span class="line">		[root@backup ~]# chown -R www.www /data/ /backup/</span><br><span class="line"></span><br><span class="line">	3.å¯åŠ¨</span><br><span class="line">		[root@backup ~]# systemctl restart rsyncd</span><br><span class="line"></span><br><span class="line">	4.å®¢æˆ·ç«¯æ‰§è¡Œè„šæœ¬ã€‚æµ‹è¯•rsyncçš„å¤‡ä»½æ˜¯å¦ok   ï¼ˆå®¢æˆ·ç«¯çš„æ•°æ®éƒ½å†™å…¥åˆ°/backupç›®å½•ä¸­ï¼‰ 172.16.1.7 172.16.1.31</span><br><span class="line">	[root@web01 ~]# sh /server/scripts/client_push_data.sh </span><br><span class="line">	sending incremental file list</span><br><span class="line">	web01_172.16.1.7_2019-01-08/</span><br><span class="line">	web01_172.16.1.7_2019-01-08/flag_2019-01-08</span><br><span class="line">	web01_172.16.1.7_2019-01-08/other.tar.gz</span><br><span class="line">	web01_172.16.1.7_2019-01-08/sys.tar.gz</span><br></pre></td></tr></table></figure>

<h3 id="3-å¦‚ä½•å°†nfsçš„æ•°æ®å®æ—¶çš„åŒæ­¥åˆ°å¤‡ä»½æœåŠ¡å™¨çš„-x2F-dataç›®å½•"><a href="#3-å¦‚ä½•å°†nfsçš„æ•°æ®å®æ—¶çš„åŒæ­¥åˆ°å¤‡ä»½æœåŠ¡å™¨çš„-x2F-dataç›®å½•" class="headerlink" title="3 å¦‚ä½•å°†nfsçš„æ•°æ®å®æ—¶çš„åŒæ­¥åˆ°å¤‡ä»½æœåŠ¡å™¨çš„&#x2F;dataç›®å½•"></a>3 å¦‚ä½•å°†nfsçš„æ•°æ®å®æ—¶çš„åŒæ­¥åˆ°å¤‡ä»½æœåŠ¡å™¨çš„&#x2F;dataç›®å½•</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ç›‘æ§nfsæœåŠ¡å™¨ä¸Šé¢çš„/dataç›®å½•ï¼Œå¦‚æœå‘ç”Ÿå˜åŒ–åˆ™è§¦å‘åŠ¨ä½œï¼ŒåŠ¨ä½œå¯ä»¥æ˜¯æ‰§è¡Œä¸€æ¬¡åŒæ­¥ã€‚</span><br><span class="line">1.å®‰è£…</span><br><span class="line">	[root@nfs ~]# yum install inotify-tools		ç›‘æ§å·¥å…·</span><br><span class="line">	</span><br><span class="line">	[root@nfs ~]# rz -E sersync2.5.4_64bit_binary_stable_final.tar.gz	</span><br><span class="line">	[root@nfs ~]# tar xf sersync2.5.4_64bit_binary_stable_final.tar.gz</span><br><span class="line">	[root@nfs ~]# mv GNU-Linux-x86/ /usr/local/sersync</span><br><span class="line">2.é…ç½®</span><br><span class="line">	[root@nfs sersync]# diff confxml.xml confxml.xml.bak</span><br><span class="line">       5c5</span><br><span class="line">       &lt;     &lt;fileSystem xfs=&quot;true&quot;/&gt;</span><br><span class="line">       ---</span><br><span class="line">       &gt;     &lt;fileSystem xfs=&quot;false&quot;/&gt;</span><br><span class="line">       15c15</span><br><span class="line">       &lt;       &lt;createFile start=&quot;true&quot;/&gt;</span><br><span class="line">       ---</span><br><span class="line">       &gt;       &lt;createFile start=&quot;false&quot;/&gt;</span><br><span class="line">       19,20c19,20</span><br><span class="line">       &lt;       &lt;attrib start=&quot;true&quot;/&gt;</span><br><span class="line">       &lt;       &lt;modify start=&quot;true&quot;/&gt;</span><br><span class="line">       ---</span><br><span class="line">       &gt;       &lt;attrib start=&quot;false&quot;/&gt;</span><br><span class="line">       &gt;       &lt;modify start=&quot;false&quot;/&gt;</span><br><span class="line">       24,25c24,25</span><br><span class="line">       &lt;       &lt;localpath watch=&quot;/data&quot;&gt;</span><br><span class="line">       &lt;           &lt;remote ip=&quot;172.16.1.41&quot; name=&quot;data&quot;/&gt;</span><br><span class="line">       ---</span><br><span class="line">       &gt;       &lt;localpath watch=&quot;/opt/tongbu&quot;&gt;</span><br><span class="line">       &gt;           &lt;remote ip=&quot;127.0.0.1&quot; name=&quot;tongbu1&quot;/&gt;</span><br><span class="line">       30,31c30,31</span><br><span class="line">       &lt;           &lt;commonParams params=&quot;-az&quot;/&gt;</span><br><span class="line">       &lt;           &lt;auth start=&quot;true&quot; users=&quot;rsync_backup&quot; passwordfile=&quot;/etc/rsync.pass&quot;/&gt;</span><br><span class="line">       ---</span><br><span class="line">       &gt;           &lt;commonParams params=&quot;-artuz&quot;/&gt;</span><br><span class="line">       &gt;           &lt;auth start=&quot;false&quot; users=&quot;root&quot; passwordfile=&quot;/etc/rsync.pas&quot;/&gt;</span><br><span class="line">       33c33</span><br><span class="line">       &lt;           &lt;timeout start=&quot;true&quot; time=&quot;100&quot;/&gt;&lt;!-- timeout=100 --&gt;</span><br><span class="line">       ---</span><br><span class="line">       &gt;           &lt;timeout start=&quot;false&quot; time=&quot;100&quot;/&gt;&lt;!-- timeout=100 --&gt;</span><br><span class="line"></span><br><span class="line">	åˆ›å»ºå®¢æˆ·ç«¯å¯†ç æ–‡ä»¶</span><br><span class="line">	[root@nfs ~]# cat /etc/rsync.pass</span><br><span class="line">	123456</span><br><span class="line">	[root@nfs ~]# chmod 600 /etc/rsync.pass</span><br><span class="line"></span><br><span class="line">3.å¯åŠ¨</span><br><span class="line">[root@nfs ~]# /usr/local/sersync/sersync2  -h</span><br><span class="line">set the system param</span><br><span class="line">executeï¼šecho 50000000 &gt; /proc/sys/fs/inotify/max_user_watches</span><br><span class="line">executeï¼šecho 327679 &gt; /proc/sys/fs/inotify/max_queued_events</span><br><span class="line">parse the command param</span><br><span class="line">_______________________________________________________</span><br><span class="line">å‚æ•°-d:å¯ç”¨å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼</span><br><span class="line">å‚æ•°-r:åœ¨ç›‘æ§å‰ï¼Œå°†ç›‘æ§ç›®å½•ä¸è¿œç¨‹ä¸»æœºç”¨rsyncå‘½ä»¤æ¨é€ä¸€é</span><br><span class="line">å‚æ•°-n: æŒ‡å®šå¼€å¯å®ˆæŠ¤çº¿ç¨‹çš„æ•°é‡ï¼Œé»˜è®¤ä¸º10ä¸ª</span><br><span class="line">å‚æ•°-o:æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œé»˜è®¤ä½¿ç”¨confxml.xmlæ–‡ä»¶</span><br><span class="line">å‚æ•°-m:å•ç‹¬å¯ç”¨å…¶ä»–æ¨¡å—ï¼Œä½¿ç”¨ -m refreshCDN å¼€å¯åˆ·æ–°CDNæ¨¡å—</span><br><span class="line">å‚æ•°-m:å•ç‹¬å¯ç”¨å…¶ä»–æ¨¡å—ï¼Œä½¿ç”¨ -m socket å¼€å¯socketæ¨¡å—</span><br><span class="line">å‚æ•°-m:å•ç‹¬å¯ç”¨å…¶ä»–æ¨¡å—ï¼Œä½¿ç”¨ -m http å¼€å¯httpæ¨¡å—</span><br><span class="line">ä¸åŠ -må‚æ•°ï¼Œåˆ™é»˜è®¤æ‰§è¡ŒåŒæ­¥ç¨‹åº</span><br><span class="line"></span><br><span class="line">å¯åŠ¨</span><br><span class="line">[root@nfs ~]#  /usr/local/sersync/sersync2 -dro /usr/local/sersync/confxml.xml</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å¯åŠ¨sersyncåä¸€å®šè¦æå–åŒæ­¥çš„å‘½ä»¤ï¼Œæ‰‹åŠ¨è¿è¡Œä¸€æ¬¡ï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨é”™è¯¯</span></span><br><span class="line">[root@nfs ~]#  cd /data &amp;&amp; rsync -az -R --delete ./  --timeout=100 rsync_backup@172.16.1.41::data --password-file=/etc/rsync.pass</span><br><span class="line"></span><br><span class="line">åœæ­¢</span><br><span class="line">[root@nfs data]# pkill sersync</span><br></pre></td></tr></table></figure>

<h3 id="4-å¦‚ä½•å¹³æ»‘çš„è¿ç§»nfsæ•°æ®åˆ°backupæœåŠ¡å™¨ã€‚å¹¶ä¸”è®©åç»­çš„ä¸Šä¼ éƒ½æ˜¯ä¸Šä¼ è‡³backup-ï¼ˆä¸èƒ½å‡ºç°ä¸šåŠ¡ä¸­æ–­ï¼‰"><a href="#4-å¦‚ä½•å¹³æ»‘çš„è¿ç§»nfsæ•°æ®åˆ°backupæœåŠ¡å™¨ã€‚å¹¶ä¸”è®©åç»­çš„ä¸Šä¼ éƒ½æ˜¯ä¸Šä¼ è‡³backup-ï¼ˆä¸èƒ½å‡ºç°ä¸šåŠ¡ä¸­æ–­ï¼‰" class="headerlink" title="4 å¦‚ä½•å¹³æ»‘çš„è¿ç§»nfsæ•°æ®åˆ°backupæœåŠ¡å™¨ã€‚å¹¶ä¸”è®©åç»­çš„ä¸Šä¼ éƒ½æ˜¯ä¸Šä¼ è‡³backup   ï¼ˆä¸èƒ½å‡ºç°ä¸šåŠ¡ä¸­æ–­ï¼‰"></a>4 å¦‚ä½•å¹³æ»‘çš„è¿ç§»nfsæ•°æ®åˆ°backupæœåŠ¡å™¨ã€‚å¹¶ä¸”è®©åç»­çš„ä¸Šä¼ éƒ½æ˜¯ä¸Šä¼ è‡³backup   ï¼ˆä¸èƒ½å‡ºç°ä¸šåŠ¡ä¸­æ–­ï¼‰</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1.backupæœåŠ¡å™¨ä¸Šéœ€è¦è¿è¡Œå’ŒnfsæœåŠ¡å™¨ä¸Šä¸€æ ·çš„ä¸šåŠ¡ç¯å¢ƒ </span><br><span class="line">	åˆ›å»ºç”¨æˆ·</span><br><span class="line">	[root@backup ~]# groupadd -g 666 www</span><br><span class="line">	[root@backup ~]# useradd -u666 -g666 www</span><br><span class="line">	é…ç½®</span><br><span class="line">	[root@backup ~]# yum install -y nfs-utils -y</span><br><span class="line">	[root@backup ~]# cat /etc/exports</span><br><span class="line">	/data 172.16.1.0/24(rw,sync,all_squash,anonuid=666,anongid=666)</span><br><span class="line">	å¯åŠ¨</span><br><span class="line">	[root@backup ~]# systemctl restart nfs-server</span><br><span class="line">	</span><br><span class="line">2.å…ˆå®ç°å®æ—¶çš„åŒæ­¥ âˆš</span><br><span class="line"></span><br><span class="line">3.åœ¨webä¸Šå®ç°åˆ‡æ¢ï¼Œå¸è½½nfsçš„/dataç›®å½•ï¼Œé‡æ–°æŒ‚è½½backupæœåŠ¡çš„/dataç›®å½•</span><br><span class="line">	[root@web01 ~]# umount -lf /var/www/html/ &amp;&amp; mount -t nfs 172.16.1.41:/data /var/www/html/</span><br></pre></td></tr></table></figure>







]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--03-NFSæœåŠ¡å™¨æ­å»º</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/03-NFS%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<ul>
<li>å­¦ä¹ ç¬”è®°</li>
</ul>
<hr>
<h2 id="ä¸€ã€NFSç®€ä»‹"><a href="#ä¸€ã€NFSç®€ä»‹" class="headerlink" title="ä¸€ã€NFSç®€ä»‹"></a>ä¸€ã€NFSç®€ä»‹</h2><blockquote>
<p>NFSæ˜¯Network File Systemçš„ç¼©å†™åŠç½‘ç»œæ–‡ä»¶ç³»ç»Ÿã€‚NFSä¸»è¦åŠŸèƒ½æ˜¯é€šè¿‡å±€åŸŸç½‘ç»œè®©ä¸åŒçš„ä¸»æœºç³»ç»Ÿä¹‹é—´å¯ä»¥å…±äº«æ–‡ä»¶æˆ–ç›®å½•ã€‚<br>NFSç³»ç»Ÿå’ŒWindowsç½‘ç»œå…±äº«ã€ç½‘ç»œé©±åŠ¨å™¨ç±»ä¼¼, åªä¸è¿‡windowsç”¨äºå±€åŸŸç½‘, NFSç”¨äºä¼ä¸šé›†ç¾¤æ¶æ„ä¸­<br>å¦‚æœæ˜¯å¤§å‹ç½‘ç«™, ä¼šç”¨åˆ°æ›´å¤æ‚çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸFastDFSï¼ˆéŸ³é¢‘ã€å°è¯´ã€è§†é¢‘ï¼‰,glusterfsï¼ˆisoé•œåƒï¼‰,HDFS<br>NFSï¼ˆå›¾ç‰‡ã€ï¼‰è§£å†³å…±äº«å‰ç«¯webå…±äº«</p>
</blockquote>
<h3 id="1-1-NFSæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#1-1-NFSæœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="1.1 NFSæœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>1.1 NFSæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>è§£å†³å‰ç«¯webé™æ€èµ„æºçš„å…±äº«<br>è§£å†³å‰ç«¯webé™æ€èµ„æºä¸€è‡´æ€§<br>è§£å†³å‰ç«¯webç£ç›˜ç©ºé—´çš„æµªè´¹</p>
<h3 id="1-2-NFSçš„æ–‡ä»¶æ“ä½œæ–¹å¼"><a href="#1-2-NFSçš„æ–‡ä»¶æ“ä½œæ–¹å¼" class="headerlink" title="1.2 NFSçš„æ–‡ä»¶æ“ä½œæ–¹å¼"></a>1.2 NFSçš„æ–‡ä»¶æ“ä½œæ–¹å¼</h3><p>1.å½“ç”¨æˆ·æ‰§è¡Œmkdirå‘½ä»¤, è¯¥å‘½ä»¤ä¼šè°ƒç”¨shellè§£é‡Šå™¨ç¿»è¯‘ç»™å†…æ ¸ã€‚<br>2.å†…æ ¸è§£æå®Œæˆåä¼šé©±åŠ¨å¯¹åº”çš„ç¡¬ä»¶è®¾å¤‡ï¼Œå®Œæˆç›¸åº”çš„æ“ä½œã€‚</p>
<h3 id="1-3-NFSçš„å®ç°åŸç†"><a href="#1-3-NFSçš„å®ç°åŸç†" class="headerlink" title="1.3 NFSçš„å®ç°åŸç†"></a>1.3 NFSçš„å®ç°åŸç†</h3><p>1.ç”¨æˆ·è¿›ç¨‹è®¿é—®NFSå®¢æˆ·ç«¯ï¼Œä½¿ç”¨ä¸åŒçš„å‡½æ•°å¯¹æ•°æ®è¿›è¡Œå¤„ç†<br>2.NFSå®¢æˆ·ç«¯é€šè¿‡TCP&#x2F;IPçš„æ–¹å¼ä¼ é€’ç»™NFSæœåŠ¡ç«¯ã€‚<br>3.NFSæœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä¼šå…ˆè°ƒç”¨portmapè¿›ç¨‹è¿›è¡Œç«¯å£æ˜ å°„ã€‚<br>4.nfsdè¿›ç¨‹ç”¨äºåˆ¤æ–­NFSå®¢æˆ·ç«¯æ˜¯å¦æ‹¥æœ‰æƒé™è¿æ¥NFSæœåŠ¡ç«¯ã€‚<br>5.Rpc.mountè¿›ç¨‹åˆ¤æ–­å®¢æˆ·ç«¯æ˜¯å¦æœ‰å¯¹åº”çš„æƒé™è¿›è¡ŒéªŒè¯ã€‚<br>6.idmapè¿›ç¨‹å®ç°ç”¨æˆ·æ˜ å°„å’Œå‹ç¼©<br>7.æœ€åNFSæœåŠ¡ç«¯ä¼šå°†å¯¹åº”è¯·æ±‚çš„å‡½æ•°è½¬æ¢ä¸ºæœ¬åœ°èƒ½è¯†åˆ«çš„å‘½ä»¤ï¼Œä¼ é€’è‡³å†…æ ¸ï¼Œç”±å†…æ ¸é©±åŠ¨ç¡¬ä»¶ã€‚<br>æ³¨æ„: rpcæ˜¯ä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œé‚£ä¹ˆä½¿ç”¨nfså¿…é¡»æœ‰rpcæœåŠ¡</p>
<h3 id="1-4-NFSçš„ä¼˜ç¼ºç‚¹"><a href="#1-4-NFSçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="1.4 NFSçš„ä¼˜ç¼ºç‚¹"></a>1.4 NFSçš„ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1.NFSæ–‡ä»¶ç³»ç»Ÿç®€å•æ˜“ç”¨ã€æ–¹ä¾¿éƒ¨ç½²ã€æ•°æ®å¯é ã€æœåŠ¡ç¨³å®šã€æ»¡è¶³ä¸­å°ä¼ä¸šéœ€æ±‚ã€‚</span><br><span class="line">2.NFSæ–‡ä»¶ç³»ç»Ÿå†…å­˜æ”¾çš„æ•°æ®éƒ½åœ¨æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šï¼Œæ‰€æœ‰æ•°æ®éƒ½æ˜¯èƒ½çœ‹å¾—è§ã€‚</span><br></pre></td></tr></table></figure>

<p>ç¼ºç‚¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1.å­˜åœ¨å•ç‚¹æ•…éšœ, å¦‚æœæ„å»ºé«˜å¯ç”¨ç»´æŠ¤éº»çƒ¦</span><br><span class="line"><span class="meta">web-&gt;</span><span class="bash">nfs(sersync)-&gt;backup</span></span><br><span class="line">2.NFSæ•°æ®æ˜æ–‡, å¹¶ä¸å¯¹æ•°æ®åšä»»ä½•æ ¡éªŒã€‚</span><br><span class="line">3.å®¢æˆ·ç«¯æŒ‚è½½NFSæœåŠ¡æ²¡æœ‰å¯†ç éªŒè¯, å®‰å…¨æ€§ä¸€èˆ¬(å†…ç½‘ä½¿ç”¨)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>3.NFSåº”ç”¨å»ºè®®<br>1.ç”Ÿäº§åœºæ™¯åº”å°†é™æ€æ•°æ®å°½å¯èƒ½å¾€å‰ç«¯æ¨, å‡å°‘åç«¯å­˜å‚¨å‹åŠ›<br>2.å¿…é¡»å°†å­˜å‚¨é‡Œçš„é™æ€èµ„æºé€šè¿‡CDNç¼“å­˜jpg\png\mp4\avi\css\js<br>3.å¦‚æœæ²¡æœ‰ç¼“å­˜æˆ–æ¶æ„æœ¬èº«å†å²é—ç•™é—®é¢˜å¤ªå¤§, åœ¨å¤šå­˜å‚¨ä¹Ÿæ— ç”¨</p>
</blockquote>
<h2 id="äºŒã€NFSéƒ¨ç½²"><a href="#äºŒã€NFSéƒ¨ç½²" class="headerlink" title="äºŒã€NFSéƒ¨ç½²"></a>äºŒã€NFSéƒ¨ç½²</h2><h3 id="2-1-æœåŠ¡ç«¯"><a href="#2-1-æœåŠ¡ç«¯" class="headerlink" title="2.1 æœåŠ¡ç«¯"></a>2.1 æœåŠ¡ç«¯</h3><p>å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@nfs ~]# yum install nfs-utils -y</span><br></pre></td></tr></table></figure>

<p>é…ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@nfs ~]# cat /etc/exports</span><br><span class="line">/data 172.16.1.0/24(rw,sync,all_squash)</span><br></pre></td></tr></table></figure>

<p>æˆæƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@nfs ~]# mkdir /data</span><br><span class="line">[root@nfs ~]# chown -R nfsnobody.nfsnobody /data/</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@nfs ~]# systemctl start nfs-server</span><br><span class="line">[root@nfs ~]# systemctl enable nfs-server</span><br></pre></td></tr></table></figure>

<p>æ£€æŸ¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@nfs ~]# cat /var/lib/nfs/etab </span><br><span class="line">/data	172.16.1.0/24(rw,sync,wdelay,hide,nocrossmnt,secure,root_squash,all_squash,no_subtree_check,secure_locks,acl,no_pnfs,anonuid=65534,anongid=65534,sec=sys,rw,secure,root_squash,all_squash)</span><br></pre></td></tr></table></figure>

<h3 id="2-2-å®¢æˆ·ç«¯"><a href="#2-2-å®¢æˆ·ç«¯" class="headerlink" title="2.2 å®¢æˆ·ç«¯"></a>2.2 å®¢æˆ·ç«¯</h3><p>å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@nfs ~]# yum install nfs-utils -y</span><br></pre></td></tr></table></figure>

<p>æ£€æŸ¥nfsæ˜¯å¦æœ‰å…±äº«å†…å®¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 ~]# showmount -e 172.16.1.31</span><br><span class="line">Export list for 172.16.1.31:	</span><br><span class="line">/data 172.16.1.0/24</span><br></pre></td></tr></table></figure>

<p>æŒ‚è½½nfsç›®å½•ï¼ˆä¸´æ—¶ï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 ~]# mount -t nfs 172.16.1.31:/data /opt</span><br><span class="line">[root@web01 ~]# df -h</span><br><span class="line">Filesystem         Size  Used Avail Use% Mounted on</span><br><span class="line">172.16.1.31:/data   99G  1.8G   98G   2% /opt</span><br></pre></td></tr></table></figure>

<p>æŒ‚è½½nfsç›®å½•ï¼ˆæ°¸ä¹…ï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 ~]# vim /etc/fstab </span><br><span class="line">172.16.1.31:/data  /opt  nfs  defaults  0  0</span><br><span class="line">[root@web01 ~]# mount -a   #éªŒè¯fstabå¼€æœºå¯åŠ¨æ˜¯å¦å¡«å†™é”™è¯¯ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="2-3-NFSé…ç½®å‚æ•°è¯´æ˜"><a href="#2-3-NFSé…ç½®å‚æ•°è¯´æ˜" class="headerlink" title="2.3 NFSé…ç½®å‚æ•°è¯´æ˜"></a>2.3 NFSé…ç½®å‚æ•°è¯´æ˜</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ro				åªè¯»æƒé™</span><br><span class="line">root_squash		å½“NFSå®¢æˆ·ç«¯ä»¥rootç®¡ç†å‘˜è®¿é—®æ—¶ï¼Œæ˜ å°„ä¸ºNFSæœåŠ¡å™¨çš„åŒ¿åç”¨æˆ·(ä¸å¸¸ç”¨)</span><br><span class="line">no_root_squash	å½“NFSå®¢æˆ·ç«¯ä»¥rootç®¡ç†å‘˜è®¿é—®æ—¶ï¼Œæ˜ å°„ä¸ºNFSæœåŠ¡å™¨çš„rootç®¡ç†å‘˜(ä¸å¸¸ç”¨)</span><br><span class="line">no_all_squash	æ— è®ºNFSå®¢æˆ·ç«¯ä½¿ç”¨ä»€ä¹ˆè´¦æˆ·è®¿é—®ï¼Œéƒ½ä¸è¿›è¡Œå‹ç¼©</span><br><span class="line">async			ä¼˜å…ˆå°†æ•°æ®ä¿å­˜åˆ°å†…å­˜ï¼Œç„¶åå†å†™å…¥ç¡¬ç›˜ï¼›è¿™æ ·æ•ˆç‡æ›´é«˜ï¼Œä½†å¯èƒ½ä¼šä¸¢å¤±æ•°æ®</span><br><span class="line"></span><br><span class="line">rw*				è¯»å†™æƒé™</span><br><span class="line">sync*			åŒæ—¶å°†æ•°æ®å†™å…¥åˆ°å†…å­˜ä¸ç¡¬ç›˜ä¸­ï¼Œä¿è¯ä¸ä¸¢å¤±æ•°æ®</span><br><span class="line">all_squash*		æ— è®ºNFSå®¢æˆ·ç«¯ä½¿ç”¨ä»€ä¹ˆè´¦æˆ·è®¿é—®ï¼Œå‡æ˜ å°„ä¸ºNFSæœåŠ¡å™¨çš„åŒ¿åç”¨æˆ·(å¸¸ç”¨)</span><br><span class="line">anonuid*		é…ç½®all_squashä½¿ç”¨,æŒ‡å®šNFSçš„ç”¨æˆ·UID,å¿…é¡»å­˜åœ¨ç³»ç»Ÿ</span><br><span class="line">anongid*		é…ç½®all_squashä½¿ç”¨,æŒ‡å®šNFSçš„ç”¨æˆ·UID,å¿…é¡»å­˜åœ¨ç³»ç»Ÿ</span><br></pre></td></tr></table></figure>

<h3 id="2-4-éªŒè¯roæƒé™"><a href="#2-4-éªŒè¯roæƒé™" class="headerlink" title="2.4 éªŒè¯roæƒé™"></a>2.4 éªŒè¯roæƒé™</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@nfs ~]# cat /etc/exports</span><br><span class="line">/data 172.16.1.0/24(ro,sync,all_squash)</span><br><span class="line">[root@nfs ~]# systemctl restart nfs-server</span><br><span class="line"></span><br><span class="line">[root@web01 ~]# touch /opt/ttt</span><br><span class="line">touch: cannot touch â€˜/opt/tttâ€™: Read-only file system		#é€šå¸¸è¿™æ ·çš„é”™è¯¯éƒ½æ˜¯è®¾å®šçš„roæƒé™å¯¼è‡´</span><br></pre></td></tr></table></figure>

<h3 id="2-5-éªŒè¯all-squashã€anonuidã€anongidæƒé™"><a href="#2-5-éªŒè¯all-squashã€anonuidã€anongidæƒé™" class="headerlink" title="2.5 éªŒè¯all_squashã€anonuidã€anongidæƒé™"></a>2.5 éªŒè¯all_squashã€anonuidã€anongidæƒé™</h3><p>æœåŠ¡ç«¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@nfs ~]# cat /etc/exports</span><br><span class="line">/data 172.16.1.0/24(rw,sync,all_squash,anonuid=666,anongid=666)</span><br><span class="line">åˆ›å»ºç”¨æˆ·</span><br><span class="line">[root@nfs ~]# groupadd -g 666 www</span><br><span class="line">[root@nfs ~]# useradd -u666 -g666 www</span><br><span class="line">[root@nfs ~]# id www</span><br><span class="line">uid=666(www) gid=666(www) groups=666(www)</span><br><span class="line">æˆæƒ</span><br><span class="line">[root@nfs ~]# chown -R www.www /data/</span><br><span class="line">é‡å¯</span><br><span class="line">[root@nfs ~]# systemctl restart nfs-server</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯é‡æ–°æŒ‚è½½éªŒè¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 opt]# touch file</span><br><span class="line">[root@web01 opt]# touch test</span><br><span class="line">[root@web01 opt]# ll</span><br><span class="line">total 4</span><br><span class="line">-rw-r--r-- 1 666 666 0 Jan  7 11:29 file</span><br><span class="line">-rw-r--r-- 1 666 666 0 Jan  7 11:29 test</span><br></pre></td></tr></table></figure>

<blockquote>
<p>PS:ç”±äºå®¢æˆ·ç«¯æ²¡æœ‰åˆ›å»ºidä¸º666çš„wwwç”¨æˆ·ï¼Œå› æ­¤çœ‹åˆ°çš„å±ç»„å’Œå±ä¸»éƒ½æ˜¯666</p>
</blockquote>
<p>å®¢æˆ·ç«¯å¦‚æœè§‰å¾—666ä¸å¥½çœ‹ï¼Œå»ºè®®åœ¨å®¢æˆ·ç«¯ä¸Šåˆ›å»ºåŒåçš„ç”¨æˆ·ä»¥åŠuid</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 ~]# groupadd -g 666 www</span><br><span class="line">[root@web01 ~]# useradd -u 666 -g 666 www</span><br><span class="line">[root@web01 ~]# id www</span><br><span class="line">uid=666(www) gid=666(www) groups=666(www)</span><br><span class="line">[root@web01 ~]# ll /opt/</span><br><span class="line">total 4</span><br><span class="line">-rw-r--r-- 1 www www 0 Jan  7 11:29 file</span><br><span class="line">-rw-r--r-- 1 www www 0 Jan  7 11:29 test</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--06--HTTPåè®®ä»‹ç»</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/06-HTTP%E5%8D%8F%E8%AE%AE/</url>
    <content><![CDATA[<h2 id="ä¸€ã€HTTPçš„å‘å±•å†ç¨‹"><a href="#ä¸€ã€HTTPçš„å‘å±•å†ç¨‹" class="headerlink" title="ä¸€ã€HTTPçš„å‘å±•å†ç¨‹"></a>ä¸€ã€HTTPçš„å‘å±•å†ç¨‹</h2><p>HTTPåè®®å§‹äºä¸‰åå¹´å‰è’‚å§†Â·ä¼¯çº³æ–¯ - æçš„ä¸€ç¯‡è®ºæ–‡</p>
<p>HTTP&#x2F;0.9 (æ˜¯ä¸ªç®€å•çš„æ–‡æœ¬åè®®ï¼Œåªèƒ½è·å–æ–‡æœ¬èµ„æºï¼›)</p>
<p>HTTP&#x2F;1.0 - 1996å¹´ ï¼ˆç¡®ç«‹äº†å¤§éƒ¨åˆ†ç°åœ¨ä½¿ç”¨çš„æŠ€æœ¯ï¼Œå‚è€ƒæ–‡æ¡£ï¼Œä¸å…·å¤‡å®é™…çº¦æŸåŠ›ï¼‰</p>
<p>HTTP&#x2F;1.1 - 1999å¹´ ï¼ˆæ­£å¼æ ‡å‡†ä¸¥æ ¼éµå®ˆï¼ŒåŠŸèƒ½ä¹Ÿéå¸¸å®Œå–„ï¼Œäº’è”ç½‘çˆ†å‘å¼å¢é•¿ï¼Œç›®å‰äº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„åè®®ï¼‰ </p>
<p>HTTP&#x2F;2 - 2015å¹´ ï¼ˆåŸºäº Google çš„ SPDY åè®®ï¼Œæ³¨é‡æ€§èƒ½æ”¹å–„ï¼Œä½†è¿˜æœªæ™®åŠï¼‰</p>
<p>HTTP&#x2F;3 - 2018å¹´ ï¼ˆåŸºäº Google çš„ QUIC åè®®ï¼Œæ˜¯å°†æ¥çš„å‘å±•æ–¹å‘ï¼‰</p>
<hr>
<p>è¯¾ä¸‹ä½œä¸š</p>
<ol>
<li>ä½ è®¤ä¸ºæ¨åŠ¨ HTTP å‘å±•çš„åŸåŠ¨åŠ›æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>ä½ æ˜¯æ€ä¹ˆç†è§£ HTTPï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰çš„ï¼Ÿ</li>
</ol>
<h2 id="äºŒã€HTTPç®€ä»‹"><a href="#äºŒã€HTTPç®€ä»‹" class="headerlink" title="äºŒã€HTTPç®€ä»‹"></a>äºŒã€HTTPç®€ä»‹</h2><p>HyperText transfer protocol ï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰</p>
<ul>
<li>HTTP æ˜¯ä¸€ä¸ªç”¨åœ¨è®¡ç®—æœºä¸–ç•Œé‡Œçš„åè®®ï¼Œå®ƒç¡®ç«‹äº†ä¸€ç§è®¡ç®—æœºä¹‹é—´äº¤æµé€šä¿¡çš„è§„èŒƒï¼Œä»¥åŠç›¸å…³çš„å„ç§æ§åˆ¶å’Œé”™è¯¯å¤„ç†æ–¹å¼ã€‚</li>
<li>HTTP ä¸“é—¨ç”¨æ¥åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œä¸èƒ½ç”¨äºå¹¿æ’­ã€å¯»å€æˆ–è·¯ç”±ã€‚</li>
<li>HTTP ä¼ è¾“çš„æ˜¯æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰è¶…æ–‡æœ¬æ•°æ®ã€‚</li>
<li>HTTP æ˜¯æ„å»ºäº’è”ç½‘çš„é‡è¦åŸºç¡€æŠ€æœ¯ï¼Œå®ƒæ²¡æœ‰å®ä½“ï¼Œä¾èµ–è®¸å¤šå…¶ä»–çš„æŠ€æœ¯æ¥å®ç°ï¼Œä½†åŒæ—¶è®¸å¤šæŠ€æœ¯ä¹Ÿéƒ½ä¾èµ–äºå®ƒã€‚</li>
</ul>
<hr>
<p>è¯¾ä¸‹ä½œä¸šï¼š</p>
<ol>
<li>æœ‰ä¸€ç§æµè¡Œçš„è¯´æ³•ï¼šâ€œHTTP æ˜¯ç”¨äºä»äº’è”ç½‘æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„åè®®â€ï¼Œä½ è®¤ä¸ºè¿™ç§è¯´æ³•å¯¹å—ï¼Ÿå¯¹åœ¨å“ªé‡Œï¼Œåˆé”™åœ¨å“ªé‡Œï¼Ÿ</li>
<li>ä½ èƒ½å†è¯´å‡ºå‡ ä¸ªâ€œHTTP ä¸æ˜¯ä»€ä¹ˆâ€å—ï¼Ÿ</li>
</ol>
<p><img src="/img/http%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE.png" alt="httpæ€ç»´å¯¼å›¾"></p>
<h3 id="ä¸‰ã€HTTPçš„åº”ç”¨é¢†åŸŸ"><a href="#ä¸‰ã€HTTPçš„åº”ç”¨é¢†åŸŸ" class="headerlink" title="ä¸‰ã€HTTPçš„åº”ç”¨é¢†åŸŸ"></a>ä¸‰ã€HTTPçš„åº”ç”¨é¢†åŸŸ</h3><ol>
<li>äº’è”ç½‘ä¸Šç»å¤§éƒ¨åˆ†èµ„æºéƒ½ä½¿ç”¨ HTTP åè®®ä¼ è¾“ï¼›</li>
<li>æµè§ˆå™¨æ˜¯ HTTP åè®®é‡Œçš„è¯·æ±‚æ–¹ï¼Œå³ User Agentï¼›</li>
<li>æœåŠ¡å™¨æ˜¯ HTTP åè®®é‡Œçš„åº”ç­”æ–¹ï¼Œå¸¸ç”¨çš„æœ‰ Apache å’Œ Nginxï¼›</li>
<li>CDN ä½äºæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´ï¼Œä¸»è¦èµ·åˆ°ç¼“å­˜åŠ é€Ÿçš„ä½œç”¨ï¼›</li>
<li>çˆ¬è™«æ˜¯å¦ä¸€ç±» User Agentï¼Œæ˜¯è‡ªåŠ¨è®¿é—®ç½‘ç»œèµ„æºçš„ç¨‹åºã€‚</li>
</ol>
<hr>
<p>è¯¾åä½œä¸šï¼š</p>
<ol>
<li>ä½ è§‰å¾— CDN åœ¨å¯¹å¾…æµè§ˆå™¨å’Œçˆ¬è™«æ—¶ä¼šæœ‰å·®å¼‚å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>
<li>ä½ æ€ä¹ˆç†è§£ WebService ä¸ Web Server è¿™ä¸¤ä¸ªéå¸¸ç›¸ä¼¼çš„è¯ï¼Ÿ</li>
</ol>
]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--05--SSHæœåŠ¡å™¨æ­å»º</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/05-ssh%E6%9C%8D%E5%8A%A1%E8%B7%B3%E6%9D%BF%E6%9C%BA%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<h2 id="ä¸€ã€SSHæœåŠ¡å™¨ä»‹ç»"><a href="#ä¸€ã€SSHæœåŠ¡å™¨ä»‹ç»" class="headerlink" title="ä¸€ã€SSHæœåŠ¡å™¨ä»‹ç»"></a>ä¸€ã€SSHæœåŠ¡å™¨ä»‹ç»</h2><blockquote>
<p>SSHæ˜¯ä¸€ä¸ªå®‰å…¨åè®®ï¼Œåœ¨è¿›è¡Œæ•°æ®ä¼ è¾“æ—¶ï¼Œä¼šå¯¹æ•°æ®åŒ…è¿›è¡ŒåŠ å¯†å¤„ç†ï¼ŒåŠ å¯†ååœ¨è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚ç¡®ä¿äº†æ•°æ®ä¼ è¾“å®‰å…¨ã€‚</p>
</blockquote>
<p><img src="/img/ssh%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95.png" alt="sshå…å¯†ç™»å½•"></p>
<h3 id="1-sshçš„åŠŸèƒ½"><a href="#1-sshçš„åŠŸèƒ½" class="headerlink" title="1 sshçš„åŠŸèƒ½"></a>1 sshçš„åŠŸèƒ½</h3><ol>
<li>æä¾›è¿œç¨‹è¿æ¥æœåŠ¡å™¨çš„æœåŠ¡</li>
<li>å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†</li>
</ol>
<h3 id="2-å¸¸ç”¨æœåŠ¡çš„ç«¯å£"><a href="#2-å¸¸ç”¨æœåŠ¡çš„ç«¯å£" class="headerlink" title="2 å¸¸ç”¨æœåŠ¡çš„ç«¯å£"></a>2 å¸¸ç”¨æœåŠ¡çš„ç«¯å£</h3><ul>
<li>ftp â€“ tcp&#x2F;20  tcp&#x2F;21</li>
<li>dns â€“ tcp&#x2F;53  udp&#x2F;53</li>
<li>ssh  â€“  tcp&#x2F;22</li>
<li>telnet â€“ tcp&#x2F;23 </li>
<li>mysql â€“ tcp&#x2F;3306</li>
<li>http â€“ tcp&#x2F;80</li>
<li>https â€“ tcp&#x2F;443</li>
</ul>
<h3 id="3-telnetæœåŠ¡æ­å»º"><a href="#3-telnetæœåŠ¡æ­å»º" class="headerlink" title="3 telnetæœåŠ¡æ­å»º"></a>3 telnetæœåŠ¡æ­å»º</h3><p>å®‰è£…å¹¶å¯åŠ¨telnetæœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@backup ~]# yum install telnet-server -y</span><br><span class="line">[root@backup ~]# systemctl start telnet.socket </span><br><span class="line">[root@backup ~]# useradd gs</span><br><span class="line">[root@backup ~]# echo &quot;1&quot; | passwd --stdin gs</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ç»ˆç«¯è½¯ä»¶é€šè¿‡telnetä½¿ç”¨gsç”¨æˆ·ç™»å½•è¿æ¥</p>
<h3 id="4-telnetä¸sshçš„å¯¹æ¯”"><a href="#4-telnetä¸sshçš„å¯¹æ¯”" class="headerlink" title="4 telnetä¸sshçš„å¯¹æ¯”"></a>4 telnetä¸sshçš„å¯¹æ¯”</h3><table>
<thead>
<tr>
<th>æœåŠ¡è¿æ¥æ–¹å¼</th>
<th>æœåŠ¡æ•°æ®ä¼ è¾“</th>
<th>æœåŠ¡ç›‘å¬ç«¯å£</th>
<th>æœåŠ¡ç™»é™†ç”¨æˆ·</th>
</tr>
</thead>
<tbody><tr>
<td>ssh</td>
<td>åŠ å¯†</td>
<td>tcp&#x2F;22</td>
<td>é»˜è®¤æ”¯æŒrootç™»å½•</td>
</tr>
<tr>
<td>telnet</td>
<td>æ˜æ–‡</td>
<td>tcp&#x2F;23</td>
<td>ä¸æ”¯æŒrootç™»å½•</td>
</tr>
</tbody></table>
<h2 id="äºŒã€sshä¸scpçš„ä½¿ç”¨"><a href="#äºŒã€sshä¸scpçš„ä½¿ç”¨" class="headerlink" title="äºŒã€sshä¸scpçš„ä½¿ç”¨"></a>äºŒã€sshä¸scpçš„ä½¿ç”¨</h2><h3 id="1-ä½¿ç”¨ssh"><a href="#1-ä½¿ç”¨ssh" class="headerlink" title="1 ä½¿ç”¨ssh"></a>1 ä½¿ç”¨ssh</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sshå‘½ä»¤</span><br><span class="line">	ssh 172.16.1.31					#å–å†³å½“å‰æ‰§è¡Œæ­¤å‘½ä»¤çš„ç”¨æˆ·</span><br><span class="line">	ssh root@172.16.1.31			#æ ‡å‡†çš„å†™æ³•</span><br><span class="line">	ssh -p22 root@172.16.1.31		#å¸¦ç«¯å£</span><br></pre></td></tr></table></figure>

<h3 id="2-ä½¿ç”¨scp"><a href="#2-ä½¿ç”¨scp" class="headerlink" title="2 ä½¿ç”¨scp"></a>2 ä½¿ç”¨scp</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scp </span><br><span class="line"><span class="meta">#</span><span class="bash"> -P æŒ‡å®šç«¯å£ï¼Œé»˜è®¤22ç«¯å£å¯ä¸å†™</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -r è¡¨ç¤ºé€’å½’æ‹·è´ç›®å½•</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -p è¡¨ç¤ºåœ¨æ‹·è´æ–‡ä»¶å‰åä¿æŒæ–‡ä»¶æˆ–ç›®å½•å±æ€§ä¸å˜</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -l é™åˆ¶ä¼ è¾“ä½¿ç”¨å¸¦å®½(é»˜è®¤kb) /8 -&gt;KB  /1024  -&gt;MB</span> </span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€ä½¿ç”¨sshå¯†é’¥ç™»å½•"><a href="#ä¸‰ã€ä½¿ç”¨sshå¯†é’¥ç™»å½•" class="headerlink" title="ä¸‰ã€ä½¿ç”¨sshå¯†é’¥ç™»å½•"></a>ä¸‰ã€ä½¿ç”¨sshå¯†é’¥ç™»å½•</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1.ç”Ÿæˆå¯†é’¥å¯¹    å…¬é’¥  ç§é’¥</span><br><span class="line">[root@m01 ~]# ssh-keygen -C 7242xxxxx@qq.com</span><br><span class="line">	</span><br><span class="line">2.å°†å…¬é’¥æ¨é€åˆ°ä½ éœ€è¦è¿æ¥çš„ä¸»æœºï¼Œç¬¬ä¸€æ¬¡éœ€è¦è¾“å…¥å¯¹ç«¯ä¸»æœºçš„å¯†ç </span><br><span class="line">[root@m01 ~]# ssh-copy-id -i ~/.ssh/id_rsa.pub root@172.16.1.31</span><br><span class="line">root@172.16.1.31&#x27;s password:</span><br><span class="line">	</span><br><span class="line">3.é€šè¿‡sshå‘½ä»¤æµ‹è¯•è¿æ¥æ˜¯å¦éœ€è¦å¯†ç </span><br><span class="line">[root@m01 ~]# ssh 172.16.1.31</span><br><span class="line">Last login: Wed Jan  9 10:39:16 2019 from 172.16.1.61</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€sshå®‰å…¨"><a href="#å››ã€sshå®‰å…¨" class="headerlink" title="å››ã€sshå®‰å…¨"></a>å››ã€sshå®‰å…¨</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@jumpserver ~]# vim /etc/ssh/sshd_config</span><br><span class="line">[root@jumpserver ~]# systemctl restart sshd</span><br></pre></td></tr></table></figure>

<p>SSHä½œä¸ºè¿œç¨‹è¿æ¥æœåŠ¡ï¼Œé€šå¸¸æˆ‘ä»¬éœ€è¦è€ƒè™‘åˆ°è¯¥æœåŠ¡çš„å®‰å…¨ï¼Œæ‰€ä»¥éœ€è¦å¯¹è¯¥æœåŠ¡è¿›è¡Œå®‰å…¨æ–¹é¢çš„é…ç½®ã€‚<br>1.æ›´æ”¹è¿œç¨‹è¿æ¥ç™»é™†çš„ç«¯å£		6666<br>2.ç¦æ­¢ROOTç®¡ç†å‘˜ç›´æ¥ç™»å½•		<br>3.å¯†ç è®¤è¯æ–¹å¼æ”¹ä¸ºå¯†é’¥è®¤è¯<br>4.é‡è¦æœåŠ¡ä¸ä½¿ç”¨å…¬ç½‘IPåœ°å€<br>5.ä½¿ç”¨é˜²ç«å¢™é™åˆ¶æ¥æºIPåœ°å€</p>
<p>Port 6666                       # å˜æ›´SSHæœåŠ¡è¿œç¨‹è¿æ¥ç«¯å£âˆš<br>PermitRootLogin         no      # ç¦æ­¢rootç”¨æˆ·ç›´æ¥è¿œç¨‹ç™»å½•âˆš<br>PasswordAuthentication  no      # ç¦æ­¢ä½¿ç”¨å¯†ç ç›´æ¥è¿œç¨‹ç™»å½•âˆš<br>UseDNS                  no      # ç¦æ­¢sshè¿›è¡Œdnsåå‘è§£æï¼Œå½±å“sshè¿æ¥æ•ˆç‡å‚æ•°âˆš<br>GSSAPIAuthentication    no      # ç¦æ­¢GSSè®¤è¯ï¼Œå‡å°‘è¿æ¥æ—¶äº§ç”Ÿçš„å»¶è¿Ÿâˆš</p>
<h2 id="äº”ã€é˜²sshæš´åŠ›ç ´è§£å·¥å…·fail2ban"><a href="#äº”ã€é˜²sshæš´åŠ›ç ´è§£å·¥å…·fail2ban" class="headerlink" title="äº”ã€é˜²sshæš´åŠ›ç ´è§£å·¥å…·fail2ban"></a>äº”ã€é˜²sshæš´åŠ›ç ´è§£å·¥å…·fail2ban</h2><blockquote>
<p>fail2banå¯ä»¥ç›‘æ§ç³»ç»Ÿæ—¥å¿—ï¼Œå¹¶ä¸”æ ¹æ®ä¸€å®šè§„åˆ™åŒ¹é…å¼‚å¸¸IPåä½¿ç”¨Firewalldå°†å…¶å±è”½ï¼Œå°¤å…¶æ˜¯é’ˆå¯¹ä¸€äº›çˆ†ç ´&#x2F;æ‰«æç­‰éå¸¸æœ‰æ•ˆã€‚</p>
</blockquote>
<p>éƒ¨ç½²æµç¨‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1.å¼€å¯Firewalldé˜²ç«å¢™</span><br><span class="line">[root@bgx ~]# systemctl start firewalld</span><br><span class="line">[root@bgx ~]# systemctl enable firewalld</span><br><span class="line">[root@bgx ~]# firewall-cmd --state</span><br><span class="line">running</span><br><span class="line"></span><br><span class="line">2.ä¿®æ”¹firewalldè§„åˆ™ï¼Œå¯ç”¨Firewalldåä¼šç¦æ­¢ä¸€äº›æœåŠ¡çš„ä¼ è¾“ï¼Œä½†é»˜è®¤ä¼šæ”¾è¡Œå¸¸ç”¨çš„22ç«¯å£, å¦‚æœæƒ³æ·»åŠ æ›´å¤šï¼Œä»¥ä¸‹æ˜¯æ”¾è¡ŒSSHç«¯å£ï¼ˆ22ï¼‰ç¤ºä¾‹ï¼Œä¾›å‚è€ƒï¼š</span><br><span class="line"><span class="meta">#</span><span class="bash">æ”¾è¡ŒSSHDæœåŠ¡ç«¯å£</span></span><br><span class="line">[root@bgx ~]# firewall-cmd --permanent --add-service=ssh --add-service=http </span><br><span class="line"><span class="meta">#</span><span class="bash">é‡è½½é…</span></span><br><span class="line">[root@bgx ~]# firewall-cmd --reload</span><br><span class="line"><span class="meta">#</span><span class="bash">æŸ¥çœ‹å·²æ”¾è¡Œç«¯å£</span></span><br><span class="line">[root@bgx ~]# firewall-cmd  --list-service</span><br><span class="line"></span><br><span class="line">3.å®‰è£…fail2ban,éœ€è¦æœ‰epel</span><br><span class="line">[root@bgx ~]# yum install fail2ban fail2ban-firewalld mailx -y</span><br><span class="line"></span><br><span class="line">4.é…ç½®fail2banè§„åˆ™.localä¼šè¦†ç›–.confæ–‡ä»¶</span><br><span class="line">[root@bgx fail2ban]# cat /etc/fail2ban/jail.local</span><br><span class="line">[DEFAULT]</span><br><span class="line">ignoreip = 127.0.0.1/8</span><br><span class="line">bantime  = 86400</span><br><span class="line">findtime = 600</span><br><span class="line">maxretry = 5</span><br><span class="line">banaction = firewallcmd-ipset</span><br><span class="line">action = %(action_mwl)s</span><br><span class="line"></span><br><span class="line">[sshd]</span><br><span class="line">enabled = true</span><br><span class="line">filter  = sshd</span><br><span class="line">port    = 22</span><br><span class="line">action = %(action_mwl)s</span><br><span class="line">logpath = /var/log/secure</span><br><span class="line"></span><br><span class="line">5.å¯åŠ¨æœåŠ¡ï¼Œå¹¶æ£€æŸ¥çŠ¶æ€</span><br><span class="line">[root@bgx ~]# systemctl start fail2ban.service</span><br><span class="line">[root@bgx ~]# fail2ban-client status sshd</span><br><span class="line"></span><br><span class="line">6.æ¸…é™¤è¢«å°æ‰çš„IPåœ°å€</span><br><span class="line">[root@bgx ~]# fail2ban-client set sshd unbanip 10.0.0.1</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--07--Nginx(å››)LNMPæ¶æ„æ‹†åˆ†</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/10-Nginx(%E5%9B%9B)LNMP%E6%9E%B6%E6%9E%84%E6%8B%86%E5%88%86/</url>
    <content><![CDATA[<h2 id="ä¸€ã€æ‹†åˆ†æ•°æ®åº“"><a href="#ä¸€ã€æ‹†åˆ†æ•°æ®åº“" class="headerlink" title="ä¸€ã€æ‹†åˆ†æ•°æ®åº“"></a>ä¸€ã€æ‹†åˆ†æ•°æ®åº“</h2><blockquote>
<p>ä¸ºä»€ä¹ˆè¦æ‹†åˆ†æ•°æ®åº“?</p>
<p>mysqlå†…å­˜å ç”¨å¤§ï¼Œå®¹æ˜“å¼•èµ·ç½‘é¡µè®¿é—®é€Ÿåº¦å˜æ…¢ï¼Œç”šè‡³oom(out of memory)è¢«ç³»ç»Ÿè‡ªåŠ¨killæ‰ï¼Œä¸å®‰å…¨</p>
</blockquote>
<h3 id="1-2-ç¯å¢ƒå‡†å¤‡"><a href="#1-2-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="1.2 ç¯å¢ƒå‡†å¤‡"></a>1.2 ç¯å¢ƒå‡†å¤‡</h3><table>
<thead>
<tr>
<th>ä¸»æœºåç§°</th>
<th>åº”ç”¨ç¯å¢ƒ</th>
<th>å¤–ç½‘åœ°å€</th>
<th>å†…ç½‘åœ°å€</th>
</tr>
</thead>
<tbody><tr>
<td>web01</td>
<td>nginx+php</td>
<td>10.0.0.7</td>
<td>172.16.1.7</td>
</tr>
<tr>
<td>db01</td>
<td>mysql</td>
<td></td>
<td>172.16.1.51</td>
</tr>
</tbody></table>
<h3 id="1-2-æ‹†åˆ†è¿‡ç¨‹"><a href="#1-2-æ‹†åˆ†è¿‡ç¨‹" class="headerlink" title="1.2 æ‹†åˆ†è¿‡ç¨‹"></a>1.2 æ‹†åˆ†è¿‡ç¨‹</h3><p>1ã€å¤‡ä»½172.16.1.7æœåŠ¡å™¨ä¸Šmysqlçš„æ•°æ®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 ~]# mysqldump -uroot -p&#x27;Bgx123.com&#x27; --all-databases --single-transaction &gt; mysql-all.sql</span><br></pre></td></tr></table></figure>

<p>2ã€ä¼ è¾“172.16.1.7çš„å¤‡ä»½æ•°æ®è‡³172.16.1.51çš„æœåŠ¡å™¨ä¸Š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 ~]# scp mysql-all.sql root@172.16.1.51:/tmp</span><br></pre></td></tr></table></figure>

<p>3ã€éœ€è¦å…ˆåœ¨172.16.1.51æœåŠ¡å™¨ä¸Šå®‰è£…mysqlæœåŠ¡ï¼Œç„¶åä½¿ç”¨mysqlå‘½ä»¤è¿›è¡Œè¿˜åŸã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@db01 ~]# yum install mariadb-server mariadb -y</span><br><span class="line">[root@db01 ~]# systemctl enable mariadb</span><br><span class="line">[root@db01 ~]# systemctl start mariadb</span><br><span class="line">[root@db01 ~]# mysql &lt;/tmp/mysql-all.sql</span><br><span class="line">[root@db01 ~]# systemctl restart mariadb</span><br><span class="line">[root@db01 ~]# mysql -uroot -pBgx123.com</span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| edusoho            |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| test               |</span><br><span class="line">| wordpress          |</span><br><span class="line">| zh                 |</span><br><span class="line">+--------------------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>4ã€å°†webç¨‹åºè¿æ¥çš„æœ¬åœ°æ•°æ®åº“ä¿®æ”¹åˆ°è¿œç¨‹æ•°æ®åº“ä¸Šã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1ï¼‰å…ˆåœ¨æœ¬åœ°172.16.1.7æœåŠ¡å™¨ä¸Šåœæ­¢æœ¬åœ°çš„æ•°æ®åº“</span><br><span class="line">[root@web01 ~]# systemctl disable mariadb</span><br><span class="line">[root@web01 ~]# systemctl stop mariadb</span><br><span class="line"></span><br><span class="line">2ï¼‰åœ¨172.16.1.51çš„æœåŠ¡å™¨ä¸Šæˆæƒè¿œç¨‹ä¸»æœºèƒ½å¤Ÿèƒ½è¿æ¥mysqlæ•°æ®åº“</span><br><span class="line">[root@db01 ~]# mysql -uroot -pBgx123.com</span><br><span class="line">MariaDB [(none)]&gt; grant all privileges on *.* to oldboy@&#x27;%&#x27; identified by &#x27;Bgx123.com&#x27;;</span><br><span class="line">è§£é‡Šï¼š</span><br><span class="line">*.*: æ‰€æœ‰æ•°æ®åº“ä¸‹çš„æ‰€æœ‰è¡¨</span><br><span class="line">oldboy@&#x27;%&#x27;: å…è®¸æ‰€æœ‰ç½‘æ®µçš„oldboyç”¨æˆ·è®¿é—®</span><br><span class="line">identify: è®¾ç½®å¯†ç </span><br><span class="line"></span><br><span class="line">3ï¼‰åœ¨172.16.1.7æœåŠ¡å™¨ä¸Šæµ‹è¯•è¿œç¨‹è´¦æˆ·èƒ½å¦è¿æ¥172.16.1.51çš„æ•°æ®åº“</span><br><span class="line">[root@web01 wordpress]# yum install mariadb -y</span><br><span class="line">[root@web01 wordpress]# mysql -h 172.16.1.51 -uoldboy -pBgx123.com</span><br><span class="line">MariaDB [(none)]&gt; </span><br><span class="line"></span><br><span class="line">4ï¼‰åœ¨172.16.1.7æœåŠ¡å™¨ä¸Šä¿®æ”¹webç¨‹åºè¿æ¥æ•°æ®åº“çš„é…ç½®æ–‡ä»¶</span><br><span class="line">[root@web01 wordpress]# vim /code/wordpress/wp-config.php</span><br><span class="line">// ** MySQL è®¾ç½® - å…·ä½“ä¿¡æ¯æ¥è‡ªæ‚¨æ­£åœ¨ä½¿ç”¨çš„ä¸»æœº ** //</span><br><span class="line">/** WordPressæ•°æ®åº“çš„åç§° */</span><br><span class="line">define(&#x27;DB_NAME&#x27;, &#x27;wordpress&#x27;);</span><br><span class="line"></span><br><span class="line">/** MySQLæ•°æ®åº“ç”¨æˆ·å */</span><br><span class="line">define(&#x27;DB_USER&#x27;, &#x27;oldboy&#x27;);</span><br><span class="line"></span><br><span class="line">/** MySQLæ•°æ®åº“å¯†ç  */</span><br><span class="line">define(&#x27;DB_PASSWORD&#x27;, &#x27;Bgx123.com&#x27;);</span><br><span class="line"></span><br><span class="line">/** MySQLä¸»æœº */</span><br><span class="line">define(&#x27;DB_HOST&#x27;, &#x27;172.16.1.51&#x27;);</span><br></pre></td></tr></table></figure>

<p>5ã€æ‹†åˆ†172.16.1.7wecenterè¿æ¥è¿œç¨‹172.16.1.51æ•°æ®åº“ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 zh]# grep -R &quot;Bgx123.com&quot; *</span><br><span class="line">	system/config/database.php:  &#x27;password&#x27; =&gt; &#x27;Bgx123.com&#x27;,</span><br><span class="line">[root@web01 zh]# vim /code/zh/system/config/database.php </span><br><span class="line"><span class="meta">	$</span><span class="bash">config[<span class="string">&#x27;driver&#x27;</span>] = <span class="string">&#x27;MySQLi&#x27;</span>;^M</span></span><br><span class="line"><span class="meta">	$</span><span class="bash">config[<span class="string">&#x27;master&#x27;</span>] = array (</span></span><br><span class="line">	  &#x27;charset&#x27; =&gt; &#x27;utf8&#x27;,</span><br><span class="line">	  &#x27;host&#x27; =&gt; &#x27;172.16.1.51&#x27;,</span><br><span class="line">	  &#x27;username&#x27; =&gt; &#x27;oldboy&#x27;,</span><br><span class="line">	  &#x27;password&#x27; =&gt; &#x27;Bgx123.com&#x27;,</span><br><span class="line">	  &#x27;dbname&#x27; =&gt; &#x27;zh&#x27;,</span><br><span class="line">	);^M</span><br></pre></td></tr></table></figure>

<p>6ã€æ‹†åˆ†172.16.1.7 edusohoè¿æ¥è¿œç¨‹172.16.1.51æ•°æ®åº“ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 edusoho]# vim /code/edusoho/app/config/parameters.yml</span><br><span class="line">database_driver: pdo_mysql</span><br><span class="line">database_host: 172.16.1.51</span><br><span class="line">database_port: 3306</span><br><span class="line">database_name: edusoho</span><br><span class="line">database_user: oldboy</span><br><span class="line">database_password: &#x27;Bgx123.com&#x27;</span><br><span class="line"></span><br><span class="line">å¿…é¡»æ¸…ç†ç¼“å­˜</span><br><span class="line">[root@web01 edusoho]# rm -rf /code/edusoho/app/cache/*</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€æ‰©å±•å¤šå°webæœåŠ¡å™¨"><a href="#äºŒã€æ‰©å±•å¤šå°webæœåŠ¡å™¨" class="headerlink" title="äºŒã€æ‰©å±•å¤šå°webæœåŠ¡å™¨"></a>äºŒã€æ‰©å±•å¤šå°webæœåŠ¡å™¨</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1.ç»Ÿä¸€ç¯å¢ƒ</span><br><span class="line">    0ï¼‰å‡†å¤‡å¯¹åº”çš„wwwç”¨æˆ·</span><br><span class="line">    [root@web02 ~]# groupadd -g666 www</span><br><span class="line">    [root@web02 ~]# useradd -u666 -g666 www</span><br><span class="line"></span><br><span class="line">    1ï¼‰æ‹·è´web01ä¸Šé¢çš„yumä»“åº“</span><br><span class="line">    [root@web02 ~]# scp root@172.16.1.7:/etc/yum.repos.d/*.repo /etc/yum.repos.d/</span><br><span class="line"></span><br><span class="line">    2ï¼‰å®‰è£…nginxå’Œphp</span><br><span class="line">    [root@web02 ~]# yum -y install nginx php71w php71w-cli php71w-common php71w-devel php71w-embedded php71w-gd php71w-mcrypt php71w-mbstring php71w-pdo php71w-xml php71w-fpm php71w-mysqlnd php71w-opcache php71w-pecl-memcached php71w-pecl-redis php71w-pecl-mongodb</span><br><span class="line"></span><br><span class="line">2.ç»Ÿä¸€é…ç½®ï¼ˆåŒæ­¥web01ä¸Šé¢çš„é…ç½®åˆ°web02ï¼‰</span><br><span class="line">    1ï¼‰åŒæ­¥nginx</span><br><span class="line">    [root@web02 ~]# rsync  -avz --delete root@172.16.1.7:/etc/nginx/ /etc/nginx/</span><br><span class="line">    [root@web02 ~]# nginx -t</span><br><span class="line">    [root@web02 ~]# systemctl enable nginx</span><br><span class="line">    [root@web02 ~]# systemctl start nginx</span><br><span class="line"></span><br><span class="line">    2ï¼‰åŒæ­¥phpï¼ˆ/etc/php-fpm.conf /etc/php-fpm.d  /etc/php.iniï¼‰</span><br><span class="line">    [root@web02 ~]# rsync  -avz --delete root@172.16.1.7:/etc/php* /etc/</span><br><span class="line">    [root@web02 ~]# systemctl enable php-fpm</span><br><span class="line">    [root@web02 ~]# systemctl start php-fpm</span><br><span class="line"></span><br><span class="line">3.ç»Ÿä¸€ä»£ç </span><br><span class="line">    [root@web01 ~]# tar czf code.tar.gz /code				#åœ¨web01ä¸Šæ‰“åŒ…ç«™ç‚¹</span><br><span class="line">    [root@web01 ~]# scp code.tar.gz root@172.16.1.8:/tmp	#åœ¨web01ä¸Šå°†æ‰“åŒ…å¥½çš„ä»£ç å‘é€ç»™web02</span><br><span class="line">    [root@web02 ~]# tar xf /tmp/code.tar.gz -C /			#åœ¨web02ä¸Šè¿›è¡Œè§£å‹ï¼Œå¹¶è§£å‹åˆ°/ç›®å½•ä¸‹</span><br><span class="line"></span><br><span class="line">4.é…ç½®è§£æï¼Œè¿›è¡Œè®¿é—®</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€NFSå…±äº«å¤šå°webçš„é™æ€èµ„æº"><a href="#ä¸‰ã€NFSå…±äº«å¤šå°webçš„é™æ€èµ„æº" class="headerlink" title="ä¸‰ã€NFSå…±äº«å¤šå°webçš„é™æ€èµ„æº"></a>ä¸‰ã€NFSå…±äº«å¤šå°webçš„é™æ€èµ„æº</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1.å‡†å¤‡172.16.1.31å…±äº«å­˜å‚¨æœåŠ¡å™¨ï¼Œè§„åˆ’ç›®å½•ï¼Œé…ç½®å¥½æƒé™</span><br><span class="line">    0ï¼‰åˆ›å»ºç”¨æˆ·</span><br><span class="line">    [root@nfs ~]# groupadd -g666 www</span><br><span class="line">    [root@nfs ~]# useradd -u666 -g666 www	</span><br><span class="line"></span><br><span class="line">    1ï¼‰å®‰è£…</span><br><span class="line">    [root@nfs ~]# yum install nfs-utils -y</span><br><span class="line"></span><br><span class="line">    2ï¼‰é…ç½®</span><br><span class="line">    [root@nfs ~]# cat /etc/exports</span><br><span class="line">    /data/blog 172.16.1.0/24(rw,sync,all_squash,anonuid=666,anongid=666)</span><br><span class="line">    /data/zh 172.16.1.0/24(rw,sync,all_squash,anonuid=666,anongid=666)</span><br><span class="line">    /data/edu 172.16.1.0/24(rw,sync,all_squash,anonuid=666,anongid=666)</span><br><span class="line"></span><br><span class="line">    3ï¼‰æ ¹æ®é…ç½®ï¼Œåˆ›å»ºç›®å½•ï¼Œå‡†å¤‡ç”¨æˆ·ï¼Œæˆæƒç­‰ç­‰</span><br><span class="line">    [root@nfs ~]# rm -rf /data/</span><br><span class="line">    [root@nfs ~]# mkdir /data/&#123;blog,zh,edu&#125; -p</span><br><span class="line">    [root@nfs ~]# chown -R www.www /data/</span><br><span class="line"></span><br><span class="line">    4ï¼‰å¯åŠ¨</span><br><span class="line">    [root@nfs ~]# systemctl enable nfs-utils </span><br><span class="line">    [root@nfs ~]# systemctl restart nfs-utils</span><br><span class="line"></span><br><span class="line">2.å°†å›¾ç‰‡è¾ƒå¤šçš„web02æœåŠ¡å™¨ï¼Œæ¨é€åˆ°nfså…±äº«å­˜å‚¨ä¸Š</span><br><span class="line">    http://blog.oldboy.com/wp-content/uploads/2019/01/timg.jpg</span><br><span class="line"></span><br><span class="line">    [root@web02 ~]# cd /code/wordpress/wp-content</span><br><span class="line">    [root@web02 wp-content]# scp -r uploads/* root@172.16.1.31:/data/blog/</span><br><span class="line"></span><br><span class="line">    æ³¨æ„ï¼šéœ€è¦ä¸ŠnfsæœåŠ¡å™¨ä¸Šè¿›è¡Œé‡æ–°çš„é€’å½’æˆæƒï¼Œå¦åˆ™ä¼šå‡ºç°æ— æ³•ä¸Šä¼ æ–‡ä»¶çš„é”™è¯¯</span><br><span class="line">    [root@nfs ~]# chown -R www.www /data/</span><br><span class="line"></span><br><span class="line">3.web01å’Œweb02åˆ†åˆ«éƒ½è¿›è¡ŒæŒ‚è½½ï¼Œæ­¤æ—¶å›¾ç‰‡è¿›è¡Œå®ç°äº†å…±äº«</span><br><span class="line">    mount -t nfs 172.16.1.31:/data/blog  /code/wordpress/wp-content/uploads/</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--07--Nginx(ä¸‰)LNMPä»‹ç»</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/09-Nginx(%E4%B8%89)LNMP%E6%9E%B6%E6%9E%84%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<h2 id="ä¸€ã€LNMPç®€ä»‹-éœ€è¡¥å……"><a href="#ä¸€ã€LNMPç®€ä»‹-éœ€è¡¥å……" class="headerlink" title="ä¸€ã€LNMPç®€ä»‹(éœ€è¡¥å……)"></a>ä¸€ã€LNMPç®€ä»‹(éœ€è¡¥å……)</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯LNMP"><a href="#1-1-ä»€ä¹ˆæ˜¯LNMP" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯LNMP"></a>1.1 ä»€ä¹ˆæ˜¯LNMP</h3><h3 id="1-2-LNMPæ¶æ„æ˜¯å¦‚ä½•å·¥ä½œçš„"><a href="#1-2-LNMPæ¶æ„æ˜¯å¦‚ä½•å·¥ä½œçš„" class="headerlink" title="1.2 LNMPæ¶æ„æ˜¯å¦‚ä½•å·¥ä½œçš„"></a>1.2 LNMPæ¶æ„æ˜¯å¦‚ä½•å·¥ä½œçš„</h3><p>æµè§ˆå™¨ â€“httpâ€“&gt; Nginx(fastcgi_pass) â€“fastcgiâ€“&gt;php(fastcgi_fpmè°ƒåŠ¨wrapperå†è°ƒåŠ¨phpè§£æå†è°ƒç”¨mysql)</p>
<p>å¤§è‡´æµç¨‹ï¼š</p>
<p>ç”¨æˆ·åœ¨æµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚çš„æ˜¯é™æ€èµ„æºï¼ŒNginxåˆ™ç›´æ¥è¿”å›ï¼Œå¦‚æœè¯·æ±‚çš„æ˜¯åŠ¨æ€èµ„æºï¼ŒNginxä¼šé€šè¿‡fastcgiåè®®ï¼Œå°†è¯·æ±‚äº¤ç»™PHPæœåŠ¡å™¨ï¼Œå†è¿”å›åŠ¨æ€èµ„æºã€‚</p>
<h3 id="1-3-LNMPå’ŒLAMPçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"><a href="#1-3-LNMPå’ŒLAMPçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="1.3 LNMPå’ŒLAMPçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"></a>1.3 LNMPå’ŒLAMPçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</h3><p>nginx æ˜¯ä»¥fastcgiåè®®è°ƒç”¨çš„php<br>apacheæ˜¯ä»¥æ¨¡å—çš„æ–¹å¼åŠ è½½çš„php</p>
<h2 id="äºŒã€LNMPæ¶æ„ç®€å•æ­å»º"><a href="#äºŒã€LNMPæ¶æ„ç®€å•æ­å»º" class="headerlink" title="äºŒã€LNMPæ¶æ„ç®€å•æ­å»º"></a>äºŒã€LNMPæ¶æ„ç®€å•æ­å»º</h2><p>1ã€å‡†å¤‡ä¸€å°åä¸ºnginxçš„æœåŠ¡å™¨</p>
<p>2ã€ä½¿ç”¨å®˜æ–¹ä»“åº“å®‰è£…nginx</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ·»åŠ å®‰è£…æº</span></span><br><span class="line">[root@nginx ~]# cat /etc/yum.repos.d/nginx.repo </span><br><span class="line">[nginx]</span><br><span class="line">name=nginx repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/7/$basearch/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å®‰è£…Nginx</span></span><br><span class="line">[root@nginx ~]# yum install nginx -y</span><br></pre></td></tr></table></figure>

<p>3ã€å®‰è£…php7.1</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@nginx ~]# yum remove php-mysql-5.4 php php-fpm php-common # å¸è½½é»˜è®¤5.4ç‰ˆæœ¬çš„php</span><br><span class="line">[root@nginx ~]# cat /etc/yum.repos.d/php.repo</span><br><span class="line">[php]</span><br><span class="line">name = php Repository</span><br><span class="line">baseurl = http://us-east.repo.webtatic.com/yum/el7/x86_64/</span><br><span class="line">gpgcheck = 0</span><br><span class="line"></span><br><span class="line">[root@nginx ~]# yum -y install php71w php71w-cli php71w-common php71w-devel php71w-embedded php71w-gd php71w-mcrypt php71w-mbstring php71w-pdo php71w-xml php71w-fpm php71w-mysqlnd php71w-opcache php71w-pecl-memcached php71w-pecl-redis php71w-pecl-mongodb</span><br></pre></td></tr></table></figure>

<p>4ã€å®‰è£…mariaæ•°æ®åº“</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@nginx ~]# yum install mariadb-server mariadb -y</span><br></pre></td></tr></table></figure>

<p>5ã€é…ç½®nginxå’Œphpé›†æˆ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# cd /etc/nginx/conf.d/</span><br><span class="line">[root@web01 conf.d]# cat php.conf </span><br><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name php.oldboy.com;</span><br><span class="line">	root /code;</span><br><span class="line"></span><br><span class="line">	location / &#123;</span><br><span class="line">		index index.php index.html;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	location ~ \.php$ &#123;</span><br><span class="line">		fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">		fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">		include fastcgi_params;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6ã€é‡è½½nginx</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# nginx -t</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br><span class="line">[root@web01 conf.d]# systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>7ã€å¯åŠ¨php-fpmï¼Œå¹¶åŠ å…¥å¼€æœºè‡ªå¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# systemctl start php-fpm</span><br><span class="line">[root@web01 conf.d]# systemctl enable  php-fpm</span><br></pre></td></tr></table></figure>

<p>8ã€å‡†å¤‡ä¸€ä¸ªphpæ–‡ä»¶ï¼Œæµ‹è¯•nginxå’Œphpæ˜¯å¦ç»§æ‰¿æˆåŠŸ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# cat /code/page.php</span><br><span class="line">&lt;?php</span><br><span class="line">	phpinfo();</span><br><span class="line">?&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> æµ‹è¯•ï¼šç½‘é¡µè®¿é—®:http://php.oldboy.com/page.php</span></span><br></pre></td></tr></table></figure>

<p>9ã€å¯åŠ¨æ•°æ®åº“</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# systemctl start mariadb</span><br><span class="line">[root@web01 conf.d]# systemctl enable mariadb</span><br><span class="line">[root@web01 conf.d]# mysqladmin password &#x27;Bgx123.com&#x27;		#é…ç½®å¯†ç ï¼ˆé»˜è®¤mysqlæ˜¯ç©ºå¯†ç ï¼‰</span><br><span class="line">[root@web01 conf.d]# mysql -uroot -pBgx123.com				#ä½¿ç”¨è´¦å·å’Œå¯†ç ç™»å½•mysql</span><br></pre></td></tr></table></figure>

<p>10ã€å‡†å¤‡ä¸€ä¸ªphpæ–‡ä»¶ï¼Œæµ‹è¯•æ˜¯å¦å¯ä»¥æ­£å¸¸è¿æ¥æ•°æ®åº“</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">  $servername = &quot;localhost&quot;;</span><br><span class="line">  $username = &quot;root&quot;;</span><br><span class="line">  $password = &quot;Bgx123.com&quot;;</span><br><span class="line"></span><br><span class="line">  // åˆ›å»ºè¿æ¥</span><br><span class="line">  $conn = mysqli_connect($servername, $username, $password);</span><br><span class="line"></span><br><span class="line">  // æ£€æµ‹è¿æ¥</span><br><span class="line">  if (!$conn) &#123;</span><br><span class="line">      die(&quot;Connection failed: &quot; . mysqli_connect_error()); // æ³¨æ„æ ¼å¼</span><br><span class="line">  &#125;</span><br><span class="line">  echo &quot;phpè¿æ¥MySQLæ•°æ®åº“æˆåŠŸ&quot;;</span><br><span class="line">  ?&gt;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€æ¡ˆä¾‹-æ­å»ºwordpressåšå®¢"><a href="#ä¸‰ã€æ¡ˆä¾‹-æ­å»ºwordpressåšå®¢" class="headerlink" title="ä¸‰ã€æ¡ˆä¾‹-æ­å»ºwordpressåšå®¢"></a>ä¸‰ã€æ¡ˆä¾‹-æ­å»ºwordpressåšå®¢</h2><h3 id="3-1-ç¯å¢ƒå‡†å¤‡"><a href="#3-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="3.1 ç¯å¢ƒå‡†å¤‡"></a>3.1 ç¯å¢ƒå‡†å¤‡</h3><table>
<thead>
<tr>
<th>ç”¨é€”</th>
<th>å…¬ç½‘IPåœ°å€</th>
<th>å†…ç½‘IPåœ°å€</th>
</tr>
</thead>
<tbody><tr>
<td>webæœåŠ¡å™¨01</td>
<td>10.0.0.7</td>
<td>172.16.1.7</td>
</tr>
</tbody></table>
<h3 id="3-2-éƒ¨ç½²å®‰è£…"><a href="#3-2-éƒ¨ç½²å®‰è£…" class="headerlink" title="3.2 éƒ¨ç½²å®‰è£…"></a>3.2 éƒ¨ç½²å®‰è£…</h3><p>1ã€æ·»åŠ nginxé…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# cat blog.oldboy.com.conf </span><br><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name blog.oldboy.com;</span><br><span class="line">	root /code/wordpress;</span><br><span class="line"></span><br><span class="line">	location / &#123;</span><br><span class="line">		index index.php index.html;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	location ~ \.php$ &#123;</span><br><span class="line">		fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">		fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">		include fastcgi_params;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€æ ¹æ®nginxä¸­å®šä¹‰çš„å†…å®¹ï¼Œåˆ›å»ºç«™ç‚¹ç›®å½•å¹¶è¿›è¡Œæˆæƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# mkdir /code</span><br><span class="line">[root@web01 conf.d]# cd /code</span><br><span class="line">[root@web01 code]# wget https://cn.wordpress.org/wordpress-5.0.3-zh_CN.tar.gz</span><br><span class="line">[root@web01 code]# tar xf wordpress-5.0.3-zh_CN.tar.gz</span><br></pre></td></tr></table></figure>

<p>3ã€ä¿®æ”¹nginxä¸php-fpmçš„è¿è¡Œç”¨æˆ·ä¸ºwwwï¼Œå¹¶æˆæƒä»£ç å±ä¸»å’Œå±ç»„éƒ½ä¸ºwww</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰è¯¥ç”¨æˆ·ï¼Œå¯åŠ¨ä¸€å®šä¼šæŠ¥é”™</span></span><br><span class="line">[root@web01 code]# groupadd -g 666 www</span><br><span class="line">[root@web01 code]# useradd -u666 -g666 www</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹nginxä¸php-fpmç®¡ç†è¿›ç¨‹ï¼Œçš„è¿è¡Œèº«ä»½ä¸ºwww</span><br><span class="line">[root@web01 code]# sed -i &#x27;/^user /c user  www;&#x27; /etc/nginx/nginx.conf</span><br><span class="line">[root@web01 code]# sed -i &#x27;/^user/c user = www&#x27; /etc/php-fpm.d/www.conf </span><br><span class="line">[root@web01 code]# sed -i &#x27;/^group/c group = www&#x27; /etc/php-fpm.d/www.conf </span><br><span class="line"></span><br><span class="line">ä¸€å®šè¦é‡å¯æ‰ç”Ÿæ•ˆ</span><br><span class="line">[root@web01 code]# systemctl restart nginx</span><br><span class="line">[root@web01 code]# systemctl restart php-fpm</span><br><span class="line"></span><br><span class="line">æœ€åæˆæƒä»£ç ä¸ºwww</span><br><span class="line">[root@web01 code]# chown -R www.www /code/wordpress	</span><br></pre></td></tr></table></figure>

<p>4ã€åˆ›å»ºæ•°æ®åº“</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">MariaDB [(none)]&gt; create database wordpress;			#åˆ›å»ºä¸€ä¸ªåº“ï¼Œåç§°å«wordpress</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show databases;						#æŸ¥è¯¢è¯¥å°æ•°æ®åº“æœåŠ¡æœ‰å¤šå°‘ä¸ªåº“</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| test               |</span><br><span class="line">| wordpress          |</span><br><span class="line">+--------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>5ã€è§£å†³nginxä¸Šä¼ æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆé»˜è®¤1Mï¼Œè¶…è¿‡å¤§å°ä¼šæŠ¥413ï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">åœ¨wordpressçš„nginxé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼šclient_max_body_size 100m;</span><br><span class="line">[root@web01 code]# cat /etc/nginx/conf.d/blog.oldboy.com.conf </span><br><span class="line">server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name blog.oldboy.com;</span><br><span class="line">        root /code/wordpress;</span><br><span class="line">        client_max_body_size 100m;  # é»˜è®¤1Mï¼Œè¶…è¿‡å¤§å°ä¼šæŠ¥413</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">                index index.php index.html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ \.php$ &#123;</span><br><span class="line">                fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">                include fastcgi_params;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">é‡å¯nginxï¼šsystemctl restart nginx	</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æµ‹è¯•åœ¨wordpressé¡µé¢ä¸Šä¼ ä¸»é¢˜æˆ–è€…å†™æ–‡ç« ä¸Šä¼ å›¾ç‰‡ï¼Œå‡å‡ºç°500æŠ¥é”™<br>æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶&#x2F;var&#x2F;log&#x2F;nginx&#x2F;err.log<br>2021&#x2F;08&#x2F;16 18:59:31 [crit] 1228#1228: *2 open() â€œ&#x2F;var&#x2F;lib&#x2F;nginx&#x2F;tmp&#x2F;client_body&#x2F;0000000001â€ failed (13: Permission denied), client: 10.0.0.1, server: php.gs.com, request: â€œPOST &#x2F;wp-admin&#x2F;update.php?action&#x3D;upload-theme HTTP&#x2F;1.1â€, host: â€œphp.gs.comâ€, referrer: â€œ<a href="http://php.gs.com/wp-admin/theme-install.php?browse=popular&quot;">http://php.gs.com/wp-admin/theme-install.php?browse=popular&quot;</a><br>è§£å†³æ–¹æ³•ï¼Œå‚è€ƒ<a href="https://blog.csdn.net/qq_15941409/article/details/114640122">https://blog.csdn.net/qq_15941409/article/details/114640122</a><br>chown www:www -R &#x2F;var&#x2F;lib&#x2F;nginx&#x2F;</p>
</blockquote>
<h2 id="å››ã€æ¡ˆä¾‹-æ­å»ºwecenterçŸ¥ä¹"><a href="#å››ã€æ¡ˆä¾‹-æ­å»ºwecenterçŸ¥ä¹" class="headerlink" title="å››ã€æ¡ˆä¾‹-æ­å»ºwecenterçŸ¥ä¹"></a>å››ã€æ¡ˆä¾‹-æ­å»ºwecenterçŸ¥ä¹</h2><h3 id="4-1-éƒ¨ç½²å®‰è£…"><a href="#4-1-éƒ¨ç½²å®‰è£…" class="headerlink" title="4.1 éƒ¨ç½²å®‰è£…"></a>4.1 éƒ¨ç½²å®‰è£…</h3><p>1ã€æ·»åŠ nginxé…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name zh.oldboy.com;</span><br><span class="line">	root /code/zh;</span><br><span class="line">	client_max_body_size 100m;</span><br><span class="line"></span><br><span class="line">	location / &#123;</span><br><span class="line">		index index.php index.html;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	location ~ \.php$ &#123;</span><br><span class="line">		fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">		fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">		include fastcgi_params;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@web01 code]# systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>2ã€wencenteréƒ¨ç½²</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 code]# rz -E WeCenter_3-2-1.zip</span><br><span class="line">[root@web01 code]# unzip WeCenter_3-2-1.zip</span><br><span class="line">[root@web01 code]# mv WeCenter_3-2-1 zh</span><br><span class="line">[root@web01 code]# chown -R www.www zh/</span><br></pre></td></tr></table></figure>

<p>3ã€é…ç½®æ•°æ®åº“</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 code]# mysql -uroot -pBgx123.com</span><br><span class="line">MariaDB [(none)]&gt; create database zh;</span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| test               |</span><br><span class="line">| wordpress          |</span><br><span class="line">| zh                 |</span><br><span class="line">+--------------------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€æ¡ˆä¾‹-æ­å»ºedusohoåœ¨çº¿è§†é¢‘æ•™è‚²"><a href="#äº”ã€æ¡ˆä¾‹-æ­å»ºedusohoåœ¨çº¿è§†é¢‘æ•™è‚²" class="headerlink" title="äº”ã€æ¡ˆä¾‹-æ­å»ºedusohoåœ¨çº¿è§†é¢‘æ•™è‚²"></a>äº”ã€æ¡ˆä¾‹-æ­å»ºedusohoåœ¨çº¿è§†é¢‘æ•™è‚²</h2><h3 id="5-1-éƒ¨ç½²å®‰è£…"><a href="#5-1-éƒ¨ç½²å®‰è£…" class="headerlink" title="5.1 éƒ¨ç½²å®‰è£…"></a>5.1 éƒ¨ç½²å®‰è£…</h3><p>1ã€æ·»åŠ nginxé…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 code]# cat /etc/nginx/conf.d/edu.oldboy.com.conf </span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name edu.oldboy.com;</span><br><span class="line">    root /code/edusoho/web;</span><br><span class="line">    client_max_body_size 200m;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        index app.php;</span><br><span class="line">        try_files $uri @rewriteapp;</span><br><span class="line">    &#125;</span><br><span class="line">    location @rewriteapp &#123;</span><br><span class="line">        rewrite ^(.*)$ /app.php/$1 last;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ ^/udisk &#123;</span><br><span class="line">        internal;</span><br><span class="line">        root /code/edusoho/app/data/;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location ~ ^/(app|app_dev)\.php(/|$) &#123;</span><br><span class="line">        fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">        fastcgi_split_path_info ^(.+\.php)(/.*)$;</span><br><span class="line">        include fastcgi_params;</span><br><span class="line">        fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;</span><br><span class="line">        fastcgi_param  HTTPS              off;</span><br><span class="line">        fastcgi_param HTTP_X-Sendfile-Type X-Accel-Redirect;</span><br><span class="line">        fastcgi_param HTTP_X-Accel-Mapping /udisk=/code/edusoho/app/data/udisk;</span><br><span class="line">        fastcgi_buffer_size 128k;</span><br><span class="line">        fastcgi_buffers 8 128k;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # é…ç½®è®¾ç½®å›¾ç‰‡æ ¼å¼æ–‡ä»¶</span><br><span class="line">    location ~* \.(jpg|jpeg|gif|png|ico|swf)$ &#123;</span><br><span class="line">        # è¿‡æœŸæ—¶é—´ä¸º3å¹´</span><br><span class="line">        expires 3y;</span><br><span class="line">        # å…³é—­æ—¥å¿—è®°å½•</span><br><span class="line">        access_log off;</span><br><span class="line">        # å…³é—­gzipå‹ç¼©ï¼Œå‡å°‘CPUæ¶ˆè€—ï¼Œå› ä¸ºå›¾ç‰‡çš„å‹ç¼©ç‡ä¸é«˜ã€‚</span><br><span class="line">        gzip off;</span><br><span class="line">    &#125;</span><br><span class="line">    # é…ç½®css/jsæ–‡ä»¶</span><br><span class="line">    location ~* \.(css|js)$ &#123;</span><br><span class="line">        access_log off;</span><br><span class="line">        expires 3y;</span><br><span class="line">    &#125;</span><br><span class="line">    # ç¦æ­¢ç”¨æˆ·ä¸Šä¼ ç›®å½•ä¸‹æ‰€æœ‰.phpæ–‡ä»¶çš„è®¿é—®ï¼Œæé«˜å®‰å…¨æ€§</span><br><span class="line">    location ~ ^/files/.*\.(php|php5)$ &#123;</span><br><span class="line">        deny all;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # ä»¥ä¸‹é…ç½®å…è®¸è¿è¡Œ.phpçš„ç¨‹åºï¼Œæ–¹ä¾¿äºå…¶ä»–ç¬¬ä¸‰æ–¹ç³»ç»Ÿçš„é›†æˆã€‚</span><br><span class="line">    location ~ \.php$ &#123;</span><br><span class="line">        fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">        fastcgi_split_path_info ^(.+\.php)(/.*)$;</span><br><span class="line">        include fastcgi_params;</span><br><span class="line">        fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;</span><br><span class="line">        fastcgi_param  HTTPS              off;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€ä¸‹è½½edusoho,å¹¶æˆæƒæ–‡ä»¶å¤¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget http://download.edusoho.com/edusoho-8.2.17.tar.gz</span><br><span class="line">tar xf edusoho-8.2.17.tar.gz</span><br><span class="line">chown -R www.www edusoho</span><br></pre></td></tr></table></figure>

<p>3ã€è°ƒæ•´phpçš„ä¸Šä¼ å¤§å°(ä¸Šä¼ æ–‡ä»¶é»˜è®¤æœ‰é™åˆ¶å¤§å°)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 ~]# vim /etc/php.ini</span><br><span class="line">post_max_size = 200M</span><br><span class="line">upload_max_filesize = 200M</span><br><span class="line">[root@web01 code]# systemctl restart php-fpm</span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€å„å¼€æºé¡¹ç›®ç½‘ç«™"><a href="#å…­ã€å„å¼€æºé¡¹ç›®ç½‘ç«™" class="headerlink" title="å…­ã€å„å¼€æºé¡¹ç›®ç½‘ç«™"></a>å…­ã€å„å¼€æºé¡¹ç›®ç½‘ç«™</h2><p>phpmyadmin	<a href="https://www.phpmyadmin.net/">https://www.phpmyadmin.net/</a><br>zblog	<a href="https://www.zblogcn.com/">https://www.zblogcn.com/</a><br>wordpress	<a href="https://cn.wordpress.org/">https://cn.wordpress.org/</a><br>wecenter	<a href="http://www.wecenter.com/downloads/">http://www.wecenter.com/downloads/</a><br>edusohu	<a href="http://www.edusoho.com/open/show">http://www.edusoho.com/open/show</a></p>
]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--07--Nginx(äºŒ)å¸¸ç”¨å®˜æ–¹æ¨¡å—</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/08-Nginx(%E4%BA%8C)%E5%B8%B8%E7%94%A8%E5%AE%98%E6%96%B9%E6%A8%A1%E5%9D%97/</url>
    <content><![CDATA[<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>æœ¬ç¯‡ä¸»è¦ä»‹ç»Nginxçš„å¸¸ç”¨å®˜æ–¹æ¨¡å—</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<h2 id="ä¸€ã€ç›®å½•ç´¢å¼•-autoindex"><a href="#ä¸€ã€ç›®å½•ç´¢å¼•-autoindex" class="headerlink" title="ä¸€ã€ç›®å½•ç´¢å¼•-autoindex"></a>ä¸€ã€ç›®å½•ç´¢å¼•-autoindex</h2><h3 id="1-1-ä½¿ç”¨æ–¹æ³•1"><a href="#1-1-ä½¿ç”¨æ–¹æ³•1" class="headerlink" title="1.1 ä½¿ç”¨æ–¹æ³•1"></a>1.1 ä½¿ç”¨æ–¹æ³•1</h3><p>æŒ‰æ­¤æ–¹æ³•è®¾ç½®åï¼Œè®¿é—®ç½‘é¡µ<a href="http://module.test.comå°†æ˜¾ç¤ºæ–‡ä»¶ç›®å½•/">http://module.test.comå°†æ˜¾ç¤ºæ–‡ä»¶ç›®å½•</a></p>
<p>å®é™…ç›®å½•ä½äº: &#x2F;module</p>
<p>a.å‡†å¤‡é…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 module]# cat /etc/nginx/conf.d/autoindex.conf</span><br><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name module.test.com;</span><br><span class="line">	charset utf-8,gbk; # è§£å†³ä¸­æ–‡ä¹±ç </span><br><span class="line"></span><br><span class="line">	location / &#123;</span><br><span class="line">		root /module;</span><br><span class="line">		autoindex on;	# å¼€å¯ç›®å½•ç´¢å¼•</span><br><span class="line">		autoindex_exact_size off;	# æ˜¾ç¤ºæ–‡ä»¶å¤§å°ï¼Œé»˜è®¤ä¸ºonæ˜¾ç¤ºå­—èŠ‚ï¼Œoffæ˜¾ç¤ºå¤§æ¦‚å•ä½</span><br><span class="line">		autoindex_localtime on;	# é»˜è®¤offæ˜¾ç¤ºUTCæ—¶é—´ï¼Œonæ˜¾ç¤ºæœ¬åœ°æ—¶é—´</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>b.å‡†å¤‡å¯¹åº”çš„ç›®å½•ï¼Œå¹¶å¾€ç›®å½•ä¸­æ·»åŠ æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir /module/&#123;centos,ubuntu,redhat&#125;/ -p</span><br></pre></td></tr></table></figure>

<p>c.æ£€æŸ¥è¯­æ³•å¹¶é‡æ–°åŠ è½½nginx</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nginx -t </span><br><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<h3 id="1-2-ä½¿ç”¨æ–¹æ³•2ï¼ˆæ¨èï¼‰"><a href="#1-2-ä½¿ç”¨æ–¹æ³•2ï¼ˆæ¨èï¼‰" class="headerlink" title="1.2 ä½¿ç”¨æ–¹æ³•2ï¼ˆæ¨èï¼‰"></a>1.2 ä½¿ç”¨æ–¹æ³•2ï¼ˆæ¨èï¼‰</h3><p>æŒ‰æ­¤æ–¹æ³•è®¾ç½®åï¼Œè®¿é—®ç½‘é¡µ<a href="http://www.module.test.com/download%E5%B0%86%E6%98%BE%E7%A4%BA%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95,%E4%B8%BB%E9%A1%B5%E5%8F%AF%E6%AD%A3%E5%B8%B8%E8%AE%BF%E9%97%AE">http://www.module.test.com/downloadå°†æ˜¾ç¤ºæ–‡ä»¶ç›®å½•,ä¸»é¡µå¯æ­£å¸¸è®¿é—®</a></p>
<p>å®é™…ç›®å½•ä½äºï¼š&#x2F;module&#x2F;download</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 module]# cat /etc/nginx/conf.d/autoindex.conf </span><br><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name module.oldboy.com;</span><br><span class="line">	charset utf-8,gbk;</span><br><span class="line"></span><br><span class="line">	location / &#123;	# ä¸»é¡µå¯ä»¥æ­£å¸¸è®¿é—®</span><br><span class="line">		root /code;</span><br><span class="line">		index index.html index.htm;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	location /download &#123;	# å½“è®¿é—®http://xxxx/downloadåˆ™è®¿é—®/module/downloadæ–‡ä»¶å¤¹ï¼Œæ˜¾ç¤ºç›®å½•ç´¢å¼•</span><br><span class="line">		root /module; # æ­¤æ—¶ï¼Œè®¿é—®çš„æ–‡ä»¶å¤¹æ˜¯/module/download</span><br><span class="line">		autoindex on;</span><br><span class="line">		autoindex_exact_size off;</span><br><span class="line">		autoindex_localtime on;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€-çŠ¶æ€ç›‘æ§é¡µé¢-stub-status"><a href="#äºŒã€-çŠ¶æ€ç›‘æ§é¡µé¢-stub-status" class="headerlink" title="äºŒã€ çŠ¶æ€ç›‘æ§é¡µé¢-stub_status"></a>äºŒã€ çŠ¶æ€ç›‘æ§é¡µé¢-stub_status</h2><blockquote>
<p>éœ€è¦nginxé™„å¸¦â€“with-http_stub_status_moduleæ¨¡å—æ‰èƒ½ä½¿ç”¨</p>
</blockquote>
<h3 id="2-1-ä½¿ç”¨æ–¹æ³•"><a href="#2-1-ä½¿ç”¨æ–¹æ³•" class="headerlink" title="2.1 ä½¿ç”¨æ–¹æ³•"></a>2.1 ä½¿ç”¨æ–¹æ³•</h3><p>a.è®¾ç½®é…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">åœ¨/etc/nginx/conf.d/autoindex.confé‡Œé¢é™„åŠ å†…å®¹</span><br><span class="line">location /nginx_status &#123;</span><br><span class="line">	stub_status;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>b.é‡å¯NginxæœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">é‡å¯nginxæœåŠ¡</span><br><span class="line">systemctl reload nginx</span><br></pre></td></tr></table></figure>

<p>c.ç½‘é¡µè®¿é—®æµ‹è¯•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è®¿é—®:</span><br><span class="line">http://module.test.com/nginx_status</span><br><span class="line">ç½‘é¡µæ˜¾ç¤ºï¼š</span><br><span class="line">Active connections: 2 </span><br><span class="line">server accepts handled requests</span><br><span class="line">		3 			3 	33 </span><br><span class="line">Reading: 0 Writing: 1 Waiting: 1 </span><br></pre></td></tr></table></figure>

<p>d.é€šè¿‡é€‰é¡¹å…³é—­é•¿è¿æ¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ³¨æ„, ä¸€æ¬¡TCPçš„è¿æ¥ï¼Œå¯ä»¥å‘èµ·å¤šæ¬¡httpçš„è¯·æ±‚, å¦‚ä¸‹å‚æ•°å¯é…ç½®è¿›è¡ŒéªŒè¯</span></span><br><span class="line">keepalive_timeout  0;   # ç±»ä¼¼äºå…³é—­é•¿è¿æ¥</span><br><span class="line">keepalive_timeout  65;  # 65sæ²¡æœ‰æ´»åŠ¨åˆ™æ–­å¼€è¿æ¥</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">åœ¨/etc/nginx/conf.d/autoindex.confé‡Œé¢çš„é™„åŠ å†…å®¹ä¿®æ”¹ä¸º</span><br><span class="line">location /nginx_status &#123;</span><br><span class="line">	stub_status;</span><br><span class="line">	keepalive_timeout  0; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>e.å†æ¬¡æµ‹è¯•ç½‘é¡µè®¿é—®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">å…³é—­é•¿è¿æ¥åçš„æ˜¾ç¤ºï¼š</span><br><span class="line">Active connections: 2 </span><br><span class="line">server accepts handled requests</span><br><span class="line"> 21 21 20 </span><br><span class="line">Reading: 0 Writing: 1 Waiting: 1 </span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯è§æ¯æ¬¡HTTPè¯·æ±‚éƒ½è¦é‡æ–°å‘èµ·TCPè¿æ¥</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-ç›‘æ§é¡µé¢å†…å®¹è§£é‡Š"><a href="#2-2-ç›‘æ§é¡µé¢å†…å®¹è§£é‡Š" class="headerlink" title="2.2 ç›‘æ§é¡µé¢å†…å®¹è§£é‡Š"></a>2.2 ç›‘æ§é¡µé¢å†…å®¹è§£é‡Š</h3><table>
<thead>
<tr>
<th>å‚æ•°é¡¹</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>Active connections</td>
<td>å½“å‰æ´»åŠ¨å®¢æˆ·ç«¯è¿æ¥æ•°ï¼ŒåŒ…æ‹¬Waitingç­‰å¾…è¿æ¥æ•°</td>
</tr>
<tr>
<td>accepts</td>
<td>å·²æ¥å—æ€»çš„TCPè¿æ¥æ•°</td>
</tr>
<tr>
<td>handled</td>
<td>å·²å¤„ç†æ€»çš„TCPè¿æ¥æ•°</td>
</tr>
<tr>
<td>requests</td>
<td>å®¢æˆ·ç«¯æ€»çš„httpè¯·æ±‚æ•°</td>
</tr>
<tr>
<td>Reading</td>
<td>å½“å‰nginxè¯»å–è¯·æ±‚å¤´çš„è¿æ¥æ•°</td>
</tr>
<tr>
<td>Writing</td>
<td>å½“å‰nginxå°†å“åº”å†™å›å®¢æˆ·ç«¯çš„è¿æ¥æ•°</td>
</tr>
<tr>
<td>Waiting</td>
<td>å½“å‰ç­‰å¾…è¯·æ±‚çš„ç©ºé—²å®¢æˆ·ç«¯è¿æ¥æ•°</td>
</tr>
</tbody></table>
<h2 id="ä¸‰ã€åŸºäºIPçš„è®¿é—®æ§åˆ¶"><a href="#ä¸‰ã€åŸºäºIPçš„è®¿é—®æ§åˆ¶" class="headerlink" title="ä¸‰ã€åŸºäºIPçš„è®¿é—®æ§åˆ¶"></a>ä¸‰ã€åŸºäºIPçš„è®¿é—®æ§åˆ¶</h2><blockquote>
<p>æŸç½‘é¡µå†…çš„æ•°æ®æ¯”è¾ƒé‡è¦ï¼Œæ€ä¹ˆæ§åˆ¶é‚£äº›äººå¯ä»¥è®¿é—®ï¼Œé‚£äº›äººä¸èƒ½è®¿é—®å‘¢ï¼Ÿ</p>
</blockquote>
<p>å¯ä»¥æ¥æºçš„IPåœ°å€åšé™åˆ¶ï¼Œå¸¸ç”¨çš„ä¸‰ç§æ§åˆ¶æ–¹æ³•ï¼š</p>
<ul>
<li><p>æ‹’ç»10.0.0.1æ¥æºIPè®¿é—®ï¼Œå…¶ä»–äººå…è®¸</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">location /nginx_status &#123;</span><br><span class="line">    stub_status;</span><br><span class="line">    deny 10.0.0.1/32;</span><br><span class="line">    allow all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å…è®¸10.0.0.1æ¥æºIPè®¿é—®ï¼Œå…¶ä»–äººå…¨éƒ¨æ‹’ç»</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">location /nginx_status &#123;</span><br><span class="line">    stub_status;</span><br><span class="line">    allow 10.0.0.1/32;</span><br><span class="line">    deny all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®é™…é…ç½®ç›‘æ§NginxçŠ¶æ€æ—¶ï¼Œä»…å…è®¸è¯¥æœåŠ¡å™¨çš„å›ç¯åœ°å€è®¿é—®127.0.0.1</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æœ€å®‰å…¨</span></span><br><span class="line">location /nginx_status &#123;</span><br><span class="line">    stub_status;</span><br><span class="line">    allow 127.0.0.1;</span><br><span class="line">    deny all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="å››ã€åŸºäºå¯†ç çš„èº«ä»½éªŒè¯"><a href="#å››ã€åŸºäºå¯†ç çš„èº«ä»½éªŒè¯" class="headerlink" title="å››ã€åŸºäºå¯†ç çš„èº«ä»½éªŒè¯"></a>å››ã€åŸºäºå¯†ç çš„èº«ä»½éªŒè¯</h2><blockquote>
<p>é‡è¦æ•°æ®ç½‘ç«™ï¼Œè¦å®ç°éœ€è¦ç”¨æˆ·åå¯†ç è®¤è¯ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿ</p>
</blockquote>
<ol>
<li><p>ç”Ÿæˆä¸€ä¸ªå¯†ç æ–‡ä»¶ï¼Œå¯†ç æ–‡ä»¶çš„æ ¼å¼  name:password(åŠ å¯†)  ï¼ˆå»ºè®®ä½¿ç”¨htpasswdï¼‰  openssl password</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# yum install httpd-tools -y</span><br><span class="line">[root@web01 conf.d]# htpasswd -c -b /etc/nginx/auth_conf oldboy oldboy</span><br><span class="line">[root@web01 conf.d]# cat /etc/nginx/auth_conf</span><br><span class="line">oldboy:$apr1$Kp87VSae$658Nt5bm4iiblQkUvP7u61</span><br></pre></td></tr></table></figure>
</li>
<li><p>é…ç½®Nginxï¼Œé™åˆ¶å¯¹åº”çš„èµ„æº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">location /download &#123;</span><br><span class="line">	root /module;</span><br><span class="line">	autoindex on;</span><br><span class="line">	autoindex_exact_size off;</span><br><span class="line">	autoindex_localtime on;</span><br><span class="line">	</span><br><span class="line">	auth_basic &quot;Please Password!!!&quot;;</span><br><span class="line">	auth_basic_user_file /etc/nginx/auth_conf; </span><br><span class="line"><span class="meta">	#</span><span class="bash"> æ³¨æ„è®¤è¯æ–‡ä»¶è·¯å¾„ï¼Œå¦åˆ™ç½‘é¡µè®¤è¯åä¼š403ï¼Œå¯æ˜¯ä¸ºä»€ä¹ˆæ”¾å…¶ä»–ç›®å½•å°±ä¸è¡Œï¼Ÿ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="äº”ã€Nginxè¿æ¥é™åˆ¶"><a href="#äº”ã€Nginxè¿æ¥é™åˆ¶" class="headerlink" title="äº”ã€Nginxè¿æ¥é™åˆ¶"></a>äº”ã€Nginxè¿æ¥é™åˆ¶</h2><blockquote>
<p>ç½‘ç«™è¯·æ±‚æ•°å¤ªå¤šï¼Œä¸å ªé‡è´Ÿäº†ï¼Œæ€ä¹ˆä¿éšœéƒ¨åˆ†ç”¨æˆ·èƒ½å¤Ÿæ­£å¸¸è®¿é—®</p>
</blockquote>
<h3 id="5-1-é™åˆ¶è¿æ¥æ•°"><a href="#5-1-é™åˆ¶è¿æ¥æ•°" class="headerlink" title="5.1 é™åˆ¶è¿æ¥æ•°"></a>5.1 é™åˆ¶è¿æ¥æ•°</h3><p><code>è®¾ç½®å…±äº«å†…å­˜åŒºåŸŸå’Œç»™å®šé”®å€¼çš„æœ€å¤§å…è®¸è¿æ¥æ•°ã€‚è¶…è¿‡æ­¤é™åˆ¶æ—¶ï¼ŒæœåŠ¡å™¨å°†è¿”å›é”™è¯¯ä»¥å›å¤è¯·æ±‚</code></p>
<ul>
<li><p>ç¼–è¾‘é…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> httpæ ‡ç­¾æ®µå®šä¹‰è¿æ¥é™åˆ¶</span></span><br><span class="line">http&#123;</span><br><span class="line">    limit_conn_zone $binary_remote_addr zone=conn_zone:10m;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    # åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥</span><br><span class="line">    limit_conn conn_zone 1; </span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root /code;</span><br><span class="line">        index index.html;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨abå·¥å…·è¿›è¡Œå‹åŠ›æµ‹è¯•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä½¿ç”¨abå·¥å…·è¿›è¡Œå‹åŠ›æµ‹è¯•</span></span><br><span class="line">[root@xuliangwei ~]# yum install -y httpd-tools</span><br><span class="line">[root@xuliangwei ~]# ab -n 500 -c 2  http://127.0.0.1/index.html</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯è§500æ¬¡ä¸­æœ‰å¤±è´¥çš„è¯·æ±‚</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹æ‹¦æˆªæ—¥å¿—</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tail -f /var/log/nginx/error.log</span><br><span class="line">ç±»ä¼¼äº</span><br><span class="line">2019/01/14 11:11:22 [error] 29962#29962: *19 limiting connections by zone &quot;conn_zone&quot;, client: 47.110.176.164, server: www.xuliangwei.com, request: &quot;GET / HTTP/1.1&quot;, host: &quot;www.xuliangwei.com&quot;</span><br><span class="line">2019/01/14 11:11:23 [error] 29962#29962: *19 limiting connections by zone &quot;conn_zone&quot;, client: 47.110.176.164, server: www.xuliangwei.com, request: &quot;GET / HTTP/1.1&quot;, host: &quot;www.xuliangwei.com&quot;</span><br><span class="line">2019/01/14 11:11:25 [error] 29962#29962: *19 limiting connections by zone &quot;conn_zone&quot;, client: 47.110.176.164, server: www.xuliangwei.com, request: &quot;GET / HTTP/1.1&quot;, host: &quot;www.xuliangwei.com&quot;</span><br><span class="line">2019/01/14 11:11:25 [error] 29962#29962: *19 limiting connections by zone &quot;conn_zone&quot;, client: 47.110.176.164, server: www.xuliangwei.com, request: &quot;GET / HTTP/1.1&quot;, host: &quot;www.xuliangwei.com&quot;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="5-2-é™åˆ¶è¯·æ±‚æ•°ï¼ˆæ›´ç²¾å‡†ï¼‰"><a href="#5-2-é™åˆ¶è¯·æ±‚æ•°ï¼ˆæ›´ç²¾å‡†ï¼‰" class="headerlink" title="5.2 é™åˆ¶è¯·æ±‚æ•°ï¼ˆæ›´ç²¾å‡†ï¼‰"></a>5.2 é™åˆ¶è¯·æ±‚æ•°ï¼ˆæ›´ç²¾å‡†ï¼‰</h3><p><code>è®¾ç½®å…±äº«å†…å­˜åŒºåŸŸå’Œè¯·æ±‚çš„æœ€å¤§çªå‘å¤§å°ã€‚è¿‡å¤šçš„è¯·æ±‚è¢«å»¶è¿Ÿï¼Œç›´åˆ°å®ƒä»¬çš„æ•°é‡è¶…è¿‡æœ€å¤§çªå‘å¤§å°ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹è¯·æ±‚ä»¥é”™è¯¯ç»ˆæ­¢ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæœ€å¤§çªå‘å¤§å°ç­‰äºé›¶ã€‚</code></p>
<ul>
<li><p>å®šä¹‰é™åˆ¶çš„Key</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# cat test1.oldboy.com.conf </span><br><span class="line">limit_req_zone $binary_remote_addr zone=req_zone:10m rate=1r/s;</span><br><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name test1.oldboy.com;</span><br><span class="line">	</span><br><span class="line">	limit_req zone=req_zone burst=5 nodelay;</span><br><span class="line">	limit_req_status 412;</span><br><span class="line">	error_page 412 /err.html;    #è¿™ä¸ªæ–‡ä»¶å¿…é¡»å­˜åœ¨/code/test1/err.html</span><br><span class="line"></span><br><span class="line">	location / &#123;</span><br><span class="line">		root /code/test1;</span><br><span class="line">		index index.html;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¡«å†™hostsåŸŸåè§£æ ï¼ˆæµ‹è¯•ï¼šåŸŸåè®¿é—®æ‰æœ‰æ•ˆæœï¼Œç›´æ¥è®¿é—®æ²¡æ•ˆæœï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo &quot;10.0.0.7 test1.oldboy.com&quot; &gt;&gt; /etc/hosts</span><br></pre></td></tr></table></figure>
</li>
<li><p>å‹åŠ›æµ‹è¯•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ab -n 50 -c 20 http://test1.oldboy.com/index.html</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹é”™è¯¯æ—¥å¿—</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2019/01/14 11:28:22 [error] 2073#2073: *3 limiting requests, excess: 5.737 by zone &quot;req_zone&quot;, client: 10.0.0.1, server: test1.oldboy.com, request: &quot;GET / HTTP/1.1&quot;, host: &quot;test1.oldboy.com&quot;</span><br><span class="line">2019/01/14 11:28:22 [error] 2073#2073: *3 limiting requests, excess: 5.611 by zone &quot;req_zone&quot;, client: 10.0.0.1, server: test1.oldboy.com, request: &quot;GET / HTTP/1.1&quot;, host: &quot;test1.oldboy.com&quot;</span><br><span class="line">2019/01/14 11:28:22 [error] 2073#2073: *3 limiting requests, excess: 5.450 by zone &quot;req_zone&quot;, client: 10.0.0.1, server: test1.oldboy.com, request: &quot;GET / HTTP/1.1&quot;, host: &quot;test1.oldboy.com&quot;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="å…­ã€NginxåŒ¹é…ç¬¦å’Œä¼˜å…ˆçº§"><a href="#å…­ã€NginxåŒ¹é…ç¬¦å’Œä¼˜å…ˆçº§" class="headerlink" title="å…­ã€NginxåŒ¹é…ç¬¦å’Œä¼˜å…ˆçº§"></a>å…­ã€NginxåŒ¹é…ç¬¦å’Œä¼˜å…ˆçº§</h2><p>Locationè¯­æ³•ç¤ºä¾‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">location [=|^~|~|~*|!~|!~*|/] /uri/ &#123; ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŒ¹é…ä¼˜å…ˆçº§</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">åŒ¹é…ç¬¦	åŒ¹é…è§„åˆ™						ä¼˜å…ˆçº§</span><br><span class="line">=		ç²¾ç¡®åŒ¹é…						1 	ç”¨åˆ°</span><br><span class="line">^~		ä»¥æŸä¸ªå­—ç¬¦ä¸²å¼€å¤´				2</span><br><span class="line">~		åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…			3	å¸¸ç”¨</span><br><span class="line">~*		ä¸åŒºåˆ†å¤§å°å†™çš„æ­£åˆ™åŒ¹é…			4</span><br><span class="line">!~		åŒºåˆ†å¤§å°å†™ä¸åŒ¹é…çš„æ­£åˆ™			5</span><br><span class="line">!~*		ä¸åŒºåˆ†å¤§å°å†™ä¸åŒ¹é…çš„æ­£åˆ™		6</span><br><span class="line">/		é€šç”¨åŒ¹é…ï¼Œä»»ä½•è¯·æ±‚éƒ½ä¼šåŒ¹é…åˆ°	7	å¸¸ç”¨</span><br></pre></td></tr></table></figure>

<h3 id="6-1-åŒ¹é…æ¡ˆä¾‹"><a href="#6-1-åŒ¹é…æ¡ˆä¾‹" class="headerlink" title="6.1 åŒ¹é…æ¡ˆä¾‹"></a>6.1 åŒ¹é…æ¡ˆä¾‹</h3><blockquote>
<p>å‚è€ƒç½‘ç«™ï¼š<a href="https://blog.csdn.net/qq_41980405/article/details/111402208">https://blog.csdn.net/qq_41980405/article/details/111402208</a></p>
</blockquote>
<ul>
<li><p>é€šç”¨åŒ¹é…ï¼Œä»»ä½•è¯·æ±‚éƒ½ä¼šåŒ¹é…åˆ°</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">location</span> / &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸¥æ ¼åŒºåˆ†å¤§å°å†™ï¼ŒåŒ¹é…ä»¥.phpç»“å°¾çš„éƒ½èµ°è¿™ä¸ªlocation    </p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸¥æ ¼åŒºåˆ†å¤§å°å†™ï¼ŒåŒ¹é…ä»¥.jspç»“å°¾çš„éƒ½èµ°è¿™ä¸ªlocation </p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">location</span> <span class="regexp">~ \.jsp$</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸åŒºåˆ†å¤§å°å†™åŒ¹é…ï¼Œåªè¦ç”¨æˆ·è®¿é—®.jpg,gif,png,js,css éƒ½èµ°è¿™æ¡location</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">location</span> <span class="regexp">~* .*\.(jpg|gif|png|js|css|mp4)$</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¸åŒºåˆ†å¤§å°å†™åŒ¹é…</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">location</span> <span class="regexp">~* &quot;\.(sql|bak|tgz|tar.gz|.git)$&quot;</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--07--Nginx(ä¸ƒ)å‡è¡¡è°ƒåº¦</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/13-Nginx(%E4%B8%83)Nginx%E4%B8%83%E5%B1%82%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E8%B0%83%E5%BA%A6%E4%B8%8E%E5%81%A5%E5%BA%B7%E6%A3%80%E6%9F%A5/</url>
    <content><![CDATA[<h2 id="ä¸€ã€Nginxå‡è¡¡è°ƒåº¦ç®—æ³•"><a href="#ä¸€ã€Nginxå‡è¡¡è°ƒåº¦ç®—æ³•" class="headerlink" title="ä¸€ã€Nginxå‡è¡¡è°ƒåº¦ç®—æ³•"></a>ä¸€ã€Nginxå‡è¡¡è°ƒåº¦ç®—æ³•</h2><p>Nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡åˆ†ä¸º5ç§è°ƒåº¦ç®—æ³•</p>
<table>
<thead>
<tr>
<th>è°ƒåº¦ç®—æ³•</th>
<th>æ¦‚è¿°</th>
</tr>
</thead>
<tbody><tr>
<td>è½®è¯¢ï¼ˆå¸¸ç”¨ï¼‰</td>
<td>æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨(é»˜è®¤)</td>
</tr>
<tr>
<td>weightï¼ˆé¢è¯•ç‚¹ï¼‰</td>
<td>åŠ æƒè½®è¯¢,weightå€¼è¶Šå¤§,åˆ†é…åˆ°çš„è®¿é—®å‡ ç‡è¶Šé«˜</td>
</tr>
<tr>
<td>ip_hashï¼ˆé¢è¯•ç‚¹ï¼‰</td>
<td>æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®IPçš„hashç»“æœåˆ†é…,è¿™æ ·æ¥è‡ªåŒä¸€IPçš„å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨</td>
</tr>
<tr>
<td>url_hash</td>
<td>æŒ‰ç…§è®¿é—®URLçš„hashç»“æœæ¥åˆ†é…è¯·æ±‚,æ˜¯æ¯ä¸ªURLå®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨</td>
</tr>
<tr>
<td>least_hash</td>
<td>æœ€å°‘é“¾æ¥æ•°,é‚£ä¸ªæœºå™¨é“¾æ¥æ•°å°‘å°±åˆ†å‘</td>
</tr>
</tbody></table>
<h3 id="1-1-åŠ æƒè½®è¯¢"><a href="#1-1-åŠ æƒè½®è¯¢" class="headerlink" title="1.1 åŠ æƒè½®è¯¢"></a>1.1 åŠ æƒè½®è¯¢</h3><p>æ¯”å¦‚å®ç°è®¿é—®5æ¬¡web01ï¼Œ1æ¬¡web02</p>
<p>å½“webæœåŠ¡å™¨é…ç½®ä¸ç›¸åŒï¼Œæœ‰å·®è·æ—¶ï¼Œå¯ä»¥ç”¨æ­¤æ–¹æ³•</p>
<p>åœ¨<code>lb01</code>é…ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 nginx]# cat /etc/nginx/conf.d/proxy_node.conf</span><br><span class="line">upstream node &#123;</span><br><span class="line">        server 172.16.1.7:80 weight=5;</span><br><span class="line">        server 172.16.1.8:80 weight=1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="1-2-ip-hash"><a href="#1-2-ip-hash" class="headerlink" title="1.2 ip_hash"></a>1.2 ip_hash</h3><blockquote>
<p>PSï¼šä¸èƒ½ä¸weightä¸€èµ·ä½¿ç”¨</p>
</blockquote>
<p>æ ¹æ®è¯·æ±‚çš„IPåœ°å€ï¼Œå›ºå®šè®¿é—®åˆ°æŸä¸€åç«¯ï¼Œé™¤éå·²é€‰æ‹©çš„åç«¯downäº†ï¼Œæœ‰ç‚¹æµªè´¹èµ„æº</p>
<p>åœ¨<code>lb01</code>é…ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 nginx]# cat /etc/nginx/conf.d/proxy_node.conf</span><br><span class="line">upstream node &#123;</span><br><span class="line">        ip_hash;</span><br><span class="line">        server 172.16.1.7:80;</span><br><span class="line">        server 172.16.1.8:80;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123; </span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€Nginxè´Ÿè½½å‡è¡¡åç«¯çŠ¶æ€"><a href="#äºŒã€Nginxè´Ÿè½½å‡è¡¡åç«¯çŠ¶æ€" class="headerlink" title="äºŒã€Nginxè´Ÿè½½å‡è¡¡åç«¯çŠ¶æ€"></a>äºŒã€Nginxè´Ÿè½½å‡è¡¡åç«¯çŠ¶æ€</h2><table>
<thead>
<tr>
<th>çŠ¶æ€</th>
<th>æ¦‚è¿°</th>
</tr>
</thead>
<tbody><tr>
<td>down</td>
<td>å½“å‰çš„serveræš‚æ—¶ä¸å‚ä¸è´Ÿè½½å‡è¡¡</td>
</tr>
<tr>
<td>backup</td>
<td>é¢„ç•™çš„å¤‡ä»½æœåŠ¡å™¨</td>
</tr>
<tr>
<td>max_conns</td>
<td>é™åˆ¶æœ€å¤§çš„æ¥æ”¶è¿æ¥æ•°</td>
</tr>
<tr>
<td>max_failsï¼ˆå¥åº·æ£€æŸ¥ï¼‰</td>
<td>å…è®¸è¯·æ±‚å¤±è´¥çš„æ¬¡æ•°ï¼ˆä¸å¤Ÿç²¾å‡†ï¼Œä½œç”¨ä¸å¤§ï¼Œå¾—çŸ¥é“ï¼Œé¢è¯•ä¼šé—®ï¼‰</td>
</tr>
<tr>
<td>fail_timeoutï¼ˆå¥åº·æ£€æŸ¥ï¼‰</td>
<td>ç»è¿‡max_failså¤±è´¥å, æœåŠ¡æš‚åœæ—¶é—´</td>
</tr>
</tbody></table>
<h3 id="2-1-downçŠ¶æ€"><a href="#2-1-downçŠ¶æ€" class="headerlink" title="2.1 downçŠ¶æ€"></a>2.1 downçŠ¶æ€</h3><blockquote>
<p>ä¸€èˆ¬ç”¨äºåœæœºç»´æŠ¤</p>
</blockquote>
<p>åœ¨<code>lb01</code>é…ç½®ï¼Œå¯è§å½“ä¸¤å°webçš„NginxæœåŠ¡éƒ½æ­£å¸¸æ—¶ï¼Œåªèƒ½è®¿é—®web02ï¼Œå½“web02çš„NginxæœåŠ¡æŒ‚äº†ï¼Œè¿”å›502</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 nginx]# cat /etc/nginx/conf.d/proxy_node.conf</span><br><span class="line">upstream node &#123;</span><br><span class="line">        server 172.16.1.7:80 down;</span><br><span class="line">        server 172.16.1.8:80;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="2-2-backupçŠ¶æ€"><a href="#2-2-backupçŠ¶æ€" class="headerlink" title="2.2 backupçŠ¶æ€"></a>2.2 backupçŠ¶æ€</h3><p>åœ¨<code>lb01</code>é…ç½®ï¼Œå¯è§å½“ä¸¤å°webéƒ½æ­£å¸¸æ—¶ï¼Œåªèƒ½è®¿é—®web02ï¼Œå¦‚æœweb02çš„æœåŠ¡æŒ‚äº†ï¼Œä¼šè®¿é—®web01ï¼Œå½“web02æ¢å¤åï¼Œå†æ¬¡è®¿é—®åˆ°çš„æ˜¯web02</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 nginx]# cat /etc/nginx/conf.d/proxy_node.conf</span><br><span class="line">upstream node &#123;</span><br><span class="line">        server 172.16.1.7:80 backup;</span><br><span class="line">        server 172.16.1.8:80;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="2-3-å¥åº·æ£€æŸ¥"><a href="#2-3-å¥åº·æ£€æŸ¥" class="headerlink" title="2.3 å¥åº·æ£€æŸ¥"></a>2.3 å¥åº·æ£€æŸ¥</h3><blockquote>
<p>è‡ªå¸¦çš„å¥åº·æ£€æŸ¥ä¸å¤Ÿç²¾å‡†ï¼Œä¸”çœ‹ä¸åˆ°ä¿¡æ¯ï¼Œé¢è¯•ä¼šé—®</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 nginx]# cat /etc/nginx/conf.d/proxy_node.conf</span><br><span class="line">upstream node &#123;</span><br><span class="line">        server 172.16.1.7:80 max_fails=2 fail_timeout=10s;</span><br><span class="line">        server 172.16.1.8:80 max_fails=2 fail_timeout=10s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€ç¬¬ä¸‰æ–¹å¥åº·æ£€æŸ¥æ¨¡å—check-upstream"><a href="#ä¸‰ã€ç¬¬ä¸‰æ–¹å¥åº·æ£€æŸ¥æ¨¡å—check-upstream" class="headerlink" title="ä¸‰ã€ç¬¬ä¸‰æ–¹å¥åº·æ£€æŸ¥æ¨¡å—check_upstream"></a>ä¸‰ã€ç¬¬ä¸‰æ–¹å¥åº·æ£€æŸ¥æ¨¡å—check_upstream</h2><blockquote>
<p>æ£€æµ‹æ›´ç²¾å‡†ï¼Œä¸”æœ‰é¡µé¢å¯ä»¥å±•ç¤ºæœåŠ¡ç«¯çš„çŠ¶æ€ï¼Œéœ€è¦ç¼–è¯‘å®‰è£…</p>
</blockquote>
<h3 id="3-1-ç¼–è¯‘å®‰è£…Nginx"><a href="#3-1-ç¼–è¯‘å®‰è£…Nginx" class="headerlink" title="3.1 ç¼–è¯‘å®‰è£…Nginx"></a>3.1 ç¼–è¯‘å®‰è£…Nginx</h3><p>1ã€å®‰è£…ä¾èµ–åŒ…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb02 ~]# yum install -y gcc glibc gcc-c++ pcre-devel openssl-devel  patch libxml2 -libxml2-devel libxslt libxslt-devel gd-devel perl-ExtUtils-Embed gperftools-devel.x86_64 gperftools-libs.x86_64 gperftools.x86_64</span><br></pre></td></tr></table></figure>

<p>2ã€ä¸‹è½½Nginxæºç åŠç¬¬ä¸‰æ–¹æ¨¡å—æºç </p>
<blockquote>
<p>PSï¼šä¸ºä¿æŒä¸€è‡´ï¼Œå…ˆé€šè¿‡yumæºå®‰è£…nginxï¼Œè¿™æ˜¯å½“å‰å®éªŒç¯å¢ƒçš„Nginxç‰ˆæœ¬</p>
<p>[root@lb01 nginx]# nginx -version<br>nginx version: nginx&#x2F;1.20.1</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb02 ~]# wget http://nginx.org/download/nginx-1.20.1.tar.gz</span><br><span class="line">[root@lb02 ~]# wget https://github.com/yaoweibin/nginx_upstream_check_module/archive/master.zip</span><br></pre></td></tr></table></figure>

<p>3ã€è§£å‹nginxæºç åŒ…ä»¥åŠç¬¬ä¸‰æ–¹æ¨¡å—</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# unzip master.zip</span><br><span class="line">[root@lb01 ~]# tar -vxf nginx-1.20.1.tar.gz</span><br></pre></td></tr></table></figure>

<p>4ã€æ‰“è¡¥ä¸</p>
<blockquote>
<p>æ‰“è¡¥ä¸(nginxçš„ç‰ˆæœ¬æ˜¯1.20.1è¡¥ä¸å°±é€‰æ‹©1.20.1çš„,p1ä»£è¡¨åœ¨nginxç›®å½•ï¼Œp0æ˜¯ä¸åœ¨nginxç›®å½•)</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 nginx-1.20.1]# cd nginx-1.20.1/</span><br><span class="line">[root@lb01 nginx-1.20.1]# patch -p1 &lt; ../nginx_upstream_check_module-master/check_1.20.1+.patch</span><br></pre></td></tr></table></figure>

<p>5ã€ç¼–è¯‘Nginxï¼Œé™„å¸¦æ¨¡å—å‚æ•°</p>
<blockquote>
<p>é€šè¿‡nginx -Vè·å–configureå‚æ•°ï¼Œå°½é‡ä¿æŒä¸€è‡´</p>
</blockquote>
<p>â€“add-module&#x3D;&#x2F;root&#x2F;nginx_upstream_check_module-master</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 nginx-1.20.1]# ./configure --prefix=/usr/share/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --http-client-body-temp-path=/var/lib/nginx/tmp/client_body --http-proxy-temp-path=/var/lib/nginx/tmp/proxy --http-fastcgi-temp-path=/var/lib/nginx/tmp/fastcgi --http-uwsgi-temp-path=/var/lib/nginx/tmp/uwsgi --http-scgi-temp-path=/var/lib/nginx/tmp/scgi --pid-path=/run/nginx.pid --lock-path=/run/lock/subsys/nginx --user=nginx --group=nginx --with-compat --with-debug --with-google_perftools_module --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_degradation_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_image_filter_module=dynamic --with-http_mp4_module --with-http_perl_module=dynamic --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-http_xslt_module=dynamic --with-mail=dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream=dynamic --with-stream_ssl_module --with-stream_ssl_preread_module --with-threads --add-module=/root/nginx_upstream_check_module-master</span><br></pre></td></tr></table></figure>

<p>6ã€åœ¨å·²æœ‰çš„è´Ÿè½½å‡è¡¡ä¸Šå¢åŠ å¥åº·æ£€æŸ¥çš„åŠŸèƒ½</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 nginx-1.20.1]# cat /etc/nginx/conf.d/proxy_node.conf</span><br><span class="line">upstream node &#123;</span><br><span class="line">        server 172.16.1.7:80;</span><br><span class="line">        server 172.16.1.8:80;</span><br><span class="line">        check interval=3000 rise=2 fall=3 timeout=1000 type=tcp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-åŠŸèƒ½æµ‹è¯•"><a href="#3-2-åŠŸèƒ½æµ‹è¯•" class="headerlink" title="3.2 åŠŸèƒ½æµ‹è¯•"></a>3.2 åŠŸèƒ½æµ‹è¯•</h3><p>1ã€æ­£å¸¸æƒ…å†µä¸‹çš„æ£€æµ‹æ•°æ®</p>
<p><img src="/img/image-20210821113447825.png" alt="image-20210821113447825"></p>
<p>2ã€æµ‹è¯•å°†web01çš„nginxæœåŠ¡å…³æ‰</p>
<p><img src="/img/image-20210821114011230.png" alt="image-20210821114011230"></p>
<p>3ã€æ—¥å¿—åˆ†æ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 nginx-1.20.1]# tail -f /var/log/nginx/error.log</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸¤webæœåŠ¡æ­£å¸¸ï¼Œèƒ½è·å–peer</span></span><br><span class="line">2021/08/21 02:42:11 [error] 50522#50522: enable check peer: 172.16.1.8:80</span><br><span class="line">2021/08/21 02:42:12 [error] 50522#50522: enable check peer: 172.16.1.7:80</span><br><span class="line">2021/08/21 02:46:17 [error] 50522#50522: *13 connect() failed (111: Connection refused) while connecting to upstream, client: 10.0.0.1, server: node.oldboy.com, request: &quot;GET / HTTP/1.1&quot;, upstream: &quot;http://172.16.1.7:80/&quot;, host: &quot;node.oldboy.com&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> åœæ­¢web01çš„nginxæœåŠ¡</span></span><br><span class="line">2021/08/21 02:46:20 [error] 50522#50522: disable check peer: 172.16.1.7:80</span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡æ–°å¯åŠ¨web01çš„nginxæœåŠ¡</span></span><br><span class="line">2021/08/21 02:47:59 [error] 50522#50522: enable check peer: 172.16.1.7:80</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€å¦‚ä½•è§£å†³ç½‘ç«™é‡å¤ç™»å½•çš„é—®é¢˜"><a href="#å››ã€å¦‚ä½•è§£å†³ç½‘ç«™é‡å¤ç™»å½•çš„é—®é¢˜" class="headerlink" title="å››ã€å¦‚ä½•è§£å†³ç½‘ç«™é‡å¤ç™»å½•çš„é—®é¢˜"></a>å››ã€å¦‚ä½•è§£å†³ç½‘ç«™é‡å¤ç™»å½•çš„é—®é¢˜</h2><p>æœ‰ä¸‰ç§æ–¹æ³•è§£å†³ï¼š</p>
<ol>
<li>ip_hash â€“ ä¼šé€ æˆæŸä¸€å°ä¸»æœºçš„å‹åŠ›è¿‡å¤§</li>
<li>sessionå¤åˆ¶</li>
<li>sessionå…±äº«<ol>
<li>æœ¬åœ°æ–‡ä»¶ â€“&gt; nfså…±äº«</li>
<li>é€šè¿‡ç¨‹åºï¼Œå†™å…¥redisæ•°æ®åº“ï¼ˆå¸¸ç”¨ï¼‰</li>
<li>é€šè¿‡ç¨‹åºï¼Œå†™å…¥mysqlæ•°æ®åº“</li>
</ol>
</li>
</ol>
<p>æœ¬æ¡ˆä¾‹ï¼Œé€‰ç”¨3.2é…ç½®ï¼Œsessionå…±äº«ï¼Œå†™å…¥redisæ•°æ®åº“</p>
<h3 id="4-1-å®‰è£…phpmyadminé‡ç°é—®é¢˜"><a href="#4-1-å®‰è£…phpmyadminé‡ç°é—®é¢˜" class="headerlink" title="4.1 å®‰è£…phpmyadminé‡ç°é—®é¢˜"></a>4.1 å®‰è£…phpmyadminé‡ç°é—®é¢˜</h3><p><code>web01</code>å’Œ<code>web02</code>éƒ½éœ€è¦å®‰è£…</p>
<p>1ã€é…ç½®Nginx</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# cat php.conf</span><br><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name php.oldboy.com;</span><br><span class="line">	root /code/phpMyAdmin-4.8.4-all-languages;</span><br><span class="line"></span><br><span class="line">	location / &#123;</span><br><span class="line">		index index.php index.html;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	location ~ \.php$ &#123;</span><br><span class="line">		fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">		fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">		include fastcgi_params;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@web01 conf.d]# systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>2ã€å®‰è£…phpmyadmin</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# cd /code</span><br><span class="line">[root@web01 code]# wget https://files.phpmyadmin.net/phpMyAdmin/4.8.4/phpMyAdmin-4.8.4-all-languages.zip</span><br><span class="line">[root@web01 code]# unzip phpMyAdmin-4.8.4-all-languages.zip</span><br></pre></td></tr></table></figure>

<p>3ã€é…ç½®phpmyadminè¿æ¥è¿œç¨‹æ•°æ®åº“</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 code]# cd phpMyAdmin-4.8.4-all-languages/</span><br><span class="line">[root@web01 phpMyAdmin-4.8.4-all-languages]# cp config.sample.inc.php config.inc.php</span><br><span class="line">[root@web01 phpMyAdmin-4.8.4-all-languages]# vim config.inc.php</span><br><span class="line">/* Server parameters */</span><br><span class="line"><span class="meta">$</span><span class="bash">cfg[<span class="string">&#x27;Servers&#x27;</span>][<span class="variable">$i</span>][<span class="string">&#x27;host&#x27;</span>] = <span class="string">&#x27;172.16.1.51&#x27;</span>;</span></span><br></pre></td></tr></table></figure>

<p>4ã€é…ç½®æˆæƒ</p>
<blockquote>
<p>è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ä¼šè®°å½•sessionï¼Œéœ€è¦æƒé™</p>
<p>session_start(): Failed to read session data: files (path: &#x2F;var&#x2F;lib&#x2F;php&#x2F;session)</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# chown -R www.www /var/lib/php/</span><br></pre></td></tr></table></figure>

<p>5ã€å°†web01ä¸Šé…ç½®å¥½çš„phpmyadminä»¥åŠnginxçš„é…ç½®æ–‡ä»¶æ¨é€åˆ°web02ä¸»æœºä¸Š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 code]# scp -rp  phpMyAdmin-4.8.4-all-languages root@172.16.1.8:/code/</span><br><span class="line">[root@web01 code]# scp /etc/nginx/conf.d/php.conf  root@172.16.1.8:/etc/nginx/conf.d/</span><br></pre></td></tr></table></figure>

<p>6ã€é‡è½½NginxæœåŠ¡ï¼Œæˆæƒè®¿é—®æƒé™</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web02 code]# systemctl restart nginx</span><br><span class="line">[root@web02 code]# chown -R www.www /var/lib/php/</span><br></pre></td></tr></table></figure>

<p>7ã€æ¥å…¥è´Ÿè½½å‡è¡¡ï¼Œå¹¶é‡å¯nginxæœåŠ¡ï¼Œ<code>lb01</code>æ“ä½œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 conf.d]# vim proxy_php.com.conf </span><br><span class="line">upstream php &#123;</span><br><span class="line">        server 172.16.1.7:80;</span><br><span class="line">        server 172.16.1.8:80;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name php.oldboy.com;</span><br><span class="line">        location / &#123;</span><br><span class="line">                proxy_pass http://php;</span><br><span class="line">                include proxy_params;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[root@lb01 conf.d]# nginx -t</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br><span class="line">[root@lb01 conf.d]# systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>9ã€æµ‹è¯•è®¿é—®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ç½‘é¡µè®¿é—®ï¼š</span><br><span class="line">	http://php.oldboy.com</span><br><span class="line">ç™»å½•è´¦æˆ·:</span><br><span class="line">	é‡‡ç”¨db01ï¼ˆ172.16.1.51ï¼‰çš„mysqlè¿œç¨‹è´¦æˆ·oldboy/Bgx123.com</span><br><span class="line">æ­¤æ—¶è®¿é—®phpmyadminç™»å½•å°†ä¸€ç›´å¤±è´¥ï¼Œå› ä¸ºè½®è¯¢è®¿é—®ï¼Œsessionä¸€ç›´å˜ï¼š</span><br><span class="line">æŠ¥é”™ï¼š</span><br><span class="line">Failed to set session cookie. Maybe you are using HTTP instead of HTTPS to access phpMyAdmin.</span><br></pre></td></tr></table></figure>

<h3 id="4-2-è§£å†³é—®é¢˜"><a href="#4-2-è§£å†³é—®é¢˜" class="headerlink" title="4.2 è§£å†³é—®é¢˜"></a>4.2 è§£å†³é—®é¢˜</h3><p>1ã€åœ¨<code>db01</code>å®‰è£…redisæ•°æ®åº“</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@db01 ~]# yum install redis -y</span><br></pre></td></tr></table></figure>

<p>2ã€é…ç½®å¹¶å¯åŠ¨redis</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@db01 ~]# sed  -i &#x27;/^bind/c bind 127.0.0.1 172.16.1.51&#x27; /etc/redis.conf</span><br><span class="line">[root@db01 ~]# systemctl start redis</span><br><span class="line">[root@db01 ~]# systemctl enable redis</span><br></pre></td></tr></table></figure>

<p>3ã€<code>web01</code>çš„phpé…ç½®sessionè¿æ¥redis</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">1.ä¿®æ”¹/etc/php.iniæ–‡ä»¶</span></span><br><span class="line">[root@web01 ~]# vim /etc/php.ini</span><br><span class="line">session.save_handler = redis</span><br><span class="line">session.save_path = &quot;tcp://172.16.1.51:6379&quot;</span><br><span class="line">;session.save_path = &quot;tcp://172.16.1.51:6379?auth=123&quot; #å¦‚æœrediså­˜åœ¨å¯†ç ï¼Œåˆ™ä½¿ç”¨è¯¥æ–¹å¼</span><br><span class="line">session.auto_start = 1</span><br></pre></td></tr></table></figure>

<p>4ã€æ³¨é‡Šphp-fpm.d&#x2F;<a href="http://www.confé‡Œé¢çš„ä¸¤æ¡å†…å®¹,å¦åˆ™sessionå†…å®¹ä¼šä¸€ç›´å†™å…¥/var/lib/php/session%E7%9B%AE%E5%BD%95%E4%B8%AD">www.confé‡Œé¢çš„ä¸¤æ¡å†…å®¹ï¼Œå¦åˆ™sessionå†…å®¹ä¼šä¸€ç›´å†™å…¥/var/lib/php/sessionç›®å½•ä¸­</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;php_value[session.save_handler] = files</span><br><span class="line">;php_value[session.save_path]    = /var/lib/php/session</span><br></pre></td></tr></table></figure>

<p>5ã€é‡å¯php-fpm</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web02 code]# systemctl restart php-fpm</span><br></pre></td></tr></table></figure>

<p>6ã€å°†<code>web01</code>çš„é…ç½®æ–‡ä»¶æ¨é€åˆ°<code>web02</code>ä¸Š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@web01 code]# scp /etc/php.ini root@172.16.1.8:/etc/php.ini  </span><br><span class="line">[root@web01 code]# scp /etc/php-fpm.d/www.conf root@172.16.1.8:/etc/php-fpm.d/www.conf </span><br></pre></td></tr></table></figure>

<p>7ã€é‡å¯æœåŠ¡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@web02 code]# systemctl restart php-fpm</span><br></pre></td></tr></table></figure>

<p>8ã€å†æ¬¡æµ‹è¯•è®¿é—®ç½‘ç«™</p>
<p>å¯ä»¥ç™»å½•ï¼Œå¹¶ä¸”sessionçš„å€¼å°†è®°å½•åˆ°redisæ•°æ®åº“</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@db01 ~]# redis-cli -h 172.16.1.51</span><br><span class="line">172.16.1.51:6379&gt; KEYS *</span><br><span class="line">1) &quot;PHPREDIS_SESSION:716e61cabeb40f974fcbcdcac65f8607&quot;</span><br><span class="line">2) &quot;PHPREDIS_SESSION:42ca5a8ea9375a93a7974427b77b3dd7&quot;</span><br><span class="line">172.16.1.51:6379&gt;</span><br></pre></td></tr></table></figure>

<p>9ã€åˆ·æ–°é¡µé¢çš„è´Ÿè½½å‡è¡¡æ•ˆæœå±•ç¤º</p>
<p><img src="/img/image-20210823225246243.png" alt="image-20210823225246243"></p>
<p><img src="/img/image-20210823225305632.png" alt="image-20210823225305632"></p>
<p>10ã€cookieä¿å­˜åˆ°rediså±•ç¤º</p>
<p><img src="/img/image-20210823225412626.png" alt="image-20210823225412626"></p>
]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--07--Nginx(ä¸€)å®‰è£…ä¸é…ç½®</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/07-Nginx(%E4%B8%80)%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h2 id="ä¸€ã€Nginxç®€ä»‹"><a href="#ä¸€ã€Nginxç®€ä»‹" class="headerlink" title="ä¸€ã€Nginxç®€ä»‹"></a>ä¸€ã€Nginxç®€ä»‹</h2><p>å‚è€ƒç½‘ç«™ï¼š<a href="https://zhuanlan.zhihu.com/p/266153320">https://zhuanlan.zhihu.com/p/266153320</a></p>
<h2 id="äºŒã€Nginxå®‰è£…"><a href="#äºŒã€Nginxå®‰è£…" class="headerlink" title="äºŒã€Nginxå®‰è£…"></a>äºŒã€Nginxå®‰è£…</h2><p>â€‹	nginxæœ‰ä¸¤ç§å®‰è£…æ–¹å¼ï¼Œyumå®‰è£…å’Œæºç ç¼–è¯‘å®‰è£…</p>
<h3 id="2-1-yumå®‰è£…ï¼ˆepelæºï¼‰"><a href="#2-1-yumå®‰è£…ï¼ˆepelæºï¼‰" class="headerlink" title="2.1 yumå®‰è£…ï¼ˆepelæºï¼‰"></a>2.1 yumå®‰è£…ï¼ˆepelæºï¼‰</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/yum.repos.d/nginx.repo</span><br><span class="line">[nginx]</span><br><span class="line">name=nginx repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/7/$basearch/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"></span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br><span class="line"></span><br><span class="line">yum install nginx -y</span><br></pre></td></tr></table></figure>

<h3 id="2-2-ç¼–è¯‘å®‰è£…"><a href="#2-2-ç¼–è¯‘å®‰è£…" class="headerlink" title="2.2 ç¼–è¯‘å®‰è£…"></a>2.2 ç¼–è¯‘å®‰è£…</h3><p>æŸ¥çœ‹yumå®‰è£…çš„nginxçš„ç¼–è¯‘å‚æ•°</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 ~]# nginx -V</span><br><span class="line">nginx version: nginx/1.20.1</span><br><span class="line">built by gcc 4.8.5 20150623 (Red Hat 4.8.5-44) (GCC)</span><br><span class="line">built with OpenSSL 1.1.1g FIPS  21 Apr 2020</span><br><span class="line">TLS SNI support enabled</span><br><span class="line">configure arguments: --prefix=/usr/share/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --http-client-body-temp-path=/var/lib/nginx/tmp/client_body --http-proxy-temp-path=/var/lib/nginx/tmp/proxy --http-fastcgi-temp-path=/var/lib/nginx/tmp/fastcgi --http-uwsgi-temp-path=/var/lib/nginx/tmp/uwsgi --http-scgi-temp-path=/var/lib/nginx/tmp/scgi --pid-path=/run/nginx.pid --lock-path=/run/lock/subsys/nginx --user=nginx --group=nginx --with-compat --with-debug --with-file-aio --with-google_perftools_module --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_degradation_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_image_filter_module=dynamic --with-http_mp4_module --with-http_perl_module=dynamic --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-http_xslt_module=dynamic --with-mail=dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream=dynamic --with-stream_ssl_module --with-stream_ssl_preread_module --with-threads --with-cc-opt=&#x27;-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic&#x27; --with-ld-opt=&#x27;-Wl,-z,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -Wl,-E&#x27;</span><br></pre></td></tr></table></figure>

<p>æºç è·å–</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 ~]# wget http://nginx.org/download/nginx-1.20.1.tar.gz</span><br></pre></td></tr></table></figure>

<p>æ„å»ºä¸ç¼–è¯‘</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è§£å‹æºç æ–‡ä»¶å¹¶è¿›å…¥æ–‡ä»¶å¤¹å†…</span></span><br><span class="line">tar -vxf nginx-1.20.1.tar.gz &amp;&amp; cd nginx-1.20.1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> configureæ„å»º</span></span><br><span class="line">./configure --prefix=/usr/share/nginx --sbin-path=/usr/sbin/nginx --modules-path=/usr/lib64/nginx/modules --conf-path=/etc/nginx/nginx.conf --error-log-path=/var/log/nginx/error.log --http-log-path=/var/log/nginx/access.log --http-client-body-temp-path=/var/lib/nginx/tmp/client_body --http-proxy-temp-path=/var/lib/nginx/tmp/proxy --http-fastcgi-temp-path=/var/lib/nginx/tmp/fastcgi --http-uwsgi-temp-path=/var/lib/nginx/tmp/uwsgi --http-scgi-temp-path=/var/lib/nginx/tmp/scgi --pid-path=/run/nginx.pid --lock-path=/run/lock/subsys/nginx --user=nginx --group=nginx --with-compat --with-debug --with-file-aio --with-google_perftools_module --with-http_addition_module --with-http_auth_request_module --with-http_dav_module --with-http_degradation_module --with-http_flv_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_image_filter_module=dynamic --with-http_mp4_module --with-http_perl_module=dynamic --with-http_random_index_module --with-http_realip_module --with-http_secure_link_module --with-http_slice_module --with-http_ssl_module --with-http_stub_status_module --with-http_sub_module --with-http_v2_module --with-http_xslt_module=dynamic --with-mail=dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream=dynamic --with-stream_ssl_module --with-stream_ssl_preread_module --with-threads --with-cc-opt=&#x27;-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic&#x27; --with-ld-opt=&#x27;-Wl,-z,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -Wl,-E&#x27;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç¼–è¯‘å¹¶å®‰è£…</span></span><br><span class="line">make -j 4 &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<p>é”™è¯¯è§£å†³</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> é”™è¯¯1ï¼š</span></span><br><span class="line">./configure: error: the invalid value in --with-ld-opt=&quot;-Wl,-z,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -Wl,-E&quot;</span><br><span class="line">è§£å†³æ–¹æ³•ï¼š</span><br><span class="line">yum -y install redhat-rpm-config.noarch</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é”™è¯¯2ï¼š</span></span><br><span class="line">./configure: error: the HTTP rewrite module requires the PCRE library.</span><br><span class="line">You can either disable the module by using --without-http_rewrite_module</span><br><span class="line">option, or install the PCRE library into the system, or build the PCRE library</span><br><span class="line">statically from the source with nginx by using --with-pcre=&lt;path&gt; option.</span><br><span class="line">è§£å†³æ–¹æ³•ï¼š</span><br><span class="line">yum install pcre-devel -y</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é”™è¯¯3ï¼š</span></span><br><span class="line">./configure: error: SSL modules require the OpenSSL library.</span><br><span class="line">You can either do not enable the modules, or install the OpenSSL library</span><br><span class="line">into the system, or build the OpenSSL library statically from the source</span><br><span class="line">with nginx by using --with-openssl=&lt;path&gt; option.</span><br><span class="line">è§£å†³æ–¹æ³•ï¼š</span><br><span class="line">yum install openssl openssl-devel -y</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é”™è¯¯4ï¼š</span></span><br><span class="line">./configure: error: the HTTP XSLT module requires the libxml2/libxslt</span><br><span class="line">libraries. You can either do not enable the module or install the libraries.</span><br><span class="line">è§£å†³æ–¹æ³•ï¼š</span><br><span class="line">yum install libxml2 libxml2-devel libxslt  libxslt-devel -y</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é”™è¯¯5ï¼š</span></span><br><span class="line">./configure: error: the HTTP image filter module requires the GD library.</span><br><span class="line">You can either do not enable the module or install the libraries.</span><br><span class="line">è§£å†³æ–¹æ³•ï¼š</span><br><span class="line">yum -y install gd-devel</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é”™è¯¯6ï¼š</span></span><br><span class="line">./configure: error: perl module ExtUtils::Embed is required</span><br><span class="line"></span><br><span class="line">è§£å†³æ–¹æ³•ï¼š </span><br><span class="line">yum -y install perl-devel perl-ExtUtils-Embed</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é”™è¯¯7ï¼š</span></span><br><span class="line">./configure: error: the Google perftools module requires the Google perftools library</span><br><span class="line">è§£å†³æ–¹æ³•ï¼š</span><br><span class="line">yum install gperftools-devel.x86_64 gperftools-libs.x86_64 gperftools.x86_64 -y</span><br></pre></td></tr></table></figure>

<h3 id="2-3-å¯åŠ¨å’Œåœæ­¢æœåŠ¡"><a href="#2-3-å¯åŠ¨å’Œåœæ­¢æœåŠ¡" class="headerlink" title="2.3 å¯åŠ¨å’Œåœæ­¢æœåŠ¡"></a>2.3 å¯åŠ¨å’Œåœæ­¢æœåŠ¡</h3><p>å¯åŠ¨æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å…ˆå…³é—­httpdæœåŠ¡ï¼Œé˜²æ­¢å†²çª</span></span><br><span class="line">[root@web01 ~]# systemctl stop httpd</span><br><span class="line">[root@web01 ~]# systemctl disable httpd</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å†å¯åŠ¨nginxæœåŠ¡</span></span><br><span class="line">[root@web01 ~]# systemctl enable nginx</span><br><span class="line">[root@web01 html]# systemctl start nginx</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦ä¸€ç§å¯åŠ¨æ–¹å¼</span></span><br><span class="line">nginx</span><br></pre></td></tr></table></figure>

<p>åœæ­¢æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl stop nginx </span><br><span class="line"><span class="meta">#</span><span class="bash"> æˆ–è€…</span></span><br><span class="line">nginx -s stop </span><br></pre></td></tr></table></figure>

<p>é‡å¯&#x2F;é‡è½½æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart/reload nginx</span><br><span class="line">nginx -s restart/reload </span><br></pre></td></tr></table></figure>

<blockquote>
<p>PSï¼šé‡è½½reloadå’Œé‡å¯restartçš„å·®åˆ«</p>
<p>reloadå°†ä¼šç­‰æœåŠ¡è¿›ç¨‹æ‰§è¡Œå®Œå†é‡å¯ï¼Œè€Œrestartåˆ™æ˜¯å¼ºåˆ¶é‡å¯</p>
</blockquote>
<h2 id="ä¸‰ã€Nginxç›®å½•ç»“æ„è¯´æ˜"><a href="#ä¸‰ã€Nginxç›®å½•ç»“æ„è¯´æ˜" class="headerlink" title="ä¸‰ã€Nginxç›®å½•ç»“æ„è¯´æ˜"></a>ä¸‰ã€Nginxç›®å½•ç»“æ„è¯´æ˜</h2><p>æŸ¥çœ‹nginxçš„ç›®å½•ç»“æ„</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 html]# rpm -ql nginx</span><br></pre></td></tr></table></figure>

<p>å‚è€ƒé“¾æ¥ï¼š</p>
<p><a href="https://zhuanlan.zhihu.com/p/137262519">https://zhuanlan.zhihu.com/p/137262519</a></p>
<h2 id="å››ã€Nginxé…ç½®æ–‡ä»¶è¯´æ˜"><a href="#å››ã€Nginxé…ç½®æ–‡ä»¶è¯´æ˜" class="headerlink" title="å››ã€Nginxé…ç½®æ–‡ä»¶è¯´æ˜"></a>å››ã€Nginxé…ç½®æ–‡ä»¶è¯´æ˜</h2><blockquote>
<p>http server locationæ‰©å±•äº†è§£é¡¹<br>http{}å±‚ä¸‹å…è®¸æœ‰å¤šä¸ªServer{}å±‚ï¼Œä¸€ä¸ªServer{}å±‚ä¸‹åˆå…è®¸æœ‰å¤šä¸ªLocation<br>http{} æ ‡ç­¾ä¸»è¦ç”¨æ¥è§£å†³ç”¨æˆ·çš„è¯·æ±‚ä¸å“åº”ã€‚<br>server{} æ ‡ç­¾ä¸»è¦ç”¨æ¥å“åº”å…·ä½“çš„æŸä¸€ä¸ªç½‘ç«™ã€‚<br>location{} æ ‡ç­¾ä¸»è¦ç”¨äºåŒ¹é…ç½‘ç«™å…·ä½“URLè·¯å¾„ã€‚</p>
</blockquote>
<p>ä¸»é…ç½®æ–‡ä»¶è¯´æ˜</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 html]# cat /etc/nginx/nginx.conf</span><br><span class="line">---æ ¸å¿ƒæ¨¡å—---</span><br><span class="line">user nginx;	#nginxè¿›ç¨‹è¿è¡Œçš„ç”¨æˆ·</span><br><span class="line">worker_processes auto;	#nginxå·¥ä½œçš„è¿›ç¨‹æ•°é‡</span><br><span class="line">error_log /var/log/nginx/error.log;	#nginxçš„é”™è¯¯æ—¥å¿—ã€è­¦å‘ŠåŠå…¶è­¦å‘Šä»¥ä¸Šçš„éƒ½è®°å½•ã€‘</span><br><span class="line">pid /run/nginx.pid;	#nginxè¿›ç¨‹è¿è¡Œåçš„è¿›ç¨‹id</span><br><span class="line">---æ ¸å¿ƒæ¨¡å—---</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span></span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line">---äº‹ä»¶æ¨¡å—---</span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024; # ä¸€ä¸ªworkè¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°</span><br><span class="line">    use epool;				 #ä½¿ç”¨epoolç½‘ç»œæ¨¡å‹</span><br><span class="line">&#125;</span><br><span class="line">---äº‹ä»¶æ¨¡å—---</span><br><span class="line"></span><br><span class="line">---httpæ ¸å¿ƒå±‚æ¨¡å—---</span><br><span class="line">http &#123;</span><br><span class="line"><span class="meta">	#</span><span class="bash"> æ—¥å¿—æ ¼å¼å®šä¹‰</span></span><br><span class="line">    log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">                      &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">                      &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;	# è®¿é—®æ—¥å¿—</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;	# é•¿è¿æ¥è¶…æ—¶æ—¶é—´</span><br><span class="line">    types_hash_max_size 4096;</span><br><span class="line">    #gzip on;			#æ˜¯å¦å¼€å¯å‹ç¼©åŠŸèƒ½			</span><br><span class="line"></span><br><span class="line">    include             /etc/nginx/mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line"></span><br><span class="line">    include /etc/nginx/conf.d/*.conf;	# åŒ…å«å“ªä¸ªç›®å½•ä¸‹é¢çš„*.confæ–‡ä»¶ï¼Œç”¨äºå†™server</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;	# ç›‘å¬ç«¯å£</span><br><span class="line">        listen       [::]:80;</span><br><span class="line">        server_name  _;		# åŸŸå</span><br><span class="line">        root         /usr/share/nginx/html;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">		#</span><span class="bash">charset koi8-r;			<span class="comment">#å­—ç¬¦é›†</span></span></span><br><span class="line"></span><br><span class="line">		location / &#123;	 			#ä½ç½®</span><br><span class="line">			root   /usr/share/nginx/html;	#ä»£ç çš„ä¸»æ–‡ä»¶ä½ç½®</span><br><span class="line">			index  index.html index.htm;	#æœåŠ¡ç«¯é»˜è®¤è¿”å›ç»™ç”¨æˆ·çš„æ–‡ä»¶</span><br><span class="line">		&#125;</span><br><span class="line">		location /test &#123;	 			#ä½ç½®</span><br><span class="line">			root   /code/test/123/;	#ä»£ç çš„ä¸»æ–‡ä»¶ä½ç½®</span><br><span class="line">			index  index.html index.htm;	#æœåŠ¡ç«¯é»˜è®¤è¿”å›ç»™ç”¨æˆ·çš„æ–‡ä»¶</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">---httpæ ¸å¿ƒå±‚æ¨¡å—---</span><br></pre></td></tr></table></figure>

<h2 id="äº”ã€æ¡ˆä¾‹ï¼šæ­å»ºwebç½‘ç«™"><a href="#äº”ã€æ¡ˆä¾‹ï¼šæ­å»ºwebç½‘ç«™" class="headerlink" title="äº”ã€æ¡ˆä¾‹ï¼šæ­å»ºwebç½‘ç«™"></a>äº”ã€æ¡ˆä¾‹ï¼šæ­å»ºwebç½‘ç«™</h2><p>å‡†å¤‡é…ç½®æ–‡ä»¶ds</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@web01 code]# cat /etc/nginx/conf.d/game.conf</span><br><span class="line">server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name game.oldboy.com;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">                root /code;</span><br><span class="line">                index index.html;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŒ‰ç…§é…ç½®æ–‡ä»¶åˆ›å»ºæ–‡ä»¶å¤¹å¹¶æ”¾å…¥htmlé¡¹ç›®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir /code</span><br><span class="line">cp html5.zip /code</span><br><span class="line">cd /code</span><br><span class="line">unzip html5.zip</span><br><span class="line"></span><br><span class="line">[root@web01 code]# ls</span><br><span class="line">ceshi  game  html5.zip  img  index.html  __MACOSX  readme.txt</span><br></pre></td></tr></table></figure>

<p>é‡å¯nginxæœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br><span class="line">systemctl reload nginx</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ç‰©ç†æœºæµè§ˆå™¨æµè§ˆ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹hostsæ–‡ä»¶</span></span><br><span class="line">10.0.0.7 game.oldboy.com</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç½‘é¡µè®¿é—®</span></span><br><span class="line">game.oldboy.com</span><br></pre></td></tr></table></figure>

<h2 id="å…­ã€Nginxè™šæ‹Ÿä¸»æœº"><a href="#å…­ã€Nginxè™šæ‹Ÿä¸»æœº" class="headerlink" title="å…­ã€Nginxè™šæ‹Ÿä¸»æœº"></a>å…­ã€Nginxè™šæ‹Ÿä¸»æœº</h2><p>Nginxé…ç½®è™šæ‹Ÿä¸»æœºæœ‰å¦‚ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p>
<ul>
<li>å•ä¸»æœºå¤šIP</li>
<li>å•ä¸»æœºå¤šç«¯å£</li>
<li>å•ä¸»æœºå¤šåŸŸå</li>
</ul>
<h3 id="6-1-åŸºäºä¸»æœºå¤šIPæ–¹å¼-ä¸å¸¸ç”¨"><a href="#6-1-åŸºäºä¸»æœºå¤šIPæ–¹å¼-ä¸å¸¸ç”¨" class="headerlink" title="6.1 åŸºäºä¸»æœºå¤šIPæ–¹å¼(ä¸å¸¸ç”¨)"></a>6.1 åŸºäºä¸»æœºå¤šIPæ–¹å¼(ä¸å¸¸ç”¨)</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# cat ip.conf </span><br><span class="line">server &#123;</span><br><span class="line">	listen 10.0.0.7:80;</span><br><span class="line">	server_name _;</span><br><span class="line"></span><br><span class="line">	location / &#123;</span><br><span class="line">		root /code_ip_eth0;</span><br><span class="line">		index index.html;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">	listen 172.16.1.7:80;</span><br><span class="line">	server_name _;</span><br><span class="line"></span><br><span class="line">	location / &#123;</span><br><span class="line">		root /code_ip_eth1;</span><br><span class="line">		index index.html;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">2.æ ¹æ®é…ç½®åˆ›å»ºç›®å½•</span><br><span class="line">[root@web01 conf.d]# mkdir /code_ip_eth0</span><br><span class="line">[root@web01 conf.d]# echo &quot;Eth0&quot; &gt; /code_ip_eth0/index.html</span><br><span class="line"></span><br><span class="line">[root@web01 conf.d]# mkdir /code_ip_eth1</span><br><span class="line">[root@web01 conf.d]# echo &quot;Eth1&quot; &gt; /code_ip_eth1/index.html</span><br><span class="line"></span><br><span class="line">3.é‡å¯nginxæœåŠ¡</span><br><span class="line">[root@web01 conf.d]# systemctl restart nginx</span><br><span class="line"></span><br><span class="line">4.ä½¿ç”¨curlå‘½ä»¤æµ‹è¯•</span><br><span class="line">[root@web01 ~]# curl 172.16.1.7</span><br><span class="line">Eth1</span><br><span class="line">[root@web01 ~]# curl 10.0.0.7</span><br><span class="line">Eth0</span><br></pre></td></tr></table></figure>

<h3 id="6-2-åŸºäºä¸»æœºå¤šç«¯å£æ–¹å¼ï¼ˆå¤šç”¨äºå†…éƒ¨æµ‹è¯•ï¼‰"><a href="#6-2-åŸºäºä¸»æœºå¤šç«¯å£æ–¹å¼ï¼ˆå¤šç”¨äºå†…éƒ¨æµ‹è¯•ï¼‰" class="headerlink" title="6.2 åŸºäºä¸»æœºå¤šç«¯å£æ–¹å¼ï¼ˆå¤šç”¨äºå†…éƒ¨æµ‹è¯•ï¼‰"></a>6.2 åŸºäºä¸»æœºå¤šç«¯å£æ–¹å¼ï¼ˆå¤šç”¨äºå†…éƒ¨æµ‹è¯•ï¼‰</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1.é…ç½®å¤šç«¯å£çš„è™šæ‹Ÿä¸»æœº</span><br><span class="line">[root@web01 conf.d]# vim port.conf</span><br><span class="line">server &#123;</span><br><span class="line">        listen 81;</span><br><span class="line">        </span><br><span class="line">        location / &#123; </span><br><span class="line">                root /code_81;</span><br><span class="line">                index index.html;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">        listen 82;</span><br><span class="line">        </span><br><span class="line">        location / &#123; </span><br><span class="line">                root /code_82;</span><br><span class="line">                index index.html;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;		</span><br><span class="line"></span><br><span class="line">2.æ ¹æ®é…ç½®æ–‡ä»¶åˆ›å»ºæ‰€éœ€çš„ç›®å½•</span><br><span class="line">[root@web01 conf.d]# mkdir /code_8&#123;1..2&#125;</span><br><span class="line">[root@web01 conf.d]# echo &quot;81&quot; &gt; /code_81/index.html</span><br><span class="line">[root@web01 conf.d]# echo &quot;82&quot; &gt; /code_82/index.html</span><br><span class="line"></span><br><span class="line">3.æ£€æŸ¥è¯­æ³•å¹¶é‡å¯æœåŠ¡</span><br><span class="line">[root@web01 conf.d]# nginx -t</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br><span class="line">[root@web01 conf.d]# systemctl restart nginx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4.å¦‚ä½•å»è®¿é—®</span><br><span class="line">	http://10.0.0.7:82/</span><br></pre></td></tr></table></figure>

<h3 id="6-3-åŸºäºä¸»æœºå¤šåŸŸåæ–¹å¼ï¼ˆå¸¸ç”¨ï¼‰"><a href="#6-3-åŸºäºä¸»æœºå¤šåŸŸåæ–¹å¼ï¼ˆå¸¸ç”¨ï¼‰" class="headerlink" title="6.3 åŸºäºä¸»æœºå¤šåŸŸåæ–¹å¼ï¼ˆå¸¸ç”¨ï¼‰"></a>6.3 åŸºäºä¸»æœºå¤šåŸŸåæ–¹å¼ï¼ˆå¸¸ç”¨ï¼‰</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1.å‡†å¤‡å¤šè™šæ‹Ÿä¸»æœºé…ç½®æ–‡ä»¶</span><br><span class="line">[root@web01 conf.d]# cat test1.oldboy.com.conf </span><br><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name test1.oldboy.com;</span><br><span class="line"></span><br><span class="line">	location / &#123;</span><br><span class="line">		root /code/test1;</span><br><span class="line">		index index.html;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[root@web01 conf.d]# cat test2.oldboy.com.conf </span><br><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name test2.oldboy.com;</span><br><span class="line"></span><br><span class="line">	location / &#123;</span><br><span class="line">		root /code/test2;</span><br><span class="line">		index index.html;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">2.æ ¹æ®é…ç½®æ–‡ä»¶åˆ›å»ºå¯¹åº”çš„ç›®å½•</span><br><span class="line">[root@web01 conf.d]# mkdir /code/test&#123;1..2&#125; -p</span><br><span class="line">[root@web01 conf.d]# echo &quot;test1_server&quot; &gt; /code/test1/index.html</span><br><span class="line">[root@web01 conf.d]# echo &quot;test2_server&quot; &gt; /code/test2/index.html</span><br><span class="line">[root@web01 conf.d]# nginx -t</span><br><span class="line">[root@web01 conf.d]# systemctl restart nginx</span><br><span class="line"></span><br><span class="line">3.é…ç½®åŸŸåè§£æ</span><br><span class="line">10.0.0.7      test1.oldboy.com</span><br><span class="line">10.0.0.7      test2.oldboy.com</span><br><span class="line"></span><br><span class="line">4.é€šè¿‡æµè§ˆå™¨è®¿é—®è¯¥ç½‘ç«™</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒã€æ—¥å¿—ä¸é”™è¯¯æ’æŸ¥"><a href="#ä¸ƒã€æ—¥å¿—ä¸é”™è¯¯æ’æŸ¥" class="headerlink" title="ä¸ƒã€æ—¥å¿—ä¸é”™è¯¯æ’æŸ¥"></a>ä¸ƒã€æ—¥å¿—ä¸é”™è¯¯æ’æŸ¥</h2><h3 id="7-1-nginxé…ç½®æ–‡ä»¶è‡ªæŸ¥"><a href="#7-1-nginxé…ç½®æ–‡ä»¶è‡ªæŸ¥" class="headerlink" title="7.1 nginxé…ç½®æ–‡ä»¶è‡ªæŸ¥"></a>7.1 nginxé…ç½®æ–‡ä»¶è‡ªæŸ¥</h3><p>1.ä¿®æ”¹å®Œé…ç½®è®°å¾—æ£€æŸ¥è¯­æ³•</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">nginx -t</span></span><br></pre></td></tr></table></figure>

<p>2.å¦‚æœæ²¡æœ‰æ£€æŸ¥è¯­æ³•ï¼Œç›´æ¥é‡è½½å¯¼è‡´æŠ¥é”™ï¼Œå¯æŸ¥çœ‹é”™è¯¯ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl status nginx -l </span><br></pre></td></tr></table></figure>

<h3 id="7-2-è®¿é—®æ—¥å¿—"><a href="#7-2-è®¿é—®æ—¥å¿—" class="headerlink" title="7.2 è®¿é—®æ—¥å¿—"></a>7.2 è®¿é—®æ—¥å¿—</h3><p>å¯ä»¥ä¸ºserverå’Œlocationå•ç‹¬è®¾ç½®è®¿é—®æ—¥å¿—ï¼ˆ<em><strong>æ¶‰åŠæ—¥å¿—ä½œç”¨åŸŸ</strong></em>ï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name code.oldboy.com;</span><br><span class="line">    </span><br><span class="line">    # å°†å½“å‰çš„serverç½‘ç«™çš„è®¿é—®æ—¥å¿—è®°å½•è‡³å¯¹åº”çš„ç›®å½•ï¼Œä½¿ç”¨mainæ ¼å¼</span><br><span class="line">    access_log /var/log/nginx/code.oldboy.com.log main;</span><br><span class="line">    location / &#123;</span><br><span class="line">        root /code;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    # å½“æœ‰äººè¯·æ±‚æ”¹favicon.icoæ—¶ï¼Œä¸è®°å½•æ—¥å¿—</span><br><span class="line">    location /favicon.ico &#123;</span><br><span class="line">        access_log off;  # off å…³é—­</span><br><span class="line">        return 200;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è®¿é—®æ—¥å¿—å‚æ•°è¯¦è§£</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">                      &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">                      &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><strong>å˜é‡åç§°</strong></th>
<th><strong>å˜é‡æè¿°</strong></th>
<th><strong>ä¸¾ä¾‹è¯´æ˜</strong></th>
</tr>
</thead>
<tbody><tr>
<td>$remote_addr</td>
<td>å®¢æˆ·ç«¯åœ°å€</td>
<td>113.140.15.90</td>
</tr>
<tr>
<td>$remote_user</td>
<td>å®¢æˆ·ç«¯ç”¨æˆ·åç§°</td>
<td>â€“</td>
</tr>
<tr>
<td>$time_local</td>
<td>è®¿é—®æ—¶é—´å’Œæ—¶åŒº</td>
<td>18&#x2F;Jul&#x2F;2012:17:00:01 +0800</td>
</tr>
<tr>
<td>$request</td>
<td>è¯·æ±‚çš„URIå’ŒHTTPåè®®</td>
<td>â€œGET &#x2F;pa&#x2F;img&#x2F;home&#x2F;logo-alipay-t.png HTTP&#x2F;1.1â€³</td>
</tr>
<tr>
<td>$http_host</td>
<td>è¯·æ±‚åœ°å€ï¼Œå³æµè§ˆå™¨ä¸­ä½ è¾“å…¥çš„åœ°å€ï¼ˆIPæˆ–åŸŸåï¼‰</td>
<td>img.alipay.com10.253.70.103</td>
</tr>
<tr>
<td>$status</td>
<td>HTTPè¯·æ±‚çŠ¶æ€</td>
<td>200</td>
</tr>
<tr>
<td>$upstream_status</td>
<td>upstreamçŠ¶æ€</td>
<td>200</td>
</tr>
<tr>
<td>$body_bytes_sent</td>
<td>å‘é€ç»™å®¢æˆ·ç«¯æ–‡ä»¶å†…å®¹å¤§å°</td>
<td>547</td>
</tr>
<tr>
<td>$http_referer</td>
<td>è·³è½¬æ¥æº</td>
<td>â€œ<a href="https://cashier.alip/">https://cashier.alip</a>ay.comâ€¦&#x2F;â€</td>
</tr>
<tr>
<td>$http_user_agent</td>
<td>ç”¨æˆ·ç»ˆç«¯ä»£ç†</td>
<td>â€œMozilla&#x2F;4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident&#x2F;4.0; SV1; GTB7.0; .NET4.0C;</td>
</tr>
<tr>
<td>$ssl_protocol</td>
<td>SSLåè®®ç‰ˆæœ¬</td>
<td>TLSv1</td>
</tr>
<tr>
<td>$ssl_cipher</td>
<td>äº¤æ¢æ•°æ®ä¸­çš„ç®—æ³•</td>
<td>RC4-SHA</td>
</tr>
<tr>
<td>$upstream_addr</td>
<td>åå°upstreamçš„åœ°å€ï¼Œå³çœŸæ­£æä¾›æœåŠ¡çš„ä¸»æœºåœ°å€</td>
<td>10.228.35.247:80</td>
</tr>
<tr>
<td>$request_time</td>
<td>æ•´ä¸ªè¯·æ±‚çš„æ€»æ—¶é—´</td>
<td>0.205</td>
</tr>
<tr>
<td>$upstream_response_time</td>
<td>è¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œupstreamå“åº”æ—¶é—´</td>
<td>0.002</td>
</tr>
</tbody></table>
<h3 id="7-3-é”™è¯¯æ—¥å¿—"><a href="#7-3-é”™è¯¯æ—¥å¿—" class="headerlink" title="7.3 é”™è¯¯æ—¥å¿—"></a>7.3 é”™è¯¯æ—¥å¿—</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tail -f /var/log/nginx/error.log</span><br></pre></td></tr></table></figure>

<h3 id="7-4-æ—¥å¿—åˆ‡å‰²logrotate"><a href="#7-4-æ—¥å¿—åˆ‡å‰²logrotate" class="headerlink" title="7.4 æ—¥å¿—åˆ‡å‰²logrotate"></a>7.4 æ—¥å¿—åˆ‡å‰²logrotate</h3><p>é…ç½®æ–‡ä»¶ï¼Œä¸€èˆ¬ä¸éœ€è¦ä¿®æ”¹ï¼Œé»˜è®¤å°±è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 logrotate.d]# cat /etc/logrotate.d/nginx</span><br><span class="line">/var/log/nginx/*.log &#123;</span><br><span class="line">    create 0640 nginx root	 	</span><br><span class="line">    daily	# æ¯å¤©åˆ‡å‰²æ—¥å¿—</span><br><span class="line">    rotate 10</span><br><span class="line">    missingok	# æ—¥å¿—ä¸¢å¤±å¿½ç•¥</span><br><span class="line">    notifempty</span><br><span class="line">    compress	# æ—¥å¿—æ–‡ä»¶å‹ç¼©</span><br><span class="line">    sharedscripts</span><br><span class="line">    postrotate</span><br><span class="line">        /bin/kill -USR1 `cat /run/nginx.pid 2&gt;/dev/null` 2&gt;/dev/null || true</span><br><span class="line">    endscript</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--07--Nginx(å…«)å››å±‚è´Ÿè½½å‡è¡¡</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/14-Nginx(%E5%85%AB)Nginx%E5%9B%9B%E5%B1%82%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/</url>
    <content><![CDATA[<h2 id="ä¸€ã€Nginxå››å±‚è´Ÿè½½å‡è¡¡ä»‹ç»"><a href="#ä¸€ã€Nginxå››å±‚è´Ÿè½½å‡è¡¡ä»‹ç»" class="headerlink" title="ä¸€ã€Nginxå››å±‚è´Ÿè½½å‡è¡¡ä»‹ç»"></a>ä¸€ã€Nginxå››å±‚è´Ÿè½½å‡è¡¡ä»‹ç»</h2><p>å››å±‚è´Ÿè½½å‡è¡¡ï¼šï¼ˆOSIä¼ è¾“å±‚   ip:portï¼‰<br>    nginx1.9 ç‰ˆæœ¬åŠ å…¥<br>ç¡¬ä»¶ï¼šF5<br>è½¯ä»¶ï¼šLVSã€Haproxyã€Nginx</p>
<p>1.å››å±‚+ä¸ƒå±‚æ¥ä½œè´Ÿè½½å‡è¡¡ï¼Œ4å±‚å¯ä»¥ä¿è¯7å±‚çš„è´Ÿè½½å‡è¡¡çš„é«˜å¯ç”¨æ€§ã€‚å¦‚:nginxå°±æ— æ³•ä¿è¯è‡ªå·±çš„æœåŠ¡é«˜å¯ç”¨ï¼Œéœ€è¦ä¾èµ–lvsæˆ–è€…keepaliveæ¥ä½œã€‚</p>
<p>2.å¦‚:tcpåè®®çš„è´Ÿè½½å‡è¡¡ï¼Œæœ‰äº›è¯·æ±‚æ˜¯TCPåè®®çš„(mysqlã€ssh)ï¼Œæˆ–è€…è¯´è¿™äº›è¯·æ±‚åªéœ€è¦ä½¿ç”¨4å±‚è¿›è¡Œç«¯å£çš„è½¬å‘å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥ä½¿ç”¨4å±‚è´Ÿè½½å‡è¡¡ã€‚<br>    æ¯”å¦‚åšï¼šmysqlè¯»çš„è´Ÿè½½å‡è¡¡ï¼ˆè½®è¯¢ï¼‰<br>    æ¯”å¦‚åšï¼šç«¯å£æ˜ å°„ã€ç«¯å£è½¬å‘         tcp&#x2F;udp</p>
<p>å››å±‚è´Ÿè½½å‡è¡¡æ€»ç»“<br>1.å››å±‚è´Ÿè½½å‡è¡¡ä»…èƒ½è½¬å‘TCP&#x2F;IPåè®®ã€UDPåè®®ï¼Œé€šå¸¸ç”¨æ¥è½¬å‘ç«¯å£ï¼Œå¦‚: tcp&#x2F;3306ï¼Œtcp&#x2F;22ï¼Œudp&#x2F;53ã€‚<br>2.å››å±‚è´Ÿè½½å‡è¡¡å¯ä»¥ç”¨æ¥è§£å†³ä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„ç«¯å£é™åˆ¶é—®é¢˜ã€‚ï¼ˆä¸ƒå±‚è´Ÿè½½å‡è¡¡æœ€å¤§ä½¿ç”¨65535ä¸ªç«¯å£å·ï¼‰<br>3.å¯ä»¥ç”¨æ¥è§£å†³ä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„é«˜å¯ç”¨é—®é¢˜ã€‚ï¼ˆå¤šå°åç«¯ä¸ƒå±‚è´Ÿè½½å‡è¡¡èƒ½åŒæ—¶çš„ä½¿ç”¨ï¼‰<br>4.å››å±‚çš„è½¬å‘æ•ˆç‡æ¯”ä¸ƒå±‚çš„é«˜çš„å¤šï¼Œä½†ä»…æ”¯æŒtcp&#x2F;ipåè®®ï¼Œä¸æ”¯æŒhttpæˆ–è€…httpsåè®®</p>
<p><img src="/img/image-20210823230415237.png" alt="image-20210823230415237"></p>
<h2 id="äºŒã€å››å±‚è´Ÿè½½å‡è¡¡é…ç½®"><a href="#äºŒã€å››å±‚è´Ÿè½½å‡è¡¡é…ç½®" class="headerlink" title="äºŒã€å››å±‚è´Ÿè½½å‡è¡¡é…ç½®"></a>äºŒã€å››å±‚è´Ÿè½½å‡è¡¡é…ç½®</h2><h3 id="2-1-ç¯å¢ƒå‡†å¤‡"><a href="#2-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2.1 ç¯å¢ƒå‡†å¤‡"></a>2.1 ç¯å¢ƒå‡†å¤‡</h3><table>
<thead>
<tr>
<th>æœåŠ¡å™¨å</th>
<th>å…¬ç½‘IP</th>
<th>å†…ç½‘IP</th>
</tr>
</thead>
<tbody><tr>
<td>lb4-01</td>
<td>10.0.0.3</td>
<td></td>
</tr>
<tr>
<td>lb01</td>
<td>10.0.0.5</td>
<td>172.16.1.5</td>
</tr>
<tr>
<td>lb02</td>
<td>10.0.0.6</td>
<td>172.16.1.6</td>
</tr>
<tr>
<td>webã€nfsã€mysqlæœåŠ¡å™¨è‹¥å¹²</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="2-2-æ–°å¢lb02è´Ÿè½½å‡è¡¡æœåŠ¡å™¨"><a href="#2-2-æ–°å¢lb02è´Ÿè½½å‡è¡¡æœåŠ¡å™¨" class="headerlink" title="2.2 æ–°å¢lb02è´Ÿè½½å‡è¡¡æœåŠ¡å™¨"></a>2.2 æ–°å¢lb02è´Ÿè½½å‡è¡¡æœåŠ¡å™¨</h3><p>1ã€å‡†å¤‡<code>lb02</code>ï¼Œå®‰è£…NginxæœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb02 ~]# cat /etc/yum.repos.d/nginx.repo </span><br><span class="line">[nginx]</span><br><span class="line">name=nginx repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/7/$basearch/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line">[root@lb02 ~]#  yum install nginx -y</span><br></pre></td></tr></table></figure>

<p>2ã€æ‹·è´<code>lb01</code>çš„ Nginxé…ç½®åˆ°<code>lb02</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb02 ~]# scp -rp root@172.16.1.5:/etc/nginx /etc/</span><br></pre></td></tr></table></figure>

<p>3ã€å¯åŠ¨Nginx</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb02 conf.d]# nginx -t</span><br><span class="line">[root@lb02 conf.d]# systemctl start nginx</span><br><span class="line">[root@lb02 conf.d]# systemctl enable nginx</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æŠ¥é”™ï¼š</p>
<p>[root@lb02 ~]# nginx -t<br>nginx: [emerg] unknown directive â€œcheckâ€ in &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;proxy_node.conf:4<br>nginx: configuration file &#x2F;etc&#x2F;nginx&#x2F;nginx.conf test failed<br>[root@lb02 ~]# vim &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;proxy_node.conf<br>[root@lb02 ~]# nginx -t<br>nginx: [emerg] unknown directive â€œcheck_statusâ€ in &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;proxy_node.conf:17<br>nginx: configuration file &#x2F;etc&#x2F;nginx&#x2F;nginx.conf test failed</p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<p>å› ä¸ºlb01å®‰è£…è¿‡ç¬¬ä¸‰æ–¹å¥åº·æ£€æŸ¥å·¥å…·ï¼Œè€Œlb02ä¸Šæ²¡æœ‰ï¼Œå…ˆå°†è¿™äº›æŠ¥é”™ç‚¹æ³¨é‡Šæ‰</p>
</blockquote>
<p>4ã€æµ‹è¯•lb02æ˜¯å¦æ­£å¸¸</p>
<p>å°†hostsä¸­çš„10.0.0.5æ¢æˆ10.0.0.6ï¼Œphpadminã€wordpressç½‘é¡µå¯ä»¥æ­£å¸¸è®¿é—®,<br>ä½†æ˜¯wecenterå¼‚å¸¸502 Bad Gateway<br>è§£å†³æ–¹æ³•: å°†web01ã€02ä¸Šçš„çš„php.iniä¸­çš„session.auto_startæ”¹ä¸º0,ä¸ç„¶ä¼š502</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 php]# vim /etc/php.ini</span><br><span class="line">session.auto_start = 0</span><br><span class="line">[root@web01 php]# systemctl restart php-fpm.service</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç½‘ä¸Šæœç´¢çš„è§£é‡Šï¼š<br>æ—¥å¸¸å¼€å‘ä¸­ï¼Œphp.inié…ç½®session.auto_start&#x3D;0é»˜è®¤å…³é—­ä¼šè¯æ—¶å¦‚æœæƒ³å¼€å¯ä¼šè¯éœ€è¦è°ƒç”¨session_startï¼š<br>session.auto_start å¼€å¯å°±è‡ªåŠ¨å®Œæˆäº†session_start()<br>åŒºåˆ«å°±åœ¨äºåœ¨ç”¨SESSIONå‰æ˜¯å¦éœ€è¦session_start();<br>å½“session.auto_start &#x3D; onæ—¶ï¼Œæ‰§è¡Œ session_start() å°†äº§ç”Ÿæ–°çš„ session_id<br>session.auto_start &#x3D; on çš„ä¼˜ç‚¹åœ¨äºï¼Œä»»ä½•æ—¶å€™éƒ½ä¸ä¼šå› å¿˜è®°æ‰§è¡Œ session_start() æˆ– session_start() åœ¨ç¨‹åºé‡Œçš„ä½ç½®ä¸å¯¹ï¼Œè€Œå¯¼è‡´é”™è¯¯<br>ç¼ºç‚¹åœ¨äºï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ç¬¬ä¸‰æ–¹ä»£ç ï¼Œåˆ™å¿…é¡»åˆ å»å…¶ä¸­çš„å…¨éƒ¨ session_start() ã€‚å¦åˆ™å°†ä¸èƒ½å¾—åˆ°æ­£ç¡®çš„ç»“æœ</p>
</blockquote>
<h3 id="2-3-é…ç½®å››å±‚è´Ÿè½½å‡è¡¡"><a href="#2-3-é…ç½®å››å±‚è´Ÿè½½å‡è¡¡" class="headerlink" title="2.3 é…ç½®å››å±‚è´Ÿè½½å‡è¡¡"></a>2.3 é…ç½®å››å±‚è´Ÿè½½å‡è¡¡</h3><p>1ã€æ–°å¢<code>lb4-01</code>æœåŠ¡å™¨ï¼Œå®‰è£…nginx</p>
<blockquote>
<p>nginxéœ€è¦å¸¦â€“with-streamæ¨¡å—</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[root@lb4-01 ~]# cat /etc/yum.repos.d/nginx.repo </span><br><span class="line">[nginx]</span><br><span class="line">name=nginx repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/7/$basearch/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line">[root@lb4-01 ~]#  yum install nginx -y	</span><br><span class="line">[root@lb4-01 ~]# vim /etc/nginx/nginx.conf</span><br><span class="line">events &#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">include /etc/nginx/conf.c/*.conf;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">	.....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€åˆ›å»ºå››å±‚è´Ÿè½½å‡è¡¡é…ç½®çš„ç›®å½•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb4-01 conf.c]# rm -f /etc/nginx/conf.d/default.conf   #åˆ é™¤httpçš„80ç«¯å£</span><br><span class="line">[root@lb4-01 ~]# mkdir /etc/nginx/conf.c</span><br><span class="line">[root@lb4-01 ~]# cd /etc/nginx/conf.c</span><br><span class="line">[root@lb4-01 conf.c]# cat lb_domain.conf </span><br><span class="line">stream &#123;</span><br><span class="line">    upstream lb &#123;</span><br><span class="line">        server 172.16.1.5:80 weight=5 max_fails=3 fail_timeout=30s;</span><br><span class="line">        server 172.16.1.6:80 weight=5 max_fails=3 fail_timeout=30s;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        proxy_connect_timeout 3s;</span><br><span class="line">        proxy_timeout 3s;</span><br><span class="line">        proxy_pass lb;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€é‡è½½æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb4-01 conf.c]# nginx -t</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br><span class="line">[root@lb4-01 conf.c]# systemctl restart nginx</span><br><span class="line">[root@lb4-01 conf.c]# systemctl enable nginx</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æŠ¥é”™ï¼š<br>[root@lb4-01 nginx]# nginx  -t<br>nginx: [emerg] unknown directive â€œstreamâ€ in &#x2F;etc&#x2F;nginx&#x2F;conf.c&#x2F;lb_domain.conf:1<br>nginx: configuration file &#x2F;etc&#x2F;nginx&#x2F;nginx.conf test failed<br>è§£å†³æ–¹æ³•ï¼š<br>yum install nginx-mod-stream.x86_64 -y</p>
</blockquote>
<blockquote>
<p>æŠ¥é”™ï¼š<br>[root@lb4-01 nginx]# systemctl status nginx<br>nginx.service - The nginx HTTP and reverse proxy server<br>Loaded: loaded (&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;nginx.service; enabled; vendor preset: disabled)<br>Active: failed (Result: exit-code) since Tue 2021-08-24 07:48:42 CST; 13s ago<br>Process: 2969 ExecStart&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx (code&#x3D;exited, status&#x3D;1&#x2F;FAILURE)<br>Process: 2967 ExecStartPre&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx -t (code&#x3D;exited, status&#x3D;0&#x2F;SUCCESS)<br>Process: 2965 ExecStartPre&#x3D;&#x2F;usr&#x2F;bin&#x2F;rm -f &#x2F;run&#x2F;nginx.pid (code&#x3D;exited, status&#x3D;0&#x2F;SUCCESS)<br>Main PID: 1959 (code&#x3D;exited, status&#x3D;0&#x2F;SUCCESS)</p>
<p>Aug 24 07:48:40 lb4-01 nginx[2969]: nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)<br>Aug 24 07:48:40 lb4-01 nginx[2969]: nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)<br>Aug 24 07:48:41 lb4-01 nginx[2969]: nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)<br>Aug 24 07:48:41 lb4-01 nginx[2969]: nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)<br>Aug 24 07:48:42 lb4-01 nginx[2969]: nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)<br>Aug 24 07:48:42 lb4-01 nginx[2969]: nginx: [emerg] still could not bind()<br>è§£å†³æ–¹æ³•ï¼š<br>éœ€è¦å°†[root@lb4-01 nginx]# vim &#x2F;etc&#x2F;nginx&#x2F;nginx.conf<br>ä¸­é»˜è®¤çš„80ç«¯å£æ”¹æ‰ï¼Œæ¯”å¦‚æ”¹æˆ81,è¿™æ ·æ‰ä¸å†²çªï¼ˆå¥‡æ€ªã€‚ã€‚ï¼‰</p>
</blockquote>
<p>4ã€è®¿é—®æµ‹è¯•</p>
<p>å°†Hostsä¸­çš„å¯¹åº”ç½‘ç«™åœ°å€çš„IPæ”¹æˆ10.0.0.3ï¼Œå°è¯•è®¿é—®ï¼Œå¯ä»¥æ­£å¸¸é€šè¿‡å››å±‚è´Ÿè½½å‡è¡¡æ¥è°ƒåº¦10.0.0.5å’Œ10.0.0.6ä¸ƒå±‚è´Ÿè½½å‡è¡¡</p>
<p><img src="/img/image-20210824001613717.png" alt="image-20210824001613717"></p>
<p><img src="/img/image-20210824001638506.png" alt="image-20210824001638506"></p>
<h2 id="ä¸‰ã€å››å±‚è´Ÿè½½å‡è¡¡æ—¥å¿—"><a href="#ä¸‰ã€å››å±‚è´Ÿè½½å‡è¡¡æ—¥å¿—" class="headerlink" title="ä¸‰ã€å››å±‚è´Ÿè½½å‡è¡¡æ—¥å¿—"></a>ä¸‰ã€å››å±‚è´Ÿè½½å‡è¡¡æ—¥å¿—</h2><h3 id="3-1-é…ç½®è¿‡ç¨‹"><a href="#3-1-é…ç½®è¿‡ç¨‹" class="headerlink" title="3.1 é…ç½®è¿‡ç¨‹"></a>3.1 é…ç½®è¿‡ç¨‹</h3><p>åœ¨å››å±‚è´Ÿè½½å‡è¡¡ä¸­é…ç½®Nginx</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb4-01 ~]# cat /etc/nginx/conf.c/lb_domain.conf</span><br><span class="line">stream &#123;</span><br><span class="line">    log_format  proxy &#x27;$remote_addr $remote_port - [$time_local] $status $protocol &#x27;</span><br><span class="line">                  &#x27;&quot;$upstream_addr&quot; &quot;$upstream_bytes_sent&quot; &quot;$upstream_connect_time&quot;&#x27; ;</span><br><span class="line">    access_log /var/log/nginx/proxy.log proxy;</span><br><span class="line"></span><br><span class="line">    upstream lb &#123;</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<h3 id="3-2-æŸ¥çœ‹æ—¥å¿—"><a href="#3-2-æŸ¥çœ‹æ—¥å¿—" class="headerlink" title="3.2 æŸ¥çœ‹æ—¥å¿—"></a>3.2 æŸ¥çœ‹æ—¥å¿—</h3><p>ç½‘é¡µè®¿é—®åï¼Œå¯è§äº§ç”Ÿçš„æ—¥å¿—</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb4-01 ~]# tail -f /var/log/nginx/proxy.log</span><br><span class="line">10.0.0.1 56396 - [25/Aug/2021:19:25:33 +0800] 200 TCP &quot;172.16.1.5:80&quot; &quot;15150&quot; &quot;0.000&quot;</span><br><span class="line">10.0.0.1 59800 - [25/Aug/2021:19:25:34 +0800] 200 TCP &quot;172.16.1.6:80&quot; &quot;8327&quot; &quot;0.000&quot;</span><br><span class="line">10.0.0.1 63468 - [25/Aug/2021:19:25:34 +0800] 200 TCP &quot;172.16.1.5:80&quot; &quot;17882&quot; &quot;0.000&quot;</span><br><span class="line">10.0.0.1 50394 - [25/Aug/2021:19:25:35 +0800] 200 TCP &quot;172.16.1.5:80&quot; &quot;24490&quot; &quot;0.000&quot;</span><br><span class="line">10.0.0.1 55549 - [25/Aug/2021:19:25:35 +0800] 200 TCP &quot;172.16.1.5:80&quot; &quot;13201&quot; &quot;0.000&quot;</span><br><span class="line">10.0.0.1 64324 - [25/Aug/2021:19:25:42 +0800] 200 TCP &quot;172.16.1.6:80&quot; &quot;70995&quot; &quot;0.000&quot;</span><br><span class="line">10.0.0.1 64566 - [25/Aug/2021:19:25:42 +0800] 200 TCP &quot;172.16.1.6:80&quot; &quot;72650&quot; &quot;0.000&quot;</span><br><span class="line">10.0.0.1 65216 - [25/Aug/2021:19:25:42 +0800] 200 TCP &quot;172.16.1.6:80&quot; &quot;68171&quot; &quot;0.000&quot;</span><br><span class="line">10.0.0.1 49668 - [25/Aug/2021:19:25:42 +0800] 200 TCP &quot;172.16.1.5:80&quot; &quot;82071&quot; &quot;0.004&quot;</span><br><span class="line">10.0.0.1 49745 - [25/Aug/2021:19:25:42 +0800] 200 TCP &quot;172.16.1.5:80&quot; &quot;63941&quot; &quot;0.001&quot;</span><br><span class="line">10.0.0.1 50574 - [25/Aug/2021:19:25:42 +0800] 200 TCP &quot;172.16.1.6:80&quot; &quot;103581&quot; &quot;0.000&quot;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€ä½¿ç”¨nginxå››å±‚è´Ÿè½½å‡è¡¡å®ç°tcpçš„è½¬å‘ï¼ˆè·³æ¿ï¼‰"><a href="#ä¸‰ã€ä½¿ç”¨nginxå››å±‚è´Ÿè½½å‡è¡¡å®ç°tcpçš„è½¬å‘ï¼ˆè·³æ¿ï¼‰" class="headerlink" title="ä¸‰ã€ä½¿ç”¨nginxå››å±‚è´Ÿè½½å‡è¡¡å®ç°tcpçš„è½¬å‘ï¼ˆè·³æ¿ï¼‰"></a>ä¸‰ã€ä½¿ç”¨nginxå››å±‚è´Ÿè½½å‡è¡¡å®ç°tcpçš„è½¬å‘ï¼ˆè·³æ¿ï¼‰</h2><p>å®ç°è·³æ¿æœºçš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code>è¯·æ±‚è´Ÿè½½å‡è¡¡ 5555    ---&gt;     172.16.1.7:22;
è¯·æ±‚è´Ÿè½½å‡è¡¡ 6666    ---&gt;     172.16.1.51:3306;
</code></pre>
<h3 id="3-1-é…ç½®è¿‡ç¨‹-1"><a href="#3-1-é…ç½®è¿‡ç¨‹-1" class="headerlink" title="3.1 é…ç½®è¿‡ç¨‹"></a>3.1 é…ç½®è¿‡ç¨‹</h3><p>é…ç½®Nginx</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb4-01 ~]# cat /etc/nginx/conf.c/lb_domain.conf </span><br><span class="line">stream &#123;</span><br><span class="line">log_format  proxy &#x27;$remote_addr $remote_port - [$time_local] $status $protocol &#x27;</span><br><span class="line">                  &#x27;&quot;$upstream_addr&quot; &quot;$upstream_bytes_sent&quot; &quot;$upstream_connect_time&quot;&#x27; ;</span><br><span class="line">    access_log /var/log/nginx/proxy.log proxy;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">å®šä¹‰è½¬å‘sshçš„22ç«¯å£</span></span><br><span class="line">	upstream ssh_7 &#123;</span><br><span class="line">		server 10.0.0.7:22;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">å®šä¹‰è½¬å‘mysqlçš„3306ç«¯å£</span></span><br><span class="line">	upstream mysql_51 &#123;</span><br><span class="line">		server 10.0.0.51:3306;</span><br><span class="line">	&#125;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen 5555;</span><br><span class="line">        proxy_connect_timeout 3s;</span><br><span class="line">        proxy_timeout 300s;</span><br><span class="line">        proxy_pass ssh_7;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 6666;</span><br><span class="line">        proxy_connect_timeout 3s;</span><br><span class="line">        proxy_timeout 3s;</span><br><span class="line">        proxy_pass mysql_51;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•è®¿é—®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è¿æ¥web01</span></span><br><span class="line">ssh root@10.0.0.3 -p 5555</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿æ¥db01</span></span><br><span class="line">ssh root@10.0.0.3 -p 6666</span><br></pre></td></tr></table></figure>









]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>K8Sç³»åˆ—(ä¸€)-å®‰è£…K8S</title>
    <url>/2021/07/08/01_%E8%BF%90%E7%BB%B4/05-K8S/K8S%E7%B3%BB%E5%88%97-%E4%B8%80-%E5%AE%89%E8%A3%85K8S/</url>
    <content><![CDATA[<p>è¯¾ç¨‹ç›®å½•ï¼š</p>
<blockquote>
<p>ç¬¬ä¸€éƒ¨åˆ†ï¼šK8Sæ¦‚å¿µå’Œæ¶æ„</p>
<p>ç¬¬äºŒéƒ¨åˆ†ï¼šK8Så®‰è£…</p>
<p>â€‹	kubeadm</p>
<p>â€‹	äºŒè¿›åˆ¶</p>
<p>ç¬¬ä¸‰éƒ¨åˆ†ï¼šK8Sæ ¸å¿ƒæ¦‚å¿µ</p>
<p>POD </p>
<p>CONTROLLER</p>
<p>SERVICE</p>
<p>INGRESS</p>
<p>RABC</p>
<p>HELM</p>
<p>æŒä¹…åŒ–å­˜å‚¨</p>
<p>ç¬¬å››éƒ¨åˆ†ï¼šé›†ç¾¤ç›‘æ§å¹³å°</p>
<p>ç¬¬äº”éƒ¨åˆ†ï¼šä»é›¶å¼€å§‹æ­å»ºé«˜å¯ç”¨K8Sé›†ç¾¤</p>
<p>ç¬¬å…­éƒ¨åˆ†ï¼šåœ¨é›†ç¾¤ç¯å¢ƒä¸­éƒ¨ç½²é¡¹ç›®</p>
</blockquote>
<h2 id="ä¸€ã€K8Sæ¦‚å¿µå’Œæ¶æ„"><a href="#ä¸€ã€K8Sæ¦‚å¿µå’Œæ¶æ„" class="headerlink" title="ä¸€ã€K8Sæ¦‚å¿µå’Œæ¶æ„"></a>ä¸€ã€K8Sæ¦‚å¿µå’Œæ¶æ„</h2><h3 id="1-K8Sæ¦‚è¿°å’Œç‰¹æ€§"><a href="#1-K8Sæ¦‚è¿°å’Œç‰¹æ€§" class="headerlink" title="1 K8Sæ¦‚è¿°å’Œç‰¹æ€§"></a>1 K8Sæ¦‚è¿°å’Œç‰¹æ€§</h3><h4 id="1-1-åŸºæœ¬ä»‹ç»"><a href="#1-1-åŸºæœ¬ä»‹ç»" class="headerlink" title="1.1 åŸºæœ¬ä»‹ç»"></a>1.1 åŸºæœ¬ä»‹ç»</h4><ul>
<li>K8Sæ˜¯è°·æ­Œåœ¨2014å¹´å¼€å‘çš„å®¹å™¨åŒ–é›†ç¾¤ç®¡ç†ç³»ç»Ÿ</li>
<li>ä½¿ç”¨K8Så¯ä»¥è¿›è¡Œå®¹å™¨åŒ–åº”ç”¨éƒ¨ç½²</li>
<li>ä½¿ç”¨K8Såˆ©äºåº”ç”¨æ‰©å±•</li>
<li>K8Sç›®æ ‡æ˜¯è®©éƒ¨ç½²å®¹å™¨åŒ–åº”ç”¨æ›´åŠ ç®€æ´å’Œé«˜æ•ˆ</li>
</ul>
<p>å®¹å™¨åŒ–éƒ¨ç½²çš„å¥½å¤„ï¼š</p>
<h4 id="1-2-K8Sçš„ç‰¹æ€§å’Œä¼˜åŠ¿"><a href="#1-2-K8Sçš„ç‰¹æ€§å’Œä¼˜åŠ¿" class="headerlink" title="1.2 K8Sçš„ç‰¹æ€§å’Œä¼˜åŠ¿"></a>1.2 K8Sçš„ç‰¹æ€§å’Œä¼˜åŠ¿</h4><p>è‡ªåŠ¨è£…ç®±ï¼šè‡ªåŠ¨éƒ¨ç½²åº”ç”¨å®¹å™¨</p>
<p>è‡ªæˆ‘ä¿®å¤ï¼ˆè‡ªæ„ˆèƒ½åŠ›ï¼‰ï¼š </p>
<p>æ°´å¹³æ‰©å±•ï¼šå‰¯æœ¬æ•°é‡å¢åŠ </p>
<p>æœåŠ¡å‘ç°ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ï¼šé€šè¿‡Serviceå®ç°ï¼Œä¸ºå¤šä¸ªå‰¯æœ¬å¯¹å¤–æä¾›ç»Ÿä¸€çš„å…¥å£ï¼ŒèŠ‚ç‚¹è°ƒåº¦è´Ÿè½½å‡è¡¡</p>
<p>æ»šåŠ¨æ›´æ–°ï¼š</p>
<p>ç‰ˆæœ¬å›é€€ï¼š</p>
<p>å¯†é’¥é…ç½®ç®¡ç†ï¼šä¸éœ€è¦é‡æ–°æ„å»ºé•œåƒï¼Œå¯ä»¥éƒ¨ç½²å’Œæ›´æ–°å¯†é’¥å’Œåº”ç”¨é…ç½®</p>
<p>å­˜å‚¨ç¼–æ’ï¼š</p>
<p>æ‰¹å¤„ç†ï¼š	</p>
<h3 id="2-K8Sæ¶æ„ç»„ä»¶"><a href="#2-K8Sæ¶æ„ç»„ä»¶" class="headerlink" title="2 K8Sæ¶æ„ç»„ä»¶"></a>2 K8Sæ¶æ„ç»„ä»¶</h3><h3 id="3-K8Sæ ¸å¿ƒæ¦‚å¿µ"><a href="#3-K8Sæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="3 K8Sæ ¸å¿ƒæ¦‚å¿µ"></a>3 K8Sæ ¸å¿ƒæ¦‚å¿µ</h3><p>3.1 Pod</p>
<p>3.2 Controller</p>
<p>3.3 Service</p>
<h2 id="äºŒã€K8Så®‰è£…"><a href="#äºŒã€K8Så®‰è£…" class="headerlink" title="äºŒã€K8Så®‰è£…"></a>äºŒã€K8Så®‰è£…</h2><blockquote>
<p>master  192.168.44.146</p>
<p>node1	192.168.44.145</p>
<p>node2	192.168.44.144</p>
</blockquote>
<h3 id="1-kubeadmå®‰è£…"><a href="#1-kubeadmå®‰è£…" class="headerlink" title="1 kubeadmå®‰è£…"></a>1 kubeadmå®‰è£…</h3><h3 id="2-äºŒè¿›åˆ¶å®‰è£…"><a href="#2-äºŒè¿›åˆ¶å®‰è£…" class="headerlink" title="2 äºŒè¿›åˆ¶å®‰è£…"></a>2 äºŒè¿›åˆ¶å®‰è£…</h3><hr>
<p>ç”Ÿäº§ç¯å¢ƒé€šç”¨éœ€æ±‚ï¼š</p>
<p>â€‹	æœåŠ¡çš„è‡ªåŠ¨å‘ç°å’Œè´Ÿè½½å‡è¡¡</p>
<p>â€‹	è‡ªæ„ˆ</p>
<p>â€‹	ä¸€é”®å‡çº§å’Œå›æ»š</p>
<p>â€‹	æ°´å¹³æ‰©å±•ï¼ˆå¼¹æ€§ä¼¸ç¼©ï¼‰ </p>
<h3 id="1-å®¹å™¨ç®¡ç†å¹³å°"><a href="#1-å®¹å™¨ç®¡ç†å¹³å°" class="headerlink" title="1 å®¹å™¨ç®¡ç†å¹³å°"></a>1 å®¹å™¨ç®¡ç†å¹³å°</h3><p>docker swarm</p>
<p>messos</p>
<p>marathon</p>
<p>kubernetes  (90%å¸‚åœº)</p>
<h2 id="2-K8Så‘å±•"><a href="#2-K8Så‘å±•" class="headerlink" title="2 K8Så‘å±•"></a>2 K8Så‘å±•</h2><p>å‘å¸ƒé¢‘ç¹ï¼Œä¸€å¹´4ä¸ªç‰ˆæœ¬	</p>
<h3 id="3-æ ¸å¿ƒç»„ä»¶"><a href="#3-æ ¸å¿ƒç»„ä»¶" class="headerlink" title="3 æ ¸å¿ƒç»„ä»¶"></a>3 æ ¸å¿ƒç»„ä»¶</h3><h2 id="äºŒã€K8Så®‰è£…-1"><a href="#äºŒã€K8Så®‰è£…-1" class="headerlink" title="äºŒã€K8Så®‰è£…"></a>äºŒã€K8Så®‰è£…</h2><blockquote>
<p>K8Så®‰è£…æ–¹å¼å¾ˆå¤šï¼š</p>
<ul>
<li>æºç ç¼–è¯‘å®‰è£… ï¼šgolangç¼–è¯‘ç¯å¢ƒ</li>
<li>äºŒè¿›åˆ¶å®‰è£… ï¼šæ–‡æ¡£ï¼Œå…¨ç¨‹æ‰‹åŠ¨ï¼Œansibleç­‰</li>
<li>kubeadmå®‰è£…ï¼šç½‘ç»œè¦æ±‚</li>
<li>minikube ï¼šå¼€å‘è€…å­¦ä¹ </li>
<li>yumå®‰è£…</li>
</ul>
<p>è¿™é‡Œä½¿ç”¨yumå®‰è£…çš„æ–¹æ³•</p>
</blockquote>
<h3 id="1-è™šæ‹Ÿæœºå‡†å¤‡"><a href="#1-è™šæ‹Ÿæœºå‡†å¤‡" class="headerlink" title="1 è™šæ‹Ÿæœºå‡†å¤‡"></a>1 è™šæ‹Ÿæœºå‡†å¤‡</h3><blockquote>
<p>centos7, 1CPU 1G</p>
<p>è®¾ç½®ä¸»æœºåï¼Œ<strong>æ·»åŠ hostsè§£æ</strong></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">k8s-master  --  10.0.0.21</span><br><span class="line">k8s-node1   --  10.0.0.22</span><br><span class="line">k8s-node2   --  10.0.0.23</span><br></pre></td></tr></table></figure>

<p>é…ç½®Centos7æºå’Œepel7æº</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br></pre></td></tr></table></figure>

<h3 id="2-MasterèŠ‚ç‚¹å®‰è£…"><a href="#2-MasterèŠ‚ç‚¹å®‰è£…" class="headerlink" title="2 MasterèŠ‚ç‚¹å®‰è£…"></a>2 MasterèŠ‚ç‚¹å®‰è£…</h3><h4 id="2-1-å®‰è£…docker"><a href="#2-1-å®‰è£…docker" class="headerlink" title="2.1 å®‰è£…docker"></a>2.1 å®‰è£…docker</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install docker -y</span><br></pre></td></tr></table></figure>

<h4 id="2-2-å®‰è£…etcd"><a href="#2-2-å®‰è£…etcd" class="headerlink" title="2.2 å®‰è£…etcd"></a>2.2 å®‰è£…etcd</h4><blockquote>
<p>etcdæ˜¯ä¸€ä¸ªnosqlæ•°æ®åº“</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install etcd -y</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹etcdé…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/etcd/etcd.conf</span><br><span class="line">ETCD_LISTEN_CLIENT_URLS=&quot;http://0.0.0.0:2379&quot;</span><br><span class="line">ETCD_ADVERTISE_CLIENT_URLS=&quot;http://10.0.0.21:2379&quot;</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨etcdæœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable etcd</span><br><span class="line">systemctl restart etcd</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•etcd</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">etcdctl set testdir/testkey0 0</span><br><span class="line">etcdctl get testdir/testkey0</span><br></pre></td></tr></table></figure>

<p>etcdctlç›¸å…³è®¾ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">etcdctl -C http://10.0.0.21:2379 cluster-health</span><br></pre></td></tr></table></figure>

<h4 id="2-3-å®‰è£…k8sæœåŠ¡"><a href="#2-3-å®‰è£…k8sæœåŠ¡" class="headerlink" title="2.3 å®‰è£…k8sæœåŠ¡"></a>2.3 å®‰è£…k8sæœåŠ¡</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install kubernetes-master -y</span><br></pre></td></tr></table></figure>

<p>é…ç½®æ–‡ä»¶ä¿®æ”¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/kubernetes/apiserver</span><br><span class="line">KUBE_API_ADDRESS=&quot;--insecure-bind-address=0.0.0.0&quot;</span><br><span class="line">KUBE_API_PORT=&quot;--port=8080&quot;</span><br><span class="line">KUBE_ETCD_SERVERS=&quot;--etcd-servers=http://10.0.0.21:2379&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 23è¡Œåˆ é™¤ServiceAccountï¼Œå¦‚ä¸‹</span></span><br><span class="line">KUBE_ADMISSION_CONTROL=&quot;--admission-control=NamespaceLifecycle,NamespaceExists,LimitRanger,SecurityContextDeny,ResourceQuota&quot; # </span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/kubernetes/config</span><br><span class="line">KUBE_MASTER=&quot;--master=http://10.0.0.21:8080&quot;</span><br></pre></td></tr></table></figure>

<p>å¼€æ”¾é˜²ç«å¢™ç«¯å£ã€é‡è¦ã€‘</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=2379/tcp --permanent</span><br><span class="line">firewall-cmd --zone=public --add-port=8080/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable kube-apiserver</span><br><span class="line">systemctl restart kube-apiserver</span><br><span class="line">systemctl enable kube-controller-manager</span><br><span class="line">systemctl restart kube-controller-manager</span><br><span class="line">systemctl enable kube-scheduler</span><br><span class="line">systemctl restart kube-scheduler</span><br></pre></td></tr></table></figure>

<h3 id="3-NodeèŠ‚ç‚¹å®‰è£…"><a href="#3-NodeèŠ‚ç‚¹å®‰è£…" class="headerlink" title="3 NodeèŠ‚ç‚¹å®‰è£…"></a>3 NodeèŠ‚ç‚¹å®‰è£…</h3><h4 id="3-1-å®‰è£…k8s-nodeæœåŠ¡"><a href="#3-1-å®‰è£…k8s-nodeæœåŠ¡" class="headerlink" title="3.1 å®‰è£…k8s-nodeæœåŠ¡"></a>3.1 å®‰è£…k8s-nodeæœåŠ¡</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install kubernetes-node</span><br></pre></td></tr></table></figure>

<p>ç¼–è¾‘é…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/kubernetes/config</span><br><span class="line">KUBE_MASTER=&quot;--master=http://10.0.0.21:8080&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/kubernetes/kubelet</span><br><span class="line">KUBELET_ADDRESS=&quot;--address=0.0.0.0&quot;</span><br><span class="line">KUBELET_PORT=&quot;--port=10250&quot;</span><br><span class="line">KUBELET_HOSTNAME=&quot;--hostname-override=10.0.0.22&quot;</span><br><span class="line">KUBELET_API_SERVER=&quot;--api-servers=http://10.0.0.21:8080&quot;</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable kubelet</span><br><span class="line">systemctl restart kubelet</span><br><span class="line">systemctl enable kube-proxy</span><br><span class="line">systemctl restart kube-proxy</span><br></pre></td></tr></table></figure>

<h4 id="3-2-fannelç½‘ç»œæœåŠ¡å®‰è£…"><a href="#3-2-fannelç½‘ç»œæœåŠ¡å®‰è£…" class="headerlink" title="3.2 fannelç½‘ç»œæœåŠ¡å®‰è£…"></a>3.2 fannelç½‘ç»œæœåŠ¡å®‰è£…</h4><blockquote>
<p>ç”¨äºèŠ‚ç‚¹ä¹‹é—´é€šä¿¡</p>
</blockquote>
<p>æ‰€æœ‰èŠ‚ç‚¹å®‰è£…å¹¶é…ç½®fannel</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install flannel -y</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/flanneld</span><br><span class="line">FLANNEL_ETCD_ENDPOINTS=&quot;http://10.0.0.21:2379&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">etcdctl mk /atomic.io/network/config &#x27;&#123;&quot;Network&quot;:&quot;172.16.0.0/16&quot;&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>é‡æ–°å¯åŠ¨æœåŠ¡â€”MasterèŠ‚ç‚¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable fanneld</span><br><span class="line">systemctl restart fanneld</span><br><span class="line">systemctl restart kube-apiserver</span><br><span class="line">systemctl restart kube-controller-manager</span><br><span class="line">systemctl restart kube-scheduler	</span><br></pre></td></tr></table></figure>

<p>é‡æ–°å¯åŠ¨æœåŠ¡â€”NodeèŠ‚ç‚¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable fanneld</span><br><span class="line">systemctl restart fanneld</span><br><span class="line">systemctl restart kubelet</span><br><span class="line">systemctl restart kube-proxy</span><br></pre></td></tr></table></figure>

<h3 id="4-é…ç½®Masterä¸ºé•œåƒæœåŠ¡å™¨"><a href="#4-é…ç½®Masterä¸ºé•œåƒæœåŠ¡å™¨" class="headerlink" title="4 é…ç½®Masterä¸ºé•œåƒæœåŠ¡å™¨"></a>4 é…ç½®Masterä¸ºé•œåƒæœåŠ¡å™¨</h3><h2 id="ä¸‰ã€K8Sä½¿ç”¨"><a href="#ä¸‰ã€K8Sä½¿ç”¨" class="headerlink" title="ä¸‰ã€K8Sä½¿ç”¨"></a>ä¸‰ã€K8Sä½¿ç”¨</h2><p>1 æŸ¥çœ‹èŠ‚ç‚¹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl get nodes</span><br></pre></td></tr></table></figure>

<p>2 æŸ¥çœ‹æœåŠ¡çŠ¶æ€</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl get componentstatus</span><br></pre></td></tr></table></figure>

<h3 id="1-Podä½¿ç”¨"><a href="#1-Podä½¿ç”¨" class="headerlink" title="1 Podä½¿ç”¨"></a>1 Podä½¿ç”¨</h3><p>åˆ›å»ºpod</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl create -f k8s_pod.yml</span><br></pre></td></tr></table></figure>

<p>åˆ é™¤pod</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kubectl delete pod oldboy</span><br><span class="line">kubectl delete pod --all åˆ é™¤æ‰€æœ‰</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹pod</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl get pods</span><br><span class="line">kubectl get pods -o wides</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹podè¯¦ç»†ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl descripe pod nginx</span><br></pre></td></tr></table></figure>

<p> æ›´æ–°</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl replace xxxx.yml</span><br></pre></td></tr></table></figure>



<h4 id="1-1-åˆ›å»ºä¸€ä¸ªpod-ä¸ºä»€ä¹ˆè¦å¯åŠ¨ä¸¤ä¸ªå®¹å™¨ï¼Ÿ"><a href="#1-1-åˆ›å»ºä¸€ä¸ªpod-ä¸ºä»€ä¹ˆè¦å¯åŠ¨ä¸¤ä¸ªå®¹å™¨ï¼Ÿ" class="headerlink" title="1.1 åˆ›å»ºä¸€ä¸ªpod,ä¸ºä»€ä¹ˆè¦å¯åŠ¨ä¸¤ä¸ªå®¹å™¨ï¼Ÿ"></a>1.1 åˆ›å»ºä¸€ä¸ªpod,ä¸ºä»€ä¹ˆè¦å¯åŠ¨ä¸¤ä¸ªå®¹å™¨ï¼Ÿ</h4><blockquote>
<p>ä¸€ä¸ªpodä¸­å¯ä»¥æŒ‚å¤šä¸ªå®¹å™¨</p>
</blockquote>
<p>æ¯”å¦‚åˆ›å»ºä¸€ä¸ªniginx podï¼Œå°†å¯åŠ¨ä¸€ä¸ªpodå®¹å™¨ï¼Œä¸€ä¸ªnginxå®¹å™¨</p>
<p>Podå®¹å™¨172.16.18.2</p>
<p>Nginxå®¹å™¨ï¼Œå…±ç”¨podå®¹å™¨ip</p>
<p>ä¸»è¦é€šè¿‡ç”¨PODæ¥å®ç°K8Sçš„é«˜çº§åŠŸèƒ½</p>
<h4 id="1-2-rcå‰¯æœ¬æ§åˆ¶å™¨çš„ä½¿ç”¨"><a href="#1-2-rcå‰¯æœ¬æ§åˆ¶å™¨çš„ä½¿ç”¨" class="headerlink" title="1.2 rcå‰¯æœ¬æ§åˆ¶å™¨çš„ä½¿ç”¨"></a>1.2 rcå‰¯æœ¬æ§åˆ¶å™¨çš„ä½¿ç”¨</h4><p>é€šè¿‡rcä¿è¯å®¹å™¨é«˜å¯ç”¨</p>
<p>è°ƒæ•´rcå‰¯æœ¬æ•°</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl scale rc myweb --replicates=1</span><br></pre></td></tr></table></figure>

<h4 id="1-3-åˆ©ç”¨rcå®ç°æ»šåŠ¨å‡çº§å’Œä¸€é”®å›æ»š"><a href="#1-3-åˆ©ç”¨rcå®ç°æ»šåŠ¨å‡çº§å’Œä¸€é”®å›æ»š" class="headerlink" title="1.3 åˆ©ç”¨rcå®ç°æ»šåŠ¨å‡çº§å’Œä¸€é”®å›æ»š"></a>1.3 åˆ©ç”¨rcå®ç°æ»šåŠ¨å‡çº§å’Œä¸€é”®å›æ»š</h4><p>æ¡ˆä¾‹ï¼šnginx 1.13å‡çº§1.15</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ¯5så‡çº§ä¸€ä¸ª</span></span><br><span class="line">kubectl rolling-update myweb -f nginx-rc1.15.yaml --update-period=5s</span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹ï¼šnginx1.15å›æ»šåˆ°1.13</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl rolling-update mywebv2 -f nginx-rc1.13.yaml</span><br></pre></td></tr></table></figure>



<h3 id="serviceçš„åˆ›å»ºå’Œè®¿é—®"><a href="#serviceçš„åˆ›å»ºå’Œè®¿é—®" class="headerlink" title="serviceçš„åˆ›å»ºå’Œè®¿é—®"></a>serviceçš„åˆ›å»ºå’Œè®¿é—®</h3><blockquote>
<p>å¤–éƒ¨è®¿é—®å®¹å™¨ï¼Œç«¯å£æ˜ å°„</p>
</blockquote>
<h4 id="K8Så°ç»“"><a href="#K8Så°ç»“" class="headerlink" title="K8Så°ç»“"></a>K8Så°ç»“</h4><p>1 ç«¯å£30000å¼€å§‹ï¼Ÿ</p>
<p>2 æŸ¥çœ‹ymlå­—æ®µç¼–å†™å¸®åŠ©</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kubectl explain svc.spec</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäº”ï¼‰K8S</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--07--Nginx(å…­)ä¸ƒå±‚è´Ÿè½½å‡è¡¡</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/12-Nginx(%E5%85%AD)Nginx%E4%B8%83%E5%B1%82%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/</url>
    <content><![CDATA[<h2 id="ä¸€ã€ä¸ƒå±‚è´Ÿè½½å‡è¡¡ç®€ä»‹-éœ€è¡¥å……"><a href="#ä¸€ã€ä¸ƒå±‚è´Ÿè½½å‡è¡¡ç®€ä»‹-éœ€è¡¥å……" class="headerlink" title="ä¸€ã€ä¸ƒå±‚è´Ÿè½½å‡è¡¡ç®€ä»‹(éœ€è¡¥å……)"></a>ä¸€ã€ä¸ƒå±‚è´Ÿè½½å‡è¡¡ç®€ä»‹(éœ€è¡¥å……)</h2><h3 id="1-1-nginxä»£ç†çš„å±€é™æ€§"><a href="#1-1-nginxä»£ç†çš„å±€é™æ€§" class="headerlink" title="1.1 nginxä»£ç†çš„å±€é™æ€§"></a>1.1 nginxä»£ç†çš„å±€é™æ€§</h3><p>â€‹	ä¸€ä¸ªlocationä»…èƒ½ä»£ç†åç«¯ä¸€å°ä¸»æœº</p>
<h3 id="1-2-ä¸ƒå±‚è´Ÿè½½å‡è¡¡"><a href="#1-2-ä¸ƒå±‚è´Ÿè½½å‡è¡¡" class="headerlink" title="1.2 ä¸ƒå±‚è´Ÿè½½å‡è¡¡"></a>1.2 ä¸ƒå±‚è´Ÿè½½å‡è¡¡</h3><p>Nginxè´Ÿè½½å‡è¡¡<br>    è´Ÿè½½<br>    è´Ÿè½½å‡è¡¡<br>    è°ƒåº¦<br>    load balance<br>    LB<br>å…¬æœ‰äº‘<br>    SLB		é˜¿é‡Œäº‘è´Ÿè½½å‡è¡¡<br>    QLB		é’äº‘è´Ÿè½½å‡è¡¡<br>    CLB		è…¾è®¯è´Ÿè½½å‡è¡¡<br>    ULB		ucloudçš„è´Ÿè½½å‡è¡¡</p>
<h3 id="1-3-å››å±‚è´Ÿè½½å‡è¡¡å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„åŒºåˆ«"><a href="#1-3-å››å±‚è´Ÿè½½å‡è¡¡å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„åŒºåˆ«" class="headerlink" title="1.3 å››å±‚è´Ÿè½½å‡è¡¡å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„åŒºåˆ«"></a>1.3 å››å±‚è´Ÿè½½å‡è¡¡å’Œä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„åŒºåˆ«</h3><p>å››å±‚è´Ÿè½½å‡è¡¡æ•°æ®åŒ…åœ¨åº•å±‚å°±è¿›è¡Œäº†åˆ†å‘ï¼Œè€Œä¸ƒå±‚è´Ÿè½½å‡è¡¡æ•°æ®åŒ…åˆ™æ˜¯åœ¨æœ€é¡¶å±‚è¿›è¡Œåˆ†å‘ã€ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œä¸ƒå±‚è´Ÿè½½å‡è¡¡æ•ˆç‡æ²¡æœ‰å››è´Ÿè½½å‡è¡¡é«˜ã€‚<br>ä½†ä¸ƒå±‚è´Ÿè½½å‡è¡¡æ›´è´´è¿‘äºæœåŠ¡ï¼Œå¦‚:httpåè®®å°±æ˜¯ä¸ƒå±‚åè®®ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨Nginxå¯ä»¥ä½œä¼šè¯ä¿æŒï¼ŒURLè·¯å¾„è§„åˆ™åŒ¹é…ã€headå¤´æ”¹å†™ç­‰ç­‰ï¼Œè¿™äº›æ˜¯å››å±‚è´Ÿè½½å‡è¡¡æ— æ³•å®ç°çš„ã€‚</p>
<h2 id="äºŒã€é…ç½®å®ä¾‹"><a href="#äºŒã€é…ç½®å®ä¾‹" class="headerlink" title="äºŒã€é…ç½®å®ä¾‹"></a>äºŒã€é…ç½®å®ä¾‹</h2><h3 id="2-1-æµ‹è¯•ç¯å¢ƒå‡†å¤‡"><a href="#2-1-æµ‹è¯•ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2.1 æµ‹è¯•ç¯å¢ƒå‡†å¤‡"></a>2.1 æµ‹è¯•ç¯å¢ƒå‡†å¤‡</h3><table>
<thead>
<tr>
<th>ä¸»æœºåç§°</th>
<th>åº”ç”¨ç¯å¢ƒ</th>
<th>å¤–ç½‘åœ°å€</th>
<th>å†…ç½‘åœ°å€</th>
</tr>
</thead>
<tbody><tr>
<td>web01</td>
<td>nginx + phpï¼ˆæä¾›ç½‘é¡µæœåŠ¡ï¼‰</td>
<td>10.0.0.7</td>
<td>172.16.1.7</td>
</tr>
<tr>
<td>web01</td>
<td>nginx + phpï¼ˆæä¾›ç½‘é¡µæœåŠ¡ï¼‰</td>
<td>10.0.0.8</td>
<td>172.16.1.8</td>
</tr>
<tr>
<td>lb01</td>
<td>nginxï¼ˆæä¾›ä»£ç†æœåŠ¡ï¼‰</td>
<td>10.0.0.5</td>
<td>172.16.1.5</td>
</tr>
<tr>
<td>db01</td>
<td>mysql</td>
<td>10.0.0.51</td>
<td>172.16.1.51</td>
</tr>
</tbody></table>
<h3 id="2-2-é…ç½®æ­¥éª¤"><a href="#2-2-é…ç½®æ­¥éª¤" class="headerlink" title="2.2 é…ç½®æ­¥éª¤"></a>2.2 é…ç½®æ­¥éª¤</h3><p>1ã€web01&#x2F;02çš„ç½‘é¡µæœåŠ¡æ­å»º</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 ~]# cd /etc/nginx/conf.d/</span><br><span class="line">[root@web01 conf.d]# cat node.conf </span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name node.oldboy.com;</span><br><span class="line">    location / &#123;</span><br><span class="line">        root /node;</span><br><span class="line">        index index.html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@web01 conf.d]# mkdir /node</span><br><span class="line">[root@web01 conf.d]# echo &quot;Web01...&quot; &gt; /node/index.html</span><br><span class="line">[root@web01 conf.d]# systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>2ã€é…ç½®nginxè´Ÿè½½å‡è¡¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# cd /etc/nginx/conf.d/</span><br><span class="line">[root@lb01 conf.d]# cat node_proxy.conf </span><br><span class="line">upstream node &#123;</span><br><span class="line">    server 172.16.1.7:80;</span><br><span class="line">    server 172.16.1.8:80;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name node.oldboy.com;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://node;</span><br><span class="line">        include proxy_params;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">[root@lb01 conf.d]# systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>3ã€å®¢æˆ·ç«¯ç½‘é¡µæµ‹è¯•è®¿é—®ï¼ŒF5åˆ·æ–°ï¼Œå¯è§web01&#x2F;web02åœ¨å¾ªç¯</p>
<p><img src="/img/image-20210820132420586.png" alt="image-20210820132420586"></p>
<p><img src="/img/image-20210820132431971.png" alt="image-20210820132431971"></p>
<h3 id="2-3-è´Ÿè½½å‡è¡¡ä¹Ÿå¯ä»¥ä½¿ç”¨ä»£ç†å‚æ•°"><a href="#2-3-è´Ÿè½½å‡è¡¡ä¹Ÿå¯ä»¥ä½¿ç”¨ä»£ç†å‚æ•°" class="headerlink" title="2.3 è´Ÿè½½å‡è¡¡ä¹Ÿå¯ä»¥ä½¿ç”¨ä»£ç†å‚æ•°"></a>2.3 è´Ÿè½½å‡è¡¡ä¹Ÿå¯ä»¥ä½¿ç”¨ä»£ç†å‚æ•°</h3><blockquote>
<p>ä¸ä¹‹å‰éƒ¨ç½²çš„çŸ¥ä¹wencenterã€åšå®¢mywordpressç»“åˆ</p>
</blockquote>
<p>1ã€å‡†å¤‡Nginxè´Ÿè½½å‡è¡¡è°ƒåº¦ä½¿ç”¨çš„proxy_params</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@Nginx ~]# vim /etc/nginx/proxy_params</span><br><span class="line">proxy_set_header Host $http_host;</span><br><span class="line">proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line"></span><br><span class="line">proxy_connect_timeout 30;</span><br><span class="line">proxy_send_timeout 60;</span><br><span class="line">proxy_read_timeout 60;</span><br><span class="line"></span><br><span class="line">proxy_buffering on;</span><br><span class="line">proxy_buffer_size 32k;</span><br><span class="line">proxy_buffers 4 128k;</span><br></pre></td></tr></table></figure>

<p>2ã€è´Ÿè½½å‡è¡¡é…ç½®ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 conf.d]# vim proxy_oldboy.com.conf</span><br><span class="line">upstream node &#123;</span><br><span class="line">        server 172.16.1.7:80;</span><br><span class="line">        server 172.16.1.8:80;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name blog.oldboy.com;</span><br><span class="line">        location / &#123;</span><br><span class="line">                proxy_pass http://node;</span><br><span class="line">                include proxy_params;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name zh.oldboy.com;</span><br><span class="line">        location / &#123;</span><br><span class="line">                proxy_pass http://node;</span><br><span class="line">                include proxy_params;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-4-è´Ÿè½½å‡è¡¡æµ‹è¯•"><a href="#2-4-è´Ÿè½½å‡è¡¡æµ‹è¯•" class="headerlink" title="2.4 è´Ÿè½½å‡è¡¡æµ‹è¯•"></a>2.4 è´Ÿè½½å‡è¡¡æµ‹è¯•</h3><p>æ­£å¸¸æƒ…å†µä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1ã€ä¸¤å°webæœåŠ¡å™¨çš„nginxæœåŠ¡å‡æ‰“å¼€ï¼ˆæ¨¡æ‹Ÿæµé‡åˆ†æ‘Šï¼‰</span><br><span class="line">	å¯ä»¥è´Ÿè½½å‡è¡¡ï¼Œè½®æµè®¿é—®</span><br><span class="line">2ã€å…³æ‰ä¸€å°webæœåŠ¡å™¨çš„nginxæœåŠ¡ï¼ˆæ¨¡æ‹Ÿå®¹ç¾ï¼‰</span><br><span class="line">	ç½‘é¡µä»å¯ä»¥æ­£å¸¸æ‰“å¼€</span><br><span class="line">3ã€ä¸¤å°webæœåŠ¡å™¨çš„NginxæœåŠ¡å‡å…³é—­</span><br><span class="line">	ç½‘é¡µæ— æ³•æ‰“å¼€ï¼Œ502</span><br></pre></td></tr></table></figure>

<p>å­˜åœ¨ä¸€ç§æƒ…å†µï¼Œä¸¤ä¸ªwebçš„nginxæœåŠ¡éƒ½æ²¡æŒ‚ï¼Œä½†æ˜¯å…¶ä¸­ä¸€å°çš„php-fpmæœåŠ¡æŒ‚äº†ï¼Œæ¨¡æ‹Ÿè¿™ç§åœºæ™¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web02 ~]# systemctl stop php-fpm</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶F5åˆ·æ–°wordpressçš„é¡µé¢ï¼Œå°†ä¸€ä¼š502ï¼Œä¸€ä¼šæ­£å¸¸ï¼Œä½“éªŒä¸å¥½ï¼Œå¯é€šè¿‡æ·»åŠ nginxä»£ç†å‚æ•°è§£å†³</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 conf.d]# cat /etc/nginx/proxy_params</span><br><span class="line">proxy_set_header Host $http_host;</span><br><span class="line">proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">proxy_next_upstream error timeout http_500 http_502 http_503 http_504; # è§£å†³é—®é¢˜</span><br><span class="line"></span><br><span class="line">proxy_connect_timeout 30;</span><br><span class="line">proxy_send_timeout 60;</span><br><span class="line">proxy_read_timeout 60;</span><br><span class="line"></span><br><span class="line">proxy_buffering on;</span><br><span class="line">proxy_buffer_size 32k;</span><br><span class="line">proxy_buffers 4 128k;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>PSï¼šé—®é¢˜åŸå› </p>
<p>ä½¿ç”¨nginxè´Ÿè½½å‡è¡¡æ—¶ï¼Œå¦‚ä½•å°†åç«¯è¯·æ±‚è¶…æ—¶çš„æœåŠ¡å™¨æµé‡å¹³æ»‘çš„åˆ‡æ¢åˆ°å¦ä¸€å°ä¸Šã€‚<br>Nginxæ˜¯æœ¬èº«æ˜¯æœ‰æœºåˆ¶çš„ï¼Œå¦‚æœå‡ºç°ä¸€ä¸ªèŠ‚ç‚¹downæ‰çš„æ—¶å€™ï¼ŒNginxä¼šæ›´æ®ä½ å…·ä½“è´Ÿè½½å‡è¡¡çš„è®¾ç½®ï¼Œå°†è¯·æ±‚è½¬ç§»åˆ°å…¶ä»–çš„èŠ‚ç‚¹ä¸Šï¼Œä½†æ˜¯ï¼Œå¦‚æœåå°æœåŠ¡è¿æ¥æ²¡æœ‰downæ‰ï¼Œå¹¶ä¸”è¿”å›é”™è¯¯å¼‚å¸¸ç äº†å¦‚ï¼š504ã€502ã€500ï¼ŒNginxå°±ä¼šç›´æ¥è¿”å›ä»åç«¯è·å–çš„å¼‚å¸¸ä»£ç ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--07--Nginx(äº”)ä»£ç†ä»‹ç»</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/11-Nginx(%E4%BA%94)Nginx%E4%BB%A3%E7%90%86/</url>
    <content><![CDATA[<h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯ä»£ç†"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯ä»£ç†" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯ä»£ç†"></a>ä¸€ã€ä»€ä¹ˆæ˜¯ä»£ç†</h2><h3 id="1-1-æ­£å‘ä»£ç†å’Œåå‘ä»£ç†çš„åŒºåˆ«"><a href="#1-1-æ­£å‘ä»£ç†å’Œåå‘ä»£ç†çš„åŒºåˆ«" class="headerlink" title="1.1 æ­£å‘ä»£ç†å’Œåå‘ä»£ç†çš„åŒºåˆ«"></a>1.1 æ­£å‘ä»£ç†å’Œåå‘ä»£ç†çš„åŒºåˆ«</h3><p>åŒºåˆ«åœ¨äºå½¢å¼ä¸ŠæœåŠ¡çš„â€å¯¹è±¡â€ä¸ä¸€æ ·<br>    æ­£å‘ä»£ç†ä»£ç†çš„å¯¹è±¡æ˜¯å®¢æˆ·ç«¯ï¼Œä¸ºå®¢æˆ·ç«¯æœåŠ¡   PCç”µè„‘<br>    åå‘ä»£ç†ä»£ç†çš„å¯¹è±¡æ˜¯æœåŠ¡ç«¯ï¼Œä¸ºæœåŠ¡ç«¯æœåŠ¡	æœåŠ¡å™¨</p>
<h3 id="1-2-Nginxåå‘ä»£ç†æ¨¡å¼é…ç½®æ¨¡å—"><a href="#1-2-Nginxåå‘ä»£ç†æ¨¡å¼é…ç½®æ¨¡å—" class="headerlink" title="1.2 Nginxåå‘ä»£ç†æ¨¡å¼é…ç½®æ¨¡å—"></a>1.2 Nginxåå‘ä»£ç†æ¨¡å¼é…ç½®æ¨¡å—</h3><p>åå‘ä»£ç†æ¨¡å¼				Nginxé…ç½®æ¨¡å—<br>httpã€websocketã€https		ngx_http_proxy_module<br>fastcgi						ngx_http_fastcgi_module<br>uwsgi						ngx_http_uwsgi_module<br>grpc						ngx_http_v2_module</p>
<h2 id="äºŒã€Nginxä»£ç†é…ç½®"><a href="#äºŒã€Nginxä»£ç†é…ç½®" class="headerlink" title="äºŒã€Nginxä»£ç†é…ç½®"></a>äºŒã€Nginxä»£ç†é…ç½®</h2><h3 id="2-1-æµ‹è¯•ç¯å¢ƒå‡†å¤‡"><a href="#2-1-æµ‹è¯•ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2.1 æµ‹è¯•ç¯å¢ƒå‡†å¤‡"></a>2.1 æµ‹è¯•ç¯å¢ƒå‡†å¤‡</h3><table>
<thead>
<tr>
<th>ä¸»æœºåç§°</th>
<th>åº”ç”¨ç¯å¢ƒ</th>
<th>å¤–ç½‘åœ°å€</th>
<th>å†…ç½‘åœ°å€</th>
</tr>
</thead>
<tbody><tr>
<td>web01</td>
<td>nginx + phpï¼ˆæä¾›ç½‘é¡µæœåŠ¡ï¼‰</td>
<td>10.0.0.7</td>
<td>172.16.1.7</td>
</tr>
<tr>
<td>lb01</td>
<td>nginxï¼ˆæä¾›ä»£ç†æœåŠ¡ï¼‰</td>
<td>10.0.0.5</td>
<td>172.16.1.5</td>
</tr>
<tr>
<td>db01</td>
<td>mysql</td>
<td>10.0.0.51</td>
<td>172.16.1.51</td>
</tr>
</tbody></table>
<h3 id="2-2-Nginxä»£ç†é…ç½®æ­¥éª¤"><a href="#2-2-Nginxä»£ç†é…ç½®æ­¥éª¤" class="headerlink" title="2.2 Nginxä»£ç†é…ç½®æ­¥éª¤"></a>2.2 Nginxä»£ç†é…ç½®æ­¥éª¤</h3><p>1ã€<code>web01</code>-é…ç½®åç«¯çš„web</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# cat web.oldboy.com.conf </span><br><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name web.oldboy.com;</span><br><span class="line">	root /web;</span><br><span class="line"></span><br><span class="line">	location / &#123;</span><br><span class="line">		index index.php index.html;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€åˆ›å»ºæ–‡ä»¶å¤¹å’Œç½‘é¡µæ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# mkdir /web</span><br><span class="line">[root@web01 conf.d]# echo &quot;Web01.....&quot; &gt; /web/index.html</span><br></pre></td></tr></table></figure>

<p>3ã€é‡å¯nginxæœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]# nginx -t</span><br><span class="line">sysnginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br><span class="line">t[root@web01 conf.d]# systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>4ã€<code>lb01</code>-nginxä»£ç†é…ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 conf.d]# cat proxy_web.conf</span><br><span class="line">server &#123;</span><br><span class="line">	listen 80;</span><br><span class="line">	server_name web.oldboy.com;</span><br><span class="line">	location / &#123;</span><br><span class="line">		proxy_pass http://10.0.0.7:80;</span><br><span class="line"><span class="meta">		#</span><span class="bash"> è®¾ç½®headerå°†åŸŸåä¼ è¿‡å»</span></span><br><span class="line">		proxy_set_header Host $http_host; </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€é‡å¯NginxæœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure>

<p>6ã€å®¢æˆ·æœºè®¾ç½®hostsï¼Œå¹¶æµ‹è¯•è®¿é—®ç½‘é¡µï¼Œå¯ä»¥æ­£å¸¸æ˜¾ç¤ºweb01é¡µé¢</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">10.0.0.5 web.oldboy.com</span><br></pre></td></tr></table></figure>

<p><img src="/img/image-20210820101740471.png" alt="image-20210820101740471"></p>
<h2 id="ä¸‰ã€ä»£ç†æµç¨‹åˆ†æ"><a href="#ä¸‰ã€ä»£ç†æµç¨‹åˆ†æ" class="headerlink" title="ä¸‰ã€ä»£ç†æµç¨‹åˆ†æ"></a>ä¸‰ã€ä»£ç†æµç¨‹åˆ†æ</h2><p>1ã€èµ°10ç½‘å…³ï¼Œwiresharkçš„æŠ“åŒ…æˆªå›¾å¦‚ä¸‹</p>
<p><img src="/img/image-20210820102735419.png" alt="image-20210820102735419"></p>
<p>2ã€æµç¨‹å›¾</p>
<p><img src="/img/image-20210820103041679.png" alt="image-20210820103041679"></p>
<p>3ã€æµ‹è¯•ï¼Œå…³æ‰web01çš„å…¬ç½‘ipç½‘å£(10.0.0.7)ï¼Œå†å°è¯•è®¿é—®ï¼Œä¹Ÿå¯ä»¥æ­£å¸¸è®¿é—®åˆ°web01çš„ç½‘é¡µ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 conf.d]# cat /etc/nginx/conf.d/proxy_web.conf</span><br><span class="line">server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name  web.oldboy.com;</span><br><span class="line">        location / &#123;</span><br><span class="line">                proxy_pass http://172.16.1.7:80;</span><br><span class="line">                include /etc/nginx/proxy_params;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4ã€æŠ“åŒ…åˆ†æ</p>
<p>å› ä¸º172ç½‘æ®µèµ°çš„è™šæ‹Ÿæœºå†…éƒ¨ç½‘ç»œï¼ŒæŠ“ä¸åˆ°</p>
<p><img src="/img/image-20210820111454152.png" alt="image-20210820111454152"></p>
<h2 id="ä¸‰ã€Nginxä»£ç†å¸¸ç”¨å‚æ•°"><a href="#ä¸‰ã€Nginxä»£ç†å¸¸ç”¨å‚æ•°" class="headerlink" title="ä¸‰ã€Nginxä»£ç†å¸¸ç”¨å‚æ•°"></a>ä¸‰ã€Nginxä»£ç†å¸¸ç”¨å‚æ•°</h2><h3 id="3-1-å¸¸ç”¨å‚æ•°è§£é‡Š"><a href="#3-1-å¸¸ç”¨å‚æ•°è§£é‡Š" class="headerlink" title="3.1 å¸¸ç”¨å‚æ•°è§£é‡Š"></a>3.1 å¸¸ç”¨å‚æ•°è§£é‡Š</h3><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>proxy_pass <a href="http://10.0.0.7/">http://10.0.0.7:80</a>;</td>
<td></td>
</tr>
<tr>
<td>proxy_http_version 1.1;</td>
<td>ä»£ç†å‘åç«¯è¯·æ±‚ä½¿ç”¨çš„ç‰ˆæœ¬</td>
</tr>
<tr>
<td>proxy_set_header Host $http_host;</td>
<td>ä»£ç†å‘åç«¯è¯·æ±‚æºå¸¦çš„åŸŸå</td>
</tr>
<tr>
<td>proxy_set_header X-Real-IP $remote_addr;</td>
<td><font color="blue">ç”¨äºè·å–å®¢æˆ·ç«¯çœŸå®IPï¼ˆä¸å¦‚x-forwardï¼‰</font></td>
</tr>
<tr>
<td>proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</td>
<td><font color="blue">è·å–å®¢æˆ·ç«¯çœŸå®IPåŠå…¨é“¾è·¯IP</font></td>
</tr>
<tr>
<td>proxy_connect_timeout 30;</td>
<td>ä»£ç†æ¥è¿åç«¯è¶…æ—¶æ—¶é—´</td>
</tr>
<tr>
<td>proxy_send_timeout 60;</td>
<td>åç«¯ä¼ é€’æ•°æ®è‡³ä»£ç†çš„è¶…æ—¶æ—¶é—´</td>
</tr>
<tr>
<td>proxy_read_timeout 60;</td>
<td>åç«¯ç›¸åº”ä»£ç†çš„è¶…æ—¶æ—¶é—´</td>
</tr>
<tr>
<td>proxy_buffering on;</td>
<td>æ˜¯å¦å¼€å¯proxyçš„bufferåŠŸèƒ½</td>
</tr>
<tr>
<td>proxy_buffer_size 32k;</td>
<td>è®¾ç½®bufferå¤§å°</td>
</tr>
<tr>
<td>proxy_buffers 4 128k;</td>
<td>è®¾ç½®å­˜å‚¨è¢«ä»£ç†æœåŠ¡å™¨ä¸Šçš„æ•°æ®æ‰€å ç”¨çš„bufferçš„ä¸ªæ•°å’Œæ¯ä¸ªbufferçš„å¤§å°</td>
</tr>
</tbody></table>
<p>X-Forwarded-Forå¯ä»¥nginxçš„æ—¥å¿—æŸ¥çœ‹åˆ°</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tail -f /var/log/nginx/access.log</span><br></pre></td></tr></table></figure>

<h3 id="3-2-å‚æ•°å¤šçš„æ—¶å€™å¦‚ä½•é…ç½®"><a href="#3-2-å‚æ•°å¤šçš„æ—¶å€™å¦‚ä½•é…ç½®" class="headerlink" title="3.2 å‚æ•°å¤šçš„æ—¶å€™å¦‚ä½•é…ç½®"></a>3.2 å‚æ•°å¤šçš„æ—¶å€™å¦‚ä½•é…ç½®</h3><blockquote>
<p>å¯å°†å‚æ•°å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶ååœ¨nginxé…ç½®æ–‡ä»¶é‡ŒincludeåŒ…å«è¿›å»</p>
</blockquote>
<p>1ã€åˆ›å»ºåŒ…å«å‚æ•°çš„æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 conf.d]# cat /etc/nginx/proxy_params</span><br><span class="line">proxy_set_header Host $http_host;</span><br><span class="line">proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line"></span><br><span class="line">proxy_connect_timeout 30;</span><br><span class="line">proxy_send_timeout 60;</span><br><span class="line">proxy_read_timeout 60;</span><br><span class="line"></span><br><span class="line">proxy_buffering on;</span><br><span class="line">proxy_buffer_size 32k;</span><br><span class="line">proxy_buffers 4 128k;</span><br></pre></td></tr></table></figure>

<p>2ã€åœ¨é…ç½®æ–‡ä»¶ä¸­å¯¼å…¥ï¼Œæ–¹ä¾¿åç»­å¤šä¸ªlocationä½¿ç”¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1:8080;</span><br><span class="line">    include proxy_params;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>OpenStackå­¦ä¹ ç¬”è®°</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/04-%E8%99%9A%E6%8B%9F%E5%8C%96/OpenStack%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="OpenStackç¬”è®°"><a href="#OpenStackç¬”è®°" class="headerlink" title="OpenStackç¬”è®°"></a><strong><font color=green>OpenStackç¬”è®°</font></strong></h1><p>â€‹	OpenStackå®ç°çš„æ˜¯äº‘è®¡ç®—IAAS</p>
<h2 id="ä¸€ã€æœåŠ¡æ¶æ„å‘å±•"><a href="#ä¸€ã€æœåŠ¡æ¶æ„å‘å±•" class="headerlink" title="ä¸€ã€æœåŠ¡æ¶æ„å‘å±•"></a><font color=blue>ä¸€ã€æœåŠ¡æ¶æ„å‘å±•</font></h2><h3 id="1-1-MVCæ¶æ„"><a href="#1-1-MVCæ¶æ„" class="headerlink" title="1.1 MVCæ¶æ„"></a>1.1 MVCæ¶æ„</h3><p>â€‹	ä¸šåŠ¡ä¸æ‹†åˆ†ï¼Œä¸€ä¸ªæœåŠ¡æŒ‚ï¼Œåˆ™æ‰€æœ‰çš„å…¨æŒ‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">é¦–é¡µ www.jd.com/index.html</span><br><span class="line">ç§’æ€ www.jd.com/miaosha/index.html</span><br><span class="line">ä¼˜æƒ åˆ¸ www.jd.com/juan/index.html</span><br></pre></td></tr></table></figure>

<h3 id="1-2-SOAæ¶æ„ï¼ˆåƒä¸‡çº§ï¼‰"><a href="#1-2-SOAæ¶æ„ï¼ˆåƒä¸‡çº§ï¼‰" class="headerlink" title="1.2 SOAæ¶æ„ï¼ˆåƒä¸‡çº§ï¼‰"></a>1.2 SOAæ¶æ„ï¼ˆåƒä¸‡çº§ï¼‰</h3><p>â€‹	ä¸šåŠ¡æ‹†åˆ†ï¼Œæ¯ä¸€ä¸ªåŠŸèƒ½éƒ½æ‹†åˆ†æˆä¸€ä¸ªç‹¬ç«‹çš„webæœåŠ¡ï¼Œæ¯ä¸ªç‹¬ç«‹çš„webæœåŠ¡ï¼Œéƒ½è‡³å°‘æ‹¥æœ‰ä¸€ä¸ªé›†ç¾¤</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">é¦–é¡µ www.jd.com/index.html</span><br><span class="line">ç§’æ€ miaosha.jd.com/index.html</span><br><span class="line">ä¼˜æƒ åˆ¸ juan.jd.com/index.html</span><br></pre></td></tr></table></figure>

<h3 id="1-3-å¾®æœåŠ¡æ¶æ„ï¼ˆäº¿çº§ï¼‰"><a href="#1-3-å¾®æœåŠ¡æ¶æ„ï¼ˆäº¿çº§ï¼‰" class="headerlink" title="1.3 å¾®æœåŠ¡æ¶æ„ï¼ˆäº¿çº§ï¼‰"></a>1.3 å¾®æœåŠ¡æ¶æ„ï¼ˆäº¿çº§ï¼‰</h3><p>é˜¿é‡Œå¼€æºdubbo</p>
<p>Spring Boot</p>
<p>è‡ªåŠ¨åŒ–ä»£ç ä¸Šçº¿ï¼šJekins + gilab ci</p>
<p>è‡ªåŠ¨åŒ–ä»£ç è´¨é‡æ£€æŸ¥ï¼šsonarqube</p>
<h2 id="äºŒã€æ­å»ºOpenStack"><a href="#äºŒã€æ­å»ºOpenStack" class="headerlink" title="äºŒã€æ­å»ºOpenStack"></a><font color=blue>äºŒã€æ­å»ºOpenStack</font></h2><p>â€‹	æœ¬æµç¨‹ä¸ºæ‰‹åŠ¨å®‰è£…Mç‰ˆï¼Œè„šæœ¬å®‰è£…å¯ä»¥å‚è€ƒ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">https://my.oschina.net/u/4367225/blog/4255750</span><br></pre></td></tr></table></figure>

<p>OpenStackçš„ç»“æ„ä»‹ç»ï¼š</p>
<blockquote>
<p>Nova â€“ æä¾›VMè™šæ‹ŸåŒ–æ”¯æŒ 8774</p>
<p>Glance â€“ æä¾›é•œåƒ 9292</p>
<p>Clinder â€“ å­˜å‚¨æ”¯æŒ 8776</p>
<p>Neutron â€“ ç½‘ç»œæ”¯æŒ 9696</p>
<p>Cellometer â€“  ç›‘æ§è®¡è´¹ </p>
<p>KeyStone â€“ ç™»å½•è®¤è¯</p>
<p>Horizon â€“ ç½‘é¡µUIï¼Œdashboard</p>
<p>Heat â€“ éƒ¨ç½²ç¼–æ’ï¼Œæ‰¹é‡å»ºè™šæ‹Ÿæœº</p>
<p>Switft â€“ å¯¹è±¡å­˜å‚¨ï¼ˆä¸æ˜¯ä¼ ç»Ÿçš„æ–‡ä»¶å¤¹å­˜æ”¾ï¼Œè€Œæ˜¯ç”¨æ•°æ®åº“è®°å½•å·²ä¸Šä¼ çš„æ–‡ä»¶ä¿¡æ¯ï¼Œå½“æœ‰æ–‡ä»¶ä¸Šä¼ ï¼Œå…ˆæŸ¥è¯¢æ•°æ®åº“ä¸­æ˜¯å¦æœ‰è¯¥æ–‡ä»¶çš„md5å€¼ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ä¸ç”¨é‡æ–°ä¸Šä¼ ï¼Œç»™ä¸ªé“¾æ¥å°±æ˜¯ â€” ç™¾åº¦äº‘ç›˜ï¼‰</p>
</blockquote>
<p><img src="C:\Users\fr724\AppData\Roaming\Typora\typora-user-images\image-20210615135957367.png" alt="image-20210615135957367"></p>
<h3 id="2-1-è™šæ‹Ÿæœºå‡†å¤‡"><a href="#2-1-è™šæ‹Ÿæœºå‡†å¤‡" class="headerlink" title="2.1 è™šæ‹Ÿæœºå‡†å¤‡"></a>2.1 è™šæ‹Ÿæœºå‡†å¤‡</h3><p>è™šæ‹Ÿæœºè§„åˆ’</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ç³»ç»Ÿï¼šCentOS7.4</span></span><br><span class="line">controller: å†…å­˜3G, CPUå¼€å¯è™šæ‹ŸåŒ–	10.0.0.11</span><br><span class="line">compute1: å†…å­˜1Gï¼ŒCPUå¼€å¯è™šæ‹ŸåŒ–	    10.0.0.31</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹ä¸»æœºåï¼ŒIPåœ°å€ï¼Œhostè§£æï¼Œæµ‹è¯•pingç™¾åº¦</span></span><br></pre></td></tr></table></figure>

<p>é…ç½®æœ¬åœ°Mç‰ˆyumæº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1ã€èµ„æºå‡†å¤‡</span></span><br><span class="line">mount /dev/cdrom /mnt # è¿½åŠ åˆ°/etc/rc.local,è‡ªåŠ¨æŒ‚è½½</span><br><span class="line">è§£å‹openstack_rpm.tar.gzåˆ°/opt/repo</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2ã€ç¼–è¾‘repoæ–‡ä»¶</span></span><br><span class="line">vim /etc/yum.repo.d/local/repo</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### å†…å®¹</span></span></span><br><span class="line">[local]</span><br><span class="line">name=local</span><br><span class="line">baseurl=file:///mnt</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[openstack]</span><br><span class="line">name=openstack</span><br><span class="line">baseurl=file:///opt/repo</span><br><span class="line">gpgcheck=0</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">###</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3ã€æ›´æ–°yumæº</span></span><br><span class="line">yum makecache</span><br><span class="line">yum repolist</span><br></pre></td></tr></table></figure>



<h3 id="2-2-åŸºç¡€æœåŠ¡å®‰è£…"><a href="#2-2-åŸºç¡€æœåŠ¡å®‰è£…" class="headerlink" title="2.2 åŸºç¡€æœåŠ¡å®‰è£…"></a>2.2 åŸºç¡€æœåŠ¡å®‰è£…</h3><h4 id="2-2-1-NTPæ—¶é—´åŒæ­¥"><a href="#2-2-1-NTPæ—¶é—´åŒæ­¥" class="headerlink" title="2.2.1 NTPæ—¶é—´åŒæ­¥"></a>2.2.1 NTPæ—¶é—´åŒæ­¥</h4><p>controllerä¸é˜¿é‡ŒNTPæœåŠ¡å™¨åŒæ­¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/chrony.conf</span><br><span class="line">server ntp6.aliyun.com # 3è¡Œ</span><br><span class="line">allow 10.0.0.0/24 # 24è¡Œ</span><br><span class="line">systemctl restart chronyd</span><br></pre></td></tr></table></figure>

<p>computerä¸controlleråŒæ­¥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/chrony.conf</span><br><span class="line">server 10.0.0.11 iburst # 3è¡Œ</span><br><span class="line">systemctl restart chronyd</span><br></pre></td></tr></table></figure>

<h4 id="2-2-2-æ‰©å±•-å…¬ç½‘å®‰è£…Oç‰ˆOpenStackçš„æ–¹æ³•ä»‹ç»ï¼ˆè·³è¿‡è¯¥æ­¥éª¤ï¼‰"><a href="#2-2-2-æ‰©å±•-å…¬ç½‘å®‰è£…Oç‰ˆOpenStackçš„æ–¹æ³•ä»‹ç»ï¼ˆè·³è¿‡è¯¥æ­¥éª¤ï¼‰" class="headerlink" title="2.2.2 æ‰©å±•-å…¬ç½‘å®‰è£…Oç‰ˆOpenStackçš„æ–¹æ³•ä»‹ç»ï¼ˆè·³è¿‡è¯¥æ­¥éª¤ï¼‰"></a>2.2.2 æ‰©å±•-å…¬ç½‘å®‰è£…Oç‰ˆOpenStackçš„æ–¹æ³•ä»‹ç»ï¼ˆè·³è¿‡è¯¥æ­¥éª¤ï¼‰</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">yum makecache</span><br><span class="line">yum list | grep openstack</span><br><span class="line">yum install centos-release-openstack-ocata.noarch -y # å®‰è£…Oç‰ˆ</span><br></pre></td></tr></table></figure>

<h4 id="2-2-3-å®‰è£…OpenStackå®¢æˆ·ç«¯openstack-selinux-ï¼ˆæ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œï¼‰"><a href="#2-2-3-å®‰è£…OpenStackå®¢æˆ·ç«¯openstack-selinux-ï¼ˆæ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œï¼‰" class="headerlink" title="2.2.3 å®‰è£…OpenStackå®¢æˆ·ç«¯openstack-selinux ï¼ˆæ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œï¼‰"></a>2.2.3 å®‰è£…OpenStackå®¢æˆ·ç«¯openstack-selinux ï¼ˆæ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œï¼‰</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install python-openstackclient openstack-selinux -y</span><br></pre></td></tr></table></figure>

<h4 id="2-2-4-å®‰è£…å’Œé…ç½®mariadb-ä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œ"><a href="#2-2-4-å®‰è£…å’Œé…ç½®mariadb-ä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œ" class="headerlink" title="2.2.4 å®‰è£…å’Œé…ç½®mariadb (ä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œ)"></a>2.2.4 å®‰è£…å’Œé…ç½®mariadb (ä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œ)</h4><p>å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install mariadb mariadb-server python2-PyMySQL -y</span><br></pre></td></tr></table></figure>

<p>é…ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/my.cnf.d/openstack.cnf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">----------------</span></span><br><span class="line">[mysqld]	</span><br><span class="line">bind-address = 10.0.0.11	# ç›‘å¬åœ°å€</span><br><span class="line">default-storage-engine = innodb # é»˜è®¤å­˜å‚¨å¼•æ“</span><br><span class="line">innodb_file_per_table  # ç‹¬ç«‹è¡¨ç©ºé—´æ–‡ä»¶</span><br><span class="line">max_connections = 4096	# æœ€å¤§è¿æ¥æ•°</span><br><span class="line">collation-server = utf8_general_ci	# é»˜è®¤å­—ç¬¦é›†utf8</span><br><span class="line">character-set-server = utf8</span><br><span class="line"><span class="meta">#</span><span class="bash">-----------------</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨æœåŠ¡</span></span><br><span class="line">systemctl start mariadb</span><br><span class="line">systemctl enable mariadb</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ•°æ®åº“å®‰å…¨åˆå§‹åŒ–,ä¿éšœæ•°æ®åº“å®‰å…¨æ€§ï¼Œå¦‚æœä¸æ‰§è¡Œï¼ŒåŒæ­¥æ•°æ®åº“è¡¨ä¼šæŠ¥é”™</span></span><br><span class="line">mysql_secure_installation</span><br><span class="line">å›è½¦ n y y y y</span><br></pre></td></tr></table></figure>

<h4 id="2-2-5-æ¶ˆæ¯é˜Ÿåˆ—é…ç½®-ä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œ"><a href="#2-2-5-æ¶ˆæ¯é˜Ÿåˆ—é…ç½®-ä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œ" class="headerlink" title="2.2.5 æ¶ˆæ¯é˜Ÿåˆ—é…ç½®(ä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œ)"></a>2.2.5 æ¶ˆæ¯é˜Ÿåˆ—é…ç½®(ä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œ)</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…rabbitmq</span></span><br><span class="line">yum install rabbitmq-server -y</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨æœåŠ¡</span></span><br><span class="line">systemctl start rabbitmq-server</span><br><span class="line">systemctl enable rabbitmq-server</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ·»åŠ ç”¨æˆ·</span></span><br><span class="line">rabbitmqctl add_user openstack RABBIT_PASS</span><br><span class="line"><span class="meta">#</span><span class="bash"> è®¾ç½®ç”¨æˆ·æƒé™ï¼ˆè¯»ã€å†™ã€æ‰§è¡Œï¼‰</span></span><br><span class="line">rabbitmqctl set_permissions openstack &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</span><br><span class="line">rabbitmq-plugins enable rabbitmq_management</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹æ˜¯å¦å¼€å¯15672ç«¯å£</span></span><br><span class="line">netstat -lntup</span><br><span class="line"><span class="meta">#</span><span class="bash"> æµè§ˆå™¨ç™»å½•rabbitmq</span></span><br><span class="line">http://10.0.0.11:15672</span><br><span class="line">é»˜è®¤ç”¨æˆ·åå’Œå¯†ç ï¼šguest</span><br></pre></td></tr></table></figure>

<h4 id="2-2-6-ç¼“å­˜ç³»ç»Ÿé…ç½®memcacheï¼ˆä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œï¼‰"><a href="#2-2-6-ç¼“å­˜ç³»ç»Ÿé…ç½®memcacheï¼ˆä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œï¼‰" class="headerlink" title="2.2.6 ç¼“å­˜ç³»ç»Ÿé…ç½®memcacheï¼ˆä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œï¼‰"></a>2.2.6 ç¼“å­˜ç³»ç»Ÿé…ç½®memcacheï¼ˆä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œï¼‰</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…</span></span><br><span class="line">yum install memcached python-memched -y</span><br><span class="line"><span class="meta">#</span><span class="bash"> é…ç½®</span></span><br><span class="line">sed -i &#x27;s#127.0.0.1#10.0.0.11#g&#x27; /etc/sysconfig/memcached</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨æœåŠ¡</span></span><br><span class="line">systemctl restart memcached</span><br><span class="line">systemctl enable memcached</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥è¯¢ç«¯å£11211æ˜¯å¦å·²ç›‘å¬ï¼Œé»˜è®¤ä½¿ç”¨è¯¥ç«¯å£</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-å®‰è£…keystoneè®¤è¯æœåŠ¡-ä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œ"><a href="#2-3-å®‰è£…keystoneè®¤è¯æœåŠ¡-ä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œ" class="headerlink" title="2.3 å®‰è£…keystoneè®¤è¯æœåŠ¡(ä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œ)"></a>2.3 å®‰è£…keystoneè®¤è¯æœåŠ¡(ä»…æ§åˆ¶èŠ‚ç‚¹æ‰§è¡Œ)</h3><h4 id="2-3-1-KeystoneåŠŸèƒ½ä»‹ç»"><a href="#2-3-1-KeystoneåŠŸèƒ½ä»‹ç»" class="headerlink" title="2.3.1 KeystoneåŠŸèƒ½ä»‹ç»"></a>2.3.1 KeystoneåŠŸèƒ½ä»‹ç»</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1ã€è®¤è¯ç®¡ç†ï¼š</span><br><span class="line">	è´¦æˆ·å¯†ç </span><br><span class="line">2ã€æˆæƒç®¡ç†</span><br><span class="line">3ã€æœåŠ¡ç›®å½•ï¼š</span><br><span class="line">	è·Ÿç”µè¯æœ¬ä¸€æ ·ï¼Œkeystoneä¸Šå¯ä»¥æŸ¥è¯¢åˆ°glanceã€novaç­‰æœåŠ¡çš„åœ°å€ç«¯å£ç­‰ä¿¡æ¯ï¼Œæ¯ä¸€ä¸ªæ–°åŠ çš„æœåŠ¡éƒ½éœ€è¦åœ¨keystoneä¸Šæ³¨å†Œ</span><br></pre></td></tr></table></figure>

<h4 id="2-3-2-OpenStackæœåŠ¡å™¨å®‰è£…çš„é€šç”¨æ­¥éª¤"><a href="#2-3-2-OpenStackæœåŠ¡å™¨å®‰è£…çš„é€šç”¨æ­¥éª¤" class="headerlink" title="2.3.2 OpenStackæœåŠ¡å™¨å®‰è£…çš„é€šç”¨æ­¥éª¤"></a>2.3.2 OpenStackæœåŠ¡å™¨å®‰è£…çš„é€šç”¨æ­¥éª¤</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1ã€åˆ›åº“æˆæƒ</span><br><span class="line">2ã€åœ¨Keystoneåˆ›å»ºç”¨æˆ·ï¼Œå…³è”è§’è‰²</span><br><span class="line">3ã€åœ¨keystoneåˆ›å»ºæœåŠ¡ï¼Œæ³¨å†Œapi</span><br><span class="line">4ã€å®‰è£…æœåŠ¡ç›¸å…³çš„è½¯ä»¶åŒ…</span><br><span class="line">5ã€ä¿®æ”¹é…ç½®</span><br><span class="line">	æ•°æ®åº“çš„è¿æ¥</span><br><span class="line">	keystoneè®¤è¯æˆæƒä¿¡æ¯</span><br><span class="line">	rabbitmqè¿æ¥ä¿¡æ¯</span><br><span class="line">	å…¶ä»–é…ç½®</span><br><span class="line">6ã€åŒæ­¥æ•°æ®åº“ï¼Œåˆ›å»ºè¡¨</span><br><span class="line">7ã€å¯åŠ¨æœåŠ¡</span><br></pre></td></tr></table></figure>

<h4 id="2-3-3-å®‰è£…æ­¥éª¤"><a href="#2-3-3-å®‰è£…æ­¥éª¤" class="headerlink" title="2.3.3 å®‰è£…æ­¥éª¤"></a>2.3.3 å®‰è£…æ­¥éª¤</h4><p>1ã€åˆ›åº“æˆæƒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ç™»å½•mysql</span><br><span class="line">$ mysql -u root -p</span><br><span class="line"># åˆ›å»ºkeystoneæ•°æ®åº“</span><br><span class="line">CREATE DATABASE keystone;</span><br><span class="line"># å¯¹``keystone``æ•°æ®åº“æˆäºˆæ°å½“çš„æƒé™</span><br><span class="line">GRANT ALL PRIVILEGES ON keystone.* TO &#x27;keystone&#x27;@&#x27;localhost&#x27; \</span><br><span class="line">  IDENTIFIED BY &#x27;KEYSTONE_DBPASS&#x27;;</span><br><span class="line">GRANT ALL PRIVILEGES ON keystone.* TO &#x27;keystone&#x27;@&#x27;%&#x27; \</span><br><span class="line">  IDENTIFIED BY &#x27;KEYSTONE_DBPASS&#x27;;</span><br></pre></td></tr></table></figure>

<p>2ã€å®‰è£…keystoneç›¸å…³è½¯ä»¶åŒ…</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install openstack-keystone httpd mod_wsgi -y</span><br></pre></td></tr></table></figure>

<p>3ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¤‡ä»½åŸé…ç½®æ–‡ä»¶</span></span><br><span class="line">\cp /etc/keystone/keystone.conf&#123;,.bak&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"> å»é™¤é…ç½®æ–‡ä»¶ä¸­çš„ç©ºæ ¼è¡Œå’Œæ³¨é‡Šè¡Œ</span></span><br><span class="line">grep -Ev &#x27;^$|#&#x27; /etc/keystone/keystone.conf.bak &gt; /etc/keystone/keystone.conf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…è‡ªåŠ¨é…ç½®å·¥å…·</span></span><br><span class="line">yum install openstack-utils -y</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä½¿ç”¨å·¥å…·è®¾ç½®ï¼ˆä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹æ–‡ä»¶ï¼‰ä¿®æ”¹é¡¹ å‚æ•° = å€¼</span></span><br><span class="line">openstack-config --set /etc/keystone/keystone.conf DEFAULT admin_token ADMIN_TOKEN</span><br><span class="line">openstack-config --set /etc/keystone/keystone.conf database connection  mysql+pymysql://keystone:KEYSTONE_DBPASS@controller/keystone # æ³¨æ„hostname--controller</span><br><span class="line">openstack-config --set /etc/keystone/keystone.conf token provider fernet</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ ¡éªŒ</span></span><br><span class="line">md5sum /etc/keystone/keystone.conf</span><br><span class="line">d5acb3db852fe3f247f4f872b051b7a9 </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åŒæ­¥æ•°æ®åº“</span></span><br><span class="line">su -s /bin/sh -c &quot;keystone-manage db_sync&quot; keystone</span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥è¯¢æ˜¯å¦ç”Ÿæˆè¡¨</span></span><br><span class="line">mysql keystone -e &quot;show tables;&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆå§‹åŒ–fernet</span></span><br><span class="line">keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone</span><br><span class="line"><span class="meta">#</span><span class="bash"> éªŒè¯</span></span><br><span class="line">/etc/keystone/fernet-keyså·²åˆ›å»º</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é…ç½®httpd</span></span><br><span class="line">echo &quot;ServerName controller&quot; &gt;&gt; /etc/httpd/conf/httpd.conf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºwsgié…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /etc/httpd/conf.d/wsgi-keystone.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##å†…å®¹</span></span></span><br><span class="line">Listen 5000</span><br><span class="line">Listen 35357</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:5000&gt;</span><br><span class="line">    WSGIDaemonProcess keystone-public processes=5 threads=1 user=keystone group=keystone display-name=%&#123;GROUP&#125;</span><br><span class="line">    WSGIProcessGroup keystone-public</span><br><span class="line">    WSGIScriptAlias / /usr/bin/keystone-wsgi-public</span><br><span class="line">    WSGIApplicationGroup %&#123;GLOBAL&#125;</span><br><span class="line">    WSGIPassAuthorization On</span><br><span class="line">    ErrorLogFormat &quot;%&#123;cu&#125;t %M&quot;</span><br><span class="line">    ErrorLog /var/log/httpd/keystone-error.log</span><br><span class="line">    CustomLog /var/log/httpd/keystone-access.log combined</span><br><span class="line"></span><br><span class="line">    &lt;Directory /usr/bin&gt;</span><br><span class="line">        Require all granted</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:35357&gt;</span><br><span class="line">    WSGIDaemonProcess keystone-admin processes=5 threads=1 user=keystone group=keystone display-name=%&#123;GROUP&#125;</span><br><span class="line">    WSGIProcessGroup keystone-admin</span><br><span class="line">    WSGIScriptAlias / /usr/bin/keystone-wsgi-admin</span><br><span class="line">    WSGIApplicationGroup %&#123;GLOBAL&#125;</span><br><span class="line">    WSGIPassAuthorization On</span><br><span class="line">    ErrorLogFormat &quot;%&#123;cu&#125;t %M&quot;</span><br><span class="line">    ErrorLog /var/log/httpd/keystone-error.log</span><br><span class="line">    CustomLog /var/log/httpd/keystone-access.log combined</span><br><span class="line"></span><br><span class="line">    &lt;Directory /usr/bin&gt;</span><br><span class="line">        Require all granted</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ ¡éªŒ</span></span><br><span class="line">md5sum /etc/httpd/conf.d/wsgi-keystone.conf</span><br><span class="line">8f051eb53577f67356ed03e4550315c2 </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨httpd</span></span><br><span class="line">systemctl enable httpd</span><br><span class="line">systemctl start httpd</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºæœåŠ¡å’Œæ³¨å†Œapi</span></span><br><span class="line">export OS_TOKEN=ADMIN_TOKEN</span><br><span class="line">export OS_URL=http://controller:35357/v3</span><br><span class="line">export OS_IDENTITY_API_VERSION=3</span><br><span class="line">openstack service create --name keystone --description &quot;OpenStack Identity&quot; identity</span><br><span class="line">openstack endpoint create --region RegionOne identity public http://controller:5000/v3</span><br><span class="line">openstack endpoint create --region RegionOne identity internal http://controller:5000/v3</span><br><span class="line">openstack endpoint create --region RegionOne identity admin http://controller:35357/v3</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºåŸŸã€é¡¹ç›®ï¼ˆç§Ÿæˆ·ï¼‰ã€ç”¨æˆ·å’Œè§’è‰²</span></span><br><span class="line">openstack domain create --description &quot;Default Domain&quot; default</span><br><span class="line">openstack project create --domain default --description &quot;Admin Project&quot; admin</span><br><span class="line">openstack user create --domain default --password ADMIN_PASS admin</span><br><span class="line">openstack role create admin</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å…³è”é¡¹ç›®ï¼Œç”¨æˆ·ï¼Œè§’è‰²</span></span><br><span class="line">openstack role add --project admin --user admin admin</span><br><span class="line"><span class="meta">#</span><span class="bash"> åœ¨adminé¡¹ç›®ä¸Šï¼Œç»™adminç”¨æˆ·èµ‹äºˆadminè§’è‰²</span></span><br><span class="line">openstack project create --domain default --description &quot;Service Project&quot; service</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºç¯å¢ƒå˜é‡è„šæœ¬</span></span><br><span class="line">export OS_PROJECT_DOMAIN_NAME=default</span><br><span class="line">export OS_USER_DOMAIN_NAME=default</span><br><span class="line">export OS_PROJECT_NAME=admin</span><br><span class="line">export OS_USERNAME=admin</span><br><span class="line">export OS_PASSWORD=ADMIN_PASS</span><br><span class="line">export OS_IMAGE_API_VERSION=2</span><br><span class="line">export OS_IDENTITY_API_VERSION=3</span><br><span class="line">export OS_AUTH_URL=http://controller:35357/v3</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä½œä¸ºadminç”¨æˆ·è¯·æ±‚è®¤è¯ä»¤ç‰Œ</span></span><br><span class="line">openstack token issue  </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœä¸è®¾ç½®ç¯å¢ƒå˜é‡å¯ä»¥é€šè¿‡ä¼ å…¥å‚æ•°çš„æ–¹å¼ç”³è¯·</span></span><br><span class="line">openstack --os-auth-url http://controller:35357/v3   --os-project-domain-name default --os-user-domain-name default   --os-project-name admin --os-username admin --os-password ADMIN_PASS token issue</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨</span></span><br><span class="line">openstack user list</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹endpointåˆ—è¡¨</span></span><br><span class="line">openstack endpoint list</span><br></pre></td></tr></table></figure>

<h3 id="2-4-å®‰è£…glanceé•œåƒæœåŠ¡"><a href="#2-4-å®‰è£…glanceé•œåƒæœåŠ¡" class="headerlink" title="2.4 å®‰è£…glanceé•œåƒæœåŠ¡"></a>2.4 å®‰è£…glanceé•œåƒæœåŠ¡</h3><p>â€‹	é•œåƒæœåŠ¡ (glance) å…è®¸ç”¨æˆ·å‘ç°ã€æ³¨å†Œå’Œè·å–è™šæ‹Ÿæœºé•œåƒã€‚</p>
<h4 id="2-4-1-å®‰è£…æ­¥éª¤"><a href="#2-4-1-å®‰è£…æ­¥éª¤" class="headerlink" title="2.4.1 å®‰è£…æ­¥éª¤"></a>2.4.1 å®‰è£…æ­¥éª¤</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ•°æ®åº“åˆ›åº“æˆæƒ</span></span><br><span class="line">mysql &gt;&gt;</span><br><span class="line">CREATE DATABASE glance</span><br><span class="line">GRANT ALL PRIVILEGES ON glance.* TO &#x27;glance&#x27;@&#x27;localhost&#x27; \</span><br><span class="line">  IDENTIFIED BY &#x27;GLANCE_DBPASS&#x27;;</span><br><span class="line">GRANT ALL PRIVILEGES ON glance.* TO &#x27;glance&#x27;@&#x27;%&#x27; \</span><br><span class="line">  IDENTIFIED BY &#x27;GLANCE_DBPASS&#x27;;</span><br><span class="line">  </span><br><span class="line"><span class="meta"> #</span><span class="bash"> åœ¨keystoneåˆ›å»ºglanceç”¨æˆ·å…³è”è§’è‰²</span></span><br><span class="line"> openstack user create --domain default --password GLANCE_PASS glance</span><br><span class="line"> openstack role add --project service --user glance admin</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta"> #</span><span class="bash"> åœ¨keystoneä¸Šåˆ›å»ºæœåŠ¡å’Œæ³¨å†Œapi</span></span><br><span class="line">openstack service create --name glance   --description &quot;OpenStack Image&quot; image</span><br><span class="line">openstack endpoint create --region RegionOne \</span><br><span class="line">  image public http://controller:9292</span><br><span class="line">openstack endpoint create --region RegionOne \</span><br><span class="line">  image internal http://controller:9292</span><br><span class="line">openstack endpoint create --region RegionOne \</span><br><span class="line">  image admin http://controller:9292</span><br><span class="line"><span class="meta">  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å·²åˆ›å»ºçš„ä¿¡æ¯</span></span><br><span class="line">openstack role assignment list</span><br><span class="line">openstack role list</span><br><span class="line">openstack project list</span><br><span class="line">openstack user list ï¼ˆè¦æœ‰glanceç”¨æˆ·ï¼‰</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> mysqlä¸­éªŒè¯è¡¨æ˜¯å¦å·²åˆ›å»º</span></span><br><span class="line">[root@controller ~]# mysql keystone -e &quot;show tables;&quot; | grep user</span><br><span class="line">federated_user</span><br><span class="line">local_user</span><br><span class="line">user</span><br><span class="line">user_group_membership</span><br><span class="line">[root@controller ~]# mysql keystone -e &quot;show tables;&quot; | grep project</span><br><span class="line">project</span><br><span class="line">project_endpoint</span><br><span class="line">project_endpoint_group</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…æœåŠ¡ç›¸åº”è½¯ä»¶åŒ…</span></span><br><span class="line">yum install openstack-glance -y</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹ç›¸åº”çš„é…ç½®æ–‡ä»¶--api</span></span><br><span class="line">cp /etc/glance/glance-api.conf&#123;,.bak&#125;</span><br><span class="line">grep &#x27;^[a-Z\[]&#x27; /etc/glance/glance-api.conf.bak &gt; /etc/glance/glance-api.conf</span><br><span class="line">openstack-config --set /etc/glance/glance-api.conf database connection mysql+pymysql://glance:GLANCE_DBPASS@controller/glance</span><br><span class="line">openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_uri http://controller:5000</span><br><span class="line">openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_url http://controller:35357</span><br><span class="line">openstack-config --set /etc/glance/glance-api.conf keystone_authtoken memcached_servers controller:11211</span><br><span class="line">openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_type password</span><br><span class="line">openstack-config --set /etc/glance/glance-api.conf keystone_authtoken project_domain_name default</span><br><span class="line">openstack-config --set /etc/glance/glance-api.conf keystone_authtoken user_domain_name default</span><br><span class="line">openstack-config --set /etc/glance/glance-api.conf keystone_authtoken project_name service</span><br><span class="line">openstack-config --set /etc/glance/glance-api.conf keystone_authtoken username glance</span><br><span class="line">openstack-config --set /etc/glance/glance-api.conf keystone_authtoken password GLANCE_PASS</span><br><span class="line">openstack-config --set /etc/glance/glance-api.conf paste_deploy flavor keystone</span><br><span class="line">openstack-config --set /etc/glance/glance-api.conf glance_store stores file,http</span><br><span class="line">openstack-config --set /etc/glance/glance-api.conf glance_store default_store file</span><br><span class="line">openstack-config --set /etc/glance/glance-api.conf glance_store filesystem_store_datadir /var/lib/glance/images/</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹ç›¸åº”çš„é…ç½®æ–‡ä»¶--registry</span></span><br><span class="line">cp /etc/glance/glance-registry.conf&#123;,.bak&#125;</span><br><span class="line">grep &#x27;^[a-Z\[]&#x27; /etc/glance/glance-registry.conf.bak &gt; /etc/glance/glance-registry.conf</span><br><span class="line">openstack-config --set /etc/glance/glance-registry.conf database connection mysql+pymysql://glance:GLANCE_DBPASS@controller/glance</span><br><span class="line">openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_uri http://controller:5000</span><br><span class="line">openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_url http://controller:35357</span><br><span class="line">openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken memcached_servers controller:11211</span><br><span class="line">openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_type password</span><br><span class="line">openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken project_domain_name default</span><br><span class="line">openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken user_domain_name default</span><br><span class="line">openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken project_name service</span><br><span class="line">openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken username glance</span><br><span class="line">openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken password GLANCE_PASS</span><br><span class="line">openstack-config --set /etc/glance/glance-registry.conf paste_deploy flavor keystone</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> md5å€¼éªŒè¯</span></span><br><span class="line">md5sum /etc/glance/glance-api.conf</span><br><span class="line">3e1a4234c133eda11b413788e001cba3  /etc/glance/glance-api.conf</span><br><span class="line">md5sum /etc/glance/glance-registry.conf</span><br><span class="line">46acabd81a65b924256f56fe34d90b8f  /etc/glance/glance-registry.conf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å†™å…¥é•œåƒæœåŠ¡æ•°æ®åº“</span></span><br><span class="line">su -s /bin/sh -c &quot;glance-manage db_sync&quot; glance # ä¼šæœ‰Warningä¸ç”¨åœ¨æ„</span><br><span class="line"><span class="meta">#</span><span class="bash"> éªŒè¯</span></span><br><span class="line">mysql glance -e &quot;show tables;&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨æœåŠ¡</span></span><br><span class="line">systemctl enable openstack-glance-api.service   openstack-glance-registry.service</span><br><span class="line">systemctl start openstack-glance-api.service   openstack-glance-registry.service</span><br></pre></td></tr></table></figure>

<h4 id="2-4-2-ä¸Šä¼ é•œåƒæµ‹è¯•"><a href="#2-4-2-ä¸Šä¼ é•œåƒæµ‹è¯•" class="headerlink" title="2.4.2 ä¸Šä¼ é•œåƒæµ‹è¯•"></a>2.4.2 ä¸Šä¼ é•œåƒæµ‹è¯•</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> é”™è¯¯æ—¥å¿—æŸ¥çœ‹</span></span><br><span class="line">/var/log/glance</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç¡®ä¿å·²è·å–tokenä»¤ç‰Œ</span></span><br><span class="line">openstack token issue</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸‹è½½æµ‹è¯•é•œåƒ</span></span><br><span class="line">wget http://download.cirros-cloud.net/0.3.4/cirros-0.3.4-x86_64-disk.img</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸Šä¼ æµ‹è¯•é•œåƒ</span></span><br><span class="line">openstack image create &quot;cirros&quot; \</span><br><span class="line">--file cirros-0.3.4-x86_64-disk.img \</span><br><span class="line">--disk-format qcow2 --container-format bare \</span><br><span class="line">--public</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¸Šä¼ æ–‡ä»¶ç¡®è®¤</span></span><br><span class="line">ls /var/lib/glance/images/ (åœ¨/etc/glance/glance-api.confä¸­è®¾ç½®)</span><br><span class="line">mysql glance -e &quot;show tables;&quot; | grep image</span><br></pre></td></tr></table></figure>

<h3 id="2-5-å®‰è£…novaè®¡ç®—æœåŠ¡"><a href="#2-5-å®‰è£…novaè®¡ç®—æœåŠ¡" class="headerlink" title="2.5 å®‰è£…novaè®¡ç®—æœåŠ¡"></a>2.5 å®‰è£…novaè®¡ç®—æœåŠ¡</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nova-api -- æ¥å—å¹¶ç›¸åº”æ‰€æœ‰çš„è®¡ç®—æœåŠ¡è¯·æ±‚ï¼Œç®¡ç†äº‘ä¸»æœºç”Ÿå‘½å‘¨æœŸ</span><br><span class="line">nova-computeï¼ˆå¤šä¸ªï¼‰-- çœŸæ­£ç®¡ç†è™šæ‹Ÿæœº(nova-computeè°ƒç”¨libvirt)</span><br><span class="line">nova-scheduler -- nova è°ƒåº¦å™¨ï¼ˆæŒ‘é€‰æœ€åˆé€‚çš„nova-computeï¼‰</span><br><span class="line">nova-conductor -- å¸®åŠ©nova-computeè¿æ¥æ•°æ®åº“</span><br><span class="line">nova-network --  æ—©æœŸç‰ˆæœ¬ç®¡ç†è™šæ‹Ÿæœºçš„ç½‘ç»œï¼ˆå·²å¼ƒç”¨ï¼Œæ”¹ç”¨neutronï¼Œç•™ç€ä¸ºäº†æ–¹ä¾¿å…¼å®¹æ—©æœŸç‰ˆæœ¬ï¼‰</span><br><span class="line">nova-consoleauthå’Œnova-novncproxy -- webç‰ˆçš„vncæ¥ç›´æ¥æ“ä½œäº‘ä¸»æœº</span><br><span class="line">novnproxy -- webç‰ˆvncå®¢æˆ·ç«¯</span><br><span class="line">nova-api-metadata -- æ¥å—æ¥è‡ªè™šæ‹Ÿæœºå‘é€çš„å…ƒæ•°æ®è¯·æ±‚ï¼ˆé…åˆneutron-metadata-agentå®ç°è™šæ‹Ÿæœºå®šåˆ¶åŒ–ï¼‰</span><br></pre></td></tr></table></figure>

<h4 id="2-5-1-æ§åˆ¶èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤"><a href="#2-5-1-æ§åˆ¶èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤" class="headerlink" title="2.5.1 æ§åˆ¶èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤"></a>2.5.1 æ§åˆ¶èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›åº“æˆæƒ</span></span><br><span class="line">mysql &gt;&gt;</span><br><span class="line">CREATE DATABASE nova_api;</span><br><span class="line">CREATE DATABASE nova;</span><br><span class="line">GRANT ALL PRIVILEGES ON nova_api.* TO &#x27;nova&#x27;@&#x27;localhost&#x27; \</span><br><span class="line">  IDENTIFIED BY &#x27;NOVA_DBPASS&#x27;;</span><br><span class="line">GRANT ALL PRIVILEGES ON nova_api.* TO &#x27;nova&#x27;@&#x27;%&#x27; \</span><br><span class="line">  IDENTIFIED BY &#x27;NOVA_DBPASS&#x27;;</span><br><span class="line">GRANT ALL PRIVILEGES ON nova.* TO &#x27;nova&#x27;@&#x27;localhost&#x27; \</span><br><span class="line">  IDENTIFIED BY &#x27;NOVA_DBPASS&#x27;;</span><br><span class="line">GRANT ALL PRIVILEGES ON nova.* TO &#x27;nova&#x27;@&#x27;%&#x27; \</span><br><span class="line">  IDENTIFIED BY &#x27;NOVA_DBPASS&#x27;;</span><br><span class="line"><span class="meta">  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åœ¨keystoneåˆ›å»ºç”¨æˆ·nova</span></span><br><span class="line">openstack user create --domain default   --password NOVA_PASS nova</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç»™Novaç”¨æˆ·æ·»åŠ adminè§’è‰²</span></span><br><span class="line">openstack role add --project service --user nova admin</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åœ¨keystoneä¸Šåˆ›å»ºæœåŠ¡å’Œæ³¨å†Œapi</span></span><br><span class="line">openstack service create --name nova   --description &quot;OpenStack Compute&quot; compute</span><br><span class="line">openstack endpoint create --region RegionOne   compute public http://controller:8774/v2.1/%\(tenant_id\)s</span><br><span class="line">openstack endpoint create --region RegionOne   compute internal http://controller:8774/v2.1/%\(tenant_id\)s</span><br><span class="line">openstack endpoint create --region RegionOne   compute admin http://controller:8774/v2.1/%\(tenant_id\)s</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…ç›¸åº”è½¯ä»¶åŒ…</span></span><br><span class="line">yum install -y openstack-nova-api openstack-nova-conductor \</span><br><span class="line">  openstack-nova-console openstack-nova-novncproxy \</span><br><span class="line">  openstack-nova-scheduler</span><br><span class="line"><span class="meta">  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">cp /etc/nova/nova.conf&#123;,.bak&#125;</span><br><span class="line">grep -Ev &#x27;^$|#&#x27; /etc/nova/nova.conf.bak &gt; /etc/nova/nova.conf</span><br><span class="line"></span><br><span class="line">openstack-config --set /etc/nova/nova.conf DEFAULT enabled_apis osapi_compute,metadata</span><br><span class="line">openstack-config --set /etc/nova/nova.conf DEFAULT rpc_backend rabbit</span><br><span class="line">openstack-config --set /etc/nova/nova.conf DEFAULT auth_strategy keystone</span><br><span class="line">openstack-config --set /etc/nova/nova.conf DEFAULT my_ip 10.0.0.11</span><br><span class="line">openstack-config --set /etc/nova/nova.conf DEFAULT use_neutron True</span><br><span class="line">openstack-config --set /etc/nova/nova.conf DEFAULT firewall_driver nova.virt.firewall.NoopFirewallDriver</span><br><span class="line">openstack-config --set /etc/nova/nova.conf api_database connection mysql+pymysql://nova:NOVA_DBPASS@controller/nova_api</span><br><span class="line">openstack-config --set /etc/nova/nova.conf database connection mysql+pymysql://nova:NOVA_DBPASS@controller/nova</span><br><span class="line">openstack-config --set /etc/nova/nova.conf glance api_servers http://controller:9292</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken auth_uri http://controller:5000</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken auth_url http://controller:35357</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken memcached_servers controller:11211</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken auth_type password</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken project_domain_name default</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken user_domain_name default</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken project_name service</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken username nova</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken password NOVA_PASS</span><br><span class="line">openstack-config --set /etc/nova/nova.conf oslo_concurrency lock_path /var/lib/nova/tmp</span><br><span class="line">openstack-config --set /etc/nova/nova.conf oslo_messaging_rabbit rabbit_host controller</span><br><span class="line">openstack-config --set /etc/nova/nova.conf oslo_messaging_rabbit rabbit_userid openstack</span><br><span class="line">openstack-config --set /etc/nova/nova.conf oslo_messaging_rabbit rabbit_password RABBIT_PASS</span><br><span class="line">openstack-config --set /etc/nova/nova.conf vnc vncserver_listen &#x27;$my_ip&#x27;</span><br><span class="line">openstack-config --set /etc/nova/nova.conf vnc vncserver_proxyclient_address &#x27;$my_ip&#x27;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ ¡éªŒ</span></span><br><span class="line">md5sum /etc/nova/nova.conf</span><br><span class="line">47ded61fdd1a79ab91bdb37ce59ef192  /etc/nova/nova.conf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åŒæ­¥æ•°æ®åº“</span></span><br><span class="line">su -s /bin/sh -c &quot;nova-manage api_db sync&quot; nova</span><br><span class="line">su -s /bin/sh -c &quot;nova-manage db sync&quot; nova</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> éªŒè¯</span></span><br><span class="line">mysql nova_api -e &quot;show tables;&quot;</span><br><span class="line">mysql nova -e &quot;show tables;&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨æœåŠ¡</span></span><br><span class="line">systemctl enable openstack-nova-api.service \</span><br><span class="line">openstack-nova-consoleauth.service openstack-nova-scheduler.service \</span><br><span class="line">openstack-nova-conductor.service openstack-nova-novncproxy.service</span><br><span class="line">systemctl restart openstack-nova-api.service \</span><br><span class="line">openstack-nova-consoleauth.service openstack-nova-scheduler.service \</span><br><span class="line">openstack-nova-conductor.service openstack-nova-novncproxy.service</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> éªŒè¯</span></span><br><span class="line">[root@controller ~]# nova service-list</span><br><span class="line">+----+------------------+------------+----------+---------+-------+------------+-----------------+</span><br><span class="line">| Id | Binary           | Host       | Zone     | Status  | State | Updated_at | Disabled Reason |</span><br><span class="line">+----+------------------+------------+----------+---------+-------+------------+-----------------+</span><br><span class="line">| 1  | nova-conductor   | controller | internal | enabled | down  | -          | -               |</span><br><span class="line">| 4  | nova-scheduler   | controller | internal | enabled | down  | -          | -               |</span><br><span class="line">| 5  | nova-consoleauth | controller | internal | enabled | down  | -          | -               |</span><br><span class="line">+----+------------------+------------+----------+---------+-------+------------+-----------------+</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> novncproxy æ€ä¹ˆæ£€æµ‹èµ·æ¥æ²¡æœ‰ï¼Ÿ</span></span><br><span class="line">[root@controller ~]# netstat -lntup | grep 6080</span><br><span class="line">tcp        0      0 0.0.0.0:6080            0.0.0.0:*               LISTEN      8719/python2</span><br><span class="line">[root@controller ~]# ps -ef | grep 8719</span><br><span class="line">nova       8719      1  0 21:53 ?        00:00:01 /usr/bin/python2 /usr/bin/nova-novncproxy --web /usr/share/novnc/</span><br></pre></td></tr></table></figure>

<h4 id="2-5-1-è®¡ç®—èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤"><a href="#2-5-1-è®¡ç®—èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤" class="headerlink" title="2.5.1 è®¡ç®—èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤"></a>2.5.1 è®¡ç®—èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…è½¯ä»¶åŒ…</span></span><br><span class="line">yum install -y openstack-nova-compute openstack-utils</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">cp /etc/nova/nova.conf&#123;,.bak&#125;</span><br><span class="line">grep -Ev &#x27;^$|#&#x27; /etc/nova/nova.conf.bak &gt; /etc/nova/nova.conf</span><br><span class="line"></span><br><span class="line">openstack-config --set /etc/nova/nova.conf DEFAULT enabled_apis osapi_compute,metadata</span><br><span class="line">openstack-config --set /etc/nova/nova.conf DEFAULT rpc_backend rabbit</span><br><span class="line">openstack-config --set /etc/nova/nova.conf DEFAULT auth_strategy keystone</span><br><span class="line">openstack-config --set /etc/nova/nova.conf DEFAULT my_ip 10.0.0.31 # æ³¨æ„ip</span><br><span class="line">openstack-config --set /etc/nova/nova.conf DEFAULT use_neutron True</span><br><span class="line">openstack-config --set /etc/nova/nova.conf DEFAULT firewall_driver nova.virt.firewall.NoopFirewallDriver</span><br><span class="line">openstack-config --set /etc/nova/nova.conf glance api_servers http://controller:9292</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken auth_uri http://controller:5000</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken auth_url http://controller:35357</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken memcached_servers controller:11211</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken auth_type password</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken project_domain_name default</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken user_domain_name default</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken project_name service</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken username nova</span><br><span class="line">openstack-config --set /etc/nova/nova.conf keystone_authtoken password NOVA_PASS</span><br><span class="line">openstack-config --set /etc/nova/nova.conf oslo_concurrency lock_path /var/lib/nova/tmp</span><br><span class="line">openstack-config --set /etc/nova/nova.conf oslo_messaging_rabbit rabbit_host controller</span><br><span class="line">openstack-config --set /etc/nova/nova.conf oslo_messaging_rabbit rabbit_userid openstack</span><br><span class="line">openstack-config --set /etc/nova/nova.conf oslo_messaging_rabbit rabbit_password RABBIT_PASS</span><br><span class="line">openstack-config --set /etc/nova/nova.conf vnc enabled  True</span><br><span class="line">openstack-config --set /etc/nova/nova.conf vnc vncserver_listen 0.0.0.0</span><br><span class="line">openstack-config --set /etc/nova/nova.conf vnc vncserver_proxyclient_address &#x27;$my_ip&#x27;</span><br><span class="line">openstack-config --set /etc/nova/nova.conf vnc novncproxy_base_url http://controller:6080/vnc_auto.html</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ ¡éªŒ</span></span><br><span class="line">md5sum /etc/nova/nova.conf</span><br><span class="line">45cab6030a9ab82761e9f697d6d79e14  /etc/nova/nova.conf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨æœåŠ¡</span></span><br><span class="line">systemctl enable libvirtd.service openstack-nova-compute.service</span><br><span class="line">systemctl restart libvirtd.service openstack-nova-compute.service</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æœåŠ¡å¯åŠ¨é”™è¯¯æ’æŸ¥</span></span><br><span class="line">å‚è€ƒåšå®¢ï¼šhttps://www.codeleading.com/article/89785382846/</span><br><span class="line">cat /etc/nova/nova.conf # compute1æ—¥å¿—æŸ¥çœ‹</span><br><span class="line">æŠ¥é”™ nova AccessRefused: (0, 0): (403) ACCESS_REFUSED</span><br><span class="line">å¤„ç†æ­¥éª¤ï¼š</span><br><span class="line">åœ¨controller</span><br><span class="line">cat /var/log/rabbitmq/rabbit@controller.log # å‘ç°æŠ¥é”™AMQPLAIN login refused: user &#x27;openstack&#x27; - invalid credentials æ— æ•ˆå‡­è¯</span><br><span class="line">rabbitmqctl list_users # ç¡®è®¤æ˜¯å¦è¿˜æœ‰openstackç”¨æˆ·</span><br><span class="line">rabbitmqctl add_user openstack RABBIT_PASS</span><br><span class="line">rabbitmqctl set_permissions openstack &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</span><br><span class="line">systemctl restart rabbitmq-server.service # é‡æ–°åˆ›ç”¨æˆ·ï¼Œå¹¶é‡å¯æœåŠ¡</span><br></pre></td></tr></table></figure>

<h3 id="2-6-å®‰è£…neutronç½‘ç»œæœåŠ¡"><a href="#2-6-å®‰è£…neutronç½‘ç»œæœåŠ¡" class="headerlink" title="2.6 å®‰è£…neutronç½‘ç»œæœåŠ¡"></a>2.6 å®‰è£…neutronç½‘ç»œæœåŠ¡</h3><p>neutron-server â€“ ç«¯å£9696ï¼Œapiæ¥å—å’Œå“åº”å¤–éƒ¨çš„ç½‘ç»œç®¡ç†è¯·æ±‚</p>
<p>neutron-linuxbridge-agent â€“  è´Ÿè´£åˆ›å»ºæ¡¥æ¥ç½‘å¡</p>
<p>neutron-dhcp-agent â€“ è´Ÿè´£åˆ†é…ip</p>
<p>neutron-metadata-agent â€“  é…åˆnova-metadata-apiå®ç°è™šæ‹Ÿæœºçš„å®šåˆ¶åŒ–æ“ä½œ</p>
<p>L3-agent â€“ å®ç°ä¸‰å±‚ç½‘ç»œvxlanï¼ˆç½‘ç»œå±‚ï¼‰</p>
<h4 id="2-6-1-æ§åˆ¶èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤"><a href="#2-6-1-æ§åˆ¶èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤" class="headerlink" title="2.6.1 æ§åˆ¶èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤"></a>2.6.1 æ§åˆ¶èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›åº“æˆæƒ</span></span><br><span class="line">Mysql &gt;&gt;</span><br><span class="line">CREATE DATABASE neutron;</span><br><span class="line">GRANT ALL PRIVILEGES ON neutron.* TO &#x27;neutron&#x27;@&#x27;localhost&#x27; \</span><br><span class="line">  IDENTIFIED BY &#x27;NEUTRON_DBPASS&#x27;;</span><br><span class="line">GRANT ALL PRIVILEGES ON neutron.* TO &#x27;neutron&#x27;@&#x27;%&#x27; \</span><br><span class="line">  IDENTIFIED BY &#x27;NEUTRON_DBPASS&#x27;;</span><br><span class="line"><span class="meta">  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åœ¨keystoneåˆ›å»ºç”¨æˆ·neutron</span></span><br><span class="line">openstack user create --domain default   --password NEUTRON_PASS neutron</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç»™neutronç”¨æˆ·æ·»åŠ adminè§’è‰²</span></span><br><span class="line">openstack role add --project service --user neutron admin</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åœ¨keystoneä¸Šåˆ›å»ºæœåŠ¡å’Œæ³¨å†Œapi</span></span><br><span class="line">openstack service create --name neutron   --description &quot;OpenStack Networking&quot; network</span><br><span class="line">openstack endpoint create --region RegionOne   network public http://controller:9696</span><br><span class="line">openstack endpoint create --region RegionOne   network internal http://controller:9696</span><br><span class="line">openstack endpoint create --region RegionOne   network admin http://controller:9696</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç½‘ç»œé…ç½®--å…¬å…±ç½‘ç»œ</span></span><br><span class="line">cp /etc/neutron/neutron.conf&#123;,.bak&#125;</span><br><span class="line">grep -Ev &quot;^$|#&quot; /etc/neutron/neutron.conf.bak  &gt; /etc/neutron/neutron.conf</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;</span></span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf database connection mysql+pymysql://neutron:NEUTRON_DBPASS@controller/neutron</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf DEFAULT core_plugin ml2</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf DEFAULT service_plugins</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf DEFAULT rpc_backend rabbit</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf DEFAULT auth_strategy keystone</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf DEFAULT notify_nova_on_port_status_changes True</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf DEFAULT notify_nova_on_port_data_changes True</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf oslo_messaging_rabbit rabbit_host controller</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf oslo_messaging_rabbit rabbit_userid openstack</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf oslo_messaging_rabbit rabbit_password RABBIT_PASS</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken auth_uri http://controller:5000</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken auth_url http://controller:35357</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken memcached_servers controller:11211</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken auth_type password</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken project_domain_name default</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken user_domain_name default</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken project_name service</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken username neutron</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken password NEUTRON_PASS</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf nova auth_url http://controller:35357</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf nova auth_type password</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf nova project_domain_name default</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf nova user_domain_name default</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf nova region_name RegionOne</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf nova project_name service</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf nova username nova</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf nova password NOVA_PASS</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf oslo_concurrency lock_path /var/lib/neutron/tmp</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;</span></span><br><span class="line"></span><br><span class="line">cp /etc/neutron/plugins/ml2/ml2_conf.ini&#123;,.bak&#125;</span><br><span class="line">grep -Ev &quot;^$|#&quot; /etc/neutron/plugins/ml2/ml2_conf.ini.bak &gt; /etc/neutron/plugins/ml2/ml2_conf.ini</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;</span></span><br><span class="line">openstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2 type_drivers flat,vlan</span><br><span class="line">openstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2 tenant_network_types</span><br><span class="line">openstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2 mechanism_drivers linuxbridge</span><br><span class="line">openstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2 extension_drivers port_security</span><br><span class="line">openstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2_type_flat flat_networks provider</span><br><span class="line">openstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini securitygroup enable_ipset True</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;</span></span><br><span class="line"></span><br><span class="line">cp /etc/neutron/plugins/ml2/linuxbridge_agent.ini&#123;,.bak&#125;</span><br><span class="line">grep -Ev &quot;^$|#&quot; /etc/neutron/plugins/ml2/linuxbridge_agent.ini.bak &gt; /etc/neutron/plugins/ml2/linuxbridge_agent.ini</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;</span></span><br><span class="line">openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini linux_bridge physical_interface_mappings provider:ens33  # è¦ä¿®æ”¹ç½‘ç»œæ¥å£å</span><br><span class="line">openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini vxlan enable_vxlan False</span><br><span class="line">openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini securitygroup enable_security_group True</span><br><span class="line">openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini securitygroup firewall_driver neutron.agent.linux.iptables_firewall.IptablesFirewallDriver</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;</span></span><br><span class="line"></span><br><span class="line">cp /etc/neutron/dhcp_agent.ini&#123;,.bak&#125;</span><br><span class="line">grep -Ev &quot;^$|#&quot; /etc/neutron/dhcp_agent.ini.bak &gt; /etc/neutron/dhcp_agent.ini</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;</span></span><br><span class="line">openstack-config --set /etc/neutron/dhcp_agent.ini DEFAULT interface_driver neutron.agent.linux.interface.BridgeInterfaceDriver</span><br><span class="line">openstack-config --set /etc/neutron/dhcp_agent.ini DEFAULT  dhcp_driver neutron.agent.linux.dhcp.Dnsmasq</span><br><span class="line">openstack-config --set /etc/neutron/dhcp_agent.ini DEFAULT  enable_isolated_metadata True</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;</span></span><br><span class="line"></span><br><span class="line">cp /etc/neutron/metadata_agent.ini&#123;,.bak&#125;</span><br><span class="line">grep -Ev &quot;^$|#&quot; /etc/neutron/metadata_agent.ini.bak &gt; /etc/neutron/metadata_agent.ini</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;</span></span><br><span class="line">openstack-config --set /etc/neutron/metadata_agent.ini DEFAULT nova_metadata_ip controller</span><br><span class="line">openstack-config --set /etc/neutron/metadata_agent.ini DEFAULT metadata_proxy_shared_secret METADATA_SECRET</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å†æ¬¡ä¿®æ”¹novaé…ç½®æ–‡ä»¶ï¼Œæ·»åŠ neutronæœåŠ¡</span></span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron url http://controller:9696</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron auth_url http://controller:35357</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron auth_type password</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron project_domain_name default</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron user_domain_name default</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron region_name RegionOne</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron project_name service</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron username neutron</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron password NEUTRON_PASS</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron service_metadata_proxy True</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron metadata_proxy_shared_secret METADATA_SECRET</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ ¡éªŒæ–‡ä»¶</span></span><br><span class="line">[root@controller ~]# md5sum /etc/nova/nova.conf</span><br><span class="line">6334f359655efdbcf083b812ab94efc1  /etc/nova/nova.conf</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç½‘ç»œæœåŠ¡åˆå§‹åŒ–è„šæœ¬éœ€è¦ä¸€ä¸ªè¶…é“¾æ¥</span></span><br><span class="line">ln -s /etc/neutron/plugins/ml2/ml2_conf.ini /etc/neutron/plugin.ini</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åŒæ­¥æ•°æ®åº“</span></span><br><span class="line">su -s /bin/sh -c &quot;neutron-db-manage --config-file /etc/neutron/neutron.conf \</span><br><span class="line">  --config-file /etc/neutron/plugins/ml2/ml2_conf.ini upgrade head&quot; neutron</span><br><span class="line"><span class="meta">  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ£€æŸ¥æ•°æ®åº“</span></span><br><span class="line">mysql neutron -e &quot;show tables;&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡å¯NovaæœåŠ¡</span></span><br><span class="line">systemctl restart openstack-nova-api.service</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨NeutronæœåŠ¡</span></span><br><span class="line">systemctl enable neutron-server.service   neutron-linuxbridge-agent.service neutron-dhcp-agent.service   neutron-metadata-agent.service</span><br><span class="line">systemctl start neutron-server.service   neutron-linuxbridge-agent.service neutron-dhcp-agent.service   neutron-metadata-agent.service</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹æœåŠ¡æœ‰æ²¡æœ‰èµ·æ¥</span></span><br><span class="line">neutron agent-list</span><br><span class="line">+--------------------------------------+--------------------+------------+-------------------+-------+----------------+---------------------------+</span><br><span class="line">| id                                   | agent_type         | host       | availability_zone | alive | admin_state_up | binary                    |</span><br><span class="line">+--------------------------------------+--------------------+------------+-------------------+-------+----------------+---------------------------+</span><br><span class="line">| 0d68dc27-f2b8-4cae-9c30-cddd126076b4 | Linux bridge agent | controller |                   | :-)   | True           | neutron-linuxbridge-agent |</span><br><span class="line">| 688cc47d-424d-4243-ae2b-b1c4b298a2a8 | Metadata agent     | controller |                   | :-)   | True           | neutron-metadata-agent    |</span><br><span class="line">| c4c5e360-ee02-4b9b-a1a5-59a0d0d088b0 | DHCP agent         | controller | nova              | :-)   | True           | neutron-dhcp-agent        |</span><br><span class="line">+--------------------------------------+--------------------+------------+-------------------+-------+----------------+---------------------------+</span><br></pre></td></tr></table></figure>

<h4 id="2-6-2-è®¡ç®—èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤"><a href="#2-6-2-è®¡ç®—èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤" class="headerlink" title="2.6.2 è®¡ç®—èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤"></a>2.6.2 è®¡ç®—èŠ‚ç‚¹â€“å®‰è£…æ­¥éª¤</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…ç»„ä»¶</span></span><br><span class="line">yum install -y openstack-neutron-linuxbridge ebtables ipset</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç½‘ç»œé…ç½®--å…¬å…±ç½‘ç»œ</span></span><br><span class="line">cp /etc/neutron/neutron.conf&#123;,.bak&#125;</span><br><span class="line">grep -Ev &quot;^$|#&quot; /etc/neutron/neutron.conf.bak  &gt; /etc/neutron/neutron.conf</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;&gt;</span></span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf DEFAULT rpc_backend rabbit</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf DEFAULT auth_strategy keystone</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf oslo_messaging_rabbit rabbit_host controller</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf oslo_messaging_rabbit rabbit_userid openstack</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf oslo_messaging_rabbit rabbit_password RABBIT_PASS</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken auth_uri http://controller:5000</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken auth_url http://controller:35357</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken memcached_servers controller:11211</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken auth_type password</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken project_domain_name default</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken user_domain_name default</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken project_name service</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken username neutron</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf keystone_authtoken password NEUTRON_PASS</span><br><span class="line">openstack-config --set /etc/neutron/neutron.conf oslo_concurrency lock_path /var/lib/neutron/tmp</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;&gt;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> md5æ ¡éªŒ</span></span><br><span class="line">md5sum /etc/nova/nova.conf</span><br><span class="line">328cd5f0745e26a420e828b0dfc2934e  /etc/nova/nova.conf</span><br><span class="line"></span><br><span class="line">cp /etc/neutron/plugins/ml2/linuxbridge_agent.ini&#123;,.bak&#125;</span><br><span class="line">grep -Ev &quot;^$|#&quot; /etc/neutron/plugins/ml2/linuxbridge_agent.ini.bak &gt; /etc/neutron/plugins/ml2/linuxbridge_agent.ini</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;&gt;</span></span><br><span class="line">openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini linux_bridge physical_interface_mappings provider:ens33  # è¦ä¿®æ”¹ç½‘ç»œæ¥å£å</span><br><span class="line">openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini vxlan enable_vxlan False</span><br><span class="line">openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini securitygroup enable_security_group True</span><br><span class="line">openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini securitygroup firewall_driver neutron.agent.linux.iptables_firewall.IptablesFirewallDriver</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;&gt;&gt;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å†æ¬¡ä¿®æ”¹novaé…ç½®æ–‡ä»¶ï¼Œæ·»åŠ neutroné…ç½®</span></span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron url http://controller:9696</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron auth_url http://controller:35357</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron auth_type password</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron project_domain_name default</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron user_domain_name default</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron region_name RegionOne</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron project_name service</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron username neutron</span><br><span class="line">openstack-config --set /etc/nova/nova.conf neutron password NEUTRON_PASS</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡å¯novaæœåŠ¡</span></span><br><span class="line">systemctl restart openstack-nova-compute.service</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨linuxbridgeä»£ç†æœåŠ¡</span></span><br><span class="line">systemctl enable neutron-linuxbridge-agent.service</span><br><span class="line">systemctl restart neutron-linuxbridge-agent.service</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹æ˜¯å¦é…ç½®æˆåŠŸ</span></span><br><span class="line">controlleræ‰§è¡Œ &gt;&gt; neutron agent-list</span><br><span class="line">é…ç½®æ­£ç¡®ä¼šå¤šå‡ºæ¥ä¸€ä¸ª</span><br><span class="line">Linux bridge agent | compute1   |                   | :-)   | True </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹è®¡ç®—èµ„æº</span></span><br><span class="line">openstack compute service list</span><br></pre></td></tr></table></figure>

<h3 id="2-7-å®‰è£…horizon-ï¼ˆDashboardï¼‰webç•Œé¢"><a href="#2-7-å®‰è£…horizon-ï¼ˆDashboardï¼‰webç•Œé¢" class="headerlink" title="2.7 å®‰è£…horizon ï¼ˆDashboardï¼‰webç•Œé¢"></a>2.7 å®‰è£…horizon ï¼ˆDashboardï¼‰webç•Œé¢</h3><h4 id="2-7-1-å®‰è£…æ­¥éª¤ï¼ˆæ§åˆ¶èŠ‚ç‚¹"><a href="#2-7-1-å®‰è£…æ­¥éª¤ï¼ˆæ§åˆ¶èŠ‚ç‚¹" class="headerlink" title="2.7.1 å®‰è£…æ­¥éª¤ï¼ˆæ§åˆ¶èŠ‚ç‚¹)"></a>2.7.1 å®‰è£…æ­¥éª¤ï¼ˆæ§åˆ¶èŠ‚ç‚¹)</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å®‰è£…ç»„ä»¶åŒ…</span></span><br><span class="line">yum install -y openstack-dashboard</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">vim /etc/openstack-dashboard/local_settings</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;</span></span><br><span class="line">OPENSTACK_HOST = &quot;controller&quot;</span><br><span class="line">ALLOWED_HOSTS = [&#x27;*&#x27;, ]</span><br><span class="line">SESSION_ENGINE = &#x27;django.contrib.sessions.backends.cache&#x27;</span><br><span class="line">CACHES = &#123;</span><br><span class="line">    &#x27;default&#x27;: &#123;</span><br><span class="line">         &#x27;BACKEND&#x27;: &#x27;django.core.cache.backends.memcached.MemcachedCache&#x27;,</span><br><span class="line">         &#x27;LOCATION&#x27;: &#x27;controller:11211&#x27;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">OPENSTACK_KEYSTONE_URL = &quot;http://%s:5000/v3&quot; % OPENSTACK_HOST</span><br><span class="line">OPENSTACK_KEYSTONE_MULTIDOMAIN_SUPPORT = True</span><br><span class="line">OPENSTACK_API_VERSIONS = &#123;</span><br><span class="line">    &quot;identity&quot;: 3,</span><br><span class="line">    &quot;image&quot;: 2,</span><br><span class="line">    &quot;volume&quot;: 2,</span><br><span class="line">&#125;</span><br><span class="line">OPENSTACK_KEYSTONE_DEFAULT_DOMAIN = &quot;default&quot;</span><br><span class="line">OPENSTACK_KEYSTONE_DEFAULT_ROLE = &quot;user&quot;</span><br><span class="line">OPENSTACK_NEUTRON_NETWORK = &#123;</span><br><span class="line">    ...</span><br><span class="line">    &#x27;enable_router&#x27;: False,</span><br><span class="line">    &#x27;enable_quotas&#x27;: False,</span><br><span class="line">    &#x27;enable_distributed_router&#x27;: False,</span><br><span class="line">    &#x27;enable_ha_router&#x27;: False,</span><br><span class="line">    &#x27;enable_lb&#x27;: False,</span><br><span class="line">    &#x27;enable_firewall&#x27;: False,</span><br><span class="line">    &#x27;enable_vpn&#x27;: False,</span><br><span class="line">    &#x27;enable_fip_topology_check&#x27;: False,</span><br><span class="line">&#125;</span><br><span class="line">TIME_ZONE = &quot;Asia/Shanghai&quot;</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è§£å†³ä¸èƒ½è¿›å…¥é¡µé¢çš„BUG</span></span><br><span class="line">vim /etc/httpd/conf.d/openstack-dashboard.conf</span><br><span class="line">æ·»åŠ ä¸€è¡Œ &gt;&gt; WSGIAppicationGroup %&#123;GLOBAL&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡å¯æœåŠ¡</span></span><br><span class="line">systemctl restart httpd.service memcached.service</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç™»å½•ç•Œé¢</span></span><br><span class="line">https://10.0.0.11/dashboard</span><br><span class="line">åŸŸ:default</span><br><span class="line">ç”¨æˆ·å:admin</span><br><span class="line">å¯†ç :ADMIN_PASS</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‰©å±•ï¼šæŸ¥çœ‹æ–‡ä»¶è¾“å…¥é‚£ä¸ªrpmåŒ…</span></span><br><span class="line">rpm -qf /etc/openstack-dashboard/local_settings</span><br></pre></td></tr></table></figure>

<h4 id="2-7-2-DashboardæŠ¥é”™è§£å†³"><a href="#2-7-2-DashboardæŠ¥é”™è§£å†³" class="headerlink" title="2.7.2 DashboardæŠ¥é”™è§£å†³"></a>2.7.2 DashboardæŠ¥é”™è§£å†³</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> é—®é¢˜1--Invalid service catalog service: image</span></span><br><span class="line">å‘ç”ŸåŸå› ï¼š</span><br><span class="line">	openstack service list å­˜åœ¨ä¸¤ä¸ª glance</span><br><span class="line">è§£å†³æ–¹æ³•ï¼š</span><br><span class="line">    openstack service delete c12c125edc2041e3aaf2f250442162c6</span><br><span class="line">    openstack service delete 6a11431b95bc44d1bd1e9371c0faa16b # ä¸¤ä¸ªglanceéƒ½åˆ æ‰</span><br><span class="line">    é‡å¤2.4.1åœ¨keystoneä¸Šåˆ›å»ºglanceæœåŠ¡å’Œæ³¨å†Œapi</span><br><span class="line">    å†é‡å¯æœåŠ¡systemctl restart httpd.service memcached.service</span><br></pre></td></tr></table></figure>

<h3 id="2-8-å¯åŠ¨ä¸€ä¸ªäº‘ä¸»æœº"><a href="#2-8-å¯åŠ¨ä¸€ä¸ªäº‘ä¸»æœº" class="headerlink" title="2.8 å¯åŠ¨ä¸€ä¸ªäº‘ä¸»æœº"></a>2.8 å¯åŠ¨ä¸€ä¸ªäº‘ä¸»æœº</h3><h3 id="2-8-1-åˆ›å»ºæ­¥éª¤"><a href="#2-8-1-åˆ›å»ºæ­¥éª¤" class="headerlink" title="2.8.1 åˆ›å»ºæ­¥éª¤"></a>2.8.1 åˆ›å»ºæ­¥éª¤</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºç½‘ç»œ</span></span><br><span class="line">neutron net-create --shared --provider:physical_network provider \</span><br><span class="line">  --provider:network_type flat gs</span><br><span class="line"><span class="meta">  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åœ¨ç½‘ç»œä¸­åˆ›å»ºä¸€ä¸ªå­ç½‘</span></span><br><span class="line">neutron subnet-create --name gs2 \</span><br><span class="line">  --allocation-pool start=10.0.0.101,end=10.0.0.250 \</span><br><span class="line">  --dns-nameserver 223.5.5.5 --gateway 10.0.0.2 \</span><br><span class="line">  gs 10.0.0.0/24</span><br><span class="line"><span class="meta">  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºäº‘ä¸»æœºç¡¬ä»¶é…ç½®æ–¹æ¡ˆï¼ˆè§„æ ¼ï¼‰</span></span><br><span class="line">openstack flavor create --id 0 --vcpus 1 --ram 64 --disk 1 m1.nano</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºå¯†é’¥é”®å€¼å¯¹</span></span><br><span class="line">ssh-keygen -q -N &quot;&quot; -f ~/.ssh/id_rsa</span><br><span class="line">openstack keypair create --public-key ~/.ssh/id_rsa.pub mykey</span><br><span class="line"><span class="meta">#</span><span class="bash"> éªŒè¯å…¬é’¥çš„æ·»åŠ </span></span><br><span class="line">openstack keypair list</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ·»åŠ å®‰å…¨ç»„è§„åˆ™</span></span><br><span class="line">openstack security group rule create --proto icmp default</span><br><span class="line">openstack security group rule create --proto tcp --dst-port 22 default</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åœ¨å…¬æœ‰ç½‘ç»œå¯åŠ¨ä¸€ä¸ªå®ä¾‹</span></span><br><span class="line">openstack flavor list # æŸ¥çœ‹å¯ç”¨çš„é…ç½®è§„æ ¼</span><br><span class="line">openstack image list # æŸ¥çœ‹å¯ç”¨é•œåƒ</span><br><span class="line">openstack network list # æŸ¥çœ‹å¯ç”¨ç½‘ç»œ</span><br><span class="line">openstack security group list # æŸ¥çœ‹å·²è®¾ç½®çš„å®‰å…¨ç»„</span><br><span class="line"></span><br><span class="line">openstack server create --flavor è§„æ ¼å/ID --image é•œåƒå/ID \</span><br><span class="line">  --nic net-id=ç½‘ç»œID --security-group default \</span><br><span class="line">  --key-name mykey å®ä¾‹åç§°</span><br><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line">openstack server create --flavor m1.tiny --image cirros \</span><br><span class="line">--nic net-id=cb032582-893b-414d-b78d-c89c6548612d --security-group default \</span><br><span class="line">--key-name mykey my-instance</span><br></pre></td></tr></table></figure>

<h3 id="2-8-2-åˆ›å»ºäº‘ä¸»æœºé—®é¢˜è§£å†³"><a href="#2-8-2-åˆ›å»ºäº‘ä¸»æœºé—®é¢˜è§£å†³" class="headerlink" title="2.8.2 åˆ›å»ºäº‘ä¸»æœºé—®é¢˜è§£å†³"></a>2.8.2 åˆ›å»ºäº‘ä¸»æœºé—®é¢˜è§£å†³</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1ã€å¯åŠ¨äº‘ä¸»æœºæ—¶ï¼ŒNo valid host was found</span></span><br><span class="line">ã€è®¡ç®—èŠ‚ç‚¹ä¸­ã€‘</span><br><span class="line">æŸ¥çœ‹äº‘ä¸»æœºåˆ›å»ºæ—¥å¿—ï¼š/var/log/nova/nova-compute.logï¼Œé‡Œé¢æœ‰è®°å½•é—®é¢˜åŸå› æ˜¯CPU feature spec-ctrl not found</span><br><span class="line">ä¿®æ”¹/usr/share/libvirt/cpu_map.xmlï¼Œå°†å’Œspec-ctrlç›¸å…³çš„ç‰¹æ€§åˆ é™¤</span><br><span class="line">ç„¶åé‡å¯æœåŠ¡</span><br><span class="line">systemctl restart libvirtd openstack-nova-compute</span><br><span class="line">å‚è€ƒåšå®¢ï¼šhttps://www.cnblogs.com/laolieren/p/solve_openstack_create_instance_error.html</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2ã€äº‘ä¸»æœºæ§åˆ¶å°seabios -- Booting from Hard Diské”™è¯¯</span></span><br><span class="line">ã€è®¡ç®—èŠ‚ç‚¹ä¸­ã€‘</span><br><span class="line">vim /etc/nova/nova.conf</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;</span></span><br><span class="line">[libvirt]</span><br><span class="line">virt_type = qemu</span><br><span class="line">cpu_mode = none</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;&gt;</span></span><br><span class="line">systemctl restart libvirtd openstack-nova-compute</span><br><span class="line">é‡å¯äº‘ä¸»æœº</span><br></pre></td></tr></table></figure>







]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆå››ï¼‰è™šæ‹ŸåŒ–ä¹‹OpenStack</category>
      </categories>
  </entry>
  <entry>
    <title>01-HTML</title>
    <url>/2022/07/28/03_Python/02_%E5%89%8D%E7%AB%AF/01_HTML/</url>
    <content><![CDATA[<p>â€œPythonçš„è¿›é˜¶æ–¹å‘ä¹‹ä¸€ï¼šWebå¼€å‘ï¼Œåœ¨è¿™ä¹‹å‰éœ€è¦äº†è§£å¸¸ç”¨çš„å‰ç«¯çŸ¥è¯†ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»HTMLçš„ç®€å•ä½¿ç”¨â€</p>
<h1 id="1-åˆ›å»ºè¡¨æ ¼"><a href="#1-åˆ›å»ºè¡¨æ ¼" class="headerlink" title="1 åˆ›å»ºè¡¨æ ¼"></a>1 åˆ›å»ºè¡¨æ ¼</h1><blockquote>
<p>ä½œç”¨ï¼š<code>table</code>æ ‡ç­¾ç”¨äºå±•ç¤ºæ•°æ®</p>
</blockquote>
<h2 id="1-1-ä½¿ç”¨åœºæ™¯"><a href="#1-1-ä½¿ç”¨åœºæ™¯" class="headerlink" title="1.1 ä½¿ç”¨åœºæ™¯"></a>1.1 ä½¿ç”¨åœºæ™¯</h2><p>ä¸€ç»„æ•°æ®éœ€è¦ä»¥è¡¨æ ¼æ–¹å¼å±•ç¤ºï¼Œä¾‹å¦‚ï¼š</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Age</th>
<th>Height</th>
</tr>
</thead>
<tbody><tr>
<td>Tank</td>
<td>18</td>
<td>172</td>
</tr>
<tr>
<td>Jodan</td>
<td>20</td>
<td>190</td>
</tr>
<tr>
<td>Timi</td>
<td>8</td>
<td>200</td>
</tr>
</tbody></table>
<h2 id="1-2-æ•°æ®è¡¨æ ¼åŒ–"><a href="#1-2-æ•°æ®è¡¨æ ¼åŒ–" class="headerlink" title="1.2 æ•°æ®è¡¨æ ¼åŒ–"></a>1.2 æ•°æ®è¡¨æ ¼åŒ–</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span>	# è¡¨æ ¼å¤´</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span>	# ä¸€ä¸ªtrè¡¨ç¤ºä¸€è¡Œ</span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">th</span>&gt;</span>	# thåŠ ç²—æ–‡æœ¬</span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Age<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Height<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span>&gt;</span>	# è¡¨æ ¼å†…å®¹</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>Tank<span class="tag">&lt;/<span class="name">td</span>&gt;</span>	# tdæ­£å¸¸æ–‡æœ¬</span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>18<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>172<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">		....</span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå¦‚ä¸‹å›¾:</p>
<p><img src="/../../../img/image-20220727140746808.png" alt="image-20220727140746808"></p>
<p>ç»™è¡¨æ ¼æ·»åŠ å¤–è¾¹æ¡†</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/../../../img/image-20220727141229882.png" alt="image-20220727141229882"></p>
<h2 id="1-3-å•å…ƒæ ¼-è¡Œ-åˆå¹¶"><a href="#1-3-å•å…ƒæ ¼-è¡Œ-åˆå¹¶" class="headerlink" title="1.3 å•å…ƒæ ¼(è¡Œ)åˆå¹¶"></a>1.3 å•å…ƒæ ¼<code>(è¡Œ)</code>åˆå¹¶</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>Tank<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/../../../img/image-20220727160233609.png" alt="image-20220727160233609"></p>
<h2 id="1-4-å•å…ƒæ ¼-åˆ—-åˆå¹¶"><a href="#1-4-å•å…ƒæ ¼-åˆ—-åˆå¹¶" class="headerlink" title="1.4 å•å…ƒæ ¼(åˆ—)åˆå¹¶"></a>1.4 å•å…ƒæ ¼<code>(åˆ—)</code>åˆå¹¶</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>20<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå¦‚ä¸‹å›¾:</p>
<p><img src="/../../../img/image-20220727160337780.png" alt="image-20220727160337780"></p>
<h1 id="2-åˆ›å»ºè¡¨å•"><a href="#2-åˆ›å»ºè¡¨å•" class="headerlink" title="2 åˆ›å»ºè¡¨å•"></a>2 åˆ›å»ºè¡¨å•</h1><blockquote>
<p>ä½œç”¨ï¼š</p>
<p>è·å–å‰ç«¯ç”¨æˆ·è¾“å…¥çš„æ•°æ®ï¼ˆç”¨æˆ·è¾“å…¥çš„ï¼Œç”¨æˆ·é€‰æ‹©çš„ï¼Œç”¨æˆ·ä¸Šä¼ çš„ç­‰ï¼‰</p>
<p>åŸºäºç½‘ç»œå‘é€ç»™åç«¯æœåŠ¡å™¨</p>
</blockquote>
<p>2.1 åˆ›å»ºè¡¨å•</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­<code>action</code>çš„ä½œç”¨ä¸å‚æ•°ï¼š</p>
<p>ä½œç”¨ï¼š</p>
<p>â€‹	æ§åˆ¶æ•°æ®æäº¤çš„åç«¯è·¯å¾„(ç»™å“ªä¸ªæœåŠ¡ç«¯æäº¤æ•°æ®)</p>
<p>å‚æ•°ï¼š</p>
<ul>
<li>ä»€ä¹ˆéƒ½ä¸å†™ï¼šé»˜è®¤å°±æ˜¯æœå½“å‰é¡µé¢æ‰€åœ¨çš„urlæäº¤æ•°æ®</li>
<li>å†™å…¨è·¯å¾„ï¼š<a href="https://www.baidu.com/">https://www.baidu.com</a>  æœç™¾åº¦æœåŠ¡ç«¯æäº¤</li>
<li>åªå†™è·¯å¾„åç¼€<code>action=&quot;/index/&quot;</code>ï¼š<br>è‡ªåŠ¨è¯†åˆ«å‡ºå½“å‰æœåŠ¡ç«¯çš„ipå’Œportæ‹¼æ¥åˆ°å‰é¢ï¼Œå³ï¼š<code>host:port/index/</code></li>
</ul>
<h2 id="2-2-inputæ ‡ç­¾"><a href="#2-2-inputæ ‡ç­¾" class="headerlink" title="2.2 inputæ ‡ç­¾"></a>2.2 inputæ ‡ç­¾</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>&gt;</span>&lt;/input</span><br></pre></td></tr></table></figure>

<p><strong>inputæ ‡ç­¾çš„å¸¸ç”¨<code>type</code></strong></p>
<ul>
<li><p>text:æ™®é€šæ–‡æœ¬</p>
</li>
<li><p>password:å¯†æ–‡</p>
</li>
<li><p>date:æ—¥æœŸ	</p>
</li>
<li><p>submit:ç”¨æ¥è§¦å‘formè¡¨å•æäº¤æ•°æ®çš„åŠ¨ä½œï¼Œç‚¹å‡»åè¡¨å•æ¸…ç©ºï¼Œå†…å®¹è¢«æäº¤</p>
</li>
<li><p>button:å°±æ˜¯ä¸€ä¸ªæ™®æ™®é€šé€šçš„æŒ‰é’® æœ¬èº«æ²¡æœ‰ä»»ä½•çš„åŠŸèƒ½ ä½†æ˜¯å®ƒæ˜¯æœ€æœ‰ç”¨çš„ï¼Œå­¦å®Œjsä¹‹åå¯ä»¥ç»™å®ƒè‡ªå®šä¹‰å„ç§åŠŸèƒ½</p>
</li>
<li><p>reset:é‡ç½®å†…å®¹ï¼Œè¡¨å•å†…å®¹æ¸…ç©ºï¼Œå†…å®¹ä¸æäº¤</p>
</li>
<li><p>radio:å•é€‰</p>
<p>é»˜è®¤é€‰ä¸­è¦åŠ checked&#x3D;â€™checkedâ€™</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">checked</span>=<span class="string">&#x27;checked&#x27;</span>&gt;</span>ç”·</span><br></pre></td></tr></table></figure>

<p>å½“æ ‡ç­¾çš„å±æ€§åå’Œå±æ€§å€¼ä¸€æ ·çš„æ—¶å€™å¯ä»¥ç®€å†™</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">checked</span>&gt;</span>å¥³</span><br></pre></td></tr></table></figure>
</li>
<li><p>checkbox:å¤šé€‰</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">checked</span>&gt;</span>DBJ</span><br></pre></td></tr></table></figure>
</li>
<li><p>file:è·å–æ–‡ä»¶  ä¹Ÿå¯ä»¥ä½¿ç”¨<code>multiple</code>ä¸€æ¬¡æ€§è·å–å¤šä¸ªæ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">multiple</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>hidden:éšè—å½“å‰inputæ¡†</p>
</li>
</ul>
<p><strong>inputæ ‡ç­¾å¸¸ç”¨<code>å±æ€§</code>ï¼š</strong></p>
<ul>
<li><p>value: æ·»åŠ é»˜è®¤å€¼</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;d1&quot;</span>&gt;</span>username:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é»˜è®¤å€¼&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>disableï¼šç¦ç”¨æ§ä»¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;d1&quot;</span>&gt;</span>username:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é»˜è®¤å€¼&quot;</span> <span class="attr">disable</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>readonlyï¼šæ§ä»¶åªè¯»</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;d1&quot;</span>&gt;</span>username:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é»˜è®¤å€¼&quot;</span> <span class="attr">readonly</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-3-labelæ ‡ç­¾"><a href="#2-3-labelæ ‡ç­¾" class="headerlink" title="2.3 labelæ ‡ç­¾"></a>2.3 labelæ ‡ç­¾</h2><p>å®ç°<code>ç‚¹å‡»è¾“å…¥æ¡†çš„åç§°</code>å°±èƒ½<code>å°†å…‰æ ‡å®šä½åˆ°è¾“å…¥æ¡†</code></p>
<p>ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;passwd&quot;</span>&gt;</span>Password:</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;passwd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-4-selectæ ‡ç­¾"><a href="#2-4-selectæ ‡ç­¾" class="headerlink" title="2.4 selectæ ‡ç­¾"></a>2.4 selectæ ‡ç­¾</h2><p>selectæ ‡ç­¾ é»˜è®¤æ˜¯å•é€‰ å¯ä»¥åŠ mutipleå‚æ•°å˜å¤šé€‰ é»˜è®¤é€‰ä¸­selected</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>æ–°å£ç»“è¡£<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>æ–¯ä½³ä¸½<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>æ˜è€å¸ˆ<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä½¿ç”¨<code>optgroup</code>æ ‡ç­¾ç»™é€‰é¡¹åˆ†ç»„</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optgroup</span> <span class="attr">label</span>=<span class="string">&quot;ä¸Šæµ·&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>æµ¦ä¸œ<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>é»„åŸ”<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>é’åŸ”<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">optgroup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optgroup</span> <span class="attr">label</span>=<span class="string">&quot;åŒ—äº¬&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>æœé˜³<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>æ˜Œå¹³<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>æ²™æ²³<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">optgroup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-5-æ¡ˆä¾‹"><a href="#2-5-æ¡ˆä¾‹" class="headerlink" title="2.5 æ¡ˆä¾‹"></a>2.5 æ¡ˆä¾‹</h2><p>æ•´åˆ2.1-2.4çš„æ¡ˆä¾‹</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">content</span>=<span class="string">&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    å­¦ä¹ è¡¨å•æ ‡ç­¾çš„ä½¿ç”¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ³¨å†Œé¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        åˆ›å»ºè¾“å…¥æ¡†--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--        labelæ ‡ç­¾çš„ä¸¤ç§ç”¨æ³• &amp;#45;&amp;#45; ä¸åŒ…ä½çš„æ–¹å¼--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>Username<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--        labelæ ‡ç­¾çš„ä¸¤ç§ç”¨æ³• &amp;#45;&amp;#45; åŒ…ä½çš„æ–¹å¼--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;passwd&quot;</span>&gt;</span>Password:</span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;passwd&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;birthday&quot;</span>&gt;</span>Birthday:</span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;date&quot;</span> <span class="attr">id</span>=<span class="string">&quot;birthday&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Gender</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span>&gt;</span>boy</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span>&gt;</span>girl</span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hobby</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">checked</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span>video games</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span>football</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span>basketball</span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¶åƒ <span class="comment">&lt;!--é€‰é¡¹--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>æ–°å£ç»“è¡£<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>å°æ˜<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>å°èŠ±<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä½å€ <span class="comment">&lt;!--é€‰é¡¹åˆ†ç»„--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">optgroup</span> <span class="attr">label</span>=<span class="string">&quot;ä¸Šæµ·&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>æµ¦ä¸œ<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>é»„åŸ”<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>é’åŸ”<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">optgroup</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">optgroup</span> <span class="attr">label</span>=<span class="string">&quot;åŒ—äº¬&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>æœé˜³<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>æ˜Œå¹³<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>&gt;</span>æ²™æ²³<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">optgroup</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¾“å…¥æ¡†</span><br><span class="line">            <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;30&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;20&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ–‡ä»¶ä¸Šä¼ </span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ¸…ç©º&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ™®é€šæŒ‰é’®&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220728165553604.png" alt="image-20220728165553604"></p>
<h1 id="3-Flaskæ¡†æ¶çš„åŸºæœ¬ä½¿ç”¨"><a href="#3-Flaskæ¡†æ¶çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="3 Flaskæ¡†æ¶çš„åŸºæœ¬ä½¿ç”¨"></a>3 Flaskæ¡†æ¶çš„åŸºæœ¬ä½¿ç”¨</h1><h2 id="3-1-ç¬¬ä¸€ä¸ªflaskæ¡†æ¶åç«¯"><a href="#3-1-ç¬¬ä¸€ä¸ªflaskæ¡†æ¶åç«¯" class="headerlink" title="3.1 ç¬¬ä¸€ä¸ªflaskæ¡†æ¶åç«¯"></a>3.1 ç¬¬ä¸€ä¸ªflaskæ¡†æ¶åç«¯</h2><p>ä½¿ç”¨Flaskæ¡†æ¶ç¼–å†™ä¸€ä¸ªåç«¯ç¨‹åºï¼Œé¦–å…ˆéœ€è¦å®‰è£…Flask</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip3 install FLASK</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™åç«¯ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/index/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;OK&#x27;</span>;</span><br><span class="line"></span><br><span class="line">app.run()</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220729110925144.png" alt="image-20220729110925144"></p>
<h2 id="3-2-Formè¡¨å•æäº¤æ•°æ®"><a href="#3-2-Formè¡¨å•æäº¤æ•°æ®" class="headerlink" title="3.2 Formè¡¨å•æäº¤æ•°æ®"></a>3.2 Formè¡¨å•æäº¤æ•°æ®</h2><p>ä¿®æ”¹2.5çš„å‰ç«¯ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">&lt;!--    å­¦ä¹ è¡¨å•æ ‡ç­¾çš„ä½¿ç”¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ³¨å†Œé¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://127.0.0.1:5000/index&quot;</span> <span class="attr">method</span>=<span class="string">&#x27;post&#x27;</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€htmlé¡µé¢ï¼Œç‚¹å‡»æäº¤ï¼Œå°†æ˜¾ç¤ºâ€OKâ€</p>
<blockquote>
<p>è¡¥å……:</p>
<p>methodæ–¹æ³•çš„<code>post</code>å’Œ<code>get</code>æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</p>
<ul>
<li><p>postï¼šæäº¤æ•°æ®éšè—</p>
</li>
<li><p>getï¼šformè¡¨å•é»˜è®¤æäº¤æ•°æ®çš„æ–¹å¼ æ˜¯getè¯·æ±‚  æ•°æ®æ˜¯ç›´æ¥æ”¾åœ¨urlåé¢çš„ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
</li>
</ul>
<p><img src="/../../../img/image-20220729111744825.png" alt="image-20220729111744825"></p>
<p>å…¶ä¸­<code>gender=on</code>ä¸­çš„<code>gender</code>ç”±<code>name</code>å±æ€§å®šä¹‰ï¼Œè€Œ<code>on</code>æ˜¯å…¶å€¼</p>
</blockquote>
<h2 id="3-3-Formè¡¨å•æäº¤â€é€‰æ‹©æ ‡ç­¾â€çš„æ•°æ®"><a href="#3-3-Formè¡¨å•æäº¤â€é€‰æ‹©æ ‡ç­¾â€çš„æ•°æ®" class="headerlink" title="3.3 Formè¡¨å•æäº¤â€é€‰æ‹©æ ‡ç­¾â€çš„æ•°æ®"></a>3.3 Formè¡¨å•æäº¤â€é€‰æ‹©æ ‡ç­¾â€çš„æ•°æ®</h2><p>â€œâ€é’ˆå¯¹ç”¨æˆ·é€‰æ‹©çš„æ ‡ç­¾ï¼ˆå¦‚selectã€radioã€checkboxç­‰ï¼‰ï¼Œå…‰æœ‰<code>name</code>å±æ€§æ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦æå‰ç»™è¿™äº›æ ‡ç­¾æ·»åŠ å†…å®¹<code>value</code>å€¼â€œ</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Gender</span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;boy&quot;</span>&gt;</span>boy</span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;girl&quot;</span>&gt;</span>girl</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hobby</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">checked</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;videogames&quot;</span>&gt;</span>video games</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;football&quot;</span>&gt;</span>football</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;basketball&quot;</span>&gt;</span>basketball</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åç«¯ä»£ç ä¿®æ”¹ï¼Œæ·»åŠ è¾“å‡ºå‰ç«¯æ•°æ®çš„ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/index/&#x27;</span>, methods=[<span class="string">&#x27;Get&#x27;</span>, <span class="string">&#x27;Post&#x27;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(request.form)	<span class="comment"># è¾“å‡ºä»å‰ç«¯è·å–çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;OK&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.run()</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ImmutableMultiDict([(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;dsa&#x27;</span>), (<span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;321432&#x27;</span>), (<span class="string">&#x27;birthday&#x27;</span>, <span class="string">&#x27;2022-07-14&#x27;</span>), (<span class="string">&#x27;gender&#x27;</span>, <span class="string">&#x27;girl&#x27;</span>), (<span class="string">&#x27;hobby&#x27;</span>, <span class="string">&#x27;videogames&#x27;</span>), (<span class="string">&#x27;hobby&#x27;</span>, <span class="string">&#x27;football&#x27;</span>), (<span class="string">&#x27;å¶åƒ&#x27;</span>, <span class="string">&#x27;å°æ˜&#x27;</span>), (<span class="string">&#x27;å¶åƒ&#x27;</span>, <span class="string">&#x27;å°èŠ±&#x27;</span>), (<span class="string">&#x27;dsa&#x27;</span>, <span class="string">&#x27;é»„åŸ”&#x27;</span>), (<span class="string">&#x27;textarea&#x27;</span>, <span class="string">&#x27;       4443243t     &#x27;</span>)])</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> - - [<span class="number">29</span>/Jul/<span class="number">2022</span> <span class="number">14</span>:<span class="number">33</span>:<span class="number">22</span>] <span class="string">&quot;POST /index HTTP/1.1&quot;</span> <span class="number">308</span> -</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> - - [<span class="number">29</span>/Jul/<span class="number">2022</span> <span class="number">14</span>:<span class="number">33</span>:<span class="number">22</span>] <span class="string">&quot;POST /index/ HTTP/1.1&quot;</span> <span class="number">200</span> -</span><br></pre></td></tr></table></figure>



<h2 id="3-4-Formè¡¨å•æäº¤æ–‡ä»¶"><a href="#3-4-Formè¡¨å•æäº¤æ–‡ä»¶" class="headerlink" title="3.4 Formè¡¨å•æäº¤æ–‡ä»¶"></a>3.4 Formè¡¨å•æäº¤æ–‡ä»¶</h2><p>formè¡¨å•æäº¤æ–‡ä»¶éœ€è¦æ³¨æ„</p>
<ol>
<li><p><code>method</code>å¿…é¡»æ˜¯<code>post</code></p>
</li>
<li><p><code>enctype=&quot;multipart/form-data&quot;</code></p>
<p>enctypeç±»ä¼¼äºæ•°æ®æäº¤çš„ç¼–ç æ ¼å¼</p>
<p>â€‹			é»˜è®¤æ˜¯urlencoded åªèƒ½å¤Ÿæäº¤æ™®é€šçš„æ–‡æœ¬æ•°æ®</p>
<p>â€‹			formdata å°±å¯ä»¥æ”¯æŒæäº¤æ–‡ä»¶æ•°æ®</p>
</li>
</ol>
<p>å› æ­¤éœ€è¦ä¿®æ”¹å‰ç«¯ä»£ç ï¼Œæ·»åŠ <code>entype</code>å±æ€§ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment">&lt;!--    å­¦ä¹ è¡¨å•æ ‡ç­¾çš„ä½¿ç”¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ³¨å†Œé¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://127.0.0.1:5000/index&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>å¹¶ç»™<code>input</code>æ ‡ç­¾æ·»åŠ <code>name</code>å±æ€§</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ–‡ä»¶ä¸Šä¼ </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;myfile&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åç«¯è·å–æ–‡ä»¶ï¼Œä¿å­˜åˆ°æœ¬åœ°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/index/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>():</span></span><br><span class="line">    <span class="comment"># è·å–è¡¨å•æäº¤è¿‡æ¥çš„éæ–‡ä»¶æ•°æ®</span></span><br><span class="line">    <span class="built_in">print</span>(request.form)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–æ–‡ä»¶æ•°æ®</span></span><br><span class="line">    <span class="built_in">print</span>(request.files)</span><br><span class="line">    file_obj = request.files.get(<span class="string">&#x27;myfile&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(file_obj.name)</span><br><span class="line">    file_obj.save(file_obj.name)    <span class="comment"># ä¿å­˜æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;OK&#x27;</span></span><br><span class="line"></span><br><span class="line">app.run()</span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>Python</category>
        <category>å‰ç«¯åŸºç¡€</category>
      </categories>
  </entry>
  <entry>
    <title>Day51-CSS-01</title>
    <url>/2022/08/02/03_Python/02_%E5%89%8D%E7%AB%AF/day51%E7%AC%94%E8%AE%B0-CSS-01/</url>
    <content><![CDATA[<p>â€œç¬¬51å¤©CSS01å­¦ä¹ ç¬”è®°â€</p>
<h1 id="1-å¼•å…¥CSSçš„ä¸‰ç§æ–¹å¼"><a href="#1-å¼•å…¥CSSçš„ä¸‰ç§æ–¹å¼" class="headerlink" title="1 å¼•å…¥CSSçš„ä¸‰ç§æ–¹å¼"></a>1 å¼•å…¥CSSçš„ä¸‰ç§æ–¹å¼</h1><p>å¼•å…¥CSSå…±æœ‰ä¸‰ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯</p>
<ul>
<li>styleæ ‡ç­¾å†…éƒ¨ç›´æ¥ä¹¦å†™ï¼ˆç”¨äºæ¼”ç¤ºæ•ˆæœï¼‰</li>
<li>linkæ ‡ç­¾å¼•å…¥å¤–éƒ¨cssæ–‡ä»¶ï¼ˆæœ€æ­£è§„ã€å¤šç”¨çš„æ–¹å¼ï¼‰</li>
<li>è¡Œå†…å¼(ä¸€èˆ¬ä¸ç”¨)</li>
</ul>
<p>ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å­¦ä¹ csså¼•å…¥CSSçš„ä¸‰ç§æ–¹æ³•--&gt;</span></span><br><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">content</span>=<span class="string">&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    æ–¹å¼ä¸€ï¼šé€šè¿‡styleå¼•å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">h1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">color</span>: green;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    æ–¹å¼ä¸‰ï¼šé€šè¿‡linkå¼•å…¥å¤–éƒ¨æ–‡ä»¶(ä½¿ç”¨æœ€å¤š)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;03_è¢«å¼•å…¥çš„CSS.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>è¿™æ˜¯H1æ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    æ–¹å¼äºŒï¼šè¡Œå†…å¼å¼•å…¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">style</span>=<span class="string">&quot;color:red&quot;</span>&gt;</span>è¿™æ˜¯H2æ ‡é¢˜<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>è¿™æ˜¯H3æ ‡é¢˜<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­æ–‡ä»¶<code>03_è¢«å¼•å…¥çš„CSS.css</code>çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¿™æ˜¯è¢«å¼•ç”¨çš„CSSæ–‡ä»¶</span></span><br><span class="line"><span class="comment">è¿™æ˜¯æ³¨é‡Šçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h3</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: cornflowerblue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¼•ç”¨CSSåçš„æ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220801141907551.png" alt="image-20220801141907551"></p>
<h1 id="2-CSSé€‰æ‹©å™¨"><a href="#2-CSSé€‰æ‹©å™¨" class="headerlink" title="2 CSSé€‰æ‹©å™¨"></a>2 CSSé€‰æ‹©å™¨</h1><p>é€‰æ‹©å™¨å…±åˆ†ä¸ºä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯</p>
<ul>
<li>åŸºç¡€é€‰æ‹©å™¨</li>
<li>ç»„åˆé€‰æ‹©å™¨</li>
<li>å±æ€§é€‰æ‹©å™¨</li>
</ul>
<p>æ¥ä¸‹æ¥å°†ä¸€ä¸€ä»‹ç»å®ƒä»¬çš„ä½¿ç”¨æ–¹æ³•</p>
<h2 id="2-1-åŸºç¡€é€‰æ‹©å™¨"><a href="#2-1-åŸºç¡€é€‰æ‹©å™¨" class="headerlink" title="2.1 åŸºç¡€é€‰æ‹©å™¨"></a>2.1 åŸºç¡€é€‰æ‹©å™¨</h2><p>åŸºç¡€é€‰æ‹©å™¨å…·åˆ†ä¸ºï¼š</p>
<ul>
<li>IDé€‰æ‹©å™¨</li>
<li>ç±»é€‰æ‹©å™¨</li>
<li>å…ƒç´ &#x2F;æ ‡ç­¾é€‰æ‹©å™¨</li>
<li>é€šç”¨é€‰æ‹©å™¨</li>
</ul>
<p>ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å­¦ä¹ CSSé€‰æ‹©å™¨çš„ç”¨æ³•--&gt;</span></span><br><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">content</span>=<span class="string">&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    å¼•å…¥CSS--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*IDé€‰æ‹©å™¨*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-id">#id01</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/*æ‰¾åˆ°idå€¼æ˜¯&quot;id01&quot;çš„æ ‡ç­¾ï¼Œæ”¹å˜æ–‡å­—é¢œè‰²*/</span></span></span><br><span class="line"><span class="css">            <span class="attribute">color</span>: blueviolet;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*ç±»é€‰æ‹©å™¨*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.class01</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/*æ‰¾åˆ°classå€¼æ˜¯&quot;class01&quot;çš„æ ‡ç­¾ï¼Œæ”¹å˜æ–‡å­—é¢œè‰²*/</span></span></span><br><span class="line"><span class="css">            <span class="attribute">color</span>: deeppink;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/*æ‰¾åˆ°æ‰€æœ‰spanæ ‡ç­¾ï¼Œæ”¹å˜æ–‡å­—é¢œè‰²*/</span></span></span><br><span class="line"><span class="css">            <span class="attribute">color</span>: blue;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        * &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/*å°†htmlé¡µé¢æ‰€æœ‰çš„æ ‡ç­¾å…¨éƒ¨æ‰¾åˆ°ï¼Œå¹¶ä¿®æ”¹å­—ä½“ç±»å‹å’Œå¤§å°*/</span></span></span><br><span class="line"><span class="css">            <span class="attribute">font-family</span>: å¹¼åœ†;</span></span><br><span class="line"><span class="css">            <span class="attribute">font-size</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;id01&quot;</span>&gt;</span>è¿™æ˜¯æ¼”ç¤ºæ–‡å­—01<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;class01&quot;</span>&gt;</span>è¿™æ˜¯æ¼”ç¤ºæ–‡å­—02<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;class01&quot;</span>&gt;</span>è¿™æ˜¯æ¼”ç¤ºæ–‡å­—03<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>è¿™æ˜¯æ¼”ç¤ºæ–‡å­—03<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>è¿™æ˜¯æ¼”ç¤ºæ–‡å­—04<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é€‰æ‹©å™¨æ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220801143520201.png" alt="image-20220801143520201"></p>
<h2 id="2-2-ç»„åˆé€‰æ‹©å™¨"><a href="#2-2-ç»„åˆé€‰æ‹©å™¨" class="headerlink" title="2.2 ç»„åˆé€‰æ‹©å™¨"></a>2.2 ç»„åˆé€‰æ‹©å™¨</h2><p>ç»„åˆé€‰æ‹©å™¨åˆ†ä¸ºå››ç§ï¼š</p>
<ul>
<li>åä»£é€‰æ‹©å™¨ï¼ˆæ‰€æœ‰åä»£ï¼‰</li>
<li>å­å…ƒç´ é€‰æ‹©å™¨ï¼ˆå„¿å­ï¼‰</li>
<li>ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨</li>
<li>åç»­å…„å¼Ÿé€‰æ‹©å™¨</li>
</ul>
<h3 id="2-2-1-åä»£é€‰æ‹©å™¨ï¼š"><a href="#2-2-1-åä»£é€‰æ‹©å™¨ï¼š" class="headerlink" title="2.2.1 åä»£é€‰æ‹©å™¨ï¼š"></a>2.2.1 åä»£é€‰æ‹©å™¨ï¼š</h3><blockquote>
<p>é€‰å–æŸå…ƒç´ çš„åä»£å…ƒç´ </p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/*</span></span></span><br><span class="line"><span class="comment"><span class="css">åä»£é€‰æ‹©å™¨ï¼š</span></span></span><br><span class="line"><span class="comment"><span class="css">ä¿®æ”¹&lt;div&gt;æ‰€æœ‰åä»£&lt;p&gt;çš„èƒŒæ™¯è‰²  </span></span></span><br><span class="line"><span class="comment"><span class="css">*/</span></span></span><br><span class="line"><span class="css"><span class="selector-tag">div</span> <span class="selector-tag">p</span></span></span><br><span class="line"><span class="css">&#123;</span></span><br><span class="line"><span class="css">	<span class="attribute">background-color</span>:yellow;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>æ®µè½ 1ã€‚ åœ¨ div ä¸­ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>æ®µè½ 2ã€‚ åœ¨ div ä¸­ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ®µè½ 3ã€‚ä¸åœ¨ div ä¸­ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ®µè½ 4ã€‚ä¸åœ¨ div ä¸­ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220801163330446.png" alt="image-20220801163330446"></p>
<h3 id="2-2-2-å­å…ƒç´ é€‰æ‹©å™¨"><a href="#2-2-2-å­å…ƒç´ é€‰æ‹©å™¨" class="headerlink" title="2.2.2 å­å…ƒç´ é€‰æ‹©å™¨"></a>2.2.2 å­å…ƒç´ é€‰æ‹©å™¨</h3><blockquote>
<p>é€‰å–æŸå…ƒç´ çš„ï¼ˆç›´æ¥&#x2F;ä¸€çº§ï¼‰å­å…ƒç´ </p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/*å­å…ƒç´ é€‰æ‹©å™¨ï¼š*/</span></span></span><br><span class="line"><span class="css"><span class="comment">/*ç»™&lt;div&gt;çš„å„¿å­&lt;p&gt;è®¾ç½®èƒŒæ™¯è‰²*/</span></span></span><br><span class="line"><span class="css"><span class="selector-tag">div</span>&gt;<span class="selector-tag">p</span></span></span><br><span class="line"><span class="css">&#123;</span></span><br><span class="line"><span class="css">	<span class="attribute">background-color</span>:yellow;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Welcome to My Homepage<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h2</span>&gt;</span>My name is Donald<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">p</span>&gt;</span>I live in Duckburg.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>I will not be styled.<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>My best friend is Mickey.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220801163723386.png" alt="image-20220801163723386"></p>
<h3 id="2-2-3-ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨"><a href="#2-2-3-ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨" class="headerlink" title="2.2.3 ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨"></a>2.2.3 ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨</h3><blockquote>
<p>é€‰æ‹©<code>ç´§æ¥</code>åœ¨<code>æŒ‡å®šå…ƒç´ </code>åçš„å…ƒç´ ï¼Œä¸”äºŒè€…æœ‰ç›¸åŒçˆ¶å…ƒç´ ã€‚</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/*é€‰æ‹©ç´§æ¥åœ¨&lt;div&gt;åçš„&lt;p&gt;ï¼Œä¿®æ”¹èƒŒæ™¯è‰²*/</span></span></span><br><span class="line"><span class="css"><span class="selector-tag">div</span>+<span class="selector-tag">p</span></span></span><br><span class="line"><span class="css">&#123;</span></span><br><span class="line"><span class="css">	<span class="attribute">background-color</span>:yellow;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ–‡ç« æ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>DIV å†…éƒ¨æ ‡é¢˜<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>DIV å†…éƒ¨æ®µè½ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>DIV ä¹‹åçš„ç¬¬ä¸€ä¸ª P å…ƒç´ ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>DIV ä¹‹åçš„ç¬¬äºŒä¸ª P å…ƒç´ ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220801164015184.png" alt="image-20220801164015184"></p>
<h3 id="2-2-4-åç»­å…„å¼Ÿé€‰æ‹©å™¨"><a href="#2-2-4-åç»­å…„å¼Ÿé€‰æ‹©å™¨" class="headerlink" title="2.2.4 åç»­å…„å¼Ÿé€‰æ‹©å™¨"></a>2.2.4 åç»­å…„å¼Ÿé€‰æ‹©å™¨</h3><blockquote>
<p>é€‰æ‹©<code>æŒ‡å®šå…ƒç´ </code>åçš„å…ƒç´ ï¼Œä¸”äºŒè€…æœ‰ç›¸åŒçˆ¶å…ƒç´ ã€‚</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/*é€‰æ‹©&lt;div&gt;åï¼Œè·Ÿ&lt;div&gt;æœ‰ç›¸åŒçˆ¶äº²çš„&lt;p&gt;*/</span></span></span><br><span class="line"><span class="css"><span class="selector-tag">div</span>~<span class="selector-tag">p</span></span></span><br><span class="line"><span class="css">&#123;</span></span><br><span class="line"><span class="css">	<span class="attribute">background-color</span>:yellow;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ä¹‹å‰æ®µè½ï¼Œä¸ä¼šæ·»åŠ èƒŒæ™¯é¢œè‰²ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ®µè½ 1ã€‚ åœ¨ div ä¸­ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ®µè½ 2ã€‚ åœ¨ div ä¸­ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ®µè½ 3ã€‚ä¸åœ¨ div ä¸­ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ®µè½ 4ã€‚ä¸åœ¨ div ä¸­ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220801164412943.png" alt="image-20220801164412943"></p>
<h2 id="2-3-å±æ€§é€‰æ‹©å™¨"><a href="#2-3-å±æ€§é€‰æ‹©å™¨" class="headerlink" title="2.3 å±æ€§é€‰æ‹©å™¨"></a>2.3 å±æ€§é€‰æ‹©å™¨</h2><p>åˆ†ä¸ºä¸‰ç§ï¼š</p>
<ul>
<li>ä½¿ç”¨ã€å±æ€§ã€‘é€‰æ‹©</li>
<li>ä½¿ç”¨ã€å±æ€§ + å€¼ã€‘é€‰æ‹©</li>
<li>ä½¿ç”¨ã€å±æ€§ + å€¼ + æ ‡ç­¾ã€‘é€‰æ‹©</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å­¦ä¹ CSSå±æ€§é€‰æ‹©å™¨çš„ä½¿ç”¨--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">content</span>=<span class="string">&quot;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*é€‰æ‹©æœ‰name=â€usernameâ€œå±æ€§çš„æ ‡ç­¾ï¼Œè®¾ç½®èƒŒæ™¯è‰²*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">input</span><span class="selector-attr">[name=<span class="string">&quot;username&quot;</span>]</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*é€‰æ‹©æœ‰nameå±æ€§çš„æ ‡ç­¾ï¼Œè®¾ç½®èƒŒæ™¯è‰²*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-attr">[name]</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: yellowgreen;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*é€‰æ‹©æœ‰name=â€dateâ€œå±æ€§çš„&lt;input&gt;æ ‡ç­¾ï¼Œè®¾ç½®èƒŒæ™¯è‰²*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">input</span><span class="selector-attr">[name=<span class="string">&quot;date&quot;</span>]</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: cornflowerblue;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>ç”¨æˆ·å<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;passwd&quot;</span>&gt;</span>å¯†ç <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;passwd&quot;</span> <span class="attr">id</span>=<span class="string">&quot;passwd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>æ—¥æœŸ</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;data&quot;</span> <span class="attr">name</span>=<span class="string">&quot;date&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220801165549457.png" alt="image-20220801165549457"></p>
<h1 id="3-id-x2F-name-x2F-classåŒºåˆ«"><a href="#3-id-x2F-name-x2F-classåŒºåˆ«" class="headerlink" title="3 id&#x2F;name&#x2F;classåŒºåˆ«"></a>3 id&#x2F;name&#x2F;classåŒºåˆ«</h1><blockquote>
<p>â€œçŸ¥å·±çŸ¥å½¼ï¼Œç™¾æˆ˜ä¸æ®†â€</p>
</blockquote>
<p>ä»–ä»¬çš„åŒºåˆ«ï¼š</p>
<ul>
<li>idï¼šæ ‡ç­¾å”¯ä¸€æ ‡è¯†ï¼Œå¥½æ¯”æˆ‘ä»¬èº«ä»½è¯å·ç ï¼Œå…·æœ‰å”¯ä¸€æ€§ã€‚JSå¸¸ç”¨document,getGlementBy(id).</li>
<li>classï¼šæ ‡ç­¾çš„ç±»åˆ«ï¼Œå¯é‡å¤ä½¿ç”¨ï¼ŒCSSå¸¸ç”¨ã€‚</li>
<li>nameï¼šæ ‡ç­¾çš„åç§°ï¼Œä¸fromè¡¨å•é…åˆä½¿ç”¨æäº¤æ•°æ®åå°</li>
</ul>
<p>idï¼Œclassä¸€èˆ¬æ˜¯é¡µé¢ä½¿ç”¨ï¼Œnameä¸€èˆ¬æ˜¯åå°äº¤äº’ä½¿ç”¨</p>
]]></content>
      <categories>
        <category>Python</category>
        <category>å‰ç«¯åŸºç¡€</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹ç»¼åˆæ¶æ„--07--Nginx(ä¹)åŠ¨é™åˆ†ç¦»</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/02-%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/15-Nginx(%E4%B9%9D)%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB%E5%92%8Crewrite/</url>
    <content><![CDATA[<h2 id="ä¸€ã€åŠ¨é™åˆ†ç¦»ä»‹ç»"><a href="#ä¸€ã€åŠ¨é™åˆ†ç¦»ä»‹ç»" class="headerlink" title="ä¸€ã€åŠ¨é™åˆ†ç¦»ä»‹ç»"></a>ä¸€ã€åŠ¨é™åˆ†ç¦»ä»‹ç»</h2><p>åŠ¨é™åˆ†ç¦»ï¼Œé€šè¿‡ä¸­é—´ä»¶å°†åŠ¨é™åˆ†ç¦»å’Œé™æ€è¯·æ±‚è¿›â¾åˆ†ç¦»ï¼›<br>é€šè¿‡ä¸­é—´ä»¶å°†åŠ¨æ€è¯·æ±‚å’Œé™æ€è¯·æ±‚åˆ†ç¦»ï¼Œå¯ä»¥å»ºä¸Šä¸å¿…è¦çš„è¯·æ±‚æ¶ˆè€—ï¼ŒåŒæ—¶èƒ½å‡å°‘è¯·æ±‚çš„å»¶æ—¶ã€‚<br>é€šè¿‡ä¸­é—´ä»¶å°†åŠ¨æ€è¯·æ±‚å’Œé™æ€è¯·æ±‚åˆ†ç¦»ï¼Œé€»è¾‘å›¾å¦‚ä¸‹:  </p>
<h2 id="äºŒã€å•å°æœåŠ¡å™¨åŠ¨é™åˆ†ç¦»é…ç½®"><a href="#äºŒã€å•å°æœåŠ¡å™¨åŠ¨é™åˆ†ç¦»é…ç½®" class="headerlink" title="äºŒã€å•å°æœåŠ¡å™¨åŠ¨é™åˆ†ç¦»é…ç½®"></a>äºŒã€å•å°æœåŠ¡å™¨åŠ¨é™åˆ†ç¦»é…ç½®</h2><p>é€»è¾‘å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="/img/%E5%8D%95%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB.png" alt="å•å°æœåŠ¡å™¨åŠ¨é™åˆ†ç¦»"></p>
<p>ç¼–è¾‘Nginxé…ç½®æ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 conf.d]vim blog.conf</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name blog.linux.com;</span><br><span class="line">    location / &#123;</span><br><span class="line">    root /code/wordpress;</span><br><span class="line">    index index.php;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœè¯·æ±‚çš„æ˜¯ä»¥.jpgç»“å°¾çš„é™æ€â½‚ä»¶ å°±å»/code/imagesâ½¬å½•ä¸‹è®¿é—®</span></span><br><span class="line">location ~* \.jpg$ &#123;</span><br><span class="line">    root /code/images;</span><br><span class="line">    &#125;</span><br><span class="line">    location ~* \.php$ &#123;</span><br><span class="line">    root /code/wordpress;</span><br><span class="line">    fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">    include fastcgi_params;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºâ½¬å½•</span></span><br><span class="line">[root@web01 conf.d]# mkdir /code/images/</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å®ç°åŠ¨é™åˆ†ç¦»</span></span><br><span class="line">â½…å¼â¼€ï¼šæŠŠâ½‚ä»¶æŒªåˆ°/code/images/</span><br><span class="line">cp -r /code/wordpress/wp-content /code/images/</span><br><span class="line"></span><br><span class="line">â½…å¼â¼†ï¼šåšè½¯è¿æ¥</span><br><span class="line">cd /code</span><br><span class="line">ln -s wordpress images</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€å¤šå°æœåŠ¡å™¨åŠ¨é™åˆ†ç¦»é…ç½®"><a href="#ä¸‰ã€å¤šå°æœåŠ¡å™¨åŠ¨é™åˆ†ç¦»é…ç½®" class="headerlink" title="ä¸‰ã€å¤šå°æœåŠ¡å™¨åŠ¨é™åˆ†ç¦»é…ç½®"></a>ä¸‰ã€å¤šå°æœåŠ¡å™¨åŠ¨é™åˆ†ç¦»é…ç½®</h2><p>å‚è€ƒï¼š<a href="https://www.cnblogs.com/backups/p/nginx10.html">https://www.cnblogs.com/backups/p/nginx10.html</a></p>
<h3 id="3-1-åŸç†å›¾"><a href="#3-1-åŸç†å›¾" class="headerlink" title="3.1 åŸç†å›¾"></a>3.1 åŸç†å›¾</h3><p><img src="/img/%E5%A4%9A%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB.png" alt="å¤šå°æœåŠ¡å™¨åŠ¨é™åˆ†ç¦»"></p>
<h3 id="3-2-å®éªŒç¯å¢ƒå‡†å¤‡"><a href="#3-2-å®éªŒç¯å¢ƒå‡†å¤‡" class="headerlink" title="3.2 å®éªŒç¯å¢ƒå‡†å¤‡"></a>3.2 å®éªŒç¯å¢ƒå‡†å¤‡</h3><table>
<thead>
<tr>
<th>ä¸»æœº</th>
<th>å¤–ç½‘</th>
<th>å†…ç½‘</th>
<th>ä½œç”¨æœåŠ¡</th>
</tr>
</thead>
<tbody><tr>
<td>lb01</td>
<td>10.0.0.5</td>
<td>172.16.1.5</td>
<td>è´Ÿè½½å‡è¡¡ nginx proxy</td>
</tr>
<tr>
<td>web01</td>
<td>10.0.0.7</td>
<td>172.16.1.7</td>
<td>é™æ€èµ„æº nginx static</td>
</tr>
<tr>
<td>web02</td>
<td>10.0.0.8</td>
<td>172.16.1.8</td>
<td>åŠ¨æ€èµ„æº tomcat server</td>
</tr>
</tbody></table>
<h3 id="3-3-é…ç½®web01æä¾›é™æ€èµ„æº"><a href="#3-3-é…ç½®web01æä¾›é™æ€èµ„æº" class="headerlink" title="3.3 é…ç½®web01æä¾›é™æ€èµ„æº"></a>3.3 é…ç½®web01æä¾›é™æ€èµ„æº</h3><p>1ã€é…ç½®Nginx</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 images]# cat /etc/nginx/conf.d/jt.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> åŠ¨é™åˆ†ç¦»ï¼Œweb01æä¾›é™æ€æ–‡ä»¶æœåŠ¡</span></span><br><span class="line">server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name dongjing.gs.com;</span><br><span class="line">        </span><br><span class="line">        # æä¾›ä¸´æ—¶æµ‹è¯•çš„åŸŸå</span><br><span class="line">        root /code/dongjing;</span><br><span class="line">        index index.html;</span><br><span class="line"></span><br><span class="line">        location ~* ^.*\.(jpg|png|gif)$ &#123;</span><br><span class="line">                root /code/dongjing/images;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€ä¸Šä¼ é™æ€èµ„æºï¼Œæµ‹è¯•è®¿é—®é™æ€é¡µé¢</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web01 ~]# echo &quot;web01...jingtai&quot; &gt; /code/index.html</span><br><span class="line">[root@web01 ~]# mkdir /code/dongjing/images/ &amp;&amp; cd /code/dongjing/images/</span><br><span class="line">[root@web01 images]# rz 1.jpg</span><br><span class="line">[root@web01 images]# nginx -t</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br><span class="line">[root@web01 images]# systemctl reload nginx</span><br></pre></td></tr></table></figure>

<p><code>åœ¨å®¢æˆ·ç«¯é…ç½®hostsï¼Œ10.0.0.7 dongjing.gs.com</code></p>
<p>æ‰“å¼€æµè§ˆå™¨è®¿é—®<a href="http://dongjing.gs.com/">http://dongjing.gs.com</a></p>
<p><img src="/img/image-20210825141423629.png" alt="image-20210825141423629"></p>
<p>æ‰“å¼€æµè§ˆå™¨è®¿é—®<a href="http://dongjing.gs.com/1.png">http://dongjing.gs.com/1.png</a></p>
<p><img src="/img/image-20210825142256349.png" alt="image-20210825142256349"></p>
<h3 id="3-4-é…ç½®web02æä¾›åŠ¨æ€èµ„æºï¼ˆtomcat-javaæ¨¡æ‹Ÿ"><a href="#3-4-é…ç½®web02æä¾›åŠ¨æ€èµ„æºï¼ˆtomcat-javaæ¨¡æ‹Ÿ" class="headerlink" title="3.4 é…ç½®web02æä¾›åŠ¨æ€èµ„æºï¼ˆtomcat + javaæ¨¡æ‹Ÿ)"></a>3.4 é…ç½®web02æä¾›åŠ¨æ€èµ„æºï¼ˆtomcat + javaæ¨¡æ‹Ÿ)</h3><p>1ã€å®‰è£…Tomcatå¹¶æ·»åŠ jspæ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@web02 ~]# yum install -y tomcat</span><br><span class="line">[root@web02 ~]# mkdir /usr/share/tomcat/webapps/ROOT</span><br><span class="line">[root@web02 ~]# cat &gt;/usr/share/tomcat/webapps/ROOT/java_test.jsp &lt;&lt;EOF</span><br><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;utf-8&quot;%&gt;</span><br><span class="line">&lt;HTML&gt;</span><br><span class="line">    &lt;HEAD&gt;</span><br><span class="line">        &lt;TITLE&gt;oldboy JSP Page&lt;/TITLE&gt;</span><br><span class="line">    &lt;/HEAD&gt;</span><br><span class="line">    &lt;BODY&gt;</span><br><span class="line">        &lt;%</span><br><span class="line">            Random rand = new Random();</span><br><span class="line">            out.println(&quot;&lt;h1&gt;éšæœºæ•°:&lt;h1&gt;&quot;);</span><br><span class="line">            out.println(rand.nextInt(99)+100);</span><br><span class="line">        %&gt;</span><br><span class="line">    &lt;/BODY&gt;</span><br><span class="line">&lt;/HTML&gt;</span><br><span class="line">EOF</span><br><span class="line">[root@web02 ~]# systemctl start tomcat</span><br></pre></td></tr></table></figure>

<p>2ã€æµ‹è¯•è®¿é—®</p>
<p>è®¿é—®<a href="http://10.0.0.8:8080/java_test.jsp">http://10.0.0.8:8080/java_test.jsp</a></p>
<p><img src="/img/image-20210825162829977.png" alt="image-20210825162829977"></p>
<h3 id="3-4-å¢åŠ è´Ÿè½½å‡è¡¡ï¼Œå®ç°åŠ¨é™åˆ†ç¦»"><a href="#3-4-å¢åŠ è´Ÿè½½å‡è¡¡ï¼Œå®ç°åŠ¨é™åˆ†ç¦»" class="headerlink" title="3.4 å¢åŠ è´Ÿè½½å‡è¡¡ï¼Œå®ç°åŠ¨é™åˆ†ç¦»"></a>3.4 å¢åŠ è´Ÿè½½å‡è¡¡ï¼Œå®ç°åŠ¨é™åˆ†ç¦»</h3><p>1ã€é…ç½®Nginx</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 dongtai]# cat /etc/nginx/conf.d/proxy_dj.conf</span><br><span class="line">upstream jt &#123;</span><br><span class="line">        server 172.16.1.7:80;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">upstream dt &#123;</span><br><span class="line">        server 172.16.1.8:8080;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name dongjing.gs.com;</span><br><span class="line"></span><br><span class="line">        location ~* ^.*\.(jpg|png|gif)$ &#123;</span><br><span class="line">                proxy_pass http://jt;</span><br><span class="line">                proxy_set_header HOST $http_host;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ \.jsp$ &#123;</span><br><span class="line">                proxy_pass http://dt;</span><br><span class="line">                proxy_set_header HOST $http_host;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€æµ‹è¯•è®¿é—®</p>
<p><code>å®¢æˆ·ç«¯é…ç½®hostsï¼Œ10.0.0.3 dongjing.gs.com</code></p>
<p>åœ¨æµè§ˆå™¨è®¿é—®</p>
<p><a href="http://dongjing.gs.com/1.png">http://dongjing.gs.com/1.png</a></p>
<p><a href="http://10.0.0.8:8080/java_test.jsp">http://10.0.0.8:8080/java_test.jsp</a></p>
<p>çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯è®¿é—®<a href="http://dongjing.gs.comæ˜¾ç¤ºçš„æ˜¯nginxé»˜è®¤çš„ä¸»é¡µ,å› ä¸ºlb01ä¸­æš‚æ—¶æ²¡æœ‰å¯¹åº”æ–‡ä»¶å¤¹çš„index.html/">http://dongjing.gs.comæ˜¾ç¤ºçš„æ˜¯Nginxé»˜è®¤çš„ä¸»é¡µï¼Œå› ä¸ºlb01ä¸­æš‚æ—¶æ²¡æœ‰å¯¹åº”æ–‡ä»¶å¤¹çš„index.html</a></p>
<h3 id="3-5-åœ¨è´Ÿè½½å‡è¡¡ä¸Šåˆ›å»ºåŒæ—¶è°ƒç”¨åŠ¨æ€å’Œé™æ€èµ„æºçš„index-html"><a href="#3-5-åœ¨è´Ÿè½½å‡è¡¡ä¸Šåˆ›å»ºåŒæ—¶è°ƒç”¨åŠ¨æ€å’Œé™æ€èµ„æºçš„index-html" class="headerlink" title="3.5 åœ¨è´Ÿè½½å‡è¡¡ä¸Šåˆ›å»ºåŒæ—¶è°ƒç”¨åŠ¨æ€å’Œé™æ€èµ„æºçš„index.html"></a>3.5 åœ¨è´Ÿè½½å‡è¡¡ä¸Šåˆ›å»ºåŒæ—¶è°ƒç”¨åŠ¨æ€å’Œé™æ€èµ„æºçš„index.html</h3><p>1ã€ä¿®æ”¹Nginxé…ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 dongtai]# cat /etc/nginx/conf.d/proxy_dj.conf</span><br><span class="line">upstream jt &#123;</span><br><span class="line">        server 172.16.1.7:80;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">upstream dt &#123;</span><br><span class="line">        server 172.16.1.8:8080;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name dongjing.gs.com;</span><br><span class="line">		</span><br><span class="line"><span class="meta">		#</span><span class="bash"> æ–°å¢</span></span><br><span class="line">        location / &#123;</span><br><span class="line">                root /code/dongjing;</span><br><span class="line">                index index.html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~* ^.*\.(jpg|png|gif)$ &#123;</span><br><span class="line">                proxy_pass http://jt;</span><br><span class="line">                proxy_set_header HOST $http_host;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ \.jsp$ &#123;</span><br><span class="line">                proxy_pass http://dt;</span><br><span class="line">                proxy_set_header HOST $http_host;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€åˆ›å»ºå¯¹åº”çš„ç›®å½•å’Œé¡µé¢</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 /]# mkdir /code/dongjing</span><br><span class="line">[root@lb01 /]# cat /code/dongjing/index.html</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;UTF-8&quot; /&gt;</span><br><span class="line">        &lt;title&gt;æµ‹è¯•ajaxå’Œè·¨åŸŸè®¿é—®&lt;/title&gt;</span><br><span class="line">        &lt;script src=&quot;http://libs.baidu.com/jquery/2.1.4/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line"><span class="meta">$</span><span class="bash">(document).ready(<span class="function"><span class="title">function</span></span>()&#123;</span></span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">        type: &quot;GET&quot;,</span><br><span class="line">        url: &quot;http://dongjing.gs.com/java_test.jsp&quot;,</span><br><span class="line">        success: function(data)&#123;</span><br><span class="line">                $(&quot;#get_data&quot;).html(data)</span><br><span class="line">        &#125;,</span><br><span class="line">        error: function() &#123;</span><br><span class="line">                alert(&quot;å“å‘¦å–‚,å¤±è´¥äº†,å›å»æ£€æŸ¥ä½ æœåŠ¡å»~&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">        &lt;h1&gt;æµ‹è¯•åŠ¨é™åˆ†ç¦»&lt;/h1&gt;</span><br><span class="line">        &lt;div id=&quot;get_data&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;img src=&quot;http://dongjing.gs.com/1.png&quot;&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>3ã€æµ‹è¯•è®¿é—®</p>
<p>æµè§ˆå™¨è®¿é—®ï¼š<a href="http://dongjing.gs.com/">http://dongjing.gs.com</a></p>
<p><img src="/img/image-20210825143746986.png" alt="image-20210825143746986"></p>
<p>æ­£å¸¸è´Ÿè½½å‡è¡¡çš„ç°è±¡ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">å…³æ‰web02çš„TomcatæœåŠ¡ï¼Œweb01æœåŠ¡æ­£å¸¸</span><br><span class="line"></span><br><span class="line">â€‹	http://dongjing.gs.comå¯ä»¥æ­£å¸¸æ‰“å¼€ï¼Œå›¾ç‰‡æ­£å¸¸æ˜¾ç¤ºï¼Œéšæœºæ•°å°†æ˜¾ç¤ºå¼‚å¸¸</span><br><span class="line"></span><br><span class="line">web02çš„TomcatæœåŠ¡æ­£å¸¸ï¼Œå…³æ‰web01çš„nginxæœåŠ¡</span><br><span class="line"></span><br><span class="line">â€‹	http://dongjing.gs.comå¯ä»¥æ­£å¸¸æ‰“å¼€ï¼Œå›¾ç‰‡æ˜¾ç¤ºå¼‚å¸¸ï¼Œéšæœºæ­£å¸¸æ˜¾ç¤º</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€ç»¼åˆæ¡ˆä¾‹-Nginxèµ„æºåˆ†ç¦»"><a href="#å››ã€ç»¼åˆæ¡ˆä¾‹-Nginxèµ„æºåˆ†ç¦»" class="headerlink" title="å››ã€ç»¼åˆæ¡ˆä¾‹-Nginxèµ„æºåˆ†ç¦»"></a>å››ã€ç»¼åˆæ¡ˆä¾‹-Nginxèµ„æºåˆ†ç¦»</h2><h3 id="4-1-ä»€ä¹ˆæ˜¯èµ„æºåˆ†ç¦»ï¼Ÿ"><a href="#4-1-ä»€ä¹ˆæ˜¯èµ„æºåˆ†ç¦»ï¼Ÿ" class="headerlink" title="4.1 ä»€ä¹ˆæ˜¯èµ„æºåˆ†ç¦»ï¼Ÿ"></a>4.1 ä»€ä¹ˆæ˜¯èµ„æºåˆ†ç¦»ï¼Ÿ</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">æ ¹æ®æµè§ˆå™¨Agentæ ‡è¯†å¯ä»¥è®¿é—®åˆ°ä¸åŒçš„é¡µé¢èµ„æºï¼š</span><br><span class="line">æ¯”å¦‚ï¼š</span><br><span class="line">    Androidè®¿é—®åˆ°çš„æ˜¯Androidçš„é¡µé¢</span><br><span class="line">    PCè®¿é—®åˆ°çš„æ˜¯PCçš„é¡µé¢</span><br><span class="line">    iphoneè®¿é—®æ”¾åˆ°çš„æ˜¯iphoneçš„é¡µé¢</span><br></pre></td></tr></table></figure>

<h3 id="4-2-å®éªŒç¯å¢ƒå‡†å¤‡"><a href="#4-2-å®éªŒç¯å¢ƒå‡†å¤‡" class="headerlink" title="4.2 å®éªŒç¯å¢ƒå‡†å¤‡"></a>4.2 å®éªŒç¯å¢ƒå‡†å¤‡</h3><table>
<thead>
<tr>
<th>ä¸»æœº</th>
<th>å¤–ç½‘</th>
<th>å†…ç½‘</th>
<th>ä½œç”¨æœåŠ¡</th>
</tr>
</thead>
<tbody><tr>
<td>lb01</td>
<td>10.0.0.5</td>
<td>172.16.1.5</td>
<td>è´Ÿè½½å‡è¡¡ nginx proxy</td>
</tr>
<tr>
<td>web01</td>
<td>10.0.0.7</td>
<td>172.16.1.7</td>
<td>æä¾›Androidæ‰‹æœºé¡µé¢</td>
</tr>
<tr>
<td>web02</td>
<td>10.0.0.8</td>
<td>172.16.1.8</td>
<td>æä¾›PCè®¿é—®é¡µé¢</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</category>
      </categories>
  </entry>
  <entry>
    <title>Day54-JavaScript-01</title>
    <url>/2022/08/08/03_Python/02_%E5%89%8D%E7%AB%AF/day54%E7%AC%94%E8%AE%B0-JS-01/</url>
    <content><![CDATA[<p>â€œç¬¬54å¤©JavaScriptï¼ˆ01ï¼‰å­¦ä¹ ç¬”è®°â€</p>
<h1 id="1-JavaScriptç®€ä»‹"><a href="#1-JavaScriptç®€ä»‹" class="headerlink" title="1 JavaScriptç®€ä»‹"></a>1 JavaScriptç®€ä»‹</h1><p><strong><font color=blue>JavaScript(ç®€ç§°JS)</font></strong> å¬èµ·æ¥æ˜¯ä¸æ˜¯æ„Ÿè§‰è·ŸJavaçš„å…³ç³»å¾ˆå¤§?</p>
<p>å…¶å®è·ŸJavaä»€ä¹ˆå…³ç³»éƒ½æ²¡æœ‰, åªæ˜¯ä¸ºäº†<font color="red"><strong>è¹­Javaçš„çƒ­åº¦</strong></font>,æ‰èµ·çš„è¿™ä¹ˆä¸ªåå­—!</p>
<p>JSåˆ°åº•æ˜¯ä»€ä¹ˆ?</p>
<ul>
<li>JavaScript æ˜¯è„šæœ¬è¯­è¨€</li>
<li>JavaScript æ˜¯ä¸€ç§è½»é‡çº§çš„ç¼–ç¨‹è¯­è¨€ã€‚</li>
<li>JavaScript æ˜¯å¯æ’å…¥ HTML é¡µé¢çš„ç¼–ç¨‹ä»£ç ã€‚</li>
<li>JavaScript æ’å…¥ HTML é¡µé¢åï¼Œå¯ç”±æ‰€æœ‰çš„ç°ä»£æµè§ˆå™¨æ‰§è¡Œã€‚</li>
<li>JavaScript å¾ˆå®¹æ˜“å­¦ä¹ </li>
</ul>
<p>ç¬¬ä¸€ä¸ªjsç¨‹åº</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">        // å•è¡Œæ³¨é‡Š</span><br><span class="line">        </span><br><span class="line">        /*</span><br><span class="line">        å¤šè¡Œæ³¨é‡Š</span><br><span class="line">        */</span><br><span class="line">        </span><br><span class="line">        document.write(&quot;&lt;h1&gt;Hello World!&lt;/h1&gt;&quot;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h1 id="2-JSå˜é‡"><a href="#2-JSå˜é‡" class="headerlink" title="2 JSå˜é‡"></a>2 JSå˜é‡</h1><h2 id="2-1-å®šä¹‰å˜é‡çš„ä¸¤ç§æ–¹æ³•"><a href="#2-1-å®šä¹‰å˜é‡çš„ä¸¤ç§æ–¹æ³•" class="headerlink" title="2.1 å®šä¹‰å˜é‡çš„ä¸¤ç§æ–¹æ³•"></a>2.1 å®šä¹‰å˜é‡çš„ä¸¤ç§æ–¹æ³•</h2><ul>
<li>var </li>
<li>let  (es6æ¨å‡ºçš„æ–°è¯­æ³•, å¦‚æœä½ çš„ç¼–è¾‘å™¨æ”¯æŒçš„ç‰ˆæœ¬æ˜¯5.1é‚£ä¹ˆæ— æ³•ä½¿ç”¨let)</li>
</ul>
<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// varå®šä¹‰å˜é‡</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> num1 = <span class="number">100</span></span></span><br><span class="line"><span class="javascript">        alert(num1)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// letå®šä¹‰å˜é‡</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> num2 = <span class="number">300</span></span></span><br><span class="line"><span class="javascript">        alert(num2)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>letå’Œvarçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ?  </p>
<ul>
<li><p>varæ˜¯å‡½æ•°ä½œç”¨åŸŸï¼Œletæ˜¯å—ä½œç”¨åŸŸ\</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> num = <span class="number">0</span>; num &lt; <span class="number">100</span>; num++)&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(num) <span class="comment">// è¾“å‡º100	(è¯´æ˜å‡½æ•°å†…æœ‰æ•ˆ)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> num2 = <span class="number">0</span>; num &lt; <span class="number">100</span>; num++)&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(num2) <span class="comment">// è¾“å‡ºé”™è¯¯, num2æœªå®šä¹‰	(è¯´æ˜ç¦»å¼€forå¾ªç¯å—,å°±æ— æ•ˆäº†)</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>letä¸èƒ½åœ¨å®šä¹‰ä¹‹å‰è®¿é—®è¯¥å˜é‡, ä½†æ˜¯varå¯ä»¥\</p>
<p>varæ­£å¸¸</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(num1)</span><br><span class="line"><span class="keyword">var</span> num1 = <span class="number">300</span>  <span class="comment">// æ— æŠ¥é”™ï¼Œä¸è¾“å‡ºä¸œè¥¿</span></span><br></pre></td></tr></table></figure>

<p>letæŠ¥é”™</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(num1)</span><br><span class="line"><span class="keyword">let</span> num1 = <span class="number">300</span>  <span class="comment">// æ— æŠ¥é”™ï¼Œä¸è¾“å‡ºä¸œè¥¿</span></span><br><span class="line"><span class="comment">// æŠ¥é”™:02-å˜é‡.html:14 Uncaught ReferenceError: Cannot access &#x27;num1&#x27; before initialization</span></span><br><span class="line">    at <span class="number">02</span>-å˜é‡.html:<span class="number">14</span>:<span class="number">21</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>letä¸èƒ½è¢«é‡æ–°å®šä¹‰, ä½†æ˜¯varå¯ä»¥</p>
<p>varæ­£å¸¸</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num1 = <span class="number">100</span></span><br><span class="line"><span class="built_in">console</span>.log(num1)    <span class="comment">// æ­£å¸¸è¾“å‡º100</span></span><br><span class="line"><span class="keyword">var</span> num1 = <span class="number">200</span></span><br><span class="line"><span class="built_in">console</span>.log(num1)    <span class="comment">// æ­£å¸¸è¾“å‡º200</span></span><br></pre></td></tr></table></figure>

<p>letæŠ¥é”™</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> num1 = <span class="number">100</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">100</span>)</span><br><span class="line"><span class="keyword">let</span> num1 = <span class="number">200</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">200</span>)</span><br><span class="line"><span class="comment">// æŠ¥é”™: Uncaught SyntaxError: Identifier &#x27;num1&#x27; has already been declared</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-2-å˜é‡çš„å‘½åè§„èŒƒ"><a href="#2-2-å˜é‡çš„å‘½åè§„èŒƒ" class="headerlink" title="2.2 å˜é‡çš„å‘½åè§„èŒƒ"></a>2.2 å˜é‡çš„å‘½åè§„èŒƒ</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jså˜é‡çš„å‘½åè§„èŒƒ</span><br><span class="line">	1.å˜é‡ååªèƒ½æ˜¯ </span><br><span class="line">		æ•°å­— å­—æ¯ ä¸‹åˆ’çº¿ $</span><br><span class="line">	2.å˜é‡åå‘½åè§„èŒƒ(ä¸éµå¾ªä¹Ÿå¯ä»¥)</span><br><span class="line">		1.jsä¸­æ¨èä½¿ç”¨é©¼å³°å¼å‘½å</span><br><span class="line">			userName</span><br><span class="line">			dataOfDb</span><br><span class="line">		2.pythonæ¨èä½¿ç”¨ä¸‹åˆ’çº¿çš„æ–¹å¼</span><br><span class="line">			user_name</span><br><span class="line">			data_of_db</span><br><span class="line">	3.ä¸èƒ½ç”¨å…³é”®å­—ä½œä¸ºå˜é‡å</span><br><span class="line">			ä¸éœ€è¦è®°å¿† </span><br></pre></td></tr></table></figure>



<h2 id="2-3-ä»£ç çš„ä¹¦å†™ä½ç½®"><a href="#2-3-ä»£ç çš„ä¹¦å†™ä½ç½®" class="headerlink" title="2.3 ä»£ç çš„ä¹¦å†™ä½ç½®"></a>2.3 ä»£ç çš„ä¹¦å†™ä½ç½®</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1.å¯ä»¥å•ç‹¬å¼€è®¾jsæ–‡ä»¶ä¹¦å†™</span><br><span class="line">2.è¿˜å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨æä¾›çš„consoleç•Œé¢ä¹¦å†™</span><br><span class="line">	åœ¨ç”¨æµè§ˆå™¨ä¹¦å†™jsçš„æ—¶å€™ å·¦ä¸Šæ–¹çš„æ¸…ç©ºæŒ‰é’®åªæ˜¯æ¸…ç©ºå½“å‰é¡µé¢ ä»£ç å…¶å®è¿˜åœ¨</span><br><span class="line">	å¦‚æœä½ æƒ³è¦é‡æ–°æ¥ æœ€å¥½é‡æ–°å¼€è®¾ä¸€ä¸ª é¡µé¢</span><br></pre></td></tr></table></figure>



<h1 id="3-JSå¸¸é‡"><a href="#3-JSå¸¸é‡" class="headerlink" title="3 JSå¸¸é‡"></a>3 JSå¸¸é‡</h1><p>jsä¸­ä½¿ç”¨<code>const</code>å®šä¹‰å¸¸é‡, ä¸å¯è¢«ä¿®æ”¹çš„å˜é‡</p>
<blockquote>
<p>è¡¥å……: Pythonä¸­æ²¡æœ‰çœŸæ­£æ„ä¹‰ä¸Šçš„å¸¸é‡,é»˜è®¤å…¨å¤§å°ä»£è¡¨å¸¸é‡,è€ŒJSä¸­æœ‰çœŸæ­£æ„ä¹‰ä¸Šçš„å¸¸é‡</p>
</blockquote>
<p>æ¡ˆä¾‹ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> pi = <span class="number">3.14</span></span><br><span class="line"><span class="built_in">console</span>.log(pi)</span><br><span class="line">pi = <span class="number">80</span> <span class="comment">// æŠ¥é”™ï¼šUncaught TypeError: Assignment to constant variable.</span></span><br></pre></td></tr></table></figure>

<h1 id="4-æ•°æ®ç±»å‹"><a href="#4-æ•°æ®ç±»å‹" class="headerlink" title="4 æ•°æ®ç±»å‹"></a>4 æ•°æ®ç±»å‹</h1><p>jsä¹Ÿæ˜¯ä¸€é—¨é¢å‘å¯¹è±¡ çš„ç¼–ç¨‹è¯­è¨€ å³ä¸€åˆ‡çš†å¯¹è±¡!!!</p>
<p>js&#x2F;pythonæ˜¯ä¸€é—¨æ‹¥æœ‰åŠ¨æ€ç±»å‹</p>
<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">name = <span class="string">&#x27;jason&#x27;</span></span><br><span class="line">name = <span class="number">123</span></span><br><span class="line">name = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"># nameå¯ä»¥æŒ‡å‘ä»»æ„çš„æ•°æ®ç±»å‹ </span><br></pre></td></tr></table></figure>



<h2 id="4-1-æ•°å€¼ç±»å‹ï¼ˆNumberï¼‰"><a href="#4-1-æ•°å€¼ç±»å‹ï¼ˆNumberï¼‰" class="headerlink" title="4.1 æ•°å€¼ç±»å‹ï¼ˆNumberï¼‰"></a>4.1 æ•°å€¼ç±»å‹ï¼ˆNumberï¼‰</h2><p>å¸¸ç”¨æ–¹æ³•ï¼š<br>    parseInt()		è½¬æ¢ä¸ºIntç±»å‹	<br>    parseFloat()	è½¬æ¢ä¸ºFloatç±»å‹</p>
<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰å˜é‡</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">11</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">11.11</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚ä½•æŸ¥çœ‹å½“å‰æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="keyword">typeof</span> a;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹å‚æ•°çš„ç±»å‹</span></span><br><span class="line"><span class="keyword">typeof</span> a;</span><br><span class="line"><span class="keyword">typeof</span> b;</span><br><span class="line"><span class="string">&quot;number&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‰¹æ®Šçš„ NaN:æ•°å€¼ç±»å‹ è¡¨ç¤ºçš„æ„æ€æ˜¯â€œä¸æ˜¯ä¸€ä¸ªæ•°å­—â€ NOT A NUMBER</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;12312312&#x27;</span>)	<span class="comment">// æ­£å¸¸å°†å­—ç¬¦ä¸²è½¬ä¸ºIntç±»å‹</span></span><br><span class="line"><span class="number">12312312</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">&#x27;11.11&#x27;</span>)		<span class="comment">// æ­£å¸¸å°†å­—ç¬¦ä¸²è½¬ä¸ºæµ®ç‚¹ç±»å‹</span></span><br><span class="line"><span class="number">11.11</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;11.11&#x27;</span>)	<span class="comment">// æ­£å¸¸å°†å­—ç¬¦ä¸²è½¬ä¸ºIntç±»å‹ï¼Œå°†å»æ‰å°æ•°ç‚¹åé¢çš„æ•°</span></span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;123sdasdajs2312dasd&#x27;</span>)	<span class="comment">// åªå–å‰é¢çš„æ•°</span></span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&#x27;asdasdad123sdasdajs2312dasd&#x27;</span>)	<span class="comment">// å®Œå…¨æ— æ³•è¯†åˆ«çš„è½¬æ¢ä¸ºNaN</span></span><br><span class="line"><span class="literal">NaN</span></span><br></pre></td></tr></table></figure>



<h2 id="4-2-å­—ç¬¦ç±»å‹ï¼ˆStringï¼‰"><a href="#4-2-å­—ç¬¦ç±»å‹ï¼ˆStringï¼‰" class="headerlink" title="4.2 å­—ç¬¦ç±»å‹ï¼ˆStringï¼‰"></a>4.2 å­—ç¬¦ç±»å‹ï¼ˆStringï¼‰</h2><p>å®šä¹‰å­—ç¬¦ä¸²çš„æ¡ˆä¾‹ä»£ç å¦‚ä¸‹:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ã€å•å¼•å·ã€‘å®šä¹‰å˜é‡</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">&#x27;jason&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªåŠ¨è¯†åˆ«æˆäº†å­—ç¬¦ç±»å‹</span></span><br><span class="line"><span class="keyword">typeof</span> s</span><br><span class="line"><span class="string">&#x27;string&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥ä½¿ç”¨ã€åŒå¼•å·ã€‘å®šä¹‰å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">var</span> s2 = <span class="string">&quot;jason&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªåŠ¨è¯†åˆ«æˆäº†å­—ç¬¦ç±»å‹</span></span><br><span class="line"><span class="keyword">typeof</span> s2</span><br><span class="line"><span class="string">&#x27;string&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸èƒ½ä½¿ç”¨pythonçš„ä¸‰å¼•å·æ–¹å¼å®šä¹‰å¤šè¡Œæ–‡æœ¬çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">var</span> s3 = <span class="string">&#x27;&#x27;</span><span class="string">&#x27;jason&#x27;</span><span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="attr">VM894</span>:<span class="number">1</span> Uncaught <span class="built_in">SyntaxError</span>: Unexpected string</span><br><span class="line"></span><br><span class="line"><span class="comment">// JavaScriptä¸­ä½¿ç”¨ã€åå¼•å·ã€‘å®šä¹‰å¤šè¡Œæ–‡æœ¬çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">var</span> s3 = <span class="string">`</span></span><br><span class="line"><span class="string">è¿™æ˜¯å¤šè¡Œæ–‡å­—</span></span><br><span class="line"><span class="string">çš„æ¼”ç¤º</span></span><br><span class="line"><span class="string">è¿™æ˜¯å¤šè¡Œæ–‡å­—</span></span><br><span class="line"><span class="string">çš„æ¼”ç¤º</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="comment">// è¾“å‡ºs3</span></span><br><span class="line">s3</span><br><span class="line"><span class="string">&#x27;\nè¿™æ˜¯å¤šè¡Œæ–‡å­—\nçš„æ¼”ç¤º\nè¿™æ˜¯å¤šè¡Œæ–‡å­—\nçš„æ¼”ç¤º\n&#x27;</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºå­—ç¬¦ä¸²çš„æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€šè¿‡$&#123;&#125;çš„æ–¹å¼è¾“å‡ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">18</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;GLF&quot;</span></span><br><span class="line"><span class="keyword">var</span> sss = <span class="string">`My name is <span class="subst">$&#123;name&#125;</span> and my age is <span class="subst">$&#123;age&#125;</span>`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line">sss</span><br><span class="line"><span class="string">&#x27;My name is GLF and my age is 18&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// JSä¸­æ¨èä½¿ç”¨ã€+ã€‘å·æ‹¼æ¥å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">var</span> year = <span class="string">&#x27;2022&#x27;</span></span><br><span class="line"><span class="keyword">var</span> day = <span class="string">&#x27;12&#x27;</span></span><br><span class="line"><span class="keyword">var</span> month = <span class="string">&#x27;08&#x27;</span></span><br><span class="line">date = <span class="string">`Today is <span class="subst">$&#123;year + <span class="string">&#x27;-&#x27;</span> + month + day&#125;</span>`</span></span><br><span class="line"><span class="string">&#x27;Today is 2022-0812&#x27;</span></span><br><span class="line">date</span><br><span class="line"><span class="string">&#x27;Today is 2022-0812&#x27;</span></span><br></pre></td></tr></table></figure>

<p>å­—ç¬¦ç±»å‹å¸¸ç”¨æ–¹æ³•</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>length</td>
<td>è¿”å›å­—ç¬¦ä¸²é•¿åº¦</td>
</tr>
<tr>
<td>trim()</td>
<td>ç§»é™¤ç©ºç™½</td>
</tr>
<tr>
<td>trimLeft()</td>
<td>ç§»é™¤å·¦è¾¹çš„ç©ºç™½</td>
</tr>
<tr>
<td>trimRight()</td>
<td>ç§»é™¤å³è¾¹çš„ç©ºç™½</td>
</tr>
<tr>
<td>charAt(n)</td>
<td>è¿”å›ç¬¬nä¸ªå­—ç¬¦</td>
</tr>
<tr>
<td>concat(value, â€¦.)</td>
<td>æ‹¼æ¥å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>indexof(substring, start)</td>
<td>å­åºåˆ—ä½ç½®</td>
</tr>
<tr>
<td>substring(from, to)</td>
<td>æ ¹æ®ç´¢å¼•è·å–å­åºåˆ—</td>
</tr>
<tr>
<td>slice(start, end)</td>
<td>åˆ‡ç‰‡</td>
</tr>
<tr>
<td>toLowerCase()</td>
<td>å°å†™</td>
</tr>
<tr>
<td>toUpperCase()</td>
<td>å¤§å†™</td>
</tr>
<tr>
<td>split(delimiter, limit)</td>
<td>åˆ†å‰²</td>
</tr>
</tbody></table>
<p><code>length</code>æ–¹æ³•æ¡ˆä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;you are beautiful&#x27;</span></span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(str.length);</span><br><span class="line"><span class="number">17</span></span><br></pre></td></tr></table></figure>

<p>trim()æ–¹æ³•æ¡ˆä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> str2 = <span class="string">&quot; my left and right have blank &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º &quot;my left and right have blank&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(str2.trim())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º &quot; my left and right have blank&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(str2.trimRight())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º &quot;my left and right have blank &quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(str2.trimLeft())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸èƒ½åƒPythonä¸€æ ·æŒ‡å®šå»é™¤çš„å†…å®¹</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;$$Test string$$&quot;</span></span><br><span class="line">str.trim(<span class="string">&#x27;$&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;$$Test string$$&#x27;</span> <span class="comment">// å»é™¤$å¤±è´¥äº†</span></span><br></pre></td></tr></table></figure>

<p><code>charAt()</code>æ¡ˆä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;$$Test string$$&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–ä½ç½®0å’Œ8çš„å­—ç¬¦</span></span><br><span class="line">str.charAt(<span class="number">0</span>)</span><br><span class="line"><span class="string">&#x27;$&#x27;</span></span><br><span class="line">str.charAt(<span class="number">8</span>)</span><br><span class="line"><span class="string">&#x27;t&#x27;</span></span><br></pre></td></tr></table></figure>

<p><code>indexOf()</code>æ¡ˆä¾‹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;$$Test string$$&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–&#x27;st&#x27;å’Œ&#x27;str&#x27;ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®</span></span><br><span class="line">str.indexOf(<span class="string">&#x27;st&#x27;</span>)</span><br><span class="line"><span class="number">4</span></span><br><span class="line">str.indexOf(<span class="string">&#x27;str&#x27;</span>)</span><br><span class="line"><span class="number">7</span></span><br></pre></td></tr></table></figure>

<p><code>substring()</code>æ¡ˆä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;$$Test string$$&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–ä½ç½®1-5çš„å­—ä¸²</span></span><br><span class="line">str.substr(<span class="number">1</span>,<span class="number">5</span>)</span><br><span class="line"><span class="string">&#x27;$Test&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥ç”¨è´Ÿæ•°ï¼Œè¡¨ç¤ºå€’æ•°</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;12345678&quot;</span></span><br><span class="line">str.substr(-<span class="number">3</span>, <span class="number">20</span>)	<span class="comment">// 20è¶…å‡ºèŒƒå›´ï¼Œé€‰åˆ°æœ€åçš„ä½ç½®</span></span><br><span class="line"><span class="string">&#x27;678&#x27;</span></span><br></pre></td></tr></table></figure>

<p><code>slice()</code>æ¡ˆä¾‹ï¼ˆåŠŸèƒ½è·Ÿ<code>substring()</code>ç±»ä¼¼ï¼Œæ¨èä½¿ç”¨è¿™ä¸ªï¼‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;12345678&quot;</span></span><br><span class="line"><span class="comment">// åˆ‡ç‰‡(1ï¼Œ5)</span></span><br><span class="line">str.substr(<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line"><span class="string">&#x27;23456&#x27;</span></span><br></pre></td></tr></table></figure>

<p><code>toLowerCase()</code>å’Œ<code>toUpperCase()</code>æ¡ˆä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&#x27;ToDay is MONDAY&#x27;</span></span><br><span class="line">str.toLowerCase()</span><br><span class="line"><span class="string">&#x27;today is monday&#x27;</span></span><br><span class="line">str.toUpperCase()</span><br><span class="line"><span class="string">&#x27;TODAY IS MONDAY&#x27;</span></span><br></pre></td></tr></table></figure>

<p><code>split()</code>æ¡ˆä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;Jerry | Tom | Jemmy | Marry&quot;</span></span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‡å®šåˆ†å‰²ç¬¦åˆ†å‰²</span></span><br><span class="line">name.split(<span class="string">&#x27;|&#x27;</span>)</span><br><span class="line">(<span class="number">4</span>)Â [<span class="string">&#x27;Jerry &#x27;</span>, <span class="string">&#x27; Tom &#x27;</span>, <span class="string">&#x27; Jemmy &#x27;</span>, <span class="string">&#x27; Marry&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æŒ‡å®šè·å–çš„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">name.split(<span class="string">&#x27;|&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">(<span class="number">2</span>)Â [<span class="string">&#x27;Jerry &#x27;</span>, <span class="string">&#x27; Tom &#x27;</span>]</span><br><span class="line">name.split(<span class="string">&#x27;|&#x27;</span>, <span class="number">20</span>)</span><br><span class="line">(<span class="number">4</span>)Â [<span class="string">&#x27;Jerry &#x27;</span>, <span class="string">&#x27; Tom &#x27;</span>, <span class="string">&#x27; Jemmy &#x27;</span>, <span class="string">&#x27; Marry&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p><code>concat()</code>æ¡ˆä¾‹:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">&quot;Hello everyone!&quot;</span></span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">&quot;My name is Tom!&quot;</span></span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‹¼æ¥str1å’Œstr2</span></span><br><span class="line">str1.concat(str2)</span><br><span class="line"><span class="string">&#x27;Hello everyone!My name is Tom!&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// éå­—ç¬¦ä¸²ç±»å‹ä¼šè‡ªåŠ¨è½¬æ¢åæ‹¼æ¥</span></span><br><span class="line"><span class="keyword">var</span> phoneNumber = <span class="number">12345678</span></span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">str1.concat(phoneNumber)</span><br><span class="line"><span class="string">&#x27;Hello everyone!12345678&#x27;</span></span><br></pre></td></tr></table></figure>



<h2 id="4-3-å¸ƒå°”å€¼-boolean"><a href="#4-3-å¸ƒå°”å€¼-boolean" class="headerlink" title="4.3 å¸ƒå°”å€¼(boolean)"></a>4.3 å¸ƒå°”å€¼(boolean)</h2><p>JSå¸ƒå°”å€¼çš„å®šä¹‰ï¼š</p>
<ul>
<li>åœ¨pythonä¸­å¸ƒå°”å€¼æ˜¯é¦–å­—æ¯å¤§å†™çš„<ul>
<li>True &#x2F; False</li>
</ul>
</li>
<li>ä½†æ˜¯åœ¨jsä¸­å¸ƒå°”å€¼æ˜¯å…¨å°å†™çš„<ul>
<li>true &#x2F; false</li>
</ul>
</li>
<li>å¸ƒå°”å€¼æ˜¯falseçš„æœ‰å“ªäº›<ul>
<li>ç©ºå­—ç¬¦ä¸²</li>
<li>0</li>
<li>null</li>
<li>undefined</li>
<li>NaN</li>
</ul>
</li>
</ul>
<p>æ¡ˆä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isFalse = <span class="literal">false</span></span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"><span class="keyword">var</span> isTrue = <span class="literal">true</span></span><br><span class="line"><span class="literal">undefined</span></span><br></pre></td></tr></table></figure>



<h2 id="4-4-nullä¸undefinedçš„åŒºåˆ«"><a href="#4-4-nullä¸undefinedçš„åŒºåˆ«" class="headerlink" title="4.4 nullä¸undefinedçš„åŒºåˆ«"></a>4.4 nullä¸undefinedçš„åŒºåˆ«</h2><p>null</p>
<p>â€‹	è¡¨ç¤ºå€¼ä¸ºç©º ä¸€èˆ¬éƒ½æ˜¯æŒ‡å®šæˆ–è€…æ¸…ç©ºä¸€ä¸ªå˜é‡æ—¶ä½¿ç”¨</p>
<p>å¦‚:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">name = <span class="string">&#x27;jason&#x27;</span></span><br><span class="line">name = <span class="literal">null</span></span><br></pre></td></tr></table></figure>

<p>undefined</p>
<p>â€‹	è¡¨ç¤ºå£°æ˜äº†ä¸€ä¸ªå˜é‡ ä½†æ˜¯æ²¡æœ‰åšåˆå§‹åŒ–æ“ä½œ(æ²¡æœ‰ç»™å€¼)</p>
<p>â€‹	å‡½æ•°æ²¡æœ‰æŒ‡å®šè¿”å›å€¼çš„æ—¶å€™ è¿”å›çš„ä¹Ÿæ˜¯undefined</p>
<h2 id="4-5-å¯¹è±¡-æ•°ç»„"><a href="#4-5-å¯¹è±¡-æ•°ç»„" class="headerlink" title="4.5 å¯¹è±¡(æ•°ç»„)"></a>4.5 å¯¹è±¡(æ•°ç»„)</h2><p>JSæ•°ç»„ç±»ä¼¼äºPythonä¸­çš„åˆ—è¡¨<code>[]</code>ï¼Œåœ¨JSä¸­<code>ä¸€åˆ‡çš†ä¸ºå¯¹è±¡</code></p>
<h3 id="4-5-1-æ•°ç»„çš„å®šä¹‰"><a href="#4-5-1-æ•°ç»„çš„å®šä¹‰" class="headerlink" title="4.5.1 æ•°ç»„çš„å®šä¹‰"></a>4.5.1 æ•°ç»„çš„å®šä¹‰</h3><p>è§æ¡ˆä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> list = [<span class="number">11</span>, <span class="string">&quot;abc&quot;</span>, <span class="number">33.44</span>, <span class="literal">false</span>]</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ•°ç»„å…ƒç´ </span></span><br><span class="line">list[<span class="number">3</span>]</span><br><span class="line"><span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»å‹æ˜¯`å¯¹è±¡`</span></span><br><span class="line"><span class="keyword">typeof</span>(list)</span><br><span class="line"><span class="string">&#x27;object&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-5-2-æ•°ç»„çš„å¸¸ç”¨æ–¹æ³•"><a href="#4-5-2-æ•°ç»„çš„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="4.5.2 æ•°ç»„çš„å¸¸ç”¨æ–¹æ³•"></a>4.5.2 æ•°ç»„çš„å¸¸ç”¨æ–¹æ³•</h3><p><code>length</code>è·å–æ•°ç»„é•¿åº¦</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> list = [<span class="number">11</span>, <span class="string">&quot;abc&quot;</span>, <span class="number">33.44</span>, <span class="literal">false</span>]</span><br><span class="line">list.length</span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>

<p><code>push()</code>è¿½åŠ å…ƒç´ åˆ°å°¾éƒ¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿½åŠ å…ƒç´ ï¼Œè¿”å›è¿½åŠ åçš„æ•°ç»„é•¿åº¦</span></span><br><span class="line">list.push(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="comment">// æŸ¥çœ‹æ•°ç»„å…ƒç´ </span></span><br><span class="line">list</span><br><span class="line">(<span class="number">5</span>)Â [<span class="number">11</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="number">33.44</span>, <span class="literal">false</span>, <span class="string">&#x27;Hello&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p><code>pop()</code>å¼¹å‡ºå°¾éƒ¨å…ƒç´ </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">list</span><br><span class="line">(<span class="number">5</span>)Â [<span class="number">11</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="number">33.44</span>, <span class="literal">false</span>, <span class="string">&#x27;Hello&#x27;</span>]</span><br><span class="line"><span class="comment">// å¼¹å‡ºå…ƒç´ ï¼ˆä»æœ€åä¸€ä¸ªå¼€å§‹ï¼‰</span></span><br><span class="line">list.pop()</span><br><span class="line"><span class="string">&#x27;Hello&#x27;</span></span><br><span class="line">list.pop()</span><br><span class="line"><span class="literal">false</span></span><br><span class="line">list.pop()</span><br><span class="line"><span class="number">33.44</span></span><br><span class="line">list</span><br><span class="line">(<span class="number">2</span>)Â [<span class="number">11</span>, <span class="string">&#x27;abc&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p><code>unshift()</code>æ•°ç»„å¤´éƒ¨æ’å…¥å…ƒç´ </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŸ¥çœ‹æ•°ç»„å…ƒç´ </span></span><br><span class="line">list</span><br><span class="line">(<span class="number">3</span>)Â [<span class="number">11</span>, <span class="number">11</span>, <span class="string">&#x27;abc&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤´éƒ¨æ’å…¥å…ƒç´ </span></span><br><span class="line">list.unshift(<span class="string">&quot;Good&quot;</span>)</span><br><span class="line"><span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å†æ¬¡æŸ¥çœ‹</span></span><br><span class="line">list</span><br><span class="line">(<span class="number">4</span>)Â [<span class="string">&#x27;Good&#x27;</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="string">&#x27;abc&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p><code>shift()</code>æ•°ç»„å¼¹å‡ºå¤´éƒ¨å…ƒç´ </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŸ¥çœ‹æ•°ç»„å…ƒç´ </span></span><br><span class="line">list</span><br><span class="line">(<span class="number">4</span>)Â [<span class="string">&#x27;Good&#x27;</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="string">&#x27;abc&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤å¤´éƒ¨å…ƒç´ </span></span><br><span class="line">list.shift()</span><br><span class="line"><span class="string">&#x27;Good&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹å¤´éƒ¨å…ƒç´ </span></span><br><span class="line">list</span><br><span class="line">(<span class="number">3</span>)Â [<span class="number">11</span>, <span class="number">11</span>, <span class="string">&#x27;abc&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p><code>slice()</code>æ•°ç»„åˆ‡å‰²</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŸ¥çœ‹æ•°ç»„å…ƒç´ </span></span><br><span class="line">list</span><br><span class="line">(<span class="number">4</span>)Â [<span class="number">11</span>, <span class="number">11</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="number">555</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ‡å‰²</span></span><br><span class="line">list.slice(<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line">(<span class="number">2</span>)Â [<span class="number">11</span>, <span class="string">&#x27;abc&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p><code>reverse()</code>æ•°ç»„åè½¬</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŸ¥çœ‹æ•°ç»„å…ƒç´ </span></span><br><span class="line">list</span><br><span class="line">(<span class="number">4</span>)Â [<span class="number">11</span>, <span class="number">11</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="number">555</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°ç»„åè½¬</span></span><br><span class="line">list.reverse()</span><br><span class="line">(<span class="number">4</span>)Â [<span class="number">555</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="number">11</span>, <span class="number">11</span>]</span><br></pre></td></tr></table></figure>

<p><code>join()</code>å°†<code>æ•°ç»„å…ƒç´ </code>è½¬æ¢ä¸º<code>å­—ç¬¦ä¸²</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŸ¥çœ‹æ•°ç»„å…ƒç´ </span></span><br><span class="line">list</span><br><span class="line">(<span class="number">4</span>)Â [<span class="number">555</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="number">11</span>, <span class="number">11</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼ˆå‚æ•°ä¸º`æ‹¼æ¥ç¬¦å·`ï¼‰</span></span><br><span class="line">list.join(<span class="string">&#x27;$&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;555$abc$11$11&#x27;</span></span><br></pre></td></tr></table></figure>

<p><code>concat()</code>æ‹¼æ¥æ•°ç»„</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŸ¥çœ‹æ•°ç»„å…ƒç´ </span></span><br><span class="line">list</span><br><span class="line">(<span class="number">4</span>)Â [<span class="number">555</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="number">11</span>, <span class="number">11</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‹¼æ¥å¦ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line">list.concat([<span class="string">&#x27;Duo&#x27;</span>, <span class="number">888</span>, <span class="string">&quot;hello&quot;</span>])</span><br><span class="line">(<span class="number">7</span>)Â [<span class="number">555</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="string">&#x27;Duo&#x27;</span>, <span class="number">888</span>, <span class="string">&#x27;hello&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥æ‹¼æ¥å¤šä¸ªæ•°ç»„</span></span><br><span class="line">list.concat([<span class="string">&#x27;Duo&#x27;</span>, <span class="number">888</span>, <span class="string">&quot;hello&quot;</span>], [<span class="number">666</span>, <span class="number">888</span>])</span><br><span class="line">(<span class="number">9</span>)Â [<span class="number">555</span>, <span class="string">&#x27;abc&#x27;</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="string">&#x27;Duo&#x27;</span>, <span class="number">888</span>, <span class="string">&#x27;hello&#x27;</span>, <span class="number">666</span>, <span class="number">888</span>]</span><br></pre></td></tr></table></figure>

<p><code>sort()</code>æ•°ç»„æ’åº</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> list2 = [<span class="number">666</span>, <span class="number">111</span>, <span class="number">222</span>, <span class="number">888</span>, <span class="number">999</span>]</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"><span class="comment">// æ•°ç»„æ’åº</span></span><br><span class="line">list2.sort()</span><br><span class="line">(<span class="number">5</span>)Â [<span class="number">111</span>, <span class="number">222</span>, <span class="number">666</span>, <span class="number">888</span>, <span class="number">999</span>]</span><br></pre></td></tr></table></figure>



<h3 id="4-5-3-ä¸‰ä¸ªæ¯”è¾ƒé‡è¦çš„æ–¹æ³•"><a href="#4-5-3-ä¸‰ä¸ªæ¯”è¾ƒé‡è¦çš„æ–¹æ³•" class="headerlink" title="4.5.3 ä¸‰ä¸ªæ¯”è¾ƒé‡è¦çš„æ–¹æ³•"></a>4.5.3 ä¸‰ä¸ªæ¯”è¾ƒé‡è¦çš„æ–¹æ³•</h3><p>1ï¼‰ <code>foreach()</code>éå†æ•°ç»„å…ƒç´ </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> list1 = [<span class="string">&quot;Changsha&quot;</span>, <span class="string">&quot;Beijing&quot;</span>, <span class="string">&quot;Shanghai&quot;</span>, <span class="string">&quot;Taiwan&quot;</span>]</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†æ•°ç»„ï¼ˆä¸€ä¸ªå‚æ•°ï¼šæ˜¾ç¤ºå€¼ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> list1 = [<span class="string">&quot;Changsha&quot;</span>, <span class="string">&quot;Beijing&quot;</span>, <span class="string">&quot;Shanghai&quot;</span>, <span class="string">&quot;Taiwan&quot;</span>]</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">list1.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;<span class="built_in">console</span>.log(value)&#125;)</span><br><span class="line"><span class="attr">VM942</span>:<span class="number">1</span> Changsha</span><br><span class="line"><span class="attr">VM942</span>:<span class="number">1</span> Beijing</span><br><span class="line"><span class="attr">VM942</span>:<span class="number">1</span> Shanghai</span><br><span class="line"><span class="attr">VM942</span>:<span class="number">1</span> Taiwan</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†æ•°ç»„ï¼ˆä¸¤ä¸ªå‚æ•°ï¼šæ˜¾ç¤ºå€¼å’Œä¸‹æ ‡ï¼‰</span></span><br><span class="line">list1.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value, index</span>)</span>&#123;<span class="built_in">console</span>.log(value, index)&#125;, list1)</span><br><span class="line"><span class="attr">VM541</span>:<span class="number">1</span> Changsha <span class="number">0</span></span><br><span class="line"><span class="attr">VM541</span>:<span class="number">1</span> Beijing <span class="number">1</span></span><br><span class="line"><span class="attr">VM541</span>:<span class="number">1</span> Shanghai <span class="number">2</span></span><br><span class="line"><span class="attr">VM541</span>:<span class="number">1</span> Taiwan <span class="number">3</span></span><br><span class="line">undefine</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†æ•°ç»„ï¼ˆä¸‰ä¸ªå‚æ•°ï¼šæ˜¾ç¤ºå€¼ã€ä¸‹æ ‡ã€æ•°æ®æ¥æºï¼‰</span></span><br><span class="line">list1.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, arr</span>)</span>&#123;<span class="built_in">console</span>.log(value, index, arr)&#125;)</span><br><span class="line"><span class="attr">VM1237</span>:<span class="number">1</span> Changsha <span class="number">0</span> (<span class="number">4</span>)Â [<span class="string">&#x27;Changsha&#x27;</span>, <span class="string">&#x27;Beijing&#x27;</span>, <span class="string">&#x27;Shanghai&#x27;</span>, <span class="string">&#x27;Taiwan&#x27;</span>]</span><br><span class="line"><span class="attr">VM1237</span>:<span class="number">1</span> Beijing <span class="number">1</span> (<span class="number">4</span>)Â [<span class="string">&#x27;Changsha&#x27;</span>, <span class="string">&#x27;Beijing&#x27;</span>, <span class="string">&#x27;Shanghai&#x27;</span>, <span class="string">&#x27;Taiwan&#x27;</span>]</span><br><span class="line"><span class="attr">VM1237</span>:<span class="number">1</span> Shanghai <span class="number">2</span> (<span class="number">4</span>)Â [<span class="string">&#x27;Changsha&#x27;</span>, <span class="string">&#x27;Beijing&#x27;</span>, <span class="string">&#x27;Shanghai&#x27;</span>, <span class="string">&#x27;Taiwan&#x27;</span>]</span><br><span class="line"><span class="attr">VM1237</span>:<span class="number">1</span> Taiwan <span class="number">3</span> (<span class="number">4</span>)Â [<span class="string">&#x27;Changsha&#x27;</span>, <span class="string">&#x27;Beijing&#x27;</span>, <span class="string">&#x27;Shanghai&#x27;</span>, <span class="string">&#x27;Taiwan&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>2ï¼‰ <code>splice()</code>æ›¿æ¢æ•°ç»„å…ƒç´ ï¼ˆ<code>å…ˆåˆ é™¤åæ·»åŠ </code>ï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> ll = [<span class="string">&quot;11&quot;</span>, <span class="string">&quot;22&quot;</span>, <span class="string">&quot;33&quot;</span>]</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»ä¸‹æ ‡0å¼€å§‹ï¼Œåˆ é™¤2ä¸ªå…ƒç´ </span></span><br><span class="line">ll.splice(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">(<span class="number">2</span>)Â [<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;22&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹æ•ˆæœ</span></span><br><span class="line">ll</span><br><span class="line">[<span class="string">&#x27;33&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’å…¥å…ƒç´ </span></span><br><span class="line">ll.push(<span class="string">&#x27;66&#x27;</span>)</span><br><span class="line"><span class="number">2</span></span><br><span class="line">ll.push(<span class="string">&#x27;88&#x27;</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line">ll.push(<span class="string">&#x27;99&#x27;</span>)</span><br><span class="line"><span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥çœ‹æ•°ç»„å…ƒç´ </span></span><br><span class="line">ll</span><br><span class="line">(<span class="number">4</span>)Â [<span class="string">&#x27;33&#x27;</span>, <span class="string">&#x27;66&#x27;</span>, <span class="string">&#x27;88&#x27;</span>, <span class="string">&#x27;99&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»ä¸‹æ ‡1å¼€å§‹ï¼Œåˆ é™¤2ä¸ªå…ƒç´ ï¼Œæ›¿æ¢ä¸º&#x27;9090&#x27;æ’å…¥</span></span><br><span class="line">ll.splice(<span class="number">1</span>, <span class="number">2</span>, <span class="number">9090</span>)</span><br><span class="line">(<span class="number">2</span>)Â [<span class="string">&#x27;66&#x27;</span>, <span class="string">&#x27;88&#x27;</span>]</span><br><span class="line">ll</span><br><span class="line">(<span class="number">3</span>)Â [<span class="string">&#x27;33&#x27;</span>, <span class="number">9090</span>, <span class="string">&#x27;99&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// åç»­è¿½åŠ å‚æ•°ä¸ºæ›¿æ¢åæ–°å¢çš„å…ƒç´ </span></span><br><span class="line"><span class="keyword">var</span> ll2 = [<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;33&#x27;</span>, <span class="string">&#x27;44&#x27;</span>]</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">ll2.splice(<span class="number">0</span>, <span class="number">2</span>, <span class="string">&#x27;Hello&#x27;</span>, <span class="string">&#x27;Man&#x27;</span>, <span class="string">&#x27;HAHA&#x27;</span>)</span><br><span class="line">(<span class="number">2</span>)Â [<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;22&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯è§åˆ é™¤çš„ä¸¤ä¸ªå…ƒç´ è¢«æ›¿æ¢äº†</span></span><br><span class="line">ll2</span><br><span class="line">(<span class="number">5</span>)Â [<span class="string">&#x27;Hello&#x27;</span>, <span class="string">&#x27;Man&#x27;</span>, <span class="string">&#x27;HAHA&#x27;</span>, <span class="string">&#x27;33&#x27;</span>, <span class="string">&#x27;44&#x27;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3ï¼‰<code>map()</code>éå†æ•°ç»„å…ƒç´ </p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æ•°ç»„</span></span><br><span class="line"><span class="keyword">var</span> ll = [<span class="string">&quot;11&quot;</span>, <span class="string">&quot;22&quot;</span>, <span class="string">&quot;33&quot;</span>]</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºæ•°ç»„å…ƒç´ ï¼ˆæ–¹æ³•å’ŒforEachç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥æœ€å¤šä¸‰ä¸ªå‚æ•°ï¼‰</span></span><br><span class="line">ll.map(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;<span class="built_in">console</span>.log(value)&#125;, ll)</span><br><span class="line"><span class="attr">VM2621</span>:<span class="number">1</span> <span class="number">11</span></span><br><span class="line"><span class="attr">VM2621</span>:<span class="number">1</span> <span class="number">22</span></span><br><span class="line"><span class="attr">VM2621</span>:<span class="number">1</span> <span class="number">33</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‰ä¸ªå‚æ•°è¾“å‡ºæ•°ç»„</span></span><br><span class="line">ll.map(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, aaa</span>)</span>&#123;<span class="built_in">console</span>.log(value, index, aaa)&#125;, ll)</span><br><span class="line"><span class="attr">VM3143</span>:<span class="number">1</span> <span class="number">11</span> <span class="number">0</span> (<span class="number">3</span>)Â [<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;33&#x27;</span>]</span><br><span class="line"><span class="attr">VM3143</span>:<span class="number">1</span> <span class="number">22</span> <span class="number">1</span> (<span class="number">3</span>)Â [<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;33&#x27;</span>]</span><br><span class="line"><span class="attr">VM3143</span>:<span class="number">1</span> <span class="number">33</span> <span class="number">2</span> (<span class="number">3</span>)Â [<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;33&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†æ•°ç»„æ•°æ®</span></span><br><span class="line">ll.map(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;<span class="keyword">return</span> value * <span class="number">2</span>&#125;, ll)</span><br><span class="line">(<span class="number">3</span>)Â [<span class="number">22</span>, <span class="number">44</span>, <span class="number">66</span>]</span><br></pre></td></tr></table></figure>



<h1 id="5-è¿ç®—ç¬¦"><a href="#5-è¿ç®—ç¬¦" class="headerlink" title="5 è¿ç®—ç¬¦"></a>5 è¿ç®—ç¬¦</h1><h2 id="5-1-ç®—æœ¯è¿ç®—ç¬¦"><a href="#5-1-ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="5.1 ç®—æœ¯è¿ç®—ç¬¦"></a>5.1 ç®—æœ¯è¿ç®—ç¬¦</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> res1 = x++;</span><br><span class="line"><span class="keyword">var</span> res2 = ++x;</span><br><span class="line">res1 <span class="number">10</span></span><br><span class="line">res2 <span class="number">12</span></span><br><span class="line">++è¡¨ç¤ºè‡ªå¢<span class="number">1</span> ç±»ä¼¼äº +=<span class="number">1</span></span><br><span class="line">åŠ å·åœ¨å‰å…ˆåŠ åèµ‹å€¼ åŠ å·åœ¨åå…ˆèµ‹å€¼ååŠ </span><br></pre></td></tr></table></figure>

<h2 id="5-2-æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#5-2-æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="5.2 æ¯”è¾ƒè¿ç®—ç¬¦"></a>5.2 æ¯”è¾ƒè¿ç®—ç¬¦</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> == <span class="string">&#x27;1&#x27;</span>  # å¼±ç­‰äº  å†…éƒ¨è‡ªåŠ¨è½¬æ¢æˆç›¸åŒçš„æ•°æ®ç±»å‹æ¯”è¾ƒäº†</span><br><span class="line"><span class="literal">true</span>  </span><br><span class="line"></span><br><span class="line"><span class="number">1</span> === <span class="string">&#x27;1&#x27;</span>  # å¼ºç­‰äº  å†…éƒ¨ä¸åšç±»å‹è½¬æ¢</span><br><span class="line"></span><br><span class="line"><span class="number">1</span> != <span class="string">&#x27;1&#x27;</span></span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="number">1</span> !== <span class="string">&#x27;2&#x27;</span></span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="5-3-é€»è¾‘è¿ç®—ç¬¦"><a href="#5-3-é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="5.3 é€»è¾‘è¿ç®—ç¬¦"></a>5.3 é€»è¾‘è¿ç®—ç¬¦</h2><p>â€ä¸€å®šè¦æ³¨æ„åˆ°åº•ä»€ä¹ˆæ—¶å€™è¿”å›çš„æ˜¯å¸ƒå°”å€¼ ä»€ä¹ˆæ˜¯è¿”å›çš„æ˜¯æ•°æ®â€œ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸¤ä¸ªéƒ½ä¸ºçœŸï¼Œè¿”å›æœ€åä¸€ä¸ªçœŸçš„å€¼</span></span><br><span class="line"><span class="number">5</span> &amp;&amp; <span class="string">&#x27;5&#x27;</span></span><br><span class="line"><span class="string">&#x27;5&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å·¦è¾¹ä¸ºå‡ï¼Œç»§ç»­å¾€åæŸ¥æ‰¾ä¸ºçœŸçš„å€¼ï¼Œå¹¶è¿”å›</span></span><br><span class="line"><span class="number">0</span> || <span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡åˆ°å‡ç›´æ¥è¿”å›å‡çš„å€¼ï¼Œ!5 = false</span></span><br><span class="line">!<span class="number">5</span> &amp;&amp; <span class="string">&#x27;5&#x27;</span></span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p><strong>é€»è¾‘è¿ç®—ç¬¦çš„è¿”å›å€¼é—®é¢˜</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"># &amp;&amp; ä¸”[è¿ç®—ç¬¦](https:<span class="comment">//so.csdn.net/so/search?q=è¿ç®—ç¬¦&amp;spm=1001.2101.3001.7020)(ä»å·¦åˆ°å³åªè¦æ‰¾åˆ°æ— æ³•é€šè¿‡çš„å€¼[false]å°±ç»“æŸï¼Œä¸å†æ£€æŸ¥åé¢çš„å€¼ï¼Œå¯ä»¥é€šè¿‡çš„å€¼[true]å°±ç»§ç»­å‘å³æ£€æŸ¥ç›´åˆ°æœ€åä¸€ä¸ª)</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">5</span> &amp;&amp; <span class="number">4</span>);<span class="comment">//å½“ç»“æœä¸ºçœŸæ—¶ï¼Œè¿”å›æœ€åä¸€ä¸ªä¸ºçœŸçš„å€¼4</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span> &amp;&amp; <span class="number">5</span>);<span class="comment">//å½“ç»“æœä¸ºçœŸæ—¶ï¼Œè¿”å›æœ€åä¸€ä¸ªä¸ºçœŸçš„å€¼5 </span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">5</span> &amp;&amp; <span class="number">4</span> &amp;&amp; <span class="number">6</span>);<span class="comment">//å½“ç»“æœä¸ºçœŸæ—¶ï¼Œå¤šä¸ªå€¼æ—¶è¿”å›æœ€åä¸€ä¸ªä¸ºçœŸçš„å€¼6</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span> &amp;&amp; <span class="number">0</span>);<span class="comment">//å½“ç»“æœä¸ºå‡æ—¶ï¼Œè¿”å›ç¬¬ä¸€ä¸ªä¸ºå‡çš„å€¼0</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">0</span> &amp;&amp; <span class="number">4</span>);<span class="comment">//å½“ç»“æœä¸ºå‡æ—¶ï¼Œè¿”å›ç¬¬ä¸€ä¸ªä¸ºå‡çš„å€¼0</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">4</span> &amp;&amp; <span class="number">0</span> &amp;&amp; <span class="literal">false</span>);<span class="comment">//å½“ç»“æœä¸ºå‡æ—¶ï¼Œå¤šä¸ªå€¼æ—¶è¿”å›ç¬¬ä¸€ä¸ªä¸ºå‡çš„å€¼0 </span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">false</span> &amp;&amp; <span class="number">0</span>);<span class="comment">//å½“ç»“æœä¸ºå‡æ—¶ï¼Œè¿”å›ç¬¬ä¸€ä¸ªä¸ºå‡çš„å€¼false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">0</span> &amp;&amp; <span class="literal">false</span>);<span class="comment">//å½“ç»“æœä¸ºå‡æ—¶ï¼Œè¿”å›ç¬¬ä¸€ä¸ªä¸ºå‡çš„å€¼0</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">false</span> &amp;&amp; <span class="number">0</span> &amp;&amp; <span class="literal">false</span>);<span class="comment">//å½“ç»“æœä¸ºå‡æ—¶ï¼Œå¤šä¸ªå€¼æ—¶è¿”å›ç¬¬ä¸€ä¸ªä¸ºå‡çš„å€¼false</span></span><br><span class="line"></span><br><span class="line"># || æˆ–è¿ç®—ç¬¦(ä»å·¦åˆ°å³åªè¦æ‰¾åˆ°å¯ä»¥é€šè¿‡çš„å€¼[<span class="literal">true</span>]å°±ç»“æŸï¼Œä¸å†æ£€æŸ¥åé¢çš„å€¼)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">0</span> || <span class="literal">false</span>);<span class="comment">//å½“ç»“æœä¸ºå‡æ—¶ï¼Œè¿”å›æœ€åä¸€ä¸ªä¸ºå‡çš„å€¼false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">false</span> || <span class="number">0</span>);<span class="comment">//å½“ç»“æœä¸ºå‡æ—¶ï¼Œè¿”å›æœ€åä¸€ä¸ªä¸ºå‡çš„å€¼0</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">false</span> || <span class="number">0</span> || <span class="literal">false</span>);<span class="comment">//å½“ç»“æœä¸ºå‡æ—¶ï¼Œè¿”å›æœ€åä¸€ä¸ªä¸ºå‡çš„å€¼false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span> || <span class="number">0</span>);<span class="comment">//å½“ç»“æœä¸ºçœŸæ—¶ï¼Œè¿”å›çœŸçš„å€¼2</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">0</span> || <span class="number">2</span>);<span class="comment">//å½“ç»“æœä¸ºçœŸæ—¶ï¼Œè¿”å›çœŸçš„å€¼2</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">0</span> || <span class="number">4</span> || <span class="number">3</span>);<span class="comment">//å½“ç»“æœä¸ºçœŸæ—¶ï¼Œå¤šä¸ªå€¼æ—¶è¿”å›ç¬¬ä¸€ä¸ªä¸ºçœŸçš„å€¼4</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">6</span> || <span class="number">7</span>);<span class="comment">//å½“ç»“æœä¸ºçœŸæ—¶ï¼Œè¿”å›ç¬¬ä¸€ä¸ªä¸ºçœŸçš„å€¼6</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">7</span> || <span class="number">6</span>);<span class="comment">//å½“ç»“æœä¸ºçœŸæ—¶ï¼Œè¿”å›ç¬¬ä¸€ä¸ªä¸ºçœŸçš„å€¼7</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span> || <span class="number">4</span> || <span class="number">3</span>);<span class="comment">//å½“ç»“æœä¸ºçœŸæ—¶ï¼Œå¤šä¸ªå€¼æ—¶è¿”å›ç¬¬ä¸€ä¸ªä¸ºçœŸçš„å€¼2</span></span><br></pre></td></tr></table></figure>

<h2 id="5-4-èµ‹å€¼è¿ç®—ç¬¦"><a href="#5-4-èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="5.4 èµ‹å€¼è¿ç®—ç¬¦"></a>5.4 èµ‹å€¼è¿ç®—ç¬¦</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">= += -= *= ....</span><br></pre></td></tr></table></figure>



<h1 id="6-æµç¨‹æ§åˆ¶"><a href="#6-æµç¨‹æ§åˆ¶" class="headerlink" title="6 æµç¨‹æ§åˆ¶"></a>6 æµç¨‹æ§åˆ¶</h1><h2 id="6-1-ifåˆ¤æ–­"><a href="#6-1-ifåˆ¤æ–­" class="headerlink" title="6.1 ifåˆ¤æ–­"></a>6.1 ifåˆ¤æ–­</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"># <span class="keyword">if</span>åˆ¤æ–­</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">28</span>;</span><br><span class="line"># <span class="keyword">if</span>(æ¡ä»¶)&#123;æ¡ä»¶æˆç«‹ä¹‹åæŒ‡å‘çš„ä»£ç å—&#125;</span><br><span class="line"><span class="keyword">if</span> (age&gt;<span class="number">18</span>)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æ¥å•Š æ¥å•Š&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># <span class="keyword">if</span>-<span class="keyword">else</span></span><br><span class="line"><span class="keyword">if</span> (age&gt;<span class="number">18</span>)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æ¥å•Š æ¥å•Š&#x27;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æ²¡é’± æ»šè›‹&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># <span class="keyword">if</span>-<span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">else</span></span><br><span class="line"><span class="keyword">if</span> (age&lt;<span class="number">18</span>)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;åŸ¹å…»ä¸€ä¸‹&quot;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(age&lt;<span class="number">24</span>)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;å°å§å§ä½ å¥½ æˆ‘æ˜¯ä½ çš„ç²‰ä¸&#x27;</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;ä½ æ˜¯ä¸ªå¥½äºº&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-2-switch-è¯­å¥"><a href="#6-2-switch-è¯­å¥" class="headerlink" title="6.2 switch è¯­å¥"></a>6.2 switch è¯­å¥</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">switch</span>(num)&#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="string">&#x27;å–é…’&#x27;</span>);</span><br><span class="line">  	<span class="keyword">break</span>;  # ä¸åŠ <span class="keyword">break</span> åŒ¹é…åˆ°ä¸€ä¸ªä¹‹å å°±ä¸€ç›´å¾€ä¸‹æ‰§è¡Œ</span><br><span class="line">  <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="string">&#x27;å”±æ­Œ&#x27;</span>);</span><br><span class="line">  	<span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="string">&#x27;æ´—è„š&#x27;</span>);</span><br><span class="line">  	<span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="string">&#x27;æŒ‰æ‘©&#x27;</span>);</span><br><span class="line">  	<span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="string">&#x27;è¥å…»å¿«çº¿&#x27;</span>);</span><br><span class="line">  	<span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="string">&#x27;è€æ¿æ…¢èµ° æ¬¢è¿ä¸‹æ¬¡å…‰ä¸´&#x27;</span>);</span><br><span class="line">  	<span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="string">&#x27;æ¡ä»¶éƒ½æ²¡æœ‰åŒ¹é…ä¸Š é»˜è®¤èµ°çš„æµç¨‹&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-3-forå¾ªç¯"><a href="#6-3-forå¾ªç¯" class="headerlink" title="6.3 forå¾ªç¯"></a>6.3 forå¾ªç¯</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"># æ‰“å°<span class="number">0</span>-<span class="number">9</span>æ•°å­—</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i)</span><br><span class="line">&#125;</span><br><span class="line"># é¢˜ç›®<span class="number">1</span>  å¾ªç¯æ‰“å°å‡ºæ•°ç»„é‡Œé¢çš„æ¯ä¸€ä¸ªå…ƒç´ </span><br><span class="line"><span class="keyword">var</span> l1 = [<span class="number">111</span>,<span class="number">222</span>,<span class="number">333</span>,<span class="number">444</span>,<span class="number">555</span>,<span class="number">666</span>]</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;l1.length;i++)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(l1[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-4-whileå¾ªç¯"><a href="#6-4-whileå¾ªç¯" class="headerlink" title="6.4 whileå¾ªç¯"></a>6.4 whileå¾ªç¯</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span>(i&lt;<span class="number">100</span>)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i)</span><br><span class="line">  i++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-5-ä¸‰å…ƒè¿ç®—ç¬¦"><a href="#6-5-ä¸‰å…ƒè¿ç®—ç¬¦" class="headerlink" title="6.5 ä¸‰å…ƒè¿ç®—ç¬¦"></a>6.5 ä¸‰å…ƒè¿ç®—ç¬¦</h2><p>ä¸‰å…ƒè¿ç®—ç¬¦ä¸è¦å†™çš„è¿‡äºå¤æ‚ </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"># pythonä¸­ä¸‰å…ƒè¿ç®—ç¬¦ res = <span class="number">1</span> <span class="keyword">if</span> <span class="number">1</span>&gt;<span class="number">2</span> <span class="keyword">else</span> <span class="number">3</span></span><br><span class="line"># JSä¸­ä¸‰å…ƒè¿ç®—  res = <span class="number">1</span> &gt; <span class="number">2</span> ? <span class="number">1</span> : <span class="number">3</span> </span><br><span class="line">æ¡ä»¶æˆç«‹å–é—®å¥½åé¢çš„<span class="number">1</span> ä¸æˆç«‹å–å†’å·åé¢çš„<span class="number">3</span></span><br><span class="line"><span class="keyword">var</span> res = <span class="number">2</span> &gt; <span class="number">5</span> ? <span class="number">8</span> : <span class="number">10</span> # <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> res = <span class="number">2</span> &gt; <span class="number">5</span> ? <span class="number">8</span> : ( <span class="number">8</span> &gt; <span class="number">5</span> ? <span class="number">666</span> : <span class="number">444</span> )  # <span class="number">666</span></span><br></pre></td></tr></table></figure>

<h2 id="6-6-å‡½æ•°"><a href="#6-6-å‡½æ•°" class="headerlink" title="6.6 å‡½æ•°"></a>6.6 å‡½æ•°</h2><h3 id="6-6-1-å‡½æ•°å®šä¹‰"><a href="#6-6-1-å‡½æ•°å®šä¹‰" class="headerlink" title="6.6.1 å‡½æ•°å®šä¹‰"></a>6.6.1 å‡½æ•°å®šä¹‰</h3><p>æ— å‚å‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line">func1()</span><br><span class="line"><span class="comment">// è¾“å‡º -- Hello</span></span><br></pre></td></tr></table></figure>

<p>æœ‰å‚å‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fcun2</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a + b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨å‡½æ•°</span></span><br><span class="line">fcun2(<span class="number">8</span>, <span class="number">99</span>)</span><br><span class="line"><span class="comment">// è¾“å‡º -- 107</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å°‘äº†å‚æ•°ä¸ä¼šæŠ¥é”™ï¼Œç¬¬äºŒä¸ªå‚æ•°è‡ªåŠ¨è¯†åˆ«ä¸º&quot;undefined&quot;</span></span><br><span class="line">fcun2(<span class="number">8</span>)</span><br><span class="line"><span class="comment">// è¾“å‡º -- NaN  // è¯†åˆ«ä¸º 8 + undefined æ‰€ä»¥æ˜¯ &quot;Not A Number&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤šäº†å‚æ•°ä¹Ÿä¸æŠ¥é”™ï¼Œä¼šè‡ªåŠ¨æŒ‰éœ€æ±‚å–</span></span><br><span class="line">fcun2(<span class="number">1</span>, <span class="number">3</span>, <span class="number">66</span>, <span class="number">77</span>, <span class="number">88</span>)</span><br><span class="line"><span class="comment">// è¾“å‡º -- 4</span></span><br></pre></td></tr></table></figure>

<h3 id="6-6-2-å…³é”®å­—arguments"><a href="#6-6-2-å…³é”®å­—arguments" class="headerlink" title="6.6.2 å…³é”®å­—arguments"></a>6.6.2 å…³é”®å­—<code>arguments</code></h3><p>ç”¨äºè·å–å‡½æ•°æ¥æ”¶åˆ°çš„æ‰€æœ‰å‚æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func3</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func3(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="attr">VM758</span>:<span class="number">2</span> Arguments(<span class="number">3</span>)Â [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="attr">callee</span>: Æ’, <span class="built_in">Symbol</span>(<span class="built_in">Symbol</span>.iterator): Æ’]</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ç”¨äºåˆ¤æ–­å‚æ•°çš„æ•°é‡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func2</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">arguments</span>.length&lt;<span class="number">2</span>)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;ä¼ å°‘äº†&#x27;</span>)</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">arguments</span>.length&gt;<span class="number">2</span>)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;ä¼ å¤šäº†&#x27;</span>)</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;æ­£å¸¸æ‰§è¡Œ&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-6-3-å‡½æ•°è¿”å›å€¼"><a href="#6-6-3-å‡½æ•°è¿”å›å€¼" class="headerlink" title="6.6.3 å‡½æ•°è¿”å›å€¼"></a>6.6.3 å‡½æ•°è¿”å›å€¼</h3><p>å‡½æ•°ä¸­ä½¿ç”¨<code>return</code>è¿”å›å€¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func4</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨å‡½æ•°</span></span><br><span class="line">res = func4(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºå€¼</span></span><br><span class="line">res</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>JSèƒ½ä¸èƒ½åƒPythonä¸€æ ·è¿”å›å¤šä¸ªå€¼ï¼Ÿ â€” <strong><font color=red>ä¸èƒ½</font></strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func3</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a,b,c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“è¿”å›å¤šä¸ªå€¼çš„æ—¶å€™ï¼Œ**åªèƒ½æ‹¿åˆ°æœ€åä¸€ä¸ªè¿”å›å€¼**</span></span><br><span class="line">res = func3(<span class="number">111</span>, <span class="number">222</span>, <span class="number">333</span>)</span><br><span class="line"><span class="number">333</span></span><br><span class="line"></span><br><span class="line">res</span><br><span class="line"><span class="number">333</span></span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•è¿”å›å¤šä¸ªå€¼å‘¢ï¼Ÿ â€”- å¯ä»¥ä½¿ç”¨<code>æ•°ç»„</code>çš„æ–¹å¼è¿”å›</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func3</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [a,b,c]</span><br><span class="line">&#125;</span><br><span class="line">res = func3(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">(<span class="number">3</span>)Â [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">res</span><br><span class="line">(<span class="number">3</span>)Â [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<h3 id="6-6-4-åŒ¿åå‡½æ•°"><a href="#6-6-4-åŒ¿åå‡½æ•°" class="headerlink" title="6.6.4 åŒ¿åå‡½æ•°"></a>6.6.4 åŒ¿åå‡½æ•°</h3><p>æ²¡æœ‰åå­—çš„å‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºåå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æˆ‘æ˜¯åŒ¿åå‡½æ•°&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨åŒ¿åå‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> res= <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æˆ‘æ˜¯åŒ¿åå‡½æ•°&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸å¸¦æ‹¬å·è¾“å‡º</span></span><br><span class="line">res</span><br><span class="line">Æ’ () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æˆ‘æ˜¯åŒ¿åå‡½æ•°&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¸¦æ‹¬å·è¾“å‡º</span></span><br><span class="line">res()</span><br><span class="line"><span class="attr">VM1565</span>:<span class="number">2</span> æˆ‘æ˜¯åŒ¿åå‡½æ•°</span><br></pre></td></tr></table></figure>

<h3 id="6-6-5-ç®­å¤´å‡½æ•°ï¼ˆäº†è§£ï¼‰"><a href="#6-6-5-ç®­å¤´å‡½æ•°ï¼ˆäº†è§£ï¼‰" class="headerlink" title="6.6.5 ç®­å¤´å‡½æ•°ï¼ˆäº†è§£ï¼‰"></a>6.6.5 ç®­å¤´å‡½æ•°ï¼ˆäº†è§£ï¼‰</h3><p>ä¸»è¦ç”¨æ¥å¤„ç†ç®€å•çš„ä¸šåŠ¡é€»è¾‘</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> func1 = <span class="function">(<span class="params">arg1, arg2</span>) =&gt;</span> arg1 + arg2;</span><br><span class="line"><span class="comment">// è°ƒç”¨</span></span><br><span class="line">res = func1(<span class="number">6</span>, <span class="number">8</span>)</span><br><span class="line"><span class="number">14</span></span><br></pre></td></tr></table></figure>

<p>ç®­å¤´å‡½æ•°æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> func1 = <span class="function">(<span class="params">arg1, arg2</span>) =&gt;</span> arg1 + arg2;</span><br><span class="line"><span class="comment">// ç›¸å½“äº</span></span><br><span class="line"><span class="keyword">var</span> func1 = <span class="function"><span class="keyword">function</span>(<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg1 + arg2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-6-7-å‡½æ•°çš„å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡"><a href="#6-6-7-å‡½æ•°çš„å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡" class="headerlink" title="6.6.7 å‡½æ•°çš„å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡"></a>6.6.7 å‡½æ•°çš„å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡</h3><p>å±€éƒ¨å˜é‡åœ¨å‡½æ•°å†…ç”Ÿæ•ˆï¼Œä¼˜å…ˆä½¿ç”¨å±€éƒ¨å˜é‡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·ŸpythonæŸ¥æ‰¾å˜é‡çš„é¡ºåºä¸€è‡´</span></span><br><span class="line"><span class="keyword">var</span> city = <span class="string">&quot;BeiJing&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> city = <span class="string">&quot;ShangHai&quot;</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> city = <span class="string">&quot;ShenZhen&quot;</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(city);</span><br><span class="line">  &#125;</span><br><span class="line">  inner();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f();  <span class="comment">//è¾“å‡º&quot;ShenZhen&quot;</span></span><br></pre></td></tr></table></figure>

<p>ç¦»å¼€å‡½æ•°ï¼Œå±€éƒ¨å˜é‡å°†å¤±æ•ˆï¼Œä¼˜å…ˆä½¿ç”¨å…¨å±€å˜é‡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> city = <span class="string">&quot;BeiJing&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(city);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> city = <span class="string">&quot;ShangHai&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> Bar;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ret = f();</span><br><span class="line">ret();  <span class="comment">// æ‰“å°ç»“æœæ˜¯ï¼Ÿ Beijing</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯å‡½æ•°å†…éƒ¨è¿”å›å‡½æ•°å‘¢ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> city = <span class="string">&quot;BeiJing&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> city = <span class="string">&quot;ShangHai&quot;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(city);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> inner;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> ret = f();</span><br><span class="line">ret();	<span class="comment">// è¾“å‡º&quot;ShangHai&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-7-è‡ªå®šä¹‰å¯¹è±¡"><a href="#6-7-è‡ªå®šä¹‰å¯¹è±¡" class="headerlink" title="6.7 è‡ªå®šä¹‰å¯¹è±¡"></a>6.7 è‡ªå®šä¹‰å¯¹è±¡</h2><h3 id="6-7-1-èŠ±æ‹¬å·çš„æ–¹å¼åˆ›å»º"><a href="#6-7-1-èŠ±æ‹¬å·çš„æ–¹å¼åˆ›å»º" class="headerlink" title="6.7.1 èŠ±æ‹¬å·çš„æ–¹å¼åˆ›å»º"></a>6.7.1 èŠ±æ‹¬å·çš„æ–¹å¼åˆ›å»º</h3><p>åˆ›å»º</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> d1 = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;Goosh&#x27;</span>, <span class="attr">age</span>:<span class="number">18</span>&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> d1)	<span class="comment">// è¾“å‡º object</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(d1[<span class="string">&#x27;name&#x27;</span>])	<span class="comment">// è¾“å‡º Goosh</span></span><br><span class="line"><span class="built_in">console</span>.log(d1[<span class="string">&#x27;age&#x27;</span>]) <span class="comment">// è¾“å‡º 18</span></span><br></pre></td></tr></table></figure>

<p>å¾ªç¯éå†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> d1) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i, d1[i])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line">name Goosh</span><br><span class="line">age <span class="number">18</span></span><br></pre></td></tr></table></figure>

<h3 id="6-7-2-å…³é”®å­—newæ–¹å¼åˆ›å»º"><a href="#6-7-2-å…³é”®å­—newæ–¹å¼åˆ›å»º" class="headerlink" title="6.7.2 å…³é”®å­—newæ–¹å¼åˆ›å»º"></a>6.7.2 å…³é”®å­—<code>new</code>æ–¹å¼åˆ›å»º</h3><p>åˆ›å»º</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> d2 = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">d2.name = <span class="string">&#x27;Goosh&#x27;</span></span><br><span class="line">d2.age = <span class="number">18</span></span><br></pre></td></tr></table></figure>

<p>å¾ªç¯éå†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// éå†</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">in</span> d2) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i, d2[i])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line">name Goosh</span><br><span class="line">age <span class="number">18</span></span><br></pre></td></tr></table></figure>



<h2 id="6-8-Dateå¯¹è±¡"><a href="#6-8-Dateå¯¹è±¡" class="headerlink" title="6.8 Dateå¯¹è±¡"></a>6.8 Dateå¯¹è±¡</h2><p>åˆ›å»ºDateå¯¹è±¡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> mydate = <span class="built_in">Date</span>()</span><br><span class="line"><span class="built_in">console</span>.log(mydate)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line">Tue Aug <span class="number">16</span> <span class="number">2022</span> <span class="number">09</span>:<span class="number">44</span>:<span class="number">40</span> GMT+<span class="number">0800</span> (ä¸­å›½æ ‡å‡†æ—¶é—´)</span><br></pre></td></tr></table></figure>

<p>è‡ªå®šä¹‰Dateçš„æ–¹å¼ä¸€</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> mydate2 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">&#x27;2200/1/1 11:11:11&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(mydate2.toLocaleString())</span><br><span class="line"><span class="comment">//è¾“å‡º</span></span><br><span class="line"><span class="number">2200</span>/<span class="number">1</span>/<span class="number">1</span> <span class="number">11</span>:<span class="number">11</span>:<span class="number">11</span></span><br></pre></td></tr></table></figure>

<p>è‡ªå®šä¹‰Dateçš„æ–¹å¼äºŒ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> mydate3 = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2211</span>, <span class="number">11</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>)</span><br><span class="line"><span class="built_in">console</span>.log(mydate3)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line">Wed Dec <span class="number">11</span> <span class="number">2211</span> <span class="number">22</span>:<span class="number">22</span>:<span class="number">22</span> GMT+<span class="number">0800</span> (ä¸­å›½æ ‡å‡†æ—¶é—´)</span><br></pre></td></tr></table></figure>

<h3 id="6-8-1-æ—¶é—´å¯¹è±¡çš„å…·ä½“æ–¹æ³•"><a href="#6-8-1-æ—¶é—´å¯¹è±¡çš„å…·ä½“æ–¹æ³•" class="headerlink" title="6.8.1 æ—¶é—´å¯¹è±¡çš„å…·ä½“æ–¹æ³•"></a>6.8.1 æ—¶é—´å¯¹è±¡çš„å…·ä½“æ–¹æ³•</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> d6 = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">d6.getDate()  è·å–æ—¥</span><br><span class="line">d6.getDay()		è·å–æ˜ŸæœŸ</span><br><span class="line">d6.getMonth()		è·å–æœˆä»½(<span class="number">0</span>-<span class="number">11</span>)</span><br><span class="line">d6.getFullYear()		è·å–å®Œæ•´çš„å¹´ä»½</span><br><span class="line">d6.getHours()			è·å–å°æ—¶</span><br><span class="line">d6.getMinutes()		è·å–åˆ†é’Ÿ</span><br><span class="line">d6.getSeconds()		è·å–ç§’</span><br><span class="line">d6.getMilliseconds()  è·å–æ¯«ç§’</span><br><span class="line">d6.getTime()					æ—¶é—´æˆ³</span><br></pre></td></tr></table></figure>

<h2 id="6-9-JSONå¯¹è±¡"><a href="#6-9-JSONå¯¹è±¡" class="headerlink" title="6.9 JSONå¯¹è±¡"></a>6.9 JSONå¯¹è±¡</h2><p>ç”¨äº<code>åºåˆ—åŒ–</code>å’Œ<code>ååºåˆ—åŒ–</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> d7 = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;Goosh&#x27;</span>, <span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åºåˆ—åŒ–</span></span><br><span class="line"><span class="keyword">let</span> res7 = <span class="built_in">JSON</span>.stringify(d7)</span><br><span class="line"><span class="built_in">console</span>.log(res7)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ååºåˆ—åŒ–</span></span><br><span class="line"><span class="keyword">let</span> d8 = <span class="built_in">JSON</span>.parse(res7)</span><br><span class="line"><span class="built_in">console</span>.log(d8)</span><br></pre></td></tr></table></figure>

<h2 id="6-10-RegExpå¯¹è±¡ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰"><a href="#6-10-RegExpå¯¹è±¡ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰" class="headerlink" title="6.10 RegExpå¯¹è±¡ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰"></a>6.10 RegExpå¯¹è±¡ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰</h2><h3 id="6-10-1-ä½¿ç”¨æ­£åˆ™çš„ä¸¤ç§æ–¹å¼"><a href="#6-10-1-ä½¿ç”¨æ­£åˆ™çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="6.10.1 ä½¿ç”¨æ­£åˆ™çš„ä¸¤ç§æ–¹å¼"></a>6.10.1 ä½¿ç”¨æ­£åˆ™çš„ä¸¤ç§æ–¹å¼</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç¬¬ä¸€ç§æ–¹å¼</span></span><br><span class="line"><span class="keyword">let</span> reg1 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&#x27;^[a-zA-Z][d-zD-Z0-9]&#123;5,11&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒç§æ–¹å¼ï¼ˆæ¨èï¼‰</span></span><br><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/^[a-zA-Z][d-zD-Z0-9]&#123;5,11&#125;/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒ¹é…å†…å®¹</span></span><br><span class="line">res1 = reg1.test(<span class="string">&#x27;abcc123321&#x27;</span>)</span><br><span class="line">res2 = reg2.test(<span class="string">&#x27;76ehk88&#x27;</span>)</span><br><span class="line">res3 = reg1.test(<span class="string">&#x27;a76ehk88&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º</span></span><br><span class="line"><span class="built_in">console</span>.log(res1, res2, res3) <span class="comment">// è¾“å‡º false false true</span></span><br></pre></td></tr></table></figure>

<h3 id="6-10-2matchå•é¡¹åŒ¹é…"><a href="#6-10-2matchå•é¡¹åŒ¹é…" class="headerlink" title="6.10.2matchå•é¡¹åŒ¹é…"></a>6.10.2<code>match</code>å•é¡¹åŒ¹é…</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> ss = <span class="string">&#x27;ds222 fdsgfd dsb dsb&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// éå…¨å±€åŒ¹é…</span></span><br><span class="line">res1 = ss.match(<span class="regexp">/s/</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res1)</span><br><span class="line"><span class="comment">// è¾“å‡ºå†…å®¹</span></span><br><span class="line">(<span class="number">1</span>) [<span class="string">&#x27;s&#x27;</span>, <span class="attr">index</span>: <span class="number">1</span>, <span class="attr">input</span>: <span class="string">&#x27;ds222 fdsgfd dsb dsb&#x27;</span>, <span class="attr">groups</span>: <span class="literal">undefined</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€åŒ¹é…</span></span><br><span class="line">res1 = ss.match(<span class="regexp">/s/g</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res1)</span><br><span class="line"><span class="comment">// è¾“å‡ºå†…å®¹</span></span><br><span class="line">(<span class="number">4</span>) [<span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;s&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="6-10-3-å…¨å±€åŒ¹é…çš„åæ§½ç‚¹"><a href="#6-10-3-å…¨å±€åŒ¹é…çš„åæ§½ç‚¹" class="headerlink" title="6.10.3 å…¨å±€åŒ¹é…çš„åæ§½ç‚¹"></a>6.10.3 å…¨å±€åŒ¹é…çš„åæ§½ç‚¹</h3><p>åæ§½ç‚¹ä¸€ï¼šLastIndexå¯¼è‡´åŒ¹é…å¼‚å¸¸</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> reg3 = <span class="regexp">/^[a-zA-Z][a-zA-Z0-9]&#123;5,11&#125;/g</span></span><br><span class="line">reg2.test(<span class="string">&#x27;egondsb&#x27;</span>)</span><br><span class="line"></span><br><span class="line">reg3.test(<span class="string">&#x27;egondsb&#x27;</span>)  # å…¨å±€æ¨¡å¼æœ‰ä¸€ä¸ªlastIndexå±æ€§</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">reg3.test(<span class="string">&#x27;egondsb&#x27;</span>)</span><br><span class="line"><span class="literal">false</span></span><br><span class="line">reg3.test(<span class="string">&#x27;egondsb&#x27;</span>)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">reg3.test(<span class="string">&#x27;egondsb&#x27;</span>)</span><br><span class="line"><span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªç°è±¡ï¼Ÿ</span></span><br><span class="line">reg3.lastIndex	<span class="comment">// å½“å‰ä¸‹æ ‡åœ¨0</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line">reg3.test(<span class="string">&#x27;egondsb&#x27;</span>)	<span class="comment">// æ­£å¸¸åŒ¹é…</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line">reg3.lastIndex	<span class="comment">// åŒ¹é…å®Œä¸‹æ ‡æŒªåˆ°äº†7çš„ä½ç½®</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line">reg3.test(<span class="string">&#x27;egondsb&#x27;</span>)	<span class="comment">// å†æ¬¡åŒ¹é…å¼‚å¸¸</span></span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>åæ§½ç‚¹äºŒï¼šä»€ä¹ˆéƒ½ä¸ä¼ ä¹Ÿèƒ½åŒ¹é…æˆåŠŸ</p>
<p>â€‹	ä»€ä¹ˆéƒ½ä¸ä¼  é»˜è®¤ä¼ çš„æ˜¯undefined, è€Œä¸”æ˜¯å­—ç¬¦ä¸²ï¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> reg4 = <span class="regexp">/^[a-zA-Z][a-zA-Z0-9]&#123;5,11&#125;/</span></span><br><span class="line">reg4.test()</span><br><span class="line"></span><br><span class="line">reg4.test()  <span class="comment">// ä»€ä¹ˆéƒ½ä¸ä¼  é»˜è®¤ä¼ çš„æ˜¯undefined, å±…ç„¶èƒ½åŒ¹é…æˆåŠŸã€‚ã€‚ã€‚</span></span><br><span class="line"><span class="literal">true</span></span><br><span class="line">reg4.test()</span><br><span class="line"><span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// éªŒè¯æ˜¯Undefined</span></span><br><span class="line"><span class="keyword">let</span> reg5 = <span class="regexp">/undefined/</span></span><br><span class="line"><span class="built_in">console</span>.log(reg4.test(<span class="string">&#x27;Goosh&#x27;</span>))	<span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg4.test())	<span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg4.test(<span class="string">&#x27;undefined&#x27;</span>))	<span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h2 id="6-11-Mathå¯¹è±¡"><a href="#6-11-Mathå¯¹è±¡" class="headerlink" title="6.11 Mathå¯¹è±¡"></a>6.11 Mathå¯¹è±¡</h2><p>å¸¸ç”¨æ•°å­¦å¤„ç†å¯¹è±¡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">abs(x)      è¿”å›æ•°çš„ç»å¯¹å€¼ã€‚</span><br><span class="line">exp(x)      è¿”å› e çš„æŒ‡æ•°ã€‚</span><br><span class="line">floor(x)    å¯¹æ•°è¿›è¡Œä¸‹èˆå…¥ã€‚</span><br><span class="line">log(x)      è¿”å›æ•°çš„è‡ªç„¶å¯¹æ•°ï¼ˆåº•ä¸ºeï¼‰ã€‚</span><br><span class="line">max(x,y)    è¿”å› x å’Œ y ä¸­çš„æœ€é«˜å€¼ã€‚</span><br><span class="line">min(x,y)    è¿”å› x å’Œ y ä¸­çš„æœ€ä½å€¼ã€‚</span><br><span class="line">pow(x,y)    è¿”å› x çš„ y æ¬¡å¹‚ã€‚</span><br><span class="line">random()    è¿”å› <span class="number">0</span> ~ <span class="number">1</span> ä¹‹é—´çš„éšæœºæ•°ã€‚</span><br><span class="line">round(x)    æŠŠæ•°å››èˆäº”å…¥ä¸ºæœ€æ¥è¿‘çš„æ•´æ•°ã€‚</span><br><span class="line">sin(x)      è¿”å›æ•°çš„æ­£å¼¦ã€‚</span><br><span class="line">sqrt(x)     è¿”å›æ•°çš„å¹³æ–¹æ ¹ã€‚</span><br><span class="line">tan(x)      è¿”å›è§’çš„æ­£åˆ‡ã€‚</span><br></pre></td></tr></table></figure>













]]></content>
      <categories>
        <category>Python</category>
        <category>å‰ç«¯åŸºç¡€</category>
      </categories>
  </entry>
  <entry>
    <title>Day55-JavaScript-02</title>
    <url>/2022/08/17/03_Python/02_%E5%89%8D%E7%AB%AF/day55%E7%AC%94%E8%AE%B0-JS-02/</url>
    <content><![CDATA[<p>â€œç¬¬54å¤©JavaScriptï¼ˆ02ï¼‰å­¦ä¹ ç¬”è®°â€</p>
<h1 id="1-BOMæ“ä½œ"><a href="#1-BOMæ“ä½œ" class="headerlink" title="1 BOMæ“ä½œ"></a>1 BOMæ“ä½œ</h1><p>BOMå…¨ç§°<strong>Browser Object Model</strong>ï¼Œè¯‘ä¸º<strong>æµè§ˆå™¨å¯¹è±¡æ¨¡å‹</strong>ï¼Œä¸»è¦ç”¨äºæ“ä½œæµè§ˆå™¨ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ“ä½œæµè§ˆå™¨å¼€æ‰“æŒ‡å®šç½‘é¡µ</li>
<li>æµè§ˆå™¨è·³è½¬ä¸‹ä¸€é¡µ&#x2F;è¿”å›ä¸Šä¸€é¡µ</li>
<li>è®¾ç½®æµè§ˆå™¨çª—å£å¤§å°</li>
</ul>
<h2 id="1-1-windowå¯¹è±¡"><a href="#1-1-windowå¯¹è±¡" class="headerlink" title="1.1 windowå¯¹è±¡"></a>1.1 windowå¯¹è±¡</h2><p>windowå¯¹è±¡æŒ‡ä»£çš„å°±æ˜¯æµè§ˆå™¨çª—å£</p>
<p>æ¡ˆä¾‹ â€“ æ‰“å¼€ç½‘é¡µï¼Œå¹¶æŒ‡å®šçª—å£å¤§å°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.open(<span class="string">&#x27;https://www.baidu.com&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;height=400px,width=400px,top=400px,left=400px&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–°å»ºçª—å£æ‰“å¼€é¡µé¢ ç¬¬äºŒä¸ªå‚æ•°å†™ç©ºå³å¯ ç¬¬ä¸‰ä¸ªå‚æ•°å†™æ–°å»ºçš„çª—å£çš„å¤§å°å’Œä½ç½®</span></span><br><span class="line"><span class="comment">// æ‰©å±•çˆ¶å­é¡µé¢é€šä¿¡window.opener()  äº†è§£</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="/../../../img/image-20220817112220408.png" alt="image-20220817112220408"></p>
<p>æ¡ˆä¾‹ â€“ å…³é—­ç½‘é¡µ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.close()</span><br></pre></td></tr></table></figure>

<h2 id="1-2-navigatorå¯¹è±¡"><a href="#1-2-navigatorå¯¹è±¡" class="headerlink" title="1.2 navigatorå¯¹è±¡"></a>1.2 navigatorå¯¹è±¡</h2><p>è·å–æµè§ˆå™¨ä¿¡æ¯</p>
<p>æ¡ˆä¾‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.navigator.appName</span><br><span class="line"><span class="string">&#x27;Netscape&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.navigator.appVersion</span><br><span class="line"><span class="string">&#x27;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/5....</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">window.navigator.userAgent</span></span><br><span class="line"><span class="string">&#x27;</span>Mozilla/<span class="number">5.0</span> (Windows NT <span class="number">10.0</span>; Win64; x64) AppleWebKit/<span class="number">537.36</span> (KHTML, like Gecko) Chrome/<span class="number">104.0</span><span class="number">.0</span><span class="number">.0</span> Safari/<span class="number">537.36</span><span class="string">&#x27;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// å¦‚æœæ˜¯windowçš„å­å¯¹è±¡ï¼Œé‚£ä¹ˆwindowå¯ä»¥çœç•¥ä¸å†™ï¼Œå¦‚</span></span><br><span class="line"><span class="string">navigator.platform</span></span><br><span class="line"><span class="string">&#x27;</span>Win32<span class="string">&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="1-3-historyå¯¹è±¡"><a href="#1-3-historyå¯¹è±¡" class="headerlink" title="1.3 historyå¯¹è±¡"></a>1.3 historyå¯¹è±¡</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.history.back()  <span class="comment">// å›é€€åˆ°ä¸Šä¸€é¡µ</span></span><br><span class="line"><span class="built_in">window</span>.history.forward()  <span class="comment">// å‰è¿›åˆ°ä¸‹ä¸€é¡µ</span></span><br><span class="line"># å¯¹åº”çš„å°±æ˜¯ä½ æµè§ˆå™¨å·¦ä¸Šæ–¹çš„ä¸¤ä¸ªçš„ç®­å¤´</span><br></pre></td></tr></table></figure>

<h2 id="1-4-localtionå¯¹è±¡"><a href="#1-4-localtionå¯¹è±¡" class="headerlink" title="1.4 localtionå¯¹è±¡"></a>1.4 localtionå¯¹è±¡</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–å½“å‰é¡µé¢çš„url </span></span><br><span class="line"><span class="built_in">window</span>.location.href</span><br><span class="line"><span class="string">&#x27;https://www.baidu.com/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·³è½¬åˆ°æŒ‡å®šçš„url</span></span><br><span class="line"><span class="built_in">window</span>.location.href = <span class="string">&#x27;https://www.qq.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡è½½åˆ·æ–°é¡µé¢</span></span><br><span class="line"><span class="built_in">window</span>.location.reload()</span><br></pre></td></tr></table></figure>

<h2 id="1-5-å¼¹å‡ºæ¡†"><a href="#1-5-å¼¹å‡ºæ¡†" class="headerlink" title="1.5 å¼¹å‡ºæ¡†"></a>1.5 å¼¹å‡ºæ¡†</h2><p>å¼¹å‡ºæ¡†åˆ†ä¸ºï¼šè­¦å‘Šæ¡†ã€ç¡®è®¤æ¡†ã€æç¤ºæ¡†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è­¦å‘Šæ¡†</span></span><br><span class="line">alert(<span class="string">&#x27;ä½ ä¸è¦è¿‡æ¥å•Šï¼ï¼ï¼&#x27;</span>)</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¡®è®¤æ¡†</span></span><br><span class="line">confirm(<span class="string">&#x27;ä½ ç¡®å®šçœŸçš„è¦è¿™ä¹ˆåšå—?èƒ½ä¸èƒ½æœ‰å…¶ä»–æ–¹å¼èƒ½å¤Ÿæ»¡è¶³ä½ ...&#x27;</span>)</span><br><span class="line"><span class="literal">false</span></span><br><span class="line">confirm(<span class="string">&#x27;ä½ ç¡®å®šçœŸçš„è¦è¿™ä¹ˆåšå—?èƒ½ä¸èƒ½æœ‰å…¶ä»–æ–¹å¼èƒ½å¤Ÿæ»¡è¶³ä½ ...&#x27;</span>)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æç¤ºæ¡† -- è¾“å…¥åç‚¹å‡»ç¡®è®¤ï¼Œå†…å®¹å°†è¿”å›</span></span><br><span class="line">prompt(<span class="string">&#x27;è¿™æ˜¯è¾“å…¥æ¡†çš„åç§°&#x27;</span>, <span class="string">&#x27;è¿™æ˜¯è¾“å…¥æ¡†çš„é»˜è®¤å†…å®¹&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;ä½ è¿‡æ¥å•Šï¼&#x27;</span> </span><br></pre></td></tr></table></figure>

<h2 id="1-6-è®¡æ—¶å™¨ç›¸å…³"><a href="#1-6-è®¡æ—¶å™¨ç›¸å…³" class="headerlink" title="1.6 è®¡æ—¶å™¨ç›¸å…³"></a>1.6 è®¡æ—¶å™¨ç›¸å…³</h2><p>åˆ›å»ºå®šæ—¶ä»»åŠ¡â€“éš”å¤šä¹…æ‰§è¡Œ<code>Timeout</code></p>
<p>æ¡ˆä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå®šæ—¶ä»»åŠ¡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="number">123</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯«ç§’ä¸ºå•ä½ï¼Œ3ç§’åè‡ªåŠ¨æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">let</span> t = <span class="built_in">setTimeout</span>(func1, <span class="number">3000</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment">// å–æ¶ˆå®šæ—¶ä»»åŠ¡</span></span><br><span class="line"><span class="built_in">clearTimeout</span>(t) </span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºå¾ªç¯å®šæ—¶ä»»åŠ¡â€“æ¯éš”å¤šä¹…æ‰§è¡Œä¸€æ¬¡<code>Interval</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºå®šæ—¶ä»»åŠ¡</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="number">456</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ¯3ç§’æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    <span class="keyword">let</span> t = <span class="built_in">setInterval</span>(func2, <span class="number">3000</span>) </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// æ¸…é™¤å®šæ—¶å™¨</span></span><br><span class="line">        <span class="built_in">clearInterval</span>(t) </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 9ç§’ä¹‹ååœæ­¢å¾ªç¯</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(inner, <span class="number">9000</span>) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨æ–¹æ³•æ‰§è¡Œ</span></span><br><span class="line">show()</span><br></pre></td></tr></table></figure>



<h1 id="2-DOMæ“ä½œ"><a href="#2-DOMæ“ä½œ" class="headerlink" title="2 DOMæ“ä½œ"></a>2 DOMæ“ä½œ</h1><p>DOMå…¨ç§°<strong>Document Object Model</strong>ï¼Œè¯‘ä¸º<strong>æ–‡æ¡£å¯¹è±¡æ¨¡å‹</strong>ï¼Œä¸»è¦ç”¨äºæ“ä½œç½‘é¡µå†…å®¹ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ“ä½œHTMLæ·»åŠ æ ‡ç­¾</li>
<li>æ“ä½œCSSæ·»åŠ &#x2F;ç§»é™¤æ•ˆæœ</li>
</ul>
<h2 id="2-1-æŸ¥æ‰¾æ ‡ç­¾"><a href="#2-1-æŸ¥æ‰¾æ ‡ç­¾" class="headerlink" title="2.1 æŸ¥æ‰¾æ ‡ç­¾"></a>2.1 æŸ¥æ‰¾æ ‡ç­¾</h2><h3 id="2-1-1-ç›´æ¥æŸ¥æ‰¾"><a href="#2-1-1-ç›´æ¥æŸ¥æ‰¾" class="headerlink" title="2.1.1 ç›´æ¥æŸ¥æ‰¾"></a>2.1.1 ç›´æ¥æŸ¥æ‰¾</h3><p>é€šè¿‡IDã€Classã€æ ‡ç­¾åç›´æ¥æŸ¥æ‰¾æ ‡ç­¾</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>DIV</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span>DIV-DIV</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>DIV-DIV-DIV</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span>ä¸åšå¤§å“¥å¥½å¤šå¹´<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// é€šè¿‡IDè·å¾—æ ‡ç­¾</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> d1Ele = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;d1&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(d1Ele)</span></span><br><span class="line"><span class="javascript">        <span class="comment">// é€šè¿‡Classè·å¾—æ ‡ç­¾</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;c1&#x27;</span>))</span></span><br><span class="line"><span class="javascript">        <span class="comment">// é€šè¿‡æ ‡ç­¾åè·å¾—æ ‡ç­¾</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;p&#x27;</span>))</span></span><br><span class="line"><span class="javascript">        <span class="comment">// å¦‚æœæœ‰å¤šä¸ªç»“æœï¼Œéœ€è¦æŒ‡å®šä¸‹æ ‡</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;div&#x27;</span>)[<span class="number">2</span>])</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-1-2-é—´æ¥æŸ¥æ‰¾"><a href="#2-1-2-é—´æ¥æŸ¥æ‰¾" class="headerlink" title="2.1.2 é—´æ¥æŸ¥æ‰¾"></a>2.1.2 é—´æ¥æŸ¥æ‰¾</h3><p>é€šè¿‡å·²æ‰¾åˆ°çš„æ ‡ç­¾ï¼Œé—´æ¥æŸ¥æ‰¾æ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€šè¿‡ç›´æ¥æŸ¥æ‰¾å…ˆæ‰¾åˆ°ä¸€ä¸ªæ ‡ç­¾</span></span><br><span class="line"><span class="keyword">let</span> d1Ele = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;d1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ ‡ç­¾çš„çˆ¶æ ‡ç­¾</span></span><br><span class="line">d1Ele.parentElement</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ ‡ç­¾çš„çˆ·çˆ·æ ‡ç­¾</span></span><br><span class="line">d1Ele.parentElement.parentElement</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ ‡ç­¾çš„æ‰€æœ‰å­æ ‡ç­¾</span></span><br><span class="line">d1Ele.children</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æŒ‡å®šå­æ ‡ç­¾</span></span><br><span class="line">d1Ele.childern[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ ‡ç­¾çš„ç¬¬ä¸€ä¸ªå­æ ‡ç­¾</span></span><br><span class="line">d1Ele.firstChild</span><br><span class="line"><span class="string">&quot;DIV-DIV &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ ‡ç­¾çš„æœ€åä¸€ä¸ªå­æ ‡ç­¾</span></span><br><span class="line">d1Ele.lastChild</span><br><span class="line"><span class="string">&quot;DIV-DIV-DIV &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ ‡ç­¾åŒçº§åˆ«ä¸‹é¢ç¬¬ä¸€ä¸ª</span></span><br><span class="line">d1Ele.nextElementSibling</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ ‡ç­¾åŒçº§åˆ«ä¸Šé¢ç¬¬ä¸€ä¸ª</span></span><br><span class="line">d1Ele.previousElementSibling</span><br></pre></td></tr></table></figure>

<h2 id="2-2-èŠ‚ç‚¹æ“ä½œ"><a href="#2-2-èŠ‚ç‚¹æ“ä½œ" class="headerlink" title="2.2 èŠ‚ç‚¹æ“ä½œ"></a>2.2 èŠ‚ç‚¹æ“ä½œ</h2><h3 id="2-2-1-æ¡ˆä¾‹ä¸€"><a href="#2-2-1-æ¡ˆä¾‹ä¸€" class="headerlink" title="2.2.1 æ¡ˆä¾‹ä¸€"></a>2.2.1 æ¡ˆä¾‹ä¸€</h3><p>é€šè¿‡DOMåŠ¨æ€åˆ›å»ºimgæ ‡ç­¾ï¼Œå¹¶ä¸”ç»™imgæ ‡ç­¾æ·»åŠ å±æ€§ï¼Œæœ€åå°†æ ‡ç­¾æ·»åŠ åˆ°æ–‡æœ¬ä¸­</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>DIV</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span>DIV-DIV</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>DIV-DIV-DIV</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d2&quot;</span>&gt;</span>ä¸åšå¤§å“¥å¥½å¤šå¹´<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// åˆ›å»ºimgæ ‡ç­¾</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> imgEle = <span class="built_in">document</span>.createElement(<span class="string">&#x27;img&#x27;</span>)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// è®¾ç½®imgæ ‡ç­¾å±æ€§</span></span></span><br><span class="line"><span class="javascript">        imgEle.src = <span class="string">&quot;111.png&quot;</span></span></span><br><span class="line"><span class="javascript">        imgEle.title = <span class="string">&quot;é£è·ƒé»„æ²³ç¬¬ä¸€äºº&quot;</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// è®¾ç½®è‡ªå®šä¹‰å±æ€§deæ–¹å¼ä¸€</span></span></span><br><span class="line"><span class="javascript">        imgEle.username = <span class="string">&#x27;Goosh&#x27;</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// è®¾ç½®è‡ªå®šä¹‰å±æ€§deæ–¹å¼äºŒ</span></span></span><br><span class="line"><span class="javascript">        imgEle.setAttribute(<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;Goosh&#x27;</span>)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// å°†imgæ ‡ç­¾æ·»åŠ åˆ°d2ä¸­</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> d2Ele = <span class="built_in">document</span>.getElementById(<span class="string">&quot;d2&quot;</span>)</span></span><br><span class="line"><span class="javascript">        d2Ele.appendChild(imgEle)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220817161226379.png" alt="image-20220817161226379"></p>
<h3 id="2-2-2-æ¡ˆä¾‹äºŒ"><a href="#2-2-2-æ¡ˆä¾‹äºŒ" class="headerlink" title="2.2.2 æ¡ˆä¾‹äºŒ"></a>2.2.2 æ¡ˆä¾‹äºŒ</h3><p>åˆ›å»º<code>a</code>æ ‡ç­¾ï¼Œè®¾ç½®å±æ€§ï¼Œè®¾ç½®æ–‡æœ¬ï¼Œ</p>
<p>æ·»åŠ åˆ°<font color=red><strong>æŒ‡å®š[å­æ ‡ç­¾]ä¹‹å‰</strong></font></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span>ç¬¬ä¸€å±‚</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d2&quot;</span>&gt;</span>ç¬¬äºŒå±‚<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    </span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="comment">// åˆ›å»ºaæ ‡ç­¾</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">let</span> aEle = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        aEle.href = <span class="string">&quot;https://www.baidu.com&quot;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        aEle.innerText = <span class="string">&#x27;ç‚¹æˆ‘æœ‰ä½ å¥½çœ‹ï¼Œå˜¿å˜¿å˜¿&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        </span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="comment">// æ’åˆ°d1çš„é‡Œé¢ï¼Œd2ä¹‹å‰</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">let</span> d1Ele = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;d1&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">let</span> d2Ele = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;d2&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        d1Ele.insertBefore(aEle, d2Ele)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/../../../img/image-20220817164119646.png" alt="image-20220817164119646"></p>
<h3 id="2-2-3-é¢å¤–è¡¥å……"><a href="#2-2-3-é¢å¤–è¡¥å……" class="headerlink" title="2.2.3 é¢å¤–è¡¥å……"></a>2.2.3 é¢å¤–è¡¥å……</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">é¢å¤–è¡¥å……</span></span><br><span class="line"><span class="string">	appendChild()</span></span><br><span class="line"><span class="string">		removeChild()</span></span><br><span class="line"><span class="string">		replaceChild()</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">	setAttribute()  è®¾ç½®å±æ€§</span></span><br><span class="line"><span class="string">		getAttribute()  è·å–å±æ€§</span></span><br><span class="line"><span class="string">		removeAttribute()  ç§»é™¤å±æ€§</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>InnerTextå’ŒInnerHtmlçš„åŒºåˆ«</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">divEle.innerText  # è·å–æ ‡ç­¾å†…éƒ¨æ‰€æœ‰çš„æ–‡æœ¬</span><br><span class="line"><span class="string">&quot;div ç‚¹æˆ‘æœ‰ä½ å¥½çœ‹!</span></span><br><span class="line"><span class="string">div&gt;p</span></span><br><span class="line"><span class="string">div&gt;span&quot;</span></span><br><span class="line"></span><br><span class="line">divEle.innerHTML  # å†…éƒ¨æ–‡æœ¬å’Œæ ‡ç­¾éƒ½æ‹¿åˆ°</span><br><span class="line"><span class="string">&quot;div</span></span><br><span class="line"><span class="string">        &lt;a href=&quot;</span>https:<span class="comment">//www.mzitu.com/&quot;&gt;ç‚¹æˆ‘æœ‰ä½ å¥½çœ‹!&lt;/a&gt;&lt;p id=&quot;d2&quot;&gt;div&amp;gt;p&lt;/p&gt;</span></span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>div<span class="symbol">&amp;gt;</span>span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">    <span class="string">&quot;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">divEle.innerText = &#x27;heiheihei&#x27;</span></span><br><span class="line"><span class="string">&quot;</span>heiheihei<span class="string">&quot;</span></span><br><span class="line"><span class="string">divEle.innerHTML = &#x27;hahahaha&#x27;</span></span><br><span class="line"><span class="string">&quot;</span>hahahaha<span class="string">&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">divEle.innerText = &#x27;&lt;h1&gt;heiheihei&lt;/h1&gt;&#x27;  # ä¸è¯†åˆ«htmlæ ‡ç­¾</span></span><br><span class="line"><span class="string">&quot;</span>&lt;h1&gt;heiheihei&lt;/h1&gt;<span class="string">&quot;</span></span><br><span class="line"><span class="string">divEle.innerHTML = &#x27;&lt;h1&gt;hahahaha&lt;/h1&gt;&#x27;  # è¯†åˆ«htmlæ ‡ç­¾</span></span><br><span class="line"><span class="string">&quot;</span>&lt;h1&gt;hahahaha&lt;/h1&gt;<span class="string">&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="3-è·å–å€¼çš„æ“ä½œ"><a href="#3-è·å–å€¼çš„æ“ä½œ" class="headerlink" title="3 è·å–å€¼çš„æ“ä½œ"></a>3 è·å–å€¼çš„æ“ä½œ</h1><p>è·å–æ ‡ç­¾å†…éƒ¨å±æ€§çš„æ•°æ®</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æˆ‘æ˜¯D1&quot;</span>&gt;</span>ç¬¬ä¸€å±‚</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æˆ‘æ˜¯D2&quot;</span> <span class="attr">desc</span>=<span class="string">&quot;ä»Šå¹´18å²&quot;</span>&gt;</span>ç¬¬äºŒå±‚<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    </span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="comment">// è·å–æ ‡ç­¾d1çš„åºå·1å±æ€§çš„å€¼</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">var</span> d1Ele = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;d1&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">console</span>.log(d1Ele.attributes[<span class="number">1</span>].value)	<span class="comment">// è¾“å‡º -- æˆ‘æ˜¯01</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">		</span></span></span><br><span class="line"><span class="javascript"><span class="xml">		<span class="comment">// è·å–æ ‡ç­¾d2çš„åºå·2å±æ€§çš„å€¼</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">var</span> d2Ele = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;d2&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">console</span>.log(d2Ele.attributes[<span class="number">2</span>].value)	<span class="comment">// è¾“å‡º -- ä»Šå¹´18å²</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>è·å–è¾“å…¥æ¡†ä¸­çš„æ•°æ®</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=&quot;&quot;&gt;</span><br><span class="line">        &lt;div&gt;è´¦å·ï¼š&lt;input type=&quot;text&quot; id=&quot;input01&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div&gt;æ–‡ä»¶ï¼š&lt;input type=&quot;file&quot; id=&quot;input02&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        let input01Ele = document.getElementById(&#x27;input01&#x27;)</span><br><span class="line">        let input02Ele = document.getElementById(&#x27;input02&#x27;)</span><br><span class="line">        </span><br><span class="line">        // è·å–æ•°æ®</span><br><span class="line">        input01Ele.value</span><br><span class="line">		input02Ele.value</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/../../../img/image-20220818095441409.png" alt="image-20220818095441409"></p>
<h1 id="4-æ“ä½œClasså’ŒCSS"><a href="#4-æ“ä½œClasså’ŒCSS" class="headerlink" title="4 æ“ä½œClasså’ŒCSS"></a>4 æ“ä½œClasså’ŒCSS</h1><p>æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span></span><br><span class="line"><span class="css">        <span class="selector-id">#d1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#d2</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">border-radius</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.bg_red</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.bg_green</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: green;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.bg_orange</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: darkorange;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;c1 bg_red bg_green&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;c2 bg_red bg_orange&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é¡µé¢æ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220818101241668.png" alt="image-20220818101241668"></p>
<h2 id="4-1-Classæ“ä½œ"><a href="#4-1-Classæ“ä½œ" class="headerlink" title="4.1 Classæ“ä½œ"></a>4.1 Classæ“ä½œ</h2><p><strong>è·å–</strong>æ ‡ç­¾çš„classå±æ€§</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–d1æ ‡ç­¾ï¼ˆåº•å±‚ç»¿è‰²æ ‡ç­¾ï¼‰</span></span><br><span class="line"><span class="keyword">let</span> divEle = <span class="built_in">document</span>.getElementById(<span class="string">&quot;d1&quot;</span>)</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–d1æ ‡ç­¾çš„æ‰€æœ‰class</span></span><br><span class="line">divEle.classList</span><br><span class="line">DOMTokenList(<span class="number">3</span>)Â [<span class="string">&#x27;c1&#x27;</span>, <span class="string">&#x27;bg_red&#x27;</span>, <span class="string">&#x27;bg_green&#x27;</span>, <span class="attr">value</span>: <span class="string">&#x27;c1 bg_red bg_green&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p><strong>æ·»åŠ &#x2F;ç§»é™¤</strong>æ ‡ç­¾çš„classå±æ€§</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç§»é™¤&quot;bg_red&quot;class</span></span><br><span class="line">divEle.classList.remove(<span class="string">&#x27;bg_red&#x27;</span>)</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ &quot;bg_red&quot;class</span></span><br><span class="line">divEle.classList.add(<span class="string">&#x27;bg_red&#x27;</span>)</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»é™¤&quot;bg_green&quot;class</span></span><br><span class="line">divEle.classList.remove(<span class="string">&#x27;bg_green&#x27;</span>)</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å†æ·»åŠ &quot;bg_green&quot;class</span></span><br><span class="line">divEle.classList.add(<span class="string">&#x27;bg_green&#x27;</span>)</span><br><span class="line"><span class="literal">undefined</span></span><br></pre></td></tr></table></figure>

<p><strong>æŸ¥è¯¢</strong>æ ‡ç­¾æ˜¯å¦åŒ…å«æŒ‡å®šçš„classå±æ€§</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">divEle.classList.contains(<span class="string">&#x27;bg_green&#x27;</span>)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">divEle.classList.remove(<span class="string">&#x27;bg_green&#x27;</span>)</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">divEle.classList.contains(<span class="string">&#x27;bg_green&#x27;</span>)</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p><strong>toggle</strong>æœ‰åˆ™åˆ é™¤ï¼Œæ— åˆ™æ·»åŠ </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">divEle.classList.toggle(<span class="string">&#x27;bg_green&#x27;</span>)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">divEle.classList.toggle(<span class="string">&#x27;bg_green&#x27;</span>)</span><br><span class="line"><span class="literal">false</span></span><br><span class="line">divEle.classList.toggle(<span class="string">&#x27;bg_green&#x27;</span>)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">divEle.classList.toggle(<span class="string">&#x27;bg_green&#x27;</span>)</span><br><span class="line"><span class="literal">false</span></span><br><span class="line">divEle.classList.toggle(<span class="string">&#x27;bg_green&#x27;</span>)</span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="4-2-CSSæ“ä½œ"><a href="#4-2-CSSæ“ä½œ" class="headerlink" title="4.2 CSSæ“ä½œ"></a>4.2 CSSæ“ä½œ</h2><p>ä»¥4.1çš„é¡µé¢ä¸ºæ¡ˆä¾‹ï¼Œæ“ä½œdiv(d1)çš„css</p>
<p>é€šè¿‡<code>style</code>å¯ä»¥ç›´æ¥å¯¹åº”çš„å±æ€§</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// èƒŒæ™¯è‰²æ”¹ä¸ºè“è‰²</span></span><br><span class="line">divEle.style.backgroundColor=<span class="string">&#x27;blue&#x27;</span></span><br><span class="line"><span class="string">&#x27;blue&#x27;</span></span><br><span class="line"><span class="comment">// åœ†è§’20px</span></span><br><span class="line">divEle.style.borderRadius=<span class="string">&#x27;20px&#x27;</span></span><br><span class="line"><span class="string">&#x27;20px&#x27;</span></span><br><span class="line"><span class="comment">// è¾¹æ¡†è®¾ç½®</span></span><br><span class="line">divEle.style.border=<span class="string">&#x27;3px solid red&#x27;</span></span><br><span class="line"><span class="string">&#x27;3px solid red&#x27;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="/../../../img/image-20220818102533004.png" alt="image-20220818102533004"></p>
<h1 id="5-äº‹ä»¶"><a href="#5-äº‹ä»¶" class="headerlink" title="5 äº‹ä»¶(*)"></a>5 äº‹ä»¶(*)</h1><p>åˆ«å¬ç€è¿™åå­—å°±è·‘è·¯äº†ï¼Œå®é™…ä¸Šå°±æ˜¯æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶</p>
<p>æˆ‘ä»¬çš„æ¡ˆä¾‹htmlé¡µé¢ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn01&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç‚¹æˆ‘æœ‰ä½ å¥½åº·&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><font color=red><strong>åœ¨JSä¸­ç»‘å®šäº‹ä»¶æœ‰ä¸¤ç§æ–¹å¼</strong></font></p>
<p>ç¬¬ä¸€ç§æ–¹å¼â€“è¡Œå†…ç»‘å®šï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn01&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç‚¹æˆ‘æœ‰ä½ å¥½åº·&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;func1()&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">func1</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            alert(<span class="string">&quot;å˜å­å·ç‹—ï¼&quot;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§æ–¹å¼â€“é€šè¿‡IDç»‘å®šï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn01&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç‚¹æˆ‘æœ‰ä½ å¥½åº·&quot;</span>&quot;&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> btnEle = <span class="built_in">document</span>.getElementById(<span class="string">&quot;btn01&quot;</span>)</span></span><br><span class="line"><span class="javascript">        btnEle.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            alert(<span class="string">&quot;æ½˜å˜ä¹‹äº¤&quot;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="/../../../img/image-20220818104606375.png" alt="image-20220818104606375"></p>
<h1 id="6-JSä»£ç ä½ç½®"><a href="#6-JSä»£ç ä½ç½®" class="headerlink" title="6 JSä»£ç ä½ç½®"></a>6 JSä»£ç ä½ç½®</h1><p>JSä»£ç ä¸€èˆ¬æ”¾åœ¨bodyçš„æœ€ä¸‹æ–¹ï¼Œå¦‚æœåœ¨å‰é¢ï¼Œå°†å‡ºç°â€œXXXæœªå®šä¹‰â€çš„é—®é¢˜</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>HTMLä¼˜å…ˆå†™<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// æ”¾è¿™é‡Œï¼</span></span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥ä½¿ç”¨onload</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"># ç­‰å¾…æµè§ˆå™¨çª—å£åŠ è½½å®Œæ¯•ä¹‹åå†æ‰§è¡Œä»£ç </span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// ç¬¬ä¸€ç§ç»‘å®šäº‹ä»¶çš„æ–¹å¼</span></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">func1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                alert(<span class="number">111</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ç¬¬äºŒç§</span></span><br><span class="line">            <span class="keyword">let</span> btnEle = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;d1&#x27;</span>);</span><br><span class="line">            btnEle.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                alert(<span class="number">222</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h1 id="7-åŸç”ŸJSäº‹ä»¶ç»‘å®š"><a href="#7-åŸç”ŸJSäº‹ä»¶ç»‘å®š" class="headerlink" title="7 åŸç”ŸJSäº‹ä»¶ç»‘å®š"></a>7 åŸç”ŸJSäº‹ä»¶ç»‘å®š</h1><p>é€šè¿‡å‡ ä¸ªæ¡ˆä¾‹å­¦ä¹ </p>
<h2 id="7-1-å¼€å…³ç¯æ¡ˆä¾‹"><a href="#7-1-å¼€å…³ç¯æ¡ˆä¾‹" class="headerlink" title="7.1 å¼€å…³ç¯æ¡ˆä¾‹"></a>7.1 å¼€å…³ç¯æ¡ˆä¾‹</h2><p>ç‚¹å‡»æŒ‰é’®ï¼Œdivæ–¹å—åœ¨â€œçº¢è‰²â€å’Œç»¿è‰²ä¹‹é—´åˆ‡æ¢</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.bg_red</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.bg_green</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: green;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.c1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;c1 bg_red bg_green&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;d2&quot;</span>&gt;</span>å˜è‰²<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> btnEle = <span class="built_in">document</span>.getElementById(<span class="string">&quot;d2&quot;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> divEle = <span class="built_in">document</span>.getElementById(<span class="string">&quot;d1&quot;</span>)</span></span><br><span class="line"><span class="javascript">        btnEle.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// åŠ¨æ€ä¿®æ”¹divç±»çš„å±æ€§</span></span></span><br><span class="line"><span class="javascript">            divEle.classList.toggle(<span class="string">&#x27;bg_green&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220822161548595.png" alt="image-20220822161548595"></p>
<p>ç‚¹å‡»å˜è‰²æŒ‰é’®åï¼š</p>
<p><img src="/../../../img/image-20220822161608377.png" alt="image-20220822161608377"></p>
<h2 id="7-2-inputæ¡†è·å–ç„¦ç‚¹-x2F-å¤±å»ç„¦ç‚¹"><a href="#7-2-inputæ¡†è·å–ç„¦ç‚¹-x2F-å¤±å»ç„¦ç‚¹" class="headerlink" title="7.2 inputæ¡†è·å–ç„¦ç‚¹&#x2F;å¤±å»ç„¦ç‚¹"></a>7.2 inputæ¡†è·å–ç„¦ç‚¹&#x2F;å¤±å»ç„¦ç‚¹</h2><p>æ–°äº‹ä»¶<code>onfocus</code>å’Œ<code>onblur</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ¥çœ‹çœ‹å˜›~&quot;</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> iEle = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;d1&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="comment">// è·å–ç„¦ç‚¹äº‹ä»¶</span></span></span><br><span class="line"><span class="javascript">        iEle.onfocus = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// å°†inputæ¡†ä¸­çš„å€¼å»æ‰</span></span></span><br><span class="line"><span class="javascript">            iEle.value = <span class="string">&#x27;å“å‘€~é¼ æ ‡ç‚¹åˆ°æˆ‘äº†&#x27;</span></span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// å¤±å»ç„¦ç‚¹äº‹ä»¶</span></span></span><br><span class="line"><span class="javascript">        iEle.onblur = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            iEle.value = <span class="string">&#x27;å®Œäº‹èµ°äºº&#x27;</span></span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220822163319837.png" alt="image-20220822163319837"></p>
<p>é¼ æ ‡ç‚¹å‡»ä¸Šå»ï¼š</p>
<p><img src="/../../../img/image-20220822163338421.png" alt="image-20220822163338421"></p>
<p>é¼ æ ‡ç§»å¼€ï¼š</p>
<p><img src="/../../../img/image-20220822163352708.png" alt="image-20220822163352708"></p>
<h2 id="7-3-å®æ—¶å±•ç¤ºå½“å‰æ—¶é—´"><a href="#7-3-å®æ—¶å±•ç¤ºå½“å‰æ—¶é—´" class="headerlink" title="7.3 å®æ—¶å±•ç¤ºå½“å‰æ—¶é—´"></a>7.3 å®æ—¶å±•ç¤ºå½“å‰æ—¶é—´</h2><p>ç‚¹å‡»â€œStartâ€æŒ‰é’®ï¼Œå®æ—¶åˆ·æ–°æ˜¾ç¤ºå½“å‰æ—¶é—´ï¼ˆ1sä¸€æ¬¡ï¼‰ï¼Œç‚¹å‡»â€Endâ€æŒ‰é’®åœæ­¢</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#d1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æˆ‘è¿™æ˜¾ç¤ºå½“å‰æ—¶é—´&quot;</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;d2&quot;</span>&gt;</span>Start<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;d3&quot;</span>&gt;</span>End<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> iEle = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;d1&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> btnStartEle = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;d2&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> btnEndEle = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;d3&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        </span></span><br><span class="line"><span class="javascript">        <span class="comment">// å®šä¹‰æ ‡è¯†ï¼Œç”¨äºæ ‡ç¤ºå¼€å§‹å’Œåœæ­¢</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> flag = <span class="literal">null</span> </span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// æ˜¾ç¤ºæ—¶é—´çš„æ—¶é—´</span></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">showtime</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// åˆ›å»ºæ—¶é—´å¯¹è±¡ï¼Œè·å–å½“å‰æ—¶é—´</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> currentTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span></span><br><span class="line"><span class="javascript">            <span class="comment">// å°†å½“å‰æ—¶é—´æ˜¾ç¤ºåˆ°inputæ¡†ä¸­</span></span></span><br><span class="line"><span class="javascript">            iEle.value = currentTime.toLocaleString()</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// StartæŒ‰é’®ç»‘å®šäº‹ä»¶</span></span></span><br><span class="line"><span class="javascript">        btnStartEle.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(showtime())</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (!flag) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// 1ç§’æ˜¾ç¤ºä¸€æ¬¡å½“å‰æ—¶é—´</span></span></span><br><span class="line"><span class="javascript">                t = <span class="built_in">setInterval</span>(showtime, <span class="number">1000</span>)</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// EndæŒ‰é’®ç»‘å®šäº‹ä»¶</span></span></span><br><span class="line"><span class="javascript">        btnEndEle.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// åœæ­¢å¾ªç¯</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">clearInterval</span>(t)</span></span><br><span class="line"><span class="javascript">            <span class="comment">// å°†æ ‡å¿—è®¾ä¸ºnull</span></span></span><br><span class="line"><span class="javascript">            flag = <span class="literal">null</span></span></span><br><span class="line"><span class="javascript">            iEle.value = <span class="string">&quot;è®¡æ—¶åœæ­¢&quot;</span></span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220822165219698.png" alt="image-20220822165219698"></p>
<p>ç‚¹å‡»â€œStartâ€åï¼Œæ˜¾ç¤ºæ—¶é—´ï¼Œä¸€ç§’åˆ·æ–°ä¸€æ¬¡</p>
<p><img src="/../../../img/image-20220822165240697.png" alt="image-20220822165240697"></p>
<p>ç‚¹å‡»â€œEndâ€æŒ‰é’®åï¼š</p>
<p><img src="/../../../img/image-20220822165308453.png" alt="image-20220822165308453"></p>
<h2 id="7-4-çœå¸‚è”åŠ¨"><a href="#7-4-çœå¸‚è”åŠ¨" class="headerlink" title="7.4 çœå¸‚è”åŠ¨"></a>7.4 çœå¸‚è”åŠ¨</h2><p>ä¸‹æ‹‰æ¡†é€‰æ‹©â€œçœâ€ï¼Œå±•ç¤ºç›¸åº”çš„â€œå¸‚åŒºâ€</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- åˆ›å»ºä¸¤ä¸ªé€‰æ‹©æ¡† --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="comment">&lt;!-- æ·»åŠ é»˜è®¤é€‰é¡¹ --&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">seleted</span>=<span class="string">&quot;disabled&quot;</span>&gt;</span>--è¯·é€‰æ‹©--<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;d2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="comment">// è·å–æ ‡ç­¾</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">let</span> d1Ele = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;d1&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">let</span> d2Ele = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;d2&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="comment">// æ·»åŠ æ¨¡æ‹Ÿæ•°æ®</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        data = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="string">&quot;æ²³åŒ—&quot;</span>:[<span class="string">&quot;å»ŠåŠ&quot;</span>, <span class="string">&quot;é‚¯éƒ¸&quot;</span>, <span class="string">&quot;å”å±±&quot;</span>],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="string">&quot;åŒ—äº¬&quot;</span>:[<span class="string">&quot;æœé˜³åŒº&quot;</span>, <span class="string">&quot;æµ·æ·€åŒº&quot;</span>, <span class="string">&quot;æ˜Œå¹³åŒº&quot;</span>],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="string">&quot;æ¹–å—&quot;</span>:[<span class="string">&quot;é•¿æ²™å¸‚&quot;</span>, <span class="string">&quot;ç›Šé˜³å¸‚&quot;</span>, <span class="string">&quot;å¸¸å¾·å¸‚&quot;</span>],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="string">&quot;å¹¿ä¸œ&quot;</span>:[<span class="string">&quot;æ·±åœ³å¸‚&quot;</span>, <span class="string">&quot;å¹¿å·å¸‚&quot;</span>, <span class="string">&quot;ä½›å±±å¸‚&quot;</span>]</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="comment">// æ ‡ç­¾æ·»åŠ æ•°æ®</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> data) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="comment">// å°†çœä¿¡æ¯ä½œä¸ºä¸€ä¸ªoptionæ ‡ç­¾,æ’åˆ°d1ä¸­</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="comment">// åˆ›å»ºæ ‡ç­¾</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">let</span> opEle = <span class="built_in">document</span>.createElement(<span class="string">&#x27;option&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="comment">// è®¾ç½®æ ‡ç­¾çš„innerText</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            opEle.innerText = key</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="comment">// è®¾ç½®æ ‡ç­¾çš„value</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            opEle.value = key</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="comment">// å°†optionæ ‡ç­¾è¿½åŠ åˆ°d1ä¸­</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            d1Ele.appendChild(opEle)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="comment">// é€‰æ‹©æ¡†æ–‡æœ¬åŸŸå˜åŒ–äº‹ä»¶</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        d1Ele.onchange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="comment">// è·å–é€‰æ‹©çš„çœ</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">let</span> curPro = d1Ele.value</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="comment">// è·å–å¯¹åº”çš„å¸‚åŒºä¿¡æ¯</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">let</span> curCityList = data[curPro]</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="comment">// æ¸…ç©ºd2ä¸­çš„æ‰€æœ‰option</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            d2Ele.innerHTML = <span class="string">&quot;&quot;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="comment">// è‡ªå·±åŠ ä¸€ä¸ªè¯·é€‰æ‹©</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">let</span> ss = <span class="string">&quot;&lt;option disabled selected&gt;è¯·é€‰æ‹©&lt;/option&gt;&quot;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            d2Ele.innerHTML = ss</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="comment">// for å¾ªç¯æ‰€æœ‰çš„å¸‚,æ¸²æŸ“åˆ°ç¬¬äºŒä¸ªselect(d2)ä¸­</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; curCityList.length; i++) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="keyword">let</span> curCity = curCityList[i]</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="comment">// åˆ›å»ºoptionæ ‡ç­¾</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="keyword">let</span> cityEle = <span class="built_in">document</span>.createElement(<span class="string">&#x27;option&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="comment">// æ ‡ç­¾æ·»åŠ value</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">                cityEle.value = curCity</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="comment">// æ ‡ç­¾æ·»åŠ å†…å®¹</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">                cityEle.innerText = curCity</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="comment">// d2è¿½åŠ æ ‡ç­¾</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">                d2Ele.appendChild(cityEle)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p>å¯ä»¥é€‰æ‹©è®¾å®šçš„çœ</p>
<p><img src="/../../../img/image-20220823142032372.png" alt="image-20220823142032372"></p>
<p>é€šè¿‡çœï¼Œæ˜¾ç¤ºå¯¹åº”çš„å¸‚åŒº</p>
<p><img src="/../../../img/image-20220823142041796.png" alt="image-20220823142041796"></p>
<p>æ¢ä¸€ä¸ªï¼Œä¹Ÿæ˜¾ç¤ºæ­£å¸¸</p>
<p><img src="/../../../img/image-20220823142051735.png" alt="image-20220823142051735"></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>å‰ç«¯åŸºç¡€</category>
      </categories>
  </entry>
  <entry>
    <title>Day56-JQuery-01</title>
    <url>/2022/08/22/03_Python/02_%E5%89%8D%E7%AB%AF/day56%E7%AC%94%E8%AE%B0-JQuery-01/</url>
    <content><![CDATA[<p>â€œç¬¬56å¤©JQueryï¼ˆ01ï¼‰å­¦ä¹ ç¬”è®°â€</p>
<h1 id="1-JQueryä»‹ç»"><a href="#1-JQueryä»‹ç»" class="headerlink" title="1 JQueryä»‹ç»"></a>1 JQueryä»‹ç»</h1><h2 id="1-1-ç®€ä»‹"><a href="#1-1-ç®€ä»‹" class="headerlink" title="1.1 ç®€ä»‹"></a>1.1 ç®€ä»‹</h2><p>ä»€ä¹ˆæ˜¯JQueryï¼Ÿ</p>
<ul>
<li>jQueryå†…éƒ¨å°è£…äº†åŸç”Ÿçš„jsä»£ç (è¿˜é¢å¤–æ·»åŠ äº†å¾ˆå¤šçš„åŠŸèƒ½)</li>
<li>èƒ½å¤Ÿè®©ä½ é€šè¿‡ä¹¦å†™æ›´å°‘çš„ä»£ç  å®Œæˆjsæ“ä½œ </li>
<li>ç±»ä¼¼äºpythoné‡Œé¢çš„æ¨¡å—  åœ¨å‰ç«¯æ¨¡å—ä¸å«æ¨¡å—  å« â€œç±»åº“â€</li>
</ul>
<p>JQueryçš„å®—æ—¨ï¼š</p>
<p>â€‹	write less do more</p>
<p>JQueryé€‰æ‹©ï¼š</p>
<p>â€‹	jquery.js	æœªå‹ç¼©çš„ç‰ˆæœ¬</p>
<p>â€‹	jquery.min.js	å‹ç¼©åçš„ç‰ˆæœ¬ï¼ˆæ¨èï¼‰</p>
<h2 id="1-2-å¯¼å…¥JQuery"><a href="#1-2-å¯¼å…¥JQuery" class="headerlink" title="1.2 å¯¼å…¥JQuery"></a>1.2 å¯¼å…¥JQuery</h2><p>å¯¼å…¥JQueryæœ‰ä¸¤ç§æ–¹å¼</p>
<h3 id="1-2-1-æœ¬åœ°æ–¹å¼å¯¼å…¥ï¼š"><a href="#1-2-1-æœ¬åœ°æ–¹å¼å¯¼å…¥ï¼š" class="headerlink" title="1.2.1 æœ¬åœ°æ–¹å¼å¯¼å…¥ï¼š"></a>1.2.1 æœ¬åœ°æ–¹å¼å¯¼å…¥ï¼š</h3><p>åˆ°JQueryå®˜ç½‘è·å–JQueryçš„JSæ–‡ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">https:<span class="comment">//jquery.com/</span></span><br></pre></td></tr></table></figure>

<p>åœ¨HTMLä¸­å¯¼å…¥æ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/jquery-3.6.0.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-2-ç½‘ç»œCDNå¯¼å…¥-éœ€è¦ç½‘ç»œ"><a href="#1-2-2-ç½‘ç»œCDNå¯¼å…¥-éœ€è¦ç½‘ç»œ" class="headerlink" title="1.2.2 ç½‘ç»œCDNå¯¼å…¥(éœ€è¦ç½‘ç»œ)"></a>1.2.2 ç½‘ç»œCDNå¯¼å…¥(éœ€è¦ç½‘ç»œ)</h3><p>å‰ç«¯å…è´¹çš„cdnç½‘ç«™: </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">https:<span class="comment">//www.bootcdn.cn/</span></span><br></pre></td></tr></table></figure>

<p>å¯¼å…¥æ–¹æ³•ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="1-3-JQueryçš„ç®€å•ä½¿ç”¨"><a href="#1-3-JQueryçš„ç®€å•ä½¿ç”¨" class="headerlink" title="1.3 JQueryçš„ç®€å•ä½¿ç”¨"></a>1.3 JQueryçš„ç®€å•ä½¿ç”¨</h2><h3 id="1-3-1-åŸºæœ¬è¯­æ³•"><a href="#1-3-1-åŸºæœ¬è¯­æ³•" class="headerlink" title="1.3.1 åŸºæœ¬è¯­æ³•"></a>1.3.1 åŸºæœ¬è¯­æ³•</h3><p>ä½¿ç”¨JQueryæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<p>ç¬¬ä¸€ç§</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">jQuery(é€‰æ‹©å™¨).action()</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(é€‰æ‹©å™¨).action()</span><br></pre></td></tr></table></figure>

<p>ä¸¤ç§æ–¹æ³•æ˜¯ç­‰ä»·çš„ï¼Œæ¨è<font color=red>ç¬¬äºŒç§</font></p>
<h3 id="1-3-2-JQueryä¸JavaScriptçš„è¯­æ³•å¯¹æ¯”"><a href="#1-3-2-JQueryä¸JavaScriptçš„è¯­æ³•å¯¹æ¯”" class="headerlink" title="1.3.2 JQueryä¸JavaScriptçš„è¯­æ³•å¯¹æ¯”"></a>1.3.2 JQueryä¸JavaScriptçš„è¯­æ³•å¯¹æ¯”</h3><p>é€šè¿‡æ¡ˆä¾‹å¯è§ï¼Œå®ç°ç›¸åŒçš„åŠŸèƒ½ï¼Œä½¿ç”¨JQueryåï¼Œä»£ç é‡ç¡®å®å¯ä»¥å‡å°‘</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// JSåŸç”Ÿä»£ç </span></span><br><span class="line">d1Ele = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;d1&#x27;</span>)</span><br><span class="line">d1Ele.style.color = <span class="string">&#x27;red&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨JQuery</span></span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).css(<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;red&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h1 id="2-JQueryçš„ä½¿ç”¨"><a href="#2-JQueryçš„ä½¿ç”¨" class="headerlink" title="2 JQueryçš„ä½¿ç”¨"></a>2 JQueryçš„ä½¿ç”¨</h1><h2 id="2-1-æ ‡ç­¾æŸ¥æ‰¾"><a href="#2-1-æ ‡ç­¾æŸ¥æ‰¾" class="headerlink" title="2.1 æ ‡ç­¾æŸ¥æ‰¾"></a>2.1 æ ‡ç­¾æŸ¥æ‰¾</h2><p>é€šè¿‡ä¸‹é¢çš„æ¡ˆä¾‹ï¼Œæ¼”ç¤ºæ ‡ç­¾æŸ¥æ‰¾</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery-3.6.0.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span>d1div</span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>d1div-span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>c1div<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>idé€‰æ‹©å™¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>)</span><br><span class="line">S.fn.initÂ [div#d1]	<span class="comment">// æ‰¾åˆ°ä¸€ä¸ªJQueryå¯¹è±¡</span></span><br></pre></td></tr></table></figure>

<p>classé€‰æ‹©å™¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;.c1&#x27;</span>)</span><br><span class="line">S.fn.initÂ [div.c1, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]	<span class="comment">// æ‰¾åˆ°ä¸€ä¸ªJQueryå¯¹è±¡</span></span><br></pre></td></tr></table></figure>

<p>æ ‡ç­¾é€‰æ‹©å™¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;span&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">2</span>)Â [span, span, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]		<span class="comment">// æ‰¾åˆ°ä¸¤ä¸ªJQueryå¯¹è±¡</span></span><br></pre></td></tr></table></figure>

<p><strong><font color=blue>å‘ç°æˆ‘ä»¬æŸ¥æ‰¾åˆ°çš„å¹¶ä¸æ˜¯æ ‡ç­¾ï¼Œè€Œæ˜¯<code>JQueryå¯¹è±¡</code>ï¼Œé‚£ä¹ˆå¦‚ä½•æ‰èƒ½å°†<code>JQueryå¯¹è±¡</code>è½¬æ¢æˆ<code>æ ‡ç­¾å¯¹è±¡</code>å‘¢ï¼Ÿ</font></strong></p>
<p>JQueryå¯¹è±¡å’Œæ ‡ç­¾å¯¹è±¡çš„äº’ç›¸è½¬æ¢</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// JQueryå¯¹è±¡è½¬æ¢æˆæ ‡ç­¾å¯¹è±¡</span></span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">&lt;div id=â€‹<span class="string">&quot;d1&quot;</span>&gt;â€‹â€¦â€‹&lt;<span class="regexp">/div&gt;â€‹&quot;d1div &quot;&lt;span&gt;â€‹d1div-spanâ€‹&lt;/</span>span&gt;â€‹&lt;/div&gt;â€‹</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ ‡ç­¾å¯¹è±¡è½¬æ¢æˆJQueryå¯¹è±¡</span></span><br><span class="line">$(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;d1&#x27;</span>))</span><br><span class="line">S.fn.initÂ [div#d1]</span><br></pre></td></tr></table></figure>



<h2 id="2-2-ç»„åˆé€‰æ‹©å™¨-x2F-åˆ†ç»„ä¸åµŒå¥—"><a href="#2-2-ç»„åˆé€‰æ‹©å™¨-x2F-åˆ†ç»„ä¸åµŒå¥—" class="headerlink" title="2.2 ç»„åˆé€‰æ‹©å™¨&#x2F;åˆ†ç»„ä¸åµŒå¥—"></a>2.2 ç»„åˆé€‰æ‹©å™¨&#x2F;åˆ†ç»„ä¸åµŒå¥—</h2><p>ç»„åˆé€‰æ‹©å™¨çš„ä½¿ç”¨å’ŒCSSçš„é€‰æ‹©å™¨åŸºæœ¬ç›¸åŒ</p>
<p>ç»„åˆé€‰æ‹©å™¨</p>
<table>
<thead>
<tr>
<th>é€‰æ‹©å™¨</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>$(â€˜divâ€™)</td>
<td>åŸºæœ¬é€‰æ‹©å™¨ï¼Œé€‰æ‹©divæ ‡ç­¾</td>
</tr>
<tr>
<td>$(â€˜div.c1â€™)</td>
<td>é€‰æ‹©classåä¸ºc1çš„divæ ‡ç­¾</td>
</tr>
<tr>
<td>$(â€˜div#d1â€™)</td>
<td>é€‰æ‹©idåä¸ºd1çš„divæ ‡ç­¾</td>
</tr>
<tr>
<td>$(â€˜*â€™)</td>
<td>é€šç”¨é€‰æ‹©å™¨ï¼Œé€‰æ‹©æ‰€æœ‰æ ‡ç­¾</td>
</tr>
<tr>
<td>$(â€˜#d1,.c1,pâ€™)</td>
<td>ç»„åˆé€‰æ‹©å™¨ï¼Œé€‰æ‹©idåä¸ºd1çš„æ ‡ç­¾ã€classåä¸ºc1çš„æ ‡ç­¾ã€æ‰€æœ‰pæ ‡ç­¾</td>
</tr>
</tbody></table>
<p>åˆ†ç»„ä¸åµŒå¥—</p>
<table>
<thead>
<tr>
<th>é€‰æ‹©å™¨</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>$(â€˜div spanâ€™)</td>
<td>åä»£é€‰æ‹©å™¨ï¼Œé€‰æ‹©divçš„æ‰€æœ‰åä»£span</td>
</tr>
<tr>
<td>$(â€˜div&gt;spanâ€™)</td>
<td>å„¿å­é€‰æ‹©å™¨ï¼Œé€‰æ‹©divçš„å„¿å­span (å­™å­è¾ˆå°±ä¸ç®—äº†)</td>
</tr>
<tr>
<td>$(â€˜div+spanâ€™)</td>
<td>æ¯—é‚»é€‰æ‹©å™¨ï¼Œé€‰æ‹©<code>ç´§æ¥</code>åœ¨<code>æŒ‡å®šå…ƒç´ </code>åçš„å…ƒç´ ï¼Œä¸”äºŒè€…æœ‰ç›¸åŒçˆ¶å…ƒç´ ã€‚</td>
</tr>
<tr>
<td>$(â€˜div~spanâ€™)</td>
<td>å¼Ÿå¼Ÿé€‰æ‹©å™¨ï¼Œé€‰æ‹©<code>æŒ‡å®šå…ƒç´ </code>åçš„å…ƒç´ ï¼Œä¸”äºŒè€…æœ‰ç›¸åŒçˆ¶å…ƒç´ ã€‚</td>
</tr>
</tbody></table>
<p>åˆ†ç»„ä¸åµŒå¥—é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¼”ç¤º</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery-3.6.0.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>c1-span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span>d1</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d2&quot;</span>&gt;</span>d2</span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d3&quot;</span>&gt;</span>d3<span class="tag">&lt;<span class="name">span</span>&gt;</span>d3-span<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d4&quot;</span>&gt;</span>d4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;c2&quot;</span>&gt;</span>c2span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;c3&quot;</span>&gt;</span>c3span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d5&quot;</span>&gt;</span>d5</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d6&quot;</span>&gt;</span>d6<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d7&quot;</span>&gt;</span>d7</span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>d7-span</span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">                d7-span-span</span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æŸ¥æ‰¾divçš„åä»£span</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ‰¾åˆ°3ä¸ª</span></span><br><span class="line">$(<span class="string">&#x27;div span&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">3</span>)Â [span, span, span, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ†åˆ«æ˜¯</span></span><br><span class="line">$(<span class="string">&#x27;div span&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">&lt;span&gt;â€‹d3-spanâ€‹&lt;/span&gt;â€‹</span><br><span class="line">$(<span class="string">&#x27;div span&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">&lt;span&gt;â€‹<span class="string">&quot;d7-span &quot;</span>&lt;span&gt;â€‹ d7-span-span â€‹&lt;<span class="regexp">/span&gt;â€‹&lt;/</span>span&gt;â€‹</span><br><span class="line">$(<span class="string">&#x27;div span&#x27;</span>)[<span class="number">2</span>]</span><br><span class="line">&lt;span&gt;â€‹ d7-span-span â€‹&lt;/span&gt;â€‹</span><br></pre></td></tr></table></figure>

<p>æŸ¥æ‰¾divçš„å„¿å­span</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŸ¥åˆ°2ä¸ª</span></span><br><span class="line">$(<span class="string">&#x27;div&gt;span&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">2</span>)Â [span, span, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ†åˆ«æ˜¯</span></span><br><span class="line">$(<span class="string">&#x27;div&gt;span&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">&lt;span&gt;â€‹d3-spanâ€‹&lt;/span&gt;â€‹</span><br><span class="line">$(<span class="string">&#x27;div&gt;span&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">&lt;span&gt;â€‹<span class="string">&quot;d7-span &quot;</span>&lt;span&gt;â€‹ d7-span-span â€‹&lt;<span class="regexp">/span&gt;â€‹&lt;/</span>span&gt;â€‹</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºä»€ä¹ˆæ¯”åä»£å°‘1ä¸ªï¼Ÿ</span></span><br><span class="line">å› ä¸ºd7-span-spanå·²ç»æ˜¯å­™å­è¾ˆäº†ï¼Œä¸åœ¨<span class="string">&quot;å„¿å­&quot;</span>é‡Œé¢</span><br></pre></td></tr></table></figure>

<p>æŸ¥æ‰¾divçš„æ¯—é‚»span</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åªèƒ½æ‰¾åˆ°1ä¸ª</span></span><br><span class="line">$(<span class="string">&#x27;div+span&#x27;</span>)</span><br><span class="line">S.fn.initÂ [span.c2, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]<span class="number">0</span>: span.c2length: 1prevObject: S.fn.initÂ [<span class="built_in">document</span>][[Prototype]]: <span class="built_in">Object</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// d4ç´§æ¥ç€çš„c2span</span></span><br><span class="line">$(<span class="string">&#x27;div+span&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">&lt;span <span class="class"><span class="keyword">class</span></span>=â€‹<span class="string">&quot;c2&quot;</span>&gt;â€‹c2spanâ€‹&lt;/span&gt;â€‹</span><br></pre></td></tr></table></figure>

<p>æŸ¥æ‰¾divçš„å¼Ÿå¼Ÿspan</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯ä»¥æ‰¾åˆ°2ä¸ª</span></span><br><span class="line">$(<span class="string">&#x27;div~span&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">2</span>)Â [span.c2, span.c3, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ†åˆ«æ˜¯</span></span><br><span class="line">$(<span class="string">&#x27;div~span&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">&lt;span <span class="class"><span class="keyword">class</span></span>=â€‹<span class="string">&quot;c2&quot;</span>&gt;â€‹c2spanâ€‹&lt;/span&gt;â€‹</span><br><span class="line">$(<span class="string">&#x27;div~span&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">&lt;span <span class="class"><span class="keyword">class</span></span>=â€‹<span class="string">&quot;c3&quot;</span>&gt;â€‹c3spanâ€‹&lt;/span&gt;â€‹</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºä»€ä¹ˆä¼šæ¯”æ¯—é‚»å¤šä¸€ä¸ªï¼Ÿ</span></span><br><span class="line">å› ä¸ºæ¯—é‚»åªç®—ç´§æ¥çš„ç¬¬ä¸€ä¸ªï¼Œè€Œå¼Ÿå¼Ÿå¯ä»¥ç®—å…¨éƒ¨</span><br></pre></td></tr></table></figure>

<h2 id="2-3-åŸºæœ¬ç­›é€‰å™¨"><a href="#2-3-åŸºæœ¬ç­›é€‰å™¨" class="headerlink" title="2.3 åŸºæœ¬ç­›é€‰å™¨"></a>2.3 åŸºæœ¬ç­›é€‰å™¨</h2><p>ä»¥ul liä¸ºä¾‹å­ï¼Œæ¼”ç¤ºåŸºæœ¬ç­›é€‰å™¨çš„ä½¿ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span>çˆ¸çˆ¸</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å„¿å­01<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">id</span>=<span class="string">&#x27;d1&#x27;</span>&gt;</span>å„¿å­02<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å„¿å­03<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å„¿å­04<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å„¿å­05<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å„¿å­06<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å„¿å­07<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å„¿å­08<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å„¿å­09<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>å„¿å­10<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨åŸºæœ¬ç­›é€‰å™¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1ã€è·å–ulä¸‹çš„æ‰€æœ‰li</span></span><br><span class="line">$(<span class="string">&#x27;ul li&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">10</span>)Â [li, li, li, li, li, li, li, li, li, li, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€è·å–ulä¸‹çš„ç¬¬ä¸€ä¸ªli</span></span><br><span class="line">$(<span class="string">&#x27;ul li:first&#x27;</span>)</span><br><span class="line">S.fn.initÂ [li, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line">$(<span class="string">&#x27;ul li&#x27;</span>).first()</span><br><span class="line">S.fn.initÂ [li, <span class="attr">prevObject</span>: S.fn.init(<span class="number">10</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3ã€è·å–ulä¸‹çš„æœ€åä¸€ä¸ªli</span></span><br><span class="line">$(<span class="string">&#x27;ul li:last&#x27;</span>)</span><br><span class="line">S.fn.initÂ [li, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line">$(<span class="string">&#x27;ul li&#x27;</span>).last()</span><br><span class="line">S.fn.initÂ [li, <span class="attr">prevObject</span>: S.fn.init(<span class="number">10</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4ã€è·å–ulçš„ä¸‹æ ‡ä¸º2çš„åä»£</span></span><br><span class="line">$(<span class="string">&#x27;ul li:eq(2)&#x27;</span>)</span><br><span class="line">S.fn.initÂ [li, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line">$(<span class="string">&#x27;ul li&#x27;</span>).eq(<span class="number">2</span>)</span><br><span class="line">S.fn.initÂ [li, <span class="attr">prevObject</span>: S.fn.init(<span class="number">10</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5ã€è·å–ulä¸­ä¸‹æ ‡ä¸ºå¶æ•°çš„åä»£ï¼ˆ0åŒ…å«åœ¨å†…ï¼‰</span></span><br><span class="line">$(<span class="string">&#x27;ul li:even&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">5</span>)Â [li, li, li, li, li, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6ã€è·å–ulä¸­ä¸‹æ ‡ä¸ºå¥‡æ•°çš„åä»£</span></span><br><span class="line">$(<span class="string">&#x27;ul li:odd&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">5</span>)Â [li, li, li, li, li, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 7ã€è·å–ç´¢å¼•å¤§äº2çš„åä»£</span></span><br><span class="line">$(<span class="string">&#x27;ul li:gt(2)&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">7</span>)Â [li, li, li, li, li, li, li, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 8ã€è·å–ç´¢å¼•å°äº2çš„åä»£</span></span><br><span class="line">$(<span class="string">&#x27;ul li:lt(2)&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">2</span>)Â [li, li#d1, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 9ã€ç§»é™¤æ»¡è¶³æ¡ä»¶çš„åä»£æ ‡ç­¾</span></span><br><span class="line">$(<span class="string">&#x27;ul li:not(#d1)&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">9</span>)Â [li, li, li, li, li, li, li, li, li, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<h2 id="2-4-å±æ€§é€‰æ‹©å™¨"><a href="#2-4-å±æ€§é€‰æ‹©å™¨" class="headerlink" title="2.4 å±æ€§é€‰æ‹©å™¨"></a>2.4 å±æ€§é€‰æ‹©å™¨</h2><p>å¯ä»¥æ ¹æ®æ ‡ç­¾å±æ€§é€‰æ‹©åˆ°æ ‡ç­¾</p>
<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">username</span>=<span class="string">&#x27;Tom&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>çœŸå®å§“åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">username</span>=<span class="string">&#x27;Jack&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä½å€ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">site</span>=<span class="string">&#x27;HuNan ChangSha&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&#x27;ç‚¹æˆ‘å¥½åº·&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å±æ€§é€‰æ‹©å™¨çš„ä½¿ç”¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1ã€æ‰¾åˆ°æ‰€æœ‰åŒ…å«usernameå±æ€§çš„æ ‡ç­¾</span></span><br><span class="line">$(<span class="string">&#x27;[username]&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">2</span>)Â [input, input, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€æ‰¾åˆ°æ‰€æœ‰username=&#x27;Tom&#x27;çš„æ ‡ç­¾</span></span><br><span class="line">$(<span class="string">&#x27;[username=&quot;Tom&quot;]&#x27;</span>)</span><br><span class="line">S.fn.initÂ [input, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3ã€æ‰¾åˆ°æ‰€æœ‰username=&#x27;Jack&#x27;çš„æ ‡ç­¾</span></span><br><span class="line">$(<span class="string">&#x27;[username=&quot;Jack&quot;]&#x27;</span>)</span><br><span class="line">S.fn.initÂ [input, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4ã€æ‰¾åˆ°æ‰€æœ‰åŒ…å«typeå±æ€§çš„æ ‡ç­¾</span></span><br><span class="line">$(<span class="string">&#x27;[type]&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">5</span>)Â [input, input, input, input, input, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5ã€æ‰¾åˆ°æ‰€æœ‰åŒ…å«typeå±æ€§ä¸”type=&#x27;text&#x27;çš„æ ‡ç­¾</span></span><br><span class="line">$(<span class="string">&#x27;[type=&quot;text&quot;]&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">3</span>)Â [input, input, input, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<h2 id="2-5-è¡¨å•ç­›é€‰å™¨"><a href="#2-5-è¡¨å•ç­›é€‰å™¨" class="headerlink" title="2.5 è¡¨å•ç­›é€‰å™¨"></a>2.5 è¡¨å•ç­›é€‰å™¨</h2><p>æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=&quot;&quot;&gt;</span><br><span class="line">        &lt;p&gt;ç”¨æˆ·åï¼š&lt;input type=&quot;text&quot; username=&#x27;Tom&#x27;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;çœŸå®å§“åï¼š&lt;input type=&quot;text&quot; username=&#x27;Jack&#x27;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;ä½å€ï¼š&lt;input type=&quot;text&quot; site=&#x27;HuNan ChangSha&#x27;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;å¯†ç ï¼š&lt;input type=&quot;password&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=&quot;button&quot; value=&#x27;ç‚¹æˆ‘å¥½åº·&#x27;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;æ€§åˆ«</span><br><span class="line">            &lt;input type=&quot;radio&quot; name=&quot;&quot; id=&quot;&quot; checked&gt;ç”·</span><br><span class="line">            &lt;input type=&quot;radio&quot; name=&quot;&quot; id=&quot;&quot; &gt;å¥³</span><br><span class="line">            &lt;input type=&quot;radio&quot; name=&quot;&quot; id=&quot;&quot; &gt;æœªçŸ¥</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p&gt;çˆ±å¥½</span><br><span class="line">            &lt;input type=&quot;checkbox&quot; name=&quot;&quot; id=&quot;&quot; checked&gt;æ¸¸æ³³</span><br><span class="line">            &lt;input type=&quot;checkbox&quot; name=&quot;&quot; id=&quot;&quot;&gt;å”±æ­Œ</span><br><span class="line">            &lt;input type=&quot;checkbox&quot; name=&quot;&quot; id=&quot;&quot;&gt;åˆ’èˆ¹</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p&gt;å­¦å†</span><br><span class="line">            &lt;select name=&quot;&quot; id=&quot;&quot;&gt;</span><br><span class="line">                &lt;option value=&quot;&quot; selected&gt;æœ¬ç§‘&lt;/option&gt;</span><br><span class="line">                &lt;option value=&quot;&quot;&gt;ç ”ç©¶ç”Ÿ&lt;/option&gt;</span><br><span class="line">                &lt;option value=&quot;&quot;&gt;åšå£«&lt;/option&gt;</span><br><span class="line">            &lt;/select&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-5-1-é€šè¿‡inputæ ‡ç­¾çš„ç±»å‹é€‰æ‹©å…ƒç´ "><a href="#2-5-1-é€šè¿‡inputæ ‡ç­¾çš„ç±»å‹é€‰æ‹©å…ƒç´ " class="headerlink" title="2.5.1 é€šè¿‡inputæ ‡ç­¾çš„ç±»å‹é€‰æ‹©å…ƒç´ "></a>2.5.1 é€šè¿‡inputæ ‡ç­¾çš„ç±»å‹é€‰æ‹©å…ƒç´ </h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1ã€è·å–æ‹¥æœ‰å±æ€§type=&#x27;text&#x27;çš„inputæ ‡ç­¾</span></span><br><span class="line">$(<span class="string">&#x27;input[type=&quot;text&quot;]&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">3</span>)Â [input, input, input, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"><span class="comment">// å¯ä»¥ç®€å†™ä¸º</span></span><br><span class="line">$(<span class="string">&#x27;:text&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">3</span>)Â [input, input, input, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€è·å–æ‹¥æœ‰å±æ€§type=&#x27;password&#x27;çš„inputæ ‡ç­¾</span></span><br><span class="line">$(<span class="string">&#x27;input[type=&quot;password&quot;]&#x27;</span>)</span><br><span class="line">S.fn.initÂ [input, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"><span class="comment">// å¯ä»¥ç®€å†™ä¸º</span></span><br><span class="line">$(<span class="string">&#x27;:password&#x27;</span>)</span><br><span class="line">S.fn.initÂ [input, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<p>å¯ç®€å†™çš„ä¸€äº›æ–¹æ³•ï¼š</p>
<ul>
<li>:text</li>
<li>:password</li>
<li>:file</li>
<li>:radio</li>
<li>:checkbox</li>
<li>:submit</li>
<li>:reset</li>
<li>:button</li>
</ul>
<h3 id="2-5-2-é€šè¿‡è¡¨å•å¯¹è±¡å±æ€§é€‰æ‹©å…ƒç´ "><a href="#2-5-2-é€šè¿‡è¡¨å•å¯¹è±¡å±æ€§é€‰æ‹©å…ƒç´ " class="headerlink" title="2.5.2 é€šè¿‡è¡¨å•å¯¹è±¡å±æ€§é€‰æ‹©å…ƒç´ "></a>2.5.2 é€šè¿‡è¡¨å•å¯¹è±¡å±æ€§é€‰æ‹©å…ƒç´ </h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1ã€è·å–æ‰€æœ‰åŒ…å«checked=â€œcheckedâ€çš„æ ‡ç­¾</span></span><br><span class="line">$(<span class="string">&#x27;:checked&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">3</span>)Â [input, input, option, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"><span class="comment">// æ˜æ˜åªæœ‰ä¸¤ä¸ªcheckedï¼Œä¸ºä»€ä¹ˆæ‹¿äº†3ä¸ªï¼Œå› ä¸ºæœ‰BUGï¼Œä¼šæŠŠselectedä¹Ÿæ‹¿åˆ°</span></span><br><span class="line">$(<span class="string">&#x27;:checked&#x27;</span>)[<span class="number">2</span>]</span><br><span class="line">&lt;option value selected&gt;â€‹æœ¬ç§‘â€‹&lt;/option&gt;â€‹   slot </span><br><span class="line"><span class="comment">// æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿè‡ªå·±åŠ é™åˆ¶æ¡ä»¶</span></span><br><span class="line">$(<span class="string">&#x27;input:checked&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">2</span>)Â [input, input, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€è·å–æ‰€æœ‰åŒ…å«selected=â€œselectedâ€çš„æ ‡ç­¾</span></span><br><span class="line">$(<span class="string">&#x27;:selected&#x27;</span>)</span><br><span class="line">S.fn.initÂ [option, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<p>ç›¸åŒç”¨æ³•çš„è¿˜æœ‰ï¼š</p>
<ul>
<li>:enabled</li>
<li>:disabled</li>
</ul>
<h2 id="2-6-ç­›é€‰å™¨æ–¹æ³•"><a href="#2-6-ç­›é€‰å™¨æ–¹æ³•" class="headerlink" title="2.6 ç­›é€‰å™¨æ–¹æ³•"></a>2.6 ç­›é€‰å™¨æ–¹æ³•</h2><p>æ ¹æ®ä¸€ä¸ªæ ‡ç­¾ï¼Œè·å–å®ƒçš„<code>çˆ¶äº²</code>ã€<code>å„¿å­</code>ã€<code>çˆ·çˆ·</code>ç­‰</p>
<p>å¾€åæ‰¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–#d1åŒçº§åˆ«ä¸‹ä¸€ä¸ª</span></span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).next()  </span><br><span class="line">w.fn.initÂ [span, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]<span class="number">0</span>: spanlength: 1prevObject: </span><br><span class="line">w.fn.initÂ [span#d1]__proto__: <span class="built_in">Object</span>(<span class="number">0</span>)</span><br><span class="line">           </span><br><span class="line"><span class="comment">// è·å–#d1åŒçº§åˆ«ä¸‹çš„æ‰€æœ‰     </span></span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).nextAll()</span><br><span class="line">w.fn.init(<span class="number">5</span>)Â [span, div#d2, span, span, span.c1, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]<span class="number">0</span>: span1: div#d22: span3: span4: span.c1length: 5prevObject: w.fn.initÂ [span#d1]__proto__: <span class="built_in">Object</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–#d1åŒçº§åˆ«ä¸‹çš„æ‰€æœ‰ï¼Œç›´åˆ°é‡åˆ°.c1åœæ­¢æŸ¥æ‰¾</span></span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).nextUntil(<span class="string">&#x27;.c1&#x27;</span>)  # ä¸åŒ…æ‹¬æœ€åä¸€ä¸ª</span><br><span class="line">w.fn.init(<span class="number">4</span>)Â [span, div#d2, span, span, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]<span class="number">0</span>: span1: div#d22: span3: spanlengt: 4prevObject: w.fn.initÂ [span#d1]__proto__: <span class="built_in">Object</span>(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>å¾€å‰æ‰¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–#d1åŒçº§åˆ«ä¸Šä¸€ä¸ª</span></span><br><span class="line">$(<span class="string">&#x27;.c1&#x27;</span>).prev() </span><br><span class="line">w.fn.initÂ [span, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]<span class="number">0</span>: spanlength: 1prevObject: w.fn.initÂ [span.c1, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]__proto__: <span class="built_in">Object</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–#d1åŒçº§åˆ«ä¸Šçš„æ‰€æœ‰</span></span><br><span class="line">$(<span class="string">&#x27;.c1&#x27;</span>).prevAll()</span><br><span class="line">w.fn.init(<span class="number">5</span>)Â [span, span, div#d2, span, span#d1, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br><span class="line">              </span><br><span class="line"><span class="comment">// è·å–#d1åŒçº§åˆ«ä¸‹çš„æ‰€æœ‰ï¼Œç›´åˆ°é‡åˆ°#d2åœæ­¢æŸ¥æ‰¾</span></span><br><span class="line">$(<span class="string">&#x27;.c1&#x27;</span>).prevUntil(<span class="string">&#x27;#d2&#x27;</span>)</span><br><span class="line">w.fn.init(<span class="number">2</span>)Â [span, span, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<p>æ‰¾çˆ¸çˆ¸</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#d3&#x27;</span>).parent()  # ç¬¬ä¸€çº§çˆ¶æ ‡ç­¾</span><br><span class="line">w.fn.initÂ [p, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]<span class="number">0</span>: plength: 1prevObject: w.fn.initÂ [span#d3]__proto__: <span class="built_in">Object</span>(<span class="number">0</span>)</span><br><span class="line">$(<span class="string">&#x27;#d3&#x27;</span>).parent().parent()</span><br><span class="line">w.fn.initÂ [div#d2, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;#d3&#x27;</span>).parent().parent().parent()</span><br><span class="line">w.fn.initÂ [body, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;#d3&#x27;</span>).parent().parent().parent().parent()</span><br><span class="line">w.fn.initÂ [html, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;#d3&#x27;</span>).parent().parent().parent().parent().parent()</span><br><span class="line">w.fn.initÂ [<span class="built_in">document</span>, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;#d3&#x27;</span>).parent().parent().parent().parent().parent().parent()</span><br><span class="line">w.fn.initÂ [prevObject: w.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;#d3&#x27;</span>).parents()</span><br><span class="line">w.fn.init(<span class="number">4</span>)Â [p, div#d2, body, html, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;#d3&#x27;</span>).parentsUntil(<span class="string">&#x27;body&#x27;</span>)</span><br><span class="line">w.fn.init(<span class="number">2</span>)Â [p, div#d2, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<p>æ‰¾å„¿å­</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#d2&#x27;</span>).children()</span><br></pre></td></tr></table></figure>

<p>æ‰¾å…„å¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#d2&#x27;</span>).siblings()  # åŒçº§åˆ«ä¸Šä¸‹æ‰€æœ‰</span><br></pre></td></tr></table></figure>

<h2 id="2-7-è¡¥å……è¯´æ˜"><a href="#2-7-è¡¥å……è¯´æ˜" class="headerlink" title="2.7 è¡¥å……è¯´æ˜"></a>2.7 è¡¥å……è¯´æ˜</h2><p>å­˜åœ¨ä¸€äº›äº’ç›¸ç­‰ä»·çš„ç”¨æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ¡ˆä¾‹1</span></span><br><span class="line">$(<span class="string">&#x27;div p&#x27;</span>)</span><br><span class="line"><span class="comment">// ç­‰ä»·äº           </span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).find(<span class="string">&#x27;p&#x27;</span>)  # findä»æŸä¸ªåŒºåŸŸå†…ç­›é€‰å‡ºæƒ³è¦çš„æ ‡ç­¾ </span><br><span class="line">              </span><br><span class="line"><span class="comment">// æ¡ˆä¾‹2</span></span><br><span class="line">$(<span class="string">&#x27;div span:first&#x27;</span>)</span><br><span class="line">w.fn.initÂ [span, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br><span class="line"><span class="comment">// ç­‰ä»·äº</span></span><br><span class="line">$(<span class="string">&#x27;div span&#x27;</span>).first()</span><br><span class="line">w.fn.initÂ [span, <span class="attr">prevObject</span>: w.fn.init(<span class="number">3</span>)]<span class="number">0</span>: spanlength: 1prevObject: w.fn.init(<span class="number">3</span>)Â [span, span#d3, span, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]__proto__: <span class="built_in">Object</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¡ˆä¾‹3</span></span><br><span class="line">$(<span class="string">&#x27;div span:last&#x27;</span>)</span><br><span class="line">w.fn.initÂ [span, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;div span&#x27;</span>).last()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¡ˆä¾‹4</span></span><br><span class="line">w.fn.initÂ [span, <span class="attr">prevObject</span>: w.fn.init(<span class="number">3</span>)]</span><br><span class="line">$(<span class="string">&#x27;div span:not(&quot;#d3&quot;)&#x27;</span>)</span><br><span class="line">w.fn.init(<span class="number">2</span>)Â [span, span, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br><span class="line"><span class="comment">// ç­‰ä»·äº</span></span><br><span class="line">$(<span class="string">&#x27;div span&#x27;</span>).not(<span class="string">&#x27;#d3&#x27;</span>)</span><br><span class="line">w.fn.init(<span class="number">2</span>)Â [span, span, <span class="attr">prevObject</span>: w.fn.init(<span class="number">3</span>)]</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Python</category>
        <category>å‰ç«¯åŸºç¡€</category>
      </categories>
  </entry>
  <entry>
    <title>Day53-CSS-03</title>
    <url>/2022/08/08/03_Python/02_%E5%89%8D%E7%AB%AF/day53%E7%AC%94%E8%AE%B0-CSS-03/</url>
    <content><![CDATA[<p>â€œç¬¬53å¤©CSS03å­¦ä¹ ç¬”è®°â€</p>
<h1 id="1-è§£å†³æµ®åŠ¨å¸¦æ¥çš„å½±å“"><a href="#1-è§£å†³æµ®åŠ¨å¸¦æ¥çš„å½±å“" class="headerlink" title="1 è§£å†³æµ®åŠ¨å¸¦æ¥çš„å½±å“"></a>1 è§£å†³æµ®åŠ¨å¸¦æ¥çš„å½±å“</h1><p>æµ®åŠ¨ä¼šå¸¦æ¥<code>çˆ¶æ ‡ç­¾å¡Œé™·</code>çš„é—®é¢˜ï¼Œä»€ä¹ˆæ˜¯<code>çˆ¶æ ‡ç­¾å¡Œé™·</code>ï¼Ÿ</p>
<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">STYle</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">border</span>: <span class="number">5px</span> solid;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">300px</span></span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.P1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: coral;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: blue;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css">            <span class="comment">/*å·¦æµ®åŠ¨*/</span></span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: left;	</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">STYle</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åˆ›å»ºçˆ¶æ ‡ç­¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆ›å»ºå­æ ‡ç­¾ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;P1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªé»‘æ¡†åŒ…ä½ä¸¤ä¸ªè‰²å—ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/../../../img/image-20220808092801800.png" alt="image-20220808092801800"></p>
<p>ä½†æ˜¯å®é™…æƒ…å†µæ˜¯è¿™æ ·çš„, å…ƒç´ æµ®åŠ¨åè„±ç¦»æ–‡æ¡£æµ, çˆ¶DIVå¡Œé™·äº†ï¼š</p>
<p><img src="/../../../img/image-20220808092912191.png" alt="image-20220808092912191"></p>
<p>æœ‰3ç§æ–¹æ³•å¤„ç†è¿™ä¸ªé—®é¢˜ï¼š</p>
<h2 id="1-1-æŒ‡å®šçˆ¶æ ‡ç­¾çš„é«˜åº¦"><a href="#1-1-æŒ‡å®šçˆ¶æ ‡ç­¾çš„é«˜åº¦" class="headerlink" title="1.1 æŒ‡å®šçˆ¶æ ‡ç­¾çš„é«˜åº¦"></a>1.1 æŒ‡å®šçˆ¶æ ‡ç­¾çš„é«˜åº¦</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">5px</span> solid;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="comment">/* çˆ¶æ ‡ç­¾æ·»åŠ é«˜åº¦ */</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-2-åˆ©ç”¨clearå±æ€§"><a href="#1-2-åˆ©ç”¨clearå±æ€§" class="headerlink" title="1.2 åˆ©ç”¨clearå±æ€§"></a>1.2 åˆ©ç”¨clearå±æ€§</h2><p>è¯¥æ ‡ç­¾çš„å·¦è¾¹ä¸èƒ½æœ‰æµ®åŠ¨çš„å…ƒç´ , </p>
<p>åŸç†: P4æ ‡ç­¾å·¦è¾¹ä¸èƒ½æœ‰æµ®åŠ¨, å®é™…ä¸Šæ˜¯æ–°èµ·äº†ä¸€è¡Œ, æŠŠçˆ¶æ ‡ç­¾æ’‘èµ·æ¥äº†</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">STYle</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">border</span>: <span class="number">5px</span> solid;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">300px</span></span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.P1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: coral;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: blue;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css">            <span class="comment">/*å·¦æµ®åŠ¨*/</span></span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: left;	</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">		</span></span><br><span class="line"><span class="css">        <span class="comment">/*P4æ ‡ç­¾clear*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-class">.P4</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">clear</span>: left;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">STYle</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åˆ›å»ºçˆ¶æ ‡ç­¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆ›å»ºå­æ ‡ç­¾ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;P1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆ›å»ºP4æ ‡ç­¾ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;P4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="1-3-ä½¿ç”¨clearfix-æ¨è"><a href="#1-3-ä½¿ç”¨clearfix-æ¨è" class="headerlink" title="1.3 ä½¿ç”¨clearfix(æ¨è)"></a>1.3 ä½¿ç”¨clearfix(æ¨è)</h2><p>åœ¨å†™htmlé¡µé¢ä¹‹å‰ å…ˆæå‰å†™å¥½å¤„ç†æµ®åŠ¨å¸¦æ¥çš„å½±å“çš„ cssä»£ç </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.clearfix</span>:after &#123;</span><br><span class="line">    content: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è°å¡Œé™·å°±ç»™è°ç”¨, è¿™é‡Œç”¨åˆ°divå…ƒç´ ä¸Šé¢</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åˆ›å»ºçˆ¶æ ‡ç­¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clearfix&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åˆ›å»ºå­æ ‡ç­¾ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;P1&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="2-æº¢å‡ºå±æ€§"><a href="#2-æº¢å‡ºå±æ€§" class="headerlink" title="2 æº¢å‡ºå±æ€§"></a>2 æº¢å‡ºå±æ€§</h1><p>è§åçŸ¥æ„, æº¢å‡ºå±æ€§ç”¨æ¥æ§åˆ¶æº¢å‡ºçš„éƒ¨åˆ†, æ¡ˆä¾‹ä»£ç å¦‚ä¸‹:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">border</span>: <span class="number">2px</span> solid;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        ç«¥è¶£</span><br><span class="line">ã€ä½œè€…ã€‘æ²ˆå¤ ã€æœä»£ã€‘æ¸…è¯‘æ–‡å¯¹ç…§</span><br><span class="line">ä½™å¿†ç«¥ç¨šæ—¶ï¼Œèƒ½å¼ ç›®å¯¹æ—¥ï¼Œæ˜å¯Ÿç§‹æ¯«ï¼Œè§è—å°ä¹‹ç‰©å¿…ç»†å¯Ÿå…¶çº¹ç†ï¼Œæ•…æ—¶æœ‰ç‰©å¤–ä¹‹è¶£ã€‚</span><br><span class="line"></span><br><span class="line">å¤èšŠæˆé›·ï¼Œç§æ‹Ÿä½œç¾¤é¹¤èˆäºç©ºä¸­ï¼Œå¿ƒä¹‹æ‰€å‘ï¼Œåˆ™æˆ–åƒæˆ–ç™¾ï¼Œæœç„¶é¹¤ä¹Ÿï¼›æ˜‚é¦–è§‚ä¹‹ï¼Œé¡¹ä¸ºä¹‹å¼ºã€‚åˆç•™èšŠäºç´ å¸ä¸­ï¼Œå¾å–·ä»¥çƒŸï¼Œä½¿ä¹‹å†²çƒŸè€Œé£é¸£ï¼Œä½œé’äº‘ç™½é¹¤è§‚ï¼Œæœå¦‚é¹¤å”³äº‘ç«¯ï¼Œä¸ºä¹‹æ€¡ç„¶ç§°å¿«ã€‚</span><br><span class="line"></span><br><span class="line">ä½™å¸¸äºåœŸå¢™å‡¹å‡¸å¤„ï¼ŒèŠ±å°å°è‰ä¸›æ‚å¤„ï¼Œè¹²å…¶èº«ï¼Œä½¿ä¸å°é½ï¼›å®šç¥ç»†è§†ï¼Œä»¥ä¸›è‰ä¸ºæ—ï¼Œä»¥è™«èšä¸ºå…½ï¼Œä»¥åœŸç ¾å‡¸è€…ä¸ºä¸˜ï¼Œå‡¹è€…ä¸ºå£‘ï¼Œç¥æ¸¸å…¶ä¸­ï¼Œæ€¡ç„¶è‡ªå¾—ã€‚</span><br><span class="line"></span><br><span class="line">ä¸€æ—¥ï¼Œè§äºŒè™«æ–—è‰é—´ï¼Œè§‚ä¹‹ï¼Œå…´æ­£æµ“ï¼Œå¿½æœ‰åºç„¶å¤§ç‰©ï¼Œæ‹”å±±å€’æ ‘è€Œæ¥ï¼Œç›–ä¸€ç™è™¾èŸ†ï¼ŒèˆŒä¸€åè€ŒäºŒè™«å°½ä¸ºæ‰€åã€‚ä½™å¹´å¹¼ï¼Œæ–¹å‡ºç¥ï¼Œä¸è§‰å‘€ç„¶ä¸€æƒŠã€‚ç¥å®šï¼Œæ‰è™¾èŸ†ï¼Œé­æ•°åï¼Œé©±ä¹‹åˆ«é™¢ã€‚</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯è§æ–‡å­—æº¢å‡ºäº†</p>
<p><img src="/../../../img/image-20220808101749039.png" alt="image-20220808101749039"></p>
<p>é€šè¿‡æº¢å‡ºå±æ€§æ§åˆ¶:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">2px</span> solid;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="comment">/* overflow: visible;  é»˜è®¤å°±æ˜¯å¯è§ æº¢å‡ºè¿˜æ˜¯å±•ç¤º  */</span></span><br><span class="line">    <span class="comment">/* overflow: hidden;  æº¢å‡ºéƒ¨åˆ†ç›´æ¥éšè— */</span></span><br><span class="line">    <span class="attribute">overflow</span>: scroll;  <span class="comment">/* è®¾ç½®æˆä¸Šä¸‹æ»šåŠ¨æ¡çš„å½¢å¼ */</span></span><br><span class="line">    <span class="comment">/* overflow: auto; */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¯”å¦‚ä½¿ç”¨scrollå°±æ˜¯å¦‚ä¸‹å›¾æ ·å¼:</p>
<p><img src="/../../../img/image-20220808102150792.png" alt="image-20220808102150792"></p>
<h1 id="3-å®šä½"><a href="#3-å®šä½" class="headerlink" title="3 å®šä½"></a>3 å®šä½</h1><ul>
<li><p>é™æ€</p>
<p>æ‰€æœ‰çš„æ ‡ç­¾é»˜è®¤éƒ½æ˜¯é™æ€çš„staticï¼Œæ— æ³•æ”¹å˜ä½ç½®</p>
</li>
<li><p>ç›¸å¯¹å®šä½(äº†è§£)</p>
<p>ç›¸å¯¹äºæ ‡ç­¾åŸæ¥çš„ä½ç½®åšç§»åŠ¨relative</p>
</li>
<li><p>ç»å¯¹å®šä½(å¸¸ç”¨)</p>
<p>ç›¸å¯¹äºå·²ç»å®šä½è¿‡çš„çˆ¶æ ‡ç­¾åšç§»åŠ¨(å¦‚æœæ²¡æœ‰çˆ¶æ ‡ç­¾é‚£ä¹ˆå°±ä»¥bodyä¸ºå‚ç…§)</p>
<p>eg:å°ç±³ç½‘ç«™è´­ç‰©è½¦</p>
<p>å½“ä½ ä¸çŸ¥é“é¡µé¢å…¶ä»–æ ‡ç­¾çš„ä½ç½®å’Œå‚æ•°ï¼Œåªç»™äº†ä½ ä¸€ä¸ªçˆ¶æ ‡ç­¾çš„å‚æ•°ï¼Œè®©ä½ åŸºäºè¯¥æ ‡ç­¾å·¦å®šä½</p>
</li>
<li><p>å›ºå®šå®šä½(å¸¸ç”¨)</p>
<p>ç›¸å¯¹äºæµè§ˆå™¨çª—å£å›ºå®šåœ¨æŸä¸ªä½ç½®</p>
<p>eg:å³ä¾§å°å¹¿å‘Š</p>
</li>
</ul>
<h2 id="3-1-æ¡ˆä¾‹1â€“å­ç»çˆ¶ç›¸"><a href="#3-1-æ¡ˆä¾‹1â€“å­ç»çˆ¶ç›¸" class="headerlink" title="3.1 æ¡ˆä¾‹1â€“å­ç»çˆ¶ç›¸"></a>3.1 æ¡ˆä¾‹1â€“å­ç»çˆ¶ç›¸</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        </span></span><br><span class="line"><span class="css">        <span class="comment">/* d1ç›¸å¯¹å®šä½ï¼šç›¸å¯¹äºåŸæ¥çš„ä½ç½®ï¼Œå¾€ä¸‹ç§»åŠ¨50pxï¼Œå¾€å³ç§»åŠ¨50px */</span></span></span><br><span class="line"><span class="css">        <span class="selector-id">#d1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css">            <span class="attribute">left</span>: <span class="number">50px</span>;  <span class="comment">/*ä»å·¦å¾€å³   å¦‚æœæ˜¯è´Ÿæ•° æ–¹å‘åˆ™ç›¸å*/</span></span></span><br><span class="line"><span class="css">            <span class="attribute">top</span>: <span class="number">50px</span>;  <span class="comment">/*ä»ä¸Šå¾€ä¸‹    å¦‚æœæ˜¯è´Ÿæ•° æ–¹å‘åˆ™ç›¸å*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*position: static;  !*é»˜è®¤æ˜¯staticæ— æ³•ä¿®æ”¹ä½ç½®*!*/</span></span></span><br><span class="line"><span class="css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="css">            <span class="comment">/*ç›¸å¯¹å®šä½</span></span></span><br><span class="line"><span class="comment"><span class="css">            æ ‡ç­¾ç”±staticå˜ä¸ºrelativeå®ƒçš„æ€§è´¨å°±ä»åŸæ¥æ²¡æœ‰å®šä½çš„æ ‡ç­¾å˜æˆäº†å·²ç»å®šä½è¿‡çš„æ ‡ç­¾</span></span></span><br><span class="line"><span class="comment"><span class="css">            è™½ç„¶ä½ å“ªæ€•æ²¡æœ‰åŠ¨ ä½†æ˜¯ä½ çš„æ€§è´¨ä¹Ÿå·²ç»æ”¹å˜äº†</span></span></span><br><span class="line"><span class="comment"><span class="css">            */</span></span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* d2å±æ€§æ”¹ä¸ºç›¸å¯¹å®šä½ */</span></span></span><br><span class="line"><span class="css">        <span class="selector-id">#d2</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: blue;</span></span><br><span class="line"><span class="css">            <span class="attribute">position</span>: relative;  <span class="comment">/*å·²ç»å®šä½è¿‡äº†*/</span></span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/* d3ç›¸å¯¹äºçˆ¶æ ‡ç­¾d2ï¼Œå¾€å³ç§»åŠ¨200px, å¾€ä¸‹ç§»åŠ¨100px */</span></span></span><br><span class="line"><span class="css">        <span class="selector-id">#d3</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: yellowgreen;</span></span><br><span class="line"><span class="css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">            <span class="attribute">left</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">top</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d2&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœ:</p>
<p><img src="/../../../img/image-20220808104234138.png" alt="image-20220808104234138"></p>
<h2 id="3-2-æ¡ˆä¾‹2â€“å›ºå®šå®šä½"><a href="#3-2-æ¡ˆä¾‹2â€“å›ºå®šå®šä½" class="headerlink" title="3.2 æ¡ˆä¾‹2â€“å›ºå®šå®šä½"></a>3.2 æ¡ˆä¾‹2â€“å›ºå®šå®šä½</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        </span></span><br><span class="line"><span class="css">        <span class="comment">/* d4è®¾ç½®ä¸ºå›ºå®šå®šä½ï¼Œå®šåœ¨å³ä¸‹è§’ */</span></span></span><br><span class="line"><span class="css">        <span class="selector-id">#d4</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">position</span>: fixed;  <span class="comment">/*å†™äº†fixedä¹‹å å®šä½å°±æ˜¯ä¾æ®æµè§ˆå™¨çª—å£*/</span></span></span><br><span class="line"><span class="css">            <span class="attribute">bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">right</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: white;</span></span><br><span class="line"><span class="css">            <span class="attribute">border</span>: <span class="number">3px</span> solid black;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 500px;background-color: red&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 500px;background-color: greenyellow&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 500px;background-color: blue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d4&quot;</span>&gt;</span>å›åˆ°é¡¶éƒ¨<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœ:</p>
<p><img src="/../../../img/image-20220808103941331.png" alt="image-20220808103941331"></p>
<h1 id="4-æµ®åŠ¨å’Œå®šä½æ˜¯å¦è„±ç¦»æ–‡æ¡£æµ"><a href="#4-æµ®åŠ¨å’Œå®šä½æ˜¯å¦è„±ç¦»æ–‡æ¡£æµ" class="headerlink" title="4 æµ®åŠ¨å’Œå®šä½æ˜¯å¦è„±ç¦»æ–‡æ¡£æµ"></a>4 æµ®åŠ¨å’Œå®šä½æ˜¯å¦è„±ç¦»æ–‡æ¡£æµ</h1><p>æµ®åŠ¨&#x2F;å®šä½åçš„å…ƒç´ , <code>åŸæ¥çš„ä½ç½®</code>æ˜¯å¦è¿˜ä¿ç•™å‘¢?</p>
<ul>
<li>ä¸è„±ç¦»æ–‡æ¡£æµ<ul>
<li>ç›¸å¯¹å®šä½</li>
</ul>
</li>
<li>è„±ç¦»æ–‡æ¡£æµ<ul>
<li>ç»å¯¹å®šä½</li>
<li>å›ºå®šå®šä½</li>
<li>æµ®åŠ¨</li>
</ul>
</li>
</ul>
<h1 id="5-z-indexæ¨¡æ€æ¡†"><a href="#5-z-indexæ¨¡æ€æ¡†" class="headerlink" title="5 z-indexæ¨¡æ€æ¡†"></a>5 z-indexæ¨¡æ€æ¡†</h1><p>ä»€ä¹ˆæ˜¯z-indexæ¨¡æ€æ¡†? ä»¥ç™¾åº¦ç™»å½•ç•Œé¢ä¸ºä¾‹:</p>
<p>ç™¾åº¦ç™»é™†é¡µé¢ å…¶å®æ˜¯ä¸‰å±‚ç»“æ„</p>
<ul>
<li>æœ€åº•éƒ¨æ˜¯æ­£å¸¸å†…å®¹(z&#x3D;0)  	æœ€è¿œçš„</li>
<li>é»‘è‰²çš„é€æ˜åŒº(z&#x3D;99)  		 ä¸­é—´å±‚</li>
<li>ç™½è‰²çš„æ³¨å†ŒåŒºåŸŸ(z&#x3D;100) 	 ç¦»ç”¨æˆ·æœ€è¿‘</li>
</ul>
<p>z-indexå…¶å®å°±æ˜¯ä¸€ç§<code>å †å æ˜¾ç¤º</code>çš„çš„æ–¹æ³•,æ§åˆ¶<code>è°åœ¨ä¸Šå±‚,è°åœ¨ä¸‹å±‚</code></p>
<p><strong><font color="red">æ•°å€¼è¶Šå¤§, è¶Šä¸Šå±‚</font></strong></p>
<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.cover</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>:deepskyblue;</span></span><br><span class="line"><span class="css">            <span class="attribute">border</span>: <span class="number">2px</span> solid;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="css">            </span></span><br><span class="line"><span class="css">            <span class="attribute">position</span>: fixed;    <span class="comment">/* å›ºå®šå®šä½ï¼Œè„±ç¦»æ–‡æ¡£æµ */</span></span></span><br><span class="line"><span class="css">            <span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">top</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            <span class="attribute">margin-left</span>: -<span class="number">250px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-top</span>: -<span class="number">250px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">z-index</span>: <span class="number">99</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        </span></span><br><span class="line"><span class="css">        <span class="selector-class">.modal</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">0.5</span>);</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            <span class="comment">/* å°†å…ƒç´ å·¦ä¸Šè§’å®šä½åˆ°é¡µé¢ä¸­å¿ƒ */</span></span></span><br><span class="line"><span class="css">            <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="css">            <span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">top</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            <span class="comment">/* é€šè¿‡marginå°†å…ƒç´ çš„å†…å®¹æŒªåˆ°ä¸­é—´ */</span></span></span><br><span class="line"><span class="css">            <span class="attribute">margin-left</span>: -<span class="number">150px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-top</span>: -<span class="number">150px</span>;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            <span class="comment">/* è®¾ç½®æ˜¾ç¤ºåœ¨æœ€ä¸Šå±‚ */</span></span></span><br><span class="line"><span class="css">            <span class="attribute">z-index</span>: <span class="number">100</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        </span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cover&quot;</span>&gt;</span>æœ€åº•å±‚çš„é¡µé¢<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç™»å½•é¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>è´¦å·<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯†ç <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ˜¯å…„å¼Ÿå°±æ¥ç‚¹æˆ‘&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœ:</p>
<p><img src="/../../../img/image-20220808111427871.png" alt="image-20220808111427871"></p>
<h1 id="6-é€æ˜åº¦"><a href="#6-é€æ˜åº¦" class="headerlink" title="6 é€æ˜åº¦"></a>6 é€æ˜åº¦</h1><p>ä½¿ç”¨<code>opacity</code>è®¾ç½®é€æ˜åº¦,æ¡ˆä¾‹ä»£ç </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; <span class="attribute">content</span>=&quot;IE=edge&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; <span class="attribute">content</span>=&quot;<span class="attribute">width</span>=device-<span class="attribute">width</span>, <span class="attribute">initial</span>-scale=<span class="number">1.0</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="selector-tag">p</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">80px</span>;</span><br><span class="line">            <span class="attribute">background-color</span>: cornflowerblue;</span><br><span class="line">            <span class="comment">/* color: rgba(0, 0, 0, 0.5); */</span></span><br><span class="line">            <span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">p</span>&gt;æµ‹è¯•å­—ä½“TEST&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<p>è¡¥å……çŸ¥è¯†: opcityå’Œrgbaçš„åŒºåˆ«?</p>
<p>åœ¨<code>æ²¡æœ‰è®¾ç½®é€æ˜</code>çš„æƒ…å†µä¸‹, æ•ˆæœå¦‚ä¸‹å›¾:</p>
<p><img src="/../../../img/image-20220808142123596.png" alt="image-20220808142123596"></p>
<p>å•ç‹¬è®¾ç½®<code>opcity: 0.5</code>åå¦‚ä¸‹:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">opacity</span>: <span class="number">0.5</span>;</span><br></pre></td></tr></table></figure>



<p><img src="/../../../img/image-20220808142213251.png" alt="image-20220808142213251"></p>
<p>å•ç‹¬è®¾ç½®<code>rgbaé€æ˜åº¦0.5</code>å,å¦‚ä¸‹:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br></pre></td></tr></table></figure>



<p><img src="/../../../img/image-20220808142251359.png" alt="image-20220808142251359"></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>å‰ç«¯åŸºç¡€</category>
      </categories>
  </entry>
  <entry>
    <title>Day52-CSS-02</title>
    <url>/2022/08/03/03_Python/02_%E5%89%8D%E7%AB%AF/day52%E7%AC%94%E8%AE%B0-CSS-02/</url>
    <content><![CDATA[<p>â€œç¬¬52å¤©CSS02å­¦ä¹ ç¬”è®°â€</p>
<h1 id="1-åˆ†ç»„ä¸åµŒå¥—"><a href="#1-åˆ†ç»„ä¸åµŒå¥—" class="headerlink" title="1 åˆ†ç»„ä¸åµŒå¥—"></a>1 åˆ†ç»„ä¸åµŒå¥—</h1><h2 id="1-1-åˆ†ç»„é€‰æ‹©å™¨"><a href="#1-1-åˆ†ç»„é€‰æ‹©å™¨" class="headerlink" title="1.1 åˆ†ç»„é€‰æ‹©å™¨"></a>1.1 åˆ†ç»„é€‰æ‹©å™¨</h2><p>åœ¨æ ·å¼è¡¨ä¸­æœ‰å¾ˆå¤šå…·æœ‰ç›¸åŒæ ·å¼çš„å…ƒç´ </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: darkorange;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: darkorange;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: darkorange;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºå‡å°‘ä»£ç ï¼Œ å¯ä»¥ä½¿ç”¨åˆ†ç»„é€‰æ‹©å™¨ï¼Œå¤šä¸ªé€‰æ‹©å™¨ä¹‹é—´ä½¿ç”¨<code>é€—å·</code>åˆ†éš”</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!doctype <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="comment">/*ä½¿ç”¨åˆ†ç»„é€‰æ‹©å™¨*/</span></span><br><span class="line">        <span class="selector-tag">div</span>, <span class="selector-tag">p</span>, <span class="selector-tag">span</span> &#123;</span><br><span class="line">            <span class="attribute">color</span>: darkorange;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span>&gt;<span class="selector-tag">DIV</span>&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">p</span>&gt;PPP&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">span</span>&gt;<span class="selector-tag">SPAN</span>&lt;/<span class="selector-tag">span</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="1-2-åµŒå¥—é€‰æ‹©å™¨"><a href="#1-2-åµŒå¥—é€‰æ‹©å™¨" class="headerlink" title="1.2 åµŒå¥—é€‰æ‹©å™¨"></a>1.2 åµŒå¥—é€‰æ‹©å™¨</h2><p>å®ƒå¯èƒ½é€‚ç”¨äºé€‰æ‹©å™¨å†…éƒ¨çš„é€‰æ‹©å™¨çš„æ ·å¼ã€‚</p>
<p>åœ¨ä¸‹é¢çš„ä¾‹å­è®¾ç½®äº†å››ä¸ªæ ·å¼ï¼š</p>
<ul>
<li><strong>p{ }</strong>: ä¸ºæ‰€æœ‰ <strong>p</strong> å…ƒç´ æŒ‡å®šä¸€ä¸ªæ ·å¼ã€‚</li>
<li><strong>.marked{ }</strong>: ä¸ºæ‰€æœ‰ <strong>class&#x3D;â€markedâ€</strong> çš„å…ƒç´ æŒ‡å®šä¸€ä¸ªæ ·å¼ã€‚</li>
<li><strong>.marked p{ }</strong>: ä¸ºæ‰€æœ‰ <strong>class&#x3D;â€markedâ€</strong> å…ƒç´ å†…çš„ <strong>p</strong> å…ƒç´ æŒ‡å®šä¸€ä¸ªæ ·å¼ã€‚</li>
<li><strong>p.marked{ }</strong>: ä¸ºæ‰€æœ‰ <strong>class&#x3D;â€markedâ€</strong> çš„ <strong>p</strong> å…ƒç´ æŒ‡å®šä¸€ä¸ªæ ·å¼ã€‚</li>
</ul>
<p>æ¡ˆä¾‹ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">color</span>:blue;</span><br><span class="line">    <span class="attribute">text-align</span>:center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.marked</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">background-color</span>:red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.marked</span> <span class="selector-tag">p</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">color</span>:white;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-class">.marked</span>&#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>:underline;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="2-ä¼ªç±»é€‰æ‹©å™¨"><a href="#2-ä¼ªç±»é€‰æ‹©å™¨" class="headerlink" title="2 ä¼ªç±»é€‰æ‹©å™¨"></a>2 ä¼ªç±»é€‰æ‹©å™¨</h1><p>ä¼ªç±»é€‰æ‹©å™¨ä»¥<code>æ ‡ç­¾:çŠ¶æ€</code>çš„æ–¹å¼ä½¿ç”¨</p>
<p>æ¡ˆä¾‹ä»£ç :</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: darkseagreen;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*é“¾æ¥æœªç‚¹å‡»çš„æ ·å¼*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">a</span><span class="selector-pseudo">:link</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*é¼ æ ‡æ”¾åœ¨é“¾æ¥ä¸Šçš„æ ·å¼*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">color</span>: aqua;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*é¼ æ ‡æŒ‰ä½ä¸æ”¾çš„æ ·å¼*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">color</span>: black;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*é¼ æ ‡ç‚¹å‡»æ¾å¼€åçš„æ ·å¼*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">color</span>: blue;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*é¼ æ ‡æ”¾åœ¨æ ‡ç­¾ä¸Šçš„æ ·å¼*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">p</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: white;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*é¼ æ ‡èšç„¦åˆ°è¾“å…¥æ¡†çš„æ ·å¼ï¼ˆé¼ æ ‡ç‚¹äº†inputæ¡†ï¼‰*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">input</span><span class="selector-pseudo">:focus</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: deeppink;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://gsproj.github.io&quot;</span>&gt;</span>æˆ‘çš„åšå®¢<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://gsproj.github.io&quot;</span>&gt;</span>JUMP<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç‚¹æˆ‘è¿›å»åº·åº·<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h1 id="3-ä¼ªå…ƒç´ é€‰æ‹©å™¨"><a href="#3-ä¼ªå…ƒç´ é€‰æ‹©å™¨" class="headerlink" title="3 ä¼ªå…ƒç´ é€‰æ‹©å™¨"></a>3 ä¼ªå…ƒç´ é€‰æ‹©å™¨</h1><p>ä¼ªå…ƒç´ é€šå¸¸ç”¨æ¥å®ç°â€â€é¦–å­—æ¯å¤§å†™â€â€å’Œæ¸…é™¤æµ®åŠ¨å¸¦æ¥çš„â€œçˆ¶æ ‡ç­¾å¡Œé™·â€çš„çš„é—®é¢˜</p>
<p>æ¡ˆä¾‹ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*ä¼ªå…ƒç´ å®ç°é¦–å­—æ¯å¤§å†™*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">p</span><span class="selector-pseudo">:first</span>-letter &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">font-size</span>: <span class="number">48px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">color</span>: orange;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*æ®µå‰æ·»åŠ æ–‡å­—*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">p</span>:before &#123;</span></span><br><span class="line"><span class="css">            content: <span class="string">&#x27;åŠ åœ¨å‰é¢&#x27;</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">color</span>: palevioletred;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*æ®µåæ·»åŠ æ–‡å­—*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">p</span>:after &#123;</span></span><br><span class="line"><span class="css">            content: <span class="string">&#x27;åŠ åœ¨åé¢&#x27;</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">color</span>: palevioletred;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸€æ®µä¸èµ·çœ¼çš„æ–‡å­—<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>beforeå’ŒafteråŠ çš„æ–‡å­—æ˜¯ä¸èƒ½è¢«é¼ æ ‡é€‰æ‹©çš„ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="/../../../img/image-20220803163319946.png" alt="image-20220803163319946"></p>
<h1 id="4-é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§"><a href="#4-é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§" class="headerlink" title="4 é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§"></a>4 é€‰æ‹©å™¨çš„ä¼˜å…ˆçº§</h1><p>é€‰æ‹©å™¨ç›¸åŒï¼Œä¹¦å†™é¡ºåºä¸åŒï¼š</p>
<p>â€‹	å°±è¿‘åŸåˆ™ï¼šè°ç¦»æ ‡ç­¾<strong>æ›´è¿‘</strong>ï¼Œè°çš„ä¼˜å…ˆçº§<strong>è¶Šé«˜</strong></p>
<p>é€‰æ‹©å™¨ä¸åŒï¼š</p>
<p>â€‹	è¡Œå†… &gt; idé€‰æ‹©å™¨ &gt; ç±»é€‰æ‹©å™¨ &gt; æ ‡ç­¾é€‰æ‹©å™¨</p>
<p>ç»„åˆé€‰æ‹©å™¨é€šè¿‡è®¡ç®—æƒå€¼å¯¹æ¯”ï¼š</p>
<table>
<thead>
<tr>
<th>é€‰æ‹©å™¨</th>
<th>æƒå€¼</th>
</tr>
</thead>
<tbody><tr>
<td>! important</td>
<td>&gt;1000</td>
</tr>
<tr>
<td>å†…è”æ ·å¼</td>
<td>&gt;1000</td>
</tr>
<tr>
<td>idé€‰æ‹©å™¨ #</td>
<td>100</td>
</tr>
<tr>
<td>ç±»é€‰æ‹©å™¨ .</td>
<td>10</td>
</tr>
<tr>
<td>ä¼ªç±»é€‰æ‹©å™¨</td>
<td>10</td>
</tr>
<tr>
<td>æ ‡ç­¾é€‰æ‹©å™¨</td>
<td>1</td>
</tr>
<tr>
<td>é€šç”¨é€‰æ‹©å™¨ *</td>
<td>0</td>
</tr>
<tr>
<td>ç»§æ‰¿çš„æ ·å¼</td>
<td>0</td>
</tr>
</tbody></table>
<h1 id="5-å—æ ‡ç­¾ä¸è¡Œå†…æ ‡ç­¾"><a href="#5-å—æ ‡ç­¾ä¸è¡Œå†…æ ‡ç­¾" class="headerlink" title="5 å—æ ‡ç­¾ä¸è¡Œå†…æ ‡ç­¾"></a>5 å—æ ‡ç­¾ä¸è¡Œå†…æ ‡ç­¾</h1><p>ç‰¹ç‚¹ï¼š</p>
<p><strong>å—æ ‡ç­¾(block)</strong></p>
<p>â€‹	ç‹¬å ä¸€è¡Œï¼Œå¯ä»¥è®¾ç½®é•¿å®½</p>
<p><strong>è¡Œå†…æ ‡ç­¾(inline)</strong></p>
<p>â€‹	å¤šä¸ªæ ‡ç­¾åœ¨ä¸€è¡Œï¼Œè®¾ç½®é•¿å®½æ— æ•ˆ</p>
<p>æ¡ˆä¾‹ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*å—æ ‡ç­¾è®¾ç½®é«˜å®½æœ‰æ•ˆ*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: deeppink;</span></span><br><span class="line"><span class="css">            <span class="attribute">border</span>: <span class="number">2px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*è¡Œå†…æ ‡ç­¾è®¾ç½®é«˜å®½æ— æ•ˆ*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">span</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: deepskyblue;</span></span><br><span class="line"><span class="css">            <span class="attribute">border</span>: <span class="number">2px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å—æ ‡ç­¾01<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>å—æ ‡ç­¾02<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>è¡Œå†…æ ‡ç­¾01<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>è¡Œå†…æ ‡ç­¾02<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="/../../../img/image-20220803164759050.png" alt="image-20220803164759050"></p>
<h1 id="6-å­—ä½“å±æ€§"><a href="#6-å­—ä½“å±æ€§" class="headerlink" title="6 å­—ä½“å±æ€§"></a>6 å­—ä½“å±æ€§</h1><p>ä¿®æ”¹å­—ä½“æ ·å¼ï¼Œæ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="comment">/*font-family: &quot;Arial Black&quot;,&quot;å¾®è½¯é›…é»‘&quot;,&quot;...&quot;;  !*ç¬¬ä¸€ä¸ªä¸ç”Ÿæ•ˆå°±ç”¨åé¢çš„ å†™å¤šä¸ªå¤‡ç”¨*!*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*font-size: 24px;  !*å­—ä½“å¤§å°*!*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*font-weight: inherit;  !*bolder lighter 100~900 inheritç»§æ‰¿çˆ¶å…ƒç´ çš„ç²—ç»†å€¼*!*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*color: red;  !*ç›´æ¥å†™é¢œè‰²è‹±æ–‡*!*/</span></span><br><span class="line">    <span class="comment">/*color: #ee762e;  !*é¢œè‰²ç¼–å·*!*/</span></span><br><span class="line">    <span class="comment">/*color: rgb(128,23,45);  !*ä¸‰åŸºè‰² æ•°å­—  èŒƒå›´0-255*!*/</span></span><br><span class="line">    <span class="comment">/*color: rgba(23, 128, 91, 0.9);  !*ç¬¬å››ä¸ªå‚æ•°æ˜¯é¢œè‰²çš„é€æ˜åº¦ èŒƒå›´æ˜¯0-1*!*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="7-æ–‡å­—å±æ€§"><a href="#7-æ–‡å­—å±æ€§" class="headerlink" title="7 æ–‡å­—å±æ€§"></a>7 æ–‡å­—å±æ€§</h1><p>ä¿®æ”¹æ–‡å­—å±…ä¸­ã€ä¸‹åˆ’çº¿ç­‰æ˜¾ç¤ºæ ·å¼ï¼Œæ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">            <span class="comment">/*text-align: center;  !*å±…ä¸­*!*/</span></span><br><span class="line">            <span class="comment">/*text-align: right;*/</span></span><br><span class="line">            <span class="comment">/*text-align: left;*/</span></span><br><span class="line">            <span class="comment">/*text-align: justify;  !*ä¸¤ç«¯å¯¹é½*!*/</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">/*text-decoration: underline;*/</span></span><br><span class="line">            <span class="comment">/*text-decoration: overline;*/</span></span><br><span class="line">            <span class="comment">/*text-decoration: line-through;*/</span></span><br><span class="line">            <span class="comment">/*text-decoration: none;*/</span></span><br><span class="line">            <span class="comment">/*åœ¨htmlä¸­ æœ‰å¾ˆå¤šæ ‡ç­¾æ¸²æŸ“å‡ºæ¥çš„æ ·å¼æ•ˆæœæ˜¯ä¸€æ ·çš„*/</span></span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">            <span class="attribute">text-indent</span>: <span class="number">32px</span>;   <span class="comment">/*ç¼©è¿›32px*/</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-tag">a</span> &#123;</span><br><span class="line">            <span class="attribute">text-decoration</span>: none;  <span class="comment">/*ä¸»è¦ç”¨äºç»™aæ ‡ç­¾å»æ‰è‡ªå¸¦çš„ä¸‹åˆ’çº¿  éœ€è¦æŒæ¡*/</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h1 id="8-èƒŒæ™¯å›¾ç‰‡"><a href="#8-èƒŒæ™¯å›¾ç‰‡" class="headerlink" title="8 èƒŒæ™¯å›¾ç‰‡"></a>8 èƒŒæ™¯å›¾ç‰‡</h1><p>ç»™æ ‡ç­¾æ·»åŠ èƒŒæ™¯è‰²&#x2F;èƒŒæ™¯å›¾ç‰‡, æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; <span class="attribute">content</span>=&quot;<span class="attribute">width</span>=device-<span class="attribute">width</span>, <span class="attribute">initial</span>-scale=<span class="number">1</span>&quot;&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="selector-id">#d1</span> &#123;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">            <span class="attribute">background-color</span>: red;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-id">#d2</span> &#123;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">            <span class="attribute">background-color</span>: green;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-id">#d3</span> &#123;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">            <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;222.png&quot;</span>);	<span class="comment">/*æ·»åŠ èƒŒæ™¯å›¾ç‰‡*/</span></span><br><span class="line">            <span class="attribute">background-attachment</span>: fixed;	<span class="comment">/*èƒŒæ™¯ä¿æŒä¸åŠ¨*/</span></span><br><span class="line">            <span class="attribute">background-repeat</span>: no-repeat;   <span class="comment">/*èƒŒæ™¯å›¾ä¸å¹³é“º*/</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-id">#d4</span> &#123;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">            <span class="attribute">background-color</span>: aqua;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> id=&quot;d1&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> id=&quot;d2&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> id=&quot;d3&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> id=&quot;d4&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<h1 id="9-è¾¹æ¡†"><a href="#9-è¾¹æ¡†" class="headerlink" title="9 è¾¹æ¡†"></a>9 è¾¹æ¡†</h1><p>è®¾ç½®å…ƒç´ çš„è¾¹æ¡†æ ·å¼ï¼Œæ¡ˆä¾‹ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            <span class="attribute">border-width</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">border-style</span>: solid;</span></span><br><span class="line"><span class="css">            <span class="attribute">border-color</span>: green;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="comment">/*border-left-width: 5px;*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*border-left-color: red;*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*border-left-style: dotted;*/</span></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            <span class="comment">/*border-right-width: 10px;*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*border-right-color: greenyellow;*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*border-right-style: solid;*/</span></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            <span class="comment">/*border-top-width: 15px;*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*border-top-color: deeppink;*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*border-top-style: dashed;*/</span></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            <span class="comment">/*border-bottom-width: 10px;*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*border-bottom-color: tomato;*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*border-bottom-style: solid;*/</span></span></span><br><span class="line"><span class="css">            <span class="attribute">border</span>: <span class="number">3px</span> solid red;  <span class="comment">/*ä¸‰è€…ä½ç½®å¯ä»¥éšæ„å†™*/</span></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#d1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: greenyellow;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">border-radius</span>: <span class="number">50%</span>;  <span class="comment">/*è®¾ç½®è¾¹æ¡†æ¤­åœ†ï¼šç›´æ¥å†™50%å³å¯ é•¿å®½ä¸€æ ·å°±æ˜¯åœ† ä¸ä¸€æ ·å°±æ˜¯æ¤­åœ†*/</span></span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„æ•…äº‹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>ä¹Œæ‹‰é˜¿æ‹‰è•¾<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="10-displayå±æ€§"><a href="#10-displayå±æ€§" class="headerlink" title="10 displayå±æ€§"></a>10 displayå±æ€§</h1><p>displayå±æ€§å¸¸ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">display</span>:none	éšè—å…ƒç´ ï¼Œä½ç½®ä¸å ç”¨</span><br><span class="line">display:block	è½¬æ¢ä¸ºå—å…ƒç´ ï¼ˆç‹¬å ä¸€è¡Œï¼Œå¯è°ƒèŠ‚é«˜å®½ï¼‰</span><br><span class="line">display:inline	è½¬æ¢ä¸ºè¡Œå†…å…ƒç´ ï¼ˆéç‹¬å ä¸€è¡Œï¼Œä¸å¯è°ƒèŠ‚é«˜å®½ï¼‰</span><br><span class="line">display:inline-block	è½¬æ¢ä¸ºè¡Œå†…å—å…ƒç´ ï¼ˆéç‹¬å ä¸€è¡Œï¼Œå¯è°ƒèŠ‚é«˜å®½ï¼‰</span><br></pre></td></tr></table></figure>

<p>å¦ä¸€ä¸ªéšè—å±æ€§çš„æ–¹æ³•ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">visibility</span>: hidden</span><br></pre></td></tr></table></figure>

<p>ä¸<code>display:none</code>çš„åŒºåˆ«ï¼šéšè—çš„å±æ€§**<font color='red'>ä»ç„¶å ç”¨ä½ç½®</font>**</p>
<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="comment">/*#d1 &#123;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*    !*display: none;  !*éšè—æ ‡ç­¾ä¸å±•ç¤ºåˆ°å‰ç«¯é¡µé¢å¹¶ä¸”åŸæ¥çš„ä½ç½®ä¹Ÿä¸å†å æœ‰äº† ä½†æ˜¯è¿˜å­˜åœ¨äºæ–‡æ¡£ä¸Š*!*!*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*    display: inline;  !*å°†æ ‡ç­¾è®¾ç½®ä¸ºè¡Œå†…æ ‡ç­¾çš„ç‰¹ç‚¹*!*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*&#125;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*#d2 &#123;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*    display: inline;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*&#125;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*#d1 &#123;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*    display: block;  !*å°†æ ‡ç­¾è®¾ç½®æˆå—å„¿çº§æ ‡ç­¾çš„ç‰¹ç‚¹*!*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*&#125;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*#d2 &#123;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*    display: block;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*&#125;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*#d1 &#123;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*    display: inline-block;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*&#125;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*#d2 &#123;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*    display: inline-block;  !*æ ‡ç­¾å³å¯ä»¥åœ¨ä¸€è¡Œæ˜¾ç¤ºåˆå¯ä»¥è®¾ç½®é•¿å®½*!*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*&#125;*/</span></span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: none&quot;</span>&gt;</span>div1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>div2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;visibility: hidden&quot;</span>&gt;</span>å•çº¯çš„éšè— ä½ç½®è¿˜åœ¨<span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>div4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;div id=&quot;d1&quot; style=&quot;height: 100px;width: 100px;background-color: red&quot;&gt;01&lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;div id=&quot;d2&quot; style=&quot;height: 100px;width: 100px;background-color: greenyellow&quot;&gt;02&lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;span id=&quot;d1&quot; style=&quot;height: 100px;width: 100px;background-color: red&quot;&gt;span&lt;/span&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;span id=&quot;d2&quot; style=&quot;height: 100px;width: 100px;background-color: greenyellow&quot;&gt;span&lt;/span&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--&lt;div id=&quot;d1&quot; style=&quot;height: 100px;width: 100px;background-color: red&quot;&gt;01&lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;div id=&quot;d2&quot; style=&quot;height: 100px;width: 100px;background-color: greenyellow&quot;&gt;02&lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="11-ç›’å­æ¨¡å‹"><a href="#11-ç›’å­æ¨¡å‹" class="headerlink" title="11 ç›’å­æ¨¡å‹"></a>11 ç›’å­æ¨¡å‹</h1><p>ä»€ä¹ˆæ˜¯ç›’å­æ¨¡å‹ï¼Ÿ</p>
<ul>
<li>å°±ä»¥å¿«é€’ç›’ä¸ºä¾‹</li>
<li>å¿«é€’ç›’ä¸å¿«é€’ç›’ä¹‹é—´çš„è·ç¦»(æ ‡ç­¾ä¸æ ‡ç­¾ä¹‹é—´çš„è·ç¦» marginå¤–è¾¹è·)</li>
<li>ç›’å­çš„åšåº¦(æ ‡ç­¾çš„è¾¹æ¡† border)</li>
<li>ç›’å­é‡Œé¢çš„ç‰©ä½“åˆ°ç›’å­çš„è·ç¦»(å†…å®¹åˆ°è¾¹æ¡†çš„è·ç¦»  paddingå†…è¾¹è·)</li>
<li>ç‰©ä½“çš„å¤§å°(å†…å®¹ content)</li>
</ul>
<p>å¦‚æœä½ æƒ³è¦è°ƒæ•´æ ‡ç­¾ä¸æ ‡ç­¾ä¹‹é—´çš„è·ç¦» ä½ å°±å¯ä»¥è°ƒæ•´margin</p>
<blockquote>
<p>è¡¥å……ï¼šæµè§ˆå™¨ä¼šè‡ªå¸¦8pxçš„marginï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬åœ¨å†™é¡µé¢çš„æ—¶å€™ï¼Œä¸Šæ¥å°±ä¼šå…ˆå°†bodyçš„marginå»é™¤</p>
</blockquote>
<p><img src="/../../../img/image-20220804084912153.png" alt="image-20220804084912153"></p>
<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;  <span class="comment">/*ä¸Šä¸‹å·¦å³å…¨æ˜¯0</span></span></span><br><span class="line"><span class="comment"><span class="css">            /*margin: 10px 20px;  !* ç¬¬ä¸€ä¸ªä¸Šä¸‹ ç¬¬äºŒä¸ªå·¦å³*!*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*margin: 10px 20px 30px;  !*ç¬¬ä¸€ä¸ªä¸Š  ç¬¬äºŒä¸ªå·¦å³  ç¬¬ä¸‰ä¸ªä¸‹*!*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*margin: 10px 20px 30px 40px;  !*ä¸Š å³ ä¸‹ å·¦*!*/</span></span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        <span class="comment">/*p &#123;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*    margin-left: 0;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*    margin-top: 0;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*    margin-right: 0;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*    margin-bottom: 0;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*&#125;*/</span></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#d1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-bottom</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#d2</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-top</span>: <span class="number">20px</span>;  <span class="comment">/*ä¸å åŠ  åªå–å¤§çš„*/</span></span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#dd</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span> auto;  <span class="comment">/*åªèƒ½åšåˆ°æ ‡ç­¾çš„æ°´å¹³å±…ä¸­*/</span></span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">border</span>: <span class="number">3px</span> solid red;</span></span><br><span class="line"><span class="css">            <span class="comment">/*padding-left: 10px;*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*padding-top: 20px;*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*padding-right: 20px;*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*padding-bottom: 50px;*/</span></span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            <span class="comment">/*padding: 10px;*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*padding: 10px 20px;*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*padding: 10px 20px 30px;*/</span></span></span><br><span class="line"><span class="css">            <span class="comment">/*padding: 10px 20px 30px 40px;*/</span>  <span class="comment">/*è§„å¾‹å’Œmarginä¸€æ¨¡ä¸€æ ·*/</span></span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;p style=&quot;border: 1px solid red;&quot; id=&quot;d1&quot;&gt;ppp&lt;/p&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;p style=&quot;border: 1px solid orange;&quot; id=&quot;d2&quot;&gt;ppp&lt;/p&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;div style=&quot;border: 3px solid red;height: 400px;width: 400px&quot;&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;div id=&#x27;dd&#x27; style=&quot;border: 1px solid orange;height: 50px;width: 50px;background-color: blue;&quot;&gt;&lt;/div&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;/div&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ppp<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="12-æµ®åŠ¨"><a href="#12-æµ®åŠ¨" class="headerlink" title="12 æµ®åŠ¨"></a>12 æµ®åŠ¨</h1><p>æµ®åŠ¨çš„å…ƒç´ ï¼Œæ²¡æœ‰å—çº§å’Œè¡Œå†…ä¸€è¯´ï¼Œæœ¬èº«å¤šå¤§æµ®èµ·æ¥ä¹‹åå°±å å¤šå¤§</p>
<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">åªè¦æ˜¯è®¾è®¡åˆ°é¡µé¢çš„å¸ƒå±€ä¸€èˆ¬éƒ½æ˜¯ç”¨æµ®åŠ¨æ¥æå‰è§„åˆ’å¥½</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#d1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: left;  <span class="comment">/*æµ®åŠ¨  æµ®åˆ°ç©ºä¸­å¾€å·¦é£˜*/</span></span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#d2</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: greenyellow;</span></span><br><span class="line"><span class="css">            <span class="attribute">float</span>: right;   <span class="comment">/*æµ®åŠ¨ æµ®åˆ°ç©ºä¸­å¾€å³é£˜*/</span></span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>overflow:hidden</code>è¶…å‡ºéƒ¨åˆ†éšè—ï¼Œç”¨æ¥è§£å†³å¤–è¾¹è·å¡Œé™·é—®é¢˜ï¼š</p>
<p>çˆ¶çº§å…ƒç´ å†…éƒ¨æœ‰å­å…ƒç´ ï¼Œå¦‚æœç»™å­å…ƒç´ æ·»åŠ margin-topæ ·å¼ï¼Œé‚£ä¹ˆçˆ¶çº§å…ƒç´ ä¹Ÿä¼šè·Ÿç€ä¸‹æ¥ï¼Œé€ æˆå¤–è¾¹è·å¡Œé™·ã€‚</p>
<h1 id="13-æµ®åŠ¨å¸¦æ¥çš„å½±å“"><a href="#13-æµ®åŠ¨å¸¦æ¥çš„å½±å“" class="headerlink" title="13 æµ®åŠ¨å¸¦æ¥çš„å½±å“"></a>13 æµ®åŠ¨å¸¦æ¥çš„å½±å“</h1>]]></content>
      <categories>
        <category>Python</category>
        <category>å‰ç«¯åŸºç¡€</category>
      </categories>
  </entry>
  <entry>
    <title>Day57-JQuery-02</title>
    <url>/2022/08/25/03_Python/02_%E5%89%8D%E7%AB%AF/day57%E7%AC%94%E8%AE%B0-JQuery-02/</url>
    <content><![CDATA[<p>â€œç¬¬57å¤©JQueryï¼ˆ02ï¼‰å­¦ä¹ ç¬”è®°â€</p>
<p>ä»Šå¤©ä¸»è¦å†…å®¹</p>
<ul>
<li>jQueryæ“ä½œæ ‡ç­¾</li>
<li>jQueryç»‘å®šäº‹ä»¶</li>
<li>jQueryè¡¥å……çŸ¥è¯†ç‚¹</li>
<li>jQueryåŠ¨ç”»æ•ˆæœ(äº†è§£)</li>
<li>Bootstrap(å‰ç«¯æ¡†æ¶)å¼€å¤´</li>
</ul>
<h1 id="1-JQueryç»ƒä¹ é¢˜"><a href="#1-JQueryç»ƒä¹ é¢˜" class="headerlink" title="1 JQueryç»ƒä¹ é¢˜"></a>1 JQueryç»ƒä¹ é¢˜</h1><p><a href="https://github.com/gsproj/gsproj.github.io/blob/source/source/_posts/03_Python/02_%E5%89%8D%E7%AB%AF/sources/day57/jQuery%E7%BB%83%E4%B9%A0%E9%A2%98.html">ç»ƒä¹ é¢˜é¡µé¢çš„æºç </a></p>
<p>æ‰¾åˆ°æœ¬é¡µé¢ä¸­idæ˜¯<code>i1</code>çš„æ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#i1&#x27;</span>)</span><br><span class="line">S.fn.initÂ [div#i1.container]</span><br><span class="line">$(<span class="string">&#x27;#i1&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">&lt;div id=â€‹<span class="string">&quot;i1&quot;</span> <span class="class"><span class="keyword">class</span></span>=â€‹<span class="string">&quot;container&quot;</span>&gt;â€‹â€¦â€‹&lt;/div&gt;â€‹</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æœ¬é¡µé¢ä¸­æ‰€æœ‰çš„<code>h2</code>æ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;h2&#x27;</span>)</span><br><span class="line">S.fn.initÂ [h2, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;h2&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">&lt;h2&gt;â€‹ç»ƒä¹ é¢˜ï¼šâ€‹&lt;/h2&gt;â€‹</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æœ¬é¡µé¢ä¸­æ‰€æœ‰çš„<code>input</code>æ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;input&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">9</span>)Â [input#exampleInputEmail1.form-control, input#exampleInputPassword1.form-control, input#exampleInputFile, input, input, input, input, input#optionsRadios1, input#optionsRadios2, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;input&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">&lt;input type=â€‹<span class="string">&quot;email&quot;</span> <span class="class"><span class="keyword">class</span></span>=â€‹<span class="string">&quot;form-control&quot;</span> id=â€‹<span class="string">&quot;exampleInputEmail1&quot;</span> placeholder=â€‹<span class="string">&quot;Email&quot;</span>&gt;â€‹</span><br><span class="line">$(<span class="string">&#x27;input&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">&lt;input type=â€‹<span class="string">&quot;password&quot;</span> <span class="class"><span class="keyword">class</span></span>=â€‹<span class="string">&quot;form-control&quot;</span> id=â€‹<span class="string">&quot;exampleInputPassword1&quot;</span> placeholder=â€‹<span class="string">&quot;Password&quot;</span>&gt;â€‹</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æœ¬é¡µé¢æ‰€æœ‰æ ·å¼ç±»ä¸­æœ‰<code>c1</code>çš„æ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;.c1&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">2</span>)Â [h1.c1, h1.c1, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;.c1&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">&lt;h1 <span class="class"><span class="keyword">class</span></span>=â€‹<span class="string">&quot;c1&quot;</span>&gt;â€‹Jasonâ€‹&lt;/h1&gt;â€‹</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æœ¬é¡µé¢æ‰€æœ‰æ ·å¼ç±»ä¸­æœ‰<code>btn-default</code>çš„æ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;.btn-default&#x27;</span>)</span><br><span class="line">S.fn.initÂ [button#btnSubmit.btn.btn-<span class="keyword">default</span>, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;.btn-default&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">&lt;button id=â€‹<span class="string">&quot;btnSubmit&quot;</span> type=â€‹<span class="string">&quot;submit&quot;</span> <span class="class"><span class="keyword">class</span></span>=â€‹<span class="string">&quot;btn btn-default&quot;</span>&gt;â€‹æäº¤â€‹&lt;/button&gt;â€‹</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æœ¬é¡µé¢æ‰€æœ‰æ ·å¼ç±»ä¸­æœ‰<code>c1</code>çš„æ ‡ç­¾å’Œæ‰€æœ‰<code>h2</code>æ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;.c1, h2&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">3</span>)Â [h1.c1, h1.c1, h2, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æœ¬é¡µé¢æ‰€æœ‰æ ·å¼ç±»ä¸­æœ‰<code>c1</code>çš„æ ‡ç­¾å’Œidæ˜¯<code>p3</code>çš„æ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;.c1, #p3&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">3</span>)Â [h1.c1, h1.c1, p#p3.divider, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;.c1, #p3&#x27;</span>)[<span class="number">2</span>]</span><br><span class="line">&lt;p id=â€‹<span class="string">&quot;p3&quot;</span> <span class="class"><span class="keyword">class</span></span>=â€‹<span class="string">&quot;divider&quot;</span>&gt;â€‹&lt;/p&gt;â€‹</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æœ¬é¡µé¢æ‰€æœ‰æ ·å¼ç±»ä¸­æœ‰<code>c1</code>çš„æ ‡ç­¾å’Œæ‰€æœ‰æ ·å¼ç±»ä¸­æœ‰<code>btn</code>çš„æ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;.c1, .btn&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">11</span>)Â [h1.c1, h1.c1, a.btn.btn-primary.btn-lg, button.btn.btn-warning, button.btn.btn-danger, button.btn.btn-warning, button.btn.btn-danger, button.btn.btn-warning, button.btn.btn-danger, button#btnSubmit.btn.btn-<span class="keyword">default</span>, a.btn.btn-success, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æœ¬é¡µé¢ä¸­<code>form</code>æ ‡ç­¾ä¸­çš„æ‰€æœ‰<code>input</code>æ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;form&#x27;</span>).find(<span class="string">&#x27;input&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">3</span>)Â [input#exampleInputEmail1.form-control, input#exampleInputPassword1.form-control, input#exampleInputFile, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æœ¬é¡µé¢ä¸­è¢«åŒ…è£¹åœ¨<code>label</code>æ ‡ç­¾å†…çš„<code>input</code>æ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;label input&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">6</span>)Â [input, input, input, input, input#optionsRadios1, input#optionsRadios2, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æœ¬é¡µé¢ä¸­ç´§æŒ¨åœ¨<code>label</code>æ ‡ç­¾åé¢çš„<code>input</code>æ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;label+input&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">3</span>)Â [input#exampleInputEmail1.form-control, input#exampleInputPassword1.form-control, input#exampleInputFile, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æœ¬é¡µé¢ä¸­idä¸º<code>p2</code>çš„æ ‡ç­¾åé¢æ‰€æœ‰å’Œå®ƒåŒçº§çš„<code>li</code>æ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#p2~li&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">8</span>)Â [li, li, li, li, li, li, li, li, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°idå€¼ä¸º<code>f1</code>çš„æ ‡ç­¾å†…éƒ¨çš„ç¬¬ä¸€ä¸ªinputæ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#f1 input:first&#x27;</span>)</span><br><span class="line">S.fn.initÂ [input#exampleInputEmail1.form-control, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;#f1 input:first&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">&lt;input type=â€‹<span class="string">&quot;email&quot;</span> <span class="class"><span class="keyword">class</span></span>=â€‹<span class="string">&quot;form-control&quot;</span> id=â€‹<span class="string">&quot;exampleInputEmail1&quot;</span> placeholder=â€‹<span class="string">&quot;Email&quot;</span>&gt;â€‹</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°idå€¼ä¸º<code>my-checkbox</code>çš„æ ‡ç­¾å†…éƒ¨æœ€åä¸€ä¸ªinputæ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#my-checkbox input:last&#x27;</span>)</span><br><span class="line">S.fn.initÂ [input, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°idå€¼ä¸º<code>my-checkbox</code>çš„æ ‡ç­¾å†…éƒ¨æ²¡æœ‰è¢«é€‰ä¸­çš„é‚£ä¸ªinputæ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#my-checkbox input[checked!=&quot;checked&quot;]&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">3</span>)Â [input, input, input, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°æ‰€æœ‰å«æœ‰<code>input</code>æ ‡ç­¾çš„<code>label</code>æ ‡ç­¾</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;label:has(&quot;input&quot;)&#x27;</span>)</span><br><span class="line">S.fn.init(<span class="number">6</span>)Â [label, label, label, label, label, label, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<h1 id="2-JQueryæ“ä½œæ ‡ç­¾"><a href="#2-JQueryæ“ä½œæ ‡ç­¾" class="headerlink" title="2 JQueryæ“ä½œæ ‡ç­¾"></a>2 JQueryæ“ä½œæ ‡ç­¾</h1><h2 id="2-1-æ“ä½œClass"><a href="#2-1-æ“ä½œClass" class="headerlink" title="2.1 æ“ä½œClass"></a>2.1 æ“ä½œClass</h2><p>JQueryæ“ä½œç±»ä¸»è¦æœ‰å››ä¸ªæ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th>JQueryæ–¹æ³•</th>
<th>JSæ–¹æ³•</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>addClass()</td>
<td>classList.add()</td>
<td>æ·»åŠ ç±»</td>
</tr>
<tr>
<td>removeClass()</td>
<td>classList.remove()</td>
<td>ç§»é™¤ç±»</td>
</tr>
<tr>
<td>hasClass()</td>
<td>classList.contains()</td>
<td>æŸ¥è¯¢æ˜¯å¦åŒ…å«æŸä¸ªç±»</td>
</tr>
<tr>
<td>toggleClass()</td>
<td>classList.toggle()</td>
<td>æœ‰åˆ™ç§»é™¤ï¼Œæ— åˆ™æ·»åŠ </td>
</tr>
</tbody></table>
<p>æ“ä½œæ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<p>é¡µé¢ä»£ç </p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.c1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: coral;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.c2</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">border</span>: <span class="number">20px</span> solid red;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.c3</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-top</span>: <span class="number">20%</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin-left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;jquery-3.6.0.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;c1 c2 c3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ“ä½œç±»ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç§»é™¤ç±»</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).removeClass(<span class="string">&#x27;c2&#x27;</span>)</span><br><span class="line">S.fn.initÂ [div.c1.c3, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"><span class="comment">// æ·»åŠ ç±»</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).addClass(<span class="string">&#x27;c2&#x27;</span>)</span><br><span class="line">S.fn.initÂ [div.c1.c3.c2, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ˜¯å¦åŒ…å«ç±»</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).hasClass(<span class="string">&#x27;c1&#x27;</span>)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="comment">// æœ‰åˆ™ç§»é™¤ï¼Œæ— åˆ™æ·»åŠ </span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).toggleClass(<span class="string">&#x27;c1&#x27;</span>)</span><br><span class="line">S.fn.initÂ [div.c2.c3, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).toggleClass(<span class="string">&#x27;c1&#x27;</span>)</span><br><span class="line">S.fn.initÂ [div.c2.c3.c1, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).toggleClass(<span class="string">&#x27;c1&#x27;</span>)</span><br><span class="line">S.fn.initÂ [div.c2.c3, <span class="attr">prevObject</span>: S.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<h2 id="2-2-æ“ä½œCSS"><a href="#2-2-æ“ä½œCSS" class="headerlink" title="2.2 æ“ä½œCSS"></a>2.2 æ“ä½œCSS</h2><p>JQueryæ“ä½œCSSçš„æ–¹å¼ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€‰æ‹©çš„æ ‡ç­¾.css(&#x27;å±æ€§&#x27;,&#x27;å€¼&#x27;)</span></span><br><span class="line"><span class="comment">// å³ï¼š</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).css(<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;red&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/jquery/3.6.0/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>111<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ“ä½œCSSï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç¬¬ä¸€ä¸ªpæ ‡ç­¾ï¼Œå˜ä¸ºçº¢è‰²</span></span><br><span class="line">$(<span class="string">&#x27;p&#x27;</span>).first().css(<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">w.fn.initÂ [p, <span class="attr">prevObject</span>: w.fn.init(<span class="number">3</span>)]</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥è¿èµ·æ¥æ“ä½œ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è®©ç¬¬2ä¸ªpæ ‡ç­¾å˜ä¸ºç»¿è‰²ï¼Œè®©æœ€åä¸€ä¸ªpæ ‡ç­¾å˜ä¸ºé»„è‰²</span></span><br><span class="line">$(<span class="string">&#x27;p&#x27;</span>).last().css(<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;green&#x27;</span>).prev().css(<span class="string">&#x27;color&#x27;</span>,<span class="string">&#x27;yellow&#x27;</span>)</span><br><span class="line">w.fn.initÂ [p, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¡¥å……ï¼š</p>
<p>ä¸ºä»€ä¹ˆJQueryå¯ä»¥è¿èµ·æ¥æ“ä½œï¼Ÿ</p>
<p>å› ä¸ºæ“ä½œå®Œä¹‹åè¿”å›çš„è¿˜æ˜¯JQueryå¯¹è±¡</p>
<p>å®é™…ä¸Šæ˜¯ä¸€ç§é“¾å¼æ“ä½œï¼Œç”¨Pythonçš„æ–¹å¼è¿˜åŸï¼Œå¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;<span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">func1</span>(<span class="params">self</span>):</span></span><br><span class="line">       <span class="built_in">print</span>(<span class="string">&#x27;func1&#x27;</span>)</span><br><span class="line">       <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">func2</span>(<span class="params">self</span>):</span></span><br><span class="line">       <span class="built_in">print</span>(<span class="string">&#x27;func2&#x27;</span>)</span><br><span class="line">       <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;obj = MyClass()</span><br><span class="line">&gt;obj.func1().func2()</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="2-3-æ“ä½œä½ç½®"><a href="#2-3-æ“ä½œä½ç½®" class="headerlink" title="2.3 æ“ä½œä½ç½®"></a>2.3 æ“ä½œä½ç½®</h2><p>æ“ä½œä½ç½®éœ€è¦äº†è§£</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>offset()</td>
<td>ç›¸è¾ƒäºæµè§ˆå™¨çª—å£ï¼Œç§»åŠ¨ä½ç½®</td>
</tr>
<tr>
<td>position()</td>
<td>ç›¸å¯¹äºçˆ¶æ ‡ç­¾ï¼Œç§»åŠ¨ä½ç½®</td>
</tr>
<tr>
<td>scrollTop()</td>
<td>è·å–&#x2F;è®¾ç½®æ»šåŠ¨æ¡çš„ä½ç½®ï¼ˆå·¦å³ï¼‰</td>
</tr>
<tr>
<td>scrollLeft()</td>
<td>è·å–&#x2F;è®¾ç½®æ»šåŠ¨æ¡çš„ä½ç½®ï¼ˆä¸Šä¸‹ï¼‰</td>
</tr>
</tbody></table>
<h3 id="2-3-1-offset-å’Œposition-æ¡ˆä¾‹"><a href="#2-3-1-offset-å’Œposition-æ¡ˆä¾‹" class="headerlink" title="2.3.1 offset()å’Œposition()æ¡ˆä¾‹"></a>2.3.1 offset()å’Œposition()æ¡ˆä¾‹</h3><p>é¡µé¢ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="css">            <span class="attribute">top</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">left</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ppp<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ“ä½œä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// offsetç§»åŠ¨pæ ‡ç­¾</span></span><br><span class="line">$(<span class="string">&#x27;p&#x27;</span>).offset(&#123;<span class="attr">top</span>:<span class="number">10</span>,<span class="attr">left</span>:<span class="number">10</span>&#125;)</span><br><span class="line">w.fn.initÂ [p, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// positionè·å–æ ‡ç­¾çš„ä½ç½®</span></span><br><span class="line">$(<span class="string">&#x27;p&#x27;</span>).position()</span><br><span class="line">&#123;<span class="attr">top</span>: -<span class="number">6</span>, <span class="attr">left</span>: <span class="number">10</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-2-scrollTop-æ¡ˆä¾‹"><a href="#2-3-2-scrollTop-æ¡ˆä¾‹" class="headerlink" title="2.3.2 scrollTop()æ¡ˆä¾‹"></a>2.3.2 scrollTop()æ¡ˆä¾‹</h3><p>é¡µé¢ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.c1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.c2</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: blue;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.c3</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;c2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;c3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è·å–å½“å‰çª—å£ä¸‹æ‹‰æ¡†çš„ä½ç½®</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">window</span>).scrollTop()</span><br><span class="line"><span class="number">400</span></span><br></pre></td></tr></table></figure>

<p>è®¾ç½®å½“å‰çª—å£ä¸‹æ‹‰æ¡†çš„ä½ç½®</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">window</span>).scrollTop(<span class="number">20</span>)</span><br><span class="line">w.fn.initÂ [Window]</span><br></pre></td></tr></table></figure>

<h2 id="2-4-æ“ä½œå°ºå¯¸"><a href="#2-4-æ“ä½œå°ºå¯¸" class="headerlink" title="2.4 æ“ä½œå°ºå¯¸"></a>2.4 æ“ä½œå°ºå¯¸</h2><p>æ“ä½œæ ‡ç­¾å°ºå¯¸çš„æ–¹æ³•æœ‰å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>height()</td>
<td>è®¾ç½®æ ‡ç­¾å†…å®¹çš„å®½åº¦</td>
</tr>
<tr>
<td>width()</td>
<td>è®¾ç½®æ ‡ç­¾å†…å®¹çš„é«˜åº¦</td>
</tr>
<tr>
<td>innerHeight()</td>
<td>è®¾ç½®æ ‡ç­¾å†…é«˜</td>
</tr>
<tr>
<td>innerWidth()</td>
<td>è®¾ç½®æ ‡ç­¾å†…å®½</td>
</tr>
<tr>
<td>outerHeight()</td>
<td>è®¾ç½®æ ‡ç­¾å¤–é«˜</td>
</tr>
<tr>
<td>outerWidth()</td>
<td>è®¾ç½®æ ‡ç­¾å¤–å®½</td>
</tr>
</tbody></table>
<p>å…³äºè¿™äº›æ–¹æ³•æ§åˆ¶çš„ä½ç½®ï¼Œå›¾ç¤ºå›¾ä¸‹ï¼š</p>
<p><img src="/../../../img/image-20220825165519019.png" alt="image-20220825165519019"></p>
<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä¸åŠ å‚æ•°ï¼Œè·å–æ ‡ç­¾å®½åº¦/é«˜åº¦</span></span><br><span class="line">$(<span class="string">&#x27;p&#x27;</span>).last().width()</span><br><span class="line"><span class="number">942</span></span><br><span class="line">$(<span class="string">&#x27;p&#x27;</span>).last().innerHeight()</span><br><span class="line"><span class="number">21</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æŒ‡å®šå‚æ•°ï¼Œè®¾ç½®æ ‡ç­¾å®½åº¦/é«˜åº¦</span></span><br><span class="line">$(<span class="string">&#x27;p&#x27;</span>).last().innerHeight(<span class="number">300</span>)</span><br><span class="line">w.fn.initÂ [p, <span class="attr">prevObject</span>: w.fn.init(<span class="number">3</span>)]</span><br></pre></td></tr></table></figure>

<h2 id="2-5-æ–‡æœ¬æ“ä½œ"><a href="#2-5-æ–‡æœ¬æ“ä½œ" class="headerlink" title="2.5 æ–‡æœ¬æ“ä½œ"></a>2.5 æ–‡æœ¬æ“ä½œ</h2><p>ä¸»è¦æ–¹æ³•å¦‚ä¸‹</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>text()</td>
<td>è·å–æ ‡ç­¾å†…çš„æ–‡æœ¬</td>
</tr>
<tr>
<td>html()</td>
<td>è·å–æ ‡ç­¾å†…çš„HTMLä»£ç </td>
</tr>
</tbody></table>
<p>æ¡ˆä¾‹ä»£ç ï¼š</p>
<p>HTML:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span>ç«¥ç¨š</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>ä½™å¿†ç«¥ç¨šæ—¶<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>èƒ½å¼ ç›®å¯¹æ—¥<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>æ˜å¯Ÿç§‹æ¯«<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;d2&quot;</span>&gt;</span>222<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;d3&quot;</span>&gt;</span>333<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>JS:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–æ ‡ç­¾å†…éƒ¨æ–‡æœ¬</span></span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).text()</span><br><span class="line"><span class="string">&#x27;ç«¥ç¨š\n    ä½™å¿†ç«¥ç¨šæ—¶\n    èƒ½å¼ ç›®å¯¹æ—¥\n    æ˜å¯Ÿç§‹æ¯«\n&#x27;</span></span><br><span class="line"><span class="comment">// è·å–æ ‡ç­¾å†…éƒ¨HTMLä»£ç </span></span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).html()</span><br><span class="line"><span class="string">&#x27;ç«¥ç¨š\n    &lt;p class=&quot;c1&quot;&gt;ä½™å¿†ç«¥ç¨šæ—¶&lt;/p&gt;\n    &lt;p class=&quot;c1&quot;&gt;èƒ½å¼ ç›®å¯¹æ—¥&lt;/p&gt;\n    &lt;p class=&quot;c1&quot;&gt;æ˜å¯Ÿç§‹æ¯«&lt;/p&gt;\n&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-6-æ“ä½œValue"><a href="#2-6-æ“ä½œValue" class="headerlink" title="2.6 æ“ä½œValue"></a>2.6 æ“ä½œValue</h2><p>JQueryä¸­ä½¿ç”¨<code>val()</code>æ–¹æ³•è·å–<code>input</code>æ ‡ç­¾çš„<code>value</code>å±æ€§å€¼</p>
<p>æ¡ˆä¾‹HTMLä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æµ‹è¯•&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;d2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ™®é€šè¾“å…¥æ¡†-å€¼æ“ä½œ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–æ ‡ç­¾d1çš„valueå€¼</span></span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).val()</span><br><span class="line"><span class="string">&#x27;æµ‹è¯•&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®æ ‡ç­¾d1çš„valueå€¼</span></span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).val(<span class="string">&#x27;æˆ‘æ¢å€¼äº†&#x27;</span>)</span><br><span class="line">w.fn.initÂ [input#d1]</span><br></pre></td></tr></table></figure>

<p>æ–‡ä»¶é€‰æ‹©æ¡†çš„å€¼æ“ä½œ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–å€¼</span></span><br><span class="line">$(<span class="string">&#x27;#d2&#x27;</span>).val()</span><br><span class="line"><span class="string">&#x27;C:\\fakepath\\TFile.txt&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è½¬æ¢ä¸ºæ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">$(<span class="string">&#x27;#d2&#x27;</span>)[<span class="number">0</span>].files[<span class="number">0</span>]</span><br><span class="line">FileÂ &#123;<span class="attr">name</span>: <span class="string">&#x27;TFile.txt&#x27;</span>, <span class="attr">lastModified</span>: <span class="number">1661233436430</span>, <span class="attr">lastModifiedDate</span>: Tue Aug <span class="number">23</span> <span class="number">2022</span> <span class="number">13</span>:<span class="number">43</span>:<span class="number">56</span> GMT+<span class="number">0800</span> (ä¸­å›½æ ‡å‡†æ—¶é—´), <span class="attr">webkitRelativePath</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">size</span>: <span class="number">797</span>,Â â€¦&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-7-æ“ä½œå±æ€§"><a href="#2-7-æ“ä½œå±æ€§" class="headerlink" title="2.7 æ“ä½œå±æ€§"></a>2.7 æ“ä½œå±æ€§</h2><p>æœ‰å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>attr(name, value)</td>
<td>è®¾ç½®å±æ€§nameçš„value</td>
</tr>
<tr>
<td>attr(name)</td>
<td>è·å–å±æ€§nameçš„å€¼</td>
</tr>
<tr>
<td>removeAttr(name)</td>
<td>ç§»é™¤nameå±æ€§</td>
</tr>
</tbody></table>
<p>ä»ç”¨2.6çš„HTMLä»£ç ï¼Œæ“ä½œæ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–d1æ ‡ç­¾çš„idå€¼</span></span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).attr(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;d1&#x27;</span></span><br><span class="line"><span class="comment">// å°†idå€¼æ”¹ä¸ºd3</span></span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).attr(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;d3&#x27;</span>)</span><br><span class="line">w.fn.initÂ [input#d3]</span><br><span class="line"><span class="comment">// å†æ¬¡è·å–æ ‡ç­¾d1çš„idå€¼ï¼Œè·å–å¤±è´¥ï¼Œè¯´æ˜ä¿®æ”¹æˆåŠŸ</span></span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).attr(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line"><span class="comment">// è·å–æ ‡ç­¾d3çš„å€¼ï¼Œè·å–æˆåŠŸ</span></span><br><span class="line">$(<span class="string">&#x27;#d3&#x27;</span>).attr(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;d3&#x27;</span></span><br><span class="line"><span class="comment">// ç§»é™¤d3å±æ€§</span></span><br><span class="line">$(<span class="string">&#x27;#d3&#x27;</span>).removeAttr(<span class="string">&#x27;d3&#x27;</span>)</span><br><span class="line">w.fn.initÂ [input#d3]</span><br><span class="line"><span class="comment">// è·å–ä¸åˆ°ï¼Œè¯´æ˜ç§»é™¤æˆåŠŸ           </span></span><br><span class="line">$(<span class="string">&#x27;#d3&#x27;</span>).attr(<span class="string">&#x27;d3&#x27;</span>)</span><br><span class="line"><span class="literal">undefined</span></span><br></pre></td></tr></table></figure>

<p>**<font color=red>ç‰¹æ®Šæƒ…å†µè¯´æ˜</font>**ï¼š</p>
<ul>
<li>å¯¹äºæ ‡ç­¾ä¸Šæœ‰çš„èƒ½å¤Ÿçœ‹åˆ°çš„å±æ€§å’Œè‡ªå®šä¹‰å±æ€§ç”¨attr</li>
<li>å¯¹äºè¿”å›å¸ƒå°”å€¼æ¯”å¦‚checkbox radio optionæ˜¯å¦è¢«é€‰ä¸­ç”¨prop</li>
</ul>
<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æµ‹è¯•&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;d2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span>sel01</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;d3&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span>&gt;</span>sel02</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;d4&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span>&gt;</span>sel03</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;d5&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> &gt;</span>Rad01</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;d6&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;checked&quot;</span>&gt;</span>Rad02</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> &gt;</span>Rad03</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;&quot;</span> <span class="attr">id</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">id</span>=<span class="string">&quot;d7&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>é€‰æ‹©ä¸€<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">id</span>=<span class="string">&quot;d8&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">selected</span>=<span class="string">&quot;selected&quot;</span>&gt;</span>é€‰æ‹©äºŒ<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç”¨attrè·å–checkboxå¾—å€¼ï¼Œèƒ½è·å–</span></span><br><span class="line">$(<span class="string">&quot;#d3&quot;</span>).attr(<span class="string">&#x27;checked&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;checked&#x27;</span></span><br><span class="line"><span class="comment">// è®¾ç½®å€¼</span></span><br><span class="line">$(<span class="string">&quot;#d3&quot;</span>).attr(<span class="string">&#x27;checked&#x27;</span>, <span class="string">&#x27;unchecked&#x27;</span>)</span><br><span class="line">w.fn.initÂ [input#d3]</span><br><span class="line"><span class="comment">// å†æ¬¡è·å–ï¼Œè®¾ç½®æ˜¯å¤±è´¥çš„ï¼Œè¿™å°±æ˜¯é—®é¢˜</span></span><br><span class="line">$(<span class="string">&quot;#d3&quot;</span>).attr(<span class="string">&#x27;checked&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;checked&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨<code>prop()</code>å°è¯•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1ã€è®¾ç½®checkbox</span></span><br><span class="line"><span class="comment">// è·å–å€¼</span></span><br><span class="line">$(<span class="string">&quot;#d3&quot;</span>).prop(<span class="string">&#x27;checked&#x27;</span>)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="comment">// è®¾ç½®å€¼</span></span><br><span class="line">$(<span class="string">&quot;#d3&quot;</span>).prop(<span class="string">&#x27;checked&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">w.fn.initÂ [input#d3]</span><br><span class="line">$(<span class="string">&quot;#d3&quot;</span>).prop(<span class="string">&#x27;checked&#x27;</span>)</span><br><span class="line"><span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2ã€è®¾ç½®radio</span></span><br><span class="line">$(<span class="string">&quot;#d5&quot;</span>).prop(<span class="string">&#x27;checked&#x27;</span>)</span><br><span class="line"><span class="literal">false</span></span><br><span class="line">$(<span class="string">&quot;#d5&quot;</span>).prop(<span class="string">&#x27;checked&#x27;</span>, <span class="literal">true</span>)</span><br><span class="line">w.fn.initÂ [input#d5]</span><br><span class="line">$(<span class="string">&quot;#d5&quot;</span>).prop(<span class="string">&#x27;checked&#x27;</span>)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3ã€è®¾ç½®selectçš„option</span></span><br><span class="line">$(<span class="string">&quot;#d8&quot;</span>).prop(<span class="string">&#x27;selected&#x27;</span>)</span><br><span class="line"><span class="literal">true</span></span><br><span class="line">$(<span class="string">&quot;#d8&quot;</span>).prop(<span class="string">&#x27;selected&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">w.fn.initÂ [option#d8]</span><br><span class="line">$(<span class="string">&quot;#d8&quot;</span>).prop(<span class="string">&#x27;selected&#x27;</span>)</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h2 id="2-8-æ–‡æ¡£å¤„ç†"><a href="#2-8-æ–‡æ¡£å¤„ç†" class="headerlink" title="2.8 æ–‡æ¡£å¤„ç†"></a>2.8 æ–‡æ¡£å¤„ç†</h2><p>æ–‡æ¡£å¤„ç†å¸¸ç”¨æ“ä½œ</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>$(â€˜<p>â€˜)</td>
<td>åˆ›å»ºæ ‡ç­¾ï¼Œç›¸å½“äºJSçš„createElement(â€˜pâ€™)</td>
</tr>
<tr>
<td>append($pEle)</td>
<td>å†…éƒ¨å°¾éƒ¨è¿½åŠ å…ƒç´ ï¼Œç›¸å½“äºappendChild()</td>
</tr>
<tr>
<td>prepend($pEle)</td>
<td>å†…éƒ¨å¤´éƒ¨è¿½åŠ å…ƒç´ </td>
</tr>
<tr>
<td>after($pEle)</td>
<td>æ”¾åœ¨æŸä¸ªæ ‡ç­¾åé¢</td>
</tr>
<tr>
<td>insertAfter($(â€˜#d1â€™))</td>
<td></td>
</tr>
<tr>
<td>before($pEle)</td>
<td>æ”¾åœ¨æŸä¸ªæ ‡ç­¾å‰é¢</td>
</tr>
<tr>
<td>$(â€˜#d1â€™).remove()</td>
<td>å°†æ ‡ç­¾ä»DOMæ ‘ä¸­åˆ é™¤</td>
</tr>
<tr>
<td>$(â€˜#d1â€™).empty()</td>
<td>æ¸…ç©ºæ ‡ç­¾å†…éƒ¨æ‰€æœ‰çš„å†…å®¹</td>
</tr>
</tbody></table>
<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> $pEle = $(<span class="string">&#x27;&lt;p&gt;&#x27;</span>)</span><br><span class="line">$pEle.text(<span class="string">&#x27;ä½ å¥½å•Š è‰è“è¦ä¸è¦æ¥å‡ ä¸ª?&#x27;</span>)</span><br><span class="line">$pEle.attr(<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;d1&#x27;</span>)          </span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).append($pEle)  # å†…éƒ¨å°¾éƒ¨è¿½åŠ </span><br><span class="line">$pEle.appendTo($(<span class="string">&#x27;#d1&#x27;</span>)) </span><br><span class="line">           </span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).prepend($pEle)  # å†…éƒ¨å¤´éƒ¨è¿½åŠ </span><br><span class="line">w.fn.initÂ [div#d1]</span><br><span class="line">$pEle.prependTo($(<span class="string">&#x27;#d1&#x27;</span>))</span><br><span class="line">w.fn.initÂ [p#d1, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br><span class="line">         </span><br><span class="line">$(<span class="string">&#x27;#d2&#x27;</span>).after($pEle)  # æ”¾åœ¨æŸä¸ªæ ‡ç­¾åé¢</span><br><span class="line">w.fn.initÂ [p#d2]</span><br><span class="line">$pEle.insertAfter($(<span class="string">&#x27;#d1&#x27;</span>))</span><br><span class="line">        </span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).before($pEle)</span><br><span class="line">w.fn.initÂ [div#d1]</span><br><span class="line">$pEle.insertBefore($(<span class="string">&#x27;#d2&#x27;</span>))</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).remove()  # å°†æ ‡ç­¾ä»DOMæ ‘ä¸­åˆ é™¤</span><br><span class="line">w.fn.initÂ [div#d1]</span><br><span class="line">           </span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).empty()  # æ¸…ç©ºæ ‡ç­¾å†…éƒ¨æ‰€æœ‰çš„å†…å®¹</span><br><span class="line">w.fn.initÂ [div#d1]</span><br></pre></td></tr></table></figure>



<h1 id="3-JQueryäº‹ä»¶"><a href="#3-JQueryäº‹ä»¶" class="headerlink" title="3 JQueryäº‹ä»¶"></a>3 JQueryäº‹ä»¶</h1><h2 id="3-1-äº‹ä»¶è§¦å‘"><a href="#3-1-äº‹ä»¶è§¦å‘" class="headerlink" title="3.1 äº‹ä»¶è§¦å‘"></a>3.1 äº‹ä»¶è§¦å‘</h2><p>è§¦å‘äº‹ä»¶æœ‰ä¸¤ç§æ–¹å¼</p>
<p>ç¬¬ä¸€ç§</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">&#x27;åˆ«è¯´è¯ å»æˆ‘&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§(åŠŸèƒ½æ›´åŠ å¼ºå¤§ è¿˜æ”¯æŒäº‹ä»¶å§”æ‰˜)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#d2&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>,function () &#123;</span><br><span class="line">    alert(<span class="string">&#x27;å€Ÿæˆ‘é’±ä¹°è‰è“ åé¢è¿˜ä½ &#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="3-2-å…‹éš†äº‹ä»¶"><a href="#3-2-å…‹éš†äº‹ä»¶" class="headerlink" title="3.2 å…‹éš†äº‹ä»¶"></a>3.2 å…‹éš†äº‹ä»¶</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span>å± é¾™å®åˆ€ï¼Œç‚¹å‡»å°±é€<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    $(<span class="string">&#x27;#d1&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// console.log(this)  // thisæŒ‡ä»£æ˜¯å½“å‰è¢«æ“ä½œçš„æ ‡ç­¾å¯¹è±¡</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// $(this).clone().insertAfter($(&#x27;body&#x27;))  // cloneé»˜è®¤æƒ…å†µä¸‹åªå…‹éš†htmlå’Œcss ä¸å…‹éš†äº‹ä»¶</span></span></span><br><span class="line"><span class="javascript">        $(<span class="built_in">this</span>).clone(<span class="literal">true</span>).insertAfter($(<span class="string">&#x27;body&#x27;</span>))  <span class="comment">// æ‹¬å·å†…åŠ trueå³å¯å…‹éš†äº‹ä»¶</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-3-è‡ªå®šä¹‰æ¨¡æ€æ¡†"><a href="#3-3-è‡ªå®šä¹‰æ¨¡æ€æ¡†" class="headerlink" title="3.3 è‡ªå®šä¹‰æ¨¡æ€æ¡†"></a>3.3 è‡ªå®šä¹‰æ¨¡æ€æ¡†</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">æ¨¡æ€æ¡†å†…éƒ¨æœ¬è´¨å°±æ˜¯ç»™æ ‡ç­¾ç§»é™¤æˆ–è€…æ·»åŠ ä¸Šhideå±æ€§</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>å·¦ä¾§èœå•</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    $(<span class="string">&#x27;.title&#x27;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">// å…ˆç»™æ‰€æœ‰çš„itemsåŠ hide</span></span></span><br><span class="line"><span class="javascript">        $(<span class="string">&#x27;.items&#x27;</span>).addClass(<span class="string">&#x27;hide&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="comment">// ç„¶åå°†è¢«ç‚¹å‡»æ ‡ç­¾å†…éƒ¨çš„hideç§»é™¤</span></span></span><br><span class="line"><span class="javascript">        $(<span class="built_in">this</span>).children().removeClass(<span class="string">&#x27;hide&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å°è¯•ç”¨ä¸€è¡Œä»£ç æå®šä¸Šé¢çš„æ“ä½œ--&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿”å›é¡¶éƒ¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    $(window).scroll(function () &#123;</span><br><span class="line">        <span class="keyword">if</span>($(window).scrollTop() &gt; <span class="number">300</span>)&#123;</span><br><span class="line">            $(<span class="string">&#x27;#d1&#x27;</span>).removeClass(<span class="string">&#x27;hide&#x27;</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            $(<span class="string">&#x27;#d1&#x27;</span>).addClass(<span class="string">&#x27;hide&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>è‡ªå®šä¹‰ç™»é™†æ ¡éªŒ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨è·å–ç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç çš„æ—¶å€™ ç”¨æˆ·å¦‚æœæ²¡æœ‰å¡«å†™ åº”è¯¥ç»™ç”¨æˆ·å±•ç¤ºæç¤ºä¿¡æ¯</span></span><br><span class="line">&lt;p&gt;username:</span><br><span class="line">    &lt;<span class="built_in">input</span> <span class="built_in">type</span>=<span class="string">&quot;text&quot;</span> <span class="built_in">id</span>=<span class="string">&quot;username&quot;</span>&gt;</span><br><span class="line">    &lt;span style=<span class="string">&quot;color: red&quot;</span>&gt;&lt;/span&gt;</span><br><span class="line">&lt;/p&gt;</span><br><span class="line">&lt;p&gt;password:</span><br><span class="line">    &lt;<span class="built_in">input</span> <span class="built_in">type</span>=<span class="string">&quot;text&quot;</span> <span class="built_in">id</span>=<span class="string">&quot;password&quot;</span>&gt;</span><br><span class="line">    &lt;span style=<span class="string">&quot;color: red&quot;</span>&gt;&lt;/span&gt;</span><br><span class="line">&lt;/p&gt;</span><br><span class="line">&lt;button <span class="built_in">id</span>=<span class="string">&quot;d1&quot;</span>&gt;æäº¤&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    let $userName = $(<span class="string">&#x27;#username&#x27;</span>)</span><br><span class="line">    let $passWord = $(<span class="string">&#x27;#password&#x27;</span>)</span><br><span class="line">    $(<span class="string">&#x27;#d1&#x27;</span>).click(function () &#123;</span><br><span class="line">        // è·å–ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç  åšæ ¡éªŒ</span><br><span class="line">        let userName = $userName.val()</span><br><span class="line">        let passWord = $passWord.val()</span><br><span class="line">        <span class="keyword">if</span> (!userName)&#123;</span><br><span class="line">            $userName.<span class="built_in">next</span>().text(<span class="string">&quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!passWord)&#123;</span><br><span class="line">            $passWord.<span class="built_in">next</span>().text(<span class="string">&#x27;å¯†ç ä¸èƒ½ä¸ºç©º&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    $(<span class="string">&#x27;input&#x27;</span>).focus(function () &#123;</span><br><span class="line">        $(this).<span class="built_in">next</span>().text(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>inputå®æ—¶ç›‘æ§</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;<span class="built_in">input</span> <span class="built_in">type</span>=<span class="string">&quot;text&quot;</span> <span class="built_in">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    $(<span class="string">&#x27;#d1&#x27;</span>).on(<span class="string">&#x27;input&#x27;</span>,function () &#123;</span><br><span class="line">        console.log(this.value)  </span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>hoveräº‹ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    // $(<span class="string">&quot;#d1&quot;</span>).hover(function () &#123;  // é¼ æ ‡æ‚¬æµ® + é¼ æ ‡ç§»å¼€</span><br><span class="line">    //     alert(<span class="number">123</span>)</span><br><span class="line">    // &#125;)</span><br><span class="line"></span><br><span class="line">    $(<span class="string">&#x27;#d1&#x27;</span>).hover(</span><br><span class="line">        function () &#123;</span><br><span class="line">            alert(<span class="string">&#x27;æˆ‘æ¥äº†&#x27;</span>)  // æ‚¬æµ®</span><br><span class="line">    &#125;,</span><br><span class="line">        function () &#123;</span><br><span class="line">            alert(<span class="string">&#x27;æˆ‘æºœäº†&#x27;</span>)  // ç§»å¼€</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>é”®ç›˜æŒ‰é”®æŒ‰ä¸‹äº‹ä»¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    $(<span class="built_in">window</span>).keydown(<span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(event.keyCode)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (event.keyCode === <span class="number">16</span>)&#123;</span></span><br><span class="line"><span class="javascript">            alert(<span class="string">&#x27;ä½ æŒ‰äº†shifté”®&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="3-4-é˜»æ­¢åç»­äº‹ä»¶æ‰§è¡Œ"><a href="#3-4-é˜»æ­¢åç»­äº‹ä»¶æ‰§è¡Œ" class="headerlink" title="3.4 é˜»æ­¢åç»­äº‹ä»¶æ‰§è¡Œ"></a>3.4 é˜»æ­¢åç»­äº‹ä»¶æ‰§è¡Œ</h2><p>ä»¥æ¡ˆä¾‹è¯´æ˜ï¼Œç‚¹å‡»æŒ‰é’®åï¼Œæœ¬åº”å°†span(d1)çš„æ–‡æœ¬è®¾ç½®æˆâ€™å®è´ ä½ èƒ½çœ‹åˆ°æˆ‘å—?â€™ï¼Œä½†ç”±äºåç»­submitçš„æäº¤äº‹ä»¶æ‰§è¡Œï¼Œé¡µé¢å°†åˆ·æ–°ï¼Œå¯¼è‡´è®¾ç½®çš„æ–‡æœ¬æ¶ˆå¤±ï¼š</p>
<p>æäº¤å‰ï¼š</p>
<p><img src="/../../../img/image-20220831151405792.png" alt="image-20220831151405792"></p>
<p>æäº¤åï¼š</p>
<p><img src="/../../../img/image-20220831151419650.png" alt="image-20220831151419650"></p>
<p>åŠç§’åï¼š</p>
<p><img src="/../../../img/image-20220831151405792.png" alt="image-20220831151405792"></p>
<p>å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœæ­¢åç»­çš„submitæ“ä½œï¼Ÿ</p>
<ul>
<li>return false</li>
<li>e.preventDefault()</li>
</ul>
<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class="line">    &lt;link href=&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=&quot;&quot;&gt;</span><br><span class="line">    &lt;span id=&quot;d1&quot; style=&quot;color: red&quot;&gt;&lt;/span&gt;</span><br><span class="line">    &lt;input type=&quot;submit&quot; id=&quot;d2&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    $(&#x27;#d2&#x27;).click(function (e) &#123;</span><br><span class="line">        $(&#x27;#d1&#x27;).text(&#x27;å®è´ ä½ èƒ½çœ‹åˆ°æˆ‘å—?&#x27;)</span><br><span class="line">        // é˜»æ­¢æ ‡ç­¾åç»­äº‹ä»¶çš„æ‰§è¡Œ æ–¹å¼1</span><br><span class="line">        // return false</span><br><span class="line">        // é˜»æ­¢æ ‡ç­¾åç»­äº‹ä»¶çš„æ‰§è¡Œ æ–¹å¼2</span><br><span class="line">        // e.preventDefault()</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-5-é˜»æ­¢äº‹ä»¶å†’æ³¡"><a href="#3-5-é˜»æ­¢äº‹ä»¶å†’æ³¡" class="headerlink" title="3.5 é˜»æ­¢äº‹ä»¶å†’æ³¡"></a>3.5 é˜»æ­¢äº‹ä»¶å†’æ³¡</h2><p>ä»¥æ¡ˆä¾‹è¯´æ˜ï¼Œç”±äºd1ã€d2ã€ d3æ˜¯åµŒå¥—å…³ç³»ï¼Œå½“ç‚¹å‡»d3è§¦å‘clickäº‹ä»¶åï¼Œé¡µé¢æ˜¾ç¤ºalert(â€˜spanâ€™)ï¼Œç„¶åalert(â€˜pâ€™)ï¼Œæœ€åalert(â€˜divâ€™)ï¼Œå°†alertä¸‰æ¬¡ã€‚</p>
<p>æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ç°åªè§¦å‘#d3çš„alertï¼Ÿ</p>
<ul>
<li>return false</li>
<li>e.stopPropagation()</li>
</ul>
<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class="line">    &lt;link href=&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;d1&quot;&gt;div</span><br><span class="line">        &lt;p id=&quot;d2&quot;&gt;div&gt;p</span><br><span class="line">            &lt;span id=&quot;d3&quot;&gt;span&lt;/span&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        $(&#x27;#d1&#x27;).click(function () &#123;</span><br><span class="line">            alert(&#x27;div&#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">        $(&#x27;#d2&#x27;).click(function () &#123;</span><br><span class="line">            alert(&#x27;p&#x27;)</span><br><span class="line">        &#125;)</span><br><span class="line">        $(&#x27;#d3&#x27;).click(function (e) &#123;</span><br><span class="line">            alert(&#x27;span&#x27;)</span><br><span class="line">            // é˜»æ­¢äº‹ä»¶å†’æ³¡çš„æ–¹å¼1</span><br><span class="line">            // return false</span><br><span class="line">            // é˜»æ­¢äº‹ä»¶å†’æ³¡çš„æ–¹å¼2</span><br><span class="line">            // e.stopPropagation()</span><br><span class="line">        &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-6-äº‹ä»¶å§”æ‰˜"><a href="#3-6-äº‹ä»¶å§”æ‰˜" class="headerlink" title="3.6 äº‹ä»¶å§”æ‰˜"></a>3.6 äº‹ä»¶å§”æ‰˜</h2><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸®ä¸€ä¸ªæŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œåªéœ€ç»™æŒ‰é’®ç»‘å®šäº‹ä»¶å³å¯ï¼Œå³ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;button&#x27;</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  <span class="comment">// æ— æ³•å½±å“åˆ°åŠ¨æ€åˆ›å»ºçš„æ ‡ç­¾</span></span><br><span class="line">     alert(<span class="number">123</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œå‡å¦‚æˆ‘ä»¬åŠ¨æ€åˆ›å»ºäº†buttonæŒ‰é’®ï¼Œè¿™ç§ç»‘å®šæ–¹å¼å¯¹<code>åç»­åŠ¨æ€ç”Ÿæˆçš„button</code>æ˜¯<code>æ— æ•ˆçš„</code></p>
<p>éœ€è¦ä½¿ç”¨äº‹ä»¶å§”æ‰˜:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// äº‹ä»¶å§”æ‰˜</span></span><br><span class="line">$(<span class="string">&#x27;body&#x27;</span>).on(<span class="string">&#x27;click&#x27;</span>,<span class="string">&#x27;button&#x27;</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="number">123</span>)  <span class="comment">// åœ¨æŒ‡å®šçš„èŒƒå›´å†… å°†äº‹ä»¶å§”æ‰˜ç»™æŸä¸ªæ ‡ç­¾ æ— è®ºè¯¥æ ‡ç­¾æ˜¯äº‹å…ˆå†™å¥½çš„è¿˜æ˜¯åé¢åŠ¨æ€åˆ›å»ºçš„</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="4-è¡¥å……"><a href="#4-è¡¥å……" class="headerlink" title="4 è¡¥å……"></a>4 è¡¥å……</h1><h2 id="4-1-é¡µé¢åŠ è½½"><a href="#4-1-é¡µé¢åŠ è½½" class="headerlink" title="4.1 é¡µé¢åŠ è½½"></a>4.1 é¡µé¢åŠ è½½</h2><p>ç­‰é¡µé¢å…ƒç´ åŠ è½½å®Œæ¯•åï¼Œå†è°ƒç”¨JSä»£ç ã€‚</p>
<p>åœ¨åŸç”ŸJSä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•ä¸€</span></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// jsä»£ç </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ–¹æ³•äºŒ</span></span><br><span class="line">ç›´æ¥å†™åœ¨bodyæœ€ä¸‹æ–¹</span><br></pre></td></tr></table></figure>

<p>åœ¨JQueryä¸­æœ‰ä¸‰ç§æ–¹å¼</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç¬¬ä¸€ç§</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// jsä»£ç </span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// ç¬¬äºŒç§</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// jsä»£ç </span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// ç¬¬ä¸‰ç§</span></span><br><span class="line">ç›´æ¥å†™åœ¨bodyå†…éƒ¨æœ€ä¸‹æ–¹</span><br></pre></td></tr></table></figure>

<h2 id="4-2-åŠ¨ç”»æ•ˆæœ"><a href="#4-2-åŠ¨ç”»æ•ˆæœ" class="headerlink" title="4.2 åŠ¨ç”»æ•ˆæœ"></a>4.2 åŠ¨ç”»æ•ˆæœ</h2><p>ç»™å…ƒç´ æ·»åŠ <code>æ·¡å…¥æ·¡å‡º</code>ã€<code>éšè—/å‡ºç°</code>ç­‰æ•ˆæœ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).hide(<span class="number">5000</span>)</span><br><span class="line">w.fn.initÂ [div#d1]</span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).show(<span class="number">5000</span>)</span><br><span class="line">w.fn.initÂ [div#d1]</span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).slideUp(<span class="number">5000</span>)</span><br><span class="line">w.fn.initÂ [div#d1]</span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).slideDown(<span class="number">5000</span>)</span><br><span class="line">w.fn.initÂ [div#d1]</span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).fadeOut(<span class="number">5000</span>)</span><br><span class="line">w.fn.initÂ [div#d1]</span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).fadeIn(<span class="number">5000</span>)</span><br><span class="line">w.fn.initÂ [div#d1]</span><br><span class="line">$(<span class="string">&#x27;#d1&#x27;</span>).fadeTo(<span class="number">5000</span>,<span class="number">0.4</span>)</span><br><span class="line">w.fn.initÂ [div#d1]   </span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">        <span class="selector-id">#d1</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">1000px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;d1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;d2&quot;</span>&gt;</span>åˆ«æŒ‰æˆ‘ï¼<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;d3&quot;</span>&gt;</span>å†æŒ‰å°±ç”Ÿæ°”äº†~ï¼<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        $(<span class="string">&quot;#d2&quot;</span>).click(</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">&quot;#d1&quot;</span>).hide(<span class="number">5000</span>)	<span class="comment">// 5ç§’åŠ¨ç”»-æ¶ˆå¤±</span></span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        )</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        $(<span class="string">&quot;#d3&quot;</span>).click(</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">&quot;#d1&quot;</span>).show(<span class="number">5000</span>) <span class="comment">// 5ç§’åŠ¨ç”»-å‡ºç°</span></span></span><br><span class="line"><span class="javascript">                </span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        )</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="4-3-éå†å…ƒç´ "><a href="#4-3-éå†å…ƒç´ " class="headerlink" title="4.3 éå†å…ƒç´ "></a>4.3 éå†å…ƒç´ </h2><p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"># each()</span><br><span class="line"># ç¬¬ä¸€ç§æ–¹å¼</span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">w.fn.init(<span class="number">10</span>)Â [div, div, div, div, div, div, div, div, div, div, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</span>&#123;<span class="built_in">console</span>.log(index)&#125;)</span><br><span class="line"><span class="attr">VM181</span>:<span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="attr">VM181</span>:<span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="attr">VM181</span>:<span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="attr">VM181</span>:<span class="number">1</span> <span class="number">3</span></span><br><span class="line"><span class="attr">VM181</span>:<span class="number">1</span> <span class="number">4</span></span><br><span class="line"><span class="attr">VM181</span>:<span class="number">1</span> <span class="number">5</span></span><br><span class="line"><span class="attr">VM181</span>:<span class="number">1</span> <span class="number">6</span></span><br><span class="line"><span class="attr">VM181</span>:<span class="number">1</span> <span class="number">7</span></span><br><span class="line"><span class="attr">VM181</span>:<span class="number">1</span> <span class="number">8</span></span><br><span class="line"><span class="attr">VM181</span>:<span class="number">1</span> <span class="number">9</span></span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index,obj</span>)</span>&#123;<span class="built_in">console</span>.log(index,obj)&#125;)</span><br><span class="line"><span class="attr">VM243</span>:<span class="number">1</span> <span class="number">0</span> &lt;div&gt;â€‹<span class="number">1</span>â€‹&lt;/div&gt;â€‹</span><br><span class="line"><span class="attr">VM243</span>:<span class="number">1</span> <span class="number">1</span> &lt;div&gt;â€‹<span class="number">2</span>â€‹&lt;/div&gt;â€‹</span><br><span class="line"><span class="attr">VM243</span>:<span class="number">1</span> <span class="number">2</span> &lt;div&gt;â€‹<span class="number">3</span>â€‹&lt;/div&gt;â€‹</span><br><span class="line"><span class="attr">VM243</span>:<span class="number">1</span> <span class="number">3</span> &lt;div&gt;â€‹<span class="number">4</span>â€‹&lt;/div&gt;â€‹</span><br><span class="line"><span class="attr">VM243</span>:<span class="number">1</span> <span class="number">4</span> &lt;div&gt;â€‹<span class="number">5</span>â€‹&lt;/div&gt;â€‹</span><br><span class="line"><span class="attr">VM243</span>:<span class="number">1</span> <span class="number">5</span> &lt;div&gt;â€‹<span class="number">6</span>â€‹&lt;/div&gt;â€‹</span><br><span class="line"><span class="attr">VM243</span>:<span class="number">1</span> <span class="number">6</span> &lt;div&gt;â€‹<span class="number">7</span>â€‹&lt;/div&gt;â€‹</span><br><span class="line"><span class="attr">VM243</span>:<span class="number">1</span> <span class="number">7</span> &lt;div&gt;â€‹<span class="number">8</span>â€‹&lt;/div&gt;â€‹</span><br><span class="line"><span class="attr">VM243</span>:<span class="number">1</span> <span class="number">8</span> &lt;div&gt;â€‹<span class="number">9</span>â€‹&lt;/div&gt;â€‹</span><br><span class="line"><span class="attr">VM243</span>:<span class="number">1</span> <span class="number">9</span> &lt;div&gt;â€‹<span class="number">10</span>â€‹&lt;/div&gt;â€‹</span><br><span class="line"></span><br><span class="line"># ç¬¬äºŒç§æ–¹å¼</span><br><span class="line">$.each([<span class="number">111</span>,<span class="number">222</span>,<span class="number">333</span>],<span class="function"><span class="keyword">function</span>(<span class="params">index,obj</span>)</span>&#123;<span class="built_in">console</span>.log(index,obj)&#125;)</span><br><span class="line"><span class="attr">VM484</span>:<span class="number">1</span> <span class="number">0</span> <span class="number">111</span></span><br><span class="line"><span class="attr">VM484</span>:<span class="number">1</span> <span class="number">1</span> <span class="number">222</span></span><br><span class="line"><span class="attr">VM484</span>:<span class="number">1</span> <span class="number">2</span> <span class="number">333</span></span><br><span class="line">(<span class="number">3</span>)Â [<span class="number">111</span>, <span class="number">222</span>, <span class="number">333</span>]</span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">æœ‰äº†eachä¹‹å å°±æ— éœ€è‡ªå·±å†™forå¾ªç¯äº† ç”¨å®ƒæ›´åŠ çš„æ–¹ä¾¿</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"># data()</span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">èƒ½å¤Ÿè®©æ ‡ç­¾å¸®æˆ‘ä»¬å­˜å‚¨æ•°æ® å¹¶ä¸”ç”¨æˆ·è‚‰çœ¼çœ‹ä¸è§</span></span><br><span class="line"><span class="string">&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).data(<span class="string">&#x27;info&#x27;</span>,<span class="string">&#x27;å›æ¥å§ï¼Œæˆ‘åŸè°…ä½ äº†!&#x27;</span>)</span><br><span class="line">w.fn.init(<span class="number">10</span>)Â [div#d1, div, div, div, div, div, div, div, div, div, <span class="attr">prevObject</span>: w.fn.init(<span class="number">1</span>)]</span><br><span class="line">               </span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).first().data(<span class="string">&#x27;info&#x27;</span>)</span><br><span class="line"><span class="string">&quot;å›æ¥å§ï¼Œæˆ‘åŸè°…ä½ äº†!&quot;</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).last().data(<span class="string">&#x27;info&#x27;</span>)</span><br><span class="line"><span class="string">&quot;å›æ¥å§ï¼Œæˆ‘åŸè°…ä½ äº†!&quot;</span></span><br><span class="line">               </span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).first().data(<span class="string">&#x27;xxx&#x27;</span>)</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).first().removeData(<span class="string">&#x27;info&#x27;</span>)</span><br><span class="line">w.fn.initÂ [div#d1, <span class="attr">prevObject</span>: w.fn.init(<span class="number">10</span>)]</span><br><span class="line">           </span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).first().data(<span class="string">&#x27;info&#x27;</span>)</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">$(<span class="string">&#x27;div&#x27;</span>).last().data(<span class="string">&#x27;info&#x27;</span>)</span><br><span class="line"><span class="string">&quot;å›æ¥å§ï¼Œæˆ‘åŸè°…ä½ äº†!&quot;</span></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Python</category>
        <category>å‰ç«¯åŸºç¡€</category>
      </categories>
  </entry>
  <entry>
    <title>Day58-Bootstrap</title>
    <url>/2022/08/25/03_Python/02_%E5%89%8D%E7%AB%AF/day58%E7%AC%94%E8%AE%B0-Bootstrap/</url>
    <content><![CDATA[<p>â€œç¬¬58å¤©Bootstrapå­¦ä¹ ç¬”è®°â€</p>
<h1 id="1-ä»€ä¹ˆæ˜¯Bootstrap"><a href="#1-ä»€ä¹ˆæ˜¯Bootstrap" class="headerlink" title="1 ä»€ä¹ˆæ˜¯Bootstrap"></a>1 ä»€ä¹ˆæ˜¯Bootstrap</h1><p>&lt;éƒ¨åˆ†æ²¡æœ‰ç»ƒä¹ ï¼Œä½†å·²çŸ¥é“ç”¨é€”ï¼Œåç»­å¯æŒ‰å®é™…éœ€è¦ä½¿ç”¨&gt;</p>
<p>è¯¥æ¡†æ¶å·²ç»å¸®ä½ å†™å¥½äº†å¾ˆå¤šé¡µé¢æ ·å¼ï¼Œä½ å¦‚æœéœ€è¦ä½¿ç”¨ï¼Œåªéœ€è¦ä¸‹è½½å®ƒå¯¹åº”æ–‡ä»¶ï¼Œä¹‹åç›´æ¥cvæ‹·è´å³å¯</p>
<p>åœ¨ä½¿ç”¨Bootstrapçš„æ—¶å€™æ‰€æœ‰çš„é¡µé¢æ ·å¼éƒ½åªéœ€è¦ä½ é€šè¿‡classæ¥è°ƒèŠ‚å³å¯</p>
<p>ç‰ˆæœ¬é€‰æ‹©å»ºè®®ä½¿ç”¨v3ç‰ˆæœ¬ï¼š<a href="https://v3.bootcss.com/">https://v3.bootcss.com/</a></p>
<blockquote>
<p><font color=red>â€“æ³¨æ„â€“</font></p>
<p><strong>bootstrapçš„jsä»£ç æ˜¯ä¾èµ–äºjQueryçš„ï¼Œä¹Ÿå°±æ„å‘³ç€ä½ åœ¨ä½¿ç”¨BootstrapåŠ¨æ€æ•ˆæœçš„æ—¶å€™ï¼Œä¸€å®šè¦å¯¼å…¥jQuery</strong></p>
</blockquote>
<h1 id="2-ä½¿ç”¨Bootstrap"><a href="#2-ä½¿ç”¨Bootstrap" class="headerlink" title="2 ä½¿ç”¨Bootstrap"></a>2 ä½¿ç”¨Bootstrap</h1><h2 id="2-1-å¸ƒå±€å®¹å™¨"><a href="#2-1-å¸ƒå±€å®¹å™¨" class="headerlink" title="2.1 å¸ƒå±€å®¹å™¨"></a>2.1 å¸ƒå±€å®¹å™¨</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">    	å·¦å³ä¸¤ä¾§æœ‰ç•™ç™½</span></span><br><span class="line"><span class="class">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">container</span>-<span class="title">fluid</span>&quot;&gt;</span></span><br><span class="line"><span class="class">			å·¦å³ä¸¤ä¾§æ²¡æœ‰ç•™ç™½</span></span><br><span class="line"><span class="class">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class"># åç»­åœ¨ä½¿ç”¨<span class="title">bootstrap</span>åšé¡µé¢çš„æ—¶å€™ ä¸Šæ¥å…ˆå†™ä¸€ä¸ª<span class="title">div</span> <span class="title">class</span>=<span class="title">container</span>,ä¹‹ååœ¨<span class="title">div</span>å†…éƒ¨ä¹¦å†™é¡µé¢</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-æ …æ ¼ç³»ç»Ÿ"><a href="#2-2-æ …æ ¼ç³»ç»Ÿ" class="headerlink" title="2.2 æ …æ ¼ç³»ç»Ÿ"></a>2.2 æ …æ ¼ç³»ç»Ÿ</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">row</span>&quot;&gt;&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">å†™ä¸€ä¸ª<span class="title">row</span>å°±æ˜¯å°†æ‰€åœ¨çš„åŒºåŸŸåˆ’åˆ†æˆ12ä»½</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">col</span>-<span class="title">md</span>-6 &quot;&gt;  è·å–ä½ æ‰€è¦çš„ä»½æ•°</span></span><br><span class="line"><span class="class"># åœ¨ä½¿ç”¨<span class="title">bootstrap</span>çš„æ—¶å€™ è„‘å­é‡Œé¢ä¸€å®šè¦åš12çš„åŠ å‡æ³•</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3-æ …æ ¼å‚æ•°"><a href="#2-3-æ …æ ¼å‚æ•°" class="headerlink" title="2.3 æ …æ ¼å‚æ•°"></a>2.3 æ …æ ¼å‚æ•°</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">.col-xs-	.col-sm-	.col-md-	.col-lg-</span><br><span class="line"><span class="comment"># é’ˆå¯¹ä¸åŒçš„æ˜¾ç¤ºå™¨ bootstrapä¼šè‡ªåŠ¨é€‰æ‹©å¯¹åº”çš„å‚æ•°</span></span><br><span class="line"><span class="comment"># å¦‚æœä½ æƒ³è¦å…¼å®¹æ‰€æœ‰çš„æ˜¾ç¤ºå™¨ ä½ å°±å…¨éƒ¨åŠ ä¸Šå³å¯</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨ä¸€è¡Œå¦‚ä½•ç§»åŠ¨ä½ç½®</span></span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">col</span>-<span class="title">md</span>-8 <span class="title">c1</span> <span class="title">col</span>-<span class="title">md</span>-<span class="title">offset</span>-2&quot;&gt;&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-4-æ’ç‰ˆ"><a href="#2-4-æ’ç‰ˆ" class="headerlink" title="2.4 æ’ç‰ˆ"></a>2.4 æ’ç‰ˆ</h2><p>bootstrapå°†æ‰€æœ‰åŸç”Ÿçš„HTMLæ ‡ç­¾çš„æ–‡æœ¬å­—ä½“ç»Ÿä¸€è®¾ç½®æˆäº†è‚‰çœ¼å¯ä»¥æ¥å—çš„æ ·å¼</p>
<p>æ•ˆæœä¸€æ ·ï¼Œä½†æ˜¯æ ‡ç­¾è¡¨è¾¾çš„æ„æ€ä¸ä¸€æ ·ï¼ˆè¯­ä¹‰ï¼‰</p>
<h2 id="2-5-è¡¨æ ¼"><a href="#2-5-è¡¨æ ¼" class="headerlink" title="2.5 è¡¨æ ¼"></a>2.5 è¡¨æ ¼</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;table <span class="class"><span class="keyword">class</span>=&quot;<span class="title">table</span> <span class="title">table</span>-<span class="title">hover</span> <span class="title">table</span>-<span class="title">striped</span> <span class="title">table</span>-<span class="title">bordered</span>&quot;&gt;</span></span><br><span class="line"><span class="class">		</span></span><br><span class="line"><span class="class">&lt;<span class="title">tr</span> <span class="title">class</span>=&quot;<span class="title">success</span>&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">td</span>&gt;1&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">td</span>&gt;<span class="title">jason</span>&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">td</span>&gt;123&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">td</span>&gt;<span class="title">study</span>&lt;/<span class="title">td</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;<span class="title">tr</span> <span class="title">class</span>=&quot;<span class="title">active</span>&quot;&gt;...&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">tr</span> <span class="title">class</span>=&quot;<span class="title">success</span>&quot;&gt;...&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">tr</span> <span class="title">class</span>=&quot;<span class="title">warning</span>&quot;&gt;...&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">tr</span> <span class="title">class</span>=&quot;<span class="title">danger</span>&quot;&gt;...&lt;/<span class="title">tr</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">tr</span> <span class="title">class</span>=&quot;<span class="title">info</span>&quot;&gt;...&lt;/<span class="title">tr</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-6-è¡¨å•"><a href="#2-6-è¡¨å•" class="headerlink" title="2.6 è¡¨å•"></a>2.6 è¡¨å•</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span>=&quot;<span class="title">container</span>&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">div</span> <span class="title">class</span>=&quot;<span class="title">col</span>-<span class="title">md</span>-8 <span class="title">col</span>-<span class="title">md</span>-<span class="title">offset</span>-2&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">h2</span> <span class="title">class</span>=&quot;<span class="title">text</span>-<span class="title">center</span>&quot;&gt;ç™»é™†é¡µé¢&lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">form</span> <span class="title">action</span>=&quot;&quot;&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">p</span>&gt;<span class="title">username</span>:</span>&lt;<span class="built_in">input</span> <span class="built_in">type</span>=<span class="string">&quot;text&quot;</span> <span class="class"><span class="keyword">class</span>=&quot;<span class="title">form</span>-<span class="title">control</span>&quot;&gt;&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">p</span>&gt;<span class="title">password</span>:</span>&lt;<span class="built_in">input</span> <span class="built_in">type</span>=<span class="string">&quot;text&quot;</span> <span class="class"><span class="keyword">class</span>=&quot;<span class="title">form</span>-<span class="title">control</span>&quot;&gt;&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;<span class="title">select</span> <span class="title">name</span>=&quot;&quot; <span class="title">id</span>=&quot;&quot; <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">control</span>&quot;&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">option</span> <span class="title">value</span>=&quot;&quot;&gt;111&lt;/<span class="title">option</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">option</span> <span class="title">value</span>=&quot;&quot;&gt;222&lt;/<span class="title">option</span>&gt;</span></span><br><span class="line"><span class="class">                    &lt;<span class="title">option</span> <span class="title">value</span>=&quot;&quot;&gt;333&lt;/<span class="title">option</span>&gt;</span></span><br><span class="line"><span class="class">                &lt;/<span class="title">select</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">textarea</span> <span class="title">name</span>=&quot;&quot; <span class="title">id</span>=&quot;&quot; <span class="title">cols</span>=&quot;30&quot; <span class="title">rows</span>=&quot;10&quot; <span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">control</span>&quot;&gt;&lt;/<span class="title">textarea</span>&gt;</span></span><br><span class="line"><span class="class">            &lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">submit</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;/<span class="title">form</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"># é’ˆå¯¹è¡¨å•æ ‡ç­¾ åŠ æ ·å¼å°±ç”¨<span class="title">form</span>-<span class="title">control</span></span></span><br><span class="line"><span class="class">	<span class="title">class</span>=&quot;<span class="title">form</span>-<span class="title">control</span>&quot;</span></span><br><span class="line"><span class="class">&quot;&quot;&quot;</span></span><br><span class="line"><span class="class">&lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">checkbox</span>&quot;&gt;222</span></span><br><span class="line"><span class="class">&lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">radio</span>&quot;&gt;333</span></span><br><span class="line"><span class="class"><span class="title">checkbox</span>å’Œ<span class="title">radio</span>æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šç»™å®ƒåŠ <span class="title">form</span>-<span class="title">control</span>ï¼Œç›´æ¥ä½¿ç”¨åŸç”Ÿçš„å³å¯</span></span><br><span class="line"><span class="class">&quot;&quot;&quot;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"># é’ˆå¯¹æŠ¥é”™ä¿¡æ¯ å¯ä»¥åŠ <span class="title">has</span>-<span class="title">error</span>ï¼ˆ<span class="title">input</span>çš„çˆ¶æ ‡ç­¾åŠ ï¼‰</span></span><br><span class="line"><span class="class">&lt;<span class="title">p</span> <span class="title">class</span>=&quot;<span class="title">has</span>-<span class="title">error</span>&quot;&gt;</span></span><br><span class="line"><span class="class">	<span class="title">username</span>:</span></span><br><span class="line">  &lt;<span class="built_in">input</span> <span class="built_in">type</span>=<span class="string">&quot;text&quot;</span> <span class="class"><span class="keyword">class</span>=&quot;<span class="title">form</span>-<span class="title">control</span>&quot;&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-7-æŒ‰é’®"><a href="#2-7-æŒ‰é’®" class="headerlink" title="2.7 æŒ‰é’®"></a>2.7 æŒ‰é’®</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;a href=<span class="string">&quot;https://www.mzitu.com/&quot;</span> <span class="class"><span class="keyword">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">primary</span>&quot;&gt;ç‚¹æˆ‘&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">button</span> <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">danger</span>&quot;&gt;æŒ‰æˆ‘&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">button</span> <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">default</span>&quot;&gt;æŒ‰æˆ‘&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">button</span> <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">success</span>&quot;&gt;æŒ‰æˆ‘&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">button</span> <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">info</span>&quot;&gt;æŒ‰æˆ‘&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">button</span> <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">warning</span>&quot;&gt;æŒ‰æˆ‘&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&lt;<span class="title">button</span> <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">warning</span> <span class="title">btn</span>-<span class="title">lg</span>&quot;&gt;æŒ‰æˆ‘&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">button</span> <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">warning</span> <span class="title">btn</span>-<span class="title">sm</span>&quot;&gt;æŒ‰æˆ‘&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">button</span> <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">warning</span> <span class="title">btn</span>-<span class="title">xs</span>&quot;&gt;æŒ‰æˆ‘&lt;/<span class="title">button</span>&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">input</span> <span class="title">type</span>=&quot;<span class="title">submit</span>&quot; <span class="title">class</span>=&quot;<span class="title">btn</span> <span class="title">btn</span>-<span class="title">primary</span> <span class="title">btn</span>-<span class="title">block</span>&quot;&gt;  </span></span><br><span class="line"><span class="class">é€šè¿‡ç»™æŒ‰é’®æ·»åŠ  .<span class="title">btn</span>-<span class="title">block</span> ç±»å¯ä»¥å°†å…¶æ‹‰ä¼¸è‡³çˆ¶å…ƒç´ 100%çš„å®½åº¦ï¼Œè€Œä¸”æŒ‰é’®ä¹Ÿå˜ä¸ºäº†å—çº§ï¼ˆ<span class="title">block</span>ï¼‰å…ƒç´ ã€‚</span></span><br></pre></td></tr></table></figure>

<h2 id="2-8-å›¾è¡¨"><a href="#2-8-å›¾è¡¨" class="headerlink" title="2.8 å›¾è¡¨"></a>2.8 å›¾è¡¨</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;h2 <span class="class"><span class="keyword">class</span>=&quot;<span class="title">text</span>-<span class="title">center</span>&quot;&gt;ç™»é™†é¡µé¢ &lt;<span class="title">span</span> <span class="title">class</span>=&quot;<span class="title">glyphicon</span> <span class="title">glyphicon</span>-<span class="title">user</span>&quot;&gt;&lt;/<span class="title">span</span>&gt;&lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">    &lt;<span class="title">style</span>&gt;</span></span><br><span class="line"><span class="class">        <span class="title">span</span> &#123;</span></span><br><span class="line"><span class="class">            <span class="title">color</span>:</span> greenyellow;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰©å±•</span></span><br></pre></td></tr></table></figure>

<h2 id="2-9-å¯¼èˆªæ¡"><a href="#2-9-å¯¼èˆªæ¡" class="headerlink" title="2.9 å¯¼èˆªæ¡"></a>2.9 å¯¼èˆªæ¡</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;nav <span class="class"><span class="keyword">class</span>=&quot;<span class="title">navbar</span> <span class="title">navbar</span>-<span class="title">inverse</span>&quot;&gt;</span></span><br><span class="line"><span class="class">&lt;<span class="title">nav</span> <span class="title">class</span>=&quot;<span class="title">navbar</span> <span class="title">navbar</span>-<span class="title">default</span>&quot;&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-10-åˆ†é¡µå™¨"><a href="#2-10-åˆ†é¡µå™¨" class="headerlink" title="2.10 åˆ†é¡µå™¨"></a>2.10 åˆ†é¡µå™¨</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&lt;nav aria-label=<span class="string">&quot;Page navigation&quot;</span>&gt;</span><br><span class="line">  &lt;ul <span class="class"><span class="keyword">class</span>=&quot;<span class="title">pagination</span>&quot;&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot; <span class="title">aria</span>-<span class="title">label</span>=&quot;<span class="title">Previous</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">span</span> <span class="title">aria</span>-<span class="title">hidden</span>=&quot;<span class="title">true</span>&quot;&gt;&amp;<span class="title">laquo</span>;&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">li</span> <span class="title">class</span>=&quot;<span class="title">active</span>&quot;&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;1&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;2&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;3&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;4&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">li</span>&gt;&lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot;&gt;5&lt;/<span class="title">a</span>&gt;&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;<span class="title">a</span> <span class="title">href</span>=&quot;#&quot; <span class="title">aria</span>-<span class="title">label</span>=&quot;<span class="title">Next</span>&quot;&gt;</span></span><br><span class="line"><span class="class">        &lt;<span class="title">span</span> <span class="title">aria</span>-<span class="title">hidden</span>=&quot;<span class="title">true</span>&quot;&gt;&amp;<span class="title">raquo</span>;&lt;/<span class="title">span</span>&gt;</span></span><br><span class="line"><span class="class">      &lt;/<span class="title">a</span>&gt;</span></span><br><span class="line"><span class="class">    &lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="class">  &lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"><span class="class">&lt;/<span class="title">nav</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-11-å¼¹æ¡†"><a href="#2-11-å¼¹æ¡†" class="headerlink" title="2.11 å¼¹æ¡†"></a>2.11 å¼¹æ¡†</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">https://lipis.github.io/bootstrap-sweetalert/</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">swal(<span class="string">&#x27;ä½ è¿˜å¥½å—?&#x27;</span>)</span><br><span class="line">undefined</span><br><span class="line">swal(<span class="string">&#x27;ä½ è¿˜å¥½å—?&#x27;</span>)</span><br><span class="line">undefined</span><br><span class="line">swal(<span class="string">&#x27;ä½ è¿˜å¥½å—?&#x27;</span>,<span class="string">&#x27;æˆ‘ä¸å¥½ï¼Œæƒ³ä½ äº†!&#x27;</span>)</span><br><span class="line">undefined</span><br><span class="line">swal(<span class="string">&#x27;ä½ è¿˜å¥½å—?&#x27;</span>,<span class="string">&#x27;æˆ‘ä¸å¥½ï¼Œæƒ³ä½ äº†!&#x27;</span>,<span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">undefined</span><br><span class="line">swal(<span class="string">&#x27;ä½ è¿˜å¥½å—?&#x27;</span>,<span class="string">&#x27;æˆ‘ä¸å¥½ï¼Œæƒ³ä½ äº†!&#x27;</span>,<span class="string">&#x27;warning&#x27;</span>)</span><br><span class="line">undefined</span><br><span class="line">swal(<span class="string">&#x27;ä½ è¿˜å¥½å—?&#x27;</span>,<span class="string">&#x27;æˆ‘ä¸å¥½ï¼Œæƒ³ä½ äº†!&#x27;</span>,<span class="string">&#x27;error&#x27;</span>)</span><br><span class="line">undefined</span><br><span class="line">swal(<span class="string">&#x27;ä½ è¿˜å¥½å—?&#x27;</span>,<span class="string">&#x27;æˆ‘ä¸å¥½ï¼Œæƒ³ä½ äº†!&#x27;</span>,<span class="string">&#x27;info&#x27;</span>)</span><br><span class="line">undefined</span><br><span class="line"><span class="comment"># æˆ‘ä»¬åœ¨åé¢çš„è¯¾ç¨‹ä¸­ è¿˜ä¼šæ¶‰åŠåˆ°è¯¥éƒ¨åˆ†å†…å®¹</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Python</category>
        <category>å‰ç«¯åŸºç¡€</category>
      </categories>
  </entry>
  <entry>
    <title>Day59-Django-01</title>
    <url>/2022/08/25/03_Python/02_%E5%89%8D%E7%AB%AF/day59%E7%AC%94%E8%AE%B0-Django-01/</url>
    <content><![CDATA[<p>â€œç¬¬59å¤©Django-01å­¦ä¹ ç¬”è®°â€</p>
<h1 id="1-æ‰‹å†™Webæ¡†æ¶"><a href="#1-æ‰‹å†™Webæ¡†æ¶" class="headerlink" title="1 æ‰‹å†™Webæ¡†æ¶"></a>1 æ‰‹å†™Webæ¡†æ¶</h1><p>åœ¨å­¦Webæ¡†æ¶ä¹‹å‰ï¼Œå¤ä¹ ä¸‹HTTPåè®®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># HTTPåè®®</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ç½‘ç»œåè®®</span></span><br><span class="line"><span class="string">HTTPåè®®				æ•°æ®ä¼ è¾“æ˜¯æ˜æ–‡</span></span><br><span class="line"><span class="string">HTTPSåè®®				æ•°æ®ä¼ è¾“æ˜¯å¯†æ–‡</span></span><br><span class="line"><span class="string">websocketåè®®		æ•°æ®ä¼ è¾“æ˜¯å¯†æ–‡</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å››å¤§ç‰¹æ€§</span></span><br><span class="line"><span class="string">	1.åŸºäºè¯·æ±‚å“åº”</span></span><br><span class="line"><span class="string">	2.åŸºäºTCPã€IPä½œç”¨äºåº”ç”¨å±‚ä¹‹ä¸Šçš„åè®®</span></span><br><span class="line"><span class="string">	3.æ— çŠ¶æ€</span></span><br><span class="line"><span class="string">	4.çŸ­/æ— é“¾æ¥</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æ•°æ®æ ¼å¼</span></span><br><span class="line"><span class="string">	è¯·æ±‚é¦–è¡Œ</span></span><br><span class="line"><span class="string">	è¯·æ±‚å¤´</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">	è¯·æ±‚ä½“</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å“åº”çŠ¶æ€ç </span></span><br><span class="line"><span class="string">	1XX</span></span><br><span class="line"><span class="string">	2XX			200</span></span><br><span class="line"><span class="string">	3XX			</span></span><br><span class="line"><span class="string">	4XX			403 404</span></span><br><span class="line"><span class="string">	5XX			500</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="1-1-çº¯æ‰‹å†™çš„Webæ¡†æ¶"><a href="#1-1-çº¯æ‰‹å†™çš„Webæ¡†æ¶" class="headerlink" title="1.1 çº¯æ‰‹å†™çš„Webæ¡†æ¶"></a>1.1 çº¯æ‰‹å†™çš„Webæ¡†æ¶</h2><p>æ¡ˆä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¡ˆä¾‹ï¼šçº¯æ‰‹å†™çš„python Webæ¡†æ¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå¥—æ¥å­—</span></span><br><span class="line">server = socket.socket()</span><br><span class="line"><span class="comment"># ç»‘å®šIPå’Œç«¯å£</span></span><br><span class="line">server.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8080</span>))</span><br><span class="line"><span class="comment"># è®¾ç½®ç›‘å¬æ± å¤§å°</span></span><br><span class="line">server.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># å¼€å§‹æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥</span></span><br><span class="line">    conn, addr = server.accept()</span><br><span class="line">    <span class="comment"># æ¥æ”¶å®¢æˆ·ç«¯ä¼ æ¥çš„æ•°æ®(äºŒè¿›åˆ¶)</span></span><br><span class="line">    data = conn.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="comment"># è¾“å‡ºdataçœ‹çœ‹æ˜¯ä»€ä¹ˆä¸œè¥¿</span></span><br><span class="line">    <span class="built_in">print</span>(data)</span><br><span class="line">    <span class="comment"># å°†äºŒè¿›åˆ¶æ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²</span></span><br><span class="line">    data = data.decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="comment"># å‘å®¢æˆ·ç«¯å‘é€æ•°æ®</span></span><br><span class="line">    conn.send(<span class="string">b&#x27;HTTP/1.1 200 OK\r\n\r\n&#x27;</span>)</span><br><span class="line">    current_path = data.split(<span class="string">&#x27; &#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">    <span class="comment"># è¾“å‡ºè·¯å¾„çœ‹çœ‹</span></span><br><span class="line">    <span class="built_in">print</span>(current_path)</span><br><span class="line">    <span class="comment"># è·¯å¾„åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span> current_path == <span class="string">&quot;/index&quot;</span>:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&#x27;templates/index.html&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            conn.send(f.read())</span><br><span class="line">    <span class="keyword">elif</span> current_path == <span class="string">&#x27;/login&#x27;</span>:</span><br><span class="line">        conn.send(<span class="string">b&#x27;login page&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        conn.send(<span class="string">b&#x27;Hello World&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å…³é—­å¥—æ¥å­—</span></span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­<code>print(data)</code>è¾“å‡ºçš„å†…å®¹ï¼Œ<code>/favicon.ico</code>å¯ä»¥å¿½ç•¥ï¼Œé€šè¿‡<code>data.split(&#39; &#39;)[1]</code>å¯ä»¥è·å–è®¿é—®çš„è·¯å¾„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å½“è®¿é—®http://127.0.0.1:8080</span></span><br><span class="line"><span class="string">b&#x27;GET / HTTP/1.1\r\nHost: 127.0.0.1:8080\r\nConnection: keep-alive\r\nCache-Control: max-age=0\r\nsec-ch-ua: &quot;Chromium&quot;;v=&quot;104&quot;, &quot; Not A;Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;104&quot;\r\nsec-ch-ua-mobile: ?0\r\nsec-ch-ua-platform: &quot;Windows&quot;\r\nUpgrade-Insecure-Requests: 1\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\r\nSec-Fetch-Site: none\r\nSec-Fetch-Mode: navigate\r\nSec-Fetch-User: ?1\r\nSec-Fetch-Dest: document\r\nAccept-Encoding: gzip, deflate, br\r\nAccept-Language: zh-CN,zh;q=0.9,zh-TW;q=0.8,en-US;q=0.7,en;q=0.6\r\n\r\n&#x27;</span></span><br><span class="line">/</span><br><span class="line"><span class="string">b&#x27;GET /favicon.ico HTTP/1.1\r\nHost: 127.0.0.1:8080\r\nConnection: keep-alive\r\nsec-ch-ua: &quot;Chromium&quot;;v=&quot;104&quot;, &quot; Not A;Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;104&quot;\r\nsec-ch-ua-mobile: ?0\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36\r\nsec-ch-ua-platform: &quot;Windows&quot;\r\nAccept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8\r\nSec-Fetch-Site: same-origin\r\nSec-Fetch-Mode: no-cors\r\nSec-Fetch-Dest: image\r\nReferer: http://127.0.0.1:8080/\r\nAccept-Encoding: gzip, deflate, br\r\nAccept-Language: zh-CN,zh;q=0.9,zh-TW;q=0.8,en-US;q=0.7,en;q=0.6\r\n\r\n&#x27;</span></span><br><span class="line">/favicon.ico</span><br><span class="line"></span><br><span class="line"><span class="comment"># å½“è®¿é—®http://127.0.0.1:8080/index</span></span><br><span class="line"><span class="string">b&#x27;GET /index HTTP/1.1\r\nHost: 127.0.0.1:8080\r\nConnection: keep-alive\r\nsec-ch-ua: &quot;Chromium&quot;;v=&quot;104&quot;, &quot; Not A;Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;104&quot;\r\nsec-ch-ua-mobile: ?0\r\nsec-ch-ua-platform: &quot;Windows&quot;\r\nUpgrade-Insecure-Requests: 1\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\r\nPurpose: prefetch\r\nSec-Fetch-Site: none\r\nSec-Fetch-Mode: navigate\r\nSec-Fetch-User: ?1\r\nSec-Fetch-Dest: document\r\nAccept-Encoding: gzip, deflate, br\r\nAccept-Language: zh-CN,zh;q=0.9,zh-TW;q=0.8,en-US;q=0.7,en;q=0.6\r\n\r\n&#x27;</span></span><br><span class="line">/index</span><br><span class="line"><span class="string">b&#x27;GET /favicon.ico HTTP/1.1\r\nHost: 127.0.0.1:8080\r\nConnection: keep-alive\r\nsec-ch-ua: &quot;Chromium&quot;;v=&quot;104&quot;, &quot; Not A;Brand&quot;;v=&quot;99&quot;, &quot;Google Chrome&quot;;v=&quot;104&quot;\r\nsec-ch-ua-mobile: ?0\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36\r\nsec-ch-ua-platform: &quot;Windows&quot;\r\nAccept: image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8\r\nSec-Fetch-Site: same-origin\r\nSec-Fetch-Mode: no-cors\r\nSec-Fetch-Dest: image\r\nReferer: http://127.0.0.1:8080/index\r\nAccept-Encoding: gzip, deflate, br\r\nAccept-Language: zh-CN,zh;q=0.9,zh-TW;q=0.8,en-US;q=0.7,en;q=0.6\r\n\r\n&#x27;</span></span><br><span class="line">/favicon.ico</span><br></pre></td></tr></table></figure>

<p>å®ç°çš„æ•ˆæœï¼š</p>
<p>â€‹	é€šè¿‡ä¸åŒçš„è·¯å¾„å¯ä»¥è®¿é—®åˆ°ä¸åŒçš„htmlé¡µé¢</p>
<h3 id="1-1-1-çº¯æ‰‹æ’¸çš„webæ¡†æ¶æœ‰ä»¥ä¸‹ä¸è¶³ï¼š"><a href="#1-1-1-çº¯æ‰‹æ’¸çš„webæ¡†æ¶æœ‰ä»¥ä¸‹ä¸è¶³ï¼š" class="headerlink" title="1.1.1 çº¯æ‰‹æ’¸çš„webæ¡†æ¶æœ‰ä»¥ä¸‹ä¸è¶³ï¼š"></a>1.1.1 çº¯æ‰‹æ’¸çš„webæ¡†æ¶æœ‰ä»¥ä¸‹ä¸è¶³ï¼š</h3><ul>
<li>ä»£ç é‡å¤(æœåŠ¡ç«¯ä»£ç æ‰€æœ‰äººéƒ½è¦é‡å¤å†™)</li>
<li>æ‰‹åŠ¨å¤„ç†httpæ ¼å¼çš„æ•°æ® å¹¶ä¸”åªèƒ½æ‹¿åˆ°urlåç¼€ å…¶ä»–æ•°æ®è·å–ç¹ç(æ•°æ®æ ¼å¼ä¸€æ ·å¤„ç†çš„ä»£ç å…¶å®ä¹Ÿå¤§è‡´ä¸€æ · é‡å¤å†™)</li>
<li>å¹¶å‘çš„é—®é¢˜</li>
</ul>
<h2 id="1-2-ä½¿ç”¨wsgirefæ¨¡å—å†™Webæ¡†æ¶"><a href="#1-2-ä½¿ç”¨wsgirefæ¨¡å—å†™Webæ¡†æ¶" class="headerlink" title="1.2 ä½¿ç”¨wsgirefæ¨¡å—å†™Webæ¡†æ¶"></a>1.2 ä½¿ç”¨wsgirefæ¨¡å—å†™Webæ¡†æ¶</h2><p>wsgirefæ•´åˆäº†socketæ¡†æ¶ï¼Œä¸ç”¨é‡æ–°å†™socketï¼Œæ¯”çº¯æ‰‹å†™è¦å¥½ç‚¹</p>
<h3 id="1-2-1-serverä»£ç "><a href="#1-2-1-serverä»£ç " class="headerlink" title="1.2.1 serverä»£ç "></a>1.2.1 serverä»£ç </h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> wsgiref.simple_server <span class="keyword">import</span> make_server</span><br><span class="line"><span class="keyword">from</span> urls <span class="keyword">import</span> urls</span><br><span class="line"><span class="keyword">from</span> views <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">env, response</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    :param env: è¯·æ±‚ç›¸å…³çš„æ‰€æœ‰æ•°æ®</span></span><br><span class="line"><span class="string">    :param response: å“åº”ç›¸å…³çš„æ‰€æœ‰æ•°æ®</span></span><br><span class="line"><span class="string">    :return: è¿”å›ç»™æµè§ˆå™¨çš„æ•°æ®</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># env å¤§å­—å…¸ wsgirefæ¨¡å—å¸®ä½ ä½ å¤„ç†å¥½Httpæ ¼å¼çš„æ•°æ®ï¼Œå°è£…æˆäº†å­—å…¸è®©ä½ æ›´åŠ æ–¹ä¾¿æ“ä½œ</span></span><br><span class="line">    <span class="comment"># print(env)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å“åº”é¦–è¡Œï¼Œå“åº”å¤´</span></span><br><span class="line">    response(<span class="string">&#x27;200 OK&#x27;</span>, [])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä»envä¸­è·å–å½“å‰è®¿é—®çš„è·¯å¾„</span></span><br><span class="line">    current_path = env.get(<span class="string">&#x27;PATH_INFO&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å®šä¹‰funcå˜é‡ï¼Œå­˜å‚¨å‡½æ•°å</span></span><br><span class="line">    func = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">        <span class="keyword">if</span> current_path == url[<span class="number">0</span>]:</span><br><span class="line">            func = url[<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="comment"># åˆ¤æ–­funcæ˜¯å¦æœ‰å€¼</span></span><br><span class="line">    <span class="keyword">if</span> func:</span><br><span class="line">        res = func(env)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        res = error(env)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿”å›å¾—åˆ°çš„æ•°æ®ï¼Œåœ¨æ­¤ç»Ÿä¸€ç¼–ç </span></span><br><span class="line">    <span class="keyword">return</span> [res.encode(<span class="string">&#x27;utf-8&#x27;</span>)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    server = make_server(<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">8080</span>, run)</span><br><span class="line">    <span class="comment"># å¯åŠ¨æœåŠ¡</span></span><br><span class="line">    server.serve_forever()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>PSï¼šè¡¥å……ï¼Œå…³äº<code>print(env)</code>çš„è¾“å‡º</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;&#123;<span class="string">&#x27;ALLUSERSPROFILE&#x27;</span>: <span class="string">&#x27;C:\\ProgramData&#x27;</span>, <span class="string">&#x27;APPDATA&#x27;</span>: <span class="string">&#x27;C:\\Users\\fr724\\AppData\\Roaming&#x27;</span>, <span class="string">&#x27;APR_ICONV_PATH&#x27;</span>: <span class="string">&#x27;D:\\software\\subversion\\iconv&#x27;</span>, <span class="string">&#x27;COMMONPROGRAMFILES&#x27;</span>: <span class="string">&#x27;C:\\Program&#x27;</span></span><br><span class="line">.....</span><br><span class="line"><span class="string">&#x27;HTTP_UPGRADE_INSECURE_REQUESTS&#x27;</span>: <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;HTTP_USER_AGENT&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) </span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹å‡ºï¼Œå…¶ä¸­æ˜¯å¤§é‡çš„<font color=red>ç¯å¢ƒå˜é‡</font>çš„é”®å€¼å¯¹ï¼Œä¸»è¦å–å…¶ä¸­æœ‰ç”¨çš„æ®µ<code>PATH_INFO</code>æ¥è·å–è®¿é—®è·¯å¾„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&gt;<span class="string">&#x27;PATH_INFO&#x27;</span>: <span class="string">&#x27;/index&#x27;</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="1-2-2-ç‰¹å®šæ–‡ä»¶å¤¹æ ¼å¼"><a href="#1-2-2-ç‰¹å®šæ–‡ä»¶å¤¹æ ¼å¼" class="headerlink" title="1.2.2 ç‰¹å®šæ–‡ä»¶å¤¹æ ¼å¼"></a>1.2.2 ç‰¹å®šæ–‡ä»¶å¤¹æ ¼å¼</h3><p>ä½¿ç”¨wsgiéœ€è¦ç‰¹å®šçš„æ–‡ä»¶å¤¹æ ¼å¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">urls.py						è·¯ç”±ä¸è§†å›¾å‡½æ•°å¯¹åº”å…³ç³»</span></span><br><span class="line"><span class="string">views.py					è§†å›¾å‡½æ•°(åç«¯ä¸šåŠ¡é€»è¾‘)</span></span><br><span class="line"><span class="string">templatesæ–‡ä»¶å¤¹		ä¸“é—¨ç”¨æ¥å­˜å‚¨htmlæ–‡ä»¶</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># æŒ‰ç…§åŠŸèƒ½çš„ä¸åŒæ‹†åˆ†ä¹‹å åç»­æ·»åŠ åŠŸèƒ½åªéœ€è¦åœ¨urls.pyä¹¦å†™å¯¹åº”å…³ç³»ç„¶åå–views.pyä¹¦å†™ä¸šåŠ¡é€»è¾‘å³å¯</span></span><br></pre></td></tr></table></figure>

<p>urls.pyçš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> views <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="comment"># urlä¸å‡½æ•°çš„å¯¹åº”å…³ç³»</span></span><br><span class="line">urls = [</span><br><span class="line">    (<span class="string">&#x27;/index&#x27;</span>,index),</span><br><span class="line">    (<span class="string">&#x27;/login&#x27;</span>,login),</span><br><span class="line">    (<span class="string">&#x27;/xxx&#x27;</span>,xxx),</span><br><span class="line">    (<span class="string">&#x27;/get_time&#x27;</span>,get_time),</span><br><span class="line">    (<span class="string">&#x27;/get_dict&#x27;</span>,get_dict),</span><br><span class="line">    (<span class="string">&#x27;/get_user&#x27;</span>,get_user)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>views.pyçš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>(<span class="params">env</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span>(<span class="params">env</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;login&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">error</span>(<span class="params">env</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;404 error&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–htmlæ–‡ä»¶çš„æ¡ˆä¾‹</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">xxx</span>(<span class="params">env</span>):</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&#x27;templates/myxxx.html&#x27;</span>, rb) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">return</span> f.read()</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ¨æ€ä¿®æ”¹htmlå†…å®¹çš„æ¡ˆä¾‹ -- é€šè¿‡æ–‡å­—æ›¿æ¢å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_time</span>(<span class="params">env</span>):</span></span><br><span class="line">    <span class="comment"># è·å–å½“å‰æ—¶é—´</span></span><br><span class="line">    current_time = datetime.datetime.now().strftime(<span class="string">&#x27;%Y-%m-%d %X&#x27;</span>)</span><br><span class="line">    <span class="comment"># é€šè¿‡æ–‡å­—æ›¿æ¢å°†åç«¯è·å–åˆ°çš„æ•°æ®&#x27;ä¼ é€’åˆ°&#x27;htmlæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&#x27;templates/mytime.html&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=(<span class="string">&#x27;utf-8&#x27;</span>)) <span class="keyword">as</span> f:</span><br><span class="line">        data = f.read()</span><br><span class="line">        <span class="comment"># å¤„ç†æ•°æ®</span></span><br><span class="line">        data = data.replace(<span class="string">&#x27;dsadsa&#x27;</span>, current_time)</span><br><span class="line">        <span class="comment"># è¿”å›å¤„ç†å¥½çš„æ•°æ®</span></span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ¨æ€ä¿®æ”¹htmlå†…å®¹çš„æ¡ˆä¾‹ -- é€šè¿‡jinja2å®ç°</span></span><br><span class="line"><span class="comment"># å¯¼å…¥jinja2æ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> jinja2 <span class="keyword">import</span> Template</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_dict</span>(<span class="params">env</span>):</span></span><br><span class="line">    <span class="comment"># åˆ›å»ºæ•°æ®å˜é‡</span></span><br><span class="line">    user_dic = &#123;<span class="string">&#x27;username&#x27;</span>:<span class="string">&#x27;Goosh&#x27;</span>, <span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>, <span class="string">&#x27;hobby&#x27;</span>:<span class="string">&#x27;cook&#x27;</span>&#125;</span><br><span class="line">    <span class="comment"># è¯»å–htmlæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&#x27;templates/get_dict.html&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=(<span class="string">&#x27;utf-8&#x27;</span>)) <span class="keyword">as</span> f:</span><br><span class="line">        data = f.read()</span><br><span class="line">    <span class="comment"># å¤„ç†æ•°æ®å˜é‡ï¼Œæ¸²æŸ“æˆjinja2å˜é‡</span></span><br><span class="line">    tmp = Template(data)</span><br><span class="line">    res = tmp.render(user=user_dic)</span><br><span class="line">    <span class="comment"># è¿”å›å¤„ç†åçš„ç»“æœ</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ¨æ€è·å–æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œä¼ é€’åˆ°htmlä¸­</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_user</span>(<span class="params">env</span>):</span></span><br><span class="line">    <span class="comment"># è¿æ¥æ•°æ®åº“</span></span><br><span class="line">    conn = pymysql.connect(</span><br><span class="line">        host = <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">        port = <span class="number">3306</span>,</span><br><span class="line">        user = <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        password= <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        db = <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">        charset= <span class="string">&#x27;utf8&#x27;</span>,</span><br><span class="line">        autocommit = <span class="literal">True</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ›å»ºæ¸¸æ ‡</span></span><br><span class="line">    cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¦æŸ¥è¯¢çš„è¯­å¥</span></span><br><span class="line">    sql = <span class="string">&#x27;select * from students&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ‰§è¡Œè¯­å¥</span></span><br><span class="line">    affect_rows = cursor.execute(sql)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†è·å–çš„æ•°æ®ä¿å­˜åˆ°å˜é‡ä¸­</span></span><br><span class="line">    data_list = cursor.fetchall()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†æ•°æ®åºŠåº•ç»™html</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&#x27;templates/get_data.html&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = f.read()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># jinja2æ¸²æŸ“æ•°æ®</span></span><br><span class="line">    tmp = Template(data)</span><br><span class="line">    res = tmp.render(user_list=data_list)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿”å›æ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span>  res</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    get_user(<span class="number">111</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-2-3-htmlé¡µé¢åˆ›å»º"><a href="#1-2-3-htmlé¡µé¢åˆ›å»º" class="headerlink" title="1.2.3 htmlé¡µé¢åˆ›å»º"></a>1.2.3 htmlé¡µé¢åˆ›å»º</h3><p>åˆ›å»ºhtmlé¡µé¢ï¼Œæ”¾åˆ°<code>templates</code>æ–‡ä»¶å¤¹ä¸­</p>
<p>mytime.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>å½“å‰æ—¶é—´æ˜¯: dsadsa<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>myxxx.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>è¿™æ˜¯xxxçš„é¡µé¢<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>get_dict.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªé¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">&#123;&#123; user &#125;&#125;</span><br><span class="line">&#123;&#123; user.get(&#x27;username&#x27;)&#125;&#125;</span><br><span class="line">&#123;&#123; user.age &#125;&#125;</span><br><span class="line">&#123;&#123; user[&#x27;hobby&#x27;] &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>get_data.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  &#123;&#123; user_list &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="2-åŠ¨æ€ç½‘é¡µå’Œé™æ€ç½‘é¡µ"><a href="#2-åŠ¨æ€ç½‘é¡µå’Œé™æ€ç½‘é¡µ" class="headerlink" title="2 åŠ¨æ€ç½‘é¡µå’Œé™æ€ç½‘é¡µ"></a>2 åŠ¨æ€ç½‘é¡µå’Œé™æ€ç½‘é¡µ</h1><p>ä»€ä¹ˆæ˜¯åŠ¨æ€ç½‘é¡µï¼Ÿä»€ä¹ˆåˆæ˜¯é™æ€ç½‘é¡µï¼Ÿå®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>é™æ€ç½‘é¡µ<ul>
<li>é¡µé¢ä¸Šçš„æ•°æ®æ˜¯ç›´æ¥å†™æ­»çš„(ä¸‡å¹´ä¸å˜)</li>
</ul>
</li>
<li>åŠ¨æ€ç½‘é¡µ<ul>
<li>æ•°æ®æ˜¯å®æ—¶è·å–çš„</li>
<li>ä¾‹å¦‚ï¼š<ul>
<li>åç«¯è·å–å½“å‰æ—¶é—´å±•ç¤ºåˆ°htmlé¡µé¢ä¸Š</li>
<li>æ•°æ®æ˜¯ä»æ•°æ®åº“ä¸­è·å–çš„å±•ç¤ºåˆ°htmlé¡µé¢ä¸Š</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>åŠ¨æ€ç½‘é¡µçš„æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åŠ¨æ€ç½‘é¡µåˆ¶ä½œ</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_time</span>(<span class="params">env</span>):</span></span><br><span class="line">    current_time = datetime.datetime.now().strftime(<span class="string">&#x27;%Y-%m-%d %X&#x27;</span>)</span><br><span class="line">    <span class="comment"># å¦‚ä½•å°†åç«¯è·å–åˆ°çš„æ•°æ®&quot;ä¼ é€’&quot;ç»™htmlæ–‡ä»¶ï¼Ÿ</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&#x27;templates/03 mytime.html&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = f.read()</span><br><span class="line">        <span class="comment"># dataå°±æ˜¯ä¸€å †å­—ç¬¦ä¸²</span></span><br><span class="line">    data = data.replace(<span class="string">&#x27;dwadasdsadsadasdas&#x27;</span>,current_time)   <span class="comment"># åœ¨åç«¯å°†htmlé¡µé¢å¤„ç†å¥½ä¹‹åå†è¿”å›ç»™å‰ç«¯</span></span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†ä¸€ä¸ªå­—å…¸ä¼ é€’ç»™htmlæ–‡ä»¶ å¹¶ä¸”å¯ä»¥åœ¨æ–‡ä»¶ä¸Šæ–¹ä¾¿å¿«æ·çš„æ“ä½œå­—å…¸æ•°æ®</span></span><br><span class="line"><span class="keyword">from</span> jinja2 <span class="keyword">import</span> Template</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_dict</span>(<span class="params">env</span>):</span></span><br><span class="line">    user_dic = &#123;<span class="string">&#x27;username&#x27;</span>:<span class="string">&#x27;jason&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>,<span class="string">&#x27;hobby&#x27;</span>:<span class="string">&#x27;read&#x27;</span>&#125;</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&#x27;templates/04 get_dict.html&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = f.read()</span><br><span class="line">    tmp = Template(data)</span><br><span class="line">    res = tmp.render(user=user_dic)</span><br><span class="line">    <span class="comment"># ç»™get_dict.htmlä¼ é€’äº†ä¸€ä¸ªå€¼ é¡µé¢ä¸Šé€šè¿‡å˜é‡åuserå°±èƒ½å¤Ÿæ‹¿åˆ°user_dict</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="comment"># åç«¯è·å–æ•°æ®åº“ä¸­æ•°æ®å±•ç¤ºåˆ°å‰ç«¯é¡µé¢</span></span><br></pre></td></tr></table></figure>



<h1 id="3-è‡ªå®šä¹‰ç®€æ˜“ç‰ˆæœ¬webæ¡†æ¶è¯·æ±‚æµç¨‹å›¾"><a href="#3-è‡ªå®šä¹‰ç®€æ˜“ç‰ˆæœ¬webæ¡†æ¶è¯·æ±‚æµç¨‹å›¾" class="headerlink" title="3 è‡ªå®šä¹‰ç®€æ˜“ç‰ˆæœ¬webæ¡†æ¶è¯·æ±‚æµç¨‹å›¾"></a>3 è‡ªå®šä¹‰ç®€æ˜“ç‰ˆæœ¬webæ¡†æ¶è¯·æ±‚æµç¨‹å›¾</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">wsgirefæ¨¡å—</span></span><br><span class="line"><span class="string">	1.è¯·æ±‚æ¥çš„æ—¶å€™è§£æhttpæ ¼å¼çš„æ•°æ® å°è£…æˆå¤§å­—å…¸</span></span><br><span class="line"><span class="string">	2.å“åº”èµ°çš„æ—¶å€™ç»™æ•°æ®æ‰“åŒ…æˆç¬¦åˆhttpæ ¼å¼ å†è¿”å›ç»™æµè§ˆå™¨</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="4-pythonä¸‰å¤§ä¸»æµwebæ¡†æ¶"><a href="#4-pythonä¸‰å¤§ä¸»æµwebæ¡†æ¶" class="headerlink" title="4 pythonä¸‰å¤§ä¸»æµwebæ¡†æ¶"></a>4 pythonä¸‰å¤§ä¸»æµwebæ¡†æ¶</h1><h2 id="4-1-ä¸‰å¤§ä¸»æµæ¡†æ¶"><a href="#4-1-ä¸‰å¤§ä¸»æµæ¡†æ¶" class="headerlink" title="4.1 ä¸‰å¤§ä¸»æµæ¡†æ¶"></a>4.1 ä¸‰å¤§ä¸»æµæ¡†æ¶</h2><p><strong>django</strong></p>
<p>â€‹	ç‰¹ç‚¹:å¤§è€Œå…¨ è‡ªå¸¦çš„åŠŸèƒ½ç‰¹åˆ«ç‰¹åˆ«ç‰¹åˆ«çš„å¤š ç±»ä¼¼äºèˆªç©ºæ¯èˆ°</p>
<p>â€‹	ä¸è¶³ä¹‹å¤„:</p>
<p>â€‹		æœ‰æ—¶å€™è¿‡äºç¬¨é‡</p>
<p><strong>flask</strong></p>
<p>â€‹	ç‰¹ç‚¹:å°è€Œç²¾  è‡ªå¸¦çš„åŠŸèƒ½ç‰¹åˆ«ç‰¹åˆ«ç‰¹åˆ«çš„å°‘ ç±»ä¼¼äºæ¸¸éª‘å…µ</p>
<p>â€‹	ç¬¬ä¸‰æ–¹çš„æ¨¡å—ç‰¹åˆ«ç‰¹åˆ«ç‰¹åˆ«çš„å¤šï¼Œå¦‚æœå°†flaskç¬¬ä¸‰æ–¹çš„æ¨¡å—åŠ èµ·æ¥å®Œå…¨å¯ä»¥ç›–è¿‡django</p>
<p>â€‹	å¹¶ä¸”ä¹Ÿè¶Šæ¥è¶Šåƒdjango</p>
<p>â€‹	ä¸è¶³ä¹‹å¤„:</p>
<p>â€‹		æ¯”è¾ƒä¾èµ–äºç¬¬ä¸‰æ–¹çš„å¼€å‘è€…<br>â€‹		<br><strong>tornado</strong></p>
<p>â€‹	ç‰¹ç‚¹:å¼‚æ­¥éé˜»å¡ æ”¯æŒé«˜å¹¶å‘</p>
<p>â€‹		ç‰›é€¼åˆ°ç”šè‡³å¯ä»¥å¼€å‘æ¸¸æˆæœåŠ¡å™¨</p>
<p>â€‹	ä¸è¶³ä¹‹å¤„:</p>
<p>â€‹		æš‚æ—¶ä½ ä¸ä¼š</p>
<h2 id="4-2-ä¸‰å¤§æ¡†æ¶çš„å¯¹æ¯”"><a href="#4-2-ä¸‰å¤§æ¡†æ¶çš„å¯¹æ¯”" class="headerlink" title="4.2 ä¸‰å¤§æ¡†æ¶çš„å¯¹æ¯”"></a>4.2 ä¸‰å¤§æ¡†æ¶çš„å¯¹æ¯”</h2><p>å¦‚æœå°†æ¡†æ¶åˆ†ä¸ºä¸‰éƒ¨åˆ†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">A:socketéƒ¨åˆ†</span><br><span class="line">B:è·¯ç”±ä¸è§†å›¾å‡½æ•°å¯¹åº”å…³ç³»(è·¯ç”±åŒ¹é…)</span><br><span class="line">C:æ¨¡ç‰ˆè¯­æ³•</span><br></pre></td></tr></table></figure>

<p>ä¸‰ä¸ªæ¡†æ¶ä¹‹é—´çš„å¯¹æ¯”å¦‚ä¸‹ï¼š</p>
<p><strong>django</strong></p>
<ul>
<li>Aç”¨çš„æ˜¯åˆ«äººçš„		wsgirefæ¨¡å—</li>
<li>Bç”¨çš„æ˜¯è‡ªå·±çš„</li>
<li>Cç”¨çš„æ˜¯è‡ªå·±çš„(æ²¡æœ‰jinja2å¥½ç”¨ ä½†æ˜¯ä¹Ÿå¾ˆæ–¹ä¾¿)</li>
</ul>
<p><strong>flask</strong></p>
<ul>
<li>Aç”¨çš„æ˜¯åˆ«äººçš„		werkzeug(å†…éƒ¨è¿˜æ˜¯wsgirefæ¨¡å—)</li>
<li>Bè‡ªå·±å†™çš„</li>
<li>Cç”¨çš„åˆ«äººçš„(jinja2)</li>
</ul>
<p><strong>tornado</strong></p>
<ul>
<li>Aï¼ŒBï¼ŒCéƒ½æ˜¯è‡ªå·±å†™çš„</li>
</ul>
<h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¦‚ä½•è®©ä½ çš„è®¡ç®—æœºèƒ½å¤Ÿæ­£å¸¸çš„å¯åŠ¨djangoé¡¹ç›®</span></span><br><span class="line"><span class="number">1.</span>è®¡ç®—æœºçš„åç§°ä¸èƒ½æœ‰ä¸­æ–‡</span><br><span class="line"><span class="number">2.</span>ä¸€ä¸ªpycharmçª—å£åªå¼€ä¸€ä¸ªé¡¹ç›®</span><br><span class="line"><span class="number">3.</span>é¡¹ç›®é‡Œé¢æ‰€æœ‰çš„æ–‡ä»¶ä¹Ÿå°½é‡ä¸è¦å‡ºç°ä¸­æ–‡</span><br><span class="line"><span class="number">4.</span>pythonè§£é‡Šå™¨å°½é‡ä½¿ç”¨<span class="number">3.4</span>~<span class="number">3.6</span>ä¹‹é—´çš„ç‰ˆæœ¬</span><br><span class="line">(å¦‚æœä½ çš„é¡¹ç›®æŠ¥é”™ ä½ ç‚¹å‡»æœ€åä¸€ä¸ªæŠ¥é”™ä¿¡æ¯å»æºç ä¸­æŠŠé€—å·åˆ æ‰)</span><br></pre></td></tr></table></figure>

<h1 id="5-Django"><a href="#5-Django" class="headerlink" title="5 Django"></a>5 Django</h1><h2 id="5-1-å®‰è£…Django"><a href="#5-1-å®‰è£…Django" class="headerlink" title="5.1 å®‰è£…Django"></a>5.1 å®‰è£…Django</h2><p>ä½¿ç”¨<code>pip</code>å®‰è£…Django</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">pip3 install django==3.2</span></span><br></pre></td></tr></table></figure>

<p>éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸçš„æ–¹å¼:</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> django-admin --version</span></span><br><span class="line">3.2</span><br></pre></td></tr></table></figure>

<p><strong>Djangoç‰ˆæœ¬é€‰æ‹©</strong></p>
<p>ç›®å‰ç‰ˆæœ¬ä¸»è¦åˆ†ä¸ºï¼š</p>
<pre><code>1.X 2.X 3.X 4.X
</code></pre>
<p>æœ€æ–°çš„ä¸º4.1ï¼Œæœ€æ–°çš„LTSç‰ˆæœ¬æ˜¯3.2ï¼Œå› æ­¤é€‰æ‹©3.2ç‰ˆæœ¬</p>
<h2 id="5-1-åˆ›å»ºDjangoé¡¹ç›®"><a href="#5-1-åˆ›å»ºDjangoé¡¹ç›®" class="headerlink" title="5.1 åˆ›å»ºDjangoé¡¹ç›®"></a>5.1 åˆ›å»ºDjangoé¡¹ç›®</h2><h3 id="5-1-1-æ–¹å¼ä¸€ï¼šé€šè¿‡å‘½ä»¤è¡Œåˆ›å»º"><a href="#5-1-1-æ–¹å¼ä¸€ï¼šé€šè¿‡å‘½ä»¤è¡Œåˆ›å»º" class="headerlink" title="5.1.1 æ–¹å¼ä¸€ï¼šé€šè¿‡å‘½ä»¤è¡Œåˆ›å»º"></a>5.1.1 æ–¹å¼ä¸€ï¼šé€šè¿‡å‘½ä»¤è¡Œåˆ›å»º</h3><p>1ã€è¿›å…¥åˆ°å·¥ä½œç›®å½•ï¼Œä½¿ç”¨å‘½ä»¤åˆ›å»ºDjangoé¡¹ç›®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">django-admin startproject mysite</span><br></pre></td></tr></table></figure>

<p>2ã€æŸ¥çœ‹åˆ›å»ºå¥½çš„é¡¹ç›®ç›®å½•</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls mysite</span></span><br><span class="line">manage.py*  mysite/</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ls mysite/mysite/</span></span><br><span class="line">__init__.py  asgi.py  settings.py  urls.py  wsgi.py</span><br></pre></td></tr></table></figure>

<p>å¥½åƒæ˜¯ä¸€ç¾¤çœ‹ä¸æ‡‚å¾—æ–‡ä»¶ï¼Œä»–ä»¬çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<table>
<thead>
<tr>
<th>æ–‡ä»¶</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>manage.py</td>
<td>ä¸€ä¸ªå®ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯è®©ä½ ä»¥å„ç§æ–¹å¼ä¸è¯¥ Django é¡¹ç›®è¿›è¡Œäº¤äº’</td>
</tr>
<tr>
<td><strong>init</strong>.py</td>
<td>ä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œå‘Šè¯‰ Python è¯¥ç›®å½•æ˜¯ä¸€ä¸ª Python åŒ…</td>
</tr>
<tr>
<td>asgi.py</td>
<td>ä¸€ä¸ª ASGI å…¼å®¹çš„ Web æœåŠ¡å™¨çš„å…¥å£ï¼Œä»¥ä¾¿è¿è¡Œä½ çš„é¡¹ç›®ã€‚</td>
</tr>
<tr>
<td>settings.py</td>
<td>è¯¥ Django é¡¹ç›®çš„è®¾ç½®&#x2F;é…ç½®ã€‚åŒ…æ‹¬appè·¯å¾„ï¼Œæ•°æ®åº“é…ç½®ï¼Œsqlè¯­å¥ï¼Œé™æ€æ–‡ä»¶ç›®å½•ï¼Œä¸­é—´ä»¶ï¼Œsessionå­˜å‚¨çš„ç›¸å…³é…ç½®</td>
</tr>
<tr>
<td>urls.py</td>
<td>è¯¥ Django é¡¹ç›®çš„ URL å£°æ˜ï¼Œæ˜¯æ‰€æœ‰ç½‘å€çš„å…¥å£ï¼Œä¼šå…³è”åˆ°viewsä¸­çš„å‡½æ•°ã€‚</td>
</tr>
<tr>
<td>wsgi.py</td>
<td>ä¸€ä¸ª WSGI å…¼å®¹çš„ Web æœåŠ¡å™¨çš„å…¥å£ï¼Œä»¥ä¾¿è¿è¡Œä½ çš„é¡¹ç›®ã€‚</td>
</tr>
</tbody></table>
<p>3ã€å¯åŠ¨é¡¹ç›®</p>
<p>è¿›å…¥é¡¹ç›®ç›®å½•ï¼Œå¹¶å¯åŠ¨æœåŠ¡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> python manage.py runserver</span></span><br></pre></td></tr></table></figure>

<p> ä»¥ä¸‹æ˜¯è¾“å‡º</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Watching for file changes with StatReloader</span><br><span class="line">Performing system checks...</span><br><span class="line"></span><br><span class="line">System check identified no issues (0 silenced).</span><br><span class="line"></span><br><span class="line">You have 18 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions.</span><br><span class="line">Run &#x27;python manage.py migrate&#x27; to apply them.</span><br><span class="line">September 02, 2022 - 14:14:29</span><br><span class="line">Django version 3.2, using settings &#x27;mysite.settings&#x27;</span><br><span class="line">Starting development server at http://127.0.0.1:8000/</span><br><span class="line">Quit the server with CTRL-BREAK.</span><br></pre></td></tr></table></figure>

<p>è®¿é—®é¡µé¢æˆåŠŸå³å¯</p>
<p><img src="/../../../img/image-20220902141628470.png" alt="image-20220902141628470"></p>
<p>4ã€ åˆ›å»ºåº”ç”¨</p>
<p>é€šè¿‡å‘½ä»¤è¡Œåˆ›å»ºåº”ç”¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> python manage.py startapp app01</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å…³äºåº”ç”¨çš„åç§°:</p>
<p>â€‹	appèµ·ååº”åšåˆ°è§åçŸ¥æ„ï¼Œå¦‚:</p>
<p>â€‹		userã€orderã€webç­‰ç­‰</p>
<p>â€‹	è¿™é‡Œç»ƒä¹ å› æ­¤ä½¿ç”¨app01, app02è¿™äº›åç§°</p>
</blockquote>
<p>æŸ¥çœ‹åˆ›å»ºå®Œçš„æ–‡ä»¶å¤¹é‡Œæœ‰äº›ä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls app01/</span></span><br><span class="line">__init__.py  admin.py  apps.py  migrations/  models.py  tests.py  views.py</span><br></pre></td></tr></table></figure>

<h3 id="5-1-2-æ–¹å¼äºŒï¼šé€šè¿‡Pycharmåˆ›å»º"><a href="#5-1-2-æ–¹å¼äºŒï¼šé€šè¿‡Pycharmåˆ›å»º" class="headerlink" title="5.1.2 æ–¹å¼äºŒï¼šé€šè¿‡Pycharmåˆ›å»º"></a>5.1.2 æ–¹å¼äºŒï¼šé€šè¿‡Pycharmåˆ›å»º</h3><p>1ã€åˆ›å»ºDjangoé¡¹ç›®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> pycharmç•Œé¢æ“ä½œ</span></span><br><span class="line">File -- New Project -- Django</span><br></pre></td></tr></table></figure>

<p>2ã€å¯åŠ¨é¡¹ç›®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ–¹å¼ä¸€</span></span><br><span class="line">pycharmç»ˆç«¯ï¼Œä½¿ç”¨å‘½ä»¤è¡Œå¯åŠ¨</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ–¹å¼äºŒ</span></span><br><span class="line">ç‚¹å‡»Run -- Run(ç»¿è‰²å°ç®­å¤´)å³å¯</span><br></pre></td></tr></table></figure>

<p>3ã€åˆ›å»ºåº”ç”¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ–¹å¼ä¸€ï¼ˆå»ºè®®ï¼Œç»ƒä¹ è®°å¿†å‘½ä»¤ï¼‰</span></span><br><span class="line">pycharmæä¾›çš„ç»ˆç«¯ç›´æ¥è¾“å…¥å®Œæ•´å‘½ä»¤</span><br><span class="line"><span class="meta">$</span><span class="bash"> python manage.py startapp app01</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ–¹å¼äºŒï¼ˆä¸å»ºè®®ã€‚Pycharmç•Œé¢æ‰“å¼€manange.pyç»ˆç«¯çª—å£ï¼‰</span></span><br><span class="line">tools -- run manage.py task</span><br><span class="line"><span class="meta">#</span><span class="bash"> ä½¿ç”¨èµ·æ¥æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">manage.py@mysite &gt; startapp app01</span><br><span class="line">C:\Users\fr724\Desktop\python-learning\01-è€ç”·å­©Python29æœŸå­¦ä¹ \03-Pythonè¿›é˜¶ä¹‹å‰ç«¯Webæ–¹å‘\mysite\Scripts\python.exe &quot;D:\software\PyCharm 2021.3.1\plugins\python\helpers\pycharm\django_manage.py&quot; startapp app01 C:/Users/fr724/Desktop/python-learning/01-è€ç”·å­©Python29æœŸå­¦ä¹ /02-Pythoné«˜çº§é˜¶æ®µ/mysite</span><br><span class="line">Tracking file by folder pattern:  migrations</span><br><span class="line"></span><br><span class="line">Following files were affected </span><br><span class="line"> C:\Users\fr724\Desktop\python-learning\01-è€ç”·å­©Python29æœŸå­¦ä¹ \02-Pythoné«˜çº§é˜¶æ®µ\mysite\app01\migrations\__init__.py</span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>

<p>4ã€ä¿®æ”¹ç«¯å£å·ä»¥åŠåˆ›å»ºserverï¼ˆPycharmæ“ä½œçš„ä¼˜åŠ¿ï¼Œè¿™ç‚¹æ¯”å‘½ä»¤è¡Œæ–¹é¢ï¼‰</p>
<p>ç•Œé¢æ“ä½œ</p>
<p><img src="/../../../img/image-20220902144040797.png" alt="image-20220902144040797"></p>
<p>é‡Œé¢å¯ä»¥ä¿®æ”¹</p>
<p><img src="/../../../img/image-20220902144103426.png" alt="image-20220902144103426"></p>
<h3 id="5-1-3-å‘½ä»¤è¡Œä¸pycharmåˆ›å»ºé¡¹ç›®çš„åŒºåˆ«"><a href="#5-1-3-å‘½ä»¤è¡Œä¸pycharmåˆ›å»ºé¡¹ç›®çš„åŒºåˆ«" class="headerlink" title="5.1.3 å‘½ä»¤è¡Œä¸pycharmåˆ›å»ºé¡¹ç›®çš„åŒºåˆ«"></a>5.1.3 å‘½ä»¤è¡Œä¸pycharmåˆ›å»ºé¡¹ç›®çš„åŒºåˆ«</h3><p>å‘½ä»¤è¡Œåˆ›å»º:</p>
<p>â€‹	ä¸ä¼šè‡ªåŠ¨æœ‰templateæ–‡ä»¶å¤¹,éœ€è¦ä½ è‡ªå·±æ‰‹åŠ¨åˆ›å»º</p>
<p>pycharmåˆ›å»ºï¼š</p>
<p>â€‹	ä¼šè‡ªåŠ¨å¸®ä½ åˆ›å»ºtemplateæ–‡ä»¶å¤¹ä¸”è¿˜ä¼šè‡ªåŠ¨åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®å¯¹åº”çš„è·¯å¾„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># pycharmåˆ›å»º</span></span><br><span class="line">TEMPLATES = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&#x27;BACKEND&#x27;</span>: <span class="string">&#x27;django.template.backends.django.DjangoTemplates&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;DIRS&#x27;</span>: [os.path.join(BASE_DIR, <span class="string">&#x27;templates&#x27;</span>)]</span><br><span class="line">        ....</span><br><span class="line">]</span><br><span class="line"><span class="comment"># å‘½ä»¤è¡Œåˆ›å»º</span></span><br><span class="line">TEMPLATES = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&#x27;BACKEND&#x27;</span>: <span class="string">&#x27;django.template.backends.django.DjangoTemplates&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;DIRS&#x27;</span>: [],</span><br><span class="line">        ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¹Ÿå°±æ„å‘³ç€ä½ åœ¨ç”¨å‘½ä»¤åˆ›å»ºdjangoé¡¹ç›®çš„æ—¶å€™ä¸å•å•éœ€è¦åˆ›å»ºtemplatesæ–‡ä»¶å¤¹è¿˜éœ€è¦å»</p>
<p>é…ç½®æ–‡ä»¶ä¸­é…ç½®è·¯å¾„</p>
<p>â€˜DIRSâ€™: [os.path.join(BASE_DIR, â€˜templatesâ€™)]</p>
</blockquote>
<h2 id="5-2-åº”ç”¨çš„é…ç½®å’Œä½¿ç”¨"><a href="#5-2-åº”ç”¨çš„é…ç½®å’Œä½¿ç”¨" class="headerlink" title="5.2 åº”ç”¨çš„é…ç½®å’Œä½¿ç”¨"></a>5.2 åº”ç”¨çš„é…ç½®å’Œä½¿ç”¨</h2><h3 id="5-2-1-ä»€ä¹ˆæ˜¯åº”ç”¨ï¼ˆAPPï¼‰"><a href="#5-2-1-ä»€ä¹ˆæ˜¯åº”ç”¨ï¼ˆAPPï¼‰" class="headerlink" title="5.2.1 ä»€ä¹ˆæ˜¯åº”ç”¨ï¼ˆAPPï¼‰"></a>5.2.1 ä»€ä¹ˆæ˜¯åº”ç”¨ï¼ˆAPPï¼‰</h3><p>APPçš„ä»‹ç»ï¼š</p>
<ul>
<li><p>djangoæ˜¯ä¸€æ¬¾ä¸“é—¨ç”¨æ¥å¼€å‘appçš„webæ¡†æ¶</p>
</li>
<li><p>djangoæ¡†æ¶å°±ç±»ä¼¼äºæ˜¯ä¸€æ‰€å¤§å­¦(ç©ºå£³å­)</p>
</li>
<li><p>appå°±ç±»ä¼¼äºå¤§å­¦é‡Œé¢å„ä¸ªå­¦é™¢(å…·ä½“åŠŸèƒ½çš„app)</p>
</li>
<li><p>ä¸€ä¸ªappå°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—</p>
</li>
</ul>
<p>appå†…çš„æ–‡ä»¶ä»‹ç»ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">app01æ–‡ä»¶å¤¹</span><br><span class="line">    ---admin.py			djangoåå°ç®¡ç†</span><br><span class="line">    ---apps.py			æ³¨å†Œä½¿ç”¨</span><br><span class="line">    ---migrationsæ–‡ä»¶å¤¹		æ•°æ®åº“è¿ç§»è®°å½•</span><br><span class="line">    ---models.py		æ•°æ®åº“ç›¸å…³çš„ æ¨¡å‹ç±»(orm)</span><br><span class="line">    ---tests.py			æµ‹è¯•æ–‡ä»¶</span><br><span class="line">    ---views.py			è§†å›¾å‡½æ•°(è§†å›¾å±‚)</span><br></pre></td></tr></table></figure>

<h3 id="5-2-2-å¦‚ä½•ä½¿ç”¨åº”ç”¨ï¼Ÿ"><a href="#5-2-2-å¦‚ä½•ä½¿ç”¨åº”ç”¨ï¼Ÿ" class="headerlink" title="5.2.2 å¦‚ä½•ä½¿ç”¨åº”ç”¨ï¼Ÿ"></a>5.2.2 å¦‚ä½•ä½¿ç”¨åº”ç”¨ï¼Ÿ</h3><p>åœ¨å¼€å§‹å‰ï¼Œå…ˆæ¢³ç†ä¸‹æ–‡ä»¶å¤¹è·¯å¾„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">$ ls mysite/</span><br><span class="line">app01/  db.sqlite3  manage.py*  mysite/  templates/</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹é¡¹ç›®æ–‡ä»¶</span></span><br><span class="line">$ ls mysite/mysite/</span><br><span class="line">__init__.py  __pycache__/  asgi.py  settings.py  urls.py  wsgi.py</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹appæ–‡ä»¶</span></span><br><span class="line">$ ls mysite/app01/</span><br><span class="line">__init__.py  __pycache__/  admin.py  apps.py  migrations/  models.py  tests.py  views.py</span><br></pre></td></tr></table></figure>

<h4 id="1ã€æ³¨å†Œåº”ç”¨"><a href="#1ã€æ³¨å†Œåº”ç”¨" class="headerlink" title="1ã€æ³¨å†Œåº”ç”¨"></a>1ã€æ³¨å†Œåº”ç”¨</h4><p>ç¼–è¾‘<code>mysite/mysite/settings.py</code>æ–‡ä»¶ï¼Œæ·»åŠ <code>app01</code>åº”ç”¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">***********************åˆ›å»ºçš„åº”ç”¨ä¸€å®šè¦å»é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ**********************</span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&#x27;django.contrib.admin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.contenttypes&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.staticfiles&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;app01.apps.App01Config&#x27;</span>,  <span class="comment"># å…¨å†™</span></span><br><span class="line">  	<span class="string">&#x27;app01&#x27;</span>,			 <span class="comment"># ç®€å†™</span></span><br><span class="line">]</span><br><span class="line"><span class="comment"># åˆ›å»ºå‡ºæ¥çš„çš„åº”ç”¨ç¬¬ä¸€æ­¥å…ˆå»é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ å…¶ä»–çš„å…ˆä¸è¦ç»™æˆ‘å¹²</span></span><br><span class="line">ps:ä½ åœ¨ç”¨pycharmåˆ›å»ºé¡¹ç›®çš„æ—¶å€™ pycharmå¯ä»¥å¸®ä½ åˆ›å»ºä¸€ä¸ªappå¹¶ä¸”è‡ªåŠ¨æ³¨å†Œ</span><br><span class="line">***********************************************************************</span><br></pre></td></tr></table></figure>

<h4 id="2ã€æ·»åŠ urlè·¯ç”±"><a href="#2ã€æ·»åŠ urlè·¯ç”±" class="headerlink" title="2ã€æ·»åŠ urlè·¯ç”±"></a>2ã€æ·»åŠ urlè·¯ç”±</h4><p>ç¼–è¾‘<code>mysite/mysite/urls.py</code>æ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥app01çš„views</span></span><br><span class="line"><span class="keyword">from</span> app01 <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    <span class="comment"># å†™æˆ‘ä»¬è‡ªå·±çš„è·¯ç”±ä¸è§†å›¾å…³ç³»</span></span><br><span class="line">    path(<span class="string">&#x27;index/&#x27;</span>, views.index),</span><br><span class="line">    path(<span class="string">&#x27;home/&#x27;</span>, views.home),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="3ã€æ·»åŠ views"><a href="#3ã€æ·»åŠ views" class="headerlink" title="3ã€æ·»åŠ views"></a>3ã€æ·»åŠ views</h4><p>ç¼–è¾‘<code>mysite/mysite/app01/views.py</code>æ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, HttpResponse, redirect</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    :param request: è¯·æ±‚ç›¸å…³çš„æ‰€æœ‰æ•°æ®å¯¹è±¡ æ¯”ä½ ä¹‹å‰çš„envæ›´åŠ ç‰›é€¼</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;å“å‘€ï¼ è¢«ä½ å‘ç°äº†&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">home</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;æ¬¢è¿å›å®¶ï¼&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="4ã€è®¿é—®ç½‘ç«™"><a href="#4ã€è®¿é—®ç½‘ç«™" class="headerlink" title="4ã€è®¿é—®ç½‘ç«™"></a>4ã€è®¿é—®ç½‘ç«™</h4><p>è®¿é—®<a href="http://127.0.0.1:8080/">http://127.0.0.1:8080</a></p>
<p><img src="/../../../img/image-20220902153251103.png" alt="image-20220902153251103"></p>
<p>è®¿é—®<a href="http://127.0.0.1:8080/index">http://127.0.0.1:8080/index</a></p>
<p><img src="/../../../img/image-20220902153315217.png" alt="image-20220902153315217"></p>
<p>è®¿é—®<a href="http://127.0.0.1:8080/home">http://127.0.0.1:8080/home</a></p>
<p><img src="/../../../img/image-20220902153327321.png" alt="image-20220902153327321"></p>
<h2 id="5-5-djangoå°ç™½å¿…ä¼šä¸‰æ¿æ–§"><a href="#5-5-djangoå°ç™½å¿…ä¼šä¸‰æ¿æ–§" class="headerlink" title="5.5 djangoå°ç™½å¿…ä¼šä¸‰æ¿æ–§"></a>5.5 djangoå°ç™½å¿…ä¼šä¸‰æ¿æ–§</h2><p>åœ¨ç¼–è¾‘<code>app01/views.py</code>æ–‡ä»¶æ—¶ï¼Œæœ‰ä¸‰ç§æ–¹å¼å¯ä»¥è¿”å›é¡µé¢å†…å®¹ï¼Œç§°ä¸ºä¸‰æ¿æ–§ï¼š</p>
<p>ä½¿ç”¨å‰éœ€è¦å¯¼å…¥ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render,HttpResponse,redirect</span><br></pre></td></tr></table></figure>

<h3 id="1ã€HttpResponse"><a href="#1ã€HttpResponse" class="headerlink" title="1ã€HttpResponse"></a>1ã€HttpResponse</h3><p>ä½œç”¨ï¼šè¿”å›å­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®</p>
<p>ä½¿ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> HttpResponse(<span class="string">&quot;æ¬¢è¿å›å®¶ï¼&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="2ã€render"><a href="#2ã€render" class="headerlink" title="2ã€render"></a>2ã€render</h3><p>ä½œç”¨ï¼šè¿”å›htmlæ–‡ä»¶</p>
<p>ä½¿ç”¨ï¼š</p>
<p>åˆ›å»º<code>Template/test.html</code>æ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>å“¥åªæ˜¯ä¸ªä¼ è¯´<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿”å›htmlé¡µé¢</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render, HttpResponse, redirect</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    :param request: è¯·æ±‚ç›¸å…³çš„æ‰€æœ‰æ•°æ®å¯¹è±¡ æ¯”ä½ ä¹‹å‰çš„envæ›´åŠ ç‰›é€¼</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;test.html&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">home</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;æ¬¢è¿å›å®¶ï¼&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3ã€redirect"><a href="#3ã€redirect" class="headerlink" title="3ã€redirect"></a>3ã€redirect</h3><p>ä½œç”¨ï¼šé‡å®šå‘é¡µé¢</p>
<p>ä½¿ç”¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> redirect(<span class="string">&#x27;https://www.mzitu.com/&#x27;</span>)</span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line"><span class="keyword">return</span> redirect(<span class="string">&#x27;/home/&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h1 id="6-ä½œä¸š"><a href="#6-ä½œä¸š" class="headerlink" title="6 ä½œä¸š"></a>6 ä½œä¸š</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1.æ•´ç†webæ¡†æ¶æ¨å¯¼æ€è·¯</span></span><br><span class="line"><span class="string">2.å®‰è£…djangoå¹¶æ­£å¸¸å¯åŠ¨è®¿é—®ï¼Œæµ‹è¯•ä¸‰æ¿æ–§</span></span><br><span class="line"><span class="string">3.æ•´ç†ä»Šæ—¥æ—¥è€ƒé¢˜ï¼Œdjangoå†…å®¹</span></span><br><span class="line"><span class="string">é€‰åšé¢˜</span></span><br><span class="line"><span class="string">1.ç»“åˆå‰ç«¯ï¼Œdjangoï¼ŒMySQLï¼Œpymysqlæ¨¡å—å®ç°æ•°æ®åº“æ•°æ®åŠ¨æ€å±•ç¤ºåˆ°å‰ç«¯</span></span><br><span class="line"><span class="string">2.å°è¯•ç€æ‘¸ç´¢djangoæ¨¡ç‰ˆè¯­æ³•</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Python</category>
        <category>å‰ç«¯åŸºç¡€</category>
      </categories>
  </entry>
  <entry>
    <title>02-ç¼–ç¨‹è¯­è¨€ä¸Pythonä»‹ç»</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/02_%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E4%B8%8EPython%E4%BB%8B%E7%BB%8D/</url>
    <content><![CDATA[<p>â€œåŸºäºä¸Šä¸€ç« æ‰€å­¦ï¼Œæœ‰äº†è®¡ç®—æœºç¡¬ä»¶ï¼Œå†åœ¨ç¡¬ä»¶ä¹‹ä¸Šå®‰è£…å¥½æ“ä½œç³»ç»Ÿï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªåº”ç”¨ç¨‹â€˜åºçš„è¿è¡Œå¹³å°ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥çš„ä»»åŠ¡å°±æ˜¯å­¦ä¹ å¦‚ä½•ä½¿ç”¨æŸæ¬¾ç¼–ç¨‹è¯­è¨€æ¥å¼€å‘åº”ç”¨ç¨‹åºã€‚æœ¬ç« çš„ä¸»é¢˜æ˜¯å…ˆå¸¦å¤§å®¶äº†è§£ä¸‹ç¼–ç¨‹è¯­è¨€ï¼Œç„¶åé‡ç‚¹ä»‹ç»pythonè¿™é—¨ç¼–ç¨‹è¯­è¨€â€</p>
<h2 id="1-ç¼–ç¨‹è¯­è¨€åˆ†ç±»ï¼š"><a href="#1-ç¼–ç¨‹è¯­è¨€åˆ†ç±»ï¼š" class="headerlink" title="1 ç¼–ç¨‹è¯­è¨€åˆ†ç±»ï¼š"></a>1 ç¼–ç¨‹è¯­è¨€åˆ†ç±»ï¼š</h2><h2 id="1-1-æœºå™¨è¯­è¨€"><a href="#1-1-æœºå™¨è¯­è¨€" class="headerlink" title="1.1 æœºå™¨è¯­è¨€"></a>1.1 æœºå™¨è¯­è¨€</h2><h3 id="1-1-1-æœºå™¨è¯­è¨€ä»‹ç»"><a href="#1-1-1-æœºå™¨è¯­è¨€ä»‹ç»" class="headerlink" title="1.1.1 æœºå™¨è¯­è¨€ä»‹ç»"></a>1.1.1 æœºå™¨è¯­è¨€ä»‹ç»</h3><p><code>æœºå™¨è¯­è¨€</code>æ˜¯ç«™åœ¨è®¡ç®—æœº(å¥´éš¶)çš„è§’åº¦ï¼Œè¯´è®¡ç®—æœº<code>èƒ½å¬æ‡‚/ç†è§£</code>çš„è¯­è¨€ï¼Œè€Œè®¡ç®—æœºèƒ½ç›´æ¥ç†è§£çš„å°±æ˜¯äºŒè¿›åˆ¶æŒ‡ä»¤ï¼Œæ‰€ä»¥æœºå™¨è¯­è¨€å°±æ˜¯ç›´æ¥ç”¨<code>äºŒè¿›åˆ¶ç¼–ç¨‹</code>ï¼Œè¿™æ„å‘³ç€æœºå™¨è¯­è¨€æ˜¯<code>ç›´æ¥æ“ä½œç¡¬ä»¶</code>çš„ï¼Œå› æ­¤æœºå™¨è¯­è¨€å±äº<code>ä½çº§è¯­è¨€</code></p>
<blockquote>
<p>æ­¤å¤„çš„ä½çº§æŒ‡çš„æ˜¯åº•å±‚ã€è´´è¿‘è®¡ç®—æœºç¡¬ä»¶ï¼ˆè´´è¿‘ä»£æŒ‡éœ€è¦è¯¦ç»†äº†è§£è®¡ç®—æœºç¡¬ä»¶ç»†èŠ‚ã€ç›´æ¥æ§åˆ¶ç¡¬ä»¶ï¼‰</p>
</blockquote>
<ul>
<li><p>ä»€ä¹ˆæ˜¯æœºå™¨è¯­è¨€ï¼Ÿ</p>
<p>ç”¨äºŒè¿›åˆ¶ä»£ç 0å’Œ1æè¿°çš„æŒ‡ä»¤ç§°ä¸ºæœºå™¨æŒ‡ä»¤ï¼Œç”±äºè®¡ç®—æœºå†…éƒ¨æ˜¯åŸºäºäºŒè¿›åˆ¶æŒ‡ä»¤å·¥ä½œçš„ï¼Œæ‰€ä»¥æœºå™¨è¯­è¨€æ˜¯ç›´æ¥æ§åˆ¶è®¡ç®—æœºç¡¬ä»¶ã€‚</p>
</li>
<li><p>æœºå™¨è¯­è¨€çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ç”¨æœºå™¨è¯­è¨€ç¼–å†™ç¨‹åºï¼Œç¼–ç¨‹äººå‘˜è¦é¦–å…ˆç†Ÿè®°æ‰€ç”¨è®¡ç®—æœºçš„å…¨éƒ¨æŒ‡ä»¤ä»£ç ä»¥åŠä»£ç çš„å«ä¹‰ï¼Œç„¶ååœ¨ç¼–å†™ç¨‹åºæ—¶ï¼Œç¨‹åºå‘˜å¾—è‡ªå·±å¤„ç†æ¯æ¡æŒ‡ä»¤å’Œæ¯ä¸€æ•°æ®çš„å­˜å‚¨åˆ†é…å’Œè¾“å…¥è¾“å‡ºï¼Œè¿˜å¾—è®°ä½ç¼–ç¨‹è¿‡ç¨‹ä¸­æ¯æ­¥æ‰€ä½¿ç”¨çš„å·¥ä½œå•å…ƒå¤„åœ¨ä½•ç§çŠ¶æ€ã€‚è¿™æ˜¯ä¸€ä»¶ååˆ†ç¹ççš„å·¥ä½œã€‚ç¼–å†™ç¨‹åºèŠ±è´¹çš„æ—¶é—´å¾€å¾€æ˜¯å®é™…è¿è¡Œæ—¶é—´çš„å‡ åå€æˆ–å‡ ç™¾å€ã€‚è€Œä¸”ï¼Œç¼–å‡ºçš„ç¨‹åºå…¨æ˜¯äº›0å’Œ1çš„æŒ‡ä»¤ä»£ç ï¼Œç›´è§‚æ€§å·®ï¼Œä¸ä¾¿é˜…è¯»å’Œä¹¦å†™ï¼Œè¿˜å®¹æ˜“å‡ºé”™ï¼Œä¸”ä¾èµ–äºå…·ä½“çš„è®¡ç®—æœºç¡¬ä»¶å‹å·ï¼Œå±€é™æ€§å¾ˆå¤§ã€‚é™¤äº†è®¡ç®—æœºç”Ÿäº§å‚å®¶çš„ä¸“ä¸šäººå‘˜å¤–ï¼Œç»å¤§å¤šæ•°çš„ç¨‹åºå‘˜å·²ç»ä¸å†å»å­¦ä¹ æœºå™¨è¯­è¨€äº†ã€‚</p>
</li>
<li><p>æœºå™¨è¯­è¨€çš„åˆ†ç±»ï¼Ÿ</p>
<p>æœºå™¨è¯­è¨€æ˜¯è¢«å¾®å¤„ç†å™¨ç†è§£å’Œä½¿ç”¨çš„ï¼Œå­˜åœ¨æœ‰å¤šè‡³100000ç§æœºå™¨è¯­è¨€çš„æŒ‡ä»¤ï¼Œä¸‹è¿°æ˜¯ä¸€äº›ç®€å•ç¤ºä¾‹</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æŒ‡ä»¤éƒ¨ä»½çš„ç¤ºä¾‹</span></span><br><span class="line"><span class="number">0000</span> ä»£è¡¨ åŠ è½½ï¼ˆLOADï¼‰</span><br><span class="line">0001 ä»£è¡¨ å­˜å‚¨ï¼ˆSTOREï¼‰</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">#æš‚å­˜å™¨éƒ¨ä»½çš„ç¤ºä¾‹</span></span><br><span class="line"><span class="number">0000</span> ä»£è¡¨æš‚å­˜å™¨ A</span><br><span class="line">0001 ä»£è¡¨æš‚å­˜å™¨ B</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">#å­˜å‚¨å™¨éƒ¨ä»½çš„ç¤ºä¾‹</span></span><br><span class="line"><span class="number">000000000000</span> ä»£è¡¨åœ°å€ä¸º <span class="number">0</span> çš„å­˜å‚¨å™¨</span><br><span class="line">000000000001 ä»£è¡¨åœ°å€ä¸º <span class="number">1</span> çš„å­˜å‚¨å™¨</span><br><span class="line">000000010000 ä»£è¡¨åœ°å€ä¸º <span class="number">16</span> çš„å­˜å‚¨å™¨</span><br><span class="line"><span class="number">100000000000</span> ä»£è¡¨åœ°å€ä¸º <span class="number">2</span>^<span class="number">11</span> çš„å­˜å‚¨å™¨</span><br><span class="line"></span><br><span class="line"><span class="comment">#é›†æˆç¤ºä¾‹</span></span><br><span class="line"><span class="number">0000</span>,<span class="number">0000</span>,000000010000 ä»£è¡¨ LOAD A, <span class="number">16</span></span><br><span class="line"><span class="number">0000</span>,0001,000000000001 ä»£è¡¨ LOAD B, <span class="number">1</span></span><br><span class="line">0001,0001,000000010000 ä»£è¡¨ STORE B, <span class="number">16</span></span><br><span class="line">0001,0001,000000000001 ä»£è¡¨ STORE B, <span class="number">1</span>[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>



<h3 id="1-1-2-æœºå™¨è¯­è¨€æ€»ç»“"><a href="#1-1-2-æœºå™¨è¯­è¨€æ€»ç»“" class="headerlink" title="1.1.2 æœºå™¨è¯­è¨€æ€»ç»“"></a>1.1.2 æœºå™¨è¯­è¨€æ€»ç»“</h3><ol>
<li><p>æ‰§è¡Œæ•ˆç‡æœ€é«˜</p>
<p>ç¼–å†™çš„ç¨‹åºå¯ä»¥è¢«è®¡ç®—æœºæ— éšœç¢ç†è§£ã€ç›´æ¥è¿è¡Œï¼Œæ‰§è¡Œæ•ˆç‡é«˜ ã€‚</p>
</li>
<li><p>å¼€å‘æ•ˆç‡æœ€ä½</p>
<p>å¤æ‚ï¼Œå¼€å‘æ•ˆç‡ä½</p>
</li>
<li><p>è·¨å¹³å°æ€§å·®</p>
<p>è´´è¿‘\ä¾èµ–å…·ä½“çš„ç¡¬ä»¶ï¼Œè·¨å¹³å°æ€§å·®</p>
</li>
</ol>
<h2 id="2-2-æ±‡ç¼–è¯­è¨€"><a href="#2-2-æ±‡ç¼–è¯­è¨€" class="headerlink" title="2.2 æ±‡ç¼–è¯­è¨€"></a>2.2 æ±‡ç¼–è¯­è¨€</h2><h3 id="2-2-1-æ±‡ç¼–è¯­è¨€ä»‹ç»"><a href="#2-2-1-æ±‡ç¼–è¯­è¨€ä»‹ç»" class="headerlink" title="2.2.1 æ±‡ç¼–è¯­è¨€ä»‹ç»"></a>2.2.1 æ±‡ç¼–è¯­è¨€ä»‹ç»</h3><p>æ±‡ç¼–è¯­è¨€ä»…ä»…æ˜¯ç”¨ä¸€ä¸ªè‹±æ–‡æ ‡ç­¾ä»£è¡¨ä¸€ç»„äºŒè¿›åˆ¶æŒ‡ä»¤ï¼Œæ¯«æ— ç–‘é—®ï¼Œæ¯”èµ·æœºå™¨è¯­è¨€ï¼Œæ±‡ç¼–è¯­è¨€æ˜¯ä¸€ç§è¿›æ­¥ï¼Œä½†æ±‡ç¼–è¯­è¨€çš„æœ¬è´¨ä»ç„¶æ˜¯ç›´æ¥æ“ä½œç¡¬ä»¶ï¼Œå› æ­¤æ±‡ç¼–è¯­è¨€ä»æ˜¯æ¯”è¾ƒä½çº§&#x2F;åº•å±‚çš„è¯­è¨€ã€è´´è¿‘è®¡ç®—æœºç¡¬ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ±‡ç¼–è¯­è¨€</span></span><br><span class="line">æ±‡ç¼–è¯­è¨€çš„å®è´¨å’Œæœºå™¨è¯­è¨€æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯ç›´æ¥å¯¹ç¡¬ä»¶æ“ä½œï¼Œåªä¸è¿‡æŒ‡ä»¤é‡‡ç”¨äº†è‹±æ–‡ç¼©å†™çš„æ ‡è¯†ç¬¦ï¼Œæ›´å®¹æ˜“è¯†åˆ«å’Œè®°å¿†ã€‚å®ƒåŒæ ·éœ€è¦ç¼–ç¨‹è€…å°†æ¯ä¸€æ­¥å…·ä½“çš„æ“ä½œç”¨å‘½ä»¤çš„å½¢å¼å†™å‡ºæ¥ã€‚æ±‡ç¼–ç¨‹åºçš„æ¯ä¸€å¥æŒ‡ä»¤åªèƒ½å¯¹åº”å®é™…æ“ä½œè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªå¾ˆç»†å¾®çš„åŠ¨ä½œã€‚ä¾‹å¦‚ç§»åŠ¨ã€è‡ªå¢ï¼Œå› æ­¤æ±‡ç¼–æºç¨‹åºä¸€èˆ¬æ¯”è¾ƒå†—é•¿ã€å¤æ‚ã€å®¹æ˜“å‡ºé”™ï¼Œè€Œä¸”ä½¿ç”¨æ±‡ç¼–è¯­è¨€ç¼–ç¨‹éœ€è¦æœ‰æ›´å¤šçš„è®¡ç®—æœºä¸“ä¸šçŸ¥è¯†ï¼Œä½†æ±‡ç¼–è¯­è¨€çš„ä¼˜ç‚¹ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œç”¨æ±‡ç¼–è¯­è¨€æ‰€èƒ½å®Œæˆçš„æ“ä½œä¸æ˜¯ä¸€èˆ¬é«˜çº§è¯­è¨€æ‰€èƒ½å¤Ÿå®ç°çš„ï¼Œè€Œä¸”æºç¨‹åºç»æ±‡ç¼–ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸ä»…æ¯”è¾ƒå°ï¼Œè€Œä¸”æ‰§è¡Œé€Ÿåº¦å¾ˆå¿«ã€‚</span><br><span class="line"></span><br><span class="line">æ±‡ç¼–çš„hello worldï¼Œæ‰“å°ä¸€å¥hello world, éœ€è¦å†™åå¤šè¡Œï¼Œå¦‚ä¸‹</span><br><span class="line"></span><br><span class="line">; hello.asm </span><br><span class="line">section .data            ; æ•°æ®æ®µå£°æ˜</span><br><span class="line">        msg db <span class="string">&quot;Hello, world!&quot;</span>, <span class="number">0xA</span>     ; è¦è¾“å‡ºçš„å­—ç¬¦ä¸²</span><br><span class="line">        <span class="built_in">len</span> equ $ - msg                 ; å­—ä¸²é•¿åº¦</span><br><span class="line">        section .text            ; ä»£ç æ®µå£°æ˜</span><br><span class="line">        <span class="keyword">global</span> _start            ; æŒ‡å®šå…¥å£å‡½æ•°</span><br><span class="line">        _start:                  ; åœ¨å±å¹•ä¸Šæ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²</span><br><span class="line">        mov edx, <span class="built_in">len</span>     ; å‚æ•°ä¸‰ï¼šå­—ç¬¦ä¸²é•¿åº¦</span><br><span class="line">        mov ecx, msg     ; å‚æ•°äºŒï¼šè¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²</span><br><span class="line">        mov ebx, <span class="number">1</span>       ; å‚æ•°ä¸€ï¼šæ–‡ä»¶æè¿°ç¬¦(stdout) </span><br><span class="line">        mov eax, <span class="number">4</span>       ; ç³»ç»Ÿè°ƒç”¨å·(sys_write) </span><br><span class="line">        <span class="built_in">int</span> <span class="number">0x80</span>         ; è°ƒç”¨å†…æ ¸åŠŸèƒ½</span><br><span class="line">                         ; é€€å‡ºç¨‹åº</span><br><span class="line">        mov ebx, <span class="number">0</span>       ; å‚æ•°ä¸€ï¼šé€€å‡ºä»£ç </span><br><span class="line">        mov eax, <span class="number">1</span>       ; ç³»ç»Ÿè°ƒç”¨å·(sys_exit) </span><br><span class="line">        <span class="built_in">int</span> <span class="number">0x80</span>         ; è°ƒç”¨å†…æ ¸åŠŸèƒ½</span><br></pre></td></tr></table></figure>

<h3 id="2-2-2-æ€»ç»“æ±‡ç¼–è¯­è¨€"><a href="#2-2-2-æ€»ç»“æ±‡ç¼–è¯­è¨€" class="headerlink" title="2.2.2 æ€»ç»“æ±‡ç¼–è¯­è¨€"></a>2.2.2 æ€»ç»“æ±‡ç¼–è¯­è¨€</h3><ol>
<li><p>æ‰§è¡Œæ•ˆç‡é«˜</p>
<p>ç›¸å¯¹äºæœºå™¨è¯­è¨€ï¼Œä½¿ç”¨è‹±æ–‡æ ‡ç­¾ç¼–å†™ç¨‹åºç›¸å¯¹ç®€å•ï¼Œæ‰§è¡Œæ•ˆç‡é«˜ï¼Œä½†è¾ƒä¹‹æœºå™¨è¯­è¨€ç¨ä½ï¼Œ</p>
</li>
<li><p>å¼€å‘æ•ˆç‡ä½ï¼š</p>
<p>ä»ç„¶æ˜¯ç›´æ¥æ“ä½œç¡¬ä»¶ï¼Œæ¯”èµ·æœºå™¨è¯­è¨€æ¥è¯´ï¼Œå¤æ‚åº¦ç¨ä½ï¼Œä½†ä¾æ—§å±…é«˜ä¸ä¸‹ï¼Œæ‰€ä»¥å¼€å‘æ•ˆç‡ä¾æ—§è¾ƒä½</p>
</li>
<li><p>è·¨å¹³å°æ€§å·®</p>
<p>åŒæ ·ä¾èµ–å…·ä½“çš„ç¡¬ä»¶ï¼Œè·¨å¹³å°æ€§å·®</p>
</li>
</ol>
<h2 id="2-3-é«˜çº§è¯­è¨€"><a href="#2-3-é«˜çº§è¯­è¨€" class="headerlink" title="2.3 é«˜çº§è¯­è¨€"></a>2.3 é«˜çº§è¯­è¨€</h2><p>é«˜çº§è¯­è¨€æ˜¯ç«™åœ¨äºº(å¥´éš¶ä¸»)çš„è§’åº¦ï¼Œè¯´äººè¯ï¼Œå³ç”¨äººç±»çš„å­—ç¬¦å»ç¼–å†™ç¨‹åºï¼Œè€Œäººç±»çš„å­—ç¬¦æ˜¯åœ¨å‘æ“ä½œç³»ç»Ÿå‘é€æŒ‡ä»¤ï¼Œè€Œéç›´æ¥æ“ä½œç¡¬ä»¶ï¼Œæ‰€ä»¥é«˜çº§è¯­è¨€æ˜¯ä¸æ“ä½œç³»ç»Ÿæ‰“äº¤é“çš„ï¼Œæ­¤å¤„çš„é«˜çº§æŒ‡çš„æ˜¯é«˜å±‚ã€å¼€å‘è€…æ— éœ€è€ƒè™‘ç¡¬ä»¶ç»†èŠ‚ï¼Œå› è€Œå¼€å‘æ•ˆç‡å¯ä»¥å¾—åˆ°æå¤§çš„æå‡ï¼Œä½†æ­£å› ä¸ºé«˜çº§è¯­è¨€ç¦»ç¡¬ä»¶è¾ƒè¿œï¼Œæ›´è´´è¿‘äººç±»è¯­è¨€ï¼Œäººç±»å¯ä»¥ç†è§£ï¼Œè€Œè®¡ç®—æœºåˆ™éœ€è¦é€šè¿‡ç¿»è¯‘æ‰èƒ½ç†è§£ï¼Œæ‰€ä»¥æ‰§è¡Œæ•ˆç‡ä¼šä½äºä½çº§è¯­è¨€ã€‚</p>
<p>æŒ‰ç…§ç¿»è¯‘çš„æ–¹å¼çš„ä¸åŒï¼Œé«˜çº§è¯­è¨€åˆåˆ†ä¸ºä¸¤ç§ï¼š</p>
<h3 id="2-3-1-ç¼–è¯‘å‹ï¼ˆå¦‚Cè¯­è¨€ï¼‰"><a href="#2-3-1-ç¼–è¯‘å‹ï¼ˆå¦‚Cè¯­è¨€ï¼‰" class="headerlink" title="2.3.1 ç¼–è¯‘å‹ï¼ˆå¦‚Cè¯­è¨€ï¼‰:"></a>2.3.1 ç¼–è¯‘å‹ï¼ˆå¦‚Cè¯­è¨€ï¼‰:</h3><p><img src="/../../../img/image-20220715110934572.png" alt="image-20220715110934572"></p>
<p>ç±»ä¼¼è°·æ­Œç¿»è¯‘ï¼Œæ˜¯æŠŠç¨‹åºæ‰€æœ‰ä»£ç ç¼–è¯‘æˆè®¡ç®—æœºèƒ½è¯†åˆ«çš„äºŒè¿›åˆ¶æŒ‡ä»¤ï¼Œä¹‹åæ“ä½œç³»ç»Ÿä¼šæ‹¿ç€ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æŒ‡ä»¤ç›´æ¥æ“ä½œç¡¬ä»¶ï¼Œè¯¦ç»†å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1ã€æ‰§è¡Œæ•ˆç‡é«˜</span></span><br><span class="line">ç¼–è¯‘æ˜¯æŒ‡åœ¨åº”ç”¨æºç¨‹åºæ‰§è¡Œä¹‹å‰ï¼Œå°±å°†ç¨‹åºæºä»£ç â€œç¿»è¯‘â€æˆç›®æ ‡ä»£ç ï¼ˆå³æœºå™¨è¯­è¨€ï¼‰ï¼Œ</span><br><span class="line">å› æ­¤å…¶ç›®æ ‡ç¨‹åºå¯ä»¥è„±ç¦»å…¶è¯­è¨€ç¯å¢ƒç‹¬ç«‹æ‰§è¡Œï¼Œä½¿ç”¨æ¯”è¾ƒæ–¹ä¾¿ï¼Œæ‰§è¡Œæ•ˆç‡è¾ƒé«˜ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€å¼€å‘æ•ˆç‡ä½ï¼š</span></span><br><span class="line">åº”ç”¨ç¨‹åºä¸€æ—¦éœ€è¦ä¿®æ”¹ï¼Œå¿…é¡»å…ˆä¿®æ”¹æºä»£ç ï¼Œç„¶åé‡æ–°ç¼–è¯‘ã€ç”Ÿæˆæ–°çš„ç›®æ ‡æ–‡ä»¶æ‰èƒ½æ‰§è¡Œï¼Œ</span><br><span class="line">è€Œåœ¨åªæœ‰ç›®æ ‡æ–‡ä»¶è€Œæ²¡æœ‰æºä»£ç ï¼Œä¿®æ”¹ä¼šå¾ˆä¸æ–¹ä¾¿ã€‚æ‰€ä»¥å¼€å‘æ•ˆç‡ä½äºè§£é‡Šå‹</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3ã€è·¨å¹³å°æ€§å·®</span></span><br><span class="line">ç¼–è¯‘å‹ä»£ç æ˜¯é’ˆå¯¹æŸä¸€ä¸ªå¹³å°ç¿»è¯‘çš„ï¼Œå½“å‰å¹³å°ç¿»è¯‘çš„ç»“æœæ— æ³•æ‹¿åˆ°ä¸åŒçš„å¹³å°ä½¿ç”¨ï¼Œé’ˆå¯¹ä¸åŒçš„å¹³å°å¿…é¡»é‡æ–°ç¼–è¯‘ï¼Œå³è·¨å¹³å°æ€§å·®</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¶ä»–</span></span><br><span class="line">ç°åœ¨å¤§å¤šæ•°çš„ç¼–ç¨‹è¯­è¨€éƒ½æ˜¯ç¼–è¯‘å‹çš„ã€‚</span><br><span class="line">ç¼–è¯‘ç¨‹åºå°†æºç¨‹åºç¿»è¯‘æˆç›®æ ‡ç¨‹åºåä¿å­˜åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¯¥ç›®æ ‡ç¨‹åºå¯è„±ç¦»ç¼–è¯‘ç¨‹åºç›´æ¥åœ¨è®¡ç®—æœºä¸Šå¤šæ¬¡è¿è¡Œã€‚</span><br><span class="line">å¤§å¤šæ•°è½¯ä»¶äº§å“éƒ½æ˜¯ä»¥ç›®æ ‡ç¨‹åºå½¢å¼å‘è¡Œç»™ç”¨æˆ·çš„ï¼Œä¸ä»…ä¾¿äºç›´æ¥è¿è¡Œï¼ŒåŒæ—¶åˆä½¿ä»–äººéš¾äºç›—ç”¨å…¶ä¸­çš„æŠ€æœ¯ã€‚</span><br><span class="line">Cã€C++ã€Adaã€Pascaléƒ½æ˜¯ç¼–è¯‘å®ç°çš„</span><br></pre></td></tr></table></figure>

<h3 id="2-3-2-è§£é‡Šå‹ï¼ˆå¦‚pythonï¼‰"><a href="#2-3-2-è§£é‡Šå‹ï¼ˆå¦‚pythonï¼‰" class="headerlink" title="2.3.2 è§£é‡Šå‹ï¼ˆå¦‚pythonï¼‰:"></a>2.3.2 è§£é‡Šå‹ï¼ˆå¦‚pythonï¼‰:</h3><p><img src="/../../../img/image-20220715111047082.png" alt="image-20220715111047082"></p>
<p>ç±»ä¼¼åŒå£°ç¿»è¯‘ï¼Œéœ€è¦æœ‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè§£é‡Šå™¨ä¼šè¯»å–ç¨‹åºä»£ç ï¼Œä¸€è¾¹ç¿»è¯‘ä¸€è¾¹æ‰§è¡Œï¼Œè¯¦ç»†å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 1ã€æ‰§è¡Œæ•ˆç‡ä½</span><br><span class="line">è§£é‡Šå‹è¯­è¨€çš„å®ç°ä¸­ï¼Œç¿»è¯‘å™¨å¹¶ä¸äº§ç”Ÿç›®æ ‡æœºå™¨ä»£ç ï¼Œè€Œæ˜¯äº§ç”Ÿæ˜“äºæ‰§è¡Œçš„ä¸­é—´ä»£ç ã€‚</span><br><span class="line">è¿™ç§ä¸­é—´ä»£ç ä¸æœºå™¨ä»£ç æ˜¯ä¸åŒçš„ï¼Œä¸­é—´ä»£ç çš„è§£é‡Šæ˜¯ç”±è½¯ä»¶æ”¯æŒçš„ï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ç¡¬ä»¶ï¼Œ</span><br><span class="line">è½¯ä»¶è§£é‡Šå™¨é€šå¸¸ä¼šå¯¼è‡´æ‰§è¡Œæ•ˆç‡è¾ƒä½ã€‚</span><br><span class="line"></span><br><span class="line"># 2ã€å¼€å‘æ•ˆç‡é«˜</span><br><span class="line">ç”¨è§£é‡Šå‹è¯­è¨€ç¼–å†™çš„ç¨‹åºæ˜¯ç”±å¦ä¸€ä¸ªå¯ä»¥ç†è§£ä¸­é—´ä»£ç çš„è§£é‡Šç¨‹åºæ‰§è¡Œçš„ï¼Œä¸ç¼–è¯‘ç¨‹åºä¸åŒçš„æ˜¯ï¼Œ</span><br><span class="line">è§£é‡Šç¨‹åºçš„ä»»åŠ¡æ˜¯é€ä¸€å°†æºç¨‹åºçš„è¯­å¥è§£é‡Šæˆå¯æ‰§è¡Œçš„æœºå™¨æŒ‡ä»¤ï¼Œä¸éœ€è¦å°†æºç¨‹åºç¿»è¯‘æˆç›®æ ‡ä»£ç å†æ‰§è¡Œã€‚</span><br><span class="line">è§£é‡Šç¨‹åºçš„ä¼˜ç‚¹æ˜¯å½“è¯­å¥å‡ºç°è¯­æ³•é”™è¯¯æ—¶ï¼Œå¯ä»¥ç«‹å³å¼•èµ·ç¨‹åºå‘˜çš„æ³¨æ„ï¼Œè€Œç¨‹åºå‘˜åœ¨ç¨‹åºå¼€å‘æœŸé—´å°±èƒ½è¿›è¡Œæ ¡æ­£ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 3ã€è·¨å¹³å°æ€§å¼º</span><br><span class="line">ä»£ç è¿è¡Œæ˜¯ä¾èµ–äºè§£é‡Šå™¨ï¼Œä¸åŒå¹³å°æœ‰å¯¹åº”ç‰ˆæœ¬çš„è§£é‡Šå™¨ï¼Œæ‰€ä»¥è§£é‡Šå‹çš„è·¨å¹³å°æ€§å¼º</span><br><span class="line"></span><br><span class="line"># å…¶ä»–</span><br><span class="line">å¯¹äºè§£é‡Šå‹Basicè¯­è¨€ï¼Œéœ€è¦ä¸€ä¸ªä¸“é—¨çš„è§£é‡Šå™¨è§£é‡Šæ‰§è¡ŒBasicç¨‹åºï¼Œæ¯æ¡è¯­å¥åªæœ‰åœ¨æ‰§è¡Œæ—¶æ‰è¢«ç¿»è¯‘ï¼Œ</span><br><span class="line">è¿™ç§è§£é‡Šå‹è¯­è¨€æ¯æ‰§è¡Œä¸€æ¬¡å°±ç¿»è¯‘ä¸€æ¬¡ï¼Œå› è€Œæ•ˆç‡ä½ä¸‹ã€‚ä¸€èˆ¬åœ°ï¼ŒåŠ¨æ€è¯­è¨€éƒ½æ˜¯è§£é‡Šå‹çš„ï¼Œ</span><br><span class="line">ä¾‹å¦‚ï¼šTclã€Perlã€Rubyã€VBScriptã€JavaScriptç­‰</span><br></pre></td></tr></table></figure>

<p>psï¼šæ··åˆå‹è¯­è¨€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Javaæ˜¯ä¸€ç±»ç‰¹æ®Šçš„ç¼–ç¨‹è¯­è¨€ï¼ŒJavaç¨‹åºä¹Ÿéœ€è¦ç¼–è¯‘ï¼Œä½†æ˜¯å´æ²¡æœ‰ç›´æ¥ç¼–è¯‘ä¸ºæœºå™¨è¯­è¨€ï¼Œè€Œæ˜¯ç¼–è¯‘ä¸ºå­—èŠ‚ç ï¼Œ</span><br><span class="line">ç„¶ååœ¨Javaè™šæ‹Ÿæœºä¸Šä»¥è§£é‡Šæ–¹å¼æ‰§è¡Œå­—èŠ‚ç ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="2-4-æ€»ç»“"><a href="#2-4-æ€»ç»“" class="headerlink" title="2.4 æ€»ç»“"></a>2.4 æ€»ç»“</h2><p> ç»¼ä¸Šé€‰æ‹©ä¸åŒç¼–ç¨‹è¯­è¨€æ¥å¼€å‘åº”ç”¨ç¨‹åºå¯¹æ¯”</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€æ‰§è¡Œæ•ˆç‡ï¼šæœºå™¨è¯­è¨€&gt;æ±‡ç¼–è¯­è¨€&gt;é«˜çº§è¯­è¨€ï¼ˆç¼–è¯‘å‹&gt;è§£é‡Šå‹ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€å¼€å‘æ•ˆç‡ï¼šæœºå™¨è¯­è¨€&lt;æ±‡ç¼–è¯­è¨€&lt;é«˜çº§è¯­è¨€ï¼ˆç¼–è¯‘å‹&lt;è§£é‡Šå‹ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3ã€è·¨å¹³å°æ€§ï¼šè§£é‡Šå‹å…·æœ‰æå¼ºçš„è·¨å¹³å°å‹</span></span><br></pre></td></tr></table></figure>

<p> ç”±äºæˆ‘ä»¬å¼€å‘æ˜¯åº”ç”¨ç¨‹åºï¼Œè€Œåº”ç”¨ç¨‹åºå¿…é¡»è¿è¡ŒäºæŸä¸€ä¸ªå¹³å°ä¹‹ä¸Šï¼Œåº”ç”¨ç¨‹åºçš„å¿«æ…¢å—é™äºå¹³å°ï¼ˆå°±å¥½æ¯”F1èµ›è½¦ä¸å®é©¬è½¦åŒæ—¶è·‘åœ¨åŒ—äº¬äº”ç¯é«˜é€Ÿï¼Œéƒ½å—é™äºé“è·¯ç¯å¢ƒï¼Œè½¦é€Ÿæ˜¯å·®ä¸å¤šçš„ï¼‰çš„å¿«æ…¢ï¼Œå¹¶ä¸æ˜¯å•ä»è¯­è¨€å±‚é¢å°±å¯ä»¥æå‡æ•´ä½“æ‰§è¡Œæ•ˆç‡çš„ï¼Œäºæ˜¯å¼€å‘æ•ˆç‡ã€è·¨å¹³å°æ€§æ‰æ˜¯æˆ‘ä»¬éœ€è¦ä¼˜å…ˆè€ƒè™‘çš„é—®é¢˜ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬é¦–é€‰pythonçš„åŸå› </p>
<p><img src="/../../../img/image-20220715111100262.png" alt="image-20220715111100262"></p>
<h2 id="2-pythonä»‹ç»"><a href="#2-pythonä»‹ç»" class="headerlink" title="2 pythonä»‹ç»"></a>2 pythonä»‹ç»</h2><p> è°ˆåŠpythonï¼Œæ¶‰åŠä¸¤å±‚æ„æ€ï¼Œä¸€å±‚ä»£è¡¨çš„æ˜¯pythonè¿™é—¨è¯­è¨€çš„è¯­æ³•é£æ ¼ï¼Œå¦å¤–ä¸€å±‚ä»£è¡¨çš„åˆ™æ˜¯ä¸“é—¨ç”¨æ¥è§£é‡Šè¯¥è¯­æ³•é£æ ¼çš„åº”ç”¨ç¨‹åºï¼špythonè§£é‡Šå™¨ã€‚</p>
<ul>
<li><p>pythonçš„åˆ›å§‹äººä¸ºå‰å¤šÂ·èŒƒç½—è‹å§†ï¼ˆGuido van Rossumï¼‰ã€‚Pythonè¿™ä¸ªåå­—ï¼Œæ¥è‡ªGuidoæ‰€æŒšçˆ±çš„ç”µè§†å‰§Monty Pythonâ€™s Flying Circusï¼Œä»–å¸Œæœ›è¿™ä¸ªæ–°çš„å«åšPythonçš„è¯­è¨€ï¼Œèƒ½ç¬¦åˆä»–çš„ç†æƒ³ï¼šåˆ›é€ ä¸€ç§Cå’Œshellä¹‹é—´ï¼Œè¯­æ³•èƒ½å¤Ÿåƒshellä¸€æ ·ç®€æ´ï¼Œæ˜“å­¦æ˜“ç”¨ã€å¯æ‹“å±•æ€§å¼ºï¼ŒåŒæ—¶å…¼é¡¾Cçš„å¼ºå¤§åŠŸèƒ½ã€‚äºæ˜¯Guidoåœ¨1989å¹´çš„åœ£è¯èŠ‚æœŸé—´ï¼Œå¼€å§‹ç¼–å†™èƒ½å¤Ÿè§£é‡ŠPythonè¯­è¨€è¯­æ³•çš„è§£é‡Šå™¨ã€‚</p>
</li>
<li><p>Pythonå´‡å°šä¼˜ç¾ã€æ¸…æ™°ã€ç®€å•ï¼Œæ˜¯ä¸€ä¸ªä¼˜ç§€å¹¶å¹¿æ³›ä½¿ç”¨çš„è¯­è¨€ã€‚æœ€æ–°çš„TIOBEæ’è¡Œæ¦œ<a href="https://link.zhihu.com/?target=https://www.tiobe.com/tiobe-index/">https://www.tiobe.com/tiobe-index/</a>ï¼ŒPythonå·²é£™å‡è‡³ä¸–ç•Œç¬¬ä¸‰ã€‚</p>
</li>
<li><p>Pythonå¯ä»¥åº”ç”¨äºä¼—å¤šé¢†åŸŸï¼Œå¦‚ï¼šäººå·¥æ™ºèƒ½ã€æ•°æ®åˆ†æã€çˆ¬è™«ã€é‡‘èé‡åŒ–ã€äº‘è®¡ç®—ã€WEBå¼€å‘ã€è‡ªåŠ¨åŒ–è¿ç»´&#x2F;æµ‹è¯•ã€æ¸¸æˆå¼€å‘ã€ç½‘ç»œæœåŠ¡ã€å›¾åƒå¤„ç†ç­‰ä¼—å¤šé¢†åŸŸã€‚ç›®å‰ä¸šå†…å‡ ä¹æ‰€æœ‰å¤§ä¸­å‹äº’è”ç½‘ä¼ä¸šéƒ½åœ¨ä½¿ç”¨Pythonï¼Œå¦‚ï¼šYoutubeã€Dropboxã€BTã€Quoraï¼ˆä¸­å›½çŸ¥ä¹ï¼‰ã€è±†ç“£ã€çŸ¥ä¹ã€Googleã€Yahoo!ã€Facebookã€NASAã€ç™¾åº¦ã€è…¾è®¯ã€æ±½è½¦ä¹‹å®¶ã€ç¾å›¢ç­‰ã€‚</p>
</li>
</ul>
<h2 id="2-1-Pythonè§£é‡Šå™¨çš„å‘å±•å²"><a href="#2-1-Pythonè§£é‡Šå™¨çš„å‘å±•å²" class="headerlink" title="2.1 Pythonè§£é‡Šå™¨çš„å‘å±•å²"></a>2.1 Pythonè§£é‡Šå™¨çš„å‘å±•å²</h2><ul>
<li><p>1989å¹´ï¼ŒGuidoå¼€å§‹å†™Pythonè¯­è¨€çš„ç¼–è¯‘å™¨ã€‚ 1991å¹´ï¼Œç¬¬ä¸€ä¸ªPythonç¼–è¯‘å™¨è¯ç”Ÿã€‚å®ƒæ˜¯ç”¨Cè¯­è¨€å®ç°çš„ï¼Œå¹¶èƒ½å¤Ÿè°ƒç”¨Cè¯­è¨€çš„åº“æ–‡ä»¶ã€‚ä»ä¸€å‡ºç”Ÿï¼ŒPythonå·²ç»å…·æœ‰äº†ï¼šç±»ï¼Œå‡½æ•°ï¼Œå¼‚å¸¸å¤„ç†ï¼ŒåŒ…å«è¡¨å’Œè¯å…¸åœ¨å†…çš„æ ¸å¿ƒæ•°æ®ç±»å‹ï¼Œä»¥åŠæ¨¡å—ä¸ºåŸºç¡€çš„æ‹“å±•ç³»ç»Ÿã€‚</p>
</li>
<li><p>Granddaddy of Python web frameworks, Zope 1 was released in 1999</p>
</li>
<li><p>Python 1.0 - January 1994 å¢åŠ äº† lambda, map, filter and reduce.</p>
</li>
<li><p>Python 2.0 - October 16, 2000ï¼ŒåŠ å…¥äº†å†…å­˜å›æ”¶æœºåˆ¶ï¼Œæ„æˆäº†ç°åœ¨Pythonè¯­è¨€æ¡†æ¶çš„åŸºç¡€</p>
</li>
<li><p>Python 2.4 - November 30, 2004, åŒå¹´ç›®å‰æœ€æµè¡Œçš„WEBæ¡†æ¶Django è¯ç”Ÿ</p>
</li>
<li><p>Python 2.5 - September 19, 2006</p>
</li>
<li><p>Python 2.6 - October 1, 2008</p>
</li>
<li><p>Python 2.7 - July 3, 2010</p>
</li>
<li><p>In November 2014, it was announced that Python 2.7 would be supported until 2020, and reaffirmed that there would be no 2.8 release as users were expected to move to Python 3.4+ as soon as possible</p>
</li>
<li><p>Python 3.0 - December 3, 2008 (ç»†å¿ƒçš„è¯»è€…ä¼šå‘ç°ï¼Œ08å¹´æ—¶å°±æ¨å‡ºäº†3.0ï¼Œ2010å¹´åè€Œåˆæ¨å‡ºäº†2.7ï¼Ÿæ˜¯å› ä¸º3.0ä¸å‘ä¸‹å…¼å®¹2.0ï¼Œè€Œå¾ˆå¤šå…¬å¸å·²ç»åŸºäº2.0ç‰ˆæœ¬å¼€å‘å‡ºäº†å¤§é‡ç¨‹åºï¼Œå…¬å¸å·²ç„¶æŠ•å…¥äº†å¤§é‡çš„äººè´¢ç‰©åŠ›ï¼Œè¿™å°±å¯¼è‡´å¤§å®¶éƒ½æ‹’ç»å‡çº§3.0ï¼Œæ— å¥ˆå®˜æ–¹åªèƒ½æ¨å‡º2.7è¿‡æ¸¡ç‰ˆæœ¬ï¼Œä¹‹åæˆ‘ä»¬éƒ½åº”è¯¥é‡‡ç”¨3.0è§£é‡Šå™¨å¼€å‘ç¨‹åºï¼Œä½†ä¸ºäº†æ–¹ä¾¿è¯»è€…ç»´æŠ¤2.0ç‰ˆæœ¬çš„è½¯ä»¶ï¼Œæˆ‘ä»¬åœ¨é‡åˆ°ä¸¤ç§ç‰ˆæœ¬çš„å·®å¼‚æ—¶ä¼šä¸“é—¨æŒ‡å‡ºæ¥)</p>
</li>
<li><p>Python 3.1 - June 27, 2009</p>
</li>
<li><p>Python 3.2 - February 20, 2011</p>
</li>
<li><p>Python 3.3 - September 29, 2012</p>
</li>
<li><p>Python 3.4 - March 16, 2014</p>
</li>
<li><p>Python 3.5 - September 13, 2015</p>
</li>
<li><p>Python 3.6 - 2016-12-23 å‘å¸ƒpython3.6.0ç‰ˆ</p>
</li>
</ul>
<h2 id="2-2-Pythonè§£é‡Šå™¨æœ‰å“ªäº›ç§ç±»"><a href="#2-2-Pythonè§£é‡Šå™¨æœ‰å“ªäº›ç§ç±»" class="headerlink" title="2.2 Pythonè§£é‡Šå™¨æœ‰å“ªäº›ç§ç±»?"></a>2.2 Pythonè§£é‡Šå™¨æœ‰å“ªäº›ç§ç±»?</h2><p>å®˜æ–¹çš„Pythonè§£é‡Šå™¨æœ¬è´¨å°±æ˜¯åŸºäºCè¯­è¨€å¼€å‘çš„ä¸€ä¸ªè½¯ä»¶ï¼Œè¯¥è½¯ä»¶çš„åŠŸèƒ½å°±æ˜¯è¯»å–ä»¥<code>.py</code>ç»“å°¾çš„æ–‡ä»¶å†…å®¹ï¼Œç„¶åæŒ‰ç…§Guidoå®šä¹‰å¥½çš„è¯­æ³•å’Œè§„åˆ™å»ç¿»è¯‘å¹¶æ‰§è¡Œç›¸åº”çš„ä»£ç ã€‚è¿™ç§ç”¨Cå®ç°çš„è§£é‡Šå™¨ç§°ä¸º<code>CPython</code>ï¼Œå®ƒæ˜¯pythoné¢†åŸŸæ€§èƒ½æœ€å¥½ï¼Œåº”ç”¨æœ€å¹¿æ³›çš„ä¸€æ¬¾è§£é‡Šå™¨ï¼Œæˆ‘ä»¬åœ¨åé¢æåˆ°çš„è§£é‡Šå™¨æŒ‡çš„éƒ½æ˜¯Cpythonè§£é‡Šå™¨ã€‚ä½†å…¶å®è§£é‡Šå™¨ä½œä¸ºä¸€æ¬¾åº”ç”¨è½¯ä»¶ï¼Œå®Œå…¨å¯ä»¥é‡‡ç”¨å…¶ä»–è¯­è¨€æ¥å¼€å‘ï¼Œåªè¦èƒ½è§£é‡Špythonè¿™é—¨è¯­è¨€çš„è¯­æ³•å³å¯ã€‚Pythonè§£é‡Šå™¨çš„ä¸€äº›ç§ç±»å¦‚ä¸‹ï¼Œç®€å•äº†è§£å³å¯</p>
<ul>
<li><p><strong>Jython</strong></p>
<p>JPythonè§£é‡Šå™¨æ˜¯ç”¨JAVAç¼–å†™çš„pythonè§£é‡Šå™¨ï¼Œå¯ä»¥ç›´æ¥æŠŠPythonä»£ç ç¼–è¯‘æˆJavaå­—èŠ‚ç å¹¶æ‰§è¡Œï¼Œå®ƒä¸ä½†ä½¿åŸºäºjavaçš„é¡¹ç›®ä¹‹ä¸ŠåµŒå…¥pythonè„šæœ¬æˆä¸ºå¯èƒ½ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å°†javaç¨‹åºå¼•å…¥åˆ°pythonç¨‹åºä¹‹ä¸­ã€‚</p>
</li>
<li><p><strong>IPython</strong></p>
<p>IPythonæ˜¯åŸºäºCPythonä¹‹ä¸Šçš„ä¸€ä¸ªäº¤äº’å¼è§£é‡Šå™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒIPythonåªæ˜¯åœ¨äº¤äº’æ–¹å¼ä¸Šæœ‰æ‰€å¢å¼ºï¼Œä½†æ˜¯æ‰§è¡ŒPythonä»£ç çš„åŠŸèƒ½å’ŒCPythonæ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚è¿™å°±å¥½æ¯”å¾ˆå¤šå›½äº§æµè§ˆå™¨è™½ç„¶å¤–è§‚ä¸åŒï¼Œä½†å†…æ ¸å…¶å®éƒ½æ˜¯è°ƒç”¨äº†IEã€‚<br>CPythonç”¨&gt;&gt;&gt;ä½œä¸ºæç¤ºç¬¦ï¼Œè€ŒIPythonç”¨In [åºå·]:ä½œä¸ºæç¤ºç¬¦ã€‚</p>
</li>
<li><p><strong>PyPy</strong></p>
<p>PyPyæ˜¯Pythonå¼€å‘è€…ä¸ºäº†æ›´å¥½åœ°Hack Pythonè€Œç”¨Pythonè¯­è¨€å®ç°çš„Pythonè§£é‡Šå™¨ã€‚PyPyæä¾›äº†JITç¼–è¯‘å™¨å’Œæ²™ç›’åŠŸèƒ½ï¼Œå¯¹Pythonä»£ç è¿›è¡ŒåŠ¨æ€ç¼–è¯‘ï¼ˆæ³¨æ„ä¸æ˜¯è§£é‡Šï¼‰ï¼Œå› æ­¤è¿è¡Œé€Ÿåº¦æ¯”CPythonè¿˜è¦å¿«ã€‚</p>
</li>
<li><p><strong>IronPython</strong></p>
<p>IronPythonå’ŒJythonç±»ä¼¼ï¼Œåªä¸è¿‡IronPythonæ˜¯è¿è¡Œåœ¨å¾®è½¯.Netå¹³å°ä¸Šçš„Pythonè§£é‡Šå™¨ï¼Œå¯ä»¥ç›´æ¥æŠŠPythonä»£ç ç¼–è¯‘æˆ.Netçš„å­—èŠ‚ç ã€‚</p>
</li>
</ul>
<h2 id="3-ç¬¬ä¸€ä¸ªPythonç¨‹åº"><a href="#3-ç¬¬ä¸€ä¸ªPythonç¨‹åº" class="headerlink" title="3 ç¬¬ä¸€ä¸ªPythonç¨‹åº"></a>3 ç¬¬ä¸€ä¸ªPythonç¨‹åº</h2><h2 id="3-1-è¿è¡Œpythonç¨‹åºæœ‰ä¸¤ç§æ–¹å¼"><a href="#3-1-è¿è¡Œpythonç¨‹åºæœ‰ä¸¤ç§æ–¹å¼" class="headerlink" title="3.1 è¿è¡Œpythonç¨‹åºæœ‰ä¸¤ç§æ–¹å¼"></a>3.1 è¿è¡Œpythonç¨‹åºæœ‰ä¸¤ç§æ–¹å¼</h2><p>æ–¹å¼ä¸€ï¼š äº¤äº’å¼æ¨¡å¼</p>
<p><img src="/../../../img/image-20220715111232260.png" alt="image-20220715111232260"></p>
<p>æ–¹å¼äºŒï¼šè„šæœ¬æ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1ã€æ‰“å¼€ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å·¥å…·ï¼Œå†™å…¥ä¸‹è¿°ä»£ç ï¼Œå¹¶ä¿å­˜æ–‡ä»¶ï¼Œæ­¤å¤„æ–‡ä»¶çš„è·¯å¾„ä¸ºD:\test.pyã€‚å¼ºè°ƒï¼špythonè§£é‡Šå™¨æ‰§è¡Œç¨‹åºæ˜¯è§£é‡Šæ‰§è¡Œï¼Œè§£é‡Šçš„æ ¹æœ¬å°±æ˜¯æ‰“å¼€æ–‡ä»¶è¯»å†…å®¹ï¼Œå› æ­¤æ–‡ä»¶çš„åç¼€åæ²¡æœ‰ç¡¬æ€§é™åˆ¶ï¼Œä½†é€šå¸¸å®šä¹‰ä¸º.pyç»“å°¾</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€æ‰“å¼€cmdï¼Œè¿è¡Œå‘½ä»¤ï¼Œå¦‚ä¸‹å›¾</span></span><br></pre></td></tr></table></figure>

<p><img src="/../../../img/image-20220715111243920.png" alt="image-20220715111243920"></p>
<p>æ€»ç»“ï¼š</p>
<p>1ã€äº¤äº’å¼æ¨¡å¼ä¸‹å¯ä»¥å³æ—¶å¾—åˆ°ä»£ç æ‰§è¡Œç»“æœï¼Œè°ƒè¯•ç¨‹åºååˆ†æ–¹ä¾¿<br>2ã€è‹¥æƒ³å°†ä»£ç æ°¸ä¹…ä¿å­˜ä¸‹æ¥ï¼Œåˆ™å¿…é¡»å°†ä»£ç å†™å…¥æ–‡ä»¶ä¸­<br>3ã€æˆ‘ä»¬ä»¥åä¸»è¦å°±æ˜¯åœ¨ä»£ç å†™å…¥æ–‡ä»¶ä¸­ï¼Œå¶å°”éœ€è¦æ‰“å¼€äº¤äº’å¼æ¨¡å¼è°ƒè¯•æŸæ®µä»£ç ã€éªŒè¯ç»“æœ</p>
<h2 id="3-2-æ³¨é‡Š"><a href="#3-2-æ³¨é‡Š" class="headerlink" title="3.2 æ³¨é‡Š"></a>3.2 æ³¨é‡Š</h2><ol>
<li><p>ä»€ä¹ˆæ˜¯æ³¨é‡Š</p>
<p>æ³¨é‡Šå°±æ˜¯å°±æ˜¯å¯¹ä»£ç çš„è§£é‡Šè¯´æ˜ï¼Œæ³¨é‡Šçš„å†…å®¹ä¸ä¼šè¢«å½“ä½œä»£ç è¿è¡Œ</p>
</li>
<li><p>ä¸ºä»€ä¹ˆè¦æ³¨é‡Š</p>
<p>å¢å¼ºä»£ç çš„å¯è¯»æ€§</p>
</li>
<li><p>æ€ä¹ˆç”¨æ³¨é‡Š?</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">è¿™æ˜¯å¤šè¡Œæ³¨é‡Š</span></span><br><span class="line"><span class="string">è¿™æ˜¯å¤šè¡Œæ³¨é‡Š</span></span><br><span class="line"><span class="string">è¿™æ˜¯å¤šè¡Œæ³¨é‡Š</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™æ˜¯å•è¡Œæ³¨é‡Šï¼Œä¸‹é¢æ˜¯æµ‹è¯•ä»£ç </span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello World&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä»£ç æ³¨é‡Šçš„åŸåˆ™ï¼š</p>
<p>1ã€ä¸ç”¨å…¨éƒ¨åŠ æ³¨é‡Šï¼Œåªéœ€è¦ä¸ºè‡ªå·±è§‰å¾—é‡è¦æˆ–ä¸å¥½ç†è§£çš„éƒ¨åˆ†åŠ æ³¨é‡Šå³å¯</p>
<p>2ã€æ³¨é‡Šå¯ä»¥ç”¨ä¸­æ–‡æˆ–è‹±æ–‡ï¼Œä½†ä¸è¦ç”¨æ‹¼éŸ³</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>01-è®¡ç®—æœºæ ¸å¿ƒåŸºç¡€</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/01_%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%A0%B8%E5%BF%83%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h2 id="1-å¼•å­"><a href="#1-å¼•å­" class="headerlink" title="1 å¼•å­:"></a>1 å¼•å­:</h2><p>æ¥ä¸‹æ¥ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä»¬çš„ç›®æ ‡çš„æ˜¯ï¼šå­¦ä¼šä½¿ç”¨pythonè¿™é—¨ç¼–ç¨‹è¯­è¨€æ¥ç¼–å†™ATM+è´­ç‰©è½¦ç¨‹åºï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†:</p>
<h3 id="1-1-ä»€ä¹ˆæ˜¯è¯­è¨€ï¼Ÿä»€ä¹ˆæ˜¯ç¼–ç¨‹è¯­è¨€ï¼Ÿä¸ºä½•è¦æœ‰ç¼–ç¨‹è¯­è¨€ï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯è¯­è¨€ï¼Ÿä»€ä¹ˆæ˜¯ç¼–ç¨‹è¯­è¨€ï¼Ÿä¸ºä½•è¦æœ‰ç¼–ç¨‹è¯­è¨€ï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯è¯­è¨€ï¼Ÿä»€ä¹ˆæ˜¯ç¼–ç¨‹è¯­è¨€ï¼Ÿä¸ºä½•è¦æœ‰ç¼–ç¨‹è¯­è¨€ï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯è¯­è¨€ï¼Ÿä»€ä¹ˆæ˜¯ç¼–ç¨‹è¯­è¨€ï¼Ÿä¸ºä½•è¦æœ‰ç¼–ç¨‹è¯­è¨€ï¼Ÿ</h3><p><img src="/../../../img/image-20220715110229082.png" alt="image-20220715110229082"></p>
<p>è¯­è¨€å…¶å®å°±æ˜¯äººä¸äººä¹‹é—´æ²Ÿé€šçš„ä»‹è´¨ï¼Œå¦‚è‹±è¯­ï¼Œæ±‰è¯­ï¼Œä¿„è¯­ç­‰ã€‚</p>
<p>è€Œç¼–ç¨‹è¯­è¨€åˆ™æ˜¯äººä¸è®¡ç®—æœºä¹‹é—´æ²Ÿé€šçš„ä»‹è´¨ã€‚</p>
<p>é‚£ä¹ˆä¸ºä½•è¦æœ‰ç¼–ç¨‹è¯­è¨€ï¼Œæˆ–è€…è¯´äººä¸ºä½•è¦ä¸è®¡ç®—æœºæ²Ÿé€šå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºåœ¨ç¼–ç¨‹çš„ä¸–ç•Œé‡Œï¼Œè®¡ç®—æœºå°±å¥½æ¯”æ˜¯äººçš„å¥´éš¶ï¼Œäººä¸è®¡ç®—æœºæ²Ÿé€šçš„ç›®çš„å°±æ˜¯ä¸ºäº†å¥´å½¹è®¡ç®—æœºï¼Œè®©è®¡ç®—æœºæŒ‰ç…§äººç±»çš„æ€ç»´é€»è¾‘è‡ªå‘åœ°å»å·¥ä½œä»è€ŒæŠŠäººåŠ›è§£æ”¾å‡ºæ¥ã€‚</p>
<p>æ­¤å¤„æˆ‘ä»¬å¯ä»¥æç‚¼å‡ºå¦‚ä¸‹ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µ</p>
<h3 id="1-2-ä»€ä¹ˆæ˜¯ç¼–ç¨‹ï¼Ÿä¸ºä»€ä¹ˆè¦ç¼–ç¨‹ï¼Ÿ"><a href="#1-2-ä»€ä¹ˆæ˜¯ç¼–ç¨‹ï¼Ÿä¸ºä»€ä¹ˆè¦ç¼–ç¨‹ï¼Ÿ" class="headerlink" title="1.2 ä»€ä¹ˆæ˜¯ç¼–ç¨‹ï¼Ÿä¸ºä»€ä¹ˆè¦ç¼–ç¨‹ï¼Ÿ"></a>1.2 ä»€ä¹ˆæ˜¯ç¼–ç¨‹ï¼Ÿä¸ºä»€ä¹ˆè¦ç¼–ç¨‹ï¼Ÿ</h3><p>ç¼–ç¨‹å°±æ˜¯äººæŠŠè‡ªå·±æƒ³å‘½ä»¤è®¡ç®—æœºå¹²çš„äº‹ç”¨ç¼–ç¨‹è¯­è¨€ç¿»è¯‘å‡ºæ¥å¹¶å†™åˆ°æ–‡ä»¶é‡Œï¼ˆè¿™ä¸€ç³»åˆ—çš„æ–‡ä»¶å°±æ˜¯ç¨‹åºï¼‰ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦ç¼–ç¨‹ï¼Ÿ</p>
<p>äººç±»ç¼–ç¨‹çš„ç›®çš„å°±æ˜¯ä¸ºäº†è®©è®¡ç®—æœºæŒ‰ç…§äººç±»çš„æ€ç»´é€»è¾‘(ç¨‹åº)è‡ªå‘åœ°å»å·¥ä½œä»è€ŒæŠŠäººåŠ›è§£æ”¾å‡ºæ¥ã€‚</p>
<p>ç»¼ä¸Šï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥çš„å­¦ä¹ åº”è¯¥åˆ†ä¸ºä¸¤ä¸ªå±‚é¢</p>
<p>1ã€ä¸ºäº†æ›´å¥½åœ°æ§åˆ¶äººç±»çš„å¥´éš¶ï¼ˆå³è®¡ç®—æœºï¼‰ï¼Œæˆ‘ä»¬éœ€è¦å­¦ä¹ è®¡ç®—æœºæ˜¯ç”±ä»€ä¹ˆç»„æˆçš„ã€å®ƒèƒ½åšä»€ä¹ˆäº‹ã€å®ƒæ˜¯æ€æ ·å·¥ä½œçš„ï¼ˆè¯¦è§è®¡ç®—æœºç»„æˆåŸç†ã€æ“ä½œç³»ç»Ÿæ¦‚è¿°ï¼‰</p>
<p>2ã€æˆ‘ä»¬éœ€è¦å­¦ä¹ ç¼–ç¨‹è¯­è¨€ï¼Œä»è€ŒæŠŠåŸæ¥éœ€è¦äººåŠ›æ¥å®Œæˆçš„ä¸šåŠ¡ï¼ˆæ¯”å¦‚ATMå’Œè´­ç‰©ï¼‰äº¤ç»™è®¡ç®—æœºå»åš</p>
<h2 id="2-è®¡ç®—æœºç»„æˆåŸç†"><a href="#2-è®¡ç®—æœºç»„æˆåŸç†" class="headerlink" title="2 è®¡ç®—æœºç»„æˆåŸç†"></a>2 è®¡ç®—æœºç»„æˆåŸç†</h2><h3 id="2-1ã€ä»€ä¹ˆæ˜¯è®¡ç®—æœºï¼Ÿ"><a href="#2-1ã€ä»€ä¹ˆæ˜¯è®¡ç®—æœºï¼Ÿ" class="headerlink" title="2.1ã€ä»€ä¹ˆæ˜¯è®¡ç®—æœºï¼Ÿ"></a>2.1ã€ä»€ä¹ˆæ˜¯è®¡ç®—æœºï¼Ÿ</h3><p>ä¿—ç§°ç”µè„‘ï¼Œå³é€šç”µçš„å¤§è„‘ï¼Œç”µè„‘äºŒå­—è•´å«äº†äººç±»å¯¹è®¡ç®—æœºçš„ç»ˆææœŸæœ›ï¼Œå¸Œæœ›å®ƒèƒ½çœŸçš„åƒäººè„‘ä¸€æ ·å»å·¥ä½œï¼Œä»è€Œè§£æ”¾äººåŠ›ã€‚</p>
<h3 id="2-2ã€ä¸ºä»€ä¹ˆè¦ç”¨è®¡ç®—æœºï¼Ÿ"><a href="#2-2ã€ä¸ºä»€ä¹ˆè¦ç”¨è®¡ç®—æœºï¼Ÿ" class="headerlink" title="2.2ã€ä¸ºä»€ä¹ˆè¦ç”¨è®¡ç®—æœºï¼Ÿ"></a>2.2ã€ä¸ºä»€ä¹ˆè¦ç”¨è®¡ç®—æœºï¼Ÿ</h3><p>ä¸–ç•Œæ˜¯ç”±èªæ˜çš„æ‡’äººç»Ÿæ²»çš„ï¼Œä»»ä½•æ—¶æœŸï¼Œæ€»æœ‰ä¸€ç¾¤èªæ˜çš„æ‡’äººæƒ³è¦å¥´éš¶åˆ«äººã€‚åœ¨å¥´éš¶åˆ¶ç¤¾ä¼šï¼Œèªæ˜çš„æ‡’äººå¥´å½¹çš„æ˜¯çœŸæ­£çš„äººï¼Œè€Œäººæ˜¯æ— æ³•ä¸åƒã€ä¸å–ã€ä¸ç¡è§‰ä¸€ç›´å·¥ä½œçš„ï¼Œä½†æ˜¯è®¡ç®—æœºä½œä¸ºä¸€å°æœºå™¨æ˜¯å¯ä»¥åšåˆ°çš„ï¼Œæ‰€ä»¥æŠŠè®¡ç®—æœºå½“å¥´éš¶æ˜¯ä¸Šä¸Šä¹‹é€‰ã€‚</p>
<h3 id="2-3ã€è®¡ç®—æœºçš„äº”å¤§ç»„æˆéƒ¨åˆ†"><a href="#2-3ã€è®¡ç®—æœºçš„äº”å¤§ç»„æˆéƒ¨åˆ†" class="headerlink" title="2.3ã€è®¡ç®—æœºçš„äº”å¤§ç»„æˆéƒ¨åˆ†"></a>2.3ã€è®¡ç®—æœºçš„äº”å¤§ç»„æˆéƒ¨åˆ†</h3><p>è®¡ç®—æœºæœ‰äº”å¤§ç»„æˆéƒ¨åˆ†ï¼Œæ—¢ç„¶è®¡ç®—æœºæ˜¯äººçš„å¥´éš¶ï¼Œé‚£ä¹ˆè®¡ç®—æœºè®¾è®¡æ ¸å¿ƒè‚¯å®šä¹Ÿæ˜¯åœ¨æ¨¡ä»¿çœŸæ­£çš„äººï¼Œæ‰€ä»¥æˆ‘ä»¬å®Œå…¨å¯ä»¥æŠŠè®¡ç®—æœºçš„äº”å¤§ç»„ä»¶æ¯”å–»æˆäººç±»çš„å„ç§å™¨å®˜</p>
<h4 id="2-3-1ã€æ§åˆ¶å™¨"><a href="#2-3-1ã€æ§åˆ¶å™¨" class="headerlink" title="2.3.1ã€æ§åˆ¶å™¨"></a>2.3.1ã€æ§åˆ¶å™¨</h4><p>æ§åˆ¶å™¨æ˜¯è®¡ç®—æœºçš„æŒ‡æŒ¥ç³»ç»Ÿï¼Œç”¨æ¥æ§åˆ¶è®¡ç®—æœºå…¶ä»–ç»„ä»¶çš„è¿è¡Œï¼Œç›¸å½“äºäººç±»çš„å¤§è„‘</p>
<h4 id="2-3-2ã€è¿ç®—å™¨"><a href="#2-3-2ã€è¿ç®—å™¨" class="headerlink" title="2.3.2ã€è¿ç®—å™¨"></a>2.3.2ã€è¿ç®—å™¨</h4><p>è¿ç®—å™¨æ˜¯è®¡ç®—æœºçš„è¿ç®—åŠŸèƒ½ï¼Œç”¨æ¥åšç®—æœ¯è¿ç®—å’Œé€»è¾‘è¿ç®—ï¼Œç›¸å½“äºäººè„‘ã€‚</p>
<p>psï¼šæ§åˆ¶å™¨+è¿ç®—å™¨&#x3D;CPUï¼Œcpuç›¸å½“äºäººçš„å¤§è„‘</p>
<p>cpuè¯¦è§£è§ï¼š</p>
<p><a href="https://www.cnblogs.com/xiaoyuanqujing/articles/11640866.html">https://www.cnblogs.com/xiaoyuanqujing/articles/11640866.html</a></p>
<h4 id="2-3-3ã€å­˜å‚¨å™¨"><a href="#2-3-3ã€å­˜å‚¨å™¨" class="headerlink" title="2.3.3ã€å­˜å‚¨å™¨"></a>2.3.3ã€å­˜å‚¨å™¨</h4><p>å­˜å‚¨å™¨æ˜¯è®¡ç®—æœºçš„è®°å¿†åŠŸèƒ½ï¼Œç”¨æ¥å­˜å–æ•°æ®ã€‚</p>
<p>å­˜å‚¨å™¨ä¸»è¦åˆ†ä¸ºå†…å­˜ä¸å¤–å­˜ï¼š</p>
<p> å†…å­˜ç›¸å½“äºäººçš„çŸ­æœŸè®°å¿†ã€‚æ–­ç”µæ•°æ®ä¸¢å¤±</p>
<p> å¤–å­˜(å¦‚ç£ç›˜),ç›¸å½“äºè®°äº‹çš„æœ¬å­ï¼Œæ–­ç”µæ•°æ®ä¸ä¼šä¸¢å¤±ï¼Œæ˜¯ç”¨æ¥æ°¸ä¹…ä¿å­˜æ•°æ®çš„</p>
<p> psï¼šå†…å­˜çš„å­˜å–é€Ÿåº¦è¦è¿œè¿œé«˜äºå¤–å­˜</p>
<h4 id="2-3-4ã€è¾“å…¥è®¾å¤‡input"><a href="#2-3-4ã€è¾“å…¥è®¾å¤‡input" class="headerlink" title="2.3.4ã€è¾“å…¥è®¾å¤‡input"></a>2.3.4ã€è¾“å…¥è®¾å¤‡input</h4><p>è¾“å…¥è®¾å¤‡æ˜¯è®¡ç®—æ¥æ”¶å¤–ç•Œè¾“å…¥æ•°æ®çš„å·¥å…·ï¼Œå¦‚é”®ç›˜ã€é¼ æ ‡ï¼Œç›¸å½“äºäººçš„çœ¼ç›æˆ–è€³æœµã€‚</p>
<h4 id="2-3-5ã€è¾“å‡ºè®¾å¤‡output"><a href="#2-3-5ã€è¾“å‡ºè®¾å¤‡output" class="headerlink" title="2.3.5ã€è¾“å‡ºè®¾å¤‡output"></a>2.3.5ã€è¾“å‡ºè®¾å¤‡output</h4><p>è¾“å‡ºè®¾å¤‡æ˜¯è®¡ç®—æœºå‘å¤–è¾“å‡ºæ•°æ®çš„å·¥å…·ï¼Œå¦‚æ˜¾ç¤ºå™¨ã€æ‰“å°æœºï¼Œç›¸å½“äºäººè¯´çš„è¯ï¼Œå†™å‡ºçš„æ–‡ç« ã€‚</p>
<p>psï¼šå­˜å‚¨å™¨å¦‚å†…å­˜ã€ç£ç›˜ç­‰æ—¢æ˜¯è¾“å…¥è®¾å¤‡åˆæ˜¯è¾“å‡ºè®¾å¤‡ï¼Œç»Ÿç§°ä¸ºIOè®¾å¤‡</p>
<h4 id="ä¸€ä¸ªéå¸¸é‡è¦çš„åŸºç¡€çŸ¥è¯†-ä¸è¿è¡Œç¨‹åºç›¸å…³çš„ä¸‰å¤§æ ¸å¿ƒç¡¬ä»¶"><a href="#ä¸€ä¸ªéå¸¸é‡è¦çš„åŸºç¡€çŸ¥è¯†-ä¸è¿è¡Œç¨‹åºç›¸å…³çš„ä¸‰å¤§æ ¸å¿ƒç¡¬ä»¶" class="headerlink" title="ä¸€ä¸ªéå¸¸é‡è¦çš„åŸºç¡€çŸ¥è¯†:ä¸è¿è¡Œç¨‹åºç›¸å…³çš„ä¸‰å¤§æ ¸å¿ƒç¡¬ä»¶"></a>ä¸€ä¸ªéå¸¸é‡è¦çš„åŸºç¡€çŸ¥è¯†:ä¸è¿è¡Œç¨‹åºç›¸å…³çš„ä¸‰å¤§æ ¸å¿ƒç¡¬ä»¶</h4><p>æˆ‘ä»¬ç¼–å†™çš„ç¨‹åºä¸€å®šæ˜¯è¦è¿è¡Œäºè®¡ç®—æœºç¡¬ä»¶ä¹‹ä¸Šï¼Œè€Œç«™åœ¨ç¡¬ä»¶çš„è§’åº¦ï¼Œä¸è¿è¡Œç¨‹åºæœ‰å…³çš„ä¸‰å¤§æ ¸å¿ƒç¡¬ä»¶ä¸ºCPUã€å†…å­˜ã€ç¡¬ç›˜ã€‚</p>
<p>ç¨‹åºæœ€å…ˆæ˜¯å­˜æ”¾äºç¡¬ç›˜ä¸­çš„ï¼Œç¨‹åºçš„è¿è¡Œæ˜¯å…ˆä»ç¡¬ç›˜æŠŠä»£ç åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åcpuæ˜¯ä»å†…å­˜ä¸­è¯»å–æŒ‡ä»¤è¿è¡Œã€‚</p>
<p><strong>psï¼šäº†è§£å…¶ä»–è®¡ç®—æœºç¡¬ä»¶çŸ¥è¯†</strong></p>
<p><a href="https://www.cnblogs.com/linhaifeng/p/6523843.html#4462371">https://www.cnblogs.com/linhaifeng/p/6523843.html#4462371</a></p>
<h2 id="3-æ“ä½œç³»ç»Ÿæ¦‚è¿°"><a href="#3-æ“ä½œç³»ç»Ÿæ¦‚è¿°" class="headerlink" title="3 æ“ä½œç³»ç»Ÿæ¦‚è¿°"></a>3 æ“ä½œç³»ç»Ÿæ¦‚è¿°</h2><h3 id="3-1ã€æ“ä½œç³»ç»Ÿçš„ç”±æ¥"><a href="#3-1ã€æ“ä½œç³»ç»Ÿçš„ç”±æ¥" class="headerlink" title="3.1ã€æ“ä½œç³»ç»Ÿçš„ç”±æ¥"></a>3.1ã€æ“ä½œç³»ç»Ÿçš„ç”±æ¥</h3><p> å¤§å‰æï¼šæˆ‘ä»¬ç¼–ç¨‹ç›®çš„å°±æ˜¯ä¸ºäº†å¥´å½¹è®¡ç®—æœºï¼Œè®©è®¡ç®—æœºç¡¬ä»¶è‡ªå‘åœ°è¿è¡Œèµ·æ¥ï¼Œç„¶è€Œç¡¬ä»¶æ¯•ç«Ÿæ˜¯â€æ­»çš„â€œï¼Œç¡¬ä»¶çš„è¿è¡Œéƒ½æ˜¯ç”±è½¯ä»¶æ”¯é…ã€‚</p>
<p> å€˜è‹¥æˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚æš´é£éŸ³å½±ï¼Œè¯¥è½¯ä»¶çš„ä¸€ä¸ªæ ¸å¿ƒä¸šåŠ¡å°±æ˜¯æ’­æ”¾è§†é¢‘ï¼Œå¼€å‘è€…è‹¥è¦ç¼–å†™ç¨‹åºå®Œæˆæ’­æ”¾è§†é¢‘è¿™ä¸ªä¸šåŠ¡é€»è¾‘ï¼Œå¿…å…ˆæ¶‰åŠåˆ°åº•å±‚ç¡¬ä»¶ç¡¬ç›˜çš„åŸºæœ¬è¿ä½œï¼ˆè§†é¢‘æ–‡ä»¶éƒ½æ˜¯å…ˆå­˜æ”¾äºç¡¬ç›˜ä¸­ï¼‰ï¼Œè¿™æ„å‘³ç€å¼€å‘è€…åœ¨ç¼–å†™ä¸šåŠ¡é€»è¾‘ä»£ç ä¹‹å‰ï¼Œå¿…é¡»å…ˆç¼–å†™ä¸€ä¸ªæ§åˆ¶ç¡¬ç›˜åŸºæœ¬è¿è¡Œçš„æ§åˆ¶ç¨‹åºï¼Œç„¶è€Œè¿™ä»…ä»…åªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œäº‹å®ä¸Šï¼Œåœ¨ç¼–å†™åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘å‰ï¼Œéœ€è¦å¼€å‘è€…ç¼–å†™å‡ºä¸€å¥—å®Œæ•´çš„æ§åˆ¶ç¨‹åºç”¨æ¥æ§åˆ¶æ‰€æœ‰ç¡¬ä»¶çš„åŸºæœ¬è¿è¡Œï¼ˆè¿™è¦æ±‚å¼€å‘è€…éœ€è¦è¯¦ç»†äº†è§£è®¡ç®—æœºç¡¬ä»¶çš„å„ç§æ§åˆ¶ç»†èŠ‚ï¼Œä¾‹å¦‚æˆ‘ä»¬å¿…é¡»æŠŠCPUé‡Œé¢æ‰€æœ‰æŒ‡ä»¤é›†éƒ½æŒæ¡ä¸€éï¼‰ï¼Œå¦‚æ­¤ï¼Œæ‰€æœ‰çš„å¼€å‘è€…åœ¨å¼€å‘ç¨‹åºæ—¶éƒ½å¿…é¡»ä¾æ¬¡å¼€å‘ä¸¤ç§ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€ç¼–å†™ä¸€å¥—å®Œæ•´çš„çš„æ§åˆ¶ç¨‹åºï¼Œç”¨æ¥æ§åˆ¶ç¡¬ä»¶çš„åŸºæœ¬è¿è¡Œï¼Œä»¥åŠæŠŠå¤æ‚çš„ç¡¬ä»¶çš„æ“ä½œå°è£…æˆç®€å•çš„æ¥å£</span></span><br><span class="line"><span class="comment">#2ã€åŸºäºæ§åˆ¶ç¨‹åºçš„æ¥å£å¼€å‘åŒ…å«ä¸€ç³»åˆ—ä¸šåŠ¡é€»è¾‘çš„ç¨‹åºï¼Œä¸ºäº†ä¸æ§åˆ¶ç¨‹åºåŒºåˆ†ï¼Œå¯ä»¥ç§°ä¸ºåº”ç”¨ç¨‹åºï¼Œä»¥ATMè¿™æ¬¾åº”ç”¨ç¨‹åºä¸ºä¾‹ï¼Œä¸šåŠ¡é€»è¾‘æœ‰ææ¬¾ã€è½¬è´¦ã€æŸ¥è¯¢ä½™é¢ç­‰</span></span><br></pre></td></tr></table></figure>

<p> ç»¼ä¸Šï¼Œå¯¹äºä¸åŒå…¬å¸çš„å¼€å‘è€…æ¥è¯´ï¼Œåº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘å„ä¸ç›¸åŒï¼Œä½†ç¡¬ä»¶çš„æ§åˆ¶ç¨‹åºéƒ½å¤§è‡´ç›¸åŒï¼Œä¸ºäº†é¿å…æ‰€æœ‰ç¨‹åºå‘˜åšé‡å¤åŠ³åŠ¨ï¼Œä»¥åŠä¸ç”¨å†è€—è´¹ç²¾åŠ›å»äº†è§£æ‰€æœ‰ç¡¬ä»¶çš„è¿è¡Œç»†èŠ‚ï¼Œæœ‰å…¬å¸ä¸“é—¨è·³å‡ºæ¥æ‰¿æ‹…èµ·æ§åˆ¶ç¨‹åºçš„å¼€å‘ä»»åŠ¡ï¼Œè¿™é‡Œæ‰€è¯´çš„æ§åˆ¶ç¨‹åºæŒ‡çš„å°±æ˜¯æ“ä½œç³»ç»Ÿã€‚</p>
<p> æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½å°±æ˜¯å¸®æˆ‘ä»¬æŠŠå¤æ‚çš„ç¡¬ä»¶çš„æ§åˆ¶å°è£…æˆç®€å•çš„æ¥å£ï¼Œå¯¹äºå¼€å‘åº”ç”¨ç¨‹åºæ¥è¯´åªéœ€è¦è°ƒç”¨æ“ä½œç³»ç»Ÿæä¾›ç»™æˆ‘ä»¬çš„æ¥å£å³å¯</p>
<h3 id="3-2ã€ç³»ç»Ÿè½¯ä»¶ä¸åº”ç”¨è½¯ä»¶"><a href="#3-2ã€ç³»ç»Ÿè½¯ä»¶ä¸åº”ç”¨è½¯ä»¶" class="headerlink" title="3.2ã€ç³»ç»Ÿè½¯ä»¶ä¸åº”ç”¨è½¯ä»¶"></a>3.2ã€ç³»ç»Ÿè½¯ä»¶ä¸åº”ç”¨è½¯ä»¶</h3><p>ç¡¬ä»¶ä»¥ä¸Šè¿è¡Œçš„éƒ½æ˜¯è½¯ä»¶ï¼Œè€Œè½¯ä»¶åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¸€ã€åº”ç”¨è½¯ä»¶ï¼ˆä¾‹å¦‚qqã€wordã€æš´é£å½±éŸ³ï¼Œæˆ‘ä»¬å­¦ä¹ pythonå°±æ˜¯ä¸ºäº†å¼€å‘åº”ç”¨è½¯ä»¶çš„ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#äºŒã€æ“ä½œç³»ç»Ÿï¼Œæ“ä½œç³»ç»Ÿåº”ç”¨è½¯ä»¶ä¸ç¡¬ä»¶ä¹‹é—´çš„ä¸€ä¸ªæ¡¥æ¢ï¼Œæ˜¯åè°ƒã€ç®¡ç†ã€æ§åˆ¶è®¡ç®—æœºç¡¬ä»¶ä¸åº”ç”¨è½¯ä»¶èµ„æºçš„æ§åˆ¶ç¨‹åºã€‚</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3ã€è®¡ç®—æœºç³»ç»Ÿä¸‰å±‚ç»“æ„"><a href="#3-3ã€è®¡ç®—æœºç³»ç»Ÿä¸‰å±‚ç»“æ„" class="headerlink" title="3.3ã€è®¡ç®—æœºç³»ç»Ÿä¸‰å±‚ç»“æ„"></a>3.3ã€è®¡ç®—æœºç³»ç»Ÿä¸‰å±‚ç»“æ„</h3><p>ç»¼ä¸Šï¼Œæˆ‘ä»¬å¼€å‘åº”ç”¨ç¨‹åºæœ¬è´¨æ˜¯åœ¨æ§åˆ¶ç¡¬ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬ç›´æ¥æ‰“äº¤é“çš„æ˜¯æ“ä½œç³»ç»Ÿï¼Œåº”ç”¨ç¨‹åºéƒ½æ˜¯é€šè¿‡æ“ä½œç³»ç»Ÿæ¥é—´æ¥åœ°æ“ä½œç¡¬ä»¶çš„ï¼Œæ‰€ä»¥ä¸€å¥—å®Œæ•´çš„è®¡ç®—æœºç³»ç»Ÿåˆ†ä¸ºä¸‰å±‚ï¼Œå¦‚ä¸‹</p>
<p><img src="/../../../img/image-20220715110139880.png" alt="image-20220715110139880"></p>
<h3 id="ä¸€ä¸ªéå¸¸é‡è¦çš„åŸºç¡€æ¦‚å¿µï¼šå¹³å°"><a href="#ä¸€ä¸ªéå¸¸é‡è¦çš„åŸºç¡€æ¦‚å¿µï¼šå¹³å°" class="headerlink" title="ä¸€ä¸ªéå¸¸é‡è¦çš„åŸºç¡€æ¦‚å¿µï¼šå¹³å°"></a>ä¸€ä¸ªéå¸¸é‡è¦çš„åŸºç¡€æ¦‚å¿µï¼šå¹³å°</h3><p>åº”ç”¨ç¨‹åºéƒ½æ˜¯è¿è¡Œäºæ“ä½œç³»ç»Ÿä¹‹ä¸Šï¼Œè€Œæ“ä½œç³»ç»Ÿåˆ™æ˜¯è¿è¡Œäºç¡¬ä»¶ä¹‹ä¸Šçš„ï¼Œæ‰€ä»¥æ‰¿è½½åº”ç”¨ç¨‹åºçš„æ˜¯ä¸€å°è¿è¡Œæœ‰æ“ä½œç³»ç»Ÿçš„è®¡ç®—æœºï¼Œç§°ä¹‹ä¸ºåº”ç”¨ç¨‹åºçš„è¿è¡Œå¹³å°ï¼Œå³ï¼šç¡¬ä»¶ + æ“ä½œç³»ç»Ÿ &#x3D;&#x3D; å¹³å°</p>
<p><img src="/../../../img/image-20220715110156372.png" alt="image-20220715110156372"></p>
<p>å¸¸è§çš„å¹³å°æœ‰ï¼šwindowsç³»ç»Ÿ+æŸæ¬¾ç¡¬ä»¶ã€linuxç³»ç»Ÿ+æŸæ¬¾ç¡¬ä»¶ã€ubuntu+æŸæ¬¾ç¡¬ä»¶ç­‰ï¼Œæˆ‘ä»¬åœ¨å¼€å‘åº”ç”¨ç¨‹åºæ—¶å°±éœ€è¦è€ƒè™‘åˆ°åº”ç”¨ç¨‹åºçš„è·¨å¹³å°æ€§ï¼Œå¦‚æœèƒ½å¼€å‘å‡ºä¸€æ¬¾å¯ä»¥åœ¨ä»»æ„å¹³å°è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œé‚£å¯¹äºå¼€å‘è€…æ¥è¯´çœŸæ˜¯æå¤§çš„ç¦éŸ³ã€‚è€Œå†³å®šåº”ç”¨è½¯ä»¶çš„è·¨å¹³å°æ€§çš„å…³é”®å› ç´ å¾€å¾€æ˜¯ç¼–ç¨‹è¯­è¨€çš„é€‰æ‹©ï¼Œpythonæ°å¥½æ˜¯ä¸€æ¬¾è·¨å¹³å°æ€§è¯­è¨€ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬å­¦ä¹ å®ƒçš„åŸå› ä¹‹ä¸€ã€‚</p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>03-å˜é‡</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/03_Python%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8%E4%B9%8B%E5%8F%98%E9%87%8F/</url>
    <content><![CDATA[<p>â€œæˆ‘ä»¬çŸ¥é“å­¦ä¹  <strong>Python</strong> è¯­è¨€çš„ç›®çš„æ˜¯ä¸ºäº†ä¸è®¡ç®—æœºè¿›è¡Œæ²Ÿé€š&#x2F;äº¤æµï¼Œä»è€Œæ§åˆ¶è®¡ç®—æœºå¸®åŠ©æˆ‘ä»¬åšä¸€äº›äº‹æƒ…ï¼Œæ‰€ä»¥ï¼Œåœ¨ <strong>Python</strong> è¯­è¨€çš„æ‰€æœ‰è¯­æ³•ä¸­ï¼Œæ¯ä¸ªè¯­æ³•å­˜åœ¨çš„æ„ä¹‰éƒ½æ˜¯ä¸ºäº†è®©è®¡ç®—æœºèƒ½å¤Ÿåƒäººç±»ä¸€æ ·ï¼Œç›´ç™½åœ°è®²ï¼Œå°±æ˜¯è®©è®¡ç®—æœºå…·å¤‡æˆ‘ä»¬äººç±»çš„æŸä¸€é¡¹æŠ€èƒ½ã€‚è¿™æ˜¯æˆ‘ä»¬ç†è§£åç»­æ‰€æœ‰ <strong>Python</strong> è¯­æ³•çš„æ ¹æœ¬ï¼Œä¸€å®šè¦ç†Ÿè®°ã€‚â€</p>
<h2 id="1-å˜é‡"><a href="#1-å˜é‡" class="headerlink" title="1 å˜é‡"></a>1 å˜é‡</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯å˜é‡ï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯å˜é‡ï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯å˜é‡ï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯å˜é‡ï¼Ÿ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å˜é‡å°±æ˜¯å¯ä»¥å˜åŒ–çš„é‡ï¼Œé‡æŒ‡çš„æ˜¯äº‹ç‰©çš„çŠ¶æ€ï¼Œæ¯”å¦‚äººçš„å¹´é¾„ã€æ€§åˆ«ï¼Œæ¸¸æˆè§’è‰²çš„ç­‰çº§ã€é‡‘é’±ç­‰ç­‰</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-ä¸ºä»€ä¹ˆè¦æœ‰å˜é‡ï¼Ÿ"><a href="#1-2-ä¸ºä»€ä¹ˆè¦æœ‰å˜é‡ï¼Ÿ" class="headerlink" title="1.2 ä¸ºä»€ä¹ˆè¦æœ‰å˜é‡ï¼Ÿ"></a>1.2 ä¸ºä»€ä¹ˆè¦æœ‰å˜é‡ï¼Ÿ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸ºäº†è®©è®¡ç®—æœºèƒ½å¤Ÿåƒäººä¸€æ ·å»è®°å¿†äº‹ç‰©çš„æŸç§çŠ¶æ€ï¼Œå¹¶ä¸”çŠ¶æ€æ˜¯å¯ä»¥å‘ç”Ÿå˜åŒ–çš„</span></span><br><span class="line"><span class="comment"># è¯¦ç»†åœ°è¯´ï¼š</span></span><br><span class="line"><span class="comment"># ç¨‹åºæ‰§è¡Œçš„æœ¬è´¨å°±æ˜¯ä¸€ç³»åˆ—çŠ¶æ€çš„å˜åŒ–ï¼Œå˜æ˜¯ç¨‹åºæ‰§è¡Œçš„ç›´æ¥ä½“ç°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æœ‰ä¸€ç§æœºåˆ¶èƒ½å¤Ÿåæ˜ æˆ–è€…è¯´æ˜¯ä¿å­˜ä¸‹æ¥ç¨‹åºæ‰§è¡Œæ—¶çŠ¶æ€ï¼Œä»¥åŠçŠ¶æ€çš„å˜åŒ–ã€‚</span></span><br></pre></td></tr></table></figure>



<h2 id="2-ä½¿ç”¨å˜é‡"><a href="#2-ä½¿ç”¨å˜é‡" class="headerlink" title="2 ä½¿ç”¨å˜é‡"></a>2 ä½¿ç”¨å˜é‡</h2><h3 id="2-1-å˜é‡çš„å®šä¹‰ä¸ä½¿ç”¨"><a href="#2-1-å˜é‡çš„å®šä¹‰ä¸ä½¿ç”¨" class="headerlink" title="2.1 å˜é‡çš„å®šä¹‰ä¸ä½¿ç”¨"></a>2.1 å˜é‡çš„å®šä¹‰ä¸ä½¿ç”¨</h3><p>å˜é‡çš„å®šä¹‰ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œå¦‚ä¸‹å›¾</p>
<p><img src="/../../../img/image-20220718091017221.png" alt="image-20220718091017221"></p>
<p>å®šä¹‰å˜é‡ç¤ºèŒƒå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">name = <span class="string">&#x27;Jason&#x27;</span> <span class="comment"># è®°ä¸‹äººçš„åå­—ä¸º&#x27;Jason&#x27;</span></span><br><span class="line">sex = <span class="string">&#x27;ç”·&#x27;</span>    <span class="comment"># è®°ä¸‹äººçš„æ€§åˆ«ä¸ºç”·æ€§</span></span><br><span class="line">age = <span class="number">18</span>      <span class="comment"># è®°ä¸‹äººçš„å¹´é¾„ä¸º18å²</span></span><br><span class="line">salary = <span class="number">30000.1</span>  <span class="comment"># è®°ä¸‹äººçš„è–ªèµ„ä¸º30000.1å…ƒ</span></span><br></pre></td></tr></table></figure>

<p>è§£é‡Šå™¨æ‰§è¡Œåˆ°å˜é‡å®šä¹‰çš„ä»£ç æ—¶ä¼šç”³è¯·å†…å­˜ç©ºé—´å­˜æ”¾å˜é‡å€¼ï¼Œç„¶åå°†å˜é‡å€¼çš„å†…å­˜åœ°å€ç»‘å®šç»™å˜é‡åï¼Œä»¥å˜é‡çš„å®šä¹‰age&#x3D;18ä¸ºä¾‹ï¼Œå¦‚ä¸‹å›¾</p>
<p>æ’å›¾ï¼šå®šä¹‰å˜é‡ç”³è¯·å†…å­˜</p>
<p>é€šè¿‡å˜é‡åå³å¯å¼•ç”¨åˆ°å¯¹åº”çš„å€¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é€šè¿‡å˜é‡åå³å¯å¼•ç”¨åˆ°å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆprint()åŠŸèƒ½å°†å…¶æ‰“å°å‡ºæ¥</span></span><br><span class="line"><span class="built_in">print</span>(age) <span class="comment"># é€šè¿‡å˜é‡åageæ‰¾åˆ°å€¼18ï¼Œç„¶åæ‰§è¡Œprint(18),è¾“å‡ºï¼š18</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-å˜é‡åçš„å‘½åè§„èŒƒ"><a href="#2-2-å˜é‡åçš„å‘½åè§„èŒƒ" class="headerlink" title="2.2 å˜é‡åçš„å‘½åè§„èŒƒ"></a>2.2 å˜é‡åçš„å‘½åè§„èŒƒ</h3><p>å˜é‡åçš„å‘½ååº”è¯¥è§åçŸ¥æ„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœæˆ‘ä»¬è¦å­˜å‚¨çš„æ•°æ®18ä»£è¡¨çš„æ˜¯ä¸€ä¸ªäººçš„å¹´é¾„ï¼Œé‚£ä¹ˆå˜é‡åæ¨èå‘½åä¸ºage</span></span><br><span class="line">age = <span class="number">18</span> </span><br><span class="line"><span class="comment"># å¦‚æœæˆ‘ä»¬è¦å­˜å‚¨çš„æ•°æ®18ä»£è¡¨çš„æ˜¯ä¸€ä¸ªäººçš„ç­‰çº§ï¼Œé‚£ä¹ˆå˜é‡åæ¨èå‘½åä¸ºlevel</span></span><br><span class="line">level = <span class="number">18</span></span><br></pre></td></tr></table></figure>

<p>å…¶ä»–è¯¦ç»†è§„èŒƒå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‘½åè§„èŒƒ</span></span><br><span class="line"><span class="number">1.</span> å˜é‡ååªèƒ½æ˜¯ å­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿çš„ä»»æ„ç»„åˆ</span><br><span class="line"><span class="number">2.</span> å˜é‡åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸èƒ½æ˜¯æ•°å­—</span><br><span class="line"><span class="number">3.</span> å…³é”®å­—ä¸èƒ½å£°æ˜ä¸ºå˜é‡åï¼Œå¸¸ç”¨å…³é”®å­—å¦‚ä¸‹</span><br><span class="line">[<span class="string">&#x27;and&#x27;</span>, <span class="string">&#x27;as&#x27;</span>, <span class="string">&#x27;assert&#x27;</span>, <span class="string">&#x27;break&#x27;</span>, <span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;continue&#x27;</span>, <span class="string">&#x27;def&#x27;</span>, <span class="string">&#x27;del&#x27;</span>, <span class="string">&#x27;elif&#x27;</span>, <span class="string">&#x27;else&#x27;</span>, <span class="string">&#x27;except&#x27;</span>, <span class="string">&#x27;exec&#x27;</span>, <span class="string">&#x27;finally&#x27;</span>, <span class="string">&#x27;for&#x27;</span>, <span class="string">&#x27;from&#x27;</span>,<span class="string">&#x27;global&#x27;</span>, <span class="string">&#x27;if&#x27;</span>, <span class="string">&#x27;import&#x27;</span>, <span class="string">&#x27;in&#x27;</span>, <span class="string">&#x27;is&#x27;</span>, <span class="string">&#x27;lambda&#x27;</span>, <span class="string">&#x27;not&#x27;</span>, <span class="string">&#x27;or&#x27;</span>, <span class="string">&#x27;pass&#x27;</span>, <span class="string">&#x27;print&#x27;</span>, <span class="string">&#x27;raise&#x27;</span>, <span class="string">&#x27;return&#x27;</span>, <span class="string">&#x27;try&#x27;</span>, <span class="string">&#x27;while&#x27;</span>, <span class="string">&#x27;with&#x27;</span>, <span class="string">&#x27;yield&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># é”™è¯¯ç¤ºèŒƒå¦‚ä¸‹ï¼š</span></span><br><span class="line">*a=<span class="number">123</span></span><br><span class="line">$b=<span class="number">456</span></span><br><span class="line">c$=<span class="number">789</span></span><br><span class="line">2_name=<span class="string">&#x27;lili&#x27;</span></span><br><span class="line"><span class="number">123</span>=<span class="string">&#x27;lili&#x27;</span></span><br><span class="line"><span class="keyword">and</span>=<span class="number">123</span></span><br><span class="line">å¹´é¾„=<span class="number">18</span> <span class="comment"># å¼ºçƒˆå»ºè®®ä¸è¦ä½¿ç”¨ä¸­æ–‡å‘½å</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­£ç¡®ç¤ºèŒƒå¦‚ä¸‹</span></span><br><span class="line">age_of_jason=<span class="number">31</span></span><br><span class="line">page1=<span class="string">&#x27;é¦–é¡µ&#x27;</span></span><br><span class="line">_<span class="keyword">class</span>=<span class="string">&#x27;ç»ˆæä¸€ç­&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-å˜é‡åçš„å‘½åé£æ ¼"><a href="#2-3-å˜é‡åçš„å‘½åé£æ ¼" class="headerlink" title="2.3 å˜é‡åçš„å‘½åé£æ ¼"></a>2.3 å˜é‡åçš„å‘½åé£æ ¼</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é£æ ¼ä¸€ï¼šé©¼å³°ä½“</span></span><br><span class="line">AgeOfTony = <span class="number">56</span> </span><br><span class="line">NumberOfStudents = <span class="number">80</span></span><br><span class="line"><span class="comment"># é£æ ¼äºŒï¼šçº¯å°å†™ä¸‹åˆ’çº¿(åœ¨pythonä¸­ï¼Œå˜é‡åçš„å‘½åæ¨èä½¿ç”¨è¯¥é£æ ¼)</span></span><br><span class="line">age_of_tony = <span class="number">56</span> </span><br><span class="line">number_of_students = <span class="number">80</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-å˜é‡å€¼çš„ä¸‰å¤§ç‰¹æ€§"><a href="#2-4-å˜é‡å€¼çš„ä¸‰å¤§ç‰¹æ€§" class="headerlink" title="2.4 å˜é‡å€¼çš„ä¸‰å¤§ç‰¹æ€§"></a>2.4 å˜é‡å€¼çš„ä¸‰å¤§ç‰¹æ€§</h3><p>å˜é‡çš„å€¼å…·å¤‡ä¸‰å¤§ç‰¹æ€§</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€id</span></span><br><span class="line">ååº”çš„æ˜¯å˜é‡åœ¨å†…å­˜ä¸­çš„å”¯ä¸€ç¼–å·ï¼Œå†…å­˜åœ°å€ä¸åŒ<span class="built_in">id</span>è‚¯å®šä¸åŒ</span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€type</span></span><br><span class="line">å˜é‡å€¼çš„ç±»å‹</span><br><span class="line"></span><br><span class="line"><span class="comment">#3ã€value</span></span><br><span class="line">å˜é‡å€¼</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹å˜é‡å€¼ä¸‰å¤§ç‰¹æ€§çš„æ–¹å¼å¦‚ä¸‹ï¼Œæˆ‘ä»¬å°†ä¼šåœ¨è¿ç®—ç¬¦ä¸­ç”¨åˆ°å˜é‡å€¼çš„ä¸‰å¤§ç‰¹æ€§</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=<span class="string">&#x27;Info Tony:18&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(x),<span class="built_in">type</span>(x),x</span><br><span class="line"><span class="number">4376607152</span>ï¼Œ&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">str</span>&#x27;&gt;,&#x27;<span class="title">Info</span> <span class="title">Tony</span>:</span><span class="number">18</span><span class="string">&#x27;</span></span><br></pre></td></tr></table></figure>

<p>äº†è§£ï¼š<a href="https://zhuanlan.zhihu.com/p/113408690">Pythonæ˜¯ä¸€é—¨è§£é‡Šå‹çš„å¼ºç±»å‹åŠ¨æ€è¯­è¨€</a></p>
<h2 id="3-å¸¸é‡"><a href="#3-å¸¸é‡" class="headerlink" title="3 å¸¸é‡"></a>3 å¸¸é‡</h2><h3 id="3-1-ä»€ä¹ˆæ˜¯å¸¸é‡ï¼Ÿ"><a href="#3-1-ä»€ä¹ˆæ˜¯å¸¸é‡ï¼Ÿ" class="headerlink" title="3.1 ä»€ä¹ˆæ˜¯å¸¸é‡ï¼Ÿ"></a>3.1 ä»€ä¹ˆæ˜¯å¸¸é‡ï¼Ÿ</h3><p>å¸¸é‡æŒ‡åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šæ”¹å˜çš„é‡</p>
<h3 id="3-2-ä¸ºä»€ä¹ˆè¦æœ‰å¸¸é‡ï¼Ÿ"><a href="#3-2-ä¸ºä»€ä¹ˆè¦æœ‰å¸¸é‡ï¼Ÿ" class="headerlink" title="3.2 ä¸ºä»€ä¹ˆè¦æœ‰å¸¸é‡ï¼Ÿ"></a>3.2 ä¸ºä»€ä¹ˆè¦æœ‰å¸¸é‡ï¼Ÿ</h3><p>åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæœ‰äº›å€¼æ˜¯å›ºå®šçš„ã€ä¸åº”è¯¥è¢«æ”¹å˜ï¼Œæ¯”å¦‚åœ†å‘¨ç‡ 3.141592653â€¦</p>
<h3 id="3-3-æ€ä¹ˆä½¿ç”¨å¸¸é‡ï¼Ÿ"><a href="#3-3-æ€ä¹ˆä½¿ç”¨å¸¸é‡ï¼Ÿ" class="headerlink" title="3.3 æ€ä¹ˆä½¿ç”¨å¸¸é‡ï¼Ÿ"></a>3.3 æ€ä¹ˆä½¿ç”¨å¸¸é‡ï¼Ÿ</h3><p>åœ¨Pythonä¸­æ²¡æœ‰ä¸€ä¸ªä¸“é—¨çš„è¯­æ³•å®šä¹‰å¸¸é‡ï¼Œçº¦å®šä¿—æˆæ˜¯ç”¨å…¨éƒ¨å¤§å†™çš„å˜é‡åè¡¨ç¤ºå¸¸é‡ã€‚å¦‚ï¼šPI&#x3D;3.14159ã€‚æ‰€ä»¥å•ä»è¯­æ³•å±‚é¢å»è®²ï¼Œå¸¸é‡çš„ä½¿ç”¨ä¸å˜é‡å®Œå…¨ä¸€è‡´ã€‚</p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>04-åŸºæœ¬æ•°æ®ç±»å‹</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/04_Python%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8%E4%B9%8B%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
    <content><![CDATA[<p>â€œæˆ‘ä»¬å­¦ä¹ å˜é‡æ˜¯ä¸ºäº†è®©è®¡ç®—æœºèƒ½å¤Ÿåƒäººä¸€æ ·å»è®°å¿†äº‹ç‰©çš„æŸç§çŠ¶æ€ï¼Œè€Œå˜é‡çš„å€¼å°±æ˜¯ç”¨æ¥å­˜å‚¨äº‹ç‰©çŠ¶æ€çš„ï¼Œå¾ˆæ˜æ˜¾äº‹ç‰©çš„çŠ¶æ€åˆ†æˆä¸åŒç§ç±»çš„ï¼ˆæ¯”å¦‚äººçš„å¹´é¾„ï¼Œèº«é«˜ï¼ŒèŒä½ï¼Œå·¥èµ„ç­‰ç­‰ï¼‰ï¼Œæ‰€ä»¥å˜é‡å€¼ä¹Ÿåº”è¯¥æœ‰ä¸åŒçš„ç±»å‹â€</p>
<h2 id="1-æ•°å­—ç±»å‹"><a href="#1-æ•°å­—ç±»å‹" class="headerlink" title="1 æ•°å­—ç±»å‹"></a>1 æ•°å­—ç±»å‹</h2><h3 id="1-1-intæ•´å‹"><a href="#1-1-intæ•´å‹" class="headerlink" title="1.1 intæ•´å‹"></a>1.1 intæ•´å‹</h3><h4 id=""><a href="#" class="headerlink" title=""></a></h4><p>ç”¨æ¥è®°å½•äººçš„å¹´é¾„ï¼Œå‡ºç”Ÿå¹´ä»½ï¼Œå­¦ç”Ÿäººæ•°ç­‰æ•´æ•°ç›¸å…³çš„çŠ¶æ€</p>
<h4 id="1-1-2-å®šä¹‰"><a href="#1-1-2-å®šä¹‰" class="headerlink" title="1.1.2 å®šä¹‰"></a>1.1.2 å®šä¹‰</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">age=<span class="number">18</span></span><br><span class="line"></span><br><span class="line">birthday=<span class="number">1990</span></span><br><span class="line"></span><br><span class="line">student_count=<span class="number">48</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-floatæµ®ç‚¹å‹"><a href="#1-2-floatæµ®ç‚¹å‹" class="headerlink" title="1.2 floatæµ®ç‚¹å‹"></a>1.2 floatæµ®ç‚¹å‹</h3><h4 id="1-2-1-ä½œç”¨"><a href="#1-2-1-ä½œç”¨" class="headerlink" title="1.2.1 ä½œç”¨"></a>1.2.1 ä½œç”¨</h4><p>ç”¨æ¥è®°å½•äººçš„èº«é«˜ï¼Œä½“é‡ï¼Œè–ªèµ„ç­‰å°æ•°ç›¸å…³çš„çŠ¶æ€</p>
<h4 id="1-2-2-å®šä¹‰"><a href="#1-2-2-å®šä¹‰" class="headerlink" title="1.2.2 å®šä¹‰"></a>1.2.2 å®šä¹‰</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">height=<span class="number">172.3</span></span><br><span class="line"></span><br><span class="line">weight=<span class="number">103.5</span></span><br><span class="line"></span><br><span class="line">salary=<span class="number">15000.89</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-æ•°å­—ç±»å‹çš„ä½¿ç”¨"><a href="#1-3-æ•°å­—ç±»å‹çš„ä½¿ç”¨" class="headerlink" title="1.3 æ•°å­—ç±»å‹çš„ä½¿ç”¨"></a>1.3 æ•°å­—ç±»å‹çš„ä½¿ç”¨</h3><p>1 ã€æ•°å­¦è¿ç®—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = a + b</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>2ã€æ¯”è¾ƒå¤§å°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y = <span class="number">11</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x &gt; y</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h2 id="2-å­—ç¬¦ä¸²ç±»å‹str"><a href="#2-å­—ç¬¦ä¸²ç±»å‹str" class="headerlink" title="2 å­—ç¬¦ä¸²ç±»å‹str"></a>2 å­—ç¬¦ä¸²ç±»å‹str</h2><h3 id="2-1-ä½œç”¨"><a href="#2-1-ä½œç”¨" class="headerlink" title="2.1 ä½œç”¨"></a>2.1 ä½œç”¨</h3><p>ç”¨æ¥è®°å½•äººçš„åå­—ï¼Œå®¶åº­ä½å€ï¼Œæ€§åˆ«ç­‰æè¿°æ€§è´¨çš„çŠ¶æ€</p>
<h3 id="2-2-å®šä¹‰"><a href="#2-2-å®šä¹‰" class="headerlink" title="2.2 å®šä¹‰"></a>2.2 å®šä¹‰</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">name = <span class="string">&#x27;Tony&#x27;</span></span><br><span class="line">address = <span class="string">&#x27;ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒº&#x27;</span></span><br><span class="line">sex = <span class="string">&#x27;ç”·&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ç”¨å•å¼•å·ã€åŒå¼•å·ã€å¤šå¼•å·ï¼Œéƒ½å¯ä»¥å®šä¹‰å­—ç¬¦ä¸²ï¼Œæœ¬è´¨ä¸Šæ˜¯æ²¡æœ‰åŒºåˆ«çš„ï¼Œä½†æ˜¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€éœ€è¦è€ƒè™‘å¼•å·åµŒå¥—çš„é…å¯¹é—®é¢˜</span></span><br><span class="line">msg = <span class="string">&quot;My name is Tony , I&#x27;m 18 years old!&quot;</span> <span class="comment">#å†…å±‚æœ‰å•å¼•å·ï¼Œå¤–å±‚å°±éœ€è¦ç”¨åŒå¼•å·</span></span><br><span class="line"><span class="comment">#2ã€å¤šå¼•å·å¯ä»¥å†™å¤šè¡Œå­—ç¬¦ä¸²</span></span><br><span class="line">msg = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        å¤©ä¸‹åªæœ‰ä¸¤ç§äººã€‚æ¯”å¦‚ä¸€ä¸²è‘¡è„åˆ°æ‰‹ï¼Œä¸€ç§äººæŒ‘æœ€å¥½çš„å…ˆåƒï¼Œå¦ä¸€ç§äººæŠŠæœ€å¥½çš„ç•™åˆ°æœ€ååƒã€‚</span></span><br><span class="line"><span class="string">        ç…§ä¾‹ç¬¬ä¸€ç§äººåº”è¯¥ä¹è§‚ï¼Œå› ä¸ºä»–æ¯åƒä¸€é¢—éƒ½æ˜¯åƒå‰©çš„è‘¡è„é‡Œæœ€å¥½çš„ï¼›ç¬¬äºŒç§äººåº”è¯¥æ‚²è§‚ï¼Œå› ä¸ºä»–æ¯åƒä¸€é¢—éƒ½æ˜¯åƒå‰©çš„è‘¡è„é‡Œæœ€åçš„ã€‚</span></span><br><span class="line"><span class="string">        ä¸è¿‡äº‹å®å´é€‚å¾—å…¶åï¼Œç¼˜æ•…æ˜¯ç¬¬äºŒç§äººè¿˜æœ‰å¸Œæœ›ï¼Œç¬¬ä¸€ç§äººåªæœ‰å›å¿†ã€‚</span></span><br><span class="line"><span class="string">      &#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-ä½¿ç”¨"><a href="#2-3-ä½¿ç”¨" class="headerlink" title="2.3 ä½¿ç”¨"></a>2.3 ä½¿ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">æ•°å­—å¯ä»¥è¿›è¡ŒåŠ å‡ä¹˜é™¤ç­‰è¿ç®—ï¼Œå­—ç¬¦ä¸²å‘¢ï¼Ÿä¹Ÿå¯ä»¥ï¼Œä½†åªèƒ½è¿›è¡Œ<span class="string">&quot;ç›¸åŠ &quot;</span>å’Œ<span class="string">&quot;ç›¸ä¹˜&quot;</span>è¿ç®—ã€‚</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name = <span class="string">&#x27;tony&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>age = <span class="string">&#x27;18&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name + age <span class="comment">#ç›¸åŠ å…¶å®å°±æ˜¯ç®€å•çš„å­—ç¬¦ä¸²æ‹¼æ¥</span></span><br><span class="line"><span class="string">&#x27;tony18&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name * <span class="number">5</span> <span class="comment">#ç›¸ä¹˜å°±ç›¸å½“äºå°†å­—ç¬¦ä¸²ç›¸åŠ äº†5æ¬¡</span></span><br><span class="line"><span class="string">&#x27;tonytonytonytonytony&#x27;</span></span><br></pre></td></tr></table></figure>



<h2 id="3-åˆ—è¡¨list"><a href="#3-åˆ—è¡¨list" class="headerlink" title="3 åˆ—è¡¨list"></a>3 åˆ—è¡¨list</h2><h2 id="3-1-ä½œç”¨"><a href="#3-1-ä½œç”¨" class="headerlink" title="3.1 ä½œç”¨"></a>3.1 ä½œç”¨</h2><p>å¦‚æœæˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªå˜é‡è®°å½•å¤šä¸ªå­¦ç”Ÿçš„å§“åï¼Œç”¨æ•°å­—ç±»å‹æ˜¯æ— æ³•å®ç°ï¼Œå­—ç¬¦ä¸²ç±»å‹ç¡®å®å¯ä»¥è®°å½•ä¸‹æ¥ï¼Œæ¯”å¦‚</p>
<p>stu_names&#x3D;â€™å¼ ä¸‰ æå›› ç‹äº”â€™ï¼Œä½†å­˜çš„ç›®çš„æ˜¯ä¸ºäº†å–ï¼Œæ­¤æ—¶è‹¥æƒ³å–å‡ºç¬¬äºŒä¸ªå­¦ç”Ÿçš„å§“åå®ç°èµ·æ¥ç›¸å½“éº»çƒ¦ï¼Œè€Œåˆ—è¡¨ç±»å‹å°±æ˜¯ä¸“é—¨ç”¨æ¥è®°å½•å¤šä¸ªåŒç§å±æ€§çš„å€¼ï¼ˆæ¯”å¦‚åŒä¸€ä¸ªç­çº§å¤šä¸ªå­¦ç”Ÿçš„å§“åã€åŒä¸€ä¸ªäººçš„å¤šä¸ªçˆ±å¥½ç­‰ï¼‰ï¼Œå¹¶ä¸”å­˜å–éƒ½ååˆ†æ–¹ä¾¿</p>
<h2 id="3-2-å®šä¹‰"><a href="#3-2-å®šä¹‰" class="headerlink" title="3.2 å®šä¹‰"></a>3.2 å®šä¹‰</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu_names=[<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="string">&#x27;æå››&#x27;</span>,<span class="string">&#x27;ç‹äº”&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h2 id="3-3-ä½¿ç”¨"><a href="#3-3-ä½¿ç”¨" class="headerlink" title="3.3 ä½¿ç”¨"></a>3.3 ä½¿ç”¨</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1ã€åˆ—è¡¨ç±»å‹æ˜¯ç”¨ç´¢å¼•æ¥å¯¹åº”å€¼ï¼Œç´¢å¼•ä»£è¡¨çš„æ˜¯æ•°æ®çš„ä½ç½®ï¼Œä»0å¼€å§‹è®¡æ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu_names=[<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="string">&#x27;æå››&#x27;</span>,<span class="string">&#x27;ç‹äº”&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu_names[<span class="number">0</span>] </span><br><span class="line"><span class="string">&#x27;å¼ ä¸‰&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu_names[<span class="number">1</span>]</span><br><span class="line"><span class="string">&#x27;æå››&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu_names[<span class="number">2</span>]</span><br><span class="line"><span class="string">&#x27;ç‹äº”&#x27;</span></span><br><span class="line"><span class="comment"># 2ã€åˆ—è¡¨å¯ä»¥åµŒå¥—ï¼ŒåµŒå¥—å–å€¼å¦‚ä¸‹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>students_info=[[<span class="string">&#x27;tony&#x27;</span>,<span class="number">18</span>,[<span class="string">&#x27;jack&#x27;</span>,]],[<span class="string">&#x27;jason&#x27;</span>,<span class="number">18</span>,[<span class="string">&#x27;play&#x27;</span>,<span class="string">&#x27;sleep&#x27;</span>]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>students_info[<span class="number">0</span>][<span class="number">2</span>][<span class="number">0</span>] <span class="comment">#å–å‡ºç¬¬ä¸€ä¸ªå­¦ç”Ÿçš„ç¬¬ä¸€ä¸ªçˆ±å¥½</span></span><br><span class="line"><span class="string">&#x27;play&#x27;</span></span><br></pre></td></tr></table></figure>



<h2 id="4-å­—å…¸dict"><a href="#4-å­—å…¸dict" class="headerlink" title="4 å­—å…¸dict"></a>4 å­—å…¸dict</h2><h3 id="4-1-ä½œç”¨"><a href="#4-1-ä½œç”¨" class="headerlink" title="4.1 ä½œç”¨"></a>4.1 ä½œç”¨</h3><p>å¦‚æœæˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªå˜é‡è®°å½•å¤šä¸ªå€¼ï¼Œä½†å¤šä¸ªå€¼æ˜¯ä¸åŒå±æ€§çš„ï¼Œæ¯”å¦‚äººçš„å§“åã€å¹´é¾„ã€èº«é«˜ï¼Œç”¨åˆ—è¡¨å¯ä»¥å­˜ï¼Œä½†åˆ—è¡¨æ˜¯ç”¨ç´¢å¼•å¯¹åº”å€¼çš„ï¼Œè€Œç´¢å¼•ä¸èƒ½æ˜ç¡®åœ°è¡¨ç¤ºå€¼çš„å«ä¹‰ï¼Œè¿™å°±ç”¨åˆ°å­—å…¸ç±»å‹ï¼Œå­—å…¸ç±»å‹æ˜¯ç”¨keyï¼švalueå½¢å¼æ¥å­˜å‚¨æ•°æ®ï¼Œå…¶ä¸­keyå¯ä»¥å¯¹valueæœ‰æè¿°æ€§çš„åŠŸèƒ½</p>
<h3 id="4-2-å®šä¹‰"><a href="#4-2-å®šä¹‰" class="headerlink" title="4.2 å®šä¹‰"></a>4.2 å®šä¹‰</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>person_info=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;tony&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>,<span class="string">&#x27;height&#x27;</span>:<span class="number">185.3</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-ä½¿ç”¨"><a href="#4-3-ä½¿ç”¨" class="headerlink" title="4.3 ä½¿ç”¨"></a>4.3 ä½¿ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1ã€å­—å…¸ç±»å‹æ˜¯ç”¨keyæ¥å¯¹åº”å€¼ï¼Œkeyå¯ä»¥å¯¹å€¼æœ‰æè¿°æ€§çš„åŠŸèƒ½ï¼Œé€šå¸¸ä¸ºå­—ç¬¦ä¸²ç±»å‹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>person_info=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;tony&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>,<span class="string">&#x27;height&#x27;</span>:<span class="number">185.3</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>person_info[<span class="string">&#x27;name&#x27;</span>]</span><br><span class="line"><span class="string">&#x27;tony&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>person_info[<span class="string">&#x27;age&#x27;</span>]</span><br><span class="line"><span class="number">18</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>person_info[<span class="string">&#x27;height&#x27;</span>]</span><br><span class="line"><span class="number">185.3</span></span><br><span class="line"><span class="comment"># 2ã€å­—å…¸å¯ä»¥åµŒå¥—ï¼ŒåµŒå¥—å–å€¼å¦‚ä¸‹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>students=[</span><br><span class="line"><span class="meta">... </span>&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;tony&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">38</span>,<span class="string">&#x27;hobbies&#x27;</span>:[<span class="string">&#x27;play&#x27;</span>,<span class="string">&#x27;sleep&#x27;</span>]&#125;,</span><br><span class="line"><span class="meta">... </span>&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;jack&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>,<span class="string">&#x27;hobbies&#x27;</span>:[<span class="string">&#x27;read&#x27;</span>,<span class="string">&#x27;sleep&#x27;</span>]&#125;,</span><br><span class="line"><span class="meta">... </span>&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;rose&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">58</span>,<span class="string">&#x27;hobbies&#x27;</span>:[<span class="string">&#x27;music&#x27;</span>,<span class="string">&#x27;read&#x27;</span>,<span class="string">&#x27;sleep&#x27;</span>]&#125;,</span><br><span class="line"><span class="meta">... </span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>students[<span class="number">1</span>][<span class="string">&#x27;hobbies&#x27;</span>][<span class="number">1</span>] <span class="comment">#å–ç¬¬äºŒä¸ªå­¦ç”Ÿçš„ç¬¬äºŒä¸ªçˆ±å¥½</span></span><br><span class="line"><span class="string">&#x27;sleep&#x27;</span></span><br></pre></td></tr></table></figure>



<h2 id="5-å¸ƒå°”bool"><a href="#5-å¸ƒå°”bool" class="headerlink" title="5 å¸ƒå°”bool"></a>5 å¸ƒå°”bool</h2><h3 id="5-1-ä½œç”¨"><a href="#5-1-ä½œç”¨" class="headerlink" title="5.1 ä½œç”¨"></a>5.1 ä½œç”¨</h3><p>ç”¨æ¥è®°å½•çœŸå‡è¿™ä¸¤ç§çŠ¶æ€</p>
<h3 id="5-2-å®šä¹‰"><a href="#5-2-å®šä¹‰" class="headerlink" title="5.2 å®šä¹‰"></a>5.2 å®šä¹‰</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>is_ok = <span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>is_ok = <span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h3 id="5-3-ä½¿ç”¨"><a href="#5-3-ä½¿ç”¨" class="headerlink" title="5.3 ä½¿ç”¨"></a>5.3 ä½¿ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">é€šå¸¸ç”¨æ¥å½“ä½œåˆ¤æ–­çš„æ¡ä»¶ï¼Œæˆ‘ä»¬å°†åœ¨<span class="keyword">if</span>åˆ¤æ–­ä¸­ç”¨åˆ°å®ƒ</span><br></pre></td></tr></table></figure>



<h2 id="6-é›†åˆ"><a href="#6-é›†åˆ" class="headerlink" title="6 é›†åˆ"></a>6 é›†åˆ</h2><h3 id="6-1-ä½œç”¨"><a href="#6-1-ä½œç”¨" class="headerlink" title="6.1 ä½œç”¨"></a>6.1 ä½œç”¨</h3><p>åœ¨Pythonä¸­ï¼Œé›†åˆï¼ˆsetï¼‰æ˜¯æ— åºçš„ã€å…ƒç´ ä¸é‡å¤çš„é›†åˆ</p>
<h3 id="6-2-å®šä¹‰"><a href="#6-2-å®šä¹‰" class="headerlink" title="6.2 å®šä¹‰"></a>6.2 å®šä¹‰</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">set01 = &#123;<span class="string">&#x27;num1&#x27;</span>, <span class="string">&#x27;num2&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-3-ä½¿ç”¨"><a href="#6-3-ä½¿ç”¨" class="headerlink" title="6.3 ä½¿ç”¨"></a>6.3 ä½¿ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>admins = &#123;<span class="string">&#x27;Justin&#x27;</span>, <span class="string">&#x27;caterpillar&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>users = &#123;<span class="string">&#x27;momor&#x27;</span>, <span class="string">&#x27;hamini&#x27;</span>, <span class="string">&#x27;Justin&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;Justin&#x27;</span> <span class="keyword">in</span> admins	<span class="comment"># ä½¿ç”¨inåˆ¤æ–­å…ƒç´ åœ¨é›†åˆ</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>admins &amp; users</span><br><span class="line">&#123;<span class="string">&#x27;Justin&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>admins | users</span><br><span class="line">&#123;<span class="string">&#x27;hamini&#x27;</span>, <span class="string">&#x27;caterpillar&#x27;</span>, <span class="string">&#x27;Justin&#x27;</span>, <span class="string">&#x27;momor&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>admins - users</span><br><span class="line">&#123;<span class="string">&#x27;caterpillar&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>admins ^ users</span><br><span class="line">&#123;<span class="string">&#x27;hamini&#x27;</span>, <span class="string">&#x27;caterpillar&#x27;</span>, <span class="string">&#x27;momor&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>admins &gt; users</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>admins &lt; users</span><br><span class="line"><span class="literal">False</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>



<h2 id="7-å…ƒç»„"><a href="#7-å…ƒç»„" class="headerlink" title="7 å…ƒç»„"></a>7 å…ƒç»„</h2><h3 id="7-1-ä½œç”¨"><a href="#7-1-ä½œç”¨" class="headerlink" title="7.1 ä½œç”¨"></a>7.1 ä½œç”¨</h3><p><code>tuple</code> å¯ä»¥åšä»€éº¼å‘¢ï¼Ÿæœ‰æ™‚æƒ³è¦å‚³å›ä¸€çµ„ç›¸é—œçš„å€¼ï¼Œåˆä¸æƒ³ç‰¹åœ°å®šç¾©ä¸€å€‹å‹æ…‹ï¼Œå°±æœƒä½¿ç”¨ <code>tuple</code>ï¼Œåƒæ˜¯ <code>(1, &#39;Justin&#39;, True)</code>ï¼Œä¹Ÿè¨±å°±ä»£è¡¨äº†å¾è³‡æ–™åº«ä¸­è‡¨æ™‚æ’ˆå‡ºä¾†çš„ä¸€ç­†è³‡æ–™ã€‚</p>
<h3 id="7-2-å®šä¹‰"><a href="#7-2-å®šä¹‰" class="headerlink" title="7.2 å®šä¹‰"></a>7.2 å®šä¹‰</h3><p><code>tuple</code> å°±ç«‹åå°±æ— æ³•å˜åŠ¨ï¼Œæƒ³è¦å»ºç«‹ <code>tuple</code>ï¼Œåªè¦åœ¨æŸä¸ªå€¼åé¢åŠ ä¸Šã€Œ,ã€å°±å¯ä»¥ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span>,</span><br><span class="line">(<span class="number">10</span>,)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>,</span><br><span class="line">(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>acct = <span class="number">1</span>, <span class="string">&#x27;Justin&#x27;</span>, <span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>acct</span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;Justin&#x27;</span>, <span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(acct)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">tuple</span>&#x27;&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-3-ä½¿ç”¨"><a href="#7-3-ä½¿ç”¨" class="headerlink" title="7.3 ä½¿ç”¨"></a>7.3 ä½¿ç”¨</h3>]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>06-ç”¨æˆ·äº¤äº’ä¸è¿ç®—ç¬¦</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/06_Python%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8%E4%B9%8B%E7%94%A8%E6%88%B7%E4%BA%A4%E4%BA%92%E3%80%81%E8%BF%90%E7%AE%97%E7%AC%A6/</url>
    <content><![CDATA[<h2 id="ä¸€-ç¨‹åºä¸ç”¨æˆ·äº¤äº’"><a href="#ä¸€-ç¨‹åºä¸ç”¨æˆ·äº¤äº’" class="headerlink" title="ä¸€ ç¨‹åºä¸ç”¨æˆ·äº¤äº’"></a>ä¸€ ç¨‹åºä¸ç”¨æˆ·äº¤äº’</h2><h2 id="1-1ã€ä»€ä¹ˆæ˜¯ä¸ç”¨æˆ·äº¤äº’"><a href="#1-1ã€ä»€ä¹ˆæ˜¯ä¸ç”¨æˆ·äº¤äº’" class="headerlink" title="1.1ã€ä»€ä¹ˆæ˜¯ä¸ç”¨æˆ·äº¤äº’"></a>1.1ã€ä»€ä¹ˆæ˜¯ä¸ç”¨æˆ·äº¤äº’</h2><p>ç”¨æˆ·äº¤äº’å°±æ˜¯äººå¾€è®¡ç®—æœºä¸­input&#x2F;è¾“å…¥æ•°æ®ï¼Œè®¡ç®—æœºprint&#x2F;è¾“å‡ºç»“æœ</p>
<h2 id="1-2ã€ä¸ºä»€ä¹ˆè¦ä¸ç”¨æˆ·äº¤äº’ï¼Ÿ"><a href="#1-2ã€ä¸ºä»€ä¹ˆè¦ä¸ç”¨æˆ·äº¤äº’ï¼Ÿ" class="headerlink" title="1.2ã€ä¸ºä»€ä¹ˆè¦ä¸ç”¨æˆ·äº¤äº’ï¼Ÿ"></a>1.2ã€ä¸ºä»€ä¹ˆè¦ä¸ç”¨æˆ·äº¤äº’ï¼Ÿ</h2><p><img src="https://pic2.zhimg.com/80/v2-f5f08a362ab78e8bc5ccce6bb1d3603d_720w.jpg" alt="img"></p>
<p>ä¸ºäº†è®©è®¡ç®—æœºèƒ½å¤Ÿåƒäººä¸€æ ·ä¸ç”¨æˆ·æ²Ÿé€šäº¤æµ</p>
<p>æ¯”å¦‚ï¼Œè¿‡å»æˆ‘ä»¬å»é“¶è¡Œå–é’±ï¼Œç”¨æˆ·éœ€è¦æŠŠå¸å·å¯†ç å‘Šè¯‰æŸœå‘˜ï¼Œè€Œç°åœ¨ï¼ŒæŸœå‘˜è¢«ATMæœºå–ä»£ï¼ŒATMæœºå°±æ˜¯ä¸€å°è®¡ç®—æœºï¼Œæ‰€ä»¥ç”¨æˆ·åŒæ ·éœ€è¦å°†å¸å·å¯†ç å‘Šè¯‰è®¡ç®—æœºï¼Œäºæ˜¯æˆ‘ä»¬çš„ç¨‹åºä¸­å¿…é¡»æœ‰ç›¸åº”çš„æœºåˆ¶æ¥æ§åˆ¶è®¡ç®—æœºæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œå¹¶ä¸”è¾“å‡ºç»“æœ</p>
<h2 id="1-3ã€å¦‚ä½•ä¸ç”¨æˆ·äº¤äº’"><a href="#1-3ã€å¦‚ä½•ä¸ç”¨æˆ·äº¤äº’" class="headerlink" title="1.3ã€å¦‚ä½•ä¸ç”¨æˆ·äº¤äº’"></a>1.3ã€å¦‚ä½•ä¸ç”¨æˆ·äº¤äº’</h2><p><img src="https://pic2.zhimg.com/80/v2-d3247fc02443c3095673598cb86ed189_720w.jpg" alt="img"></p>
<p>äº¤äº’çš„æœ¬è´¨å°±æ˜¯è¾“å…¥ã€è¾“å‡º</p>
<h3 id="1-3-1-è¾“å…¥input"><a href="#1-3-1-è¾“å…¥input" class="headerlink" title="1.3.1 è¾“å…¥input:"></a>1.3.1 è¾“å…¥input:</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨python3ä¸­inputåŠŸèƒ½ä¼šç­‰å¾…ç”¨æˆ·çš„è¾“å…¥ï¼Œç”¨æˆ·è¾“å…¥ä»»ä½•å†…å®¹ï¼Œéƒ½å­˜æˆå­—ç¬¦ä¸²ç±»å‹ï¼Œç„¶åèµ‹å€¼ç»™ç­‰å·å·¦è¾¹çš„å˜é‡å</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>username=<span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥æ‚¨çš„ç”¨æˆ·åï¼š&#x27;</span>) </span><br><span class="line">è¯·è¾“å…¥æ‚¨çš„ç”¨æˆ·åï¼šjack <span class="comment"># username = &quot;jack&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>password=<span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥æ‚¨çš„å¯†ç ï¼š&#x27;</span>) </span><br><span class="line">è¯·è¾“å…¥æ‚¨çš„å¯†ç ï¼š<span class="number">123</span> <span class="comment"># password = &quot;123&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># äº†è§£çŸ¥è¯†ï¼š</span></span><br><span class="line"><span class="comment"># 1ã€åœ¨python2ä¸­å­˜åœ¨ä¸€ä¸ªraw_inputåŠŸèƒ½ä¸python3ä¸­çš„inputåŠŸèƒ½ä¸€æ¨¡ä¸€æ ·</span></span><br><span class="line"><span class="comment"># 2ã€åœ¨python2ä¸­è¿˜å­˜åœ¨ä¸€ä¸ªinputåŠŸèƒ½ï¼Œéœ€è¦ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ˜ç¡®çš„æ•°æ®ç±»å‹ï¼Œè¾“å…¥ä»€ä¹ˆç±»å‹å°±å­˜æˆä»€ä¹ˆç±»å‹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l=<span class="built_in">input</span>(<span class="string">&#x27;è¾“å…¥ä»€ä¹ˆç±»å‹å°±å­˜æˆä»€ä¹ˆç±»å‹: &#x27;</span>)</span><br><span class="line">è¾“å…¥ä»€ä¹ˆç±»å‹å°±å­˜æˆä»€ä¹ˆç±»å‹: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(l)</span><br><span class="line">&lt;<span class="built_in">type</span> <span class="string">&#x27;list&#x27;</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-2-è¾“å‡ºprint"><a href="#1-3-2-è¾“å‡ºprint" class="headerlink" title="1.3.2 è¾“å‡ºprint:"></a>1.3.2 è¾“å‡ºprint:</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;hello world&#x27;</span>)  <span class="comment"># åªè¾“å‡ºä¸€ä¸ªå€¼</span></span><br><span class="line">hello world</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;first&#x27;</span>,<span class="string">&#x27;second&#x27;</span>,<span class="string">&#x27;third&#x27;</span>)  <span class="comment"># ä¸€æ¬¡æ€§è¾“å‡ºå¤šä¸ªå€¼ï¼Œå€¼ç”¨é€—å·éš”å¼€</span></span><br><span class="line">first second third</span><br><span class="line"></span><br><span class="line"><span class="comment"># é»˜è®¤printåŠŸèƒ½æœ‰ä¸€ä¸ªendå‚æ•°ï¼Œè¯¥å‚æ•°çš„é»˜è®¤å€¼ä¸º&quot;\n&quot;(ä»£è¡¨æ¢è¡Œ)ï¼Œå¯ä»¥å°†endå‚æ•°çš„å€¼æ”¹æˆä»»æ„å…¶å®ƒå­—ç¬¦</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;aaaa&quot;</span>,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;bbbb&quot;</span>,end=<span class="string">&#x27;&amp;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;cccc&quot;</span>,end=<span class="string">&#x27;@&#x27;</span>)</span><br><span class="line"><span class="comment">#æ•´ä½“è¾“å‡ºç»“æœä¸ºï¼šaaaabbbb&amp;cccc@</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-3-è¾“å‡ºä¹‹æ ¼å¼åŒ–è¾“å‡º"><a href="#1-3-3-è¾“å‡ºä¹‹æ ¼å¼åŒ–è¾“å‡º" class="headerlink" title="1.3.3 è¾“å‡ºä¹‹æ ¼å¼åŒ–è¾“å‡º"></a>1.3.3 è¾“å‡ºä¹‹æ ¼å¼åŒ–è¾“å‡º</h3><h3 id="1-ä»€ä¹ˆæ˜¯æ ¼å¼åŒ–è¾“å‡ºï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯æ ¼å¼åŒ–è¾“å‡ºï¼Ÿ" class="headerlink" title="(1)ä»€ä¹ˆæ˜¯æ ¼å¼åŒ–è¾“å‡ºï¼Ÿ"></a>(1)ä»€ä¹ˆæ˜¯æ ¼å¼åŒ–è¾“å‡ºï¼Ÿ</h3><p>æŠŠä¸€æ®µå­—ç¬¦ä¸²é‡Œé¢çš„æŸäº›å†…å®¹æ›¿æ¢æ‰ä¹‹åå†è¾“å‡ºï¼Œå°±æ˜¯æ ¼å¼åŒ–è¾“å‡ºã€‚</p>
<h3 id="2-ä¸ºä»€ä¹ˆè¦æ ¼å¼åŒ–è¾“å‡ºï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆè¦æ ¼å¼åŒ–è¾“å‡ºï¼Ÿ" class="headerlink" title="(2)ä¸ºä»€ä¹ˆè¦æ ¼å¼åŒ–è¾“å‡ºï¼Ÿ"></a>(2)ä¸ºä»€ä¹ˆè¦æ ¼å¼åŒ–è¾“å‡ºï¼Ÿ</h3><p>æˆ‘ä»¬ç»å¸¸ä¼šè¾“å‡ºå…·æœ‰æŸç§å›ºå®šæ ¼å¼çš„å†…å®¹ï¼Œæ¯”å¦‚ï¼šâ€™äº²çˆ±çš„xxxä½ å¥½ï¼ä½ xxxæœˆçš„è¯è´¹æ˜¯xxxï¼Œä½™é¢æ˜¯xxxâ€˜ï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å°†xxxæ›¿æ¢ä¸ºå…·ä½“çš„å†…å®¹ã€‚</p>
<p><img src="https://pic4.zhimg.com/80/v2-93a076f4317dfc4d18eeb0e4bd4ae21f_720w.jpg" alt="img"></p>
<h3 id="3-å¦‚ä½•æ ¼å¼åŒ–è¾“å‡ºï¼Ÿ"><a href="#3-å¦‚ä½•æ ¼å¼åŒ–è¾“å‡ºï¼Ÿ" class="headerlink" title="(3)å¦‚ä½•æ ¼å¼åŒ–è¾“å‡ºï¼Ÿ"></a>(3)å¦‚ä½•æ ¼å¼åŒ–è¾“å‡ºï¼Ÿ</h3><p>è¿™å°±ç”¨åˆ°äº†å ä½ç¬¦ï¼Œå¦‚ï¼š%sã€%dï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># %så ä½ç¬¦ï¼šå¯ä»¥æ¥æ”¶ä»»æ„ç±»å‹çš„å€¼</span></span><br><span class="line"><span class="comment"># %då ä½ç¬¦ï¼šåªèƒ½æ¥æ”¶æ•°å­—</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&#x27;äº²çˆ±çš„%sä½ å¥½ï¼ä½ %sæœˆçš„è¯è´¹æ˜¯%dï¼Œä½™é¢æ˜¯%d&#x27;</span> %(<span class="string">&#x27;tony&#x27;</span>,<span class="number">12</span>,<span class="number">103</span>,<span class="number">11</span>))</span><br><span class="line">äº²çˆ±çš„tonyä½ å¥½ï¼ä½ <span class="number">12</span>æœˆçš„è¯è´¹æ˜¯<span class="number">103</span>ï¼Œä½™é¢æ˜¯<span class="number">11</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»ƒä¹ 1ï¼šæ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼Œæ‰“å°æˆæŒ‡å®šæ ¼å¼</span></span><br><span class="line">name = <span class="built_in">input</span>(<span class="string">&#x27;your name: &#x27;</span>)</span><br><span class="line">age = <span class="built_in">input</span>(<span class="string">&#x27;your age: &#x27;</span>) <span class="comment">#ç”¨æˆ·è¾“å…¥18,ä¼šå­˜æˆå­—ç¬¦ä¸²18,æ— æ³•ä¼ ç»™%d</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;My name is %s,my age is %s&#x27;</span> %(name,age))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»ƒä¹ 2ï¼šç”¨æˆ·è¾“å…¥å§“åã€å¹´é¾„ã€å·¥ä½œã€çˆ±å¥½ ï¼Œç„¶åæ‰“å°æˆä»¥ä¸‹æ ¼å¼</span></span><br><span class="line">------------ info of Tony -----------</span><br><span class="line">Name  : Tony</span><br><span class="line">Age   : <span class="number">22</span></span><br><span class="line">Sex   : male</span><br><span class="line">Job   : Teacher </span><br><span class="line">------------- end -----------------</span><br></pre></td></tr></table></figure>

<h2 id="äºŒ-åŸºæœ¬è¿ç®—ç¬¦"><a href="#äºŒ-åŸºæœ¬è¿ç®—ç¬¦" class="headerlink" title="äºŒ åŸºæœ¬è¿ç®—ç¬¦"></a>äºŒ åŸºæœ¬è¿ç®—ç¬¦</h2><h2 id="2-1-ç®—æœ¯è¿ç®—ç¬¦"><a href="#2-1-ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="2.1 ç®—æœ¯è¿ç®—ç¬¦"></a>2.1 ç®—æœ¯è¿ç®—ç¬¦</h2><p> pythonæ”¯æŒçš„ç®—æ•°è¿ç®—ç¬¦ä¸æ•°å­¦ä¸Šè®¡ç®—çš„ç¬¦å·ä½¿ç”¨æ˜¯ä¸€è‡´çš„ï¼Œæˆ‘ä»¬ä»¥x&#x3D;9ï¼Œy&#x3D;2ä¸ºä¾‹æ¥ä¾æ¬¡ä»‹ç»å®ƒä»¬</p>
<p><img src="https://pic3.zhimg.com/80/v2-1e691dd00888ffbc6a6a91fd6b871fb2_720w.jpg" alt="img"></p>
<h2 id="2-2-æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#2-2-æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="2.2 æ¯”è¾ƒè¿ç®—ç¬¦"></a>2.2 æ¯”è¾ƒè¿ç®—ç¬¦</h2><p> æ¯”è¾ƒè¿ç®—ç”¨æ¥å¯¹ä¸¤ä¸ªå€¼è¿›è¡Œæ¯”è¾ƒï¼Œè¿”å›çš„æ˜¯å¸ƒå°”å€¼Trueæˆ–Falseï¼Œæˆ‘ä»¬ä»¥x&#x3D;9ï¼Œy&#x3D;2ä¸ºä¾‹æ¥ä¾æ¬¡ä»‹ç»å®ƒä»¬</p>
<p><img src="https://pic2.zhimg.com/80/v2-4f35183b1ef049ae8e0dff21aa18bd35_720w.jpg" alt="img"></p>
<h2 id="2-3-èµ‹å€¼è¿ç®—ç¬¦"><a href="#2-3-èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="2.3 èµ‹å€¼è¿ç®—ç¬¦"></a>2.3 èµ‹å€¼è¿ç®—ç¬¦</h2><p> pythonè¯­æ³•ä¸­é™¤äº†æœ‰&#x3D;å·è¿™ç§ç®€å•çš„èµ‹å€¼è¿ç®—å¤–ï¼Œè¿˜æ”¯æŒå¢é‡èµ‹å€¼ã€é“¾å¼èµ‹å€¼ã€äº¤å‰èµ‹å€¼ã€è§£å‹èµ‹å€¼ï¼Œè¿™äº›èµ‹å€¼è¿ç®—ç¬¦å­˜åœ¨çš„æ„ä¹‰éƒ½æ˜¯ä¸ºäº†è®©æˆ‘ä»¬çš„ä»£ç çœ‹èµ·æ¥æ›´åŠ ç²¾ç®€ã€‚æˆ‘ä»¬ä»¥x&#x3D;9ï¼Œy&#x3D;2ä¸ºä¾‹å…ˆæ¥ä»‹ç»ä¸€ä¸‹å¢é‡èµ‹å€¼</p>
<h3 id="2-3-1-å¢é‡èµ‹å€¼"><a href="#2-3-1-å¢é‡èµ‹å€¼" class="headerlink" title="2.3.1 å¢é‡èµ‹å€¼"></a>2.3.1 å¢é‡èµ‹å€¼</h3><p><img src="https://pic4.zhimg.com/80/v2-b70005b039398a63c6e28fe7d31ab147_720w.jpg" alt="img"></p>
<h3 id="2-3-2-é“¾å¼èµ‹å€¼"><a href="#2-3-2-é“¾å¼èµ‹å€¼" class="headerlink" title="2.3.2 é“¾å¼èµ‹å€¼"></a>2.3.2 é“¾å¼èµ‹å€¼</h3><p>å¦‚æœæˆ‘ä»¬æƒ³æŠŠåŒä¸€ä¸ªå€¼åŒæ—¶èµ‹å€¼ç»™å¤šä¸ªå˜é‡åï¼Œå¯ä»¥è¿™ä¹ˆåš</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>z=<span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y=z</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=y</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x,y,z</span><br><span class="line">(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<p>é“¾å¼èµ‹å€¼æŒ‡çš„æ˜¯å¯ä»¥ç”¨ä¸€è¡Œä»£ç æå®šè¿™ä»¶äº‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=y=z=<span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x,y,z</span><br><span class="line">(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-5e10781fb6adb37f49a50623547bd2be_720w.jpg" alt="img"></p>
<h3 id="2-3-3-äº¤å‰èµ‹å€¼"><a href="#2-3-3-äº¤å‰èµ‹å€¼" class="headerlink" title="2.3.3 äº¤å‰èµ‹å€¼"></a>2.3.3 äº¤å‰èµ‹å€¼</h3><p>æˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªå˜é‡mä¸n</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>m=<span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>n=<span class="number">20</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬æƒ³å°†mä¸nçš„å€¼äº¤æ¢è¿‡æ¥ï¼Œå¯ä»¥è¿™ä¹ˆåš</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>temp=m</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m=n</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>n=temp</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m,n</span><br><span class="line">(<span class="number">20</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<p>äº¤å‰èµ‹å€¼æŒ‡çš„æ˜¯ä¸€è¡Œä»£ç å¯ä»¥æå®šè¿™ä»¶äº‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>m=<span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>n=<span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m,n=n,m <span class="comment"># äº¤å‰èµ‹å€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>m,n</span><br><span class="line">(<span class="number">20</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-32d5097d72f9a856c249dc65d94ae965_720w.jpg" alt="img"></p>
<h3 id="2-3-4-è§£å‹èµ‹å€¼"><a href="#2-3-4-è§£å‹èµ‹å€¼" class="headerlink" title="2.3.4 è§£å‹èµ‹å€¼"></a>2.3.4 è§£å‹èµ‹å€¼</h3><p>å¦‚æœæˆ‘ä»¬æƒ³æŠŠåˆ—è¡¨ä¸­çš„å¤šä¸ªå€¼å–å‡ºæ¥ä¾æ¬¡èµ‹å€¼ç»™å¤šä¸ªå˜é‡åï¼Œå¯ä»¥è¿™ä¹ˆåš</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>nums=[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=nums[<span class="number">0</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=nums[<span class="number">1</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c=nums[<span class="number">2</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d=nums[<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e=nums[<span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,c,d,e</span><br><span class="line">(<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>)</span><br></pre></td></tr></table></figure>

<p>è§£å‹èµ‹å€¼æŒ‡çš„æ˜¯ä¸€è¡Œä»£ç å¯ä»¥æå®šè¿™ä»¶äº‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,c,d,e=nums <span class="comment"># numsåŒ…å«å¤šä¸ªå€¼ï¼Œå°±å¥½æ¯”ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œè§£å‹èµ‹å€¼å› æ­¤å¾—å</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,c,d,e</span><br><span class="line">(<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-5136e82ba7ecce9e31b751b9e3075c5e_720w.jpg" alt="img"></p>
<p>æ³¨æ„ï¼Œä¸Šè¿°è§£å‹èµ‹å€¼ï¼Œç­‰å·å·¦è¾¹çš„å˜é‡åä¸ªæ•°å¿…é¡»ä¸å³é¢åŒ…å«å€¼çš„ä¸ªæ•°ç›¸åŒ,å¦åˆ™ä¼šæŠ¥é”™</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€å˜é‡åå°‘äº†</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b=nums</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: too many values to unpack (expected <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€å˜é‡åå¤šäº†</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,c,d,e,f=nums</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: <span class="keyword">not</span> enough values to unpack (expected <span class="number">6</span>, got <span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<p>ä½†å¦‚æœæˆ‘ä»¬åªæƒ³å–å¤´å°¾çš„å‡ ä¸ªå€¼ï¼Œå¯ä»¥ç”¨*_åŒ¹é…</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b,*_=nums</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a,b</span><br><span class="line">(<span class="number">11</span>, <span class="number">22</span>)</span><br></pre></td></tr></table></figure>

<p>psï¼šå­—ç¬¦ä¸²ã€å­—å…¸ã€å…ƒç»„ã€é›†åˆç±»å‹éƒ½æ”¯æŒè§£å‹èµ‹å€¼</p>
<p><img src="https://pic1.zhimg.com/80/v2-4d0554fbbd86747cc7aab9fcc5d0ebd8_720w.jpg" alt="img"></p>
<h2 id="2-4-é€»è¾‘è¿ç®—ç¬¦"><a href="#2-4-é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="2.4 é€»è¾‘è¿ç®—ç¬¦"></a>2.4 é€»è¾‘è¿ç®—ç¬¦</h2><p> é€»è¾‘è¿ç®—ç¬¦ç”¨äºè¿æ¥å¤šä¸ªæ¡ä»¶ï¼Œè¿›è¡Œå…³è”åˆ¤æ–­ï¼Œä¼šè¿”å›å¸ƒå°”å€¼Trueæˆ–False</p>
<p><img src="https://pic2.zhimg.com/80/v2-e4c3abe3eeb2546d6d093f1e5d690055_720w.jpg" alt="img"></p>
<h3 id="2-4-1-è¿ç»­å¤šä¸ªand"><a href="#2-4-1-è¿ç»­å¤šä¸ªand" class="headerlink" title="2.4.1 è¿ç»­å¤šä¸ªand"></a>2.4.1 è¿ç»­å¤šä¸ªand</h3><p>å¯ä»¥ç”¨andè¿æ¥å¤šä¸ªæ¡ä»¶ï¼Œä¼šæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºä¾æ¬¡åˆ¤æ–­ï¼Œä¸€æ—¦æŸä¸€ä¸ªæ¡ä»¶ä¸ºFalseï¼Œåˆ™æ— éœ€å†å¾€å³åˆ¤æ–­ï¼Œå¯ä»¥ç«‹å³åˆ¤å®šæœ€ç»ˆç»“æœå°±ä¸ºFalseï¼Œåªæœ‰åœ¨æ‰€æœ‰æ¡ä»¶çš„ç»“æœéƒ½ä¸ºTrueçš„æƒ…å†µä¸‹ï¼Œæœ€ç»ˆç»“æœæ‰ä¸ºTrueã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span> != <span class="number">1</span> <span class="keyword">and</span> <span class="literal">True</span> <span class="keyword">and</span> <span class="number">3</span> &gt; <span class="number">2</span> <span class="comment"># åˆ¤æ–­å®Œç¬¬äºŒä¸ªæ¡ä»¶ï¼Œå°±ç«‹å³ç»“æŸï¼Œå¾—çš„æœ€ç»ˆç»“æœä¸ºFalse</span></span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-2-è¿ç»­å¤šä¸ªor"><a href="#2-4-2-è¿ç»­å¤šä¸ªor" class="headerlink" title="2.4.2 è¿ç»­å¤šä¸ªor"></a>2.4.2 è¿ç»­å¤šä¸ªor</h3><p>å¯ä»¥ç”¨orè¿æ¥å¤šä¸ªæ¡ä»¶ï¼Œä¼šæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºä¾æ¬¡åˆ¤æ–­ï¼Œä¸€æ—¦æŸä¸€ä¸ªæ¡ä»¶ä¸ºTrueï¼Œåˆ™æ— éœ€å†å¾€å³åˆ¤æ–­ï¼Œå¯ä»¥ç«‹å³åˆ¤å®šæœ€ç»ˆç»“æœå°±ä¸ºTrueï¼Œåªæœ‰åœ¨æ‰€æœ‰æ¡ä»¶çš„ç»“æœéƒ½ä¸ºFalseçš„æƒ…å†µä¸‹ï¼Œæœ€ç»ˆç»“æœæ‰ä¸ºFalse</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">2</span> &gt; <span class="number">1</span> <span class="keyword">or</span> <span class="number">1</span> != <span class="number">1</span> <span class="keyword">or</span> <span class="literal">True</span> <span class="keyword">or</span> <span class="number">3</span> &gt; <span class="number">2</span> <span class="comment"># åˆ¤æ–­å®Œç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œå°±ç«‹å³ç»“æŸï¼Œå¾—çš„æœ€ç»ˆç»“æœä¸ºTrue</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-3-ä¼˜å…ˆçº§not-gt-and-gt-or"><a href="#2-4-3-ä¼˜å…ˆçº§not-gt-and-gt-or" class="headerlink" title="2.4.3 ä¼˜å…ˆçº§not&gt;and&gt;or"></a>2.4.3 ä¼˜å…ˆçº§not&gt;and&gt;or</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€ä¸‰è€…çš„ä¼˜å…ˆçº§å…³ç³»ï¼šnot&gt;and&gt;orï¼ŒåŒä¸€ä¼˜å…ˆçº§é»˜è®¤ä»å·¦å¾€å³è®¡ç®—ã€‚</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span>&gt;<span class="number">4</span> <span class="keyword">and</span> <span class="number">4</span>&gt;<span class="number">3</span> <span class="keyword">or</span> <span class="number">1</span>==<span class="number">3</span> <span class="keyword">and</span> <span class="string">&#x27;x&#x27;</span> == <span class="string">&#x27;x&#x27;</span> <span class="keyword">or</span> <span class="number">3</span> &gt;<span class="number">3</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€æœ€å¥½ä½¿ç”¨æ‹¬å·æ¥åŒºåˆ«ä¼˜å…ˆçº§ï¼Œå…¶å®æ„ä¹‰ä¸ä¸Šé¢çš„ä¸€æ ·</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">åŸç†ä¸ºï¼š</span></span><br><span class="line"><span class="string">(1) notçš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œå°±æ˜¯æŠŠç´§è·Ÿå…¶åçš„é‚£ä¸ªæ¡ä»¶ç»“æœå–åï¼Œæ‰€ä»¥notä¸ç´§è·Ÿå…¶åçš„æ¡ä»¶ä¸å¯åˆ†å‰²</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(2) å¦‚æœè¯­å¥ä¸­å…¨éƒ¨æ˜¯ç”¨andè¿æ¥ï¼Œæˆ–è€…å…¨éƒ¨ç”¨orè¿æ¥ï¼Œé‚£ä¹ˆæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºä¾æ¬¡è®¡ç®—å³å¯</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(3) å¦‚æœè¯­å¥ä¸­æ—¢æœ‰andä¹Ÿæœ‰orï¼Œé‚£ä¹ˆå…ˆç”¨æ‹¬å·æŠŠandçš„å·¦å³ä¸¤ä¸ªæ¡ä»¶ç»™æ‹¬èµ·æ¥ï¼Œç„¶åå†è¿›è¡Œè¿ç®—</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">3</span>&gt;<span class="number">4</span> <span class="keyword">and</span> <span class="number">4</span>&gt;<span class="number">3</span>) <span class="keyword">or</span> (<span class="number">1</span>==<span class="number">3</span> <span class="keyword">and</span> <span class="string">&#x27;x&#x27;</span> == <span class="string">&#x27;x&#x27;</span>) <span class="keyword">or</span> <span class="number">3</span> &gt;<span class="number">3</span></span><br><span class="line"><span class="literal">False</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">#3ã€çŸ­è·¯è¿ç®—ï¼šé€»è¾‘è¿ç®—çš„ç»“æœä¸€æ—¦å¯ä»¥ç¡®å®šï¼Œé‚£ä¹ˆå°±ä»¥å½“å‰å¤„è®¡ç®—åˆ°çš„å€¼ä½œä¸ºæœ€ç»ˆç»“æœè¿”å›</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">10</span> <span class="keyword">and</span> <span class="number">0</span> <span class="keyword">or</span> <span class="string">&#x27;&#x27;</span> <span class="keyword">and</span> <span class="number">0</span> <span class="keyword">or</span> <span class="string">&#x27;abc&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;egon&#x27;</span> == <span class="string">&#x27;dsb&#x27;</span> <span class="keyword">and</span> <span class="number">333</span> <span class="keyword">or</span> <span class="number">10</span> &gt; <span class="number">4</span></span><br><span class="line">æˆ‘ä»¬ç”¨æ‹¬å·æ¥æ˜ç¡®ä¸€ä¸‹ä¼˜å…ˆçº§</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(<span class="number">10</span> <span class="keyword">and</span> <span class="number">0</span>) <span class="keyword">or</span> (<span class="string">&#x27;&#x27;</span> <span class="keyword">and</span> <span class="number">0</span>) <span class="keyword">or</span> <span class="string">&#x27;abc&#x27;</span> <span class="keyword">or</span> (<span class="string">&#x27;egon&#x27;</span> == <span class="string">&#x27;dsb&#x27;</span> <span class="keyword">and</span> <span class="number">333</span>) <span class="keyword">or</span> <span class="number">10</span> &gt; <span class="number">4</span></span><br><span class="line">çŸ­è·¯ï¼š       <span class="number">0</span>      <span class="string">&#x27;&#x27;</span>            <span class="string">&#x27;abc&#x27;</span>                    </span><br><span class="line">            å‡     å‡              çœŸ</span><br><span class="line"></span><br><span class="line">è¿”å›ï¼š                            <span class="string">&#x27;abc&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#4ã€çŸ­è·¯è¿ç®—é¢è¯•é¢˜ï¼š</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> <span class="keyword">or</span> <span class="number">3</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> <span class="keyword">and</span> <span class="number">3</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0</span> <span class="keyword">and</span> <span class="number">2</span> <span class="keyword">and</span> <span class="number">1</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0</span> <span class="keyword">and</span> <span class="number">2</span> <span class="keyword">or</span> <span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0</span> <span class="keyword">and</span> <span class="number">2</span> <span class="keyword">or</span> <span class="number">1</span> <span class="keyword">or</span> <span class="number">4</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0</span> <span class="keyword">or</span> <span class="literal">False</span> <span class="keyword">and</span> <span class="number">1</span></span><br><span class="line"><span class="literal">False</span> </span><br></pre></td></tr></table></figure>

<h2 id="2-5-æˆå‘˜è¿ç®—ç¬¦"><a href="#2-5-æˆå‘˜è¿ç®—ç¬¦" class="headerlink" title="2.5 æˆå‘˜è¿ç®—ç¬¦"></a>2.5 æˆå‘˜è¿ç®—ç¬¦</h2><p><img src="https://pic1.zhimg.com/80/v2-beecc7750f15f6600edce6b64ee41c18_720w.jpg" alt="img"></p>
<p>æ³¨æ„ï¼šè™½ç„¶ä¸‹è¿°ä¸¤ç§åˆ¤æ–­å¯ä»¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœï¼Œä½†æˆ‘ä»¬æ¨èä½¿ç”¨ç¬¬äºŒç§æ ¼å¼ï¼Œå› ä¸ºnot inè¯­ä¹‰æ›´åŠ æ˜ç¡®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">not</span> <span class="string">&#x27;lili&#x27;</span> <span class="keyword">in</span> [<span class="string">&#x27;jack&#x27;</span>,<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;robin&#x27;</span>]</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;lili&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">&#x27;jack&#x27;</span>,<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;robin&#x27;</span>]</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h2 id="2-6-èº«ä»½è¿ç®—ç¬¦"><a href="#2-6-èº«ä»½è¿ç®—ç¬¦" class="headerlink" title="2.6 èº«ä»½è¿ç®—ç¬¦"></a>2.6 èº«ä»½è¿ç®—ç¬¦</h2><p><img src="https://pic3.zhimg.com/80/v2-7a653e8151847e64a6b97d6488e51766_720w.jpg" alt="img"></p>
<p>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼š&#x3D;&#x3D;åŒç­‰å·æ¯”è¾ƒçš„æ˜¯valueæ˜¯å¦ç›¸ç­‰ï¼Œè€Œisæ¯”è¾ƒçš„æ˜¯idæ˜¯å¦ç›¸ç­‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. idç›¸åŒï¼Œå†…å­˜åœ°å€å¿…å®šç›¸åŒï¼Œæ„å‘³ç€typeå’Œvalueå¿…å®šç›¸åŒ</span></span><br><span class="line"><span class="comment">#2. valueç›¸åŒtypeè‚¯å®šç›¸åŒï¼Œä½†idå¯èƒ½ä¸åŒ,å¦‚ä¸‹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=<span class="string">&#x27;Info Tony:18&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>y=<span class="string">&#x27;Info Tony:18&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(x),<span class="built_in">id</span>(y) <span class="comment"># xä¸yçš„idä¸åŒï¼Œä½†æ˜¯äºŒè€…çš„å€¼ç›¸åŒ</span></span><br><span class="line">(<span class="number">4327422640</span>, <span class="number">4327422256</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x == y <span class="comment"># ç­‰å·æ¯”è¾ƒçš„æ˜¯value</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(x),<span class="built_in">type</span>(y) <span class="comment"># å€¼ç›¸åŒtypeè‚¯å®šç›¸åŒ</span></span><br><span class="line">(&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">str</span>&#x27;&gt;, &lt;<span class="title">class</span> &#x27;<span class="title">str</span>&#x27;&gt;)</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">x</span> <span class="title">is</span> <span class="title">y</span> # <span class="title">is</span>æ¯”è¾ƒçš„æ˜¯<span class="title">id</span>ï¼Œ<span class="title">x</span>ä¸<span class="title">y</span>çš„å€¼ç›¸ç­‰ä½†<span class="title">id</span>å¯ä»¥ä¸åŒ</span></span><br><span class="line"><span class="class"><span class="title">False</span></span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-4b1be1c9b8e933ac37e47cf14f58503b_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p>1ã€ä¸ç”¨æˆ·äº¤äº’ï¼š</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471/?p=5">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471/?p=5<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p>2ã€è¿ç®—ç¬¦ï¼š</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=9">https://www.bilibili.com/video/av73342471?p=9www.bilibili.com/video/av73342471?p=9</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>07-æµç¨‹æ§åˆ¶</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/07_Python%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8%E4%B9%8B%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/</url>
    <content><![CDATA[<h2 id="ä¸€-å¼•å­ï¼š"><a href="#ä¸€-å¼•å­ï¼š" class="headerlink" title="ä¸€ å¼•å­ï¼š"></a>ä¸€ å¼•å­ï¼š</h2><p>æµç¨‹æ§åˆ¶å³æ§åˆ¶æµç¨‹ï¼Œå…·ä½“æŒ‡æ§åˆ¶ç¨‹åºçš„æ‰§è¡Œæµç¨‹ï¼Œè€Œç¨‹åºçš„æ‰§è¡Œæµç¨‹åˆ†ä¸ºä¸‰ç§ç»“æ„ï¼šé¡ºåºç»“æ„ï¼ˆä¹‹å‰æˆ‘ä»¬å†™çš„ä»£ç éƒ½æ˜¯é¡ºåºç»“æ„ï¼‰ã€åˆ†æ”¯ç»“æ„ï¼ˆç”¨åˆ°ifåˆ¤æ–­ï¼‰ã€å¾ªç¯ç»“æ„ï¼ˆç”¨åˆ°whileä¸forï¼‰</p>
<p><img src="https://pic3.zhimg.com/80/v2-1c94b67e61036b4b8029f1ff0e04021e_720w.jpg" alt="img"></p>
<h2 id="äºŒ-åˆ†æ”¯ç»“æ„"><a href="#äºŒ-åˆ†æ”¯ç»“æ„" class="headerlink" title="äºŒ åˆ†æ”¯ç»“æ„"></a>äºŒ åˆ†æ”¯ç»“æ„</h2><h2 id="2-1-ä»€ä¹ˆæ˜¯åˆ†æ”¯ç»“æ„"><a href="#2-1-ä»€ä¹ˆæ˜¯åˆ†æ”¯ç»“æ„" class="headerlink" title="2.1 ä»€ä¹ˆæ˜¯åˆ†æ”¯ç»“æ„"></a>2.1 ä»€ä¹ˆæ˜¯åˆ†æ”¯ç»“æ„</h2><p>åˆ†æ”¯ç»“æ„å°±æ˜¯æ ¹æ®æ¡ä»¶åˆ¤æ–­çš„çœŸå‡å»æ‰§è¡Œä¸åŒåˆ†æ”¯å¯¹åº”çš„å­ä»£ç </p>
<h2 id="2-2-ä¸ºä»€ä¹ˆè¦ç”¨åˆ†æ”¯ç»“æ„"><a href="#2-2-ä¸ºä»€ä¹ˆè¦ç”¨åˆ†æ”¯ç»“æ„" class="headerlink" title="2.2 ä¸ºä»€ä¹ˆè¦ç”¨åˆ†æ”¯ç»“æ„"></a>2.2 ä¸ºä»€ä¹ˆè¦ç”¨åˆ†æ”¯ç»“æ„</h2><p>äººç±»æŸäº›æ—¶å€™éœ€è¦æ ¹æ®æ¡ä»¶æ¥å†³å®šåšä»€ä¹ˆäº‹æƒ…ï¼Œæ¯”å¦‚ï¼šå¦‚æœä»Šå¤©ä¸‹é›¨ï¼Œå°±å¸¦ä¼</p>
<p>æ‰€ä»¥ç¨‹åºä¸­å¿…é¡»æœ‰ç›¸åº”çš„æœºåˆ¶æ¥æ§åˆ¶è®¡ç®—æœºå…·å¤‡äººçš„è¿™ç§åˆ¤æ–­èƒ½åŠ›</p>
<h2 id="2-3-å¦‚ä½•ä½¿ç”¨åˆ†æ”¯ç»“æ„"><a href="#2-3-å¦‚ä½•ä½¿ç”¨åˆ†æ”¯ç»“æ„" class="headerlink" title="2.3 å¦‚ä½•ä½¿ç”¨åˆ†æ”¯ç»“æ„"></a>2.3 å¦‚ä½•ä½¿ç”¨åˆ†æ”¯ç»“æ„</h2><h3 id="2-3-1-ifè¯­æ³•"><a href="#2-3-1-ifè¯­æ³•" class="headerlink" title="2.3.1 ifè¯­æ³•"></a>2.3.1 ifè¯­æ³•</h3><p><img src="https://pic3.zhimg.com/80/v2-a75171615cb658ae9bb3db7afabc6846_720w.jpg" alt="img"></p>
<p>ç”¨ifå…³é”®å­—æ¥å®ç°åˆ†æ”¯ç»“æ„ï¼Œå®Œæ•´è¯­æ³•å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> æ¡ä»¶<span class="number">1</span>:   <span class="comment"># å¦‚æœæ¡ä»¶1çš„ç»“æœä¸ºTrueï¼Œå°±ä¾æ¬¡æ‰§è¡Œï¼šä»£ç 1ã€ä»£ç 2ï¼Œ......</span></span><br><span class="line">  ã€€ä»£ç <span class="number">1</span></span><br><span class="line">    ä»£ç <span class="number">2</span></span><br><span class="line">    ......</span><br><span class="line"><span class="keyword">elif</span> æ¡ä»¶<span class="number">2</span>: <span class="comment"># å¦‚æœæ¡ä»¶2çš„ç»“æœä¸ºTrueï¼Œå°±ä¾æ¬¡æ‰§è¡Œï¼šä»£ç 3ã€ä»£ç 4ï¼Œ......</span></span><br><span class="line">  ã€€ä»£ç <span class="number">3</span></span><br><span class="line">    ä»£ç <span class="number">4</span></span><br><span class="line">    ......</span><br><span class="line"><span class="keyword">elif</span> æ¡ä»¶<span class="number">3</span>: <span class="comment"># å¦‚æœæ¡ä»¶3çš„ç»“æœä¸ºTrueï¼Œå°±ä¾æ¬¡æ‰§è¡Œï¼šä»£ç 5ã€ä»£ç 6ï¼Œ......</span></span><br><span class="line">  ã€€ä»£ç <span class="number">5</span></span><br><span class="line">    ä»£ç <span class="number">6</span></span><br><span class="line">    ......</span><br><span class="line"><span class="keyword">else</span>:ã€€ã€€   <span class="comment"># å…¶å®ƒæƒ…å†µï¼Œå°±ä¾æ¬¡æ‰§è¡Œï¼šä»£ç 7ã€ä»£ç 8ï¼Œ......</span></span><br><span class="line">    ä»£ç <span class="number">7</span></span><br><span class="line">    ä»£ç <span class="number">8</span></span><br><span class="line">    ......</span><br><span class="line"><span class="comment"># æ³¨æ„ï¼š</span></span><br><span class="line"><span class="comment"># 1ã€pythonç”¨ç›¸åŒç¼©è¿›(4ä¸ªç©ºæ ¼è¡¨ç¤ºä¸€ä¸ªç¼©è¿›)æ¥æ ‡è¯†ä¸€ç»„ä»£ç å—ï¼ŒåŒä¸€ç»„ä»£ç ä¼šè‡ªä¸Šè€Œä¸‹ä¾æ¬¡è¿è¡Œ</span></span><br><span class="line"><span class="comment"># 2ã€æ¡ä»¶å¯ä»¥æ˜¯ä»»æ„è¡¨è¾¾å¼ï¼Œä½†æ‰§è¡Œç»“æœå¿…é¡»ä¸ºå¸ƒå°”ç±»å‹</span></span><br><span class="line">     <span class="comment"># åœ¨ifåˆ¤æ–­ä¸­æ‰€æœ‰çš„æ•°æ®ç±»å‹ä¹Ÿéƒ½ä¼šè‡ªåŠ¨è½¬æ¢æˆå¸ƒå°”ç±»å‹</span></span><br><span class="line">       <span class="comment"># 2.1ã€Noneï¼Œ0ï¼Œç©ºï¼ˆç©ºå­—ç¬¦ä¸²ï¼Œç©ºåˆ—è¡¨ï¼Œç©ºå­—å…¸ç­‰ï¼‰ä¸‰ç§æƒ…å†µä¸‹è½¬æ¢æˆçš„å¸ƒå°”å€¼ä¸ºFalse</span></span><br><span class="line">       <span class="comment"># 2.2ã€å…¶ä½™å‡ä¸ºTrue</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-2-ifåº”ç”¨æ¡ˆä¾‹"><a href="#2-3-2-ifåº”ç”¨æ¡ˆä¾‹" class="headerlink" title="2.3.2 ifåº”ç”¨æ¡ˆä¾‹"></a>2.3.2 ifåº”ç”¨æ¡ˆä¾‹</h3><p><img src="https://pic4.zhimg.com/80/v2-0dff1efd05c82779f08db912b84ed5a3_720w.jpg" alt="img"></p>
<p>æ¡ˆä¾‹1ï¼š</p>
<p>å¦‚æœï¼šå¥³äººçš„å¹´é¾„&gt;30å²ï¼Œé‚£ä¹ˆï¼šå«é˜¿å§¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">age_of_girl=31</span><br><span class="line">if age_of_girl &gt; 30:</span><br><span class="line">    print(&#x27;é˜¿å§¨å¥½&#x27;)</span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹2ï¼š</p>
<p>å¦‚æœï¼šå¥³äººçš„å¹´é¾„&gt;30å²ï¼Œé‚£ä¹ˆï¼šå«é˜¿å§¨ï¼Œå¦åˆ™ï¼šå«å°å§</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">age_of_girl=18</span><br><span class="line">if age_of_girl &gt; 30:</span><br><span class="line">    print(&#x27;é˜¿å§¨å¥½&#x27;)</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;å°å§å¥½&#x27;)</span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹3ï¼š</p>
<p>å¦‚æœï¼šå¥³äººçš„å¹´é¾„&gt;&#x3D;18å¹¶ä¸”&lt;22å²å¹¶ä¸”èº«é«˜&gt;170å¹¶ä¸”ä½“é‡&lt;100å¹¶ä¸”æ˜¯æ¼‚äº®çš„ï¼Œé‚£ä¹ˆï¼šè¡¨ç™½ï¼Œå¦åˆ™ï¼šå«é˜¿å§¨**</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">age_of_girl=18</span><br><span class="line">height=171</span><br><span class="line">weight=99</span><br><span class="line">is_pretty=True</span><br><span class="line">if age_of_girl &gt;= 18 and age_of_girl &lt; 22 and height &gt; 170 and weight &lt; 100 and is_pretty == True:</span><br><span class="line">    print(&#x27;è¡¨ç™½...&#x27;)</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;é˜¿å§¨å¥½&#x27;)</span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹4ï¼š</p>
<p>å¦‚æœï¼šæˆç»©&gt;&#x3D;90ï¼Œé‚£ä¹ˆï¼šä¼˜ç§€</p>
<p>å¦‚æœæˆç»©&gt;&#x3D;80ä¸”&lt;90,é‚£ä¹ˆï¼šè‰¯å¥½</p>
<p>å¦‚æœæˆç»©&gt;&#x3D;70ä¸”&lt;80,é‚£ä¹ˆï¼šæ™®é€š</p>
<p>å…¶ä»–æƒ…å†µï¼šå¾ˆå·®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">score=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>)</span><br><span class="line">score=<span class="built_in">int</span>(score)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> score &gt;= <span class="number">90</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¼˜ç§€&#x27;</span>)</span><br><span class="line"><span class="keyword">elif</span> score &gt;= <span class="number">80</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è‰¯å¥½&#x27;</span>)</span><br><span class="line"><span class="keyword">elif</span> score &gt;= <span class="number">70</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;æ™®é€š&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å¾ˆå·®&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹5ï¼šifåµŒå¥—</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#åœ¨è¡¨ç™½çš„åŸºç¡€ä¸Šç»§ç»­ï¼š</span><br><span class="line">#å¦‚æœè¡¨ç™½æˆåŠŸï¼Œé‚£ä¹ˆï¼šåœ¨ä¸€èµ·</span><br><span class="line">#å¦åˆ™ï¼šæ‰“å°ã€‚ã€‚ã€‚</span><br><span class="line"></span><br><span class="line">age_of_girl=18</span><br><span class="line">height=171</span><br><span class="line">weight=99</span><br><span class="line">is_pretty=True</span><br><span class="line">success=False</span><br><span class="line"></span><br><span class="line">if age_of_girl &gt;= 18 and age_of_girl &lt; 22 and height &gt; 170 and weight &lt; 100 and is_pretty == True:</span><br><span class="line">    if success:</span><br><span class="line">        print(&#x27;è¡¨ç™½æˆåŠŸ,åœ¨ä¸€èµ·&#x27;)</span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;ä»€ä¹ˆçˆ±æƒ…ä¸çˆ±æƒ…çš„,çˆ±nmlgbçš„çˆ±æƒ…,çˆ±nmlgå•Š...&#x27;)</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;é˜¿å§¨å¥½&#x27;)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-3a90716a58a4458640aee154894b0bd2_720w.jpg" alt="img"></p>
<p>ç»ƒä¹ 1: ç™»é™†åŠŸèƒ½</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">name=<span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥ç”¨æˆ·åå­—ï¼š&#x27;</span>).strip()</span><br><span class="line">password=<span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥å¯†ç ï¼š&#x27;</span>).strip()</span><br><span class="line"><span class="keyword">if</span> name == <span class="string">&#x27;tony&#x27;</span> <span class="keyword">and</span> password == <span class="string">&#x27;123&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;tony login success&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>ç»ƒä¹ 2ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/usr/bin/env python</span><br><span class="line">#æ ¹æ®ç”¨æˆ·è¾“å…¥å†…å®¹æ‰“å°å…¶æƒé™</span><br><span class="line"></span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">egon --&gt; è¶…çº§ç®¡ç†å‘˜</span><br><span class="line">tom  --&gt; æ™®é€šç®¡ç†å‘˜</span><br><span class="line">jack,rain --&gt; ä¸šåŠ¡ä¸»ç®¡</span><br><span class="line">å…¶ä»– --&gt; æ™®é€šç”¨æˆ·</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">name=input(&#x27;è¯·è¾“å…¥ç”¨æˆ·åå­—ï¼š&#x27;)</span><br><span class="line"></span><br><span class="line">if name == &#x27;egon&#x27;:</span><br><span class="line">    print(&#x27;è¶…çº§ç®¡ç†å‘˜&#x27;)</span><br><span class="line">elif name == &#x27;tom&#x27;:</span><br><span class="line">    print(&#x27;æ™®é€šç®¡ç†å‘˜&#x27;)</span><br><span class="line">elif name == &#x27;jack&#x27; or name == &#x27;rain&#x27;:</span><br><span class="line">    print(&#x27;ä¸šåŠ¡ä¸»ç®¡&#x27;)</span><br><span class="line">else:</span><br><span class="line">    print(&#x27;æ™®é€šç”¨æˆ·&#x27;)</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰-å¾ªç¯ç»“æ„"><a href="#ä¸‰-å¾ªç¯ç»“æ„" class="headerlink" title="ä¸‰ å¾ªç¯ç»“æ„"></a>ä¸‰ å¾ªç¯ç»“æ„</h2><h2 id="3-1-ä»€ä¹ˆæ˜¯å¾ªç¯ç»“æ„"><a href="#3-1-ä»€ä¹ˆæ˜¯å¾ªç¯ç»“æ„" class="headerlink" title="3.1 ä»€ä¹ˆæ˜¯å¾ªç¯ç»“æ„"></a>3.1 ä»€ä¹ˆæ˜¯å¾ªç¯ç»“æ„</h2><p>å¾ªç¯ç»“æ„å°±æ˜¯é‡å¤æ‰§è¡ŒæŸæ®µä»£ç å—</p>
<h2 id="3-2-ä¸ºä»€ä¹ˆè¦ç”¨å¾ªç¯ç»“æ„"><a href="#3-2-ä¸ºä»€ä¹ˆè¦ç”¨å¾ªç¯ç»“æ„" class="headerlink" title="3.2 ä¸ºä»€ä¹ˆè¦ç”¨å¾ªç¯ç»“æ„"></a>3.2 ä¸ºä»€ä¹ˆè¦ç”¨å¾ªç¯ç»“æ„</h2><p><img src="https://pic4.zhimg.com/80/v2-f174b482ecf2583633bd31e3a13f8e8b_720w.jpg" alt="img"></p>
<p>äººç±»æŸäº›æ—¶å€™éœ€è¦é‡å¤åšæŸä»¶äº‹æƒ…</p>
<p>æ‰€ä»¥ç¨‹åºä¸­å¿…é¡»æœ‰ç›¸åº”çš„æœºåˆ¶æ¥æ§åˆ¶è®¡ç®—æœºå…·å¤‡äººçš„è¿™ç§å¾ªç¯åšäº‹çš„èƒ½åŠ›</p>
<h2 id="3-3-å¦‚ä½•ä½¿ç”¨å¾ªç¯ç»“æ„"><a href="#3-3-å¦‚ä½•ä½¿ç”¨å¾ªç¯ç»“æ„" class="headerlink" title="3.3 å¦‚ä½•ä½¿ç”¨å¾ªç¯ç»“æ„"></a>3.3 å¦‚ä½•ä½¿ç”¨å¾ªç¯ç»“æ„</h2><h3 id="3-3-1-whileå¾ªç¯è¯­æ³•"><a href="#3-3-1-whileå¾ªç¯è¯­æ³•" class="headerlink" title="3.3.1 whileå¾ªç¯è¯­æ³•"></a>3.3.1 whileå¾ªç¯è¯­æ³•</h3><p><img src="https://pic4.zhimg.com/80/v2-43c2d731786fa1b75f5e45b55f0cf833_720w.jpg" alt="img"></p>
<p>pythonä¸­æœ‰whileä¸forä¸¤ç§å¾ªç¯æœºåˆ¶ï¼Œå…¶ä¸­whileå¾ªç¯ç§°ä¹‹ä¸ºæ¡ä»¶å¾ªç¯ï¼Œè¯­æ³•å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> æ¡ä»¶:</span><br><span class="line">     ä»£ç <span class="number">1</span>     </span><br><span class="line">     ä»£ç <span class="number">2</span>     </span><br><span class="line">     ä»£ç <span class="number">3</span></span><br><span class="line"><span class="keyword">while</span>çš„è¿è¡Œæ­¥éª¤ï¼š</span><br><span class="line">æ­¥éª¤<span class="number">1</span>ï¼šå¦‚æœæ¡ä»¶ä¸ºçœŸï¼Œé‚£ä¹ˆä¾æ¬¡æ‰§è¡Œï¼šä»£ç <span class="number">1</span>ã€ä»£ç <span class="number">2</span>ã€ä»£ç <span class="number">3</span>ã€......</span><br><span class="line">æ­¥éª¤<span class="number">2</span>ï¼šæ‰§è¡Œå®Œæ¯•åå†æ¬¡åˆ¤æ–­æ¡ä»¶,å¦‚æœæ¡ä»¶ä¸º<span class="literal">True</span>åˆ™å†æ¬¡æ‰§è¡Œï¼šä»£ç <span class="number">1</span>ã€ä»£ç <span class="number">2</span>ã€ä»£ç <span class="number">3</span>ã€......ï¼Œå¦‚æœæ¡ä»¶ä¸º<span class="literal">False</span>,åˆ™å¾ªç¯ç»ˆæ­¢</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-6f56fdbd7d92dd2a7ce02573d950136a_720w.jpg" alt="img"></p>
<h3 id="3-3-2-whileå¾ªç¯åº”ç”¨æ¡ˆä¾‹"><a href="#3-3-2-whileå¾ªç¯åº”ç”¨æ¡ˆä¾‹" class="headerlink" title="3.3.2 whileå¾ªç¯åº”ç”¨æ¡ˆä¾‹"></a>3.3.2 whileå¾ªç¯åº”ç”¨æ¡ˆä¾‹</h3><p><img src="https://pic4.zhimg.com/80/v2-0dff1efd05c82779f08db912b84ed5a3_720w.jpg" alt="img"></p>
<p>æ¡ˆä¾‹ä¸€ï¼šwhileå¾ªç¯çš„åŸºæœ¬ä½¿ç”¨</p>
<p>ç”¨æˆ·è®¤è¯ç¨‹åº</p>
<p><img src="https://pic2.zhimg.com/80/v2-72163eb478e754fbfd478839c5cbf845_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç”¨æˆ·è®¤è¯ç¨‹åºçš„åŸºæœ¬é€»è¾‘å°±æ˜¯æ¥æ”¶ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå¯†ç ç„¶åä¸ç¨‹åºä¸­å­˜æ”¾çš„ç”¨æˆ·åå¯†ç è¿›è¡Œåˆ¤æ–­ï¼Œåˆ¤æ–­æˆåŠŸåˆ™ç™»é™†æˆåŠŸï¼Œåˆ¤æ–­å¤±è´¥åˆ™è¾“å‡ºè´¦å·æˆ–å¯†ç é”™è¯¯</span></span><br><span class="line">username = <span class="string">&quot;jason&quot;</span></span><br><span class="line">password = <span class="string">&quot;123&quot;</span></span><br><span class="line"></span><br><span class="line">inp_name =  <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·åï¼š&quot;</span>)</span><br><span class="line">inp_pwd =  <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å¯†ç ï¼š&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> inp_name == username <span class="keyword">and</span> inp_pwd == password:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è¾“å…¥çš„ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼&quot;</span>)</span><br><span class="line"><span class="comment">#é€šå¸¸è®¤è¯å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œä¼šè¦æ±‚ç”¨æˆ·é‡æ–°è¾“å…¥ç”¨æˆ·åå’Œå¯†ç è¿›è¡ŒéªŒè¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ç»™ç”¨æˆ·ä¸‰æ¬¡è¯•é”™æœºä¼šï¼Œæœ¬è´¨å°±æ˜¯å°†ä¸Šè¿°ä»£ç é‡å¤è¿è¡Œä¸‰éï¼Œä½ æ€»ä¸ä¼šæƒ³ç€æŠŠä»£ç å¤åˆ¶3æ¬¡å§ã€‚ã€‚ã€‚ã€‚</span></span><br><span class="line">username = <span class="string">&quot;jason&quot;</span></span><br><span class="line">password = <span class="string">&quot;123&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬ä¸€æ¬¡éªŒè¯</span></span><br><span class="line">inp_name =  <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·åï¼š&quot;</span>)</span><br><span class="line">inp_pwd =  <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å¯†ç ï¼š&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> inp_name == username <span class="keyword">and</span> inp_pwd == password:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è¾“å…¥çš„ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒæ¬¡éªŒè¯</span></span><br><span class="line">inp_name =  <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·åï¼š&quot;</span>)</span><br><span class="line">inp_pwd =  <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å¯†ç ï¼š&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> inp_name == username <span class="keyword">and</span> inp_pwd == password:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è¾“å…¥çš„ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬ä¸‰æ¬¡éªŒè¯</span></span><br><span class="line">inp_name =  <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·åï¼š&quot;</span>)</span><br><span class="line">inp_pwd =  <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å¯†ç ï¼š&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> inp_name == username <span class="keyword">and</span> inp_pwd == password:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;è¾“å…¥çš„ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å³ä½¿æ˜¯å°ç™½çš„ä½ ï¼Œä¹Ÿè§‰å¾—çš„å¤ªlowäº†æ˜¯ä¸æ˜¯ï¼Œä»¥åè¦ä¿®æ”¹åŠŸèƒ½è¿˜å¾—ä¿®æ”¹3æ¬¡ï¼Œå› æ­¤è®°ä½ï¼Œå†™é‡å¤çš„ä»£ç æ˜¯ç¨‹åºå‘˜æœ€ä¸è€»çš„è¡Œä¸ºã€‚</span></span><br><span class="line"><span class="comment">#é‚£ä¹ˆå¦‚ä½•åšåˆ°ä¸ç”¨å†™é‡å¤ä»£ç åˆèƒ½è®©ç¨‹åºé‡å¤ä¸€æ®µä»£ç å¤šæ¬¡å‘¢ï¼Ÿ å¾ªç¯è¯­å¥å°±æ´¾ä¸Šç”¨åœºå•¦ï¼ˆä½¿ç”¨whileå¾ªç¯å®ç°ï¼‰</span></span><br><span class="line"></span><br><span class="line">username = <span class="string">&quot;jason&quot;</span></span><br><span class="line">password = <span class="string">&quot;123&quot;</span></span><br><span class="line"><span class="comment"># è®°å½•é”™è¯¯éªŒè¯çš„æ¬¡æ•°</span></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">3</span>:</span><br><span class="line">    inp_name = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·åï¼š&quot;</span>)</span><br><span class="line">    inp_pwd = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å¯†ç ï¼š&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> inp_name == username <span class="keyword">and</span> inp_pwd == password:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;è¾“å…¥çš„ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼&quot;</span>)</span><br><span class="line">        count += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹äºŒï¼šwhile+breakçš„ä½¿ç”¨</p>
<p>ä½¿ç”¨äº†whileå¾ªç¯åï¼Œä»£ç ç¡®å®ç²¾ç®€å¤šäº†ï¼Œä½†é—®é¢˜æ˜¯ç”¨æˆ·è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå¯†ç ä»¥åæ— æ³•ç»“æŸå¾ªç¯ï¼Œé‚£å¦‚ä½•ç»“æŸæ‰ä¸€ä¸ªå¾ªç¯å‘¢ï¼Ÿè¿™å°±éœ€è¦ç”¨åˆ°breakäº†ï¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">username = <span class="string">&quot;jason&quot;</span></span><br><span class="line">password = <span class="string">&quot;123&quot;</span></span><br><span class="line"><span class="comment"># è®°å½•é”™è¯¯éªŒè¯çš„æ¬¡æ•°</span></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">3</span>:</span><br><span class="line">    inp_name = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·åï¼š&quot;</span>)</span><br><span class="line">    inp_pwd = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å¯†ç ï¼š&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> inp_name == username <span class="keyword">and</span> inp_pwd == password:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span> <span class="comment"># ç”¨äºç»“æŸæœ¬å±‚å¾ªç¯</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;è¾“å…¥çš„ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼&quot;</span>)</span><br><span class="line">        count += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹ä¸‰ï¼šwhileå¾ªç¯åµŒå¥—+break</p>
<p>å¦‚æœwhileå¾ªç¯åµŒå¥—äº†å¾ˆå¤šå±‚ï¼Œè¦æƒ³é€€å‡ºæ¯ä¸€å±‚å¾ªç¯åˆ™éœ€è¦åœ¨æ¯ä¸€å±‚å¾ªç¯éƒ½æœ‰ä¸€ä¸ªbreak</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">username = <span class="string">&quot;jason&quot;</span></span><br><span class="line">password = <span class="string">&quot;123&quot;</span></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">3</span>:  <span class="comment"># ç¬¬ä¸€å±‚å¾ªç¯</span></span><br><span class="line">    inp_name = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·åï¼š&quot;</span>)</span><br><span class="line">    inp_pwd = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å¯†ç ï¼š&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> inp_name == username <span class="keyword">and</span> inp_pwd == password:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span>)</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:  <span class="comment"># ç¬¬äºŒå±‚å¾ªç¯</span></span><br><span class="line">            cmd = <span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> cmd == <span class="string">&#x27;quit&#x27;</span>:</span><br><span class="line">                <span class="keyword">break</span>  <span class="comment"># ç”¨äºç»“æŸæœ¬å±‚å¾ªç¯ï¼Œå³ç¬¬äºŒå±‚å¾ªç¯</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;run &lt;%s&gt;&#x27;</span> % cmd)</span><br><span class="line">        <span class="keyword">break</span>  <span class="comment"># ç”¨äºç»“æŸæœ¬å±‚å¾ªç¯ï¼Œå³ç¬¬ä¸€å±‚å¾ªç¯</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;è¾“å…¥çš„ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼&quot;</span>)</span><br><span class="line">        count += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹å››ï¼šwhileå¾ªç¯åµŒå¥—+tagçš„ä½¿ç”¨</p>
<p>é’ˆå¯¹åµŒå¥—å¤šå±‚çš„whileå¾ªç¯ï¼Œå¦‚æœæˆ‘ä»¬çš„ç›®çš„å¾ˆæ˜ç¡®å°±æ˜¯è¦åœ¨æŸä¸€å±‚ç›´æ¥é€€å‡ºæ‰€æœ‰å±‚çš„å¾ªç¯ï¼Œå…¶å®æœ‰ä¸€ä¸ªçªé—¨ï¼Œå°±è®©æ‰€æœ‰whileå¾ªç¯çš„æ¡ä»¶éƒ½ç”¨åŒä¸€ä¸ªå˜é‡ï¼Œè¯¥å˜é‡çš„åˆå§‹å€¼ä¸ºTrueï¼Œä¸€æ—¦åœ¨æŸä¸€å±‚å°†è¯¥å˜é‡çš„å€¼æ”¹æˆFalseï¼Œåˆ™æ‰€æœ‰å±‚çš„å¾ªç¯éƒ½ç»“æŸ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">username = <span class="string">&quot;jason&quot;</span></span><br><span class="line">password = <span class="string">&quot;123&quot;</span></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">tag = <span class="literal">True</span></span><br><span class="line"><span class="keyword">while</span> tag: </span><br><span class="line">    inp_name = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·åï¼š&quot;</span>)</span><br><span class="line">    inp_pwd = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥å¯†ç ï¼š&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> inp_name == username <span class="keyword">and</span> inp_pwd == password:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ç™»é™†æˆåŠŸ&quot;</span>)</span><br><span class="line">        <span class="keyword">while</span> tag:  </span><br><span class="line">            cmd = <span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> cmd == <span class="string">&#x27;quit&#x27;</span>:</span><br><span class="line">                tag = <span class="literal">False</span>  <span class="comment"># tagå˜ä¸ºFalseï¼Œ æ‰€æœ‰whileå¾ªç¯çš„æ¡ä»¶éƒ½å˜ä¸ºFalse </span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;run &lt;%s&gt;&#x27;</span> % cmd)</span><br><span class="line">        <span class="keyword">break</span>  <span class="comment"># ç”¨äºç»“æŸæœ¬å±‚å¾ªç¯ï¼Œå³ç¬¬ä¸€å±‚å¾ªç¯</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;è¾“å…¥çš„ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼&quot;</span>)</span><br><span class="line">        count += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹äº”ï¼šwhile+continueçš„ä½¿ç”¨</p>
<p>breakä»£è¡¨ç»“æŸæœ¬å±‚å¾ªç¯ï¼Œè€Œcontinueåˆ™ç”¨äºç»“æŸæœ¬æ¬¡å¾ªç¯ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‰“å°1åˆ°10ä¹‹é—´ï¼Œé™¤7ä»¥å¤–çš„æ‰€æœ‰æ•°å­—</span></span><br><span class="line">number=<span class="number">11</span></span><br><span class="line"><span class="keyword">while</span> number&gt;<span class="number">1</span>:</span><br><span class="line">    number -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> number==<span class="number">7</span>:</span><br><span class="line">        <span class="keyword">continue</span> <span class="comment"># ç»“æŸæ‰æœ¬æ¬¡å¾ªç¯ï¼Œå³æœ¬æ¬¡å¾ªç¯continueä¹‹åçš„ä»£ç éƒ½ä¸ä¼šè¿è¡Œäº†ï¼Œè€Œæ˜¯ç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯</span></span><br><span class="line">    <span class="built_in">print</span>(number)</span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹äº”ï¼šwhile+elseçš„ä½¿ç”¨</p>
<p>åœ¨whileå¾ªç¯çš„åé¢ï¼Œæˆ‘ä»¬å¯ä»¥è·Ÿelseè¯­å¥ï¼Œå½“while å¾ªç¯æ­£å¸¸æ‰§è¡Œå®Œå¹¶ä¸”ä¸­é—´æ²¡æœ‰è¢«break ä¸­æ­¢çš„è¯ï¼Œå°±ä¼šæ‰§è¡Œelseåé¢çš„è¯­å¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨elseæ¥éªŒè¯ï¼Œå¾ªç¯æ˜¯å¦æ­£å¸¸ç»“æŸ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt;= <span class="number">5</span> :</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Loop&quot;</span>,count)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å¾ªç¯æ­£å¸¸æ‰§è¡Œå®Œå•¦&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-----out of while loop ------&quot;</span>)</span><br><span class="line">è¾“å‡º</span><br><span class="line">Loop <span class="number">1</span></span><br><span class="line">Loop <span class="number">2</span></span><br><span class="line">Loop <span class="number">3</span></span><br><span class="line">Loop <span class="number">4</span></span><br><span class="line">Loop <span class="number">5</span></span><br><span class="line">Loop <span class="number">6</span></span><br><span class="line">å¾ªç¯æ­£å¸¸æ‰§è¡Œå®Œå•¦   <span class="comment">#æ²¡æœ‰è¢«breakæ‰“æ–­ï¼Œæ‰€ä»¥æ‰§è¡Œäº†è¯¥è¡Œä»£ç </span></span><br><span class="line">-----out of <span class="keyword">while</span> loop ------</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ‰§è¡Œè¿‡ç¨‹ä¸­è¢«breakï¼Œå°±ä¸ä¼šæ‰§è¡Œelseçš„è¯­å¥</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt;= <span class="number">5</span> :</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> count == <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Loop&quot;</span>,count)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;å¾ªç¯æ­£å¸¸æ‰§è¡Œå®Œå•¦&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-----out of while loop ------&quot;</span>)</span><br><span class="line">è¾“å‡º</span><br><span class="line">Loop <span class="number">1</span></span><br><span class="line">Loop <span class="number">2</span></span><br><span class="line">-----out of <span class="keyword">while</span> loop ------ <span class="comment">#ç”±äºå¾ªç¯è¢«breakæ‰“æ–­äº†ï¼Œæ‰€ä»¥ä¸æ‰§è¡Œelseåçš„è¾“å‡ºè¯­å¥</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-3a90716a58a4458640aee154894b0bd2_720w.jpg" alt="img"></p>
<p>ç»ƒä¹ 1ï¼š</p>
<p>å¯»æ‰¾1åˆ°100ä¹‹é—´æ•°å­—7æœ€å¤§çš„å€æ•°ï¼ˆç»“æœæ˜¯98ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">number=<span class="number">100</span></span><br><span class="line"><span class="keyword">while</span> number&gt;<span class="number">0</span>:</span><br><span class="line">    <span class="keyword">if</span> number%<span class="number">7</span>==<span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(number)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    number-=<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>ç»ƒä¹ 2ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">age=<span class="number">18</span></span><br><span class="line">count=<span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count&lt;<span class="number">3</span>:</span><br><span class="line">    count+=<span class="number">1</span></span><br><span class="line">    guess = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;&gt;&gt;:&quot;</span>))</span><br><span class="line">    <span class="keyword">if</span> guess &gt; age :</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;çŒœçš„å¤ªå¤§äº†ï¼Œå¾€å°é‡Œè¯•è¯•...&quot;</span>)</span><br><span class="line">    <span class="keyword">elif</span> guess &lt; age :</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;çŒœçš„å¤ªå°äº†ï¼Œå¾€å¤§é‡Œè¯•è¯•...&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ­å–œä½ ï¼ŒçŒœå¯¹äº†...&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="3-3-3-forå¾ªç¯è¯­æ³•"><a href="#3-3-3-forå¾ªç¯è¯­æ³•" class="headerlink" title="3.3.3 forå¾ªç¯è¯­æ³•"></a>3.3.3 forå¾ªç¯è¯­æ³•</h3><p><img src="https://pic3.zhimg.com/80/v2-3a90716a58a4458640aee154894b0bd2_720w.jpg" alt="img"></p>
<p>å¾ªç¯ç»“æ„çš„ç¬¬äºŒç§å®ç°æ–¹å¼æ˜¯forå¾ªç¯ï¼Œforå¾ªç¯å¯ä»¥åšçš„äº‹æƒ…whileå¾ªç¯éƒ½å¯ä»¥å®ç°ï¼Œä¹‹æ‰€ä»¥ç”¨forå¾ªç¯æ˜¯å› ä¸ºåœ¨å¾ªç¯å–å€¼ï¼ˆå³éå†å€¼ï¼‰æ—¶forå¾ªç¯æ¯”whileå¾ªç¯çš„ä½¿ç”¨æ›´ä¸ºç®€æ´ï¼Œ</p>
<p><strong>forå¾ªç¯è¯­æ³•å¦‚ä¸‹</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> å˜é‡å <span class="keyword">in</span> å¯è¿­ä»£å¯¹è±¡: <span class="comment"># æ­¤æ—¶åªéœ€çŸ¥é“å¯è¿­ä»£å¯¹è±¡å¯ä»¥æ˜¯å­—ç¬¦ä¸²\åˆ—è¡¨\å­—å…¸ï¼Œæˆ‘ä»¬ä¹‹åä¼šä¸“é—¨è®²è§£å¯è¿­ä»£å¯¹è±¡</span></span><br><span class="line">    ä»£ç ä¸€</span><br><span class="line">    ä»£ç äºŒ</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¾‹1</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœ</span></span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚ç…§ä¾‹1æ¥ä»‹ç»forå¾ªç¯çš„è¿è¡Œæ­¥éª¤</span></span><br><span class="line"><span class="comment"># æ­¥éª¤1ï¼šä»åˆ—è¡¨[&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;]ä¸­è¯»å‡ºç¬¬ä¸€ä¸ªå€¼èµ‹å€¼ç»™itemï¼ˆitem=â€˜aâ€™ï¼‰ï¼Œç„¶åæ‰§è¡Œå¾ªç¯ä½“ä»£ç </span></span><br><span class="line"><span class="comment"># æ­¥éª¤2ï¼šä»åˆ—è¡¨[&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;]ä¸­è¯»å‡ºç¬¬äºŒä¸ªå€¼èµ‹å€¼ç»™itemï¼ˆitem=â€˜bâ€™ï¼‰ï¼Œç„¶åæ‰§è¡Œå¾ªç¯ä½“ä»£ç </span></span><br><span class="line"><span class="comment"># æ­¥éª¤3: é‡å¤ä»¥ä¸Šè¿‡ç¨‹ç›´åˆ°åˆ—è¡¨ä¸­çš„å€¼è¯»å°½</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-7d7dc5ae41a09a7cd6e043d75c63b81c_720w.jpg" alt="img"></p>
<h3 id="3-3-4-forå¾ªç¯åº”ç”¨æ¡ˆä¾‹"><a href="#3-3-4-forå¾ªç¯åº”ç”¨æ¡ˆä¾‹" class="headerlink" title="3.3.4 forå¾ªç¯åº”ç”¨æ¡ˆä¾‹"></a>3.3.4 forå¾ªç¯åº”ç”¨æ¡ˆä¾‹</h3><p><img src="https://pic4.zhimg.com/80/v2-0dff1efd05c82779f08db912b84ed5a3_720w.jpg" alt="img"></p>
<p>æ¡ˆä¾‹ä¸€ï¼šæ‰“å°æ•°å­—0-5</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç®€å•ç‰ˆï¼šforå¾ªç¯çš„å®ç°æ–¹å¼</span></span><br><span class="line"><span class="keyword">for</span> count <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>):  <span class="comment"># range(6)ä¼šäº§ç”Ÿä»0-5è¿™6ä¸ªæ•°</span></span><br><span class="line">    <span class="built_in">print</span>(count)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤æ‚ç‰ˆï¼šwhileå¾ªç¯çš„å®ç°æ–¹å¼</span></span><br><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">6</span>:</span><br><span class="line">    <span class="built_in">print</span>(count)</span><br><span class="line">    count += <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹äºŒï¼šéå†å­—å…¸</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç®€å•ç‰ˆï¼šforå¾ªç¯çš„å®ç°æ–¹å¼</span></span><br><span class="line"><span class="keyword">for</span> k <span class="keyword">in</span> &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;jason&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>,<span class="string">&#x27;gender&#x27;</span>:<span class="string">&#x27;male&#x27;</span>&#125;:  <span class="comment"># for å¾ªç¯é»˜è®¤å–çš„æ˜¯å­—å…¸çš„keyèµ‹å€¼ç»™å˜é‡åk</span></span><br><span class="line">    <span class="built_in">print</span>(k)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤æ‚ç‰ˆï¼šwhileå¾ªç¯ç¡®å®å¯ä»¥éå†å­—å…¸ï¼Œåç»­å°†ä¼šè¿­ä»£å™¨éƒ¨åˆ†è¯¦ç»†ä»‹ç»</span></span><br></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹ä¸‰ï¼šforå¾ªç¯åµŒå¥—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è¯·ç”¨forå¾ªç¯åµŒå¥—çš„æ–¹å¼æ‰“å°å¦‚ä¸‹å›¾å½¢ï¼š</span></span><br><span class="line">*****</span><br><span class="line">*****</span><br><span class="line">*****</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;*&quot;</span>,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>()  <span class="comment"># print()è¡¨ç¤ºæ¢è¡Œ</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šbreak ä¸ continueä¹Ÿå¯ä»¥ç”¨äºforå¾ªç¯ï¼Œä½¿ç”¨è¯­æ³•åŒwhileå¾ªç¯</p>
<p><img src="https://pic3.zhimg.com/80/v2-3a90716a58a4458640aee154894b0bd2_720w.jpg" alt="img"></p>
<p>ç»ƒä¹ ä¸€ï¼š</p>
<p>æ‰“å°ä¹ä¹ä¹˜æ³•è¡¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,i+<span class="number">1</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s*%s=%s&#x27;</span> %(i,j,i*j),end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>()</span><br></pre></td></tr></table></figure>

<p>ç»ƒä¹ äºŒï¼š</p>
<p>æ‰“å°é‡‘å­—å¡”</p>
<p><img src="https://pic3.zhimg.com/80/v2-53598748f490542a9700e63433b79496_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ†æ</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">#max_level=5</span></span><br><span class="line"><span class="string">     *        # current_level=1ï¼Œç©ºæ ¼æ•°=4ï¼Œ*å·æ•°=1</span></span><br><span class="line"><span class="string">    ***       # current_level=2,ç©ºæ ¼æ•°=3,*å·æ•°=3</span></span><br><span class="line"><span class="string">   *****      # current_level=3,ç©ºæ ¼æ•°=2,*å·æ•°=5</span></span><br><span class="line"><span class="string">  *******     # current_level=4,ç©ºæ ¼æ•°=1,*å·æ•°=7</span></span><br><span class="line"><span class="string"> *********    # current_level=5,ç©ºæ ¼æ•°=0,*å·æ•°=9</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># æ•°å­¦è¡¨è¾¾å¼</span></span><br><span class="line"><span class="string">ç©ºæ ¼æ•°=max_level-current_level</span></span><br><span class="line"><span class="string">*å·æ•°=2*current_level-1</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># å®ç°ï¼š</span></span><br><span class="line">max_level=<span class="number">5</span></span><br><span class="line"><span class="keyword">for</span> current_level <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,max_level+<span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(max_level-current_level):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27; &#x27;</span>,end=<span class="string">&#x27;&#x27;</span>) <span class="comment">#åœ¨ä¸€è¡Œä¸­è¿ç»­æ‰“å°å¤šä¸ªç©ºæ ¼</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>*current_level-<span class="number">1</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;*&#x27;</span>,end=<span class="string">&#x27;&#x27;</span>) <span class="comment">#åœ¨ä¸€è¡Œä¸­è¿ç»­æ‰“å°å¤šä¸ªç©ºæ ¼</span></span><br><span class="line">    <span class="built_in">print</span>()</span><br></pre></td></tr></table></figure>

<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p>1ã€ifåˆ¤æ–­</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471/?p=10">https://www.bilibili.com/video/av73342471/?p=10www.bilibili.com/video/av73342471/?p=10</a></p>
<p>2ã€whileå¾ªç¯</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=11">https://www.bilibili.com/video/av73342471?p=11www.bilibili.com/video/av73342471?p=11</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>05-åƒåœ¾å›æ”¶æœºåˆ¶</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/05_Python%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8%E4%B9%8B%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/</url>
    <content><![CDATA[<h2 id="ä¸€-å¼•å…¥"><a href="#ä¸€-å¼•å…¥" class="headerlink" title="ä¸€ å¼•å…¥"></a>ä¸€ å¼•å…¥</h2><p> è§£é‡Šå™¨åœ¨æ‰§è¡Œåˆ°å®šä¹‰å˜é‡çš„è¯­æ³•æ—¶ï¼Œä¼šç”³è¯·å†…å­˜ç©ºé—´æ¥å­˜æ”¾å˜é‡çš„å€¼ï¼Œè€Œå†…å­˜çš„å®¹é‡æ˜¯æœ‰é™çš„ï¼Œè¿™å°±æ¶‰åŠåˆ°å˜é‡å€¼æ‰€å ç”¨å†…å­˜ç©ºé—´çš„å›æ”¶é—®é¢˜ï¼Œå½“ä¸€ä¸ªå˜é‡å€¼æ²¡æœ‰ç”¨äº†ï¼ˆç®€ç§°åƒåœ¾ï¼‰å°±åº”è¯¥å°†å…¶å ç”¨çš„å†…å­˜ç»™å›æ”¶æ‰ï¼Œé‚£ä»€ä¹ˆæ ·çš„å˜é‡å€¼æ˜¯æ²¡æœ‰ç”¨çš„å‘¢ï¼Ÿ</p>
<p>å•ä»é€»è¾‘å±‚é¢åˆ†æï¼Œæˆ‘ä»¬å®šä¹‰å˜é‡å°†å˜é‡å€¼å­˜èµ·æ¥çš„ç›®çš„æ˜¯ä¸ºäº†ä»¥åå–å‡ºæ¥ä½¿ç”¨ï¼Œè€Œå–å¾—å˜é‡å€¼éœ€è¦é€šè¿‡å…¶ç»‘å®šçš„ç›´æ¥å¼•ç”¨ï¼ˆå¦‚x&#x3D;10ï¼Œ10è¢«xç›´æ¥å¼•ç”¨ï¼‰æˆ–é—´æ¥å¼•ç”¨ï¼ˆå¦‚l&#x3D;[x,]ï¼Œx&#x3D;10ï¼Œ10è¢«xç›´æ¥å¼•ç”¨ï¼Œè€Œè¢«å®¹å™¨ç±»å‹lé—´æ¥å¼•ç”¨ï¼‰ï¼Œæ‰€ä»¥å½“ä¸€ä¸ªå˜é‡å€¼ä¸å†ç»‘å®šä»»ä½•å¼•ç”¨æ—¶ï¼Œæˆ‘ä»¬å°±æ— æ³•å†è®¿é—®åˆ°è¯¥å˜é‡å€¼äº†ï¼Œè¯¥å˜é‡å€¼è‡ªç„¶å°±æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œå°±åº”è¯¥è¢«å½“æˆä¸€ä¸ªåƒåœ¾å›æ”¶ã€‚</p>
<p>æ¯«æ— ç–‘é—®ï¼Œå†…å­˜ç©ºé—´çš„ç”³è¯·ä¸å›æ”¶éƒ½æ˜¯éå¸¸è€—è´¹ç²¾åŠ›çš„äº‹æƒ…ï¼Œè€Œä¸”å­˜åœ¨å¾ˆå¤§çš„å±é™©æ€§ï¼Œç¨æœ‰ä¸æ…å°±æœ‰å¯èƒ½å¼•å‘å†…å­˜æº¢å‡ºé—®é¢˜ï¼Œå¥½åœ¨Cpythonè§£é‡Šå™¨æä¾›äº†è‡ªåŠ¨çš„åƒåœ¾å›æ”¶æœºåˆ¶æ¥å¸®æˆ‘ä»¬è§£å†³äº†è¿™ä»¶äº‹ã€‚</p>
<p><img src="https://pic4.zhimg.com/80/v2-fdd6ee1176778e295514ae8f3d0d6053_720w.jpg" alt="img"></p>
<h2 id="äºŒã€ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶æœºåˆ¶ï¼Ÿ"><a href="#äºŒã€ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶æœºåˆ¶ï¼Ÿ" class="headerlink" title="äºŒã€ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶æœºåˆ¶ï¼Ÿ"></a>äºŒã€ä»€ä¹ˆæ˜¯åƒåœ¾å›æ”¶æœºåˆ¶ï¼Ÿ</h2><p>åƒåœ¾å›æ”¶æœºåˆ¶ï¼ˆç®€ç§°GCï¼‰æ˜¯Pythonè§£é‡Šå™¨è‡ªå¸¦ä¸€ç§æœºï¼Œä¸“é—¨ç”¨æ¥å›æ”¶ä¸å¯ç”¨çš„å˜é‡å€¼æ‰€å ç”¨çš„å†…å­˜ç©ºé—´</p>
<h2 id="ä¸‰ã€ä¸ºä»€ä¹ˆè¦ç”¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼Ÿ"><a href="#ä¸‰ã€ä¸ºä»€ä¹ˆè¦ç”¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼Ÿ" class="headerlink" title="ä¸‰ã€ä¸ºä»€ä¹ˆè¦ç”¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼Ÿ"></a>ä¸‰ã€ä¸ºä»€ä¹ˆè¦ç”¨åƒåœ¾å›æ”¶æœºåˆ¶ï¼Ÿ</h2><p>ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä¼šç”³è¯·å¤§é‡çš„å†…å­˜ç©ºé—´ï¼Œè€Œå¯¹äºä¸€äº›æ— ç”¨çš„å†…å­˜ç©ºé—´å¦‚æœä¸åŠæ—¶æ¸…ç†çš„è¯ä¼šå¯¼è‡´å†…å­˜ä½¿ç”¨æ®†å°½ï¼ˆå†…å­˜æº¢å‡ºï¼‰ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒï¼Œå› æ­¤ç®¡ç†å†…å­˜æ˜¯ä¸€ä»¶é‡è¦ä¸”ç¹æ‚çš„äº‹æƒ…ï¼Œè€Œpythonè§£é‡Šå™¨è‡ªå¸¦çš„åƒåœ¾å›æ”¶æœºåˆ¶æŠŠç¨‹åºå‘˜ä»ç¹æ‚çš„å†…å­˜ç®¡ç†ä¸­è§£æ”¾å‡ºæ¥ã€‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-1dade7ff0e1a23520534e517b2cde6b1_720w.jpg" alt="img"></p>
<h2 id="å››ã€åƒåœ¾å›æ”¶æœºåˆ¶åŸç†åˆ†æ"><a href="#å››ã€åƒåœ¾å›æ”¶æœºåˆ¶åŸç†åˆ†æ" class="headerlink" title="å››ã€åƒåœ¾å›æ”¶æœºåˆ¶åŸç†åˆ†æ"></a>å››ã€åƒåœ¾å›æ”¶æœºåˆ¶åŸç†åˆ†æ</h2><p>Pythonçš„GCæ¨¡å—ä¸»è¦è¿ç”¨äº†â€œå¼•ç”¨è®¡æ•°â€ï¼ˆreference countingï¼‰æ¥è·Ÿè¸ªå’Œå›æ”¶åƒåœ¾ã€‚åœ¨å¼•ç”¨è®¡æ•°çš„åŸºç¡€ä¸Šï¼Œè¿˜å¯ä»¥é€šè¿‡â€œæ ‡è®°-æ¸…é™¤â€ï¼ˆmark and sweepï¼‰è§£å†³å®¹å™¨å¯¹è±¡å¯èƒ½äº§ç”Ÿçš„å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œå¹¶ä¸”é€šè¿‡â€œåˆ†ä»£å›æ”¶â€ï¼ˆgeneration collectionï¼‰ä»¥ç©ºé—´æ¢å–æ—¶é—´çš„æ–¹å¼æ¥è¿›ä¸€æ­¥æé«˜åƒåœ¾å›æ”¶çš„æ•ˆç‡ã€‚</p>
<p><img src="https://pic1.zhimg.com/80/v2-d0747b871d71091eff8ab5b0ebb6b3b0_720w.jpg" alt="img"></p>
<h2 id="4-1ã€ä»€ä¹ˆæ˜¯å¼•ç”¨è®¡æ•°ï¼Ÿ"><a href="#4-1ã€ä»€ä¹ˆæ˜¯å¼•ç”¨è®¡æ•°ï¼Ÿ" class="headerlink" title="4.1ã€ä»€ä¹ˆæ˜¯å¼•ç”¨è®¡æ•°ï¼Ÿ"></a>4.1ã€ä»€ä¹ˆæ˜¯å¼•ç”¨è®¡æ•°ï¼Ÿ</h2><p>å¼•ç”¨è®¡æ•°å°±æ˜¯ï¼šå˜é‡å€¼è¢«å˜é‡åå…³è”çš„æ¬¡æ•°</p>
<p>å¦‚ï¼šage&#x3D;18</p>
<p>å˜é‡å€¼18è¢«å…³è”äº†ä¸€ä¸ªå˜é‡åageï¼Œç§°ä¹‹ä¸ºå¼•ç”¨è®¡æ•°ä¸º1</p>
<p><img src="https://pic3.zhimg.com/80/v2-89915f2dc64db1fe79ce739a233bb09a_720w.jpg" alt="img"></p>
<p>å¼•ç”¨è®¡æ•°å¢åŠ ï¼š</p>
<p>age&#x3D;18 ï¼ˆæ­¤æ—¶ï¼Œå˜é‡å€¼18çš„å¼•ç”¨è®¡æ•°ä¸º1ï¼‰</p>
<p>m&#x3D;age ï¼ˆæŠŠageçš„å†…å­˜åœ°å€ç»™äº†mï¼Œæ­¤æ—¶ï¼Œm,ageéƒ½å…³è”äº†18ï¼Œæ‰€ä»¥å˜é‡å€¼18çš„å¼•ç”¨è®¡æ•°ä¸º2ï¼‰</p>
<p><img src="https://pic4.zhimg.com/80/v2-8a46e8993c193017bbbbca370ce6970b_720w.jpg" alt="img"></p>
<p>å¼•ç”¨è®¡æ•°å‡å°‘ï¼š</p>
<p>age&#x3D;10ï¼ˆåå­—ageå…ˆä¸å€¼18è§£é™¤å…³è”ï¼Œå†ä¸3å»ºç«‹äº†å…³è”ï¼Œå˜é‡å€¼18çš„å¼•ç”¨è®¡æ•°ä¸º1ï¼‰</p>
<p>del mï¼ˆdelçš„æ„æ€æ˜¯è§£é™¤å˜é‡åxä¸å˜é‡å€¼18çš„å…³è”å…³ç³»ï¼Œæ­¤æ—¶ï¼Œå˜é‡18çš„å¼•ç”¨è®¡æ•°ä¸º0ï¼‰</p>
<p><img src="https://pic3.zhimg.com/80/v2-6d0ed3fa462194215235ae22888b373a_720w.jpg" alt="img"></p>
<p>å€¼18çš„å¼•ç”¨è®¡æ•°ä¸€æ—¦å˜ä¸º0ï¼Œå…¶å ç”¨çš„å†…å­˜åœ°å€å°±åº”è¯¥è¢«è§£é‡Šå™¨çš„åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶</p>
<h2 id="4-2ã€å¼•ç”¨è®¡æ•°æ‰©å±•é˜…è¯»"><a href="#4-2ã€å¼•ç”¨è®¡æ•°æ‰©å±•é˜…è¯»" class="headerlink" title="4.2ã€å¼•ç”¨è®¡æ•°æ‰©å±•é˜…è¯»"></a>4.2ã€å¼•ç”¨è®¡æ•°æ‰©å±•é˜…è¯»</h2><p>å˜é‡å€¼è¢«å…³è”æ¬¡æ•°çš„å¢åŠ æˆ–å‡å°‘ï¼Œéƒ½ä¼šå¼•å‘å¼•ç”¨è®¡æ•°æœºåˆ¶çš„æ‰§è¡Œï¼ˆå¢åŠ æˆ–å‡å°‘å€¼çš„å¼•ç”¨è®¡æ•°ï¼‰ï¼Œè¿™å­˜åœ¨æ˜æ˜¾çš„æ•ˆç‡é—®é¢˜ã€‚</p>
<p><img src="https://pic1.zhimg.com/80/v2-2876d1bad8466226f58b1edcb84714a0_720w.jpg" alt="img"></p>
<p>å¦‚æœè¯´æ‰§è¡Œæ•ˆç‡è¿˜ä»…ä»…æ˜¯å¼•ç”¨è®¡æ•°æœºåˆ¶çš„ä¸€ä¸ªè½¯è‚‹çš„è¯ï¼Œé‚£ä¹ˆå¾ˆä¸å¹¸ï¼Œå¼•ç”¨è®¡æ•°æœºåˆ¶è¿˜å­˜åœ¨ç€ä¸€ä¸ªè‡´å‘½çš„å¼±ç‚¹ï¼Œå³å¾ªç¯å¼•ç”¨ï¼ˆä¹Ÿç§°äº¤å‰å¼•ç”¨ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¦‚ä¸‹æˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªåˆ—è¡¨ï¼Œç®€ç§°åˆ—è¡¨1ä¸åˆ—è¡¨2ï¼Œå˜é‡ål1æŒ‡å‘åˆ—è¡¨1ï¼Œå˜é‡ål2æŒ‡å‘åˆ—è¡¨2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l1=[<span class="string">&#x27;xxx&#x27;</span>]  <span class="comment"># åˆ—è¡¨1è¢«å¼•ç”¨ä¸€æ¬¡ï¼Œåˆ—è¡¨1çš„å¼•ç”¨è®¡æ•°å˜ä¸º1   </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l2=[<span class="string">&#x27;yyy&#x27;</span>]  <span class="comment"># åˆ—è¡¨2è¢«å¼•ç”¨ä¸€æ¬¡ï¼Œåˆ—è¡¨2çš„å¼•ç”¨è®¡æ•°å˜ä¸º1   </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l1.append(l2)             <span class="comment"># æŠŠåˆ—è¡¨2è¿½åŠ åˆ°l1ä¸­ä½œä¸ºç¬¬äºŒä¸ªå…ƒç´ ï¼Œåˆ—è¡¨2çš„å¼•ç”¨è®¡æ•°å˜ä¸º2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l2.append(l1)             <span class="comment"># æŠŠåˆ—è¡¨1è¿½åŠ åˆ°l2ä¸­ä½œä¸ºç¬¬äºŒä¸ªå…ƒç´ ï¼Œåˆ—è¡¨1çš„å¼•ç”¨è®¡æ•°å˜ä¸º2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># l1ä¸l2ä¹‹é—´æœ‰ç›¸äº’å¼•ç”¨</span></span><br><span class="line"><span class="comment"># l1 = [&#x27;xxx&#x27;çš„å†…å­˜åœ°å€,åˆ—è¡¨2çš„å†…å­˜åœ°å€]</span></span><br><span class="line"><span class="comment"># l2 = [&#x27;yyy&#x27;çš„å†…å­˜åœ°å€,åˆ—è¡¨1çš„å†…å­˜åœ°å€]</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l1</span><br><span class="line">[<span class="string">&#x27;xxx&#x27;</span>, [<span class="string">&#x27;yyy&#x27;</span>, [...]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l2</span><br><span class="line">[<span class="string">&#x27;yyy&#x27;</span>, [<span class="string">&#x27;xxx&#x27;</span>, [...]]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l1[<span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>]</span><br><span class="line"><span class="string">&#x27;xxx&#x27;</span></span><br></pre></td></tr></table></figure>

<p>å¾ªç¯å¼•ç”¨ä¼šå¯¼è‡´ï¼šå€¼ä¸å†è¢«ä»»ä½•åå­—å…³è”ï¼Œä½†æ˜¯å€¼çš„å¼•ç”¨è®¡æ•°å¹¶ä¸ä¼šä¸º0ï¼Œåº”è¯¥è¢«å›æ”¶ä½†ä¸èƒ½è¢«å›æ”¶ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿè¯•æƒ³ä¸€ä¸‹ï¼Œè¯·çœ‹å¦‚ä¸‹æ“ä½œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> l1 <span class="comment"># åˆ—è¡¨1çš„å¼•ç”¨è®¡æ•°å‡1ï¼Œåˆ—è¡¨1çš„å¼•ç”¨è®¡æ•°å˜ä¸º1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> l2 <span class="comment"># åˆ—è¡¨2çš„å¼•ç”¨è®¡æ•°å‡1ï¼Œåˆ—è¡¨2çš„å¼•ç”¨è®¡æ•°å˜ä¸º1</span></span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ï¼Œåªå‰©ä¸‹åˆ—è¡¨1ä¸åˆ—è¡¨2ä¹‹é—´çš„ç›¸äº’å¼•ç”¨ï¼Œä¸¤ä¸ªåˆ—è¡¨çš„å¼•ç”¨è®¡æ•°å‡ä¸ä¸º0ï¼Œä½†ä¸¤ä¸ªåˆ—è¡¨ä¸å†è¢«ä»»ä½•å…¶ä»–å¯¹è±¡å…³è”ï¼Œæ²¡æœ‰ä»»ä½•äººå¯ä»¥å†å¼•ç”¨åˆ°å®ƒä»¬ï¼Œæ‰€ä»¥å®ƒä¿©å ç”¨å†…å­˜ç©ºé—´åº”è¯¥è¢«å›æ”¶ï¼Œä½†ç”±äºç›¸äº’å¼•ç”¨çš„å­˜åœ¨ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°éƒ½ä¸ä¸º0ï¼Œå› æ­¤è¿™äº›å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜æ°¸è¿œä¸ä¼šè¢«é‡Šæ”¾ï¼Œæ‰€ä»¥å¾ªç¯å¼•ç”¨æ˜¯è‡´å‘½çš„ï¼Œè¿™ä¸æ‰‹åŠ¨è¿›è¡Œå†…å­˜ç®¡ç†æ‰€äº§ç”Ÿçš„å†…å­˜æ³„éœ²æ¯«æ— åŒºåˆ«ã€‚ æ‰€ä»¥Pythonå¼•å…¥äº†â€œæ ‡è®°-æ¸…é™¤â€ ä¸â€œåˆ†ä»£å›æ”¶â€æ¥åˆ†åˆ«è§£å†³å¼•ç”¨è®¡æ•°çš„å¾ªç¯å¼•ç”¨ä¸æ•ˆç‡ä½çš„é—®é¢˜</p>
<p><img src="https://pic1.zhimg.com/80/v2-3c62f9500a8809200caa264257b93b14_720w.jpg" alt="img"></p>
<h3 id="4-2-1-æ ‡è®°-æ¸…é™¤"><a href="#4-2-1-æ ‡è®°-æ¸…é™¤" class="headerlink" title="4.2.1 æ ‡è®°-æ¸…é™¤"></a>4.2.1 æ ‡è®°-æ¸…é™¤</h3><p>å®¹å™¨å¯¹è±¡ï¼ˆæ¯”å¦‚ï¼šlistï¼Œsetï¼Œdictï¼Œclassï¼Œinstanceï¼‰éƒ½å¯ä»¥åŒ…å«å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ï¼Œæ‰€ä»¥éƒ½å¯èƒ½äº§ç”Ÿå¾ªç¯å¼•ç”¨ã€‚è€Œâ€œæ ‡è®°-æ¸…é™¤â€è®¡æ•°å°±æ˜¯ä¸ºäº†è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚</p>
<p>åœ¨äº†è§£æ ‡è®°æ¸…é™¤ç®—æ³•å‰ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®ä¸€ç‚¹ï¼Œå…³äºå˜é‡çš„å­˜å‚¨ï¼Œå†…å­˜ä¸­æœ‰ä¸¤å—åŒºåŸŸï¼šå †åŒºä¸æ ˆåŒºï¼Œåœ¨å®šä¹‰å˜é‡æ—¶ï¼Œå˜é‡åä¸å€¼å†…å­˜åœ°å€çš„å…³è”å…³ç³»å­˜æ”¾äºæ ˆåŒºï¼Œå˜é‡å€¼å­˜æ”¾äºå †åŒºï¼Œå†…å­˜ç®¡ç†å›æ”¶çš„åˆ™æ˜¯å †åŒºçš„å†…å®¹ï¼Œè¯¦è§£å¦‚ä¸‹å›¾,</p>
<p>å®šä¹‰äº†ä¸¤ä¸ªå˜é‡x &#x3D; 10ã€y &#x3D; 20</p>
<p><img src="https://pic1.zhimg.com/80/v2-73d5845ef7dc5a403333d2099d456fc0_720w.jpg" alt="img"></p>
<p>å½“æˆ‘ä»¬æ‰§è¡Œx&#x3D;yæ—¶ï¼Œå†…å­˜ä¸­çš„æ ˆåŒºä¸å †åŒºå˜åŒ–å¦‚ä¸‹</p>
<p><img src="https://pic1.zhimg.com/80/v2-9ec5b20fd2c2d2e9c90194d57bcf7778_720w.jpg" alt="img"></p>
<p>æ ‡è®°&#x2F;æ¸…é™¤ç®—æ³•çš„åšæ³•æ˜¯å½“åº”ç”¨ç¨‹åºå¯ç”¨çš„å†…å­˜ç©ºé—´è¢«è€—å°½çš„æ—¶ï¼Œå°±ä¼šåœæ­¢æ•´ä¸ªç¨‹åºï¼Œç„¶åè¿›è¡Œä¸¤é¡¹å·¥ä½œï¼Œç¬¬ä¸€é¡¹åˆ™æ˜¯æ ‡è®°ï¼Œç¬¬äºŒé¡¹åˆ™æ˜¯æ¸…é™¤</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€æ ‡è®°</span></span><br><span class="line">é€šä¿—åœ°è®²å°±æ˜¯ï¼šæ ‡è®°çš„è¿‡ç¨‹å°±è¡Œç›¸å½“äºä»æ ˆåŒºå‡ºå‘ä¸€æ¡çº¿ï¼Œâ€œè¿æ¥â€åˆ°å †åŒºï¼Œå†ç”±å †åŒºé—´æ¥â€œè¿æ¥â€åˆ°å…¶ä»–åœ°å€ï¼Œå‡¡æ˜¯è¢«è¿™æ¡è‡ªæ ˆåŒºèµ·å§‹çš„çº¿è¿æ¥åˆ°å†…å­˜ç©ºé—´éƒ½å±äºå¯ä»¥è®¿è¾¾çš„ï¼Œä¼šè¢«æ ‡è®°ä¸ºå­˜æ´»</span><br><span class="line"></span><br><span class="line">å…·ä½“åœ°ï¼šæ ‡è®°çš„è¿‡ç¨‹å…¶å®å°±æ˜¯ï¼Œéå†æ‰€æœ‰çš„GC Rootså¯¹è±¡(æ ˆåŒºä¸­çš„æ‰€æœ‰å†…å®¹æˆ–è€…çº¿ç¨‹éƒ½å¯ä»¥ä½œä¸ºGC Rootså¯¹è±¡ï¼‰ï¼Œç„¶åå°†æ‰€æœ‰GC Rootsçš„å¯¹è±¡å¯ä»¥ç›´æ¥æˆ–é—´æ¥è®¿é—®åˆ°çš„å¯¹è±¡æ ‡è®°ä¸ºå­˜æ´»çš„å¯¹è±¡ï¼Œå…¶ä½™çš„å‡ä¸ºéå­˜æ´»å¯¹è±¡ï¼Œåº”è¯¥è¢«æ¸…é™¤ã€‚</span><br><span class="line">                          </span><br><span class="line"><span class="comment">#2ã€æ¸…é™¤</span></span><br><span class="line">æ¸…é™¤çš„è¿‡ç¨‹å°†éå†å †ä¸­æ‰€æœ‰çš„å¯¹è±¡ï¼Œå°†æ²¡æœ‰æ ‡è®°å­˜æ´»çš„å¯¹è±¡å…¨éƒ¨æ¸…é™¤æ‰ã€‚</span><br></pre></td></tr></table></figure>

<p>ç›´æ¥å¼•ç”¨æŒ‡çš„æ˜¯ä»æ ˆåŒºå‡ºå‘ç›´æ¥å¼•ç”¨åˆ°çš„å†…å­˜åœ°å€ï¼Œé—´æ¥å¼•ç”¨æŒ‡çš„æ˜¯ä»æ ˆåŒºå‡ºå‘å¼•ç”¨åˆ°å †åŒºåå†è¿›ä¸€æ­¥å¼•ç”¨åˆ°çš„å†…å­˜åœ°å€ï¼Œä»¥æˆ‘ä»¬ä¹‹å‰çš„ä¸¤ä¸ªåˆ—è¡¨l1ä¸l2ä¸ºä¾‹ç”»å‡ºå¦‚ä¸‹å›¾åƒ</p>
<p><img src="https://pic3.zhimg.com/80/v2-1bfee07a84fc747da5980d990430d10a_720w.jpg" alt="img"></p>
<p>å½“æˆ‘ä»¬åŒæ—¶åˆ é™¤l1ä¸l2æ—¶ï¼Œä¼šæ¸…ç†åˆ°æ ˆåŒºä¸­l1ä¸l2çš„å†…å®¹</p>
<p><img src="https://pic2.zhimg.com/80/v2-509de2bd1adfb0566368719c73620fbd_720w.jpg" alt="img"></p>
<p>è¿™æ ·åœ¨å¯ç”¨æ ‡è®°æ¸…é™¤ç®—æ³•æ—¶ï¼Œå‘ç°æ ˆåŒºå†…ä¸å†æœ‰l1ä¸l2ï¼ˆåªå‰©ä¸‹å †åŒºå†…äºŒè€…çš„ç›¸äº’å¼•ç”¨ï¼‰ï¼Œäºæ˜¯åˆ—è¡¨1ä¸åˆ—è¡¨2éƒ½æ²¡æœ‰è¢«æ ‡è®°ä¸ºå­˜æ´»ï¼ŒäºŒè€…ä¼šè¢«æ¸…ç†æ‰ï¼Œè¿™æ ·å°±è§£å†³äº†å¾ªç¯å¼•ç”¨å¸¦æ¥çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚</p>
<h3 id="4-2-2-åˆ†ä»£å›æ”¶"><a href="#4-2-2-åˆ†ä»£å›æ”¶" class="headerlink" title="4.2.2 åˆ†ä»£å›æ”¶"></a>4.2.2 åˆ†ä»£å›æ”¶</h3><p>èƒŒæ™¯ï¼š</p>
<p>åŸºäºå¼•ç”¨è®¡æ•°çš„å›æ”¶æœºåˆ¶ï¼Œæ¯æ¬¡å›æ”¶å†…å­˜ï¼Œéƒ½éœ€è¦æŠŠæ‰€æœ‰å¯¹è±¡çš„å¼•ç”¨è®¡æ•°éƒ½éå†ä¸€éï¼Œè¿™æ˜¯éå¸¸æ¶ˆè€—æ—¶é—´çš„ï¼Œäºæ˜¯å¼•å…¥äº†åˆ†ä»£å›æ”¶æ¥æé«˜å›æ”¶æ•ˆç‡ï¼Œåˆ†ä»£å›æ”¶é‡‡ç”¨çš„æ˜¯ç”¨â€œç©ºé—´æ¢æ—¶é—´â€çš„ç­–ç•¥ã€‚</p>
<p><strong>åˆ†ä»£ï¼š</strong></p>
<p>åˆ†ä»£å›æ”¶çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šåœ¨å†ç»å¤šæ¬¡æ‰«æçš„æƒ…å†µä¸‹ï¼Œéƒ½æ²¡æœ‰è¢«å›æ”¶çš„å˜é‡ï¼Œgcæœºåˆ¶å°±ä¼šè®¤ä¸ºï¼Œè¯¥å˜é‡æ˜¯å¸¸ç”¨å˜é‡ï¼Œgcå¯¹å…¶æ‰«æçš„é¢‘ç‡ä¼šé™ä½ï¼Œå…·ä½“å®ç°åŸç†å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">åˆ†ä»£æŒ‡çš„æ˜¯æ ¹æ®å­˜æ´»æ—¶é—´æ¥ä¸ºå˜é‡åˆ’åˆ†ä¸åŒç­‰çº§ï¼ˆä¹Ÿå°±æ˜¯ä¸åŒçš„ä»£ï¼‰</span><br><span class="line"></span><br><span class="line">æ–°å®šä¹‰çš„å˜é‡ï¼Œæ”¾åˆ°æ–°ç”Ÿä»£è¿™ä¸ªç­‰çº§ä¸­ï¼Œå‡è®¾æ¯éš”<span class="number">1</span>åˆ†é’Ÿæ‰«ææ–°ç”Ÿä»£ä¸€æ¬¡ï¼Œå¦‚æœå‘ç°å˜é‡ä¾ç„¶è¢«å¼•ç”¨ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„æƒé‡ï¼ˆæƒé‡æœ¬è´¨å°±æ˜¯ä¸ªæ•´æ•°ï¼‰åŠ ä¸€ï¼Œå½“å˜é‡çš„æƒé‡å¤§äºæŸä¸ªè®¾å®šå¾—å€¼ï¼ˆå‡è®¾ä¸º<span class="number">3</span>ï¼‰ï¼Œä¼šå°†å®ƒç§»åŠ¨åˆ°æ›´é«˜ä¸€çº§çš„é’æ˜¥ä»£ï¼Œé’æ˜¥ä»£çš„gcæ‰«æçš„é¢‘ç‡ä½äºæ–°ç”Ÿä»£ï¼ˆæ‰«ææ—¶é—´é—´éš”æ›´é•¿ï¼‰ï¼Œå‡è®¾<span class="number">5</span>åˆ†é’Ÿæ‰«æé’æ˜¥ä»£ä¸€æ¬¡ï¼Œè¿™æ ·æ¯æ¬¡gcéœ€è¦æ‰«æçš„å˜é‡çš„æ€»ä¸ªæ•°å°±å˜å°‘äº†ï¼ŒèŠ‚çœäº†æ‰«æçš„æ€»æ—¶é—´ï¼Œæ¥ä¸‹æ¥ï¼Œé’æ˜¥ä»£ä¸­çš„å¯¹è±¡ï¼Œä¹Ÿä¼šä»¥åŒæ ·çš„æ–¹å¼è¢«ç§»åŠ¨åˆ°è€å¹´ä»£ä¸­ã€‚ä¹Ÿå°±æ˜¯ç­‰çº§ï¼ˆä»£ï¼‰è¶Šé«˜ï¼Œè¢«åƒåœ¾å›æ”¶æœºåˆ¶æ‰«æçš„é¢‘ç‡è¶Šä½</span><br></pre></td></tr></table></figure>

<p><strong>å›æ”¶ï¼š</strong></p>
<p>å›æ”¶ä¾ç„¶æ˜¯ä½¿ç”¨å¼•ç”¨è®¡æ•°ä½œä¸ºå›æ”¶çš„ä¾æ®</p>
<p><img src="https://pic1.zhimg.com/80/v2-2458685b385b338192d6b90628ed92a8_720w.jpg" alt="img"></p>
<p>è™½ç„¶åˆ†ä»£å›æ”¶å¯ä»¥èµ·åˆ°æå‡æ•ˆç‡çš„æ•ˆæœï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€å®šçš„ç¼ºç‚¹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¾‹å¦‚ä¸€ä¸ªå˜é‡åˆšåˆšä»æ–°ç”Ÿä»£ç§»å…¥é’æ˜¥ä»£ï¼Œè¯¥å˜é‡çš„ç»‘å®šå…³ç³»å°±è§£é™¤äº†ï¼Œè¯¥å˜é‡åº”è¯¥è¢«å›æ”¶ï¼Œä½†é’æ˜¥ä»£çš„æ‰«æé¢‘ç‡ä½äºæ–°ç”Ÿä»£ï¼Œ</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>08-åŸºæœ¬æ•°æ®ç±»å‹åŠå†…ç½®æ–¹æ³•</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/08_%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%8F%8A%E5%86%85%E7%BD%AE%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<h2 id="ä¸€-å¼•å­"><a href="#ä¸€-å¼•å­" class="headerlink" title="ä¸€ å¼•å­"></a>ä¸€ å¼•å­</h2><p> æ•°æ®ç±»å‹æ˜¯ç”¨æ¥è®°å½•äº‹ç‰©çŠ¶æ€çš„ï¼Œè€Œäº‹ç‰©çš„çŠ¶æ€æ˜¯ä¸æ–­å˜åŒ–çš„(å¦‚:ä¸€ä¸ªäººå¹´é¾„çš„å¢é•¿ï¼ˆæ“ä½œintç±»å‹ï¼‰ ï¼Œå•ä¸ªäººåçš„ä¿®æ”¹ï¼ˆæ“ä½œstrç±»å‹ï¼‰ï¼Œå­¦ç”Ÿåˆ—è¡¨ä¸­å¢åŠ å­¦ç”Ÿï¼ˆæ“ä½œlistç±»å‹ï¼‰ç­‰)ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬åœ¨å¼€å‘ç¨‹åºæ—¶éœ€è¦é¢‘ç¹å¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼Œä¸ºäº†æå‡æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼Œ pythoné’ˆå¯¹è¿™äº›å¸¸ç”¨çš„æ“ä½œï¼Œä¸ºæ¯ä¸€ç§æ•°æ®ç±»å‹å†…ç½®äº†ä¸€ç³»åˆ—æ–¹æ³•ã€‚æœ¬ç« çš„ä¸»é¢˜å°±æ˜¯å¸¦å¤§å®¶è¯¦ç»†äº†è§£ä¸‹å®ƒä»¬ï¼Œä»¥åŠæ¯ç§æ•°æ®ç±»å‹çš„è¯¦ç»†å®šä¹‰ã€ç±»å‹è½¬æ¢ã€‚</p>
<p><img src="https://pic1.zhimg.com/80/v2-10e28bbd95c783f2266fea32400e48d0_720w.jpg" alt="img"></p>
<h2 id="äºŒ-æ•°å­—ç±»å‹intä¸float"><a href="#äºŒ-æ•°å­—ç±»å‹intä¸float" class="headerlink" title="äºŒ æ•°å­—ç±»å‹intä¸float"></a>äºŒ æ•°å­—ç±»å‹intä¸float</h2><p><img src="https://pic3.zhimg.com/80/v2-c2179471827cd00d18d8a286eb708fd6_720w.jpg" alt="img"></p>
<h2 id="2-1-å®šä¹‰"><a href="#2-1-å®šä¹‰" class="headerlink" title="2.1 å®šä¹‰"></a>2.1 å®šä¹‰</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1ã€å®šä¹‰ï¼š</span></span><br><span class="line"><span class="comment"># 1.1 æ•´å‹intçš„å®šä¹‰</span></span><br><span class="line">age=<span class="number">10</span>  <span class="comment"># æœ¬è´¨age = int(10)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.2 æµ®ç‚¹å‹floatçš„å®šä¹‰</span></span><br><span class="line">salary=<span class="number">3000.3</span>  <span class="comment"># æœ¬è´¨salary=float(3000.3)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šåå­—+æ‹¬å·çš„æ„æ€å°±æ˜¯è°ƒç”¨æŸä¸ªåŠŸèƒ½ï¼Œæ¯”å¦‚</span></span><br><span class="line"><span class="comment"># print(...)è°ƒç”¨æ‰“å°åŠŸèƒ½</span></span><br><span class="line"><span class="comment"># int(...)è°ƒç”¨åˆ›å»ºæ•´å‹æ•°æ®çš„åŠŸèƒ½</span></span><br><span class="line"><span class="comment"># float(...)è°ƒç”¨åˆ›å»ºæµ®ç‚¹å‹æ•°æ®çš„åŠŸèƒ½</span></span><br></pre></td></tr></table></figure>

<h2 id="2-2-ç±»å‹è½¬æ¢"><a href="#2-2-ç±»å‹è½¬æ¢" class="headerlink" title="2.2 ç±»å‹è½¬æ¢"></a>2.2 ç±»å‹è½¬æ¢</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1ã€æ•°æ®ç±»å‹è½¬æ¢</span></span><br><span class="line"><span class="comment"># 1.1 intå¯ä»¥å°†ç”±çº¯æ•´æ•°æ„æˆçš„å­—ç¬¦ä¸²ç›´æ¥è½¬æ¢æˆæ•´å‹ï¼Œè‹¥åŒ…å«å…¶ä»–ä»»æ„éæ•´æ•°ç¬¦å·ï¼Œåˆ™ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">&#x27;123&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res = <span class="built_in">int</span>(s)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res,<span class="built_in">type</span>(res)</span><br><span class="line">(<span class="number">123</span>, &lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">int</span>&#x27;&gt;)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">int</span>(<span class="params"><span class="string">&#x27;12.3&#x27;</span></span>) # é”™è¯¯æ¼”ç¤ºï¼šå­—ç¬¦ä¸²å†…åŒ…å«äº†éæ•´æ•°ç¬¦å·.</span></span><br><span class="line"><span class="class"><span class="title">Traceback</span> (<span class="params">most recent call last</span>):</span></span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">ValueError: invalid literal <span class="keyword">for</span> <span class="built_in">int</span>() <span class="keyword">with</span> base <span class="number">10</span>: <span class="string">&#x27;12.3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.2 è¿›åˆ¶è½¬æ¢</span></span><br><span class="line"><span class="comment"># åè¿›åˆ¶è½¬å…¶ä»–è¿›åˆ¶</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">bin</span>(<span class="number">3</span>)</span><br><span class="line"><span class="string">&#x27;0b11&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">oct</span>(<span class="number">9</span>)</span><br><span class="line"><span class="string">&#x27;0o11&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">hex</span>(<span class="number">17</span>)</span><br><span class="line"><span class="string">&#x27;0x11&#x27;</span></span><br><span class="line"><span class="comment"># å…¶ä»–è¿›åˆ¶è½¬åè¿›åˆ¶</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">int</span>(<span class="string">&#x27;0b11&#x27;</span>,<span class="number">2</span>)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">int</span>(<span class="string">&#x27;0o11&#x27;</span>,<span class="number">8</span>)</span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">int</span>(<span class="string">&#x27;0x11&#x27;</span>,<span class="number">16</span>)</span><br><span class="line"><span class="number">17</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.3 floatåŒæ ·å¯ä»¥ç”¨æ¥åšæ•°æ®ç±»å‹çš„è½¬æ¢</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">&#x27;12.3&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res=<span class="built_in">float</span>(s)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res,<span class="built_in">type</span>(res)</span><br><span class="line">(<span class="number">12.3</span>, &lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">float</span>&#x27;&gt;)</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3-ä½¿ç”¨"><a href="#2-3-ä½¿ç”¨" class="headerlink" title="2.3 ä½¿ç”¨"></a>2.3 ä½¿ç”¨</h2><p>æ•°å­—ç±»å‹ä¸»è¦å°±æ˜¯ç”¨æ¥åšæ•°å­¦è¿ç®—ä¸æ¯”è¾ƒè¿ç®—ï¼Œå› æ­¤æ•°å­—ç±»å‹é™¤äº†ä¸è¿ç®—ç¬¦ç»“åˆä½¿ç”¨ä¹‹å¤–ï¼Œå¹¶æ— éœ€è¦æŒæ¡çš„å†…ç½®æ–¹æ³•</p>
<p><img src="https://pic3.zhimg.com/80/v2-45110f0279c9d352ab9c17dca57c140e_720w.jpg" alt="img"></p>
<h2 id="ä¸‰-å­—ç¬¦ä¸²"><a href="#ä¸‰-å­—ç¬¦ä¸²" class="headerlink" title="ä¸‰ å­—ç¬¦ä¸²"></a>ä¸‰ å­—ç¬¦ä¸²</h2><p><img src="https://pic4.zhimg.com/80/v2-15b3e5110d3102e523299c53ddadf663_720w.jpg" alt="img"></p>
<h2 id="3-1-å®šä¹‰ï¼š"><a href="#3-1-å®šä¹‰ï¼š" class="headerlink" title="3.1 å®šä¹‰ï¼š"></a>3.1 å®šä¹‰ï¼š</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ï¼šåœ¨å•å¼•å·\åŒå¼•å·\ä¸‰å¼•å·å†…åŒ…å«ä¸€ä¸²å­—ç¬¦</span></span><br><span class="line">name1 = <span class="string">&#x27;jason&#x27;</span>  <span class="comment"># æœ¬è´¨:name = str(&#x27;ä»»æ„å½¢å¼å†…å®¹&#x27;)</span></span><br><span class="line">name2 = <span class="string">&quot;lili&quot;</span>  <span class="comment"># æœ¬è´¨:name = str(&quot;ä»»æ„å½¢å¼å†…å®¹&quot;)</span></span><br><span class="line">name3 = <span class="string">&quot;&quot;&quot;ricky&quot;&quot;&quot;</span>  <span class="comment"># æœ¬è´¨:name = str(&quot;&quot;&quot;ä»»æ„å½¢å¼å†…å®¹&quot;&quot;&quot;)</span></span><br></pre></td></tr></table></figure>

<h2 id="3-2-ç±»å‹è½¬æ¢"><a href="#3-2-ç±»å‹è½¬æ¢" class="headerlink" title="3.2 ç±»å‹è½¬æ¢"></a>3.2 ç±»å‹è½¬æ¢</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ•°æ®ç±»å‹è½¬æ¢ï¼šstr()å¯ä»¥å°†ä»»æ„æ•°æ®ç±»å‹è½¬æ¢æˆå­—ç¬¦ä¸²ç±»å‹ï¼Œä¾‹å¦‚ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">type</span>(<span class="built_in">str</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])) <span class="comment"># list-&gt;str</span></span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">str</span>&#x27;&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">type</span>(<span class="params"><span class="built_in">str</span>(<span class="params">&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;jason&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">18</span>&#125;</span>)</span>) # <span class="title">dict</span>-&gt;<span class="built_in">str</span></span></span><br><span class="line"><span class="class">&lt;<span class="keyword">class</span> &#x27;<span class="built_in">str</span>&#x27;&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="built_in">type</span>(<span class="built_in">str</span>((1,2,3)))  # <span class="built_in">tuple</span>-&gt;<span class="built_in">str</span></span></span><br><span class="line"><span class="class">&lt;<span class="keyword">class</span> &#x27;<span class="built_in">str</span>&#x27;&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="built_in">type</span>(<span class="built_in">str</span>(&#123;1,2,3,4&#125;)) # <span class="built_in">set</span>-&gt;<span class="built_in">str</span></span></span><br><span class="line"><span class="class">&lt;<span class="keyword">class</span> &#x27;<span class="built_in">str</span>&#x27;&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-3-ä½¿ç”¨"><a href="#3-3-ä½¿ç”¨" class="headerlink" title="3.3 ä½¿ç”¨"></a>3.3 ä½¿ç”¨</h2><h3 id="3-3-1-ä¼˜å…ˆæŒæ¡çš„æ“ä½œ"><a href="#3-3-1-ä¼˜å…ˆæŒæ¡çš„æ“ä½œ" class="headerlink" title="3.3.1 ä¼˜å…ˆæŒæ¡çš„æ“ä½œ"></a>3.3.1 ä¼˜å…ˆæŒæ¡çš„æ“ä½œ</h3><p><img src="https://pic4.zhimg.com/80/v2-fefd043609f271fb50a01020cea03f73_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = <span class="string">&#x27;hello python!&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.æŒ‰ç´¢å¼•å–å€¼(æ­£å‘å–ï¼Œåå‘å–)ï¼š</span></span><br><span class="line"><span class="comment"># 1.1 æ­£å‘å–(ä»å·¦å¾€å³)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1[<span class="number">6</span>]</span><br><span class="line">p</span><br><span class="line"><span class="comment"># 1.2 åå‘å–(è´Ÿå·è¡¨ç¤ºä»å³å¾€å·¦)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1[-<span class="number">4</span>]</span><br><span class="line">h</span><br><span class="line"><span class="comment"># 1.3 å¯¹äºstræ¥è¯´ï¼Œåªèƒ½æŒ‰ç…§ç´¢å¼•å–å€¼ï¼Œä¸èƒ½æ”¹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1[<span class="number">0</span>]=<span class="string">&#x27;H&#x27;</span> <span class="comment"># æŠ¥é”™TypeError</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.åˆ‡ç‰‡(é¡¾å¤´ä¸é¡¾å°¾ï¼Œæ­¥é•¿)</span></span><br><span class="line"><span class="comment"># 2.1 é¡¾å¤´ä¸é¡¾å°¾ï¼šå–å‡ºç´¢å¼•ä¸º0åˆ°8çš„æ‰€æœ‰å­—ç¬¦</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1[<span class="number">0</span>:<span class="number">9</span>]  </span><br><span class="line">hello pyt</span><br><span class="line"><span class="comment"># 2.2 æ­¥é•¿ï¼š0:9:2,ç¬¬ä¸‰ä¸ªå‚æ•°2ä»£è¡¨æ­¥é•¿ï¼Œä¼šä»0å¼€å§‹ï¼Œæ¯æ¬¡ç´¯åŠ ä¸€ä¸ª2å³å¯ï¼Œæ‰€ä»¥ä¼šå–å‡ºç´¢å¼•0ã€2ã€4ã€6ã€8çš„å­—ç¬¦</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1[<span class="number">0</span>:<span class="number">9</span>:<span class="number">2</span>]  </span><br><span class="line">hlopt </span><br><span class="line"><span class="comment"># 2.3 åå‘åˆ‡ç‰‡</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1[::-<span class="number">1</span>]  <span class="comment"># -1è¡¨ç¤ºä»å³å¾€å·¦ä¾æ¬¡å–å€¼</span></span><br><span class="line">!nohtyp olleh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.é•¿åº¦len</span></span><br><span class="line"><span class="comment"># 3.1 è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå³å­—ç¬¦çš„ä¸ªæ•°ï¼Œä½†å‡¡å­˜åœ¨äºå¼•å·å†…çš„éƒ½ç®—ä½œå­—ç¬¦)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(str1) <span class="comment"># ç©ºæ ¼ä¹Ÿç®—å­—ç¬¦</span></span><br><span class="line"><span class="number">13</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æˆå‘˜è¿ç®— in å’Œ not in    </span></span><br><span class="line"><span class="comment"># 4.1 int:åˆ¤æ–­hello æ˜¯å¦åœ¨ str1é‡Œé¢</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;hello&#x27;</span> <span class="keyword">in</span> str1  </span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="comment"># 4.2 not in:åˆ¤æ–­tony æ˜¯å¦ä¸åœ¨ str1é‡Œé¢</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;tony&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> str1 </span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.stripç§»é™¤å­—ç¬¦ä¸²é¦–å°¾æŒ‡å®šçš„å­—ç¬¦(é»˜è®¤ç§»é™¤ç©ºæ ¼)</span></span><br><span class="line"><span class="comment"># 5.1 æ‹¬å·å†…ä¸æŒ‡å®šå­—ç¬¦ï¼Œé»˜è®¤ç§»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦(ç©ºæ ¼ã€\nã€\t)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = <span class="string">&#x27;  life is short!  &#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1.strip()  </span><br><span class="line">life <span class="keyword">is</span> short!</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.2 æ‹¬å·å†…æŒ‡å®šå­—ç¬¦ï¼Œç§»é™¤é¦–å°¾æŒ‡å®šçš„å­—ç¬¦</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str2 = <span class="string">&#x27;**tony**&#x27;</span>  </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str2.strip(<span class="string">&#x27;*&#x27;</span>)  </span><br><span class="line">tony</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.åˆ‡åˆ†split</span></span><br><span class="line"><span class="comment"># 6.1 æ‹¬å·å†…ä¸æŒ‡å®šå­—ç¬¦ï¼Œé»˜è®¤ä»¥ç©ºæ ¼ä½œä¸ºåˆ‡åˆ†ç¬¦å·</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str3=<span class="string">&#x27;hello world&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str3.split()</span><br><span class="line">[<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>]</span><br><span class="line"><span class="comment"># 6.2 æ‹¬å·å†…æŒ‡å®šåˆ†éš”å­—ç¬¦ï¼Œåˆ™æŒ‰ç…§æ‹¬å·å†…æŒ‡å®šçš„å­—ç¬¦åˆ‡å‰²å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str4 = <span class="string">&#x27;127.0.0.1&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str4.split(<span class="string">&#x27;.&#x27;</span>)  </span><br><span class="line">[<span class="string">&#x27;127&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;0&#x27;</span>, <span class="string">&#x27;1&#x27;</span>]  <span class="comment"># æ³¨æ„:splitåˆ‡å‰²å¾—åˆ°çš„ç»“æœæ˜¯åˆ—è¡¨æ•°æ®ç±»å‹</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.å¾ªç¯</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str5 = <span class="string">&#x27;ä»Šå¤©ä½ å¥½å—ï¼Ÿ&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> line <span class="keyword">in</span> str5:  <span class="comment"># ä¾æ¬¡å–å‡ºå­—ç¬¦ä¸²ä¸­æ¯ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(line)</span><br><span class="line">...</span><br><span class="line">ä»Š</span><br><span class="line">å¤©</span><br><span class="line">ä½ </span><br><span class="line">å¥½</span><br><span class="line">å—</span><br><span class="line">ï¼Ÿ</span><br></pre></td></tr></table></figure>

<h3 id="3-3-2-éœ€è¦æŒæ¡çš„æ“ä½œ"><a href="#3-3-2-éœ€è¦æŒæ¡çš„æ“ä½œ" class="headerlink" title="3.3.2 éœ€è¦æŒæ¡çš„æ“ä½œ"></a>3.3.2 éœ€è¦æŒæ¡çš„æ“ä½œ</h3><p><img src="https://pic4.zhimg.com/80/v2-3870f73c837fd6488da8a24bec358a6f_720w.jpg" alt="img"></p>
<p><strong>1.strip, lstrip, rstrip</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1 = <span class="string">&#x27;**tony***&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1.strip(<span class="string">&#x27;*&#x27;</span>)  <span class="comment"># ç§»é™¤å·¦å³ä¸¤è¾¹çš„æŒ‡å®šå­—ç¬¦</span></span><br><span class="line"><span class="string">&#x27;tony&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1.lstrip(<span class="string">&#x27;*&#x27;</span>)  <span class="comment"># åªç§»é™¤å·¦è¾¹çš„æŒ‡å®šå­—ç¬¦</span></span><br><span class="line">tony***</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str1.rstrip(<span class="string">&#x27;*&#x27;</span>)  <span class="comment"># åªç§»é™¤å³è¾¹çš„æŒ‡å®šå­—ç¬¦</span></span><br><span class="line">**tony</span><br></pre></td></tr></table></figure>

<p><strong>2.lower(),upper()</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str2 = <span class="string">&#x27;My nAme is tonYï¼&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str2.lower()  <span class="comment"># å°†è‹±æ–‡å­—ç¬¦ä¸²å…¨éƒ¨å˜å°å†™</span></span><br><span class="line">my name <span class="keyword">is</span> tonyï¼</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str2.upper()  <span class="comment"># å°†è‹±æ–‡å­—ç¬¦ä¸²å…¨éƒ¨å˜å¤§å†™</span></span><br><span class="line">MY NAME IS TONYï¼</span><br></pre></td></tr></table></figure>

<p><strong>3.startswith,endswith</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str3 = <span class="string">&#x27;tony jam&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># startswith()åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æ‹¬å·å†…æŒ‡å®šçš„å­—ç¬¦å¼€å¤´ï¼Œç»“æœä¸ºå¸ƒå°”å€¼Trueæˆ–False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str3.startswith(<span class="string">&#x27;t&#x27;</span>) </span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str3.startswith(<span class="string">&#x27;j&#x27;</span>)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="comment"># endswith()åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æ‹¬å·å†…æŒ‡å®šçš„å­—ç¬¦ç»“å°¾ï¼Œç»“æœä¸ºå¸ƒå°”å€¼Trueæˆ–False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str3.endswith(<span class="string">&#x27;jam&#x27;</span>)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str3.endswith(<span class="string">&#x27;tony&#x27;</span>)  </span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<p><strong>4.æ ¼å¼åŒ–è¾“å‡ºä¹‹format</strong></p>
<p>ä¹‹å‰æˆ‘ä»¬ä½¿ç”¨%sæ¥åšå­—ç¬¦ä¸²çš„æ ¼å¼åŒ–è¾“å‡ºæ“ä½œï¼Œåœ¨ä¼ å€¼æ—¶ï¼Œå¿…é¡»ä¸¥æ ¼æŒ‰ç…§ä½ç½®ä¸%sä¸€ä¸€å¯¹åº”ï¼Œè€Œå­—ç¬¦ä¸²çš„å†…ç½®æ–¹æ³•formatåˆ™æä¾›äº†ä¸€ç§ä¸ä¾èµ–ä½ç½®çš„ä¼ å€¼æ–¹å¼</p>
<p>æ¡ˆä¾‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># formatæ‹¬å·å†…åœ¨ä¼ å‚æ•°æ—¶å®Œå…¨å¯ä»¥æ‰“ä¹±é¡ºåºï¼Œä½†ä»ç„¶èƒ½æŒ‡åé“å§“åœ°ä¸ºæŒ‡å®šçš„å‚æ•°ä¼ å€¼ï¼Œname=â€˜tonyâ€™å°±æ˜¯ä¼ ç»™&#123;name&#125;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str4 = <span class="string">&#x27;my name is &#123;name&#125;, my age is &#123;age&#125;!&#x27;</span>.<span class="built_in">format</span>(age=<span class="number">18</span>,name=<span class="string">&#x27;tony&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str4  </span><br><span class="line"><span class="string">&#x27;my name is tony, my age is 18!&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str4 = <span class="string">&#x27;my name is &#123;name&#125;&#123;name&#125;&#123;name&#125;, my age is &#123;name&#125;!&#x27;</span>.<span class="built_in">format</span>(name=<span class="string">&#x27;tony&#x27;</span>, age=<span class="number">18</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str4  </span><br><span class="line"><span class="string">&#x27;my name is tonytonytony, my age is tony!&#x27;</span></span><br></pre></td></tr></table></figure>

<p>formatçš„å…¶ä»–ä½¿ç”¨æ–¹å¼ï¼ˆäº†è§£ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç±»ä¼¼äº%sçš„ç”¨æ³•ï¼Œä¼ å…¥çš„å€¼ä¼šæŒ‰ç…§ä½ç½®ä¸&#123;&#125;ä¸€ä¸€å¯¹åº”</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str4 = <span class="string">&#x27;my name is &#123;&#125;, my age is &#123;&#125;!&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;tony&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str4 </span><br><span class="line">my name <span class="keyword">is</span> tony, my age <span class="keyword">is</span> <span class="number">18</span>!</span><br><span class="line"><span class="comment"># æŠŠformatä¼ å…¥çš„å¤šä¸ªå€¼å½“ä½œä¸€ä¸ªåˆ—è¡¨ï¼Œç„¶åç”¨&#123;ç´¢å¼•&#125;å–å€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str4 = <span class="string">&#x27;my name is &#123;0&#125;, my age is &#123;1&#125;!&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;tony&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str4</span><br><span class="line">my name <span class="keyword">is</span> tony, my age <span class="keyword">is</span> <span class="number">18</span>!</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str4 = <span class="string">&#x27;my name is &#123;1&#125;, my age is &#123;0&#125;!&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;tony&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str4  </span><br><span class="line">my name <span class="keyword">is</span> <span class="number">18</span>, my age <span class="keyword">is</span> tony!</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str4 = <span class="string">&#x27;my name is &#123;1&#125;, my age is &#123;1&#125;!&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;tony&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str4  </span><br><span class="line">my name <span class="keyword">is</span> <span class="number">18</span>, my age <span class="keyword">is</span> <span class="number">18</span>!</span><br></pre></td></tr></table></figure>

<p><strong>5.split,rsplit</strong></p>
<p><img src="https://pic4.zhimg.com/80/v2-56cf164d7e6dc3467c228bf141f1585b_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># splitä¼šæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºå¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ‡åˆ†ï¼Œå¯ä»¥æŒ‡å®šåˆ‡å‰²æ¬¡æ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str5=<span class="string">&#x27;C:/a/b/c/d.txt&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str5.split(<span class="string">&#x27;/&#x27;</span>,<span class="number">1</span>)</span><br><span class="line">[<span class="string">&#x27;C:&#x27;</span>, <span class="string">&#x27;a/b/c/d.txt&#x27;</span>]  </span><br><span class="line"></span><br><span class="line"><span class="comment"># rsplitåˆšå¥½ä¸splitç›¸åï¼Œä»å³å¾€å·¦åˆ‡å‰²ï¼Œå¯ä»¥æŒ‡å®šåˆ‡å‰²æ¬¡æ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str5=<span class="string">&#x27;a|b|c&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str5.rsplit(<span class="string">&#x27;|&#x27;</span>,<span class="number">1</span>)</span><br><span class="line">[<span class="string">&#x27;a|b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p><strong>6.join</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä»å¯è¿­ä»£å¯¹è±¡ä¸­å–å‡ºå¤šä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åæŒ‰ç…§æŒ‡å®šçš„åˆ†éš”ç¬¦è¿›è¡Œæ‹¼æ¥ï¼Œæ‹¼æ¥çš„ç»“æœä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;%&#x27;</span>.join(<span class="string">&#x27;hello&#x27;</span>) <span class="comment"># ä»å­—ç¬¦ä¸²&#x27;hello&#x27;ä¸­å–å‡ºå¤šä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åæŒ‰ç…§%ä½œä¸ºåˆ†éš”ç¬¦å·è¿›è¡Œæ‹¼æ¥</span></span><br><span class="line"><span class="string">&#x27;h%e%l%l%o&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;|&#x27;</span>.join([<span class="string">&#x27;tony&#x27;</span>,<span class="string">&#x27;18&#x27;</span>,<span class="string">&#x27;read&#x27;</span>])  <span class="comment"># ä»åˆ—è¡¨ä¸­å–å‡ºå¤šä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åæŒ‰ç…§*ä½œä¸ºåˆ†éš”ç¬¦å·è¿›è¡Œæ‹¼æ¥</span></span><br><span class="line"><span class="string">&#x27;tony|18|read&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>7.replace</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”¨æ–°çš„å­—ç¬¦æ›¿æ¢å­—ç¬¦ä¸²ä¸­æ—§çš„å­—ç¬¦</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str7 = <span class="string">&#x27;my name is tony, my age is 18!&#x27;</span>  <span class="comment"># å°†tonyçš„å¹´é¾„ç”±18å²æ”¹æˆ73å²</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str7 = str7.replace(<span class="string">&#x27;18&#x27;</span>, <span class="string">&#x27;73&#x27;</span>)  <span class="comment"># è¯­æ³•:replace(&#x27;æ—§å†…å®¹&#x27;, &#x27;æ–°å†…å®¹&#x27;)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str7</span><br><span class="line">my name <span class="keyword">is</span> tony, my age <span class="keyword">is</span> <span class="number">73</span>!</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥æŒ‡å®šä¿®æ”¹çš„ä¸ªæ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str7 = <span class="string">&#x27;my name is tony, my age is 18!&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str7 = str7.replace(<span class="string">&#x27;my&#x27;</span>, <span class="string">&#x27;MY&#x27;</span>,<span class="number">1</span>) <span class="comment"># åªæŠŠä¸€ä¸ªmyæ”¹ä¸ºMY</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str7</span><br><span class="line"><span class="string">&#x27;MY name is tony, my age is 18!&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>8.isdigit</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯çº¯æ•°å­—ç»„æˆï¼Œè¿”å›ç»“æœä¸ºTrueæˆ–False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str8 = <span class="string">&#x27;5201314&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str8.isdigit()</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str8 = <span class="string">&#x27;123g123&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str8.isdigit()</span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-3-äº†è§£æ“ä½œ"><a href="#3-3-3-äº†è§£æ“ä½œ" class="headerlink" title="3.3.3 äº†è§£æ“ä½œ"></a>3.3.3 äº†è§£æ“ä½œ</h3><p><img src="https://pic1.zhimg.com/80/v2-44989c1a59822b2480dc44ed07e1987c_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.find,rfind,index,rindex,count</span></span><br><span class="line"><span class="comment"># 1.1 findï¼šä»æŒ‡å®šèŒƒå›´å†…æŸ¥æ‰¾å­å­—ç¬¦ä¸²çš„èµ·å§‹ç´¢å¼•ï¼Œæ‰¾å¾—åˆ°åˆ™è¿”å›æ•°å­—1ï¼Œæ‰¾ä¸åˆ°åˆ™è¿”å›-1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>msg=<span class="string">&#x27;tony say hello&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>msg.find(<span class="string">&#x27;o&#x27;</span>,<span class="number">1</span>,<span class="number">3</span>)  <span class="comment"># åœ¨ç´¢å¼•ä¸º1å’Œ2(é¡¾å¤´ä¸é¡¾å°¾)çš„å­—ç¬¦ä¸­æŸ¥æ‰¾å­—ç¬¦oçš„ç´¢å¼•</span></span><br><span class="line"><span class="number">1</span>  </span><br><span class="line"><span class="comment"># 1.2 index:åŒfind,ä½†åœ¨æ‰¾ä¸åˆ°æ—¶ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>msg.index(<span class="string">&#x27;e&#x27;</span>,<span class="number">2</span>,<span class="number">4</span>) <span class="comment"># æŠ¥é”™ValueError</span></span><br><span class="line"><span class="comment"># 1.3 rfindä¸rindexï¼šç•¥</span></span><br><span class="line"><span class="comment"># 1.4 count:ç»Ÿè®¡å­—ç¬¦ä¸²åœ¨å¤§å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>msg = <span class="string">&quot;hello everyone&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>msg.count(<span class="string">&#x27;e&#x27;</span>)  <span class="comment"># ç»Ÿè®¡å­—ç¬¦ä¸²eå‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>msg.count(<span class="string">&#x27;e&#x27;</span>,<span class="number">1</span>,<span class="number">6</span>)  <span class="comment"># å­—ç¬¦ä¸²eåœ¨ç´¢å¼•1~5èŒƒå›´å†…å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.center,ljust,rjust,zfill</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name=<span class="string">&#x27;tony&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.center(<span class="number">30</span>,<span class="string">&#x27;-&#x27;</span>)  <span class="comment"># æ€»å®½åº¦ä¸º30ï¼Œå­—ç¬¦ä¸²å±…ä¸­æ˜¾ç¤ºï¼Œä¸å¤Ÿç”¨-å¡«å……</span></span><br><span class="line">-------------tony-------------</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.ljust(<span class="number">30</span>,<span class="string">&#x27;*&#x27;</span>)  <span class="comment"># æ€»å®½åº¦ä¸º30ï¼Œå­—ç¬¦ä¸²å·¦å¯¹é½æ˜¾ç¤ºï¼Œä¸å¤Ÿç”¨*å¡«å……</span></span><br><span class="line">tony**************************</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.rjust(<span class="number">30</span>,<span class="string">&#x27;*&#x27;</span>)  <span class="comment"># æ€»å®½åº¦ä¸º30ï¼Œå­—ç¬¦ä¸²å³å¯¹é½æ˜¾ç¤ºï¼Œä¸å¤Ÿç”¨*å¡«å……</span></span><br><span class="line">**************************tony</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.zfill(<span class="number">50</span>)  <span class="comment"># æ€»å®½åº¦ä¸º50ï¼Œå­—ç¬¦ä¸²å³å¯¹é½æ˜¾ç¤ºï¼Œä¸å¤Ÿç”¨0å¡«å……</span></span><br><span class="line">0000000000000000000000000000000000000000000000tony</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.expandtabs</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name = <span class="string">&#x27;tony\thello&#x27;</span>  <span class="comment"># \tè¡¨ç¤ºåˆ¶è¡¨ç¬¦(tabé”®)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name</span><br><span class="line">tony    hello</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.expandtabs(<span class="number">1</span>)  <span class="comment"># ä¿®æ”¹\tåˆ¶è¡¨ç¬¦ä»£è¡¨çš„ç©ºæ ¼æ•°</span></span><br><span class="line">tony hello</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.captalize,swapcase,title</span></span><br><span class="line"><span class="comment"># 4.1 captalizeï¼šé¦–å­—æ¯å¤§å†™</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>message = <span class="string">&#x27;hello everyone nice to meet you!&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>message.capitalize()</span><br><span class="line">Hello everyone nice to meet you!  </span><br><span class="line"><span class="comment"># 4.2 swapcaseï¼šå¤§å°å†™ç¿»è½¬</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>message1 = <span class="string">&#x27;Hi girl, I want make friends with you!&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>message1.swapcase()  </span><br><span class="line">hI GIRL, i WANT MAKE FRIENDS WITH YOU!  </span><br><span class="line"><span class="comment">#4.3 titleï¼šæ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>msg = <span class="string">&#x27;dear my friend i miss you very much&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>msg.title()</span><br><span class="line">Dear My Friend I Miss You Very Much </span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.isæ•°å­—ç³»åˆ—</span></span><br><span class="line"><span class="comment">#åœ¨python3ä¸­</span></span><br><span class="line">num1 = <span class="string">b&#x27;4&#x27;</span> <span class="comment">#bytes</span></span><br><span class="line">num2 = <span class="string">u&#x27;4&#x27;</span> <span class="comment">#unicode,python3ä¸­æ— éœ€åŠ uå°±æ˜¯unicode</span></span><br><span class="line">num3 = <span class="string">&#x27;å››&#x27;</span> <span class="comment">#ä¸­æ–‡æ•°å­—</span></span><br><span class="line">num4 = <span class="string">&#x27;â…£&#x27;</span> <span class="comment">#ç½—é©¬æ•°å­—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#isdigt:bytes,unicode</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num1.isdigit()</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num2.isdigit()</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num3.isdigit()</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num4.isdigit() </span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#isdecimal:uncicode(bytesç±»å‹æ— isdecimalæ–¹æ³•)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num2.isdecimal() </span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num3.isdecimal() </span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num4.isdecimal() </span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#isnumberic:unicode,ä¸­æ–‡æ•°å­—,ç½—é©¬æ•°å­—(bytesç±»å‹æ— isnumbericæ–¹æ³•)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num2.isnumeric() </span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num3.isnumeric() </span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num4.isnumeric() </span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‰è€…ä¸èƒ½åˆ¤æ–­æµ®ç‚¹æ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num5 = <span class="string">&#x27;4.3&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num5.isdigit()</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num5.isdecimal()</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>num5.isnumeric()</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">æ€»ç»“:</span></span><br><span class="line"><span class="string">    æœ€å¸¸ç”¨çš„æ˜¯isdigit,å¯ä»¥åˆ¤æ–­byteså’Œunicodeç±»å‹,è¿™ä¹Ÿæ˜¯æœ€å¸¸è§çš„æ•°å­—åº”ç”¨åœºæ™¯</span></span><br><span class="line"><span class="string">    å¦‚æœè¦åˆ¤æ–­ä¸­æ–‡æ•°å­—æˆ–ç½—é©¬æ•°å­—,åˆ™éœ€è¦ç”¨åˆ°isnumericã€‚</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.iså…¶ä»–</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name = <span class="string">&#x27;tony123&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.isalnum() <span class="comment">#å­—ç¬¦ä¸²ä¸­æ—¢å¯ä»¥åŒ…å«æ•°å­—ä¹Ÿå¯ä»¥åŒ…å«å­—æ¯</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.isalpha() <span class="comment">#å­—ç¬¦ä¸²ä¸­åªåŒ…å«å­—æ¯</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.isidentifier()</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.islower()  <span class="comment"># å­—ç¬¦ä¸²æ˜¯å¦æ˜¯çº¯å°å†™</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.isupper()  <span class="comment"># å­—ç¬¦ä¸²æ˜¯å¦æ˜¯çº¯å¤§å†™</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.isspace()  <span class="comment"># å­—ç¬¦ä¸²æ˜¯å¦å…¨æ˜¯ç©ºæ ¼</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>name.istitle()  <span class="comment"># å­—ç¬¦ä¸²ä¸­çš„å•è¯é¦–å­—æ¯æ˜¯å¦éƒ½æ˜¯å¤§å†™</span></span><br><span class="line"><span class="literal">False</span></span><br></pre></td></tr></table></figure>

<h2 id="å››-åˆ—è¡¨"><a href="#å››-åˆ—è¡¨" class="headerlink" title="å›› åˆ—è¡¨"></a>å›› åˆ—è¡¨</h2><p><img src="https://pic4.zhimg.com/80/v2-c388190efab0d91f2604988622f3fd37_720w.jpg" alt="img"></p>
<h2 id="4-1-å®šä¹‰"><a href="#4-1-å®šä¹‰" class="headerlink" title="4.1 å®šä¹‰"></a>4.1 å®šä¹‰</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ï¼šåœ¨[]å†…,ç”¨é€—å·åˆ†éš”å¼€å¤šä¸ªä»»æ„æ•°æ®ç±»å‹çš„å€¼</span></span><br><span class="line">l1 = [<span class="number">1</span>,<span class="string">&#x27;a&#x27;</span>,[<span class="number">1</span>,<span class="number">2</span>]]  <span class="comment"># æœ¬è´¨:l1 = list([1,&#x27;a&#x27;,[1,2]])</span></span><br></pre></td></tr></table></figure>

<h2 id="4-2-ç±»å‹è½¬æ¢"><a href="#4-2-ç±»å‹è½¬æ¢" class="headerlink" title="4.2 ç±»å‹è½¬æ¢"></a>4.2 ç±»å‹è½¬æ¢</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½†å‡¡èƒ½è¢«forå¾ªç¯éå†çš„æ•°æ®ç±»å‹éƒ½å¯ä»¥ä¼ ç»™list()è½¬æ¢æˆåˆ—è¡¨ç±»å‹ï¼Œlist()ä¼šè·Ÿforå¾ªç¯ä¸€æ ·éå†å‡ºæ•°æ®ç±»å‹ä¸­åŒ…å«çš„æ¯ä¸€ä¸ªå…ƒç´ ç„¶åæ”¾åˆ°åˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(<span class="string">&#x27;wdad&#x27;</span>) <span class="comment"># ç»“æœï¼š[&#x27;w&#x27;, &#x27;d&#x27;, &#x27;a&#x27;, &#x27;d&#x27;] </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]) <span class="comment"># ç»“æœï¼š[1, 2, 3]</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;jason&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">18</span>&#125;) <span class="comment">#ç»“æœï¼š[&#x27;name&#x27;, &#x27;age&#x27;]</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)) <span class="comment"># ç»“æœï¼š[1, 2, 3] </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;) <span class="comment"># ç»“æœï¼š[1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>

<h2 id="4-3-ä½¿ç”¨"><a href="#4-3-ä½¿ç”¨" class="headerlink" title="4.3 ä½¿ç”¨"></a>4.3 ä½¿ç”¨</h2><h3 id="4-3-1-ä¼˜å…ˆæŒæ¡çš„æ“ä½œ"><a href="#4-3-1-ä¼˜å…ˆæŒæ¡çš„æ“ä½œ" class="headerlink" title="4.3.1 ä¼˜å…ˆæŒæ¡çš„æ“ä½œ"></a>4.3.1 ä¼˜å…ˆæŒæ¡çš„æ“ä½œ</h3><p><img src="https://pic3.zhimg.com/80/v2-17400abd279a6fb484ecc78c5d8d3b8e_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.æŒ‰ç´¢å¼•å­˜å–å€¼(æ­£å‘å­˜å–+åå‘å­˜å–)ï¼šå³å¯å­˜ä¹Ÿå¯ä»¥å–  </span></span><br><span class="line"><span class="comment"># 1.1 æ­£å‘å–(ä»å·¦å¾€å³)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_friends=[<span class="string">&#x27;tony&#x27;</span>,<span class="string">&#x27;jason&#x27;</span>,<span class="string">&#x27;tom&#x27;</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_friends[<span class="number">0</span>]  </span><br><span class="line">tony</span><br><span class="line"><span class="comment"># 1.2 åå‘å–(è´Ÿå·è¡¨ç¤ºä»å³å¾€å·¦)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_friends[-<span class="number">1</span>]  </span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="comment"># 1.3 å¯¹äºlistæ¥è¯´ï¼Œæ—¢å¯ä»¥æŒ‰ç…§ç´¢å¼•å–å€¼ï¼Œåˆå¯ä»¥æŒ‰ç…§ç´¢å¼•ä¿®æ”¹æŒ‡å®šä½ç½®çš„å€¼ï¼Œä½†å¦‚æœç´¢å¼•ä¸å­˜åœ¨åˆ™æŠ¥é”™</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_friends = [<span class="string">&#x27;tony&#x27;</span>,<span class="string">&#x27;jack&#x27;</span>,<span class="string">&#x27;jason&#x27;</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_friends[<span class="number">1</span>] = <span class="string">&#x27;martthow&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_friends</span><br><span class="line">[<span class="string">&#x27;tony&#x27;</span>, <span class="string">&#x27;martthow&#x27;</span>, <span class="string">&#x27;jason&#x27;</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.åˆ‡ç‰‡(é¡¾å¤´ä¸é¡¾å°¾ï¼Œæ­¥é•¿)</span></span><br><span class="line"><span class="comment"># 2.1 é¡¾å¤´ä¸é¡¾å°¾ï¼šå–å‡ºç´¢å¼•ä¸º0åˆ°3çš„å…ƒç´ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_friends[<span class="number">0</span>:<span class="number">4</span>] </span><br><span class="line">[<span class="string">&#x27;tony&#x27;</span>, <span class="string">&#x27;jason&#x27;</span>, <span class="string">&#x27;tom&#x27;</span>, <span class="number">4</span>]</span><br><span class="line"><span class="comment"># 2.2 æ­¥é•¿ï¼š0:4:2,ç¬¬ä¸‰ä¸ªå‚æ•°2ä»£è¡¨æ­¥é•¿ï¼Œä¼šä»0å¼€å§‹ï¼Œæ¯æ¬¡ç´¯åŠ ä¸€ä¸ª2å³å¯ï¼Œæ‰€ä»¥ä¼šå–å‡ºç´¢å¼•0ã€2çš„å…ƒç´ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_friends[<span class="number">0</span>:<span class="number">4</span>:<span class="number">2</span>]  </span><br><span class="line">[<span class="string">&#x27;tony&#x27;</span>, <span class="string">&#x27;tom&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.é•¿åº¦</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(my_friends)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.æˆå‘˜è¿ç®—inå’Œnot in</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;tony&#x27;</span> <span class="keyword">in</span> my_friends</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;xxx&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> my_friends</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.æ·»åŠ </span></span><br><span class="line"><span class="comment"># 5.1 append()åˆ—è¡¨å°¾éƒ¨è¿½åŠ å…ƒç´ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l1 = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l1.append(<span class="string">&#x27;d&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l1</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.2 extend()ä¸€æ¬¡æ€§åœ¨åˆ—è¡¨å°¾éƒ¨æ·»åŠ å¤šä¸ªå…ƒç´ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l1.extend([<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l1</span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.3 insert()åœ¨æŒ‡å®šä½ç½®æ’å…¥å…ƒç´ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l1.insert(<span class="number">0</span>,<span class="string">&quot;first&quot;</span>)  <span class="comment"># 0è¡¨ç¤ºæŒ‰ç´¢å¼•ä½ç½®æ’å€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l1</span><br><span class="line">[<span class="string">&#x27;first&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;alisa&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.åˆ é™¤</span></span><br><span class="line"><span class="comment"># 6.1 del</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> l[<span class="number">2</span>]  <span class="comment"># åˆ é™¤ç´¢å¼•ä¸º2çš„å…ƒç´ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l</span><br><span class="line">[<span class="number">11</span>,<span class="number">22</span>,<span class="number">44</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.2 pop()é»˜è®¤åˆ é™¤åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†åˆ é™¤çš„å€¼è¿”å›ï¼Œæ‹¬å·å†…å¯ä»¥é€šè¿‡åŠ ç´¢å¼•å€¼æ¥æŒ‡å®šåˆ é™¤å…ƒç´ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">22</span>,<span class="number">44</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res=l.pop()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line"><span class="number">44</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res=l.pop(<span class="number">1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line"><span class="number">22</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.3 remove()æ‹¬å·å†…æŒ‡åé“å§“è¡¨ç¤ºè¦åˆ é™¤å“ªä¸ªå…ƒç´ ï¼Œæ²¡æœ‰è¿”å›å€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">22</span>,<span class="number">44</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res=l.remove(<span class="number">22</span>) <span class="comment"># ä»å·¦å¾€å³æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ‹¬å·å†…éœ€è¦åˆ é™¤çš„å…ƒç´ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(res)</span><br><span class="line"><span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.reverse()é¢ å€’åˆ—è¡¨å†…å…ƒç´ é¡ºåº</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l.reverse() </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l</span><br><span class="line">[<span class="number">44</span>,<span class="number">33</span>,<span class="number">22</span>,<span class="number">11</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8.sort()ç»™åˆ—è¡¨å†…æ‰€æœ‰å…ƒç´ æ’åº</span></span><br><span class="line"><span class="comment"># 8.1 æ’åºæ—¶åˆ—è¡¨å…ƒç´ ä¹‹é—´å¿…é¡»æ˜¯ç›¸åŒæ•°æ®ç±»å‹ï¼Œä¸å¯æ··æ­ï¼Œå¦åˆ™æŠ¥é”™</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">3</span>,<span class="number">42</span>,<span class="number">7</span>,<span class="number">55</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l.sort()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l </span><br><span class="line">[<span class="number">3</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">42</span>, <span class="number">55</span>]  <span class="comment"># é»˜è®¤ä»å°åˆ°å¤§æ’åº</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">3</span>,<span class="number">42</span>,<span class="number">7</span>,<span class="number">55</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l.sort(reverse=<span class="literal">True</span>)  <span class="comment"># reverseç”¨æ¥æŒ‡å®šæ˜¯å¦è·Œå€’æ’åºï¼Œé»˜è®¤ä¸ºFalse</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l </span><br><span class="line">[<span class="number">55</span>, <span class="number">42</span>, <span class="number">22</span>, <span class="number">11</span>, <span class="number">7</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment"># 8.2 äº†è§£çŸ¥è¯†ï¼š</span></span><br><span class="line"><span class="comment"># æˆ‘ä»¬å¸¸ç”¨çš„æ•°å­—ç±»å‹ç›´æ¥æ¯”è¾ƒå¤§å°ï¼Œä½†å…¶å®ï¼Œå­—ç¬¦ä¸²ã€åˆ—è¡¨ç­‰éƒ½å¯ä»¥æ¯”è¾ƒå¤§å°ï¼ŒåŸç†ç›¸åŒï¼šéƒ½æ˜¯ä¾æ¬¡æ¯”è¾ƒå¯¹åº”ä½ç½®çš„å…ƒç´ çš„å¤§å°ï¼Œå¦‚æœåˆ†å‡ºå¤§å°ï¼Œåˆ™æ— éœ€æ¯”è¾ƒä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œæ¯”å¦‚</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l1=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l2=[<span class="number">2</span>,]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l2 &gt; l1</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="comment"># å­—ç¬¦ä¹‹é—´çš„å¤§å°å–å†³äºå®ƒä»¬åœ¨ASCIIè¡¨ä¸­çš„å…ˆåé¡ºåºï¼Œè¶Šå¾€åè¶Šå¤§</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1=<span class="string">&#x27;abc&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2=<span class="string">&#x27;az&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2 &gt; s1 <span class="comment"># s1ä¸s2çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ²¡æœ‰åˆ†å‡ºèƒœè´Ÿï¼Œä½†ç¬¬äºŒä¸ªå­—ç¬¦&#x27;z&#x27;&gt;&#x27;b&#x27;,æ‰€ä»¥s2&gt;s1æˆç«‹</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="comment"># æ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹ä¸‹é¢è¿™ä¸ªåˆ—è¡¨æ’åº</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l = [<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;z&#x27;</span>,<span class="string">&#x27;adjk&#x27;</span>,<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;hea&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l.sort()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l</span><br><span class="line">[<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;adjk&#x27;</span>, <span class="string">&#x27;hea&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;z&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 9.å¾ªç¯</span></span><br><span class="line"><span class="comment"># å¾ªç¯éå†my_friendsåˆ—è¡¨é‡Œé¢çš„å€¼</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> my_friends:</span><br><span class="line">    <span class="built_in">print</span>(line) </span><br><span class="line"><span class="string">&#x27;tony&#x27;</span></span><br><span class="line"><span class="string">&#x27;jack&#x27;</span></span><br><span class="line"><span class="string">&#x27;jason&#x27;</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-2-äº†è§£æ“ä½œ"><a href="#4-3-2-äº†è§£æ“ä½œ" class="headerlink" title="4.3.2 äº†è§£æ“ä½œ"></a>4.3.2 äº†è§£æ“ä½œ</h3><p><img src="https://pic3.zhimg.com/80/v2-7c242fdec61e16c79e06f9181bb71a1a_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>l=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l[<span class="number">0</span>:<span class="number">3</span>:<span class="number">1</span>] </span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]  <span class="comment"># æ­£å‘æ­¥é•¿</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l[<span class="number">2</span>::-<span class="number">1</span>] </span><br><span class="line">[<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]  <span class="comment"># åå‘æ­¥é•¿</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€šè¿‡ç´¢å¼•å–å€¼å®ç°åˆ—è¡¨ç¿»è½¬</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l[::-<span class="number">1</span>]</span><br><span class="line">[<span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure>

<h2 id="äº”-å…ƒç»„"><a href="#äº”-å…ƒç»„" class="headerlink" title="äº” å…ƒç»„"></a>äº” å…ƒç»„</h2><p><img src="https://pic1.zhimg.com/80/v2-c2d1b8f652b5290b197d97c45f115830_720w.jpg" alt="img"></p>
<h2 id="5-1-ä½œç”¨"><a href="#5-1-ä½œç”¨" class="headerlink" title="5.1 ä½œç”¨"></a>5.1 ä½œç”¨</h2><p>å…ƒç»„ä¸åˆ—è¡¨ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å¯ä»¥å­˜å¤šä¸ªä»»æ„ç±»å‹çš„å…ƒç´ ï¼Œä¸åŒä¹‹å¤„åœ¨äºå…ƒç»„çš„å…ƒç´ ä¸èƒ½ä¿®æ”¹ï¼Œå³å…ƒç»„ç›¸å½“äºä¸å¯å˜çš„åˆ—è¡¨ï¼Œç”¨äºè®°å½•å¤šä¸ªå›ºå®šä¸å…è®¸ä¿®æ”¹çš„å€¼ï¼Œå•çº¯ç”¨äºå–</p>
<p><img src="https://pic1.zhimg.com/80/v2-66e37151e39efc17ad3473a1ccadafc4_720w.jpg" alt="img"></p>
<h2 id="5-2-å®šä¹‰æ–¹å¼"><a href="#5-2-å®šä¹‰æ–¹å¼" class="headerlink" title="5.2 å®šä¹‰æ–¹å¼"></a>5.2 å®šä¹‰æ–¹å¼</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨()å†…ç”¨é€—å·åˆ†éš”å¼€å¤šä¸ªä»»æ„ç±»å‹çš„å€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>countries = (<span class="string">&quot;ä¸­å›½&quot;</span>ï¼Œ<span class="string">&quot;ç¾å›½&quot;</span>ï¼Œ<span class="string">&quot;è‹±å›½&quot;</span>)  <span class="comment"># æœ¬è´¨:countries = tuple(&quot;ä¸­å›½&quot;ï¼Œ&quot;ç¾å›½&quot;ï¼Œ&quot;è‹±å›½&quot;)</span></span><br><span class="line"><span class="comment"># å¼ºè°ƒï¼šå¦‚æœå…ƒç»„å†…åªæœ‰ä¸€ä¸ªå€¼ï¼Œåˆ™å¿…é¡»åŠ ä¸€ä¸ªé€—å·ï¼Œå¦åˆ™()å°±åªæ˜¯åŒ…å«çš„æ„æ€è€Œéå®šä¹‰å…ƒç»„</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>countries = (<span class="string">&quot;ä¸­å›½&quot;</span>ï¼Œ)  <span class="comment"># æœ¬è´¨:countries = tuple(&quot;ä¸­å›½&quot;)</span></span><br></pre></td></tr></table></figure>

<h2 id="5-3-ç±»å‹è½¬æ¢"><a href="#5-3-ç±»å‹è½¬æ¢" class="headerlink" title="5.3 ç±»å‹è½¬æ¢"></a>5.3 ç±»å‹è½¬æ¢</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½†å‡¡èƒ½è¢«forå¾ªç¯çš„éå†çš„æ•°æ®ç±»å‹éƒ½å¯ä»¥ä¼ ç»™tuple()è½¬æ¢æˆå…ƒç»„ç±»å‹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">tuple</span>(<span class="string">&#x27;wdad&#x27;</span>) <span class="comment"># ç»“æœï¼š(&#x27;w&#x27;, &#x27;d&#x27;, &#x27;a&#x27;, &#x27;d&#x27;) </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">tuple</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]) <span class="comment"># ç»“æœï¼š(1, 2, 3)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">tuple</span>(&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;jason&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">18</span>&#125;) <span class="comment"># ç»“æœï¼š(&#x27;name&#x27;, &#x27;age&#x27;)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">tuple</span>((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)) <span class="comment"># ç»“æœï¼š(1, 2, 3)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">tuple</span>(&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;) <span class="comment"># ç»“æœï¼š(1, 2, 3, 4)</span></span><br><span class="line"><span class="comment"># tuple()ä¼šè·Ÿforå¾ªç¯ä¸€æ ·éå†å‡ºæ•°æ®ç±»å‹ä¸­åŒ…å«çš„æ¯ä¸€ä¸ªå…ƒç´ ç„¶åæ”¾åˆ°å…ƒç»„ä¸­</span></span><br></pre></td></tr></table></figure>

<h2 id="5-4-ä½¿ç”¨"><a href="#5-4-ä½¿ç”¨" class="headerlink" title="5.4 ä½¿ç”¨"></a>5.4 ä½¿ç”¨</h2><p><img src="https://pic3.zhimg.com/80/v2-4ece19ae4a48f1677deb018019fe2c2a_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>tuple1 = (<span class="number">1</span>, <span class="string">&#x27;hhaha&#x27;</span>, <span class="number">15000.00</span>, <span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>) </span><br><span class="line"><span class="comment"># 1ã€æŒ‰ç´¢å¼•å–å€¼(æ­£å‘å–+åå‘å–)ï¼šåªèƒ½å–ï¼Œä¸èƒ½æ”¹å¦åˆ™æŠ¥é”™ï¼  </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tuple1[<span class="number">0</span>]</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tuple1[-<span class="number">2</span>]</span><br><span class="line"><span class="number">22</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tuple1[<span class="number">0</span>] = <span class="string">&#x27;hehe&#x27;</span>  <span class="comment"># æŠ¥é”™ï¼šTypeError:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€åˆ‡ç‰‡(é¡¾å¤´ä¸é¡¾å°¾ï¼Œæ­¥é•¿)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tuple1[<span class="number">0</span>:<span class="number">6</span>:<span class="number">2</span>] </span><br><span class="line">(<span class="number">1</span>, <span class="number">15000.0</span>, <span class="number">22</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3ã€é•¿åº¦</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(tuple1)  </span><br><span class="line"><span class="number">6</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4ã€æˆå‘˜è¿ç®— in å’Œ not in</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;hhaha&#x27;</span> <span class="keyword">in</span> tuple1 </span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;hhaha&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> tuple1  </span><br><span class="line"><span class="literal">False</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 5ã€å¾ªç¯</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> line <span class="keyword">in</span> tuple1:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(line)</span><br><span class="line"><span class="number">1</span></span><br><span class="line">hhaha</span><br><span class="line"><span class="number">15000.0</span></span><br><span class="line"><span class="number">11</span></span><br><span class="line"><span class="number">22</span></span><br><span class="line"><span class="number">33</span></span><br></pre></td></tr></table></figure>

<h2 id="å…­-å­—å…¸"><a href="#å…­-å­—å…¸" class="headerlink" title="å…­ å­—å…¸"></a>å…­ å­—å…¸</h2><p><img src="https://pic4.zhimg.com/80/v2-d1303c9f61b67e515d181e47ea284163_720w.jpg" alt="img"></p>
<h2 id="6-1-å®šä¹‰æ–¹å¼"><a href="#6-1-å®šä¹‰æ–¹å¼" class="headerlink" title="6.1 å®šä¹‰æ–¹å¼"></a>6.1 å®šä¹‰æ–¹å¼</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ï¼šåœ¨&#123;&#125;å†…ç”¨é€—å·åˆ†éš”å¼€å¤šå…ƒç´ ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯key:valueçš„å½¢å¼ï¼Œå…¶ä¸­valueå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œè€Œkeyåˆ™å¿…é¡»æ˜¯ä¸å¯å˜ç±»å‹ï¼Œè¯¦è§ç¬¬å…«å°èŠ‚ï¼Œé€šå¸¸keyåº”è¯¥æ˜¯strç±»å‹ï¼Œå› ä¸ºstrç±»å‹ä¼šå¯¹valueæœ‰æè¿°æ€§çš„åŠŸèƒ½</span></span><br><span class="line">info=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;tony&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>,<span class="string">&#x27;sex&#x27;</span>:<span class="string">&#x27;male&#x27;</span>&#125; <span class="comment">#æœ¬è´¨info=dict(&#123;....&#125;)</span></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥è¿™ä¹ˆå®šä¹‰å­—å…¸</span></span><br><span class="line">info=<span class="built_in">dict</span>(name=<span class="string">&#x27;tony&#x27;</span>,age=<span class="number">18</span>,sex=<span class="string">&#x27;male&#x27;</span>) <span class="comment"># info=&#123;&#x27;age&#x27;: 18, &#x27;sex&#x27;: &#x27;male&#x27;, &#x27;name&#x27;: &#x27;tony&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-2-ç±»å‹è½¬æ¢"><a href="#6-2-ç±»å‹è½¬æ¢" class="headerlink" title="6.2 ç±»å‹è½¬æ¢"></a>6.2 ç±»å‹è½¬æ¢</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è½¬æ¢1: </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>info=<span class="built_in">dict</span>([[<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;tony&#x27;</span>],(<span class="string">&#x27;age&#x27;</span>,<span class="number">18</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>info</span><br><span class="line">&#123;<span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;tony&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¬æ¢2ï¼šfromkeysä¼šä»å…ƒç»„ä¸­å–å‡ºæ¯ä¸ªå€¼å½“åškeyï¼Œç„¶åä¸Noneç»„æˆkey:valueæ”¾åˆ°å­—å…¸ä¸­</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;&#125;.fromkeys((<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>,<span class="string">&#x27;sex&#x27;</span>),<span class="literal">None</span>)  </span><br><span class="line">&#123;<span class="string">&#x27;age&#x27;</span>: <span class="literal">None</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="literal">None</span>, <span class="string">&#x27;name&#x27;</span>: <span class="literal">None</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-3-ä½¿ç”¨"><a href="#6-3-ä½¿ç”¨" class="headerlink" title="6.3 ä½¿ç”¨"></a>6.3 ä½¿ç”¨</h2><h3 id="6-3-1-ä¼˜å…ˆæŒæ¡çš„æ“ä½œ"><a href="#6-3-1-ä¼˜å…ˆæŒæ¡çš„æ“ä½œ" class="headerlink" title="6.3.1 ä¼˜å…ˆæŒæ¡çš„æ“ä½œ"></a>6.3.1 ä¼˜å…ˆæŒæ¡çš„æ“ä½œ</h3><p><img src="https://pic3.zhimg.com/80/v2-f9177137b88b9fc3f31c88d91ff854ee_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1ã€æŒ‰keyå­˜å–å€¼ï¼šå¯å­˜å¯å–</span></span><br><span class="line"><span class="comment"># 1.1 å–</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic = &#123;</span><br><span class="line"><span class="meta">... </span>    <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;xxx&#x27;</span>,</span><br><span class="line"><span class="meta">... </span>    <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>,</span><br><span class="line"><span class="meta">... </span>    <span class="string">&#x27;hobbies&#x27;</span>: [<span class="string">&#x27;play game&#x27;</span>, <span class="string">&#x27;basketball&#x27;</span>]</span><br><span class="line"><span class="meta">... </span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic[<span class="string">&#x27;name&#x27;</span>]</span><br><span class="line"><span class="string">&#x27;xxx&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic[<span class="string">&#x27;hobbies&#x27;</span>][<span class="number">1</span>]</span><br><span class="line"><span class="string">&#x27;basketball&#x27;</span></span><br><span class="line"><span class="comment"># 1.2 å¯¹äºèµ‹å€¼æ“ä½œï¼Œå¦‚æœkeyåŸå…ˆä¸å­˜åœ¨äºå­—å…¸ï¼Œåˆ™ä¼šæ–°å¢key:value</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic[<span class="string">&#x27;gender&#x27;</span>] = <span class="string">&#x27;male&#x27;</span>  </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;tony&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;hobbies&#x27;</span>: [<span class="string">&#x27;play game&#x27;</span>, <span class="string">&#x27;basketball&#x27;</span>],<span class="string">&#x27;gender&#x27;</span>:<span class="string">&#x27;male&#x27;</span>&#125;</span><br><span class="line"><span class="comment"># 1.3 å¯¹äºèµ‹å€¼æ“ä½œï¼Œå¦‚æœkeyåŸå…ˆå­˜åœ¨äºå­—å…¸ï¼Œåˆ™ä¼šä¿®æ”¹å¯¹åº”valueçš„å€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic[<span class="string">&#x27;name&#x27;</span>] = <span class="string">&#x27;tony&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;tony&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;hobbies&#x27;</span>: [<span class="string">&#x27;play game&#x27;</span>, <span class="string">&#x27;basketball&#x27;</span>]&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€é•¿åº¦len</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(dic) </span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3ã€æˆå‘˜è¿ç®—inå’Œnot in</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;name&#x27;</span> <span class="keyword">in</span> dic  <span class="comment"># åˆ¤æ–­æŸä¸ªå€¼æ˜¯å¦æ˜¯å­—å…¸çš„key</span></span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 4ã€åˆ é™¤</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic.pop(<span class="string">&#x27;name&#x27;</span>)  <span class="comment"># é€šè¿‡æŒ‡å®šå­—å…¸çš„keyæ¥åˆ é™¤å­—å…¸çš„é”®å€¼å¯¹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic</span><br><span class="line">&#123;<span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;hobbies&#x27;</span>: [<span class="string">&#x27;play game&#x27;</span>, <span class="string">&#x27;basketball&#x27;</span>]&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5ã€é”®keys()ï¼Œå€¼values()ï¼Œé”®å€¼å¯¹items()</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic = &#123;<span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;hobbies&#x27;</span>: [<span class="string">&#x27;play game&#x27;</span>, <span class="string">&#x27;basketball&#x27;</span>], <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;xxx&#x27;</span>&#125;</span><br><span class="line"><span class="comment"># è·å–å­—å…¸æ‰€æœ‰çš„key</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic.keys()  </span><br><span class="line">dict_keys([<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;hobbies&#x27;</span>])</span><br><span class="line"><span class="comment"># è·å–å­—å…¸æ‰€æœ‰çš„value</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic.values()</span><br><span class="line">dict_values([<span class="string">&#x27;xxx&#x27;</span>, <span class="number">18</span>, [<span class="string">&#x27;play game&#x27;</span>, <span class="string">&#x27;basketball&#x27;</span>]])</span><br><span class="line"><span class="comment"># è·å–å­—å…¸æ‰€æœ‰çš„é”®å€¼å¯¹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic.items()</span><br><span class="line">dict_items([(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;xxx&#x27;</span>), (<span class="string">&#x27;age&#x27;</span>, <span class="number">18</span>), (<span class="string">&#x27;hobbies&#x27;</span>, [<span class="string">&#x27;play game&#x27;</span>, <span class="string">&#x27;basketball&#x27;</span>])])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6ã€å¾ªç¯</span></span><br><span class="line"><span class="comment"># 6.1 é»˜è®¤éå†çš„æ˜¯å­—å…¸çš„key</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> key <span class="keyword">in</span> dic:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(key)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">age</span><br><span class="line">hobbies</span><br><span class="line">name</span><br><span class="line"><span class="comment"># 6.2 åªéå†key</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> key <span class="keyword">in</span> dic.keys():</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(key)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">age</span><br><span class="line">hobbies</span><br><span class="line">name</span><br><span class="line"><span class="comment"># 6.3 åªéå†value</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> key <span class="keyword">in</span> dic.values():</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(key)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="number">18</span></span><br><span class="line">[<span class="string">&#x27;play game&#x27;</span>, <span class="string">&#x27;basketball&#x27;</span>]</span><br><span class="line">xxx</span><br><span class="line"><span class="comment"># 6.4 éå†keyä¸value</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> key <span class="keyword">in</span> dic.items():</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(key)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">(<span class="string">&#x27;age&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">(<span class="string">&#x27;hobbies&#x27;</span>, [<span class="string">&#x27;play game&#x27;</span>, <span class="string">&#x27;basketball&#x27;</span>])</span><br><span class="line">(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;xxx&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="6-3-2-éœ€è¦æŒæ¡çš„æ“ä½œ"><a href="#6-3-2-éœ€è¦æŒæ¡çš„æ“ä½œ" class="headerlink" title="6.3.2 éœ€è¦æŒæ¡çš„æ“ä½œ"></a>6.3.2 éœ€è¦æŒæ¡çš„æ“ä½œ</h3><p><img src="https://pic1.zhimg.com/80/v2-9a6cb9d36cc1ce915091d1937532a35c_720w.jpg" alt="img"></p>
<p><strong>1.get()</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic= &#123;<span class="string">&#x27;k1&#x27;</span>:<span class="string">&#x27;jason&#x27;</span>,<span class="string">&#x27;k2&#x27;</span>:<span class="string">&#x27;Tony&#x27;</span>,<span class="string">&#x27;k3&#x27;</span>:<span class="string">&#x27;JY&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic.get(<span class="string">&#x27;k1&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;jason&#x27;</span>  <span class="comment"># keyå­˜åœ¨ï¼Œåˆ™è·å–keyå¯¹åº”çš„valueå€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res=dic.get(<span class="string">&#x27;xxx&#x27;</span>) <span class="comment"># keyä¸å­˜åœ¨ï¼Œä¸ä¼šæŠ¥é”™è€Œæ˜¯é»˜è®¤è¿”å›None</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(res)</span><br><span class="line"><span class="literal">None</span>  </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res=dic.get(<span class="string">&#x27;xxx&#x27;</span>,<span class="number">666</span>) <span class="comment"># keyä¸å­˜åœ¨æ—¶ï¼Œå¯ä»¥è®¾ç½®é»˜è®¤è¿”å›çš„å€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(res)</span><br><span class="line"><span class="number">666</span> </span><br><span class="line"><span class="comment"># ps:å­—å…¸å–å€¼å»ºè®®ä½¿ç”¨getæ–¹æ³•</span></span><br></pre></td></tr></table></figure>

<p><strong>2.pop()</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic= &#123;<span class="string">&#x27;k1&#x27;</span>:<span class="string">&#x27;jason&#x27;</span>,<span class="string">&#x27;k2&#x27;</span>:<span class="string">&#x27;Tony&#x27;</span>,<span class="string">&#x27;k3&#x27;</span>:<span class="string">&#x27;JY&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v = dic.pop(<span class="string">&#x27;k2&#x27;</span>)  <span class="comment"># åˆ é™¤æŒ‡å®šçš„keyå¯¹åº”çš„é”®å€¼å¯¹,å¹¶è¿”å›å€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic</span><br><span class="line">&#123;<span class="string">&#x27;k1&#x27;</span>: <span class="string">&#x27;jason&#x27;</span>, <span class="string">&#x27;kk2&#x27;</span>: <span class="string">&#x27;JY&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>v</span><br><span class="line"><span class="string">&#x27;Tony&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>3.popitem()</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic= &#123;<span class="string">&#x27;k1&#x27;</span>:<span class="string">&#x27;jason&#x27;</span>,<span class="string">&#x27;k2&#x27;</span>:<span class="string">&#x27;Tony&#x27;</span>,<span class="string">&#x27;k3&#x27;</span>:<span class="string">&#x27;JY&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>item = dic.popitem()  <span class="comment"># éšæœºåˆ é™¤ä¸€ç»„é”®å€¼å¯¹,å¹¶å°†åˆ é™¤çš„é”®å€¼æ”¾åˆ°å…ƒç»„å†…è¿”å›</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic</span><br><span class="line">&#123;<span class="string">&#x27;k3&#x27;</span>: <span class="string">&#x27;JY&#x27;</span>, <span class="string">&#x27;k2&#x27;</span>: <span class="string">&#x27;Tony&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>item</span><br><span class="line">(<span class="string">&#x27;k1&#x27;</span>, <span class="string">&#x27;jason&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>4.update()</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”¨æ–°å­—å…¸æ›´æ–°æ—§å­—å…¸ï¼Œæœ‰åˆ™ä¿®æ”¹ï¼Œæ— åˆ™æ·»åŠ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic= &#123;<span class="string">&#x27;k1&#x27;</span>:<span class="string">&#x27;jason&#x27;</span>,<span class="string">&#x27;k2&#x27;</span>:<span class="string">&#x27;Tony&#x27;</span>,<span class="string">&#x27;k3&#x27;</span>:<span class="string">&#x27;JY&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic.update(&#123;<span class="string">&#x27;k1&#x27;</span>:<span class="string">&#x27;JN&#x27;</span>,<span class="string">&#x27;k4&#x27;</span>:<span class="string">&#x27;xxx&#x27;</span>&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic</span><br><span class="line">&#123;<span class="string">&#x27;k1&#x27;</span>: <span class="string">&#x27;JN&#x27;</span>, <span class="string">&#x27;k3&#x27;</span>: <span class="string">&#x27;JY&#x27;</span>, <span class="string">&#x27;k2&#x27;</span>: <span class="string">&#x27;Tony&#x27;</span>, <span class="string">&#x27;k4&#x27;</span>: <span class="string">&#x27;xxx&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<p><strong>5.fromkeys()</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic = <span class="built_in">dict</span>.fromkeys([<span class="string">&#x27;k1&#x27;</span>,<span class="string">&#x27;k2&#x27;</span>,<span class="string">&#x27;k3&#x27;</span>],[])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic</span><br><span class="line">&#123;<span class="string">&#x27;k1&#x27;</span>: [], <span class="string">&#x27;k2&#x27;</span>: [], <span class="string">&#x27;k3&#x27;</span>: []&#125;</span><br></pre></td></tr></table></figure>

<p><strong>6.setdefault()</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># keyä¸å­˜åœ¨åˆ™æ–°å¢é”®å€¼å¯¹ï¼Œå¹¶å°†æ–°å¢çš„valueè¿”å›</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic=&#123;<span class="string">&#x27;k1&#x27;</span>:<span class="number">111</span>,<span class="string">&#x27;k2&#x27;</span>:<span class="number">222</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res=dic.setdefault(<span class="string">&#x27;k3&#x27;</span>,<span class="number">333</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line"><span class="number">333</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic <span class="comment"># å­—å…¸ä¸­æ–°å¢äº†é”®å€¼å¯¹</span></span><br><span class="line">&#123;<span class="string">&#x27;k1&#x27;</span>: <span class="number">111</span>, <span class="string">&#x27;k3&#x27;</span>: <span class="number">333</span>, <span class="string">&#x27;k2&#x27;</span>: <span class="number">222</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># keyå­˜åœ¨åˆ™ä¸åšä»»ä½•ä¿®æ”¹ï¼Œå¹¶è¿”å›å·²å­˜åœ¨keyå¯¹åº”çš„valueå€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic=&#123;<span class="string">&#x27;k1&#x27;</span>:<span class="number">111</span>,<span class="string">&#x27;k2&#x27;</span>:<span class="number">222</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res=dic.setdefault(<span class="string">&#x27;k1&#x27;</span>,<span class="number">666</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line"><span class="number">111</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic <span class="comment"># å­—å…¸ä¸å˜</span></span><br><span class="line">&#123;<span class="string">&#x27;k1&#x27;</span>: <span class="number">111</span>, <span class="string">&#x27;k2&#x27;</span>: <span class="number">222</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ƒ-é›†åˆ"><a href="#ä¸ƒ-é›†åˆ" class="headerlink" title="ä¸ƒ é›†åˆ"></a>ä¸ƒ é›†åˆ</h2><p><img src="https://pic4.zhimg.com/80/v2-a7172908ebf2b327251e4defb86b6d67_720w.jpg" alt="img"></p>
<h2 id="7-1-ä½œç”¨"><a href="#7-1-ä½œç”¨" class="headerlink" title="7.1 ä½œç”¨"></a>7.1 ä½œç”¨</h2><p>é›†åˆã€listã€tupleã€dictä¸€æ ·éƒ½å¯ä»¥å­˜æ”¾å¤šä¸ªå€¼ï¼Œä½†æ˜¯é›†åˆä¸»è¦ç”¨äºï¼šå»é‡ã€å…³ç³»è¿ç®—</p>
<p><img src="https://pic2.zhimg.com/80/v2-3c82eb7aaa1df9d7830884196d689979_720w.jpg" alt="img"></p>
<h2 id="7-2-å®šä¹‰"><a href="#7-2-å®šä¹‰" class="headerlink" title="7.2 å®šä¹‰"></a>7.2 å®šä¹‰</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å®šä¹‰ï¼šåœ¨&#123;&#125;å†…ç”¨é€—å·åˆ†éš”å¼€å¤šä¸ªå…ƒç´ ï¼Œé›†åˆå…·å¤‡ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼š</span></span><br><span class="line"><span class="string">     1ï¼šæ¯ä¸ªå…ƒç´ å¿…é¡»æ˜¯ä¸å¯å˜ç±»å‹</span></span><br><span class="line"><span class="string">     2ï¼šé›†åˆå†…æ²¡æœ‰é‡å¤çš„å…ƒç´ </span></span><br><span class="line"><span class="string">     3ï¼šé›†åˆå†…å…ƒç´ æ— åº</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">s = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;  <span class="comment"># æœ¬è´¨ s = set(&#123;1,2,3,4&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„1ï¼šåˆ—è¡¨ç±»å‹æ˜¯ç´¢å¼•å¯¹åº”å€¼ï¼Œå­—å…¸æ˜¯keyå¯¹åº”å€¼ï¼Œå‡å¯ä»¥å–å¾—å•ä¸ªæŒ‡å®šçš„å€¼ï¼Œè€Œé›†åˆç±»å‹æ—¢æ²¡æœ‰ç´¢å¼•ä¹Ÿæ²¡æœ‰keyä¸å€¼å¯¹åº”ï¼Œæ‰€ä»¥æ— æ³•å–å¾—å•ä¸ªçš„å€¼ï¼Œè€Œä¸”å¯¹äºé›†åˆæ¥è¯´ï¼Œä¸»è¦ç”¨äºå»é‡ä¸å…³ç³»å…ƒç´ ï¼Œæ ¹æœ¬æ²¡æœ‰å–å‡ºå•ä¸ªæŒ‡å®šå€¼è¿™ç§éœ€æ±‚ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨æ„2:&#123;&#125;æ—¢å¯ä»¥ç”¨äºå®šä¹‰dictï¼Œä¹Ÿå¯ä»¥ç”¨äºå®šä¹‰é›†åˆï¼Œä½†æ˜¯å­—å…¸å†…çš„å…ƒç´ å¿…é¡»æ˜¯key:valueçš„æ ¼å¼ï¼Œç°åœ¨æˆ‘ä»¬æƒ³å®šä¹‰ä¸€ä¸ªç©ºå­—å…¸å’Œç©ºé›†åˆï¼Œè¯¥å¦‚ä½•å‡†ç¡®å»å®šä¹‰ä¸¤è€…?</span></span><br><span class="line">d = &#123;&#125; <span class="comment"># é»˜è®¤æ˜¯ç©ºå­—å…¸ </span></span><br><span class="line">s = <span class="built_in">set</span>() <span class="comment"># è¿™æ‰æ˜¯å®šä¹‰ç©ºé›†åˆ</span></span><br></pre></td></tr></table></figure>

<h2 id="7-3-ç±»å‹è½¬æ¢"><a href="#7-3-ç±»å‹è½¬æ¢" class="headerlink" title="7.3 ç±»å‹è½¬æ¢"></a>7.3 ç±»å‹è½¬æ¢</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½†å‡¡èƒ½è¢«forå¾ªç¯çš„éå†çš„æ•°æ®ç±»å‹ï¼ˆå¼ºè°ƒï¼šéå†å‡ºçš„æ¯ä¸€ä¸ªå€¼éƒ½å¿…é¡»ä¸ºä¸å¯å˜ç±»å‹ï¼‰éƒ½å¯ä»¥ä¼ ç»™set()è½¬æ¢æˆé›†åˆç±»å‹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="built_in">set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = <span class="built_in">set</span>((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s2 = <span class="built_in">set</span>(&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;jason&#x27;</span>,&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s3 = <span class="built_in">set</span>(<span class="string">&#x27;egon&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s,s1,s2,s3</span><br><span class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125; &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125; &#123;<span class="string">&#x27;name&#x27;</span>&#125; &#123;<span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;n&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-4-ä½¿ç”¨"><a href="#7-4-ä½¿ç”¨" class="headerlink" title="7.4 ä½¿ç”¨"></a>7.4 ä½¿ç”¨</h2><h3 id="7-4-1-å…³ç³»è¿ç®—"><a href="#7-4-1-å…³ç³»è¿ç®—" class="headerlink" title="7.4.1 å…³ç³»è¿ç®—"></a>7.4.1 å…³ç³»è¿ç®—</h3><p>æˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªé›†åˆfriendsä¸friends2æ¥åˆ†åˆ«å­˜æ”¾ä¸¤ä¸ªäººçš„å¥½å‹åå­—ï¼Œç„¶åä»¥è¿™ä¸¤ä¸ªé›†åˆä¸ºä¾‹è®²è§£é›†åˆçš„å…³ç³»è¿ç®—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>friends1 = &#123;<span class="string">&quot;zero&quot;</span>,<span class="string">&quot;kevin&quot;</span>,<span class="string">&quot;jason&quot;</span>,<span class="string">&quot;egon&quot;</span>&#125; <span class="comment"># ç”¨æˆ·1çš„å¥½å‹ä»¬ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>friends2 = &#123;<span class="string">&quot;Jy&quot;</span>,<span class="string">&quot;ricky&quot;</span>,<span class="string">&quot;jason&quot;</span>,<span class="string">&quot;egon&quot;</span>&#125;   <span class="comment"># ç”¨æˆ·2çš„å¥½å‹ä»¬</span></span><br></pre></td></tr></table></figure>

<p>ä¸¤ä¸ªé›†åˆçš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://pic1.zhimg.com/80/v2-db98a5092d33449c4667fd2f9717a2c0_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.åˆé›†/å¹¶é›†(|)ï¼šæ±‚ä¸¤ä¸ªç”¨æˆ·æ‰€æœ‰çš„å¥½å‹ï¼ˆé‡å¤å¥½å‹åªç•™ä¸€ä¸ªï¼‰</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>friends1 | friends2</span><br><span class="line">&#123;<span class="string">&#x27;kevin&#x27;</span>, <span class="string">&#x27;ricky&#x27;</span>, <span class="string">&#x27;zero&#x27;</span>, <span class="string">&#x27;jason&#x27;</span>, <span class="string">&#x27;Jy&#x27;</span>, <span class="string">&#x27;egon&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.äº¤é›†(&amp;)ï¼šæ±‚ä¸¤ä¸ªç”¨æˆ·çš„å…±åŒå¥½å‹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>friends1 &amp; friends2</span><br><span class="line">&#123;<span class="string">&#x27;jason&#x27;</span>, <span class="string">&#x27;egon&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.å·®é›†(-)ï¼š</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>friends1 - friends2 <span class="comment"># æ±‚ç”¨æˆ·1ç‹¬æœ‰çš„å¥½å‹</span></span><br><span class="line">&#123;<span class="string">&#x27;kevin&#x27;</span>, <span class="string">&#x27;zero&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>friends2 - friends1 <span class="comment"># æ±‚ç”¨æˆ·2ç‹¬æœ‰çš„å¥½å‹</span></span><br><span class="line">&#123;<span class="string">&#x27;ricky&#x27;</span>, <span class="string">&#x27;Jy&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.å¯¹ç§°å·®é›†(^) # æ±‚ä¸¤ä¸ªç”¨æˆ·ç‹¬æœ‰çš„å¥½å‹ä»¬ï¼ˆå³å»æ‰å…±æœ‰çš„å¥½å‹ï¼‰</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>friends1 ^ friends2</span><br><span class="line">&#123;<span class="string">&#x27;kevin&#x27;</span>, <span class="string">&#x27;zero&#x27;</span>, <span class="string">&#x27;ricky&#x27;</span>, <span class="string">&#x27;Jy&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.å€¼æ˜¯å¦ç›¸ç­‰(==)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>friends1 == friends2</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.çˆ¶é›†ï¼šä¸€ä¸ªé›†åˆæ˜¯å¦åŒ…å«å¦å¤–ä¸€ä¸ªé›†åˆ</span></span><br><span class="line"><span class="comment"># 6.1 åŒ…å«åˆ™è¿”å›True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125; &gt; &#123;<span class="number">1</span>,<span class="number">2</span>&#125;</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125; &gt;= &#123;<span class="number">1</span>,<span class="number">2</span>&#125;</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="comment"># 6.2 ä¸å­˜åœ¨åŒ…å«å…³ç³»ï¼Œåˆ™è¿”å›False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125; &gt; &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125; &gt;= &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.å­é›†</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>,<span class="number">2</span>&#125; &lt; &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&#123;<span class="number">1</span>,<span class="number">2</span>&#125; &lt;= &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure>

<h3 id="7-4-2-å»é‡"><a href="#7-4-2-å»é‡" class="headerlink" title="7.4.2 å»é‡"></a>7.4.2 å»é‡</h3><p><img src="https://pic4.zhimg.com/80/v2-3c863c52c62660f0547ff39f09ac41b7_720w.jpg" alt="img"></p>
<p>é›†åˆå»é‡å¤æœ‰å±€é™æ€§</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. åªèƒ½é’ˆå¯¹ä¸å¯å˜ç±»å‹</span></span><br><span class="line"><span class="comment"># 2. é›†åˆæœ¬èº«æ˜¯æ— åºçš„ï¼Œå»é‡ä¹‹åæ— æ³•ä¿ç•™åŸæ¥çš„é¡ºåº</span></span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>l=[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;a&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s=<span class="built_in">set</span>(l)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s <span class="comment"># å°†åˆ—è¡¨è½¬æˆäº†é›†åˆ</span></span><br><span class="line">&#123;<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l_new=<span class="built_in">list</span>(s) <span class="comment"># å†å°†é›†åˆè½¬å›åˆ—è¡¨</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>l_new</span><br><span class="line">[<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>] <span class="comment"># å»é™¤äº†é‡å¤ï¼Œä½†æ˜¯æ‰“ä¹±äº†é¡ºåº</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é’ˆå¯¹ä¸å¯å˜ç±»å‹ï¼Œå¹¶ä¸”ä¿è¯é¡ºåºåˆ™éœ€è¦æˆ‘ä»¬è‡ªå·±å†™ä»£ç å®ç°ï¼Œä¾‹å¦‚</span></span><br><span class="line">l=[</span><br><span class="line">    &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;lili&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>,<span class="string">&#x27;sex&#x27;</span>:<span class="string">&#x27;male&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;jack&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">73</span>,<span class="string">&#x27;sex&#x27;</span>:<span class="string">&#x27;male&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">20</span>,<span class="string">&#x27;sex&#x27;</span>:<span class="string">&#x27;female&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;lili&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>,<span class="string">&#x27;sex&#x27;</span>:<span class="string">&#x27;male&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;lili&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>,<span class="string">&#x27;sex&#x27;</span>:<span class="string">&#x27;male&#x27;</span>&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">new_l=[]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> dic <span class="keyword">in</span> l:</span><br><span class="line">    <span class="keyword">if</span> dic <span class="keyword">not</span> <span class="keyword">in</span> new_l:</span><br><span class="line">        new_l.append(dic)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(new_l)</span><br><span class="line"><span class="comment"># ç»“æœï¼šæ—¢å»é™¤äº†é‡å¤ï¼Œåˆä¿è¯äº†é¡ºåºï¼Œè€Œä¸”æ˜¯é’ˆå¯¹ä¸å¯å˜ç±»å‹çš„å»é‡</span></span><br><span class="line">[</span><br><span class="line">    &#123;<span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;male&#x27;</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;lili&#x27;</span>&#125;, </span><br><span class="line">    &#123;<span class="string">&#x27;age&#x27;</span>: <span class="number">73</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;male&#x27;</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;jack&#x27;</span>&#125;, </span><br><span class="line">    &#123;<span class="string">&#x27;age&#x27;</span>: <span class="number">20</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;female&#x27;</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;tom&#x27;</span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="7-4-3-å…¶ä»–æ“ä½œ"><a href="#7-4-3-å…¶ä»–æ“ä½œ" class="headerlink" title="7.4.3 å…¶ä»–æ“ä½œ"></a>7.4.3 å…¶ä»–æ“ä½œ</h3><p><img src="https://pic3.zhimg.com/80/v2-825386b940849f68a704c35e40a1a5de_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.é•¿åº¦</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s=&#123;<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">len</span>(s)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.æˆå‘˜è¿ç®—</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;c&#x27;</span> <span class="keyword">in</span> s</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.å¾ªç¯</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> item <span class="keyword">in</span> s:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(item)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">c</span><br><span class="line">a</span><br><span class="line">b</span><br></pre></td></tr></table></figure>

<h2 id="7-5-ç»ƒä¹ "><a href="#7-5-ç»ƒä¹ " class="headerlink" title="7.5 ç»ƒä¹ "></a>7.5 ç»ƒä¹ </h2><p><img src="https://pic2.zhimg.com/80/v2-59e6a2d4c402f9178c89e0716037ec51_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ä¸€.å…³ç³»è¿ç®—</span></span><br><span class="line"><span class="string">ã€€ã€€æœ‰å¦‚ä¸‹ä¸¤ä¸ªé›†åˆï¼Œpythonsæ˜¯æŠ¥åpythonè¯¾ç¨‹çš„å­¦å‘˜åå­—é›†åˆï¼Œlinuxsæ˜¯æŠ¥ålinuxè¯¾ç¨‹çš„å­¦å‘˜åå­—é›†åˆ</span></span><br><span class="line"><span class="string">ã€€ã€€pythons=&#123;&#x27;jason&#x27;,&#x27;egon&#x27;,&#x27;kevin&#x27;,&#x27;ricky&#x27;,&#x27;gangdan&#x27;,&#x27;biubiu&#x27;&#125;</span></span><br><span class="line"><span class="string">ã€€ã€€linuxs=&#123;&#x27;kermit&#x27;,&#x27;tony&#x27;,&#x27;gangdan&#x27;&#125;</span></span><br><span class="line"><span class="string">ã€€ã€€1. æ±‚å‡ºå³æŠ¥åpythonåˆæŠ¥ålinuxè¯¾ç¨‹çš„å­¦å‘˜åå­—é›†åˆ</span></span><br><span class="line"><span class="string">ã€€ã€€2. æ±‚å‡ºæ‰€æœ‰æŠ¥åçš„å­¦ç”Ÿåå­—é›†åˆ</span></span><br><span class="line"><span class="string">ã€€ã€€3. æ±‚å‡ºåªæŠ¥åpythonè¯¾ç¨‹çš„å­¦å‘˜åå­—</span></span><br><span class="line"><span class="string">ã€€ã€€4. æ±‚å‡ºæ²¡æœ‰åŒæ—¶è¿™ä¸¤é—¨è¯¾ç¨‹çš„å­¦å‘˜åå­—é›†åˆ</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># æ±‚å‡ºå³æŠ¥åpythonåˆæŠ¥ålinuxè¯¾ç¨‹çš„å­¦å‘˜åå­—é›†åˆ</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pythons &amp; linuxs</span><br><span class="line"><span class="comment"># æ±‚å‡ºæ‰€æœ‰æŠ¥åçš„å­¦ç”Ÿåå­—é›†åˆ</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pythons | linuxs</span><br><span class="line"><span class="comment"># æ±‚å‡ºåªæŠ¥åpythonè¯¾ç¨‹çš„å­¦å‘˜åå­—</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pythons - linuxs</span><br><span class="line"><span class="comment"># æ±‚å‡ºæ²¡æœ‰åŒæ—¶è¿™ä¸¤é—¨è¯¾ç¨‹çš„å­¦å‘˜åå­—é›†åˆ</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pythons ^ linuxs</span><br></pre></td></tr></table></figure>

<h2 id="å…«-å¯å˜ç±»å‹ä¸ä¸å¯å˜ç±»å‹"><a href="#å…«-å¯å˜ç±»å‹ä¸ä¸å¯å˜ç±»å‹" class="headerlink" title="å…« å¯å˜ç±»å‹ä¸ä¸å¯å˜ç±»å‹"></a>å…« å¯å˜ç±»å‹ä¸ä¸å¯å˜ç±»å‹</h2><p><strong>å¯å˜æ•°æ®ç±»å‹ï¼š</strong>å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå†…å­˜åœ°å€ä¸å˜ï¼Œå³idä¸å˜ï¼Œè¯æ˜åœ¨æ”¹å˜åŸå€¼</p>
<p><strong>ä¸å¯å˜ç±»å‹ï¼š</strong>å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå†…å­˜åœ°å€ä¹Ÿå‘ç”Ÿæ”¹å˜ï¼Œå³idä¹Ÿå˜ï¼Œè¯æ˜æ˜¯æ²¡æœ‰åœ¨æ”¹å˜åŸå€¼ï¼Œæ˜¯äº§ç”Ÿäº†æ–°çš„å€¼</p>
<p><strong>æ•°å­—ç±»å‹:</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(x)</span><br><span class="line"><span class="number">1830448896</span> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(x)</span><br><span class="line"><span class="number">1830448928</span></span><br><span class="line"><span class="comment"># å†…å­˜åœ°å€æ”¹å˜äº†ï¼Œè¯´æ˜æ•´å‹æ˜¯ä¸å¯å˜æ•°æ®ç±»å‹ï¼Œæµ®ç‚¹å‹ä¹Ÿä¸€æ ·</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-aba483b5a4fce5be3c97c4e9eb358c6d_720w.jpg" alt="img"></p>
<p><strong>å­—ç¬¦ä¸²</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="string">&quot;Jy&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(x)</span><br><span class="line"><span class="number">938809263920</span> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = <span class="string">&quot;Ricky&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(x)</span><br><span class="line"><span class="number">938809264088</span></span><br><span class="line"><span class="comment"># å†…å­˜åœ°å€æ”¹å˜äº†ï¼Œè¯´æ˜å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜æ•°æ®ç±»å‹</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-bb67114dc6c8fe2694d4f9971b8ddc09_720w.jpg" alt="img"></p>
<p><strong>åˆ—è¡¨</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>list1 = [<span class="string">&#x27;tom&#x27;</span>,<span class="string">&#x27;jack&#x27;</span>,<span class="string">&#x27;egon&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(list1)</span><br><span class="line"><span class="number">486316639176</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list1[<span class="number">2</span>] = <span class="string">&#x27;kevin&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(list1)</span><br><span class="line"><span class="number">486316639176</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list1.append(<span class="string">&#x27;lili&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(list1)</span><br><span class="line"><span class="number">486316639176</span></span><br><span class="line"><span class="comment"># å¯¹åˆ—è¡¨çš„å€¼è¿›è¡Œæ“ä½œæ—¶ï¼Œå€¼æ”¹å˜ä½†å†…å­˜åœ°å€ä¸å˜ï¼Œæ‰€ä»¥åˆ—è¡¨æ˜¯å¯å˜æ•°æ®ç±»å‹</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-e2cc6a90794d0d79719ff0a898b3c467_720w.jpg" alt="img"></p>
<p><strong>å…ƒç»„</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>t1 = (<span class="string">&quot;tom&quot;</span>,<span class="string">&quot;jack&quot;</span>,[<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t1[<span class="number">0</span>]=<span class="string">&#x27;TOM&#x27;</span> <span class="comment"># æŠ¥é”™ï¼šTypeError</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t1.append(<span class="string">&#x27;lili&#x27;</span>) <span class="comment"># æŠ¥é”™ï¼šTypeError</span></span><br><span class="line"><span class="comment"># å…ƒç»„å†…çš„å…ƒç´ æ— æ³•ä¿®æ”¹ï¼ŒæŒ‡çš„æ˜¯å…ƒç»„å†…ç´¢å¼•æŒ‡å‘çš„å†…å­˜åœ°å€ä¸èƒ½è¢«ä¿®æ”¹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t1 = (<span class="string">&quot;tom&quot;</span>,<span class="string">&quot;jack&quot;</span>,[<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(t1[<span class="number">0</span>]),<span class="built_in">id</span>(t1[<span class="number">1</span>]),<span class="built_in">id</span>(t1[<span class="number">2</span>])</span><br><span class="line">(<span class="number">4327403152</span>, <span class="number">4327403072</span>, <span class="number">4327422472</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t1[<span class="number">2</span>][<span class="number">0</span>]=<span class="number">111</span> <span class="comment"># å¦‚æœå…ƒç»„ä¸­å­˜åœ¨å¯å˜ç±»å‹ï¼Œæ˜¯å¯ä»¥ä¿®æ”¹ï¼Œä½†æ˜¯ä¿®æ”¹åçš„å†…å­˜åœ°å€ä¸å˜</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t1</span><br><span class="line">(<span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;jack&#x27;</span>, [<span class="number">111</span>, <span class="number">2</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(t1[<span class="number">0</span>]),<span class="built_in">id</span>(t1[<span class="number">1</span>]),<span class="built_in">id</span>(t1[<span class="number">2</span>]) <span class="comment"># æŸ¥çœ‹idä»ç„¶ä¸å˜</span></span><br><span class="line">(<span class="number">4327403152</span>, <span class="number">4327403072</span>, <span class="number">4327422472</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-19bc37e4a9fedf83d1b352a502c49a57_720w.jpg" alt="img"></p>
<p><strong>å­—å…¸</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;sex&#x27;</span>:<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(dic)</span><br><span class="line"><span class="number">4327423112</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic[<span class="string">&#x27;age&#x27;</span>]=<span class="number">19</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic</span><br><span class="line">&#123;<span class="string">&#x27;age&#x27;</span>: <span class="number">19</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;male&#x27;</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;egon&#x27;</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">id</span>(dic)</span><br><span class="line"><span class="number">4327423112</span></span><br><span class="line"><span class="comment"># å¯¹å­—å…¸è¿›è¡Œæ“ä½œæ—¶ï¼Œå€¼æ”¹å˜çš„æƒ…å†µä¸‹ï¼Œå­—å…¸çš„idä¹Ÿæ˜¯ä¸å˜ï¼Œå³å­—å…¸ä¹Ÿæ˜¯å¯å˜æ•°æ®ç±»å‹</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-52e2baab5ad65f3e470166e35bde772a_720w.jpg" alt="img"></p>
<h2 id="ä¹-æ•°æ®ç±»å‹æ€»ç»“"><a href="#ä¹-æ•°æ®ç±»å‹æ€»ç»“" class="headerlink" title="ä¹ æ•°æ®ç±»å‹æ€»ç»“"></a>ä¹ æ•°æ®ç±»å‹æ€»ç»“</h2><p><img src="https://pic4.zhimg.com/80/v2-a20045894184b0a3afad79f0542adbab_720w.jpg" alt="img"></p>
<p><img src="https://pic4.zhimg.com/80/v2-de70fc0b51f69ade62df5cc235acd493_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p>1ã€æ•°å­—ç±»å‹ï¼š</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=13">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=13<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p>2ã€å­—ç¬¦ä¸²ç±»å‹</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=14">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=14<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=15">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=15<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=16">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=16<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p>3ã€åˆ—è¡¨ç±»å‹</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=17">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=17<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=18">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=18<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p>4ã€å…ƒç»„ç±»å‹</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=19">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=19<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p>5ã€å­—å…¸ç±»å‹</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=20">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=20<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=21">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=21<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=22">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=22<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=23">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=23<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p>6ã€é›†åˆç±»å‹</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=24">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=24<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=25">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=25<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p>7ã€å°ç»“</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=26">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=26<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>09-å­—ç¬¦ç¼–ç </title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/09_%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81/</url>
    <content><![CDATA[<h2 id="ä¸€-å¼•å…¥"><a href="#ä¸€-å¼•å…¥" class="headerlink" title="ä¸€ å¼•å…¥"></a>ä¸€ å¼•å…¥</h2><p> å­—ç¬¦ä¸²ç±»å‹ã€æ–‡æœ¬æ–‡ä»¶çš„å†…å®¹éƒ½æ˜¯ç”±å­—ç¬¦ç»„æˆçš„ï¼Œä½†å‡¡æ¶‰åŠåˆ°å­—ç¬¦çš„å­˜å–ï¼Œéƒ½éœ€è¦è€ƒè™‘å­—ç¬¦ç¼–ç çš„é—®é¢˜ã€‚</p>
<p> å­—ç¬¦ç¼–ç è¿™ä¸ªçŸ¥è¯†ç‚¹çš„å…¸å‹ç‰¹å¾å°±æ˜¯ç†è®ºå¤šã€ç»“è®ºå°‘ï¼Œä½†å¯¹äºå¼€å‘è€Œè¨€åªéœ€è¦è®°ä½ç»“è®ºå³å¯ï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥ä¸€ç‚¹ç‚¹ä»‹ç»å®ƒ</p>
<p><img src="https://pic1.zhimg.com/80/v2-621d28181cc40a235414a49fc9d14738_720w.jpg" alt="img"></p>
<h2 id="äºŒ-çŸ¥è¯†å‚¨å¤‡"><a href="#äºŒ-çŸ¥è¯†å‚¨å¤‡" class="headerlink" title="äºŒ çŸ¥è¯†å‚¨å¤‡"></a>äºŒ çŸ¥è¯†å‚¨å¤‡</h2><h2 id="2-1-ä¸‰å¤§æ ¸å¿ƒç¡¬ä»¶"><a href="#2-1-ä¸‰å¤§æ ¸å¿ƒç¡¬ä»¶" class="headerlink" title="2.1 ä¸‰å¤§æ ¸å¿ƒç¡¬ä»¶"></a>2.1 ä¸‰å¤§æ ¸å¿ƒç¡¬ä»¶</h2><p>æ‰€æœ‰è½¯ä»¶éƒ½æ˜¯è¿è¡Œç¡¬ä»¶ä¹‹ä¸Šçš„ï¼Œä¸è¿è¡Œè½¯ä»¶ç›¸å…³çš„ä¸‰å¤§æ ¸å¿ƒç¡¬ä»¶ä¸ºcpuã€å†…å­˜ã€ç¡¬ç›˜ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®ä¸‰ç‚¹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€è½¯ä»¶è¿è¡Œå‰ï¼Œè½¯ä»¶çš„ä»£ç åŠå…¶ç›¸å…³æ•°æ®éƒ½æ˜¯å­˜æ”¾äºç¡¬ç›˜ä¸­çš„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€ä»»ä½•è½¯ä»¶çš„å¯åŠ¨éƒ½æ˜¯å°†æ•°æ®ä»ç¡¬ç›˜ä¸­è¯»å…¥å†…å­˜ï¼Œç„¶åcpuä»å†…å­˜ä¸­å–å‡ºæŒ‡ä»¤å¹¶æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3ã€è½¯ä»¶è¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ•°æ®æœ€å…ˆéƒ½æ˜¯å­˜æ”¾äºå†…å­˜ä¸­çš„ï¼Œè‹¥æƒ³æ°¸ä¹…ä¿å­˜è½¯ä»¶äº§ç”Ÿçš„æ•°æ®ï¼Œåˆ™éœ€è¦å°†æ•°æ®ç”±å†…å­˜å†™å…¥ç¡¬ç›˜</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-48e25e7f03030e066f8fcaf4750cc892_720w.jpg" alt="img"></p>
<h2 id="2-2-æ–‡æœ¬ç¼–è¾‘å™¨è¯»å–æ–‡ä»¶å†…å®¹çš„æµç¨‹"><a href="#2-2-æ–‡æœ¬ç¼–è¾‘å™¨è¯»å–æ–‡ä»¶å†…å®¹çš„æµç¨‹" class="headerlink" title="2.2 æ–‡æœ¬ç¼–è¾‘å™¨è¯»å–æ–‡ä»¶å†…å®¹çš„æµç¨‹"></a>2.2 æ–‡æœ¬ç¼–è¾‘å™¨è¯»å–æ–‡ä»¶å†…å®¹çš„æµç¨‹</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#é˜¶æ®µ1ã€å¯åŠ¨ä¸€ä¸ªæ–‡ä»¶ç¼–è¾‘å™¨ï¼ˆæ–‡æœ¬ç¼–è¾‘å™¨å¦‚nodepad++ï¼Œpycharmï¼Œwordï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é˜¶æ®µ2ã€æ–‡ä»¶ç¼–è¾‘å™¨ä¼šå°†æ–‡ä»¶å†…å®¹ä»ç¡¬ç›˜è¯»å…¥å†…å­˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é˜¶æ®µ3ã€æ–‡æœ¬ç¼–è¾‘å™¨ä¼šå°†åˆšåˆšè¯»å…¥å†…å­˜ä¸­çš„å†…å®¹æ˜¾ç¤ºåˆ°å±å¹•ä¸Š</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3-pythonè§£é‡Šå™¨æ‰§è¡Œæ–‡ä»¶çš„æµç¨‹"><a href="#2-3-pythonè§£é‡Šå™¨æ‰§è¡Œæ–‡ä»¶çš„æµç¨‹" class="headerlink" title="2.3 pythonè§£é‡Šå™¨æ‰§è¡Œæ–‡ä»¶çš„æµç¨‹"></a>2.3 pythonè§£é‡Šå™¨æ‰§è¡Œæ–‡ä»¶çš„æµç¨‹</h2><p>ä»¥python test.pyä¸ºä¾‹ï¼Œæ‰§è¡Œæµç¨‹å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#é˜¶æ®µ1ã€å¯åŠ¨pythonè§£é‡Šå™¨ï¼Œæ­¤æ—¶å°±ç›¸å½“äºå¯åŠ¨äº†ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é˜¶æ®µ2ã€pythonè§£é‡Šå™¨ç›¸å½“äºæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä»ç¡¬ç›˜ä¸Šå°†test.pyçš„å†…å®¹è¯»å…¥åˆ°å†…å­˜ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é˜¶æ®µ3ã€pythonè§£é‡Šå™¨è§£é‡Šæ‰§è¡Œåˆšåˆšè¯»å…¥çš„å†…å­˜çš„å†…å®¹ï¼Œå¼€å§‹è¯†åˆ«pythonè¯­æ³•</span></span><br></pre></td></tr></table></figure>

<h2 id="2-4-æ€»ç»“"><a href="#2-4-æ€»ç»“" class="headerlink" title="2.4 æ€»ç»“"></a>2.4 æ€»ç»“</h2><p>pythonè§£é‡Šå™¨ä¸æ–‡ä»¶æœ¬ç¼–è¾‘çš„å¼‚åŒå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€ç›¸åŒç‚¹ï¼šå‰ä¸¤ä¸ªé˜¶æ®µäºŒè€…å®Œå…¨ä¸€è‡´ï¼Œéƒ½æ˜¯å°†ç¡¬ç›˜ä¸­æ–‡ä»¶çš„å†…å®¹è¯»å…¥å†…å­˜ï¼Œè¯¦è§£å¦‚ä¸‹</span></span><br><span class="line">pythonè§£é‡Šå™¨æ˜¯è§£é‡Šæ‰§è¡Œæ–‡ä»¶å†…å®¹çš„ï¼Œå› è€Œpythonè§£é‡Šå™¨å…·å¤‡è¯»pyæ–‡ä»¶çš„åŠŸèƒ½ï¼Œè¿™ä¸€ç‚¹ä¸æ–‡æœ¬ç¼–è¾‘å™¨ä¸€æ ·</span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€ä¸åŒç‚¹ï¼šåœ¨é˜¶æ®µ3æ—¶ï¼Œé’ˆå¯¹å†…å­˜ä¸­è¯»å…¥çš„å†…å®¹å¤„ç†æ–¹å¼ä¸åŒï¼Œè¯¦è§£å¦‚ä¸‹</span></span><br><span class="line">æ–‡æœ¬ç¼–è¾‘å™¨å°†æ–‡ä»¶å†…å®¹è¯»å…¥å†…å­˜åï¼Œæ˜¯ä¸ºäº†æ˜¾ç¤ºæˆ–è€…ç¼–è¾‘ï¼Œæ ¹æœ¬ä¸å»ç†ä¼špythonçš„è¯­æ³•ï¼Œè€Œpythonè§£é‡Šå™¨å°†æ–‡ä»¶å†…å®¹è¯»å…¥å†…å­˜åï¼Œå¯ä¸æ˜¯ä¸ºäº†ç»™ä½ ç…ä¸€çœ¼pythonä»£ç å†™çš„å•¥ï¼Œè€Œæ˜¯ä¸ºäº†æ‰§è¡Œpythonä»£ç ã€ä¼šè¯†åˆ«pythonè¯­æ³•ï¼‰</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-c80921c5d7ede2fd94262892c7e0a733_720w.jpg" alt="img"></p>
<h2 id="ä¸‰ã€å­—ç¬¦ç¼–ç ä»‹ç»"><a href="#ä¸‰ã€å­—ç¬¦ç¼–ç ä»‹ç»" class="headerlink" title="ä¸‰ã€å­—ç¬¦ç¼–ç ä»‹ç»"></a>ä¸‰ã€å­—ç¬¦ç¼–ç ä»‹ç»</h2><h2 id="3-1-ä»€ä¹ˆæ˜¯å­—ç¬¦ç¼–ç ï¼Ÿ"><a href="#3-1-ä»€ä¹ˆæ˜¯å­—ç¬¦ç¼–ç ï¼Ÿ" class="headerlink" title="3.1 ä»€ä¹ˆæ˜¯å­—ç¬¦ç¼–ç ï¼Ÿ"></a>3.1 ä»€ä¹ˆæ˜¯å­—ç¬¦ç¼–ç ï¼Ÿ</h2><p>äººç±»åœ¨ä¸è®¡ç®—æœºäº¤äº’æ—¶ï¼Œç”¨çš„éƒ½æ˜¯äººç±»èƒ½è¯»æ‡‚çš„å­—ç¬¦ï¼Œå¦‚ä¸­æ–‡å­—ç¬¦ã€è‹±æ–‡å­—ç¬¦ã€æ—¥æ–‡å­—ç¬¦ç­‰</p>
<p>è€Œè®¡ç®—æœºåªèƒ½è¯†åˆ«äºŒè¿›åˆ¶æ•°,è¯¦è§£å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#äºŒè¿›åˆ¶æ•°å³ç”±0å’Œ1ç»„æˆçš„æ•°å­—ï¼Œä¾‹å¦‚010010101010ã€‚è®¡ç®—æœºæ˜¯åŸºäºç”µå·¥ä½œçš„ï¼Œç”µçš„ç‰¹æ€§å³é«˜ä½ç”µå¹³ï¼Œäººç±»ä»é€»è¾‘å±‚é¢å°†é«˜ç”µå¹³å¯¹åº”ä¸ºæ•°å­—1,ä½ç”µå¹³å¯¹åº”ä¸ºæ•°å­—0ï¼Œè¿™ç›´æ¥å†³å®šäº†è®¡ç®—æœºå¯ä»¥è¯†åˆ«çš„æ˜¯ç”±0å’Œ1ç»„æˆçš„æ•°å­—</span></span><br></pre></td></tr></table></figure>

<p>æ¯«æ— ç–‘é—®ï¼Œç”±äººç±»çš„å­—ç¬¦åˆ°è®¡ç®—æœºä¸­çš„æ•°å­—ï¼Œå¿…é¡»ç»å†ä¸€ä¸ªè¿‡ç¨‹ï¼Œå¦‚ä¸‹</p>
<p><img src="https://pic1.zhimg.com/80/v2-80b925e192579faa59dcffbb046535a4_720w.jpg" alt="img"></p>
<p>ç¿»è¯‘çš„è¿‡ç¨‹å¿…é¡»å‚ç…§ä¸€ä¸ªç‰¹å®šçš„æ ‡å‡†ï¼Œè¯¥æ ‡å‡†ç§°ä¹‹ä¸ºå­—ç¬¦ç¼–ç è¡¨ï¼Œè¯¥è¡¨ä¸Šå­˜æ”¾çš„å°±æ˜¯å­—ç¬¦ä¸æ•°å­—ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚</p>
<p>å­—ç¬¦ç¼–ç ä¸­çš„ç¼–ç æŒ‡çš„æ˜¯ç¿»è¯‘æˆ–è€…è½¬æ¢çš„æ„æ€ï¼Œå³å°†äººèƒ½ç†è§£çš„å­—ç¬¦ç¿»è¯‘æˆè®¡ç®—æœºèƒ½è¯†åˆ«çš„æ•°å­—</p>
<h2 id="3-2-å­—ç¬¦ç¼–ç è¡¨çš„å‘å±•å²-äº†è§£"><a href="#3-2-å­—ç¬¦ç¼–ç è¡¨çš„å‘å±•å²-äº†è§£" class="headerlink" title="3.2 å­—ç¬¦ç¼–ç è¡¨çš„å‘å±•å² (äº†è§£)"></a>3.2 å­—ç¬¦ç¼–ç è¡¨çš„å‘å±•å² (äº†è§£)</h2><p>å­—ç¬¦ç¼–ç çš„å‘å±•ç»å†äº†ä¸‰ä¸ªé‡è¦çš„é˜¶æ®µï¼Œå¦‚ä¸‹</p>
<h3 id="3-2-1-é˜¶æ®µä¸€ï¼šä¸€å®¶ç‹¬å¤§"><a href="#3-2-1-é˜¶æ®µä¸€ï¼šä¸€å®¶ç‹¬å¤§" class="headerlink" title="3.2.1 é˜¶æ®µä¸€ï¼šä¸€å®¶ç‹¬å¤§"></a>3.2.1 é˜¶æ®µä¸€ï¼šä¸€å®¶ç‹¬å¤§</h3><p>ç°ä»£è®¡ç®—æœºèµ·æºäºç¾å›½ï¼Œæ‰€ä»¥æœ€å…ˆè€ƒè™‘ä»…ä»…æ˜¯è®©è®¡ç®—æœºè¯†åˆ«è‹±æ–‡å­—ç¬¦ï¼Œäºæ˜¯è¯ç”Ÿäº†ASCIIè¡¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ASCIIè¡¨çš„ç‰¹ç‚¹:</span></span><br><span class="line">    <span class="number">1</span>ã€åªæœ‰è‹±æ–‡å­—ç¬¦ä¸æ•°å­—çš„ä¸€ä¸€å¯¹åº”å…³ç³»</span><br><span class="line">    <span class="number">2</span>ã€ä¸€ä¸ªè‹±æ–‡å­—ç¬¦å¯¹åº”1Bytesï¼Œ1Bytes=8bitï¼Œ8bitæœ€å¤šåŒ…å«<span class="number">256</span>ä¸ªæ•°å­—ï¼Œå¯ä»¥å¯¹åº”<span class="number">256</span>ä¸ªå­—ç¬¦ï¼Œè¶³å¤Ÿè¡¨ç¤ºæ‰€æœ‰è‹±æ–‡å­—ç¬¦</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-c4a210efb1a57b869288eb7e89bf6fc9_720w.jpg" alt="img"></p>
<h3 id="3-2-2-é˜¶æ®µäºŒï¼šè¯¸ä¾¯å‰²æ®ã€å¤©ä¸‹å¤§ä¹±"><a href="#3-2-2-é˜¶æ®µäºŒï¼šè¯¸ä¾¯å‰²æ®ã€å¤©ä¸‹å¤§ä¹±" class="headerlink" title="3.2.2 é˜¶æ®µäºŒï¼šè¯¸ä¾¯å‰²æ®ã€å¤©ä¸‹å¤§ä¹±"></a>3.2.2 é˜¶æ®µäºŒï¼šè¯¸ä¾¯å‰²æ®ã€å¤©ä¸‹å¤§ä¹±</h3><p><img src="https://pic2.zhimg.com/80/v2-114700ee2814bcf3de172a4b673001e1_720w.jpg" alt="img"></p>
<p>ä¸ºäº†è®©è®¡ç®—æœºèƒ½å¤Ÿè¯†åˆ«ä¸­æ–‡å’Œè‹±æ–‡ï¼Œä¸­å›½äººå®šåˆ¶äº†GBK</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># GBKè¡¨çš„ç‰¹ç‚¹ï¼š</span></span><br><span class="line">    <span class="number">1</span>ã€åªæœ‰ä¸­æ–‡å­—ç¬¦ã€è‹±æ–‡å­—ç¬¦ä¸æ•°å­—çš„ä¸€ä¸€å¯¹åº”å…³ç³»</span><br><span class="line">    <span class="number">2</span>ã€ä¸€ä¸ªè‹±æ–‡å­—ç¬¦å¯¹åº”1Bytes</span><br><span class="line">       ä¸€ä¸ªä¸­æ–‡å­—ç¬¦å¯¹åº”2Bytes   </span><br><span class="line">       è¡¥å……è¯´æ˜ï¼š</span><br><span class="line">       1Bytes=8bitï¼Œ8bitæœ€å¤šåŒ…å«<span class="number">256</span>ä¸ªæ•°å­—ï¼Œå¯ä»¥å¯¹åº”<span class="number">256</span>ä¸ªå­—ç¬¦ï¼Œè¶³å¤Ÿè¡¨ç¤ºæ‰€æœ‰è‹±æ–‡å­—ç¬¦</span><br><span class="line">       2Bytes=16bitï¼Œ16bitæœ€å¤šåŒ…å«<span class="number">65536</span>ä¸ªæ•°å­—ï¼Œå¯ä»¥å¯¹åº”<span class="number">65536</span>ä¸ªå­—ç¬¦ï¼Œè¶³å¤Ÿè¡¨ç¤ºæ‰€æœ‰ä¸­æ–‡å­—ç¬¦</span><br></pre></td></tr></table></figure>

<p>æ¯ä¸ªå›½å®¶éƒ½å„è‡ªçš„å­—ç¬¦ï¼Œä¸ºè®©è®¡ç®—æœºèƒ½å¤Ÿè¯†åˆ«è‡ªå·±å›½å®¶çš„å­—ç¬¦å¤–åŠ è‹±æ–‡å­—ç¬¦ï¼Œå„ä¸ªå›½å®¶éƒ½åˆ¶å®šäº†è‡ªå·±çš„å­—ç¬¦ç¼–ç è¡¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Shift_JISè¡¨çš„ç‰¹ç‚¹ï¼š</span></span><br><span class="line">    <span class="number">1</span>ã€åªæœ‰æ—¥æ–‡å­—ç¬¦ã€è‹±æ–‡å­—ç¬¦ä¸æ•°å­—çš„ä¸€ä¸€å¯¹åº”å…³ç³»</span><br><span class="line"></span><br><span class="line"><span class="comment"># Euc-krè¡¨çš„ç‰¹ç‚¹ï¼š</span></span><br><span class="line">    <span class="number">1</span>ã€åªæœ‰éŸ©æ–‡å­—ç¬¦ã€è‹±æ–‡å­—ç¬¦ä¸æ•°å­—çš„ä¸€ä¸€å¯¹åº”å…³ç³»</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶,ç¾å›½äººç”¨çš„è®¡ç®—æœºé‡Œä½¿ç”¨å­—ç¬¦ç¼–ç æ ‡å‡†æ˜¯ASCIIã€ä¸­å›½äººç”¨çš„è®¡ç®—æœºé‡Œä½¿ç”¨å­—ç¬¦ç¼–ç æ ‡å‡†æ˜¯GBKã€æ—¥æœ¬äººç”¨çš„è®¡ç®—æœºé‡Œä½¿ç”¨å­—ç¬¦ç¼–ç æ ‡å‡†æ˜¯Shift_JIS,å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ</p>
<p><img src="https://pic3.zhimg.com/80/v2-19bac7b0910652bbd1f7e026683a28be_720w.jpg" alt="img"></p>
<p>å­—ç¬¦ç¼–ç å‘å±•åˆ°äº†è¿™ä¸ªé˜¶æ®µï¼Œå¯ä»¥ç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼šè¯¸ä¾¯å‰²æ®ã€å¤©ä¸‹å¤§ä¹±ï¼Œè¯¦è§£å¦‚ä¸‹</p>
<p><img src="https://pic3.zhimg.com/80/v2-b6ac2031b2082daa422c8dc233be95ee_720w.jpg" alt="img"></p>
<p>å›¾1ä¸­ï¼Œæ–‡æœ¬ç¼–è¾‘å­˜å–æ–‡ä»¶çš„åŸç†å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">æ–‡æœ¬æ–‡ä»¶å†…å®¹å…¨éƒ½ä¸ºå­—ç¬¦ï¼Œæ— è®ºå­˜å–éƒ½æ˜¯æ¶‰åŠåˆ°å­—ç¬¦ç¼–ç é—®é¢˜</span><br><span class="line"><span class="comment">#1ã€å­˜æ–‡æœ¬æ–‡ä»¶</span></span><br><span class="line">äººç±»é€šè¿‡æ–‡æœ¬ç¼–è¾‘å™¨è¾“å…¥çš„å­—ç¬¦ä¼šè¢«è½¬åŒ–æˆASCIIæ ¼å¼çš„äºŒè¿›åˆ¶å­˜æ”¾äºå†…å­˜ä¸­ï¼Œå¦‚æœéœ€è¦æ°¸ä¹…ä¿å­˜ï¼Œåˆ™ç›´æ¥å°†å†…å­˜ä¸­çš„ASCIIæ ¼å¼çš„äºŒè¿›åˆ¶å†™å…¥ç¡¬ç›˜</span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€è¯»æ–‡æœ¬æ–‡ä»¶</span></span><br><span class="line">ç›´æ¥å°†ç¡¬ç›˜ä¸­çš„ASCIIæ ¼å¼çš„äºŒè¿›åˆ¶è¯»å…¥å†…å­˜ï¼Œç„¶åé€šè¿‡ASCIIè¡¨åè§£æˆè‹±æ–‡å­—ç¬¦</span><br></pre></td></tr></table></figure>

<p>å›¾2å›¾3éƒ½æ˜¯ç›¸åŒçš„è¿‡ç¨‹ï¼Œæ­¤æ—¶æ— è®ºæ˜¯å­˜è¿˜æ˜¯å–ç”±äºé‡‡ç”¨çš„å­—ç¬¦ç¼–ç è¡¨ä¸€æ ·ï¼Œæ‰€ä»¥è‚¯å®šä¸ä¼šå‡ºç°ä¹±ç é—®é¢˜ï¼Œä½†é—®é¢˜æ˜¯åœ¨ç¾å›½äººç”¨çš„è®¡ç®—æœºé‡Œåªèƒ½è¾“å…¥è‹±æ–‡å­—ç¬¦ï¼Œè€Œåœ¨ä¸­å›½äººç”¨çš„è®¡ç®—æœºé‡Œåªèƒ½è¾“å…¥ä¸­æ–‡å­—ç¬¦å’Œè‹±æ–‡å­—ç¬¦â€¦.,æ¯«æ— ç–‘é—®æˆ‘ä»¬å¸Œæœ›è®¡ç®—æœºå…è®¸æˆ‘ä»¬è¾“å…¥ä¸‡å›½å­—ç¬¦å‡å¯è¯†åˆ«ã€ä¸ä¹±ç ï¼Œè€Œç°é˜¶æ®µè®¡ç®—æœºé‡‡ç”¨çš„å­—ç¬¦ç¼–ç ASCIIã€GBKã€Shift_JISéƒ½æ— æ³•è¯†åˆ«ä¸‡å›½å­—ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»å®šåˆ¶ä¸€ä¸ªå…¼å®¹ä¸‡å›½å­—ç¬¦çš„ç¼–ç è¡¨ï¼Œè¯·çœ‹é˜¶æ®µä¸‰</p>
<p><img src="https://pic3.zhimg.com/80/v2-aeb16d83abab152e00e7e2f99eaeb102_720w.jpg" alt="img"></p>
<h3 id="3-2-3-é˜¶æ®µä¸‰ï¼šåˆ†ä¹…å¿…åˆ"><a href="#3-2-3-é˜¶æ®µä¸‰ï¼šåˆ†ä¹…å¿…åˆ" class="headerlink" title="3.2.3 é˜¶æ®µä¸‰ï¼šåˆ†ä¹…å¿…åˆ"></a>3.2.3 é˜¶æ®µä¸‰ï¼šåˆ†ä¹…å¿…åˆ</h3><p><img src="https://pic1.zhimg.com/80/v2-f405404cd434f2280b4586c4f95ce760_720w.jpg" alt="img"></p>
<p>unicodeäº1990å¹´å¼€å§‹ç ”å‘ï¼Œ1994å¹´æ­£å¼å…¬å¸ƒï¼Œå…·å¤‡ä¸¤å¤§ç‰¹ç‚¹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. å­˜åœ¨æ‰€æœ‰è¯­è¨€ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸æ•°å­—çš„ä¸€ä¸€å¯¹åº”å…³ç³»,å³å…¼å®¹ä¸‡å›½å­—ç¬¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2. ä¸ä¼ ç»Ÿçš„å­—ç¬¦ç¼–ç çš„äºŒè¿›åˆ¶æ•°éƒ½æœ‰å¯¹åº”å…³ç³»ï¼Œè¯¦è§£å¦‚ä¸‹</span></span><br></pre></td></tr></table></figure>

<p>å¾ˆå¤šåœ°æ–¹æˆ–è€çš„ç³»ç»Ÿã€åº”ç”¨è½¯ä»¶ä»ä¼šé‡‡ç”¨å„ç§å„æ ·ä¼ ç»Ÿçš„ç¼–ç ï¼Œè¿™æ˜¯å†å²é—ç•™é—®é¢˜ã€‚æ­¤å¤„éœ€è¦å¼ºè°ƒï¼šè½¯ä»¶æ˜¯å­˜æ”¾äºç¡¬ç›˜çš„ï¼Œè€Œè¿è¡Œè½¯ä»¶æ˜¯è¦å°†è½¯ä»¶åŠ è½½åˆ°å†…å­˜çš„ï¼Œé¢å¯¹ç¡¬ç›˜ä¸­å­˜æ”¾çš„å„ç§ä¼ ç»Ÿç¼–ç çš„è½¯ä»¶ï¼Œæƒ³è®©æˆ‘ä»¬çš„è®¡ç®—æœºèƒ½å¤Ÿå°†å®ƒä»¬å…¨éƒ½æ­£å¸¸è¿è¡Œè€Œä¸å‡ºç°ä¹±ç ï¼Œå†…å­˜ä¸­å¿…é¡»æœ‰ä¸€ç§å…¼å®¹ä¸‡å›½çš„ç¼–ç ï¼Œå¹¶ä¸”è¯¥ç¼–ç éœ€è¦ä¸å…¶ä»–ç¼–ç æœ‰ç›¸å¯¹åº”çš„æ˜ å°„&#x2F;è½¬æ¢å…³ç³»ï¼Œè¿™å°±æ˜¯unicodeçš„ç¬¬äºŒå¤§ç‰¹ç‚¹äº§ç”Ÿçš„ç¼˜ç”±</p>
<p><img src="https://pic1.zhimg.com/80/v2-484a43054d2217ed11c7d5d9170675f8_720w.jpg" alt="img"></p>
<p>æ–‡æœ¬ç¼–è¾‘å™¨è¾“å…¥ä»»ä½•å­—ç¬¦éƒ½æ˜¯æœ€æ–°å­˜åœ¨äºå†…å­˜ä¸­ï¼Œæ˜¯unicodeç¼–ç çš„ï¼Œå­˜æ”¾äºç¡¬ç›˜ä¸­ï¼Œåˆ™å¯ä»¥è½¬æ¢æˆä»»æ„å…¶ä»–ç¼–ç ï¼Œåªè¦è¯¥ç¼–ç å¯ä»¥æ”¯æŒç›¸åº”çš„å­—ç¬¦</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è‹±æ–‡å­—ç¬¦å¯ä»¥è¢«ASCIIè¯†åˆ«</span></span><br><span class="line">è‹±æ–‡å­—ç¬¦---&gt;unciodeæ ¼å¼çš„æ•°å­—---&gt;ASCIIæ ¼å¼çš„æ•°å­—</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸­æ–‡å­—ç¬¦ã€è‹±æ–‡å­—ç¬¦å¯ä»¥è¢«GBKè¯†åˆ«</span></span><br><span class="line">ä¸­æ–‡å­—ç¬¦ã€è‹±æ–‡å­—ç¬¦---&gt;unicodeæ ¼å¼çš„æ•°å­—---&gt;gbkæ ¼å¼çš„æ•°å­—</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¥æ–‡å­—ç¬¦ã€è‹±æ–‡å­—ç¬¦å¯ä»¥è¢«shift-JISè¯†åˆ«</span></span><br><span class="line">æ—¥æ–‡å­—ç¬¦ã€è‹±æ–‡å­—ç¬¦---&gt;unicodeæ ¼å¼çš„æ•°å­—---&gt;shift-JISæ ¼å¼çš„æ•°å­—</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-77be4ea6e528d6ed700fd08b2096566f_720w.jpg" alt="img"></p>
<h2 id="3-3-ç¼–ç ä¸è§£ç "><a href="#3-3-ç¼–ç ä¸è§£ç " class="headerlink" title="3.3 ç¼–ç ä¸è§£ç "></a>3.3 ç¼–ç ä¸è§£ç </h2><p>ç”±å­—ç¬¦è½¬æ¢æˆå†…å­˜ä¸­çš„unicodeï¼Œä»¥åŠç”±unicodeè½¬æ¢æˆå…¶ä»–ç¼–ç çš„è¿‡ç¨‹ï¼Œéƒ½ç§°ä¸ºç¼–ç encode</p>
<p><img src="https://pic3.zhimg.com/80/v2-08a12814397a5a6d3e530a66cf2dbc02_720w.jpg" alt="img"></p>
<p>ç”±å†…å­˜ä¸­çš„unicodeè½¬æ¢æˆå­—ç¬¦ï¼Œä»¥åŠç”±å…¶ä»–ç¼–ç è½¬æ¢æˆunicodeçš„è¿‡ç¨‹ï¼Œéƒ½ç§°ä¸ºè§£ç decode</p>
<p><img src="https://pic4.zhimg.com/80/v2-5f7b25aaeb4ccc913f0c23d586acdbab_720w.jpg" alt="img"></p>
<p>åœ¨è¯¸å¤šæ–‡ä»¶ç±»å‹ä¸­ï¼Œåªæœ‰æ–‡æœ¬æ–‡ä»¶çš„å†…å­˜æ˜¯ç”±å­—ç¬¦ç»„æˆçš„ï¼Œå› è€Œæ–‡æœ¬æ–‡ä»¶çš„å­˜å–ä¹Ÿæ¶‰åŠåˆ°å­—ç¬¦ç¼–ç çš„é—®é¢˜</p>
<h2 id="3-4-utf-8çš„ç”±æ¥"><a href="#3-4-utf-8çš„ç”±æ¥" class="headerlink" title="3.4 utf-8çš„ç”±æ¥"></a>3.4 utf-8çš„ç”±æ¥</h2><p>æ³¨æ„ï¼šå¦‚æœä¿å­˜åˆ°ç¡¬ç›˜çš„æ˜¯GBKæ ¼å¼äºŒè¿›åˆ¶ï¼Œå½“åˆç”¨æˆ·è¾“å…¥çš„å­—ç¬¦åªèƒ½æ˜¯ä¸­æ–‡æˆ–è‹±æ–‡ï¼ŒåŒç†å¦‚æœä¿å­˜åˆ°ç¡¬ç›˜çš„æ˜¯Shift_JISæ ¼å¼äºŒè¿›åˆ¶ï¼Œå½“åˆç”¨æˆ·è¾“å…¥çš„å­—ç¬¦åªèƒ½æ˜¯æ—¥æ–‡æˆ–è‹±æ–‡â€¦â€¦å¦‚æœæˆ‘ä»¬è¾“å…¥çš„å­—ç¬¦ä¸­åŒ…å«å¤šå›½å­—ç¬¦ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•å¤„ç†ï¼Ÿ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¤šå›½å­—ç¬¦â€”âˆšâ€”ã€‹å†…å­˜ï¼ˆunicodeæ ¼å¼çš„äºŒè¿›åˆ¶ï¼‰â€”â€”Xâ€”ã€‹ç¡¬ç›˜ï¼ˆGBKæ ¼å¼çš„äºŒè¿›åˆ¶ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¤šå›½å­—ç¬¦â€”âˆšâ€”ã€‹å†…å­˜ï¼ˆunicodeæ ¼å¼çš„äºŒè¿›åˆ¶ï¼‰â€”â€”Xâ€”ã€‹ç¡¬ç›˜ï¼ˆShift_JISæ ¼å¼çš„äºŒè¿›åˆ¶ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¤šå›½å­—ç¬¦â€”âˆšâ€”ã€‹å†…å­˜ï¼ˆunicodeæ ¼å¼çš„äºŒè¿›åˆ¶ï¼‰â€”â€”âˆšâ€”ã€‹ç¡¬ç›˜ï¼ˆ???æ ¼å¼çš„äºŒè¿›åˆ¶ï¼‰</span></span><br></pre></td></tr></table></figure>

<p>ç†è®ºä¸Šæ˜¯å¯ä»¥å°†å†…å­˜ä¸­unicodeæ ¼å¼çš„äºŒè¿›åˆ¶ç›´æ¥å­˜æ”¾äºç¡¬ç›˜ä¸­çš„ï¼Œä½†ç”±äºunicodeå›ºå®šä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥å­˜å‚¨ä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚æœå¤šå›½å­—ç¬¦ä¸­åŒ…å«å¤§é‡çš„è‹±æ–‡å­—ç¬¦æ—¶ï¼Œä½¿ç”¨unicodeæ ¼å¼å­˜æ”¾ä¼šé¢å¤–å ç”¨ä¸€å€ç©ºé—´ï¼ˆè‹±æ–‡å­—ç¬¦å…¶å®åªéœ€è¦ç”¨ä¸€ä¸ªå­—èŠ‚å­˜æ”¾å³å¯ï¼‰ï¼Œç„¶è€Œç©ºé—´å ç”¨å¹¶ä¸æ˜¯æœ€è‡´å‘½çš„é—®é¢˜ï¼Œæœ€è‡´å‘½åœ°æ˜¯å½“æˆ‘ä»¬ç”±å†…å­˜å†™å…¥ç¡¬ç›˜æ—¶ä¼šé¢å¤–è€—è´¹ä¸€å€çš„æ—¶é—´ï¼Œæ‰€ä»¥å°†å†…å­˜ä¸­çš„unicodeäºŒè¿›åˆ¶å†™å…¥ç¡¬ç›˜æˆ–è€…åŸºäºç½‘ç»œä¼ è¾“æ—¶å¿…é¡»å°†å…¶è½¬æ¢æˆä¸€ç§ç²¾ç®€çš„æ ¼å¼ï¼Œè¿™ç§æ ¼å¼å³utf-8ï¼ˆå…¨ç§°Unicode Transformation Formatï¼Œå³unicodeçš„è½¬æ¢æ ¼å¼ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¤šå›½å­—ç¬¦â€”âˆšâ€”ã€‹å†…å­˜ï¼ˆunicodeæ ¼å¼çš„äºŒè¿›åˆ¶ï¼‰â€”â€”âˆšâ€”ã€‹ç¡¬ç›˜ï¼ˆutf-8æ ¼å¼çš„äºŒè¿›åˆ¶ï¼‰</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-c2a4ec82d946e4e35645f9782dbc798a_720w.jpg" alt="img"></p>
<p>é‚£ä¸ºä½•åœ¨å†…å­˜ä¸­ä¸ç›´æ¥ä½¿ç”¨utf-8å‘¢ï¼Ÿ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">utf-<span class="number">8</span>æ˜¯é’ˆå¯¹Unicodeçš„å¯å˜é•¿åº¦å­—ç¬¦ç¼–ç ï¼šä¸€ä¸ªè‹±æ–‡å­—ç¬¦å 1Bytesï¼Œä¸€ä¸ªä¸­æ–‡å­—ç¬¦å 3Bytesï¼Œç”Ÿåƒ»å­—ç”¨æ›´å¤šçš„Byteså­˜å‚¨</span><br><span class="line"></span><br><span class="line">unicodeæ›´åƒæ˜¯ä¸€ä¸ªè¿‡æ¸¡ç‰ˆæœ¬ï¼Œæˆ‘ä»¬æ–°å¼€å‘çš„è½¯ä»¶æˆ–æ–‡ä»¶å­˜å…¥ç¡¬ç›˜éƒ½é‡‡ç”¨utf-<span class="number">8</span>æ ¼å¼ï¼Œç­‰è¿‡å»å‡ åå¹´ï¼Œæ‰€æœ‰è€ç¼–ç çš„æ–‡ä»¶éƒ½æ·˜æ±°æ‰ä¹‹åï¼Œä¼šå‡ºç°ä¸€ä¸ªä»¤äººå¼€å¿ƒçš„åœºæ™¯ï¼Œå³ç¡¬ç›˜é‡Œæ”¾çš„éƒ½æ˜¯utf-<span class="number">8</span>æ ¼å¼ï¼Œæ­¤æ—¶unicodeä¾¿å¯ä»¥é€€å‡ºå†å²èˆå°ï¼Œå†…å­˜é‡Œä¹Ÿæ”¹ç”¨utf-<span class="number">8</span>ï¼Œå¤©ä¸‹é‡æ–°å½’äºç»Ÿä¸€</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-183090ce203c9e1b6edab8aff77460cb_720w.jpg" alt="img"></p>
<h2 id="å››-å­—ç¬¦ç¼–ç çš„åº”ç”¨"><a href="#å››-å­—ç¬¦ç¼–ç çš„åº”ç”¨" class="headerlink" title="å›› å­—ç¬¦ç¼–ç çš„åº”ç”¨"></a>å›› å­—ç¬¦ç¼–ç çš„åº”ç”¨</h2><p>æˆ‘ä»¬å­¦ä¹ å­—ç¬¦ç¼–ç å°±æ˜¯ä¸ºäº†å­˜å–å­—ç¬¦æ—¶ä¸å‘ç”Ÿä¹±ç é—®é¢˜ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€å†…å­˜ä¸­å›ºå®šä½¿ç”¨unicodeæ— è®ºè¾“å…¥ä»»ä½•å­—ç¬¦éƒ½ä¸ä¼šå‘ç”Ÿä¹±ç </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€æˆ‘ä»¬èƒ½å¤Ÿä¿®æ”¹çš„æ˜¯å­˜/å–ç¡¬ç›˜çš„ç¼–ç æ–¹å¼ï¼Œå¦‚æœç¼–ç è®¾ç½®ä¸æ­£ç¡®å°†ä¼šå‡ºç°ä¹±ç é—®é¢˜ã€‚ä¹±ç é—®é¢˜åˆ†ä¸ºä¸¤ç§ï¼šå­˜ä¹±äº†ï¼Œè¯»ä¹±äº†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2.1 å­˜ä¹±äº†ï¼šå¦‚æœç”¨æˆ·è¾“å…¥çš„å†…å®¹ä¸­åŒ…å«ä¸­æ–‡å’Œæ—¥æ–‡å­—ç¬¦ï¼Œå¦‚æœå•çº¯ä»¥shift_JISå­˜ï¼Œæ—¥æ–‡å¯ä»¥æ­£å¸¸å†™å…¥ç¡¬ç›˜ï¼Œè€Œç”±äºä¸­æ–‡å­—ç¬¦åœ¨shift_jisä¸­æ²¡æœ‰æ‰¾åˆ°å¯¹åº”å…³ç³»è€Œå¯¼è‡´å­˜ä¹±äº†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2.2 è¯»ä¹±äº†ï¼šå¦‚æœç¡¬ç›˜ä¸­çš„æ•°æ®æ˜¯shift_JISæ ¼å¼å­˜å‚¨çš„ï¼Œé‡‡GBKæ ¼å¼è¯»å…¥å†…å­˜å°±è¯»ä¹±äº†</span></span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. ä¿è¯å­˜çš„æ—¶å€™ä¸ä¹±ï¼šåœ¨ç”±å†…å­˜å†™å…¥ç¡¬ç›˜æ—¶ï¼Œå¿…é¡»å°†ç¼–ç æ ¼å¼è®¾ç½®ä¸ºæ”¯æŒæ‰€è¾“å…¥å­—ç¬¦çš„ç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="comment">#2. ä¿è¯å­˜çš„æ—¶å€™ä¸ä¹±ï¼šåœ¨ç”±ç¡¬ç›˜è¯»å…¥å†…å­˜æ—¶ï¼Œå¿…é¡»é‡‡ç”¨ä¸å†™å…¥ç¡¬ç›˜æ—¶ç›¸åŒçš„ç¼–ç æ ¼å¼</span></span><br></pre></td></tr></table></figure>

<h2 id="4-1-æ–‡æœ¬ç¼–è¾‘å™¨nodpad-å­˜å–æ–‡æœ¬æ–‡ä»¶"><a href="#4-1-æ–‡æœ¬ç¼–è¾‘å™¨nodpad-å­˜å–æ–‡æœ¬æ–‡ä»¶" class="headerlink" title="4.1 æ–‡æœ¬ç¼–è¾‘å™¨nodpad++å­˜å–æ–‡æœ¬æ–‡ä»¶"></a>4.1 æ–‡æœ¬ç¼–è¾‘å™¨nodpad++å­˜å–æ–‡æœ¬æ–‡ä»¶</h2><p>æ–‡æœ¬ç¼–è¾‘å™¨å­˜å–çš„éƒ½æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œè€Œæ–‡æœ¬æ–‡ä»¶ä¸­åŒ…å«çš„å†…å®¹å…¨ä¸ºå­—ç¬¦ï¼Œæ‰€ä»¥å­˜å–æ–‡æœ¬æ–‡ä»¶éƒ½æ¶‰åŠåˆ°å­—ç¬¦ç¼–ç çš„é—®é¢˜ã€‚</p>
<p><img src="https://pic4.zhimg.com/80/v2-80d179cdb9262eced650c8574bc74d33_720w.jpg" alt="img"></p>
<p><img src="https://pic4.zhimg.com/80/v2-75e2cb4b6932bc76c6161a086ad1a5a3_720w.jpg" alt="img"></p>
<p><img src="https://pic1.zhimg.com/80/v2-3d3b0ae681354751c1a85d75b27ee1d0_720w.jpg" alt="img"></p>
<h2 id="4-2-pythonè§£é‡Šå™¨æ‰§è¡Œæ–‡ä»¶çš„å‰ä¸¤ä¸ªé˜¶æ®µ"><a href="#4-2-pythonè§£é‡Šå™¨æ‰§è¡Œæ–‡ä»¶çš„å‰ä¸¤ä¸ªé˜¶æ®µ" class="headerlink" title="4.2 pythonè§£é‡Šå™¨æ‰§è¡Œæ–‡ä»¶çš„å‰ä¸¤ä¸ªé˜¶æ®µ"></a>4.2 pythonè§£é‡Šå™¨æ‰§è¡Œæ–‡ä»¶çš„å‰ä¸¤ä¸ªé˜¶æ®µ</h2><p>æ‰§è¡Œpyæ–‡ä»¶çš„å‰ä¸¤ä¸ªé˜¶æ®µå°±æ˜¯pythonè§£é‡Šå™¨è¯»æ–‡æœ¬æ–‡ä»¶çš„è¿‡ç¨‹ï¼Œä¸æ–‡æœ¬ç¼–è¾‘è¯»æ–‡æœ¬æ–‡ä»¶çš„å‰ä¸¤ä¸ªé˜¶æ®µæ²¡äººä»»ä½•åŒºåˆ«ï¼Œè¦ä¿è¯è¯»ä¸ä¹±ç ï¼Œåˆ™å¿…é¡»å°†pythonè§£é‡Šå™¨è¯»æ–‡ä»¶æ—¶é‡‡ç”¨çš„ç¼–ç æ–¹å¼è®¾ç½®ä¸ºæ–‡ä»¶å½“åˆå†™å…¥ç¡¬ç›˜æ—¶çš„ç¼–ç æ ¼å¼ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œpythonè§£é‡Šå™¨åˆ™æ‰ç”¨é»˜è®¤çš„ç¼–ç æ–¹å¼ï¼Œåœ¨python3ä¸­é»˜è®¤ä¸ºutf-8ï¼Œåœ¨python2ä¸­é»˜è®¤ä¸ºASCIIï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡å®šæ–‡ä»¶å¤´æ¥ä¿®æ”¹é»˜è®¤çš„ç¼–ç </p>
<ul>
<li>åœ¨æ–‡ä»¶é¦–è¡Œå†™å…¥åŒ…å«#å·åœ¨å†…çš„ä»¥ä¸‹å†…å®¹</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># coding: å½“åˆæ–‡ä»¶å†™å…¥ç¡¬ç›˜æ—¶é‡‡ç”¨çš„ç¼–ç æ ¼å¼</span></span><br></pre></td></tr></table></figure>

<p>è§£é‡Šå™¨ä¼šå…ˆç”¨é»˜è®¤çš„ç¼–ç æ–¹å¼è¯»å–æ–‡ä»¶çš„é¦–è¡Œå†…å®¹ï¼Œç”±äºé¦–è¡Œæ˜¯çº¯è‹±æ–‡ç»„æˆï¼Œè€Œä»»ä½•ç¼–ç æ–¹å¼éƒ½å¯ä»¥è¯†åˆ«è‹±æ–‡å­—ç¬¦ã€‚</p>
<p><img src="https://pic4.zhimg.com/80/v2-b39022bd9969bcba565b7cfe6c067b13_720w.jpg" alt="img"></p>
<h2 id="4-3-pythonè§£é‡Šå™¨æ‰§è¡Œæ–‡ä»¶çš„ç¬¬ä¸‰ä¸ªé˜¶æ®µ"><a href="#4-3-pythonè§£é‡Šå™¨æ‰§è¡Œæ–‡ä»¶çš„ç¬¬ä¸‰ä¸ªé˜¶æ®µ" class="headerlink" title="4.3 pythonè§£é‡Šå™¨æ‰§è¡Œæ–‡ä»¶çš„ç¬¬ä¸‰ä¸ªé˜¶æ®µ"></a>4.3 pythonè§£é‡Šå™¨æ‰§è¡Œæ–‡ä»¶çš„ç¬¬ä¸‰ä¸ªé˜¶æ®µ</h2><p>è®¾ç½®æ–‡ä»¶å¤´çš„ä½œç”¨æ˜¯ä¿è¯è¿è¡Œpythonç¨‹åºçš„å‰ä¸¤ä¸ªé˜¶æ®µä¸ä¹±ç ï¼Œç»è¿‡å‰ä¸¤ä¸ªé˜¶æ®µåpyæ–‡ä»¶çš„å†…å®¹éƒ½ä¼šä»¥unicodeæ ¼å¼å­˜æ”¾äºå†…å­˜ä¸­ã€‚</p>
<p>åœ¨ç»å†ç¬¬ä¸‰ä¸ªé˜¶æ®µæ—¶å¼€å§‹è¯†åˆ«pythonè¯­æ³•ï¼Œå½“é‡åˆ°ç‰¹å®šçš„è¯­æ³•name &#x3D; â€˜ä¸Šâ€™ï¼ˆä»£ç æœ¬èº«ä¹Ÿéƒ½å…¨éƒ½æ˜¯unicodeæ ¼å¼å­˜çš„ï¼‰æ—¶ï¼Œéœ€è¦ç”³è¯·å†…å­˜ç©ºé—´æ¥å­˜å‚¨å­—ç¬¦ä¸²â€™ä¸Šâ€™ï¼Œè¿™å°±åˆæ¶‰åŠåˆ°åº”è¯¥ä»¥ä»€ä¹ˆç¼–ç å­˜å‚¨â€˜ä¸Šâ€™çš„é—®é¢˜äº†ã€‚</p>
<p>åœ¨Python3ä¸­ï¼Œå­—ç¬¦ä¸²ç±»çš„å€¼éƒ½æ˜¯ä½¿ç”¨unicodeæ ¼å¼æ¥å­˜å‚¨</p>
<p>ç”±äºPython2çš„ç››è¡Œæ˜¯æ—©äºunicodeçš„ï¼Œå› æ­¤åœ¨Python2ä¸­æ˜¯æŒ‰ç…§æ–‡ä»¶å¤´æŒ‡å®šçš„ç¼–ç æ¥å­˜å‚¨å­—ç¬¦ä¸²ç±»å‹çš„å€¼çš„ï¼ˆå¦‚æœæ–‡ä»¶å¤´ä¸­æ²¡æœ‰æŒ‡å®šç¼–ç ï¼Œé‚£ä¹ˆè§£é‡Šå™¨ä¼šæŒ‰ç…§å®ƒè‡ªå·±é»˜è®¤çš„ç¼–ç æ–¹å¼æ¥å­˜å‚¨â€˜ä¸Šâ€™ï¼‰ï¼Œæ‰€ä»¥ï¼Œè¿™å°±æœ‰å¯èƒ½å¯¼è‡´ä¹±ç é—®é¢˜</p>
<p><img src="https://pic2.zhimg.com/80/v2-d27cfdaa0659c34c85fcff4a48a4e2f9_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line">x = <span class="string">&#x27;ä¸Š&#x27;</span> <span class="comment"># xçš„å€¼ä¸ºuntf-8æ ¼å¼çš„äºŒè¿›åˆ¶</span></span><br><span class="line"><span class="built_in">print</span>(x) <span class="comment"># æ‰“å°æ“ä½œæ˜¯å°†xçš„å€¼ï¼Œå³utf-8æ ¼å¼çš„äºŒè¿›åˆ¶äº¤ç»™ç»ˆç«¯ï¼Œå½“ç»ˆç«¯æ”¶åˆ°åå‘ç°å¹¶ä¸æ˜¯unicodeï¼ˆåªæœ‰unicodeæ‰ä¸å­—ç¬¦æœ‰å¯¹åº”å…³ç³»ï¼‰ï¼Œæ‰€ä»¥ç»ˆç«¯ä¼šæ‰§è¡Œæ“ä½œï¼šutf-8äºŒè¿›åˆ¶---è§£ç --&gt;unicodeæ ¼å¼çš„äºŒè¿›åˆ¶ï¼Œè§£ç çš„è¿‡ç¨‹ç»ˆç«¯ä¼šé‡‡ç”¨è‡ªå·±é»˜è®¤çš„ç¼–ç ï¼Œè€Œåœ¨pycharmçš„ç»ˆç«¯é»˜è®¤ç¼–ç ä¸ºutf-8ã€windowsä¸‹çš„cmdç»ˆç«¯çš„é»˜è®¤ç¼–ç ä¸ºgbkï¼Œæ‰€ä»¥è¯¥æ‰“å°æ“ä½œåœ¨pycharmä¸­æ˜¾ç¤ºæ­£å¸¸ï¼Œè€Œåœ¨windowsä¸‹çš„cmdä¸­åˆ™ä¹±ç </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨windowsä¸‹çš„cmdä¸­è¿è¡Œæ•ˆæœå¦‚ä¸‹</span></span><br><span class="line">C:\Users\Administrator&gt;python2 E:\aaa.py</span><br><span class="line">æ¶“</span><br></pre></td></tr></table></figure>

<p>python2åæ¨å‡ºäº†ä¸€ç§è¡¥æ•‘æªæ–½ï¼Œå°±æ˜¯åœ¨å­—ç¬¦ä¸²ç±»å‹å‰åŠ uï¼Œåˆ™ä¼šå°†å­—ç¬¦ä¸²ç±»å‹å¼ºåˆ¶å­˜å‚¨unicodeï¼Œè¿™å°±ä¸python3ä¿æŒä¸€è‡´äº†ï¼Œå¯¹äºunicodeæ ¼å¼æ— è®ºä¸¢ç»™ä»»ä½•ç»ˆç«¯è¿›è¡Œæ‰“å°ï¼Œéƒ½å¯ä»¥ç›´æ¥å¯¹åº”å­—ç¬¦ä¸ä¼šå‡ºç°ä¹±ç é—®é¢˜</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line">x = <span class="string">u&#x27;ä¸Š&#x27;</span> <span class="comment"># å³ä¾¿æ–‡ä»¶å¤´ä¸ºutf-8ï¼Œxçš„å€¼ä¾ç„¶å­˜æˆunicode</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-1ef12a426d5d928e8ce10eafef489616_720w.jpg" alt="img"></p>
<h2 id="4-4-å­—ç¬¦ä¸²encodeç¼–ç ä¸decodeè§£ç çš„ä½¿ç”¨"><a href="#4-4-å­—ç¬¦ä¸²encodeç¼–ç ä¸decodeè§£ç çš„ä½¿ç”¨" class="headerlink" title="4.4 å­—ç¬¦ä¸²encodeç¼–ç ä¸decodeè§£ç çš„ä½¿ç”¨"></a>4.4 å­—ç¬¦ä¸²encodeç¼–ç ä¸decodeè§£ç çš„ä½¿ç”¨</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1ã€unicodeæ ¼å¼------ç¼–ç encode--------&gt;å…¶å®ƒç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=<span class="string">&#x27;ä¸Š&#x27;</span> <span class="comment"># åœ¨python3åœ¨&#x27;ä¸Š&#x27;è¢«å­˜æˆunicode</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res=x.encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res,<span class="built_in">type</span>(res) <span class="comment"># unicodeç¼–ç æˆäº†utf-8æ ¼å¼ï¼Œè€Œç¼–ç çš„ç»“æœä¸ºbytesç±»å‹ï¼Œå¯ä»¥å½“ä½œç›´æ¥å½“ä½œäºŒè¿›åˆ¶å»ä½¿ç”¨</span></span><br><span class="line">(<span class="string">b&#x27;\xe4\xb8\x8a&#x27;</span>, &lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">bytes</span>&#x27;&gt;)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"># 2ã€å…¶å®ƒç¼–ç æ ¼å¼------è§£ç <span class="title">decode</span>--------&gt;unicodeæ ¼å¼</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; res.decode(&#x27;utf-8&#x27;) </span></span><br><span class="line"><span class="class">&#x27;ä¸Š&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=27">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=27<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=28">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=28<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=29">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=29<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=30">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=30<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>10-æ–‡ä»¶å¤„ç†</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/10_%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<h2 id="ä¸€-å¼•å…¥"><a href="#ä¸€-å¼•å…¥" class="headerlink" title="ä¸€ å¼•å…¥"></a>ä¸€ å¼•å…¥</h2><p> åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ•°æ®æœ€å…ˆéƒ½æ˜¯å­˜æ”¾äºå†…å­˜ä¸­çš„ï¼Œè‹¥æƒ³æ°¸ä¹…ä¿å­˜ä¸‹æ¥ï¼Œå¿…é¡»è¦ä¿å­˜äºç¡¬ç›˜ä¸­ã€‚åº”ç”¨ç¨‹åºè‹¥æƒ³æ“ä½œç¡¬ä»¶å¿…é¡»é€šè¿‡æ“ä½œç³»ç»Ÿï¼Œè€Œæ–‡ä»¶å°±æ˜¯æ“ä½œç³»ç»Ÿæä¾›ç»™åº”ç”¨ç¨‹åºæ¥æ“ä½œç¡¬ç›˜çš„è™šæ‹Ÿæ¦‚å¿µï¼Œç”¨æˆ·æˆ–åº”ç”¨ç¨‹åºå¯¹æ–‡ä»¶çš„æ“ä½œï¼Œå°±æ˜¯å‘æ“ä½œç³»ç»Ÿå‘èµ·è°ƒç”¨ï¼Œç„¶åç”±æ“ä½œç³»ç»Ÿå®Œæˆå¯¹ç¡¬ç›˜çš„å…·ä½“æ“ä½œã€‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-e1c5ac2494f15c2d7a1ee4732fbb9289_720w.jpg" alt="img"></p>
<h2 id="äºŒ-æ–‡ä»¶æ“ä½œçš„åŸºæœ¬æµç¨‹"><a href="#äºŒ-æ–‡ä»¶æ“ä½œçš„åŸºæœ¬æµç¨‹" class="headerlink" title="äºŒ æ–‡ä»¶æ“ä½œçš„åŸºæœ¬æµç¨‹"></a>äºŒ æ–‡ä»¶æ“ä½œçš„åŸºæœ¬æµç¨‹</h2><h2 id="2-1-åŸºæœ¬æµç¨‹"><a href="#2-1-åŸºæœ¬æµç¨‹" class="headerlink" title="2.1 åŸºæœ¬æµç¨‹"></a>2.1 åŸºæœ¬æµç¨‹</h2><p><img src="https://pic3.zhimg.com/80/v2-5f2bdccc6b9d407c733fe1c4315a050a_720w.jpg" alt="img"></p>
<p>æœ‰äº†æ–‡ä»¶çš„æ¦‚å¿µï¼Œæˆ‘ä»¬æ— éœ€å†å»è€ƒè™‘æ“ä½œç¡¬ç›˜çš„ç»†èŠ‚ï¼Œåªéœ€è¦å…³æ³¨æ“ä½œæ–‡ä»¶çš„æµç¨‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1. æ‰“å¼€æ–‡ä»¶ï¼Œç”±åº”ç”¨ç¨‹åºå‘æ“ä½œç³»ç»Ÿå‘èµ·ç³»ç»Ÿè°ƒç”¨open(...)ï¼Œæ“ä½œç³»ç»Ÿæ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå¯¹åº”ä¸€å—ç¡¬ç›˜ç©ºé—´ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡f</span></span><br><span class="line">f=<span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="comment">#é»˜è®¤æ‰“å¼€æ¨¡å¼å°±ä¸ºr</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. è°ƒç”¨æ–‡ä»¶å¯¹è±¡ä¸‹çš„è¯»/å†™æ–¹æ³•ï¼Œä¼šè¢«æ“ä½œç³»ç»Ÿè½¬æ¢ä¸ºè¯»/å†™ç¡¬ç›˜çš„æ“ä½œ</span></span><br><span class="line">data=f.read()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. å‘æ“ä½œç³»ç»Ÿå‘èµ·å…³é—­æ–‡ä»¶çš„è¯·æ±‚ï¼Œå›æ”¶ç³»ç»Ÿèµ„æº</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-df5334d72003b1b12e88bdf983af6b5d_720w.jpg" alt="img"></p>
<h2 id="2-2-èµ„æºå›æ”¶ä¸withä¸Šä¸‹æ–‡ç®¡ç†"><a href="#2-2-èµ„æºå›æ”¶ä¸withä¸Šä¸‹æ–‡ç®¡ç†" class="headerlink" title="2.2 èµ„æºå›æ”¶ä¸withä¸Šä¸‹æ–‡ç®¡ç†"></a>2.2 èµ„æºå›æ”¶ä¸withä¸Šä¸‹æ–‡ç®¡ç†</h2><p>æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åŒ…å«ä¸¤éƒ¨åˆ†èµ„æºï¼šåº”ç”¨ç¨‹åºçš„å˜é‡få’Œæ“ä½œç³»ç»Ÿæ‰“å¼€çš„æ–‡ä»¶ã€‚åœ¨æ“ä½œå®Œæ¯•ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå¿…é¡»æŠŠä¸è¯¥æ–‡ä»¶çš„è¿™ä¸¤éƒ¨åˆ†èµ„æºå…¨éƒ¨å›æ”¶ï¼Œå›æ”¶æ–¹æ³•ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>ã€f.close() <span class="comment">#å›æ”¶æ“ä½œç³»ç»Ÿæ‰“å¼€çš„æ–‡ä»¶èµ„æº</span></span><br><span class="line"><span class="number">2</span>ã€<span class="keyword">del</span> f <span class="comment">#å›æ”¶åº”ç”¨ç¨‹åºçº§çš„å˜é‡</span></span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­del fä¸€å®šè¦å‘ç”Ÿåœ¨f.close()ä¹‹åï¼Œå¦åˆ™å°±ä¼šå¯¼è‡´æ“ä½œç³»ç»Ÿæ‰“å¼€çš„æ–‡ä»¶æ— æ³•å…³é—­ï¼Œç™½ç™½å ç”¨èµ„æºï¼Œ è€Œpythonè‡ªåŠ¨çš„åƒåœ¾å›æ”¶æœºåˆ¶å†³å®šäº†æˆ‘ä»¬æ— éœ€è€ƒè™‘del fï¼Œè¿™å°±è¦æ±‚æˆ‘ä»¬ï¼Œåœ¨æ“ä½œå®Œæ¯•æ–‡ä»¶åï¼Œä¸€å®šè¦è®°ä½f.close()ï¼Œè™½ç„¶æˆ‘ä»¬å¦‚æ­¤å¼ºè°ƒï¼Œä½†æ˜¯å¤§å¤šæ•°è¯»è€…è¿˜æ˜¯ä¼šä¸ç”±è‡ªä¸»åœ°å¿˜è®°f.close()ï¼Œè€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œpythonæä¾›äº†withå…³é”®å­—æ¥å¸®æˆ‘ä»¬ç®¡ç†ä¸Šä¸‹æ–‡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1ã€åœ¨æ‰§è¡Œå®Œå­ä»£ç å—åï¼Œwith ä¼šè‡ªåŠ¨æ‰§è¡Œf.close()</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">pass</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€å¯ç”¨ç”¨withåŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Œç”¨é€—å·åˆ†éš”å¼€å³å¯</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> read_f,<span class="built_in">open</span>(<span class="string">&#x27;b.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> write_f:  </span><br><span class="line">    data = read_f.read()</span><br><span class="line">    write_f.write(data)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-d5d2e9ba1e1584d711be9141313c9a55_720w.jpg" alt="img"></p>
<h2 id="2-3-æŒ‡å®šæ“ä½œæ–‡æœ¬æ–‡ä»¶çš„å­—ç¬¦ç¼–ç "><a href="#2-3-æŒ‡å®šæ“ä½œæ–‡æœ¬æ–‡ä»¶çš„å­—ç¬¦ç¼–ç " class="headerlink" title="2.3 æŒ‡å®šæ“ä½œæ–‡æœ¬æ–‡ä»¶çš„å­—ç¬¦ç¼–ç "></a>2.3 æŒ‡å®šæ“ä½œæ–‡æœ¬æ–‡ä»¶çš„å­—ç¬¦ç¼–ç </h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(...)æ˜¯ç”±æ“ä½œç³»ç»Ÿæ‰“å¼€æ–‡ä»¶ï¼Œå¦‚æœæ‰“å¼€çš„æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œä¼šæ¶‰åŠåˆ°å­—ç¬¦ç¼–ç é—®é¢˜ï¼Œå¦‚æœæ²¡æœ‰ä¸º<span class="built_in">open</span>æŒ‡å®šç¼–ç ï¼Œé‚£ä¹ˆæ‰“å¼€æ–‡æœ¬æ–‡ä»¶çš„é»˜è®¤ç¼–ç å¾ˆæ˜æ˜¾æ˜¯æ“ä½œç³»ç»Ÿè¯´äº†ç®—äº†ï¼Œæ“ä½œç³»ç»Ÿä¼šç”¨è‡ªå·±çš„é»˜è®¤ç¼–ç å»æ‰“å¼€æ–‡ä»¶ï¼Œåœ¨windowsä¸‹æ˜¯gbkï¼Œåœ¨linuxä¸‹æ˜¯utf-<span class="number">8</span>ã€‚</span><br><span class="line">è¿™å°±ç”¨åˆ°äº†ä¸ŠèŠ‚è¯¾è®²çš„å­—ç¬¦ç¼–ç çš„çŸ¥è¯†ï¼šè‹¥è¦ä¿è¯ä¸ä¹±ç ï¼Œæ–‡ä»¶ä»¥ä»€ä¹ˆæ–¹å¼å­˜çš„ï¼Œå°±è¦ä»¥ä»€ä¹ˆæ–¹å¼æ‰“å¼€ã€‚</span><br><span class="line"></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-fc61df44636a5f14346f24fae99f1b67_720w.jpg" alt="img"></p>
<h2 id="ä¸‰-æ–‡ä»¶çš„æ“ä½œæ¨¡å¼"><a href="#ä¸‰-æ–‡ä»¶çš„æ“ä½œæ¨¡å¼" class="headerlink" title="ä¸‰ æ–‡ä»¶çš„æ“ä½œæ¨¡å¼"></a>ä¸‰ æ–‡ä»¶çš„æ“ä½œæ¨¡å¼</h2><h2 id="3-1-æ§åˆ¶æ–‡ä»¶è¯»å†™æ“ä½œçš„æ¨¡å¼"><a href="#3-1-æ§åˆ¶æ–‡ä»¶è¯»å†™æ“ä½œçš„æ¨¡å¼" class="headerlink" title="3.1 æ§åˆ¶æ–‡ä»¶è¯»å†™æ“ä½œçš„æ¨¡å¼"></a>3.1 æ§åˆ¶æ–‡ä»¶è¯»å†™æ“ä½œçš„æ¨¡å¼</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">r(é»˜è®¤çš„)ï¼šåªè¯»</span><br><span class="line">wï¼šåªå†™</span><br><span class="line">aï¼šåªè¿½åŠ å†™</span><br></pre></td></tr></table></figure>

<h3 id="3-1-1-æ¡ˆä¾‹ä¸€ï¼šr-æ¨¡å¼çš„ä½¿ç”¨"><a href="#3-1-1-æ¡ˆä¾‹ä¸€ï¼šr-æ¨¡å¼çš„ä½¿ç”¨" class="headerlink" title="3.1.1 æ¡ˆä¾‹ä¸€ï¼šr æ¨¡å¼çš„ä½¿ç”¨"></a>3.1.1 æ¡ˆä¾‹ä¸€ï¼šr æ¨¡å¼çš„ä½¿ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># råªè¯»æ¨¡å¼: åœ¨æ–‡ä»¶ä¸å­˜åœ¨æ—¶åˆ™æŠ¥é”™,æ–‡ä»¶å­˜åœ¨æ–‡ä»¶å†…æŒ‡é’ˆç›´æ¥è·³åˆ°æ–‡ä»¶å¼€å¤´</span></span><br><span class="line"> <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,mode=<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">     res=f.read() <span class="comment"># ä¼šå°†æ–‡ä»¶çš„å†…å®¹ç”±ç¡¬ç›˜å…¨éƒ¨è¯»å…¥å†…å­˜ï¼Œèµ‹å€¼ç»™res</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°ç»ƒä¹ ï¼šå®ç°ç”¨æˆ·è®¤è¯åŠŸèƒ½</span></span><br><span class="line"> inp_name=<span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥ä½ çš„åå­—: &#x27;</span>).strip()</span><br><span class="line"> inp_pwd=<span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥ä½ çš„å¯†ç : &#x27;</span>).strip()</span><br><span class="line"> <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&#x27;db.txt&#x27;</span>,mode=<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">     <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">         <span class="comment"># æŠŠç”¨æˆ·è¾“å…¥çš„åå­—ä¸å¯†ç ä¸è¯»å‡ºå†…å®¹åšæ¯”å¯¹</span></span><br><span class="line">         u,p=line.strip(<span class="string">&#x27;\n&#x27;</span>).split(<span class="string">&#x27;:&#x27;</span>)</span><br><span class="line">         <span class="keyword">if</span> inp_name == u <span class="keyword">and</span> inp_pwd == p:</span><br><span class="line">             <span class="built_in">print</span>(<span class="string">&#x27;ç™»å½•æˆåŠŸ&#x27;</span>)</span><br><span class="line">             <span class="keyword">break</span></span><br><span class="line">     <span class="keyword">else</span>:</span><br><span class="line">         <span class="built_in">print</span>(<span class="string">&#x27;è´¦å·åæˆ–è€…å¯†ç é”™è¯¯&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="3-1-2-æ¡ˆä¾‹äºŒï¼šw-æ¨¡å¼çš„ä½¿ç”¨"><a href="#3-1-2-æ¡ˆä¾‹äºŒï¼šw-æ¨¡å¼çš„ä½¿ç”¨" class="headerlink" title="3.1.2 æ¡ˆä¾‹äºŒï¼šw æ¨¡å¼çš„ä½¿ç”¨"></a>3.1.2 æ¡ˆä¾‹äºŒï¼šw æ¨¡å¼çš„ä½¿ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># wåªå†™æ¨¡å¼: åœ¨æ–‡ä»¶ä¸å­˜åœ¨æ—¶ä¼šåˆ›å»ºç©ºæ–‡æ¡£,æ–‡ä»¶å­˜åœ¨ä¼šæ¸…ç©ºæ–‡ä»¶,æ–‡ä»¶æŒ‡é’ˆè·‘åˆ°æ–‡ä»¶å¼€å¤´</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;b.txt&#x27;</span>,mode=<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">&#x27;ä½ å¥½\n&#x27;</span>)</span><br><span class="line">    f.write(<span class="string">&#x27;æˆ‘å¥½\n&#x27;</span>) </span><br><span class="line">    f.write(<span class="string">&#x27;å¤§å®¶å¥½\n&#x27;</span>)</span><br><span class="line">    f.write(<span class="string">&#x27;111\n222\n333\n&#x27;</span>)</span><br><span class="line"><span class="comment">#å¼ºè°ƒï¼š</span></span><br><span class="line"><span class="comment"># 1 åœ¨æ–‡ä»¶ä¸å…³é—­çš„æƒ…å†µä¸‹,è¿ç»­çš„å†™å…¥ï¼Œåå†™çš„å†…å®¹ä¸€å®šè·Ÿåœ¨å‰å†™å†…å®¹çš„åé¢</span></span><br><span class="line"><span class="comment"># 2 å¦‚æœé‡æ–°ä»¥wæ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œåˆ™ä¼šæ¸…ç©ºæ–‡ä»¶å†…å®¹</span></span><br></pre></td></tr></table></figure>

<h3 id="3-1-3-æ¡ˆä¾‹ä¸‰ï¼ša-æ¨¡å¼çš„ä½¿ç”¨"><a href="#3-1-3-æ¡ˆä¾‹ä¸‰ï¼ša-æ¨¡å¼çš„ä½¿ç”¨" class="headerlink" title="3.1.3 æ¡ˆä¾‹ä¸‰ï¼ša æ¨¡å¼çš„ä½¿ç”¨"></a>3.1.3 æ¡ˆä¾‹ä¸‰ï¼ša æ¨¡å¼çš„ä½¿ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># aåªè¿½åŠ å†™æ¨¡å¼: åœ¨æ–‡ä»¶ä¸å­˜åœ¨æ—¶ä¼šåˆ›å»ºç©ºæ–‡æ¡£,æ–‡ä»¶å­˜åœ¨ä¼šå°†æ–‡ä»¶æŒ‡é’ˆç›´æ¥ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾</span></span><br><span class="line"> <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;c.txt&#x27;</span>,mode=<span class="string">&#x27;a&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">     f.write(<span class="string">&#x27;44444\n&#x27;</span>)</span><br><span class="line">     f.write(<span class="string">&#x27;55555\n&#x27;</span>)</span><br><span class="line"><span class="comment">#å¼ºè°ƒ w æ¨¡å¼ä¸ a æ¨¡å¼çš„å¼‚åŒï¼š</span></span><br><span class="line"><span class="comment"># 1 ç›¸åŒç‚¹ï¼šåœ¨æ‰“å¼€çš„æ–‡ä»¶ä¸å…³é—­çš„æƒ…å†µä¸‹ï¼Œè¿ç»­çš„å†™å…¥ï¼Œæ–°å†™çš„å†…å®¹æ€»ä¼šè·Ÿåœ¨å‰å†™çš„å†…å®¹ä¹‹å</span></span><br><span class="line"><span class="comment"># 2 ä¸åŒç‚¹ï¼šä»¥ a æ¨¡å¼é‡æ–°æ‰“å¼€æ–‡ä»¶ï¼Œä¸ä¼šæ¸…ç©ºåŸæ–‡ä»¶å†…å®¹ï¼Œä¼šå°†æ–‡ä»¶æŒ‡é’ˆç›´æ¥ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾ï¼Œæ–°å†™çš„å†…å®¹æ°¸è¿œå†™åœ¨æœ€å</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°ç»ƒä¹ ï¼šå®ç°æ³¨å†ŒåŠŸèƒ½:</span></span><br><span class="line"> name=<span class="built_in">input</span>(<span class="string">&#x27;username&gt;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line"> pwd=<span class="built_in">input</span>(<span class="string">&#x27;password&gt;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line"> <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;db1.txt&#x27;</span>,mode=<span class="string">&#x27;a&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">     info=<span class="string">&#x27;%s:%s\n&#x27;</span> %(name,pwd)</span><br><span class="line">     f.write(info)</span><br></pre></td></tr></table></figure>

<h3 id="3-1-4-æ¡ˆä¾‹å››ï¼š-æ¨¡å¼çš„ä½¿ç”¨-äº†è§£"><a href="#3-1-4-æ¡ˆä¾‹å››ï¼š-æ¨¡å¼çš„ä½¿ç”¨-äº†è§£" class="headerlink" title="3.1.4 æ¡ˆä¾‹å››ï¼š+ æ¨¡å¼çš„ä½¿ç”¨(äº†è§£)"></a>3.1.4 æ¡ˆä¾‹å››ï¼š+ æ¨¡å¼çš„ä½¿ç”¨(äº†è§£)</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># r+ w+ a+ :å¯è¯»å¯å†™</span></span><br><span class="line"><span class="comment">#åœ¨å¹³æ—¶å·¥ä½œä¸­ï¼Œæˆ‘ä»¬åªå•çº¯ä½¿ç”¨r/w/aï¼Œè¦ä¹ˆåªè¯»ï¼Œè¦ä¹ˆåªå†™ï¼Œä¸€èˆ¬ä¸ç”¨å¯è¯»å¯å†™çš„æ¨¡å¼</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-bea42b94950b49f8be785289904e17b7_720w.jpg" alt="img"></p>
<h2 id="3-2-æ§åˆ¶æ–‡ä»¶è¯»å†™å†…å®¹çš„æ¨¡å¼"><a href="#3-2-æ§åˆ¶æ–‡ä»¶è¯»å†™å†…å®¹çš„æ¨¡å¼" class="headerlink" title="3.2 æ§åˆ¶æ–‡ä»¶è¯»å†™å†…å®¹çš„æ¨¡å¼"></a>3.2 æ§åˆ¶æ–‡ä»¶è¯»å†™å†…å®¹çš„æ¨¡å¼</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">å¤§å‰æ: tbæ¨¡å¼å‡ä¸èƒ½å•ç‹¬ä½¿ç”¨,å¿…é¡»ä¸r/w/aä¹‹ä¸€ç»“åˆä½¿ç”¨</span><br><span class="line">tï¼ˆé»˜è®¤çš„ï¼‰ï¼šæ–‡æœ¬æ¨¡å¼</span><br><span class="line">    <span class="number">1.</span> è¯»å†™æ–‡ä»¶éƒ½æ˜¯ä»¥å­—ç¬¦ä¸²ä¸ºå•ä½çš„</span><br><span class="line">    <span class="number">2.</span> åªèƒ½é’ˆå¯¹æ–‡æœ¬æ–‡ä»¶</span><br><span class="line">    <span class="number">3.</span> å¿…é¡»æŒ‡å®šencodingå‚æ•°</span><br><span class="line">bï¼šäºŒè¿›åˆ¶æ¨¡å¼:</span><br><span class="line">   <span class="number">1.</span>è¯»å†™æ–‡ä»¶éƒ½æ˜¯ä»¥<span class="built_in">bytes</span>/äºŒè¿›åˆ¶ä¸ºå•ä½çš„</span><br><span class="line">   <span class="number">2.</span> å¯ä»¥é’ˆå¯¹æ‰€æœ‰æ–‡ä»¶</span><br><span class="line">   <span class="number">3.</span> ä¸€å®šä¸èƒ½æŒ‡å®šencodingå‚æ•°</span><br></pre></td></tr></table></figure>

<h3 id="3-2-1-æ¡ˆä¾‹ä¸€ï¼št-æ¨¡å¼çš„ä½¿ç”¨"><a href="#3-2-1-æ¡ˆä¾‹ä¸€ï¼št-æ¨¡å¼çš„ä½¿ç”¨" class="headerlink" title="3.2.1 æ¡ˆä¾‹ä¸€ï¼št æ¨¡å¼çš„ä½¿ç”¨"></a>3.2.1 æ¡ˆä¾‹ä¸€ï¼št æ¨¡å¼çš„ä½¿ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># t æ¨¡å¼ï¼šå¦‚æœæˆ‘ä»¬æŒ‡å®šçš„æ–‡ä»¶æ‰“å¼€æ¨¡å¼ä¸ºr/w/aï¼Œå…¶å®é»˜è®¤å°±æ˜¯rt/wt/at</span></span><br><span class="line"> <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,mode=<span class="string">&#x27;rt&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">     res=f.read() </span><br><span class="line">     <span class="built_in">print</span>(<span class="built_in">type</span>(res)) <span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š&lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,mode=<span class="string">&#x27;wt&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">     s=<span class="string">&#x27;abc&#x27;</span></span><br><span class="line">     f.write(s) <span class="comment"># å†™å…¥çš„ä¹Ÿå¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">#å¼ºè°ƒï¼št æ¨¡å¼åªèƒ½ç”¨äºæ“ä½œæ–‡æœ¬æ–‡ä»¶,æ— è®ºè¯»å†™ï¼Œéƒ½åº”è¯¥ä»¥å­—ç¬¦ä¸²ä¸ºå•ä½ï¼Œè€Œå­˜å–ç¡¬ç›˜æœ¬è´¨éƒ½æ˜¯äºŒè¿›åˆ¶çš„å½¢å¼ï¼Œå½“æŒ‡å®š t æ¨¡å¼æ—¶ï¼Œå†…éƒ¨å¸®æˆ‘ä»¬åšäº†ç¼–ç ä¸è§£ç </span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-2-æ¡ˆä¾‹äºŒï¼š-b-æ¨¡å¼çš„ä½¿ç”¨"><a href="#3-2-2-æ¡ˆä¾‹äºŒï¼š-b-æ¨¡å¼çš„ä½¿ç”¨" class="headerlink" title="3.2.2 æ¡ˆä¾‹äºŒï¼š b æ¨¡å¼çš„ä½¿ç”¨"></a>3.2.2 æ¡ˆä¾‹äºŒï¼š b æ¨¡å¼çš„ä½¿ç”¨</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># b: è¯»å†™éƒ½æ˜¯ä»¥äºŒè¿›åˆ¶ä½å•ä½</span></span><br><span class="line"> <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;1.mp4&#x27;</span>,mode=<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">     data=f.read()</span><br><span class="line">     <span class="built_in">print</span>(<span class="built_in">type</span>(data)) <span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š&lt;class &#x27;bytes&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">     msg=<span class="string">&quot;ä½ å¥½&quot;</span></span><br><span class="line">     res=msg.encode(<span class="string">&#x27;utf-8&#x27;</span>) <span class="comment"># resä¸ºbytesç±»å‹</span></span><br><span class="line">     f.write(res) <span class="comment"># åœ¨bæ¨¡å¼ä¸‹å†™å…¥æ–‡ä»¶çš„åªèƒ½æ˜¯bytesç±»å‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¼ºè°ƒï¼šbæ¨¡å¼å¯¹æ¯”tæ¨¡å¼</span></span><br><span class="line"><span class="number">1</span>ã€åœ¨æ“ä½œçº¯æ–‡æœ¬æ–‡ä»¶æ–¹é¢tæ¨¡å¼å¸®æˆ‘ä»¬çœå»äº†ç¼–ç ä¸è§£ç çš„ç¯èŠ‚ï¼Œbæ¨¡å¼åˆ™éœ€è¦æ‰‹åŠ¨ç¼–ç ä¸è§£ç ï¼Œæ‰€ä»¥æ­¤æ—¶tæ¨¡å¼æ›´ä¸ºæ–¹ä¾¿</span><br><span class="line"><span class="number">2</span>ã€é’ˆå¯¹éæ–‡æœ¬æ–‡ä»¶ï¼ˆå¦‚å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰ï¼‰åªèƒ½ä½¿ç”¨bæ¨¡å¼</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°ç»ƒä¹ ï¼š ç¼–å†™æ‹·è´å·¥å…·</span></span><br><span class="line">src_file=<span class="built_in">input</span>(<span class="string">&#x27;æºæ–‡ä»¶è·¯å¾„: &#x27;</span>).strip()</span><br><span class="line">dst_file=<span class="built_in">input</span>(<span class="string">&#x27;ç›®æ ‡æ–‡ä»¶è·¯å¾„: &#x27;</span>).strip()</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">r&#x27;%s&#x27;</span> %src_file,mode=<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> read_f,<span class="built_in">open</span>(<span class="string">r&#x27;%s&#x27;</span> %dst_file,mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> write_f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> read_f:</span><br><span class="line">        <span class="comment"># print(line)</span></span><br><span class="line">        write_f.write(line)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-4af94c11c6a45976fca8c53a0794c3a2_720w.jpg" alt="img"></p>
<h2 id="å››-æ“ä½œæ–‡ä»¶çš„æ–¹æ³•"><a href="#å››-æ“ä½œæ–‡ä»¶çš„æ–¹æ³•" class="headerlink" title="å›› æ“ä½œæ–‡ä»¶çš„æ–¹æ³•"></a>å›› æ“ä½œæ–‡ä»¶çš„æ–¹æ³•</h2><h2 id="4-1-é‡ç‚¹"><a href="#4-1-é‡ç‚¹" class="headerlink" title="4.1 é‡ç‚¹"></a>4.1 é‡ç‚¹</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¯»æ“ä½œ</span></span><br><span class="line">f.read()  <span class="comment"># è¯»å–æ‰€æœ‰å†…å®¹,æ‰§è¡Œå®Œè¯¥æ“ä½œåï¼Œæ–‡ä»¶æŒ‡é’ˆä¼šç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾</span></span><br><span class="line">f.readline()  <span class="comment"># è¯»å–ä¸€è¡Œå†…å®¹,å…‰æ ‡ç§»åŠ¨åˆ°ç¬¬äºŒè¡Œé¦–éƒ¨</span></span><br><span class="line">f.readlines()  <span class="comment"># è¯»å–æ¯ä¸€è¡Œå†…å®¹,å­˜æ”¾äºåˆ—è¡¨ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼ºè°ƒï¼š</span></span><br><span class="line"><span class="comment"># f.read()ä¸f.readlines()éƒ½æ˜¯å°†å†…å®¹ä¸€æ¬¡æ€§è¯»å…¥å†…å®¹ï¼Œå¦‚æœå†…å®¹è¿‡å¤§ä¼šå¯¼è‡´å†…å­˜æº¢å‡ºï¼Œè‹¥è¿˜æƒ³å°†å†…å®¹å…¨è¯»å…¥å†…å­˜ï¼Œåˆ™å¿…é¡»åˆ†å¤šæ¬¡è¯»å…¥ï¼Œæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š</span></span><br><span class="line"><span class="comment"># æ–¹å¼ä¸€</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,mode=<span class="string">&#x27;rt&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">        <span class="built_in">print</span>(line) <span class="comment"># åŒä¸€æ—¶åˆ»åªè¯»å…¥ä¸€è¡Œå†…å®¹åˆ°å†…å­˜ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹å¼äºŒ</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;1.mp4&#x27;</span>,mode=<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        data=f.read(<span class="number">1024</span>) <span class="comment"># åŒä¸€æ—¶åˆ»åªè¯»å…¥1024ä¸ªBytesåˆ°å†…å­˜ä¸­</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(data) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†™æ“ä½œ</span></span><br><span class="line">f.write(<span class="string">&#x27;1111\n222\n&#x27;</span>)  <span class="comment"># é’ˆå¯¹æ–‡æœ¬æ¨¡å¼çš„å†™,éœ€è¦è‡ªå·±å†™æ¢è¡Œç¬¦</span></span><br><span class="line">f.write(<span class="string">&#x27;1111\n222\n&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))  <span class="comment"># é’ˆå¯¹bæ¨¡å¼çš„å†™,éœ€è¦è‡ªå·±å†™æ¢è¡Œç¬¦</span></span><br><span class="line">f.writelines([<span class="string">&#x27;333\n&#x27;</span>,<span class="string">&#x27;444\n&#x27;</span>])  <span class="comment"># æ–‡ä»¶æ¨¡å¼</span></span><br><span class="line">f.writelines([<span class="built_in">bytes</span>(<span class="string">&#x27;333\n&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>),<span class="string">&#x27;444\n&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>)]) <span class="comment">#bæ¨¡å¼</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-30d5763461db05414c3ac2cc944a8f6e_720w.jpg" alt="img"></p>
<h2 id="4-2-äº†è§£"><a href="#4-2-äº†è§£" class="headerlink" title="4.2 äº†è§£"></a>4.2 äº†è§£</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f.readable()  <span class="comment"># æ–‡ä»¶æ˜¯å¦å¯è¯»</span></span><br><span class="line">f.writable()  <span class="comment"># æ–‡ä»¶æ˜¯å¦å¯è¯»</span></span><br><span class="line">f.closed  <span class="comment"># æ–‡ä»¶æ˜¯å¦å…³é—­</span></span><br><span class="line">f.encoding  <span class="comment"># å¦‚æœæ–‡ä»¶æ‰“å¼€æ¨¡å¼ä¸ºb,åˆ™æ²¡æœ‰è¯¥å±æ€§</span></span><br><span class="line">f.flush()  <span class="comment"># ç«‹åˆ»å°†æ–‡ä»¶å†…å®¹ä»å†…å­˜åˆ·åˆ°ç¡¬ç›˜</span></span><br><span class="line">f.name</span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-3474d487b3fb518ce9b511c73153ce78_720w.jpg" alt="img"></p>
<h2 id="äº”-ä¸»åŠ¨æ§åˆ¶æ–‡ä»¶å†…æŒ‡é’ˆç§»åŠ¨"><a href="#äº”-ä¸»åŠ¨æ§åˆ¶æ–‡ä»¶å†…æŒ‡é’ˆç§»åŠ¨" class="headerlink" title="äº” ä¸»åŠ¨æ§åˆ¶æ–‡ä»¶å†…æŒ‡é’ˆç§»åŠ¨"></a>äº” ä¸»åŠ¨æ§åˆ¶æ–‡ä»¶å†…æŒ‡é’ˆç§»åŠ¨</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¤§å‰æ:æ–‡ä»¶å†…æŒ‡é’ˆçš„ç§»åŠ¨éƒ½æ˜¯Bytesä¸ºå•ä½çš„,å”¯ä¸€ä¾‹å¤–çš„æ˜¯tæ¨¡å¼ä¸‹çš„read(n),nä»¥å­—ç¬¦ä¸ºå•ä½</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,mode=<span class="string">&#x27;rt&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">     data=f.read(<span class="number">3</span>) <span class="comment"># è¯»å–3ä¸ªå­—ç¬¦</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,mode=<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">     data=f.read(<span class="number">3</span>) <span class="comment"># è¯»å–3ä¸ªBytes</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¹‹å‰æ–‡ä»¶å†…æŒ‡é’ˆçš„ç§»åŠ¨éƒ½æ˜¯ç”±è¯»/å†™æ“ä½œè€Œè¢«åŠ¨è§¦å‘çš„ï¼Œè‹¥æƒ³è¯»å–æ–‡ä»¶æŸä¸€ç‰¹å®šä½ç½®çš„æ•°æ®ï¼Œåˆ™åˆ™éœ€è¦ç”¨f.seekæ–¹æ³•ä¸»åŠ¨æ§åˆ¶æ–‡ä»¶å†…æŒ‡é’ˆçš„ç§»åŠ¨ï¼Œè¯¦ç»†ç”¨æ³•å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment"># f.seek(æŒ‡é’ˆç§»åŠ¨çš„å­—èŠ‚æ•°,æ¨¡å¼æ§åˆ¶): </span></span><br><span class="line"><span class="comment"># æ¨¡å¼æ§åˆ¶:</span></span><br><span class="line"><span class="comment"># 0: é»˜è®¤çš„æ¨¡å¼,è¯¥æ¨¡å¼ä»£è¡¨æŒ‡é’ˆç§»åŠ¨çš„å­—èŠ‚æ•°æ˜¯ä»¥æ–‡ä»¶å¼€å¤´ä¸ºå‚ç…§çš„</span></span><br><span class="line"><span class="comment"># 1: è¯¥æ¨¡å¼ä»£è¡¨æŒ‡é’ˆç§»åŠ¨çš„å­—èŠ‚æ•°æ˜¯ä»¥å½“å‰æ‰€åœ¨çš„ä½ç½®ä¸ºå‚ç…§çš„</span></span><br><span class="line"><span class="comment"># 2: è¯¥æ¨¡å¼ä»£è¡¨æŒ‡é’ˆç§»åŠ¨çš„å­—èŠ‚æ•°æ˜¯ä»¥æ–‡ä»¶æœ«å°¾çš„ä½ç½®ä¸ºå‚ç…§çš„</span></span><br><span class="line"><span class="comment"># å¼ºè°ƒ:å…¶ä¸­0æ¨¡å¼å¯ä»¥åœ¨tæˆ–è€…bæ¨¡å¼ä½¿ç”¨,è€Œ1è·Ÿ2æ¨¡å¼åªèƒ½åœ¨bæ¨¡å¼ä¸‹ç”¨</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-2b5a0f6ecedec41601c52959b34d7f5a_720w.jpg" alt="img"></p>
<h2 id="5-1-æ¡ˆä¾‹ä¸€ï¼š-0æ¨¡å¼è¯¦è§£"><a href="#5-1-æ¡ˆä¾‹ä¸€ï¼š-0æ¨¡å¼è¯¦è§£" class="headerlink" title="5.1 æ¡ˆä¾‹ä¸€ï¼š 0æ¨¡å¼è¯¦è§£"></a>5.1 æ¡ˆä¾‹ä¸€ï¼š 0æ¨¡å¼è¯¦è§£</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># a.txtç”¨utf-8ç¼–ç ï¼Œå†…å®¹å¦‚ä¸‹ï¼ˆabcå„å 1ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡â€œä½ å¥½â€å„å 3ä¸ªå­—èŠ‚ï¼‰</span></span><br><span class="line">abcä½ å¥½</span><br><span class="line"></span><br><span class="line"><span class="comment"># 0æ¨¡å¼çš„ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,mode=<span class="string">&#x27;rt&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.seek(<span class="number">3</span>,<span class="number">0</span>)     <span class="comment"># å‚ç…§æ–‡ä»¶å¼€å¤´ç§»åŠ¨äº†3ä¸ªå­—èŠ‚</span></span><br><span class="line">    <span class="built_in">print</span>(f.tell()) <span class="comment"># æŸ¥çœ‹å½“å‰æ–‡ä»¶æŒ‡é’ˆè·ç¦»æ–‡ä»¶å¼€å¤´çš„ä½ç½®ï¼Œè¾“å‡ºç»“æœä¸º3</span></span><br><span class="line">    <span class="built_in">print</span>(f.read()) <span class="comment"># ä»ç¬¬3ä¸ªå­—èŠ‚çš„ä½ç½®è¯»åˆ°æ–‡ä»¶æœ«å°¾ï¼Œè¾“å‡ºç»“æœä¸ºï¼šä½ å¥½</span></span><br><span class="line">    <span class="comment"># æ³¨æ„ï¼šç”±äºåœ¨tæ¨¡å¼ä¸‹ï¼Œä¼šå°†è¯»å–çš„å†…å®¹è‡ªåŠ¨è§£ç ï¼Œæ‰€ä»¥å¿…é¡»ä¿è¯è¯»å–çš„å†…å®¹æ˜¯ä¸€ä¸ªå®Œæ•´ä¸­æ–‡æ•°æ®ï¼Œå¦åˆ™è§£ç å¤±è´¥</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,mode=<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.seek(<span class="number">6</span>,<span class="number">0</span>)</span><br><span class="line">    <span class="built_in">print</span>(f.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)) <span class="comment">#è¾“å‡ºç»“æœä¸º: å¥½</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-9a9115785268e099152bbed9d0bc7e97_720w.jpg" alt="img"></p>
<h2 id="5-2-æ¡ˆä¾‹äºŒï¼š-1æ¨¡å¼è¯¦è§£"><a href="#5-2-æ¡ˆä¾‹äºŒï¼š-1æ¨¡å¼è¯¦è§£" class="headerlink" title="5.2 æ¡ˆä¾‹äºŒï¼š 1æ¨¡å¼è¯¦è§£"></a>5.2 æ¡ˆä¾‹äºŒï¼š 1æ¨¡å¼è¯¦è§£</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1æ¨¡å¼çš„ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,mode=<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.seek(<span class="number">3</span>,<span class="number">1</span>) <span class="comment"># ä»å½“å‰ä½ç½®å¾€åç§»åŠ¨3ä¸ªå­—èŠ‚ï¼Œè€Œæ­¤æ—¶çš„å½“å‰ä½ç½®å°±æ˜¯æ–‡ä»¶å¼€å¤´</span></span><br><span class="line">    <span class="built_in">print</span>(f.tell()) <span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š3</span></span><br><span class="line">    f.seek(<span class="number">4</span>,<span class="number">1</span>)     <span class="comment"># ä»å½“å‰ä½ç½®å¾€åç§»åŠ¨4ä¸ªå­—èŠ‚ï¼Œè€Œæ­¤æ—¶çš„å½“å‰ä½ç½®ä¸º3</span></span><br><span class="line">    <span class="built_in">print</span>(f.tell()) <span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š7</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-2122d50b6c97ed1c5fe27a13126266d0_720w.jpg" alt="img"></p>
<h2 id="5-3-æ¡ˆä¾‹ä¸‰ï¼š-2æ¨¡å¼è¯¦è§£"><a href="#5-3-æ¡ˆä¾‹ä¸‰ï¼š-2æ¨¡å¼è¯¦è§£" class="headerlink" title="5.3 æ¡ˆä¾‹ä¸‰ï¼š 2æ¨¡å¼è¯¦è§£"></a>5.3 æ¡ˆä¾‹ä¸‰ï¼š 2æ¨¡å¼è¯¦è§£</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># a.txtç”¨utf-8ç¼–ç ï¼Œå†…å®¹å¦‚ä¸‹ï¼ˆabcå„å 1ä¸ªå­—èŠ‚ï¼Œä¸­æ–‡â€œä½ å¥½â€å„å 3ä¸ªå­—èŠ‚ï¼‰</span></span><br><span class="line">abcä½ å¥½</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2æ¨¡å¼çš„ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,mode=<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.seek(<span class="number">0</span>,<span class="number">2</span>)     <span class="comment"># å‚ç…§æ–‡ä»¶æœ«å°¾ç§»åŠ¨0ä¸ªå­—èŠ‚ï¼Œ å³ç›´æ¥è·³åˆ°æ–‡ä»¶æœ«å°¾</span></span><br><span class="line">    <span class="built_in">print</span>(f.tell()) <span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š9</span></span><br><span class="line">    f.seek(-<span class="number">3</span>,<span class="number">2</span>)     <span class="comment"># å‚ç…§æ–‡ä»¶æœ«å°¾å¾€å‰ç§»åŠ¨äº†3ä¸ªå­—èŠ‚</span></span><br><span class="line">    <span class="built_in">print</span>(f.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)) <span class="comment"># è¾“å‡ºç»“æœä¸ºï¼šå¥½</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°ç»ƒä¹ ï¼šå®ç°åŠ¨æ€æŸ¥çœ‹æœ€æ–°ä¸€æ¡æ—¥å¿—çš„æ•ˆæœ</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;access.log&#x27;</span>,mode=<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.seek(<span class="number">0</span>,<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        line=f.readline()</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(line) == <span class="number">0</span>:</span><br><span class="line">            <span class="comment"># æ²¡æœ‰å†…å®¹</span></span><br><span class="line">            time.sleep(<span class="number">0.5</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(line.decode(<span class="string">&#x27;utf-8&#x27;</span>),end=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-009f54e4493921a84480b80a4fa5aa90_720w.jpg" alt="img"></p>
<h2 id="å…­-æ–‡ä»¶çš„ä¿®æ”¹"><a href="#å…­-æ–‡ä»¶çš„ä¿®æ”¹" class="headerlink" title="å…­ æ–‡ä»¶çš„ä¿®æ”¹"></a>å…­ æ–‡ä»¶çš„ä¿®æ”¹</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ–‡ä»¶a.txtå†…å®¹å¦‚ä¸‹</span></span><br><span class="line">å¼ ä¸€è›‹     å±±ä¸œ    <span class="number">179</span>    <span class="number">49</span>    <span class="number">12344234523</span></span><br><span class="line">æäºŒè›‹     æ²³åŒ—    <span class="number">163</span>    <span class="number">57</span>    <span class="number">13913453521</span></span><br><span class="line">ç‹å…¨è›‹     å±±è¥¿    <span class="number">153</span>    <span class="number">62</span>    <span class="number">18651433422</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œæ“ä½œ</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;a.txt&#x27;</span>,mode=<span class="string">&#x27;r+t&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.seek(<span class="number">9</span>)</span><br><span class="line">    f.write(<span class="string">&#x27;&lt;å¦‡å¥³ä¸»ä»»&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–‡ä»¶ä¿®æ”¹åçš„å†…å®¹å¦‚ä¸‹</span></span><br><span class="line">å¼ ä¸€è›‹&lt;å¦‡å¥³ä¸»ä»»&gt; <span class="number">179</span>    <span class="number">49</span>    <span class="number">12344234523</span></span><br><span class="line">æäºŒè›‹     æ²³åŒ—    <span class="number">163</span>    <span class="number">57</span>    <span class="number">13913453521</span></span><br><span class="line">ç‹å…¨è›‹     å±±è¥¿    <span class="number">153</span>    <span class="number">62</span>    <span class="number">18651433422</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼ºè°ƒï¼š</span></span><br><span class="line"><span class="comment"># 1ã€ç¡¬ç›˜ç©ºé—´æ˜¯æ— æ³•ä¿®æ”¹çš„,ç¡¬ç›˜ä¸­æ•°æ®çš„æ›´æ–°éƒ½æ˜¯ç”¨æ–°å†…å®¹è¦†ç›–æ—§å†…å®¹</span></span><br><span class="line"><span class="comment"># 2ã€å†…å­˜ä¸­çš„æ•°æ®æ˜¯å¯ä»¥ä¿®æ”¹çš„</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-138c4c7000b5db3a37d691ea0aa09fb0_720w.jpg" alt="img"></p>
<p>æ–‡ä»¶å¯¹åº”çš„æ˜¯ç¡¬ç›˜ç©ºé—´,ç¡¬ç›˜ä¸èƒ½ä¿®æ”¹å¯¹åº”ç€æ–‡ä»¶æœ¬è´¨ä¹Ÿä¸èƒ½ä¿®æ”¹, é‚£æˆ‘ä»¬çœ‹åˆ°æ–‡ä»¶çš„å†…å®¹å¯ä»¥ä¿®æ”¹,æ˜¯å¦‚ä½•å®ç°çš„å‘¢? å¤§è‡´çš„æ€è·¯æ˜¯å°†ç¡¬ç›˜ä¸­æ–‡ä»¶å†…å®¹è¯»å…¥å†…å­˜,ç„¶ååœ¨å†…å­˜ä¸­ä¿®æ”¹å®Œæ¯•åå†è¦†ç›–å›ç¡¬ç›˜ å…·ä½“çš„å®ç°æ–¹å¼åˆ†ä¸ºä¸¤ç§:</p>
<h2 id="6-1-æ–‡ä»¶ä¿®æ”¹æ–¹å¼ä¸€"><a href="#6-1-æ–‡ä»¶ä¿®æ”¹æ–¹å¼ä¸€" class="headerlink" title="6.1 æ–‡ä»¶ä¿®æ”¹æ–¹å¼ä¸€"></a>6.1 æ–‡ä»¶ä¿®æ”¹æ–¹å¼ä¸€</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®ç°æ€è·¯ï¼šå°†æ–‡ä»¶å†…å®¹å‘ä¸€æ¬¡æ€§å…¨éƒ¨è¯»å…¥å†…å­˜,ç„¶ååœ¨å†…å­˜ä¸­ä¿®æ”¹å®Œæ¯•åå†è¦†ç›–å†™å›åŸæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># ä¼˜ç‚¹: åœ¨æ–‡ä»¶ä¿®æ”¹è¿‡ç¨‹ä¸­åŒä¸€ä»½æ•°æ®åªæœ‰ä¸€ä»½</span></span><br><span class="line"><span class="comment"># ç¼ºç‚¹: ä¼šè¿‡å¤šåœ°å ç”¨å†…å­˜</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;db.txt&#x27;</span>,mode=<span class="string">&#x27;rt&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data=f.read()</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;db.txt&#x27;</span>,mode=<span class="string">&#x27;wt&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(data.replace(<span class="string">&#x27;kevin&#x27;</span>,<span class="string">&#x27;SB&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h2 id="6-1-æ–‡ä»¶ä¿®æ”¹æ–¹å¼äºŒ"><a href="#6-1-æ–‡ä»¶ä¿®æ”¹æ–¹å¼äºŒ" class="headerlink" title="6.1 æ–‡ä»¶ä¿®æ”¹æ–¹å¼äºŒ"></a>6.1 æ–‡ä»¶ä¿®æ”¹æ–¹å¼äºŒ</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®ç°æ€è·¯ï¼šä»¥è¯»çš„æ–¹å¼æ‰“å¼€åŸæ–‡ä»¶,ä»¥å†™çš„æ–¹å¼æ‰“å¼€ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶,ä¸€è¡Œè¡Œè¯»å–åŸæ–‡ä»¶å†…å®¹,ä¿®æ”¹å®Œåå†™å…¥ä¸´æ—¶æ–‡ä»¶...,åˆ æ‰åŸæ–‡ä»¶,å°†ä¸´æ—¶æ–‡ä»¶é‡å‘½ååŸæ–‡ä»¶å</span></span><br><span class="line"><span class="comment"># ä¼˜ç‚¹: ä¸ä¼šå ç”¨è¿‡å¤šçš„å†…å­˜</span></span><br><span class="line"><span class="comment"># ç¼ºç‚¹: åœ¨æ–‡ä»¶ä¿®æ”¹è¿‡ç¨‹ä¸­åŒä¸€ä»½æ•°æ®å­˜äº†ä¸¤ä»½</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;db.txt&#x27;</span>,mode=<span class="string">&#x27;rt&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> read_f,\</span><br><span class="line">        <span class="built_in">open</span>(<span class="string">&#x27;.db.txt.swap&#x27;</span>,mode=<span class="string">&#x27;wt&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> wrife_f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> read_f:</span><br><span class="line">        wrife_f.write(line.replace(<span class="string">&#x27;SB&#x27;</span>,<span class="string">&#x27;kevin&#x27;</span>))</span><br><span class="line"></span><br><span class="line">os.remove(<span class="string">&#x27;db.txt&#x27;</span>)</span><br><span class="line">os.rename(<span class="string">&#x27;.db.txt.swap&#x27;</span>,<span class="string">&#x27;db.txt&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-d45f4a423f5dd6e9880e4dbcdb1bdaf7_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p>æ–‡ä»¶å¤„ç†</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=31">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=31<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=32">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=32<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=33">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=33<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=34">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=34<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=35">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=35<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=36">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=36<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=37">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=37<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>11-å‡½æ•°åŸºæœ¬ä½¿ç”¨</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/11_%E5%87%BD%E6%95%B0%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h2 id="ä¸€-å¼•å…¥"><a href="#ä¸€-å¼•å…¥" class="headerlink" title="ä¸€ å¼•å…¥"></a>ä¸€ å¼•å…¥</h2><p> åŸºäºå‰ä¸€éƒ¨åˆ†çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»èƒ½å¼€å‘ä¸€äº›åŠŸèƒ½ç®€å•çš„å°ç¨‹åºäº†ï¼Œä½†éšç€ç¨‹åºåŠŸèƒ½çš„å¢å¤šï¼Œä»£ç é‡éšä¹‹å¢å¤§ï¼Œæ­¤æ—¶ä»ä¸åŠ åŒºåˆ†åœ°æŠŠæ‰€æœ‰åŠŸèƒ½çš„å®ç°ä»£ç æ”¾åˆ°ä¸€èµ·ï¼Œå°†ä¼šä½¿å¾—ç¨‹åºçš„ç»„ç»‡ç»“æ„ä¸æ¸…æ™°ï¼Œå¯è¯»æ€§å˜å·®ï¼Œä¸”ç¨‹åºä¸­éœ€è¦é¢‘ç¹ä½¿ç”¨åŒä¸€åŠŸèƒ½æ—¶ï¼Œåªèƒ½é‡å¤ç¼–å†™è¯¥åŠŸèƒ½çš„å®ç°ä»£ç ï¼Œæ—¥ç§¯æœˆç´¯ï¼Œç¨‹åºå°†å˜å¾—å†—é•¿ï¼Œå¹¶ä¸”å½“æŸä¸€åŠŸèƒ½éœ€è¦ä¿®æ”¹æ—¶ï¼Œåˆä¸å¾—ä¸æ‰¾å‡ºæ‰€æœ‰å®šä¹‰åŠä½¿ç”¨è¿™æ®µåŠŸèƒ½çš„åœ°æ–¹ä¿®æ”¹ä¹‹ï¼Œç®¡ç†ç»´æŠ¤çš„éš¾åº¦æå¤§ï¼Œå¥½å§ï¼Œè£…äº†åŠå¤©é€¼ï¼Œåˆ°åº•è¯¥å¦‚ä½•è§£å†³æå‡ºçš„è¿™äº›é—®é¢˜å‘¢ï¼Ÿ</p>
<p><img src="https://pic1.zhimg.com/80/v2-9c9953bf70a721520e78add4ceeeb340_720w.jpg" alt="img"></p>
<p>æˆ‘ä»¬å®Œå…¨å¯ä»¥ä»ç°å®ç”Ÿæ´»ä¸­æ‰¾åˆ°ç®€åŒ–ç¨‹åºè®¾è®¡çš„æ–¹æ¡ˆï¼šæ¯”å¦‚ä¸€ä¸ªä¿®ç†å·¥ä¼šäº‹å…ˆå‡†å¤‡å¥½èºä¸åˆ€ã€é”¤å­ç­‰å·¥å…·ï¼Œè¿™æ ·åœ¨è¿›è¡Œä¿®ç†çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç”¨åˆ°æ‹§èºä¸çš„åŠŸèƒ½æ—¶å°±ç›´æ¥æ‹¿æ¥èºä¸åˆ€ä½¿ç”¨ï¼Œéœ€è¦ç”¨åˆ°é”¤å‡»ç‰©ä½“çš„åŠŸèƒ½æ—¶å°±ç›´æ¥æ‹¿æ¥é”¤å­ä½¿ç”¨ï¼Œè€Œæ— éœ€ä¸´æ—¶åˆ¶é€ ã€‚è¿™ä¸ªä¾‹å­çš„æ ¸å¿ƒåœ¨äºâ€™äº‹å…ˆå‡†å¤‡å¥½å·¥å…·â€™ï¼Œé‡åˆ°åº”ç”¨åœºæ™¯æ—¶â€™æ‹¿æ¥å°±ç”¨â€™ï¼Œã€‚</p>
<p>åœ¨ç¨‹åºä¸­ï¼Œå…·å¤‡æŸä¸€åŠŸèƒ½çš„â€˜å·¥å…·â€™æŒ‡çš„å°±æ˜¯å‡½æ•°ï¼Œâ€˜äº‹å…ˆå‡†å¤‡å·¥å…·â€™çš„è¿‡ç¨‹å³å‡½æ•°çš„å®šä¹‰ï¼Œâ€˜æ‹¿æ¥å°±ç”¨â€™å³å‡½æ•°çš„è°ƒç”¨ã€‚</p>
<h2 id="äºŒ-å®šä¹‰å‡½æ•°"><a href="#äºŒ-å®šä¹‰å‡½æ•°" class="headerlink" title="äºŒ å®šä¹‰å‡½æ•°"></a>äºŒ å®šä¹‰å‡½æ•°</h2><p>å‡½æ•°çš„ä½¿ç”¨å¿…é¡»éµå¾ªâ€™å…ˆå®šä¹‰ï¼Œåè°ƒç”¨â€™çš„åŸåˆ™ã€‚å‡½æ•°çš„å®šä¹‰å°±ç›¸å½“äºäº‹å…ˆå°†å‡½æ•°ä½“ä»£ç ä¿å­˜èµ·æ¥ï¼Œç„¶åå°†å†…å­˜åœ°å€èµ‹å€¼ç»™å‡½æ•°åï¼Œå‡½æ•°åå°±æ˜¯å¯¹è¿™æ®µä»£ç çš„å¼•ç”¨ï¼Œè¿™å’Œå˜é‡çš„å®šä¹‰æ˜¯ç›¸ä¼¼çš„ã€‚æ²¡æœ‰äº‹å…ˆå®šä¹‰å‡½æ•°è€Œç›´æ¥è°ƒç”¨ï¼Œå°±ç›¸å½“äºåœ¨å¼•ç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„â€™å˜é‡åâ€™ã€‚</p>
<p>å®šä¹‰å‡½æ•°çš„è¯­æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> å‡½æ•°å(<span class="params">å‚æ•°<span class="number">1</span>,å‚æ•°<span class="number">2</span>,...</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;æ–‡æ¡£æè¿°&quot;&quot;&quot;</span></span><br><span class="line">    å‡½æ•°ä½“</span><br><span class="line">    <span class="keyword">return</span> å€¼</span><br></pre></td></tr></table></figure>

<ol>
<li>def: å®šä¹‰å‡½æ•°çš„å…³é”®å­—ï¼›</li>
<li>å‡½æ•°åï¼šå‡½æ•°åæŒ‡å‘å‡½æ•°å†…å­˜åœ°å€ï¼Œæ˜¯å¯¹å‡½æ•°ä½“ä»£ç çš„å¼•ç”¨ã€‚å‡½æ•°çš„å‘½ååº”è¯¥åæ˜ å‡ºå‡½æ•°çš„åŠŸèƒ½ï¼›</li>
<li>æ‹¬å·ï¼šæ‹¬å·å†…å®šä¹‰å‚æ•°ï¼Œå‚æ•°æ˜¯å¯æœ‰å¯æ— çš„ï¼Œä¸”æ— éœ€æŒ‡å®šå‚æ•°çš„ç±»å‹ï¼›</li>
<li>å†’å·ï¼šæ‹¬å·åè¦åŠ å†’å·ï¼Œç„¶ååœ¨ä¸‹ä¸€è¡Œå¼€å§‹ç¼©è¿›ç¼–å†™å‡½æ•°ä½“çš„ä»£ç ï¼›</li>
<li>â€œâ€â€æ–‡æ¡£æè¿°â€â€â€: æè¿°å‡½æ•°åŠŸèƒ½ï¼Œå‚æ•°ä»‹ç»ç­‰ä¿¡æ¯çš„æ–‡æ¡£ï¼Œéå¿…è¦ï¼Œä½†æ˜¯å»ºè®®åŠ ä¸Šï¼Œä»è€Œå¢å¼ºå‡½æ•°çš„å¯è¯»æ€§ï¼›</li>
<li>å‡½æ•°ä½“ï¼šç”±è¯­å¥å’Œè¡¨è¾¾å¼ç»„æˆï¼›</li>
<li>return å€¼ï¼šå®šä¹‰å‡½æ•°çš„è¿”å›å€¼ï¼Œreturnæ˜¯å¯æœ‰å¯æ— çš„ã€‚</li>
</ol>
<p><img src="https://pic1.zhimg.com/80/v2-b6820acb8b8135a298d22c46d88dc078_720w.jpg" alt="img"></p>
<p>å‚æ•°æ˜¯å‡½æ•°çš„è°ƒç”¨è€…å‘å‡½æ•°ä½“ä¼ å€¼çš„åª’ä»‹ï¼Œè‹¥å‡½æ•°ä½“ä»£ç é€»è¾‘ä¾èµ–å¤–éƒ¨ä¼ æ¥çš„å‚æ•°æ—¶åˆ™éœ€è¦å®šä¹‰ä¸ºå‚å‡½æ•°ï¼Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_min</span>(<span class="params">x,y</span>):</span></span><br><span class="line">    res=x <span class="keyword">if</span> x &lt; y <span class="keyword">else</span> y</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<p>å¦åˆ™å®šä¹‰ä¸ºæ— å‚å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">interactive</span>():</span></span><br><span class="line">    user=<span class="built_in">input</span>(<span class="string">&#x27;user&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    pwd=<span class="built_in">input</span>(<span class="string">&#x27;password&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    <span class="keyword">return</span> (user,pwd)</span><br></pre></td></tr></table></figure>

<p> å‡½æ•°ä½“ä¸ºpassä»£è¡¨ä»€ä¹ˆéƒ½ä¸åšï¼Œç§°ä¹‹ä¸ºç©ºå‡½æ•°ã€‚å®šä¹‰ç©ºå‡½æ•°é€šå¸¸æ˜¯æœ‰ç”¨çš„ï¼Œå› ä¸ºåœ¨ç¨‹åºè®¾è®¡çš„å¼€å§‹ï¼Œå¾€å¾€æ˜¯å…ˆæƒ³å¥½ç¨‹åºéƒ½éœ€è¦å®Œæˆä»€ä¹ˆåŠŸèƒ½ï¼Œç„¶åæŠŠæ‰€æœ‰åŠŸèƒ½éƒ½åˆ—ä¸¾å‡ºæ¥ç”¨passå……å½“å‡½æ•°ä½“â€œå ä½ç¬¦â€ï¼Œè¿™å°†ä½¿å¾—ç¨‹åºçš„ä½“ç³»ç»“æ„ç«‹è§ï¼Œæ¸…æ™°ä¸”å¯è¯»æ€§å¼ºã€‚ä¾‹å¦‚è¦ç¼–å†™ä¸€ä¸ªftpç¨‹åºï¼Œæˆ‘ä»¬å¯èƒ½æƒ³åˆ°çš„åŠŸèƒ½æœ‰ç”¨æˆ·è®¤è¯ï¼Œä¸‹è½½ï¼Œä¸Šä¼ ï¼Œæµè§ˆï¼Œåˆ‡æ¢ç›®å½•ç­‰åŠŸèƒ½ï¼Œå¯ä»¥å…ˆåšå‡ºå¦‚ä¸‹å®šä¹‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">auth_user</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;user authentication function&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_file</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;download file function&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">upload_file</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;upload file function&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ls</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;list contents function&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cd</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;change directory&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>ä¹‹åæˆ‘ä»¬ä¾¿å¯ä»¥ç»Ÿç­¹å®‰æ’ç¼–ç¨‹ä»»åŠ¡ï¼Œæœ‰é€‰æ‹©æ€§çš„å»å®ç°ä¸Šè¿°åŠŸèƒ½æ¥æ›¿æ¢æ‰passï¼Œä»è€Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p>
<p><img src="https://pic3.zhimg.com/80/v2-7eec3d29ee04903367255ddf4ba56fa2_720w.jpg" alt="img"></p>
<h2 id="ä¸‰-è°ƒç”¨å‡½æ•°ä¸å‡½æ•°è¿”å›å€¼"><a href="#ä¸‰-è°ƒç”¨å‡½æ•°ä¸å‡½æ•°è¿”å›å€¼" class="headerlink" title="ä¸‰ è°ƒç”¨å‡½æ•°ä¸å‡½æ•°è¿”å›å€¼"></a>ä¸‰ è°ƒç”¨å‡½æ•°ä¸å‡½æ•°è¿”å›å€¼</h2><p> å‡½æ•°çš„ä½¿ç”¨åˆ†ä¸ºå®šä¹‰é˜¶æ®µä¸è°ƒç”¨é˜¶æ®µï¼Œå®šä¹‰å‡½æ•°æ—¶åªæ£€æµ‹è¯­æ³•ï¼Œä¸æ‰§è¡Œå‡½æ•°ä½“ä»£ç ï¼Œå‡½æ•°ååŠ æ‹¬å·å³å‡½æ•°è°ƒç”¨ï¼Œåªæœ‰è°ƒç”¨å‡½æ•°æ—¶æ‰ä¼šæ‰§è¡Œå‡½æ•°ä½“ä»£ç </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å®šä¹‰é˜¶æ®µ</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;in the foo&#x27;</span>)</span><br><span class="line">    bar()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;in the bar&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è°ƒç”¨é˜¶æ®µ</span></span><br><span class="line">foo()</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œç»“æœï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">in</span> the foo</span><br><span class="line"><span class="keyword">in</span> the bar</span><br></pre></td></tr></table></figure>

<p>å®šä¹‰é˜¶æ®µå‡½æ•°fooä¸barå‡æ— è¯­æ³•é”™è¯¯ï¼Œè€Œåœ¨è°ƒç”¨é˜¶æ®µè°ƒç”¨foo()æ—¶ï¼Œå‡½æ•°fooä¸baréƒ½æ—©å·²ç»å­˜åœ¨äºå†…å­˜ä¸­äº†ï¼Œæ‰€ä»¥ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜ã€‚</p>
<p><img src="https://pic4.zhimg.com/80/v2-49571392a08c9cb0980b37d25890cf57_720w.jpg" alt="img"></p>
<p>æŒ‰ç…§åœ¨ç¨‹åºå‡ºç°çš„å½¢å¼å’Œä½ç½®ï¼Œå¯å°†å‡½æ•°çš„è°ƒç”¨å½¢å¼åˆ†ä¸ºä¸‰ç§ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€è¯­å¥å½¢å¼ï¼š</span></span><br><span class="line">foo()</span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€è¡¨è¾¾å¼å½¢å¼ï¼š</span></span><br><span class="line">m=my_min(<span class="number">1</span>,<span class="number">2</span>) <span class="comment">#å°†è°ƒç”¨å‡½æ•°çš„è¿”å›å€¼èµ‹å€¼ç»™x</span></span><br><span class="line">n=<span class="number">10</span>*my_min(<span class="number">1</span>,<span class="number">2</span>) <span class="comment">#å°†è°ƒç”¨å‡½æ•°çš„è¿”å›å€¼ä¹˜ä»¥10çš„ç»“æœèµ‹å€¼ç»™n</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3ã€å‡½æ•°è°ƒç”¨ä½œä¸ºå‚æ•°çš„å½¢å¼ï¼š</span></span><br><span class="line"><span class="comment"># my_minï¼ˆ2ï¼Œ3ï¼‰ä½œä¸ºå‡½æ•°my_minçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå®ç°äº†å–1,2,3ä¸­çš„è¾ƒå°è€…èµ‹å€¼ç»™m</span></span><br><span class="line">m=my_min(<span class="number">1</span>ï¼Œmy_minï¼ˆ<span class="number">2</span>ï¼Œ<span class="number">3</span>ï¼‰)</span><br></pre></td></tr></table></figure>

<p>è‹¥éœ€è¦å°†å‡½æ•°ä½“ä»£ç æ‰§è¡Œçš„ç»“æœè¿”å›ç»™è°ƒç”¨è€…ï¼Œåˆ™éœ€è¦ç”¨åˆ°returnã€‚returnåæ— å€¼æˆ–ç›´æ¥çœç•¥returnï¼Œåˆ™é»˜è®¤è¿”å›Noneï¼Œreturnçš„è¿”å›å€¼æ— ç±»å‹é™åˆ¶ï¼Œä¸”å¯ä»¥å°†å¤šä¸ªè¿”å›å€¼æ”¾åˆ°ä¸€ä¸ªå…ƒç»„å†…ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">x,y,z</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> x,y,z <span class="comment">#ç­‰åŒäºreturn (x,y,z)</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res=test(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(res)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>returnæ˜¯ä¸€ä¸ªå‡½æ•°ç»“æŸçš„æ ‡å¿—,å‡½æ•°å†…å¯ä»¥æœ‰å¤šä¸ªreturnï¼Œä½†åªæ‰§è¡Œä¸€æ¬¡å‡½æ•°å°±ç»“æŸäº†ï¼Œå¹¶æŠŠreturnåå®šä¹‰çš„å€¼ä½œä¸ºæœ¬æ¬¡è°ƒç”¨çš„ç»“æœè¿”å›ã€‚</p>
<p><img src="https://pic3.zhimg.com/80/v2-46449ad493f48f4863cefab55f8da196_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p>å‡½æ•°åŸºç¡€</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=38">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=38<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p>å‡½æ•°è¿”å›å€¼</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=39">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=39<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>13-åç§°ç©ºé—´å’Œä½œç”¨åŸŸ</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/13_%E5%90%8D%E7%A7%B0%E7%A9%BA%E9%97%B4%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F/</url>
    <content><![CDATA[<h2 id="ä¸€-åç§°ç©ºé—´"><a href="#ä¸€-åç§°ç©ºé—´" class="headerlink" title="ä¸€ åç§°ç©ºé—´"></a>ä¸€ åç§°ç©ºé—´</h2><p>åç§°ç©ºé—´å³å­˜æ”¾åå­—ä¸å¯¹è±¡æ˜ å°„&#x2F;ç»‘å®šå…³ç³»çš„åœ°æ–¹ã€‚å¯¹äºx&#x3D;3ï¼ŒPythonä¼šç”³è¯·å†…å­˜ç©ºé—´å­˜æ”¾å¯¹è±¡3ï¼Œç„¶åå°†åå­—xä¸3çš„ç»‘å®šå…³ç³»å­˜æ”¾äºåç§°ç©ºé—´ä¸­ï¼Œdel xè¡¨ç¤ºæ¸…é™¤è¯¥ç»‘å®šå…³ç³»ã€‚</p>
<p> åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´æœ€å¤šä¼šå­˜åœ¨ä¸‰ç§åç§°ç©ºé—´</p>
<p><img src="https://pic2.zhimg.com/80/v2-596e030156bc539213fb080d356ca1d9_720w.jpg" alt="img"></p>
<h2 id="1-1-å†…å»ºåç§°ç©ºé—´"><a href="#1-1-å†…å»ºåç§°ç©ºé—´" class="headerlink" title="1.1 å†…å»ºåç§°ç©ºé—´"></a>1.1 å†…å»ºåç§°ç©ºé—´</h2><p>ä¼´éšpythonè§£é‡Šå™¨çš„å¯åŠ¨&#x2F;å…³é—­è€Œäº§ç”Ÿ&#x2F;å›æ”¶ï¼Œå› è€Œæ˜¯ç¬¬ä¸€ä¸ªè¢«åŠ è½½çš„åç§°ç©ºé—´ï¼Œç”¨æ¥å­˜æ”¾ä¸€äº›å†…ç½®çš„åå­—ï¼Œæ¯”å¦‚å†…å»ºå‡½æ•°å</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">max</span></span><br><span class="line">&lt;built-<span class="keyword">in</span> function <span class="built_in">max</span>&gt; <span class="comment">#built-inå†…å»º</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-6b1e7070c484f0d266dcfdc04ebf265a_720w.jpg" alt="img"></p>
<h2 id="1-2-å…¨å±€åç§°ç©ºé—´"><a href="#1-2-å…¨å±€åç§°ç©ºé—´" class="headerlink" title="1.2 å…¨å±€åç§°ç©ºé—´"></a>1.2 å…¨å±€åç§°ç©ºé—´</h2><p>ä¼´éšpythonæ–‡ä»¶çš„å¼€å§‹æ‰§è¡Œ&#x2F;æ‰§è¡Œå®Œæ¯•è€Œäº§ç”Ÿ&#x2F;å›æ”¶ï¼Œæ˜¯ç¬¬äºŒä¸ªè¢«åŠ è½½çš„åç§°ç©ºé—´ï¼Œæ–‡ä»¶æ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„åå­—éƒ½ä¼šå­˜æ”¾äºè¯¥åç§°ç©ºé—´ä¸­ï¼Œå¦‚ä¸‹åå­—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys <span class="comment">#æ¨¡å—åsys</span></span><br><span class="line"></span><br><span class="line">x=<span class="number">1</span> <span class="comment">#å˜é‡åx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> x == <span class="number">1</span>:</span><br><span class="line">    y=<span class="number">2</span> <span class="comment">#å˜é‡åy</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">x</span>):</span> <span class="comment">#å‡½æ•°åfoo</span></span><br><span class="line">    y=<span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span>():</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">Class Bar: <span class="comment">#ç±»åBar</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-2def7f8d2d87802b200813e691a5acfd_720w.jpg" alt="img"></p>
<h2 id="1-3-å±€éƒ¨åç§°ç©ºé—´"><a href="#1-3-å±€éƒ¨åç§°ç©ºé—´" class="headerlink" title="1.3 å±€éƒ¨åç§°ç©ºé—´"></a>1.3 å±€éƒ¨åç§°ç©ºé—´</h2><p>ä¼´éšå‡½æ•°çš„è°ƒç”¨&#x2F;ç»“æŸè€Œä¸´æ—¶äº§ç”Ÿ&#x2F;å›æ”¶ï¼Œå‡½æ•°çš„å½¢å‚ã€å‡½æ•°å†…å®šä¹‰çš„åå­—éƒ½ä¼šè¢«å­˜æ”¾äºè¯¥åç§°ç©ºé—´ä¸­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">x</span>):</span></span><br><span class="line">    y=<span class="number">3</span> <span class="comment">#è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå‡½æ•°ä»£ç ï¼Œåå­—xå’Œyéƒ½å­˜æ”¾äºè¯¥å‡½æ•°çš„å±€éƒ¨åç§°ç©ºé—´ä¸­</span></span><br></pre></td></tr></table></figure>

<p>åç§°ç©ºé—´çš„åŠ è½½é¡ºåºæ˜¯ï¼šå†…ç½®åç§°ç©ºé—´-&gt;å…¨å±€åç§°ç©ºé—´-&gt;å±€éƒ¨åç§°ç©ºé—´ï¼Œè€ŒæŸ¥æ‰¾ä¸€ä¸ªåå­—ï¼Œå¿…é¡»ä»ä¸‰ä¸ªåç§°ç©ºé—´ä¹‹ä¸€æ‰¾åˆ°ï¼ŒæŸ¥æ‰¾é¡ºåºä¸ºï¼šå±€éƒ¨åç§°ç©ºé—´-&gt;å…¨å±€åç§°ç©ºé—´-&gt;å†…ç½®åç§°ç©ºé—´ã€‚</p>
<p><img src="https://pic1.zhimg.com/80/v2-521d2bf3131371f8d2656b184ad17798_720w.jpg" alt="img"></p>
<h2 id="äºŒ-ä½œç”¨åŸŸ"><a href="#äºŒ-ä½œç”¨åŸŸ" class="headerlink" title="äºŒ ä½œç”¨åŸŸ"></a>äºŒ ä½œç”¨åŸŸ</h2><h2 id="2-1-å…¨å±€ä½œç”¨åŸŸä¸å±€éƒ¨ä½œç”¨åŸŸ"><a href="#2-1-å…¨å±€ä½œç”¨åŸŸä¸å±€éƒ¨ä½œç”¨åŸŸ" class="headerlink" title="2.1 å…¨å±€ä½œç”¨åŸŸä¸å±€éƒ¨ä½œç”¨åŸŸ"></a>2.1 å…¨å±€ä½œç”¨åŸŸä¸å±€éƒ¨ä½œç”¨åŸŸ</h2><p>æŒ‰ç…§åå­—ä½œç”¨èŒƒå›´çš„ä¸åŒå¯ä»¥å°†ä¸‰ä¸ªåç§°ç©ºé—´åˆ’åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼š</p>
<ol>
<li>å…¨å±€ä½œç”¨åŸŸ:ä½äºå…¨å±€åç§°ç©ºé—´ã€å†…å»ºåç§°ç©ºé—´ä¸­çš„åå­—å±äºå…¨å±€èŒƒå›´ï¼Œè¯¥èŒƒå›´å†…çš„åå­—å…¨å±€å­˜æ´»ï¼ˆé™¤éè¢«åˆ é™¤ï¼Œå¦åˆ™åœ¨æ•´ä¸ªæ–‡ä»¶æ‰§è¡Œè¿‡ç¨‹ä¸­å­˜æ´»ï¼‰ã€å…¨å±€æœ‰æ•ˆï¼ˆåœ¨ä»»æ„ä½ç½®éƒ½å¯ä»¥ä½¿ç”¨ï¼‰ï¼›</li>
<li>å±€éƒ¨ä½œç”¨åŸŸ:ä½äºå±€éƒ¨åç§°ç©ºé—´ä¸­çš„åå­—å±äºå±€éƒ¨èŒƒå›´ã€‚è¯¥èŒƒå›´å†…çš„åå­—ä¸´æ—¶å­˜æ´»ï¼ˆå³åœ¨å‡½æ•°è°ƒç”¨æ—¶ä¸´æ—¶ç”Ÿæˆï¼Œå‡½æ•°è°ƒç”¨ç»“æŸåå°±é‡Šæ”¾ï¼‰ã€å±€éƒ¨æœ‰æ•ˆï¼ˆåªèƒ½åœ¨å‡½æ•°å†…ä½¿ç”¨ï¼‰ã€‚</li>
</ol>
<p><img src="https://pic4.zhimg.com/80/v2-c7c952d4554d6db0cf46305be525bafb_720w.jpg" alt="img"></p>
<h2 id="2-2-ä½œç”¨åŸŸä¸åå­—æŸ¥æ‰¾çš„ä¼˜å…ˆçº§"><a href="#2-2-ä½œç”¨åŸŸä¸åå­—æŸ¥æ‰¾çš„ä¼˜å…ˆçº§" class="headerlink" title="2.2 ä½œç”¨åŸŸä¸åå­—æŸ¥æ‰¾çš„ä¼˜å…ˆçº§"></a>2.2 ä½œç”¨åŸŸä¸åå­—æŸ¥æ‰¾çš„ä¼˜å…ˆçº§</h2><p> åœ¨å±€éƒ¨ä½œç”¨åŸŸæŸ¥æ‰¾åå­—æ—¶ï¼Œèµ·å§‹ä½ç½®æ˜¯å±€éƒ¨ä½œç”¨åŸŸï¼Œæ‰€ä»¥å…ˆæŸ¥æ‰¾å±€éƒ¨åç§°ç©ºé—´ï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼Œå†å»å…¨å±€ä½œç”¨åŸŸæŸ¥æ‰¾ï¼šå…ˆæŸ¥æ‰¾å…¨å±€åç§°ç©ºé—´ï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼Œå†æŸ¥æ‰¾å†…ç½®åç§°ç©ºé—´ï¼Œæœ€åéƒ½æ²¡æœ‰æ‰¾åˆ°å°±ä¼šæŠ›å‡ºå¼‚å¸¸</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x=<span class="number">100</span> <span class="comment">#å…¨å±€ä½œç”¨åŸŸçš„åå­—x</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>():</span></span><br><span class="line">    x=<span class="number">300</span> <span class="comment">#å±€éƒ¨ä½œç”¨åŸŸçš„åå­—x</span></span><br><span class="line">    <span class="built_in">print</span>(x) <span class="comment">#åœ¨å±€éƒ¨æ‰¾x</span></span><br><span class="line">foo()<span class="comment">#ç»“æœä¸º300</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å…¨å±€ä½œç”¨åŸŸæŸ¥æ‰¾åå­—æ—¶ï¼Œèµ·å§‹ä½ç½®ä¾¿æ˜¯å…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥å…ˆæŸ¥æ‰¾å…¨å±€åç§°ç©ºé—´ï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼Œå†æŸ¥æ‰¾å†…ç½®åç§°ç©ºé—´ï¼Œæœ€åéƒ½æ²¡æœ‰æ‰¾åˆ°å°±ä¼šæŠ›å‡ºå¼‚å¸¸</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x=<span class="number">100</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>():</span></span><br><span class="line">    x=<span class="number">300</span> <span class="comment">#åœ¨å‡½æ•°è°ƒç”¨æ—¶äº§ç”Ÿå±€éƒ¨ä½œç”¨åŸŸçš„åå­—x</span></span><br><span class="line">foo()</span><br><span class="line"><span class="built_in">print</span>(x) <span class="comment">#åœ¨å…¨å±€æ‰¾x,ç»“æœä¸º100</span></span><br></pre></td></tr></table></figure>

<p>æç¤ºï¼šå¯ä»¥è°ƒç”¨å†…å»ºå‡½æ•°locals()å’Œglobals()æ¥åˆ†åˆ«æŸ¥çœ‹å±€éƒ¨ä½œç”¨åŸŸå’Œå…¨å±€ä½œç”¨åŸŸçš„åå­—ï¼ŒæŸ¥çœ‹çš„ç»“æœéƒ½æ˜¯å­—å…¸æ ¼å¼ã€‚åœ¨å…¨å±€ä½œç”¨åŸŸæŸ¥çœ‹åˆ°çš„locals()çš„ç»“æœç­‰äºglobals()</p>
<p><img src="https://pic3.zhimg.com/80/v2-7adbbd64e5216724e7933789054d0f1e_720w.jpg" alt="img"></p>
<p>Pythonæ”¯æŒå‡½æ•°çš„åµŒå¥—å®šä¹‰ï¼Œåœ¨å†…åµŒçš„å‡½æ•°å†…æŸ¥æ‰¾åå­—æ—¶ï¼Œä¼šä¼˜å…ˆæŸ¥æ‰¾è‡ªå·±å±€éƒ¨ä½œç”¨åŸŸçš„åå­—ï¼Œç„¶åç”±å†…è€Œå¤–ä¸€å±‚å±‚æŸ¥æ‰¾å¤–éƒ¨åµŒå¥—å‡½æ•°å®šä¹‰çš„ä½œç”¨åŸŸï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™æŸ¥æ‰¾å…¨å±€ä½œç”¨åŸŸ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x=<span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span>():</span></span><br><span class="line">    x=<span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span>():</span> <span class="comment"># å‡½æ•°åinnerå±äºouterè¿™ä¸€å±‚ä½œç”¨åŸŸçš„åå­—</span></span><br><span class="line">        x=<span class="number">3</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;inner x:%s&#x27;</span> %x)</span><br><span class="line"></span><br><span class="line">    inner()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;outer x:%s&#x27;</span> %x)</span><br><span class="line"></span><br><span class="line">outer() </span><br><span class="line"><span class="comment">#ç»“æœä¸º</span></span><br><span class="line">inner x:<span class="number">3</span></span><br><span class="line">outer x:<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å‡½æ•°å†…ï¼Œæ— è®ºåµŒå¥—å¤šå°‘å±‚ï¼Œéƒ½å¯ä»¥æŸ¥çœ‹åˆ°å…¨å±€ä½œç”¨åŸŸçš„åå­—ï¼Œè‹¥è¦åœ¨å‡½æ•°å†…ä¿®æ”¹å…¨å±€åç§°ç©ºé—´ä¸­åå­—çš„å€¼ï¼Œå½“å€¼ä¸ºä¸å¯å˜ç±»å‹æ—¶ï¼Œåˆ™éœ€è¦ç”¨åˆ°globalå…³é”®å­—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x=<span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>():</span></span><br><span class="line">    <span class="keyword">global</span> x <span class="comment">#å£°æ˜xä¸ºå…¨å±€åç§°ç©ºé—´çš„åå­—</span></span><br><span class="line">    x=<span class="number">2</span></span><br><span class="line">foo()</span><br><span class="line"><span class="built_in">print</span>(x) <span class="comment">#ç»“æœä¸º2</span></span><br></pre></td></tr></table></figure>

<p>å½“å®å‚çš„å€¼ä¸ºå¯å˜ç±»å‹æ—¶ï¼Œå‡½æ•°ä½“å†…å¯¹è¯¥å€¼çš„ä¿®æ”¹å°†ç›´æ¥ååº”åˆ°åŸå€¼ï¼Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">num_list=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">nums</span>):</span></span><br><span class="line">    nums.append(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">foo(num_list)</span><br><span class="line"><span class="built_in">print</span>(num_list)</span><br><span class="line"><span class="comment">#ç»“æœä¸º</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<p>å¯¹äºåµŒå¥—å¤šå±‚çš„å‡½æ•°ï¼Œä½¿ç”¨nonlocalå…³é”®å­—å¯ä»¥å°†åå­—å£°æ˜ä¸ºæ¥è‡ªå¤–éƒ¨åµŒå¥—å‡½æ•°å®šä¹‰çš„ä½œç”¨åŸŸï¼ˆéå…¨å±€ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span>  <span class="title">f1</span>():</span></span><br><span class="line">    x=<span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f2</span>():</span></span><br><span class="line">        <span class="keyword">nonlocal</span> x</span><br><span class="line">        x=<span class="number">3</span></span><br><span class="line">    f2() <span class="comment">#è°ƒç”¨f2(),ä¿®æ”¹f1ä½œç”¨åŸŸä¸­åå­—xçš„å€¼</span></span><br><span class="line">    <span class="built_in">print</span>(x) <span class="comment">#åœ¨f1ä½œç”¨åŸŸæŸ¥çœ‹x</span></span><br><span class="line"></span><br><span class="line">f1()</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç»“æœ</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>nonlocal xä¼šä»å½“å‰å‡½æ•°çš„å¤–å±‚å‡½æ•°å¼€å§‹ä¸€å±‚å±‚å»æŸ¥æ‰¾åå­—xï¼Œè‹¥æ˜¯ä¸€ç›´åˆ°æœ€å¤–å±‚å‡½æ•°éƒ½æ‰¾ä¸åˆ°ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-632ec1c5586b42b1b603268097360c35_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471/?p=45">https://www.bilibili.com/video/av73342471/?p=45www.bilibili.com/video/av73342471/?p=45</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>11-å‡½æ•°çš„å‚æ•°</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/12_%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0/</url>
    <content><![CDATA[<h2 id="ä¸€-å½¢å‚ä¸å®å‚ä»‹ç»"><a href="#ä¸€-å½¢å‚ä¸å®å‚ä»‹ç»" class="headerlink" title="ä¸€ å½¢å‚ä¸å®å‚ä»‹ç»"></a>ä¸€ å½¢å‚ä¸å®å‚ä»‹ç»</h2><p><img src="https://pic2.zhimg.com/80/v2-3be956bc3ace8da945af47995ea41b19_720w.jpg" alt="img"></p>
<p>å‡½æ•°çš„å‚æ•°åˆ†ä¸ºå½¢å¼å‚æ•°å’Œå®é™…å‚æ•°ï¼Œç®€ç§°å½¢å‚å’Œå®å‚ï¼š</p>
<p>å½¢å‚å³åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œæ‹¬å·å†…å£°æ˜çš„å‚æ•°ã€‚å½¢å‚æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå˜é‡åï¼Œç”¨æ¥æ¥æ”¶å¤–éƒ¨ä¼ æ¥çš„å€¼ã€‚</p>
<p>å®å‚å³åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ‹¬å·å†…ä¼ å…¥çš„å€¼ï¼Œå€¼å¯ä»¥æ˜¯å¸¸é‡ã€å˜é‡ã€è¡¨è¾¾å¼æˆ–ä¸‰è€…çš„ç»„åˆ:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ï¼šå®å‚æ˜¯å¸¸é‡</span></span><br><span class="line">res=my_min(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#2ï¼šå®å‚æ˜¯å˜é‡</span></span><br><span class="line">a=<span class="number">1</span></span><br><span class="line">b=<span class="number">2</span></span><br><span class="line">res=my_min(a,b)</span><br><span class="line"></span><br><span class="line"><span class="comment">#3ï¼šå®å‚æ˜¯è¡¨è¾¾å¼</span></span><br><span class="line">res=my_min(<span class="number">10</span>*<span class="number">2</span>,<span class="number">10</span>*my_min(<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#4ï¼šå®å‚å¯ä»¥æ˜¯å¸¸é‡ã€å˜é‡ã€è¡¨è¾¾å¼çš„ä»»æ„ç»„åˆ</span></span><br><span class="line">a=<span class="number">2</span></span><br><span class="line">my_min(<span class="number">1</span>,a,<span class="number">10</span>*my_min(<span class="number">3</span>,<span class="number">4</span>))</span><br></pre></td></tr></table></figure>

<p>åœ¨è°ƒç”¨æœ‰å‚å‡½æ•°æ—¶ï¼Œå®å‚ï¼ˆå€¼ï¼‰ä¼šèµ‹å€¼ç»™å½¢å‚ï¼ˆå˜é‡åï¼‰ã€‚åœ¨Pythonä¸­ï¼Œå˜é‡åä¸å€¼åªæ˜¯å•çº¯çš„ç»‘å®šå…³ç³»ï¼Œè€Œå¯¹äºå‡½æ•°æ¥è¯´ï¼Œè¿™ç§ç»‘å®šå…³ç³»åªåœ¨å‡½æ•°è°ƒç”¨æ—¶ç”Ÿæ•ˆï¼Œåœ¨è°ƒç”¨ç»“æŸåè§£é™¤ã€‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-b0036c8f8942a558d95a3200f38338d1_720w.jpg" alt="img"></p>
<h2 id="äºŒ-å½¢å‚ä¸å®å‚çš„å…·ä½“ä½¿ç”¨"><a href="#äºŒ-å½¢å‚ä¸å®å‚çš„å…·ä½“ä½¿ç”¨" class="headerlink" title="äºŒ å½¢å‚ä¸å®å‚çš„å…·ä½“ä½¿ç”¨"></a>äºŒ å½¢å‚ä¸å®å‚çš„å…·ä½“ä½¿ç”¨</h2><h2 id="2-1-ä½ç½®å‚æ•°"><a href="#2-1-ä½ç½®å‚æ•°" class="headerlink" title="2.1 ä½ç½®å‚æ•°"></a>2.1 ä½ç½®å‚æ•°</h2><p>ä½ç½®å³é¡ºåºï¼Œä½ç½®å‚æ•°æŒ‡çš„æ˜¯æŒ‰é¡ºåºå®šä¹‰çš„å‚æ•°ï¼Œéœ€è¦ä»ä¸¤ä¸ªè§’åº¦å»çœ‹ï¼š</p>
<ol>
<li>åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºä¾æ¬¡å®šä¹‰å½¢å‚,ç§°ä¸ºä½ç½®å½¢å‚ï¼Œå‡¡æ˜¯æŒ‰ç…§è¿™ç§å½¢å¼å®šä¹‰çš„å½¢å‚éƒ½å¿…é¡»è¢«ä¼ å€¼</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">register</span>(<span class="params">name,age,sex</span>):</span> <span class="comment">#å®šä¹‰ä½ç½®å½¢å‚ï¼šnameï¼Œageï¼Œsexï¼Œä¸‰è€…éƒ½å¿…é¡»è¢«ä¼ å€¼</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Name:%s Age:%s Sex:%s&#x27;</span> %(name,age,sex))</span><br><span class="line">register() <span class="comment">#TypeErrorï¼šç¼ºå°‘3ä¸ªä½ç½®å‚æ•° </span></span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºä¾æ¬¡å®šä¹‰å®å‚ï¼Œç§°ä¸ºä½ç½®å®å‚ï¼Œå‡¡æ˜¯æŒ‰ç…§è¿™ç§å½¢å¼å®šä¹‰çš„å®å‚ä¼šæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºä¸å½¢å‚ä¸€ä¸€å¯¹åº”</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">register</span>(<span class="params">name,age,sex</span>):</span> <span class="comment">#å®šä¹‰ä½ç½®å½¢å‚ï¼šnameï¼Œageï¼Œsexï¼Œä¸‰è€…éƒ½å¿…é¡»è¢«ä¼ å€¼</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Name:%s Age:%s Sex:%s&#x27;</span> %(name,age,sex))</span><br><span class="line">register() <span class="comment">#TypeErrorï¼šç¼ºå°‘3ä¸ªä½ç½®å‚æ•°</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-1152d1943f7d6b217981965ad5d2b8be_720w.jpg" alt="img"></p>
<h2 id="2-2-å…³é”®å­—å‚æ•°"><a href="#2-2-å…³é”®å­—å‚æ•°" class="headerlink" title="2.2 å…³é”®å­—å‚æ•°"></a>2.2 å…³é”®å­—å‚æ•°</h2><p>åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå®å‚å¯ä»¥æ˜¯key&#x3D;valueçš„å½¢å¼ï¼Œç§°ä¸ºå…³é”®å­—å‚æ•°ï¼Œå‡¡æ˜¯æŒ‰ç…§è¿™ç§å½¢å¼å®šä¹‰çš„å®å‚ï¼Œå¯ä»¥å®Œå…¨ä¸æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºå®šä¹‰ï¼Œä½†ä»èƒ½ä¸ºæŒ‡å®šçš„å½¢å‚èµ‹å€¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>register(sex=<span class="string">&#x27;male&#x27;</span>,name=<span class="string">&#x27;lili&#x27;</span>,age=<span class="number">18</span>)</span><br><span class="line">Name:lili Age:<span class="number">18</span> Sex:male</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå®å‚ä¹Ÿå¯ä»¥æ˜¯æŒ‰ä½ç½®æˆ–æŒ‰å…³é”®å­—çš„æ··åˆä½¿ç”¨ï¼Œä½†å¿…é¡»ä¿è¯å…³é”®å­—å‚æ•°åœ¨ä½ç½®å‚æ•°åé¢ï¼Œä¸”ä¸å¯ä»¥å¯¹ä¸€ä¸ªå½¢å‚é‡å¤èµ‹å€¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>register(<span class="string">&#x27;lili&#x27;</span>,sex=<span class="string">&#x27;male&#x27;</span>,age=<span class="number">18</span>) <span class="comment">#æ­£ç¡®ä½¿ç”¨</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>register(name=<span class="string">&#x27;lili&#x27;</span>,<span class="number">18</span>,sex=<span class="string">&#x27;male&#x27;</span>) <span class="comment">#SyntaxErrorï¼šå…³é”®å­—å‚æ•°name=â€˜liliâ€™åœ¨ä½ç½®å‚æ•°18ä¹‹å‰</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>register(<span class="string">&#x27;lili&#x27;</span>,sex=<span class="string">&#x27;male&#x27;</span>,age=<span class="number">18</span>,name=<span class="string">&#x27;jack&#x27;</span>) <span class="comment">#TypeErrorï¼šå½¢å‚nameè¢«é‡å¤èµ‹å€¼</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-751903e8073067049e6c42c5196754fe_720w.jpg" alt="img"></p>
<h2 id="2-3-é»˜è®¤å‚æ•°"><a href="#2-3-é»˜è®¤å‚æ•°" class="headerlink" title="2.3 é»˜è®¤å‚æ•°"></a>2.3 é»˜è®¤å‚æ•°</h2><p>åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œå°±å·²ç»ä¸ºå½¢å‚èµ‹å€¼ï¼Œè¿™ç±»å½¢å‚ç§°ä¹‹ä¸ºé»˜è®¤å‚æ•°ï¼Œå½“å‡½æ•°æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼Œéœ€è¦å°†å€¼ç»å¸¸æ”¹å˜çš„å‚æ•°å®šä¹‰æˆä½ç½®å‚æ•°ï¼Œè€Œå°†å€¼æ”¹å˜è¾ƒå°‘çš„å‚æ•°å®šä¹‰æˆé»˜è®¤å‚æ•°ã€‚ä¾‹å¦‚ç¼–å†™ä¸€ä¸ªæ³¨å†Œå­¦ç”Ÿä¿¡æ¯çš„å‡½æ•°ï¼Œå¦‚æœå¤§å¤šæ•°å­¦ç”Ÿçš„æ€§åˆ«éƒ½ä¸ºç”·ï¼Œé‚£å®Œå…¨å¯ä»¥å°†å½¢å‚sexå®šä¹‰æˆé»˜è®¤å‚æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">register</span>(<span class="params">name,age,sex=<span class="string">&#x27;male&#x27;</span></span>):</span> <span class="comment">#é»˜è®¤sexçš„å€¼ä¸ºmale</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;Name:%s Age:%s Sex:%s&#x27;</span> %(name,age,sex))</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>å®šä¹‰æ—¶å°±å·²ç»ä¸ºå‚æ•°sexèµ‹å€¼ï¼Œæ„å‘³ç€è°ƒç”¨æ—¶å¯ä»¥ä¸å¯¹sexèµ‹å€¼ï¼Œè¿™é™ä½äº†å‡½æ•°è°ƒç”¨çš„å¤æ‚åº¦</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>register(<span class="string">&#x27;tom&#x27;</span>,<span class="number">17</span>) <span class="comment">#å¤§å¤šæ•°æƒ…å†µ,æ— éœ€ä¸ºsexä¼ å€¼,é»˜è®¤ä¸ºmale</span></span><br><span class="line">Name:tom Age:<span class="number">17</span> Sex:male</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>register(<span class="string">&#x27;Lili&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;female&#x27;</span>) <span class="comment">#å°‘æ•°æƒ…å†µ,å¯ä»¥ä¸ºsexä¼ å€¼female</span></span><br><span class="line">Name:Lili Age:<span class="number">18</span> Sex:female</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-85c49040b5ca19b0a6cd236d6a335d21_720w.jpg" alt="img"></p>
<p>éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li>é»˜è®¤å‚æ•°å¿…é¡»åœ¨ä½ç½®å‚æ•°ä¹‹å</li>
<li>é»˜è®¤å‚æ•°çš„å€¼ä»…åœ¨å‡½æ•°å®šä¹‰é˜¶æ®µè¢«èµ‹å€¼ä¸€æ¬¡</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=<span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">arg=x</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(arg)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x=<span class="number">5</span> <span class="comment">#å®šä¹‰é˜¶æ®µargå·²è¢«èµ‹å€¼ä¸º1ï¼Œæ­¤å¤„çš„ä¿®æ”¹ä¸é»˜è®¤å‚æ•°argæ— ä»»ä½•å…³ç³»</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo()</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<ol>
<li>é»˜è®¤å‚æ•°çš„å€¼é€šå¸¸åº”è®¾ä¸ºä¸å¯å˜ç±»å‹</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">n,arg=[]</span>):</span>    </span><br><span class="line">     arg.append(n)    </span><br><span class="line">     <span class="keyword">return</span> arg    </span><br><span class="line">foo(<span class="number">1</span>)    </span><br><span class="line">[<span class="number">1</span>] </span><br><span class="line">foo(<span class="number">2</span>)    </span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>] </span><br><span class="line">foo(<span class="number">3</span>)    </span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<p>æ¯æ¬¡è°ƒç”¨æ˜¯åœ¨ä¸Šä¸€æ¬¡çš„åŸºç¡€ä¸Šå‘åŒä¸€åˆ—è¡¨å¢åŠ å€¼ï¼Œä¿®æ”¹å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">n,arg=<span class="literal">None</span></span>):</span>    </span><br><span class="line">     <span class="keyword">if</span> arg <span class="keyword">is</span> <span class="literal">None</span>:    </span><br><span class="line">         arg=[]    </span><br><span class="line">     arg.append(n)    </span><br><span class="line">     <span class="keyword">return</span> arg    </span><br><span class="line">foo(<span class="number">1</span>)    </span><br><span class="line">[<span class="number">1</span>] </span><br><span class="line">foo(<span class="number">2</span>)    </span><br><span class="line">[<span class="number">2</span>] </span><br><span class="line">foo(<span class="number">3</span>)    </span><br><span class="line">[<span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-c48b74c4968b946d68531c2ef2c1b40e_720w.jpg" alt="img"></p>
<h2 id="2-4-å¯å˜é•¿åº¦çš„å‚æ•°ï¼ˆ-ä¸-çš„ç”¨æ³•ï¼‰"><a href="#2-4-å¯å˜é•¿åº¦çš„å‚æ•°ï¼ˆ-ä¸-çš„ç”¨æ³•ï¼‰" class="headerlink" title="2.4 å¯å˜é•¿åº¦çš„å‚æ•°ï¼ˆ*ä¸**çš„ç”¨æ³•ï¼‰"></a>2.4 å¯å˜é•¿åº¦çš„å‚æ•°ï¼ˆ*ä¸**çš„ç”¨æ³•ï¼‰</h2><p><img src="https://pic2.zhimg.com/80/v2-ac1ed3f13dbd9fea9e3c5cfbb1047611_720w.jpg" alt="img"></p>
<p>å‚æ•°çš„é•¿åº¦å¯å˜æŒ‡çš„æ˜¯åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå®å‚çš„ä¸ªæ•°å¯ä»¥ä¸å›ºå®šï¼Œè€Œåœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œå®å‚çš„å®šä¹‰æ— éæ˜¯æŒ‰ä½ç½®æˆ–è€…æŒ‰å…³é”®å­—ä¸¤ç§å½¢å¼ï¼Œè¿™å°±è¦æ±‚å½¢å‚æä¾›ä¸¤ç§è§£å†³æ–¹æ¡ˆæ¥åˆ†åˆ«å¤„ç†ä¸¤ç§å½¢å¼çš„å¯å˜é•¿åº¦çš„å‚æ•°</p>
<h3 id="2-4-1-å¯å˜é•¿åº¦çš„ä½ç½®å‚æ•°"><a href="#2-4-1-å¯å˜é•¿åº¦çš„ä½ç½®å‚æ•°" class="headerlink" title="2.4.1 å¯å˜é•¿åº¦çš„ä½ç½®å‚æ•°"></a>2.4.1 å¯å˜é•¿åº¦çš„ä½ç½®å‚æ•°</h3><p>å¦‚æœåœ¨æœ€åä¸€ä¸ªå½¢å‚åå‰åŠ <em>å·,é‚£ä¹ˆåœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œæº¢å‡ºçš„ä½ç½®å®å‚ï¼Œéƒ½ä¼šè¢«</em>æ¥æ”¶ï¼Œä»¥å…ƒç»„çš„å½¢å¼ä¿å­˜ä¸‹æ¥èµ‹å€¼ç»™è¯¥å½¢å‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">x,y,z=<span class="number">1</span>,*args</span>):</span> <span class="comment">#åœ¨æœ€åä¸€ä¸ªå½¢å‚åargså‰åŠ *å·</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(x)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(y)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(z)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(args)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>)  <span class="comment">#å®å‚1ã€2ã€3æŒ‰ä½ç½®ä¸ºå½¢å‚xã€yã€zèµ‹å€¼ï¼Œå¤šä½™çš„ä½ç½®å®å‚4ã€5ã€6ã€7éƒ½è¢«*æ¥æ”¶ï¼Œä»¥å…ƒç»„çš„å½¢å¼ä¿å­˜ä¸‹æ¥ï¼Œèµ‹å€¼ç»™argsï¼Œå³args=(4, 5, 6,7)</span></span><br><span class="line"></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">(<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬äº‹å…ˆç”Ÿæˆäº†ä¸€ä¸ªåˆ—è¡¨,ä»ç„¶æ˜¯å¯ä»¥ä¼ å€¼ç»™*argsçš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">x,y,*args</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(x)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(y)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(args)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L=[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(<span class="number">1</span>,<span class="number">2</span>,*L) <span class="comment"># *Lå°±ç›¸å½“äºä½ç½®å‚æ•°3ï¼Œ4ï¼Œ5, foo(1,2,*L)å°±ç­‰åŒäºfoo(1,2,3,4,5)</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-e73cc42b02d988741717036dab3ef3d8_720w.jpg" alt="img"></p>
<p>æ³¨æ„ï¼šå¦‚æœåœ¨ä¼ å…¥Læ—¶æ²¡æœ‰åŠ *,é‚£Lå°±åªæ˜¯ä¸€ä¸ªæ™®é€šçš„ä½ç½®å‚æ•°äº†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(<span class="number">1</span>,<span class="number">2</span>,L) <span class="comment">#ä»…å¤šå‡ºä¸€ä¸ªä½ç½®å®å‚L</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå½¢å‚ä¸ºå¸¸è§„çš„å‚æ•°ï¼ˆä½ç½®æˆ–é»˜è®¤ï¼‰ï¼Œå®å‚ä»å¯ä»¥æ˜¯*çš„å½¢å¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">x,y,z=<span class="number">3</span></span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(x)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(y)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(z)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(*[<span class="number">1</span>,<span class="number">2</span>]) <span class="comment">#ç­‰åŒäºfoo(1,2)</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬æƒ³è¦æ±‚å¤šä¸ªå€¼çš„å’Œï¼Œ*argså°±æ´¾ä¸Šç”¨åœºäº†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">*args</span>):</span></span><br><span class="line"><span class="meta">... </span>    res=<span class="number">0</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">for</span> i <span class="keyword">in</span> args:</span><br><span class="line"><span class="meta">... </span>        res+=i</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> res</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</span><br><span class="line"><span class="number">15</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-8996656ee55ad76ec5b15628a8044140_720w.jpg" alt="img"></p>
<h3 id="2-4-2-å¯å˜é•¿åº¦çš„å…³é”®å­—å‚æ•°"><a href="#2-4-2-å¯å˜é•¿åº¦çš„å…³é”®å­—å‚æ•°" class="headerlink" title="2.4.2 å¯å˜é•¿åº¦çš„å…³é”®å­—å‚æ•°"></a>2.4.2 å¯å˜é•¿åº¦çš„å…³é”®å­—å‚æ•°</h3><p>å¦‚æœåœ¨æœ€åä¸€ä¸ªå½¢å‚åå‰åŠ <strong>å·,é‚£ä¹ˆåœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œæº¢å‡ºçš„å…³é”®å­—å‚æ•°ï¼Œéƒ½ä¼šè¢«</strong>æ¥æ”¶ï¼Œä»¥å­—å…¸çš„å½¢å¼ä¿å­˜ä¸‹æ¥èµ‹å€¼ç»™è¯¥å½¢å‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">x,**kwargs</span>):</span> <span class="comment">#åœ¨æœ€åä¸€ä¸ªå‚æ•°kwargså‰åŠ **</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(x)        </span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(kwargs)   </span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(y=<span class="number">2</span>,x=<span class="number">1</span>,z=<span class="number">3</span>) <span class="comment">#æº¢å‡ºçš„å…³é”®å­—å®å‚y=2ï¼Œz=3éƒ½è¢«**æ¥æ”¶ï¼Œä»¥å­—å…¸çš„å½¢å¼ä¿å­˜ä¸‹æ¥ï¼Œèµ‹å€¼ç»™kwargs</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">&#123;<span class="string">&#x27;z&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;y&#x27;</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬äº‹å…ˆç”Ÿæˆäº†ä¸€ä¸ªå­—å…¸,ä»ç„¶æ˜¯å¯ä»¥ä¼ å€¼ç»™**kwargsçš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">x,y,**kwargs</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(x)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(y)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(kwargs)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic=&#123;<span class="string">&#x27;a&#x27;</span>:<span class="number">1</span>,<span class="string">&#x27;b&#x27;</span>:<span class="number">2</span>&#125; </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(<span class="number">1</span>,<span class="number">2</span>,**dic) <span class="comment">#**dicå°±ç›¸å½“äºå…³é”®å­—å‚æ•°a=1ï¼Œb=2ï¼Œfoo(1,2,**dic)ç­‰åŒfoo(1,2,a=1,b=2)</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-b4374327737ac837551b67f7813666e8_720w.jpg" alt="img"></p>
<p>æ³¨æ„ï¼šå¦‚æœåœ¨ä¼ å…¥dicæ—¶æ²¡æœ‰åŠ **,é‚£dicå°±åªæ˜¯ä¸€ä¸ªæ™®é€šçš„ä½ç½®å‚æ•°äº†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(<span class="number">1</span>,<span class="number">2</span>,dic) <span class="comment">#TypeError:å‡½æ•°fooåªéœ€è¦2ä¸ªä½ç½®å‚æ•°ï¼Œä½†æ˜¯ä¼ äº†3ä¸ª</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœå½¢å‚ä¸ºå¸¸è§„å‚æ•°ï¼ˆä½ç½®æˆ–é»˜è®¤ï¼‰ï¼Œå®å‚ä»å¯ä»¥æ˜¯**çš„å½¢å¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">x,y,z=<span class="number">3</span></span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(x)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(y)</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(z)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(**&#123;<span class="string">&#x27;x&#x27;</span>:<span class="number">1</span>,<span class="string">&#x27;y&#x27;</span>:<span class="number">2</span>&#125;) <span class="comment">#ç­‰åŒäºfoo(y=2,x=1)</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬è¦ç¼–å†™ä¸€ä¸ªç”¨æˆ·è®¤è¯çš„å‡½æ•°ï¼Œèµ·åˆå¯èƒ½åªåŸºäºç”¨æˆ·åå¯†ç çš„éªŒè¯å°±å¯ä»¥äº†ï¼Œå¯ä»¥ä½¿ç”¨**kwargsä¸ºæ—¥åçš„æ‰©å±•ä¾›è‰¯å¥½çš„ç¯å¢ƒï¼ŒåŒæ—¶ä¿æŒäº†å‡½æ•°çš„ç®€æ´æ€§ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">auth</span>(<span class="params">user,password,**kwargs</span>):</span> </span><br><span class="line"><span class="meta">... </span>    <span class="keyword">pass</span> </span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h2 id="2-5-å‘½åå…³é”®å­—å‚æ•°"><a href="#2-5-å‘½åå…³é”®å­—å‚æ•°" class="headerlink" title="2.5 å‘½åå…³é”®å­—å‚æ•°"></a>2.5 å‘½åå…³é”®å­—å‚æ•°</h2><p>åœ¨å®šä¹‰äº†**kwargså‚æ•°åï¼Œå‡½æ•°è°ƒç”¨è€…å°±å¯ä»¥ä¼ å…¥ä»»æ„çš„å…³é”®å­—å‚æ•°key&#x3D;valueï¼Œå¦‚æœå‡½æ•°ä½“ä»£ç çš„æ‰§è¡Œéœ€è¦ä¾èµ–æŸä¸ªkeyï¼Œå¿…é¡»åœ¨å‡½æ•°å†…è¿›è¡Œåˆ¤æ–­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">register</span>(<span class="params">name,age,**kwargs</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">if</span> <span class="string">&#x27;sex&#x27;</span> <span class="keyword">in</span> kwargs:</span><br><span class="line"><span class="meta">... </span>        <span class="comment">#æœ‰sexå‚æ•°</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">pass</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">if</span> <span class="string">&#x27;height&#x27;</span> <span class="keyword">in</span> kwargs:</span><br><span class="line"><span class="meta">... </span>        <span class="comment">#æœ‰heightå‚æ•°</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">pass</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>æƒ³è¦é™å®šå‡½æ•°çš„è°ƒç”¨è€…å¿…é¡»ä»¥key&#x3D;valueçš„å½¢å¼ä¼ å€¼ï¼ŒPython3æä¾›äº†ä¸“é—¨çš„è¯­æ³•ï¼šéœ€è¦åœ¨å®šä¹‰å½¢å‚æ—¶ï¼Œç”¨<em>ä½œä¸ºä¸€ä¸ªåˆ†éš”ç¬¦å·ï¼Œ</em>å·ä¹‹åçš„å½¢å‚ç§°ä¸ºå‘½åå…³é”®å­—å‚æ•°ã€‚å¯¹äºè¿™ç±»å‚æ•°ï¼Œåœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œå¿…é¡»æŒ‰ç…§key&#x3D;valueçš„å½¢å¼ä¸ºå…¶ä¼ å€¼ï¼Œä¸”å¿…é¡»è¢«ä¼ å€¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">register</span>(<span class="params">name,age,*,sex,height</span>):</span> <span class="comment">#sex,heightä¸ºå‘½åå…³é”®å­—å‚æ•°</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">pass</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>register(<span class="string">&#x27;lili&#x27;</span>,<span class="number">18</span>,sex=<span class="string">&#x27;male&#x27;</span>,height=<span class="string">&#x27;1.8m&#x27;</span>) <span class="comment">#æ­£ç¡®ä½¿ç”¨</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>register(<span class="string">&#x27;lili&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;1.8m&#x27;</span>) <span class="comment"># TypeError:æœªä½¿ç”¨å…³é”®å­—çš„å½¢å¼ä¸ºsexå’Œheightä¼ å€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>register(<span class="string">&#x27;lili&#x27;</span>,<span class="number">18</span>,height=<span class="string">&#x27;1.8m&#x27;</span>) <span class="comment"># TypeErroræ²¡æœ‰ä¸ºå‘½åå…³é”®å­—å‚æ•°heightä¼ å€¼ã€‚</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-536b4db7a18e1f39795a152f4c6249bb_720w.jpg" alt="img"></p>
<p>å‘½åå…³é”®å­—å‚æ•°ä¹Ÿå¯ä»¥æœ‰é»˜è®¤å€¼ï¼Œä»è€Œç®€åŒ–è°ƒç”¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">register</span>(<span class="params">name,age,*,sex=<span class="string">&#x27;male&#x27;</span>,height</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;Name:%s,Age:%s,Sex:%s,Height:%s&#x27;</span> %(name,age,sex,height))</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>register(<span class="string">&#x27;lili&#x27;</span>,<span class="number">18</span>,height=<span class="string">&#x27;1.8m&#x27;</span>)</span><br><span class="line">Name:lili,Age:<span class="number">18</span>,Sex:male,Height:<span class="number">1.8</span>m</span><br></pre></td></tr></table></figure>

<p>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼šsexä¸æ˜¯é»˜è®¤å‚æ•°ï¼Œheightä¹Ÿä¸æ˜¯ä½ç½®å‚æ•°ï¼Œå› ä¸ºäºŒè€…å‡åœ¨<em>åï¼Œæ‰€ä»¥éƒ½æ˜¯å‘½åå…³é”®å­—å‚æ•°ï¼Œå½¢å‚sex&#x3D;â€™maleâ€™å±äºå‘½åå…³é”®å­—å‚æ•°çš„é»˜è®¤å€¼ï¼Œå› è€Œå³ä¾¿æ˜¯æ”¾åˆ°å½¢å‚heightä¹‹å‰ä¹Ÿä¸ä¼šæœ‰é—®é¢˜ã€‚å¦å¤–ï¼Œå¦‚æœå½¢å‚ä¸­å·²ç»æœ‰ä¸€ä¸ª</em>argsäº†ï¼Œå‘½åå…³é”®å­—å‚æ•°å°±ä¸å†éœ€è¦ä¸€ä¸ªå•ç‹¬çš„*ä½œä¸ºåˆ†éš”ç¬¦å·äº†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">register</span>(<span class="params">name,age,*args,sex=<span class="string">&#x27;male&#x27;</span>,height</span>):</span></span><br><span class="line"><span class="meta">... </span>  <span class="built_in">print</span>(<span class="string">&#x27;Name:%s,Age:%s,Args:%s,Sex:%s,Height:%s&#x27;</span> %(name,age,args,sex,height))</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>register(<span class="string">&#x27;lili&#x27;</span>,<span class="number">18</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,height=<span class="string">&#x27;1.8m&#x27;</span>) <span class="comment">#sexä¸heightä»ä¸ºå‘½åå…³é”®å­—å‚æ•°</span></span><br><span class="line">Name:lili,Age:<span class="number">18</span>,Args:(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>),Sex:male,Height:<span class="number">1.8</span>m</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-daa2f3a7038bc4603a334da19e216dcf_720w.jpg" alt="img"></p>
<p><img src="https://pic1.zhimg.com/80/v2-f69da71d076e7119fd2ec2e84817dd6c_720w.jpg" alt="img"></p>
<h2 id="2-6-ç»„åˆä½¿ç”¨"><a href="#2-6-ç»„åˆä½¿ç”¨" class="headerlink" title="2.6 ç»„åˆä½¿ç”¨"></a>2.6 ç»„åˆä½¿ç”¨</h2><p>ç»¼ä¸Šæ‰€è¿°æ‰€æœ‰å‚æ•°å¯ä»»æ„ç»„åˆä½¿ç”¨ï¼Œä½†å®šä¹‰é¡ºåºå¿…é¡»æ˜¯ï¼šä½ç½®å‚æ•°ã€é»˜è®¤å‚æ•°ã€*argsã€å‘½åå…³é”®å­—å‚æ•°ã€**kwargs</p>
<p>å¯å˜å‚æ•°*argsä¸å…³é”®å­—å‚æ•°<strong>kwargsé€šå¸¸æ˜¯ç»„åˆåœ¨ä¸€èµ·ä½¿ç”¨çš„ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°çš„å½¢å‚ä¸º*argsä¸</strong>kwargsï¼Œé‚£ä¹ˆä»£è¡¨è¯¥å‡½æ•°å¯ä»¥æ¥æ”¶ä»»ä½•å½¢å¼ã€ä»»æ„é•¿åº¦çš„å‚æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args,**kwargs</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">pass</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-8a33c0e3ae4f314dc75eca6250b66fe7_720w.jpg" alt="img"></p>
<p>åœ¨è¯¥å‡½æ•°å†…éƒ¨è¿˜å¯ä»¥æŠŠæ¥æ”¶åˆ°çš„å‚æ•°ä¼ ç»™å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼ˆè¿™åœ¨4.6å°èŠ‚è£…é¥°å™¨çš„å®ç°ä¸­å¤§æœ‰ç”¨å¤„ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">x,y,z</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(x,y,z)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args,**kwargs</span>):</span></span><br><span class="line"><span class="meta">... </span>    func(*args,**kwargs)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>wrapper(<span class="number">1</span>,z=<span class="number">3</span>,y=<span class="number">2</span>)</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>æŒ‰ç…§ä¸Šè¿°å†™æ³•ï¼Œåœ¨ä¸ºå‡½æ•°wrapperä¼ å‚æ—¶ï¼Œå…¶å®éµå¾ªçš„æ˜¯å‡½æ•°funcçš„å‚æ•°è§„åˆ™ï¼Œè°ƒç”¨å‡½æ•°wrapperçš„è¿‡ç¨‹åˆ†æå¦‚ä¸‹ï¼š</p>
<ol>
<li>ä½ç½®å®å‚1è¢«*æ¥æ”¶ï¼Œä»¥å…ƒç»„çš„å½¢å¼ä¿å­˜ä¸‹æ¥ï¼Œèµ‹å€¼ç»™argsï¼Œå³args&#x3D;(1,),å…³é”®å­—å®å‚z&#x3D;3ï¼Œy&#x3D;2è¢«**æ¥æ”¶ï¼Œä»¥å­—å…¸çš„å½¢å¼ä¿å­˜ä¸‹æ¥ï¼Œèµ‹å€¼ç»™kwargsï¼Œå³kwargs&#x3D;{â€˜yâ€™: 2, â€˜zâ€™: 3}</li>
<li>æ‰§è¡Œfunc(<em>args,<em>kwargs),å³func(</em>(1,),</em>* {â€˜yâ€™: 2, â€˜zâ€™: 3}),ç­‰åŒäºfunc(1,z&#x3D;3,y&#x3D;2)</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">æç¤ºï¼š *argsã€**kwargsä¸­çš„argså’Œkwargsè¢«æ›¿æ¢æˆå…¶ä»–åå­—å¹¶æ— è¯­æ³•é”™è¯¯ï¼Œä½†ä½¿ç”¨argsã€kwargsæ˜¯çº¦å®šä¿—æˆçš„ã€‚</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-0064bdc3b1e3fd19d4240f375fecce8a_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471/?p=40">https://www.bilibili.com/video/av73342471/?p=40www.bilibili.com/video/av73342471/?p=40</a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=41">https://www.bilibili.com/video/av73342471?p=41www.bilibili.com/video/av73342471?p=41</a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=42">https://www.bilibili.com/video/av73342471?p=42www.bilibili.com/video/av73342471?p=42</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>14-å‡½æ•°å¯¹è±¡å’Œé—­åŒ…</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/14_%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%E5%92%8C%E9%97%AD%E5%8C%85/</url>
    <content><![CDATA[<h2 id="ä¸€-å‡½æ•°å¯¹è±¡"><a href="#ä¸€-å‡½æ•°å¯¹è±¡" class="headerlink" title="ä¸€ å‡½æ•°å¯¹è±¡"></a>ä¸€ å‡½æ•°å¯¹è±¡</h2><p>å‡½æ•°å¯¹è±¡æŒ‡çš„æ˜¯å‡½æ•°å¯ä»¥è¢«å½“åšâ€™æ•°æ®â€™æ¥å¤„ç†ï¼Œå…·ä½“å¯ä»¥åˆ†ä¸ºå››ä¸ªæ–¹é¢çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å¦‚ä¸‹</p>
<p><img src="https://pic2.zhimg.com/80/v2-610f07da055d449976326f5e234075d9_720w.jpg" alt="img"></p>
<h2 id="1-1-å‡½æ•°å¯ä»¥è¢«å¼•ç”¨"><a href="#1-1-å‡½æ•°å¯ä»¥è¢«å¼•ç”¨" class="headerlink" title="1.1 å‡½æ•°å¯ä»¥è¢«å¼•ç”¨"></a>1.1 å‡½æ•°å¯ä»¥è¢«å¼•ç”¨</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">x,y</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> x+y</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func=add</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<h2 id="1-2-å‡½æ•°å¯ä»¥ä½œä¸ºå®¹å™¨ç±»å‹çš„å…ƒç´ "><a href="#1-2-å‡½æ•°å¯ä»¥ä½œä¸ºå®¹å™¨ç±»å‹çš„å…ƒç´ " class="headerlink" title="1.2 å‡½æ•°å¯ä»¥ä½œä¸ºå®¹å™¨ç±»å‹çš„å…ƒç´ "></a>1.2 å‡½æ•°å¯ä»¥ä½œä¸ºå®¹å™¨ç±»å‹çš„å…ƒç´ </h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic=&#123;<span class="string">&#x27;add&#x27;</span>:add,<span class="string">&#x27;max&#x27;</span>:<span class="built_in">max</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic</span><br><span class="line">&#123;<span class="string">&#x27;add&#x27;</span>: &lt;function add at <span class="number">0x100661e18</span>&gt;, <span class="string">&#x27;max&#x27;</span>: &lt;built-<span class="keyword">in</span> function <span class="built_in">max</span>&gt;&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic[<span class="string">&#x27;add&#x27;</span>](<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<h2 id="1-3-å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥å¦å¤–ä¸€ä¸ªå‡½æ•°"><a href="#1-3-å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥å¦å¤–ä¸€ä¸ªå‡½æ•°" class="headerlink" title="1.3 å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥å¦å¤–ä¸€ä¸ªå‡½æ•°"></a>1.3 å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥å¦å¤–ä¸€ä¸ªå‡½æ•°</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">x,y,func</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">return</span> func(x,y)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(<span class="number">1</span>,<span class="number">2</span>,add)</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<h2 id="1-4-å‡½æ•°çš„è¿”å›å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°"><a href="#1-4-å‡½æ•°çš„è¿”å›å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°" class="headerlink" title="1.4 å‡½æ•°çš„è¿”å›å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°"></a>1.4 å‡½æ•°çš„è¿”å›å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span>():</span> </span><br><span class="line">     <span class="keyword">return</span> add </span><br><span class="line">func=bar() </span><br><span class="line">func(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="number">3</span> </span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-3a92b83b2c4ab23b0e237f071b6bcd7e_720w.jpg" alt="img"></p>
<h2 id="äºŒ-é—­åŒ…å‡½æ•°"><a href="#äºŒ-é—­åŒ…å‡½æ•°" class="headerlink" title="äºŒ é—­åŒ…å‡½æ•°"></a>äºŒ é—­åŒ…å‡½æ•°</h2><h2 id="2-1-é—­ä¸åŒ…"><a href="#2-1-é—­ä¸åŒ…" class="headerlink" title="2.1 é—­ä¸åŒ…"></a>2.1 é—­ä¸åŒ…</h2><p>åŸºäºå‡½æ•°å¯¹è±¡çš„æ¦‚å¿µï¼Œå¯ä»¥å°†å‡½æ•°è¿”å›åˆ°ä»»æ„ä½ç½®å»è°ƒç”¨ï¼Œä½†ä½œç”¨åŸŸçš„å…³ç³»æ˜¯åœ¨å®šä¹‰å®Œå‡½æ•°æ—¶å°±å·²ç»è¢«ç¡®å®šäº†çš„ï¼Œä¸å‡½æ•°çš„è°ƒç”¨ä½ç½®æ— å…³ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f2</span>():</span></span><br><span class="line">        <span class="built_in">print</span>(x)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> f2</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f3</span>():</span></span><br><span class="line">    x=<span class="number">3</span></span><br><span class="line">    f2=f1() <span class="comment">#è°ƒç”¨f1()è¿”å›å‡½æ•°f2</span></span><br><span class="line">    f2() <span class="comment">#éœ€è¦æŒ‰ç…§å‡½æ•°å®šä¹‰æ—¶çš„ä½œç”¨å…³ç³»å»æ‰§è¡Œï¼Œä¸è°ƒç”¨ä½ç½®æ— å…³</span></span><br><span class="line"></span><br><span class="line">f3() <span class="comment">#ç»“æœä¸º1</span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå°±æ˜¯è¯´å‡½æ•°è¢«å½“åšæ•°æ®å¤„ç†æ—¶ï¼Œå§‹ç»ˆä»¥è‡ªå¸¦çš„ä½œç”¨åŸŸä¸ºå‡†ã€‚è‹¥å†…åµŒå‡½æ•°åŒ…å«å¯¹å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸï¼ˆè€Œéå…¨å±€ä½œç”¨åŸŸï¼‰ä¸­å˜é‡çš„å¼•ç”¨ï¼Œé‚£ä¹ˆè¯¥â€™å†…åµŒå‡½æ•°â€™å°±æ˜¯é—­åŒ…å‡½æ•°ï¼Œç®€ç§°é—­åŒ…(Closures)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x=<span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span>():</span></span><br><span class="line">    x=<span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span>():</span></span><br><span class="line">        <span class="built_in">print</span>(x)</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line">func=outer()</span><br><span class="line">func() <span class="comment"># ç»“æœä¸º2</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-f8b3a3ff993a95277b4ec5b1514cb103_720w.jpg" alt="img"></p>
<p>å¯ä»¥é€šè¿‡å‡½æ•°çš„<strong>closure</strong>å±æ€§ï¼ŒæŸ¥çœ‹åˆ°é—­åŒ…å‡½æ•°æ‰€åŒ…è£¹çš„å¤–éƒ¨å˜é‡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>func.__closure__</span><br><span class="line">(&lt;cell at <span class="number">0x10212af78</span>: <span class="built_in">int</span> <span class="built_in">object</span> at <span class="number">0x10028cca0</span>&gt;,)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>func.__closure__[<span class="number">0</span>].cell_contents</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>

<p>â€œé—­â€ä»£è¡¨å‡½æ•°æ˜¯å†…éƒ¨çš„ï¼Œâ€œåŒ…â€ä»£è¡¨å‡½æ•°å¤–â€™åŒ…è£¹â€™ç€å¯¹å¤–å±‚ä½œç”¨åŸŸçš„å¼•ç”¨ã€‚å› è€Œæ— è®ºåœ¨ä½•å¤„è°ƒç”¨é—­åŒ…å‡½æ•°ï¼Œä½¿ç”¨çš„ä»ç„¶æ˜¯åŒ…è£¹åœ¨å…¶å¤–å±‚çš„å˜é‡ã€‚</p>
<p><img src="https://pic4.zhimg.com/80/v2-c6e623206aa2c60c1036f30656ffbbaf_720w.jpg" alt="img"></p>
<h2 id="2-2-é—­åŒ…çš„ç”¨é€”"><a href="#2-2-é—­åŒ…çš„ç”¨é€”" class="headerlink" title="2.2 é—­åŒ…çš„ç”¨é€”"></a>2.2 é—­åŒ…çš„ç”¨é€”</h2><p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸¤ç§ä¸ºå‡½æ•°ä½“ä¼ å€¼çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯ç›´æ¥å°†å€¼ä»¥å‚æ•°çš„å½¢å¼ä¼ å…¥ï¼Œå¦å¤–ä¸€ç§å°±æ˜¯å°†å€¼åŒ…ç»™å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–¹å¼ä¸€ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">url</span>):</span></span><br><span class="line">    <span class="keyword">return</span> requests.get(url).text</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–¹å¼äºŒï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">page</span>(<span class="params">url</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>():</span></span><br><span class="line">        <span class="keyword">return</span> requests.get(url).text</span><br><span class="line">    <span class="keyword">return</span> get</span><br></pre></td></tr></table></figure>

<p>æç¤ºï¼šrequestsæ¨¡å—æ˜¯ç”¨æ¥æ¨¡æ‹Ÿæµè§ˆå™¨å‘ç½‘ç«™å‘é€è¯·æ±‚å¹¶å°†é¡µé¢å†…å®¹ä¸‹è½½åˆ°æœ¬åœ°ï¼Œéœ€è¦äº‹å…ˆå®‰è£…ï¼špip3 install requests</p>
<p><img src="https://pic1.zhimg.com/80/v2-25aba810eb15ef9e3d59241516b05358_720w.jpg" alt="img"></p>
<p>å¯¹æ¯”ä¸¤ç§æ–¹å¼ï¼Œæ–¹å¼ä¸€åœ¨ä¸‹è½½åŒä¸€é¡µé¢æ—¶éœ€è¦é‡å¤ä¼ å…¥urlï¼Œè€Œæ–¹å¼äºŒåªéœ€è¦ä¼ ä¸€æ¬¡å€¼ï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªåŒ…å«æŒ‡å®šurlçš„é—­åŒ…å‡½æ•°ï¼Œä»¥åè°ƒç”¨è¯¥é—­åŒ…å‡½æ•°æ— éœ€å†ä¼ url</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ–¹å¼ä¸€ä¸‹è½½åŒä¸€é¡µé¢</span></span><br><span class="line">get(<span class="string">&#x27;https://www.python.org&#x27;</span>)</span><br><span class="line">get(<span class="string">&#x27;https://www.python.org&#x27;</span>)</span><br><span class="line">get(<span class="string">&#x27;https://www.python.org&#x27;</span>)</span><br><span class="line">â€¦â€¦</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹å¼äºŒä¸‹è½½åŒä¸€é¡µé¢</span></span><br><span class="line">python=page(<span class="string">&#x27;https://www.python.org&#x27;</span>)</span><br><span class="line">python()</span><br><span class="line">python()</span><br><span class="line">python()</span><br><span class="line">â€¦â€¦</span><br></pre></td></tr></table></figure>

<p>é—­åŒ…å‡½æ•°çš„è¿™ç§ç‰¹æ€§æœ‰æ—¶åˆç§°ä¸ºæƒ°æ€§è®¡ç®—ã€‚ä½¿ç”¨å°†å€¼åŒ…ç»™å‡½æ•°çš„æ–¹å¼ï¼Œåœ¨æ¥ä¸‹æ¥çš„è£…é¥°å™¨ä¸­ä¹Ÿå°†å¤§æœ‰ç”¨å¤„</p>
<p><img src="https://pic3.zhimg.com/80/v2-fbcde5e64980428d3864f2c389ce3f3e_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p>å‡½æ•°å¯¹è±¡ï¼š</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=43">https://www.bilibili.com/video/av73342471?p=43www.bilibili.com/video/av73342471?p=43</a></p>
<p>é—­åŒ…å‡½æ•°ï¼š</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=46">https://www.bilibili.com/video/av73342471?p=46www.bilibili.com/video/av73342471?p=46</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>17-ç”Ÿæˆå™¨</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/17_%E7%94%9F%E6%88%90%E5%99%A8/</url>
    <content><![CDATA[<h2 id="ä¸€-ç”Ÿæˆå™¨ä¸yield"><a href="#ä¸€-ç”Ÿæˆå™¨ä¸yield" class="headerlink" title="ä¸€ ç”Ÿæˆå™¨ä¸yield"></a>ä¸€ ç”Ÿæˆå™¨ä¸yield</h2><p><img src="https://pic2.zhimg.com/80/v2-2c92ed3ae0da1fd192339be9abc973a1_720w.jpg" alt="img"></p>
<p>è‹¥å‡½æ•°ä½“åŒ…å«yieldå…³é”®å­—ï¼Œå†è°ƒç”¨å‡½æ•°ï¼Œå¹¶ä¸ä¼šæ‰§è¡Œå‡½æ•°ä½“ä»£ç ï¼Œå¾—åˆ°çš„è¿”å›å€¼å³ç”Ÿæˆå™¨å¯¹è±¡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">my_range</span>(<span class="params">start,stop,step=<span class="number">1</span></span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;start...&#x27;</span>)</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">while</span> start &lt; stop:</span><br><span class="line"><span class="meta">... </span>        <span class="keyword">yield</span> start</span><br><span class="line"><span class="meta">... </span>        start+=step</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;end...&#x27;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g=my_range(<span class="number">0</span>,<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g</span><br><span class="line">&lt;generator <span class="built_in">object</span> my_range at <span class="number">0x104105678</span>&gt;</span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆå™¨å†…ç½®æœ‰__iter__å’Œ__next__æ–¹æ³•ï¼Œæ‰€ä»¥ç”Ÿæˆå™¨æœ¬èº«å°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.__iter__</span><br><span class="line">&lt;method-wrapper <span class="string">&#x27;__iter__&#x27;</span> of generator <span class="built_in">object</span> at <span class="number">0x1037d2af0</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.__next__</span><br><span class="line">&lt;method-wrapper <span class="string">&#x27;__next__&#x27;</span> of generator <span class="built_in">object</span> at <span class="number">0x1037d2af0</span>&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-31590362f23201814f45879db5dd6a51_720w.jpg" alt="img"></p>
<p>å› è€Œæˆ‘ä»¬å¯ä»¥ç”¨next(ç”Ÿæˆå™¨)è§¦å‘ç”Ÿæˆå™¨æ‰€å¯¹åº”å‡½æ•°çš„æ‰§è¡Œï¼Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g) <span class="comment"># è§¦å‘å‡½æ•°æ‰§è¡Œç›´åˆ°é‡åˆ°yieldåˆ™åœæ­¢,å°†yieldåçš„å€¼è¿”å›ï¼Œå¹¶åœ¨å½“å‰ä½ç½®æŒ‚èµ·å‡½æ•°</span></span><br><span class="line">start...</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g) <span class="comment"># å†æ¬¡è°ƒç”¨next(g)ï¼Œå‡½æ•°ä»ä¸Šæ¬¡æš‚åœçš„ä½ç½®ç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°é‡æ–°é‡åˆ°yield...</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g) <span class="comment"># å‘¨è€Œå¤å§‹...</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g) <span class="comment"># è§¦å‘å‡½æ•°æ‰§è¡Œæ²¡æœ‰é‡åˆ°yieldåˆ™æ— å€¼è¿”å›ï¼Œå³å–å€¼å®Œæ¯•æŠ›å‡ºå¼‚å¸¸ç»“æŸè¿­ä»£</span></span><br><span class="line">end...</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">StopIteration</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-fa04ec0eaa5bd7bb8804908ad7b88369_720w.jpg" alt="img"></p>
<p>æ—¢ç„¶ç”Ÿæˆå™¨å¯¹è±¡å±äºè¿­ä»£å™¨ï¼Œé‚£ä¹ˆå¿…ç„¶å¯ä»¥ä½¿ç”¨forå¾ªç¯è¿­ä»£ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> countdown(<span class="number">3</span>):</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">countdown start</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">Done!</span><br></pre></td></tr></table></figure>

<p>æœ‰äº†yieldå…³é”®å­—ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ç§è‡ªå®šä¹‰è¿­ä»£å™¨çš„å®ç°æ–¹å¼ã€‚yieldå¯ä»¥ç”¨äºè¿”å›å€¼ï¼Œä½†ä¸åŒäºreturnï¼Œå‡½æ•°ä¸€æ—¦é‡åˆ°returnå°±ç»“æŸäº†ï¼Œè€Œyieldå¯ä»¥ä¿å­˜å‡½æ•°çš„è¿è¡ŒçŠ¶æ€æŒ‚èµ·å‡½æ•°ï¼Œç”¨æ¥è¿”å›å¤šæ¬¡å€¼</p>
<p><img src="https://pic4.zhimg.com/80/v2-024f3ac36393f784226497828d53eebf_720w.jpg" alt="img"></p>
<h2 id="äºŒ-yieldè¡¨è¾¾å¼åº”ç”¨"><a href="#äºŒ-yieldè¡¨è¾¾å¼åº”ç”¨" class="headerlink" title="äºŒ yieldè¡¨è¾¾å¼åº”ç”¨"></a>äºŒ yieldè¡¨è¾¾å¼åº”ç”¨</h2><p>åœ¨å‡½æ•°å†…å¯ä»¥é‡‡ç”¨è¡¨è¾¾å¼å½¢å¼çš„yield</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">eater</span>():</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;Ready to eat&#x27;</span>)</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="meta">... </span>        food=<span class="keyword">yield</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;get the food: %s, and start to eat&#x27;</span> %food)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥æ‹¿åˆ°å‡½æ•°çš„ç”Ÿæˆå™¨å¯¹è±¡æŒç»­ä¸ºå‡½æ•°ä½“sendå€¼ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>g=eater() <span class="comment"># å¾—åˆ°ç”Ÿæˆå™¨å¯¹è±¡</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g</span><br><span class="line">&lt;generator <span class="built_in">object</span> eater at <span class="number">0x101b6e2b0</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(e) <span class="comment"># éœ€è¦äº‹å…ˆâ€åˆå§‹åŒ–â€ä¸€æ¬¡ï¼Œè®©å‡½æ•°æŒ‚èµ·åœ¨food=yieldï¼Œç­‰å¾…è°ƒç”¨g.send()æ–¹æ³•ä¸ºå…¶ä¼ å€¼</span></span><br><span class="line">Ready to eat</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.send(<span class="string">&#x27;åŒ…å­&#x27;</span>)</span><br><span class="line">get the food: åŒ…å­, <span class="keyword">and</span> start to eat</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g.send(<span class="string">&#x27;é¸¡è…¿&#x27;</span>)</span><br><span class="line">get the food: é¸¡è…¿, <span class="keyword">and</span> start to eat</span><br></pre></td></tr></table></figure>

<p>é’ˆå¯¹è¡¨è¾¾å¼å½¢å¼çš„yieldï¼Œç”Ÿæˆå™¨å¯¹è±¡å¿…é¡»äº‹å…ˆè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼Œè®©å‡½æ•°æŒ‚èµ·åœ¨food&#x3D;yieldçš„ä½ç½®ï¼Œç­‰å¾…è°ƒç”¨g.send()æ–¹æ³•ä¸ºå‡½æ•°ä½“ä¼ å€¼ï¼Œg.send(None)ç­‰åŒäºnext(g)ã€‚</p>
<p><img src="https://pic1.zhimg.com/80/v2-277c3fe7374520dba8973dea02474790_720w.jpg" alt="img"></p>
<p> æˆ‘ä»¬å¯ä»¥ç¼–å†™è£…é¥°å™¨æ¥å®Œæˆä¸ºæ‰€æœ‰è¡¨è¾¾å¼å½¢å¼yieldå¯¹åº”ç”Ÿæˆå™¨çš„åˆå§‹åŒ–æ“ä½œï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args,**kwargs</span>):</span></span><br><span class="line">        g=func(*args,**kwargs)</span><br><span class="line">        <span class="built_in">next</span>(g)</span><br><span class="line">        <span class="keyword">return</span> g</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@init</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">eater</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Ready to eat&#x27;</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        food=<span class="keyword">yield</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;get the food: %s, and start to eat&#x27;</span> %food)</span><br></pre></td></tr></table></figure>

<p>è¡¨è¾¾å¼å½¢å¼çš„yieldä¹Ÿå¯ä»¥ç”¨äºè¿”å›å¤šæ¬¡å€¼ï¼Œå³<code>å˜é‡å=yield å€¼</code>çš„å½¢å¼ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">eater</span>():</span></span><br><span class="line"><span class="meta">... </span>    <span class="built_in">print</span>(<span class="string">&#x27;Ready to eat&#x27;</span>)</span><br><span class="line"><span class="meta">... </span>    food_list=[]</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="meta">... </span>        food=<span class="keyword">yield</span> food_list</span><br><span class="line"><span class="meta">... </span>        food_list.append(food)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e=eater()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(e)</span><br><span class="line">Ready to eat</span><br><span class="line">[]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e.send(<span class="string">&#x27;è’¸ç¾Šç¾”&#x27;</span>)</span><br><span class="line">[<span class="string">&#x27;è’¸ç¾Šç¾”&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e.send(<span class="string">&#x27;è’¸ç†ŠæŒ&#x27;</span>)</span><br><span class="line">[<span class="string">&#x27;è’¸ç¾Šç¾”&#x27;</span>, <span class="string">&#x27;è’¸ç†ŠæŒ&#x27;</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e.send(<span class="string">&#x27;è’¸é¹¿å°¾å„¿&#x27;</span>)</span><br><span class="line">[<span class="string">&#x27;è’¸ç¾Šç¾”&#x27;</span>, <span class="string">&#x27;è’¸ç†ŠæŒ&#x27;</span>, <span class="string">&#x27;è’¸é¹¿å°¾å„¿&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰-ä¸‰å…ƒè¡¨è¾¾å¼ã€åˆ—è¡¨ç”Ÿæˆå¼ã€ç”Ÿæˆå™¨è¡¨è¾¾å¼"><a href="#ä¸‰-ä¸‰å…ƒè¡¨è¾¾å¼ã€åˆ—è¡¨ç”Ÿæˆå¼ã€ç”Ÿæˆå™¨è¡¨è¾¾å¼" class="headerlink" title="ä¸‰ ä¸‰å…ƒè¡¨è¾¾å¼ã€åˆ—è¡¨ç”Ÿæˆå¼ã€ç”Ÿæˆå™¨è¡¨è¾¾å¼"></a>ä¸‰ ä¸‰å…ƒè¡¨è¾¾å¼ã€åˆ—è¡¨ç”Ÿæˆå¼ã€ç”Ÿæˆå™¨è¡¨è¾¾å¼</h2><h2 id="3-1-ä¸‰å…ƒè¡¨è¾¾å¼"><a href="#3-1-ä¸‰å…ƒè¡¨è¾¾å¼" class="headerlink" title="3.1 ä¸‰å…ƒè¡¨è¾¾å¼"></a>3.1 ä¸‰å…ƒè¡¨è¾¾å¼</h2><p>ä¸‰å…ƒè¡¨è¾¾å¼æ˜¯pythonä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ç§ç®€åŒ–ä»£ç çš„è§£å†³æ–¹æ¡ˆï¼Œè¯­æ³•å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">res = æ¡ä»¶æˆç«‹æ—¶è¿”å›çš„å€¼ <span class="keyword">if</span> æ¡ä»¶ <span class="keyword">else</span> æ¡ä»¶ä¸æˆç«‹æ—¶è¿”å›çš„å€¼</span><br></pre></td></tr></table></figure>

<p>é’ˆå¯¹ä¸‹è¿°åœºæ™¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">max2</span>(<span class="params">x,y</span>):</span></span><br><span class="line">    <span class="keyword">if</span> x &gt; y:</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line">res = max2(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>ç”¨ä¸‰å…ƒè¡¨è¾¾å¼å¯ä»¥ä¸€è¡Œè§£å†³</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x=<span class="number">1</span></span><br><span class="line">y=<span class="number">2</span></span><br><span class="line">res = x <span class="keyword">if</span> x &gt; y <span class="keyword">else</span> y <span class="comment"># ä¸‰å…ƒè¡¨è¾¾å¼</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-6b5e335f9c2baca1a9d076721c672b19_720w.jpg" alt="img"></p>
<h2 id="3-2-åˆ—è¡¨ç”Ÿæˆå¼"><a href="#3-2-åˆ—è¡¨ç”Ÿæˆå¼" class="headerlink" title="3.2 åˆ—è¡¨ç”Ÿæˆå¼"></a>3.2 åˆ—è¡¨ç”Ÿæˆå¼</h2><p>åˆ—è¡¨ç”Ÿæˆå¼æ˜¯pythonä¸ºæˆ‘ä»¬æä¾›çš„ä¸€ç§ç®€åŒ–ä»£ç çš„è§£å†³æ–¹æ¡ˆï¼Œç”¨æ¥å¿«é€Ÿç”Ÿæˆåˆ—è¡¨ï¼Œè¯­æ³•å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[expression <span class="keyword">for</span> item1 <span class="keyword">in</span> iterable1 <span class="keyword">if</span> condition1</span><br><span class="line"><span class="keyword">for</span> item2 <span class="keyword">in</span> iterable2 <span class="keyword">if</span> condition2</span><br><span class="line">...</span><br><span class="line"><span class="keyword">for</span> itemN <span class="keyword">in</span> iterableN <span class="keyword">if</span> conditionN</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç±»ä¼¼äº</span></span><br><span class="line">res=[]</span><br><span class="line"><span class="keyword">for</span> item1 <span class="keyword">in</span> iterable1:</span><br><span class="line">    <span class="keyword">if</span> condition1:</span><br><span class="line">        <span class="keyword">for</span> item2 <span class="keyword">in</span> iterable2:</span><br><span class="line">            <span class="keyword">if</span> condition2</span><br><span class="line">                ...</span><br><span class="line">                <span class="keyword">for</span> itemN <span class="keyword">in</span> iterableN:</span><br><span class="line">                    <span class="keyword">if</span> conditionN:</span><br><span class="line">                        res.append(expression)</span><br></pre></td></tr></table></figure>

<p>é’ˆå¯¹ä¸‹è¿°åœºæ™¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">egg_list=[]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    egg_list.append(<span class="string">&#x27;é¸¡è›‹%s&#x27;</span> %i)</span><br></pre></td></tr></table></figure>

<p>ç”¨åˆ—è¡¨ç”Ÿæˆå¼å¯ä»¥ä¸€è¡Œè§£å†³</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">egg_list=[<span class="string">&#x27;é¸¡è›‹%s&#x27;</span> %i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-d9640f4c3f1c13bbd78e7cf6de6dc316_720w.jpg" alt="img"></p>
<h2 id="3-3-ç”Ÿæˆå™¨è¡¨è¾¾å¼"><a href="#3-3-ç”Ÿæˆå™¨è¡¨è¾¾å¼" class="headerlink" title="3.3 ç”Ÿæˆå™¨è¡¨è¾¾å¼"></a>3.3 ç”Ÿæˆå™¨è¡¨è¾¾å¼</h2><p>åˆ›å»ºä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯è°ƒç”¨å¸¦yieldå…³é”®å­—çš„å‡½æ•°ï¼Œå¦ä¸€ç§å°±æ˜¯ç”Ÿæˆå™¨è¡¨è¾¾å¼ï¼Œä¸åˆ—è¡¨ç”Ÿæˆå¼çš„è¯­æ³•æ ¼å¼ç›¸åŒï¼Œåªéœ€è¦å°†[]æ¢æˆ()ï¼Œå³ï¼š</p>
<p><img src="https://pic3.zhimg.com/80/v2-70257d333a3e9a49704c10982ce48856_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ï¼ˆexpression <span class="keyword">for</span> item <span class="keyword">in</span> iterable <span class="keyword">if</span> conditionï¼‰</span><br></pre></td></tr></table></figure>

<p>å¯¹æ¯”åˆ—è¡¨ç”Ÿæˆå¼è¿”å›çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œç”Ÿæˆå™¨è¡¨è¾¾å¼è¿”å›çš„æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>[x*x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>)]</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">4</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g=(x*x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g</span><br><span class="line">&lt;generator <span class="built_in">object</span> &lt;genexpr&gt; at <span class="number">0x101be0ba0</span>&gt;</span><br></pre></td></tr></table></figure>

<p>å¯¹æ¯”åˆ—è¡¨ç”Ÿæˆå¼ï¼Œç”Ÿæˆå™¨è¡¨è¾¾å¼çš„ä¼˜ç‚¹è‡ªç„¶æ˜¯èŠ‚çœå†…å­˜ï¼ˆä¸€æ¬¡åªäº§ç”Ÿä¸€ä¸ªå€¼åœ¨å†…å­˜ä¸­ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g)</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(g) <span class="comment">#æŠ›å‡ºå¼‚å¸¸StopIteration</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬è¦è¯»å–ä¸€ä¸ªå¤§æ–‡ä»¶çš„å­—èŠ‚æ•°ï¼Œåº”è¯¥åŸºäºç”Ÿæˆå™¨è¡¨è¾¾å¼çš„æ–¹å¼å®Œæˆ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;db.txt&#x27;</span>,<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    nums=(<span class="built_in">len</span>(line) <span class="keyword">for</span> line <span class="keyword">in</span> f)</span><br><span class="line">    total_size=<span class="built_in">sum</span>(nums) <span class="comment"># ä¾æ¬¡æ‰§è¡Œnext(nums)ï¼Œç„¶åç´¯åŠ åˆ°ä¸€èµ·å¾—åˆ°ç»“æœ=</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-f0a061871b663d857e13ada7c10b31ac_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=52">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=52<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=53">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=53<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=54">https://www.bilibili.com/video/av73342471?p=54www.bilibili.com/video/av73342471?p=54</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>16-è¿­ä»£å™¨</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/16_%E8%BF%AD%E4%BB%A3%E5%99%A8/</url>
    <content><![CDATA[<h2 id="ä¸€-è¿­ä»£å™¨ä»‹ç»"><a href="#ä¸€-è¿­ä»£å™¨ä»‹ç»" class="headerlink" title="ä¸€ è¿­ä»£å™¨ä»‹ç»"></a>ä¸€ è¿­ä»£å™¨ä»‹ç»</h2><p>è¿­ä»£å™¨å³ç”¨æ¥è¿­ä»£å–å€¼çš„å·¥å…·ï¼Œè€Œè¿­ä»£æ˜¯é‡å¤åé¦ˆè¿‡ç¨‹çš„æ´»åŠ¨ï¼Œå…¶ç›®çš„é€šå¸¸æ˜¯ä¸ºäº†é€¼è¿‘æ‰€éœ€çš„ç›®æ ‡æˆ–ç»“æœï¼Œæ¯ä¸€æ¬¡å¯¹è¿‡ç¨‹çš„é‡å¤ç§°ä¸ºä¸€æ¬¡â€œè¿­ä»£â€ï¼Œè€Œæ¯ä¸€æ¬¡è¿­ä»£å¾—åˆ°çš„ç»“æœä¼šä½œä¸ºä¸‹ä¸€æ¬¡è¿­ä»£çš„åˆå§‹å€¼,å•çº¯çš„é‡å¤å¹¶ä¸æ˜¯è¿­ä»£</p>
<p><img src="https://pic4.zhimg.com/80/v2-565373773a847faa7a97a79b8851d2db_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg = <span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    <span class="built_in">print</span>(msg)</span><br></pre></td></tr></table></figure>

<p>ä¸‹è¿°whileå¾ªç¯æ‰æ˜¯ä¸€ä¸ªè¿­ä»£è¿‡ç¨‹ï¼Œä¸ä»…æ»¡è¶³é‡å¤ï¼Œè€Œä¸”ä»¥æ¯æ¬¡é‡æ–°èµ‹å€¼åçš„indexå€¼ä½œä¸ºä¸‹ä¸€æ¬¡å¾ªç¯ä¸­æ–°çš„ç´¢å¼•è¿›è¡Œå–å€¼ï¼Œåå¤è¿­ä»£ï¼Œæœ€ç»ˆå¯ä»¥å–å°½åˆ—è¡¨ä¸­çš„å€¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">goods=[<span class="string">&#x27;mac&#x27;</span>,<span class="string">&#x27;lenovo&#x27;</span>,<span class="string">&#x27;acer&#x27;</span>,<span class="string">&#x27;dell&#x27;</span>,<span class="string">&#x27;sony&#x27;</span>]</span><br><span class="line"></span><br><span class="line">index=<span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> index &lt; <span class="built_in">len</span>(goods):</span><br><span class="line">    <span class="built_in">print</span>(goods[index])</span><br><span class="line">    index+=<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-70866f67008dbbd32b1db9a0122e5a85_720w.jpg" alt="img"></p>
<h2 id="1-1-å¯è¿­ä»£å¯¹è±¡"><a href="#1-1-å¯è¿­ä»£å¯¹è±¡" class="headerlink" title="1.1 å¯è¿­ä»£å¯¹è±¡"></a>1.1 å¯è¿­ä»£å¯¹è±¡</h2><p>é€šè¿‡ç´¢å¼•çš„æ–¹å¼è¿›è¡Œè¿­ä»£å–å€¼ï¼Œå®ç°ç®€å•ï¼Œä½†ä»…é€‚ç”¨äºåºåˆ—ç±»å‹ï¼šå­—ç¬¦ä¸²ï¼Œåˆ—è¡¨ï¼Œå…ƒç»„ã€‚å¯¹äºæ²¡æœ‰ç´¢å¼•çš„å­—å…¸ã€é›†åˆç­‰éåºåˆ—ç±»å‹ï¼Œå¿…é¡»æ‰¾åˆ°ä¸€ç§ä¸ä¾èµ–ç´¢å¼•æ¥è¿›è¡Œè¿­ä»£å–å€¼çš„æ–¹å¼ï¼Œè¿™å°±ç”¨åˆ°äº†è¿­ä»£å™¨ã€‚</p>
<p>è¦æƒ³äº†è§£è¿­ä»£å™¨ä¸ºä½•ç‰©ï¼Œå¿…é¡»äº‹å…ˆææ¸…æ¥šä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼šå¯è¿­ä»£å¯¹è±¡(Iterable)ã€‚ä»è¯­æ³•å½¢å¼ä¸Šè®²ï¼Œå†…ç½®æœ‰__iter__æ–¹æ³•çš„å¯¹è±¡éƒ½æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸ã€é›†åˆã€æ‰“å¼€çš„æ–‡ä»¶éƒ½æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;egon&#x27;</span>&#125;.__iter__</span><br><span class="line">&#123;<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;.__iter__</span><br><span class="line">â€¦â€¦</span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-2d426dd7229747e25b7342c4bba5be50_720w.jpg" alt="img"></p>
<h3 id="1-2-è¿­ä»£å™¨å¯¹è±¡"><a href="#1-2-è¿­ä»£å™¨å¯¹è±¡" class="headerlink" title="1.2 è¿­ä»£å™¨å¯¹è±¡"></a>1.2 è¿­ä»£å™¨å¯¹è±¡</h3><p>è°ƒç”¨obj.<strong>iter</strong>()æ–¹æ³•è¿”å›çš„ç»“æœå°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡(Iterator)ã€‚è¿­ä»£å™¨å¯¹è±¡æ˜¯å†…ç½®æœ‰<strong>iter</strong>å’Œ<strong>next</strong>æ–¹æ³•çš„å¯¹è±¡ï¼Œæ‰“å¼€çš„æ–‡ä»¶æœ¬èº«å°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œæ‰§è¡Œè¿­ä»£å™¨å¯¹è±¡.<strong>iter</strong>()æ–¹æ³•å¾—åˆ°çš„ä»ç„¶æ˜¯è¿­ä»£å™¨æœ¬èº«ï¼Œè€Œæ‰§è¡Œè¿­ä»£å™¨.<strong>next</strong>()æ–¹æ³•å°±ä¼šè®¡ç®—å‡ºè¿­ä»£å™¨ä¸­çš„ä¸‹ä¸€ä¸ªå€¼ã€‚ è¿­ä»£å™¨æ˜¯Pythonæä¾›çš„ä¸€ç§ç»Ÿä¸€çš„ã€ä¸ä¾èµ–äºç´¢å¼•çš„è¿­ä»£å–å€¼æ–¹å¼ï¼Œåªè¦å­˜åœ¨å¤šä¸ªâ€œå€¼â€ï¼Œæ— è®ºåºåˆ—ç±»å‹è¿˜æ˜¯éåºåˆ—ç±»å‹éƒ½å¯ä»¥æŒ‰ç…§è¿­ä»£å™¨çš„æ–¹å¼å–å€¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125; <span class="comment"># å¯è¿­ä»£å¯¹è±¡s</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>i=<span class="built_in">iter</span>(s)  <span class="comment"># æœ¬è´¨å°±æ˜¯åœ¨è°ƒç”¨s.__iter__(),è¿”å›sçš„è¿­ä»£å™¨å¯¹è±¡iï¼Œ</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(i) <span class="comment"># æœ¬è´¨å°±æ˜¯åœ¨è°ƒç”¨i.__next__()</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(i)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(i)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">next</span>(i)  <span class="comment">#æŠ›å‡ºStopIterationçš„å¼‚å¸¸ï¼Œä»£è¡¨æ— å€¼å¯å–ï¼Œè¿­ä»£ç»“æŸ</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-737e0d369eb76a990b772d9666e25a4f_720w.jpg" alt="img"></p>
<h2 id="äºŒ-forå¾ªç¯åŸç†"><a href="#äºŒ-forå¾ªç¯åŸç†" class="headerlink" title="äºŒ forå¾ªç¯åŸç†"></a>äºŒ forå¾ªç¯åŸç†</h2><p>æœ‰äº†è¿­ä»£å™¨åï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ä¸ä¾èµ–ç´¢å¼•è¿­ä»£å–å€¼äº†ï¼Œä½¿ç”¨whileå¾ªç¯çš„å®ç°æ–¹å¼å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">goods=[<span class="string">&#x27;mac&#x27;</span>,<span class="string">&#x27;lenovo&#x27;</span>,<span class="string">&#x27;acer&#x27;</span>,<span class="string">&#x27;dell&#x27;</span>,<span class="string">&#x27;sony&#x27;</span>]</span><br><span class="line">i=<span class="built_in">iter</span>(goods) <span class="comment">#æ¯æ¬¡éƒ½éœ€è¦é‡æ–°è·å–ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">next</span>(i))</span><br><span class="line">    <span class="keyword">except</span> StopIteration: <span class="comment">#æ•æ‰å¼‚å¸¸ç»ˆæ­¢å¾ªç¯</span></span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>

<p>forå¾ªç¯åˆç§°ä¸ºè¿­ä»£å¾ªç¯ï¼Œinåå¯ä»¥è·Ÿä»»æ„å¯è¿­ä»£å¯¹è±¡ï¼Œä¸Šè¿°whileå¾ªç¯å¯ä»¥ç®€å†™ä¸º</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">goods=[<span class="string">&#x27;mac&#x27;</span>,<span class="string">&#x27;lenovo&#x27;</span>,<span class="string">&#x27;acer&#x27;</span>,<span class="string">&#x27;dell&#x27;</span>,<span class="string">&#x27;sony&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> goods:   </span><br><span class="line">    <span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure>

<p>for å¾ªç¯åœ¨å·¥ä½œæ—¶ï¼Œé¦–å…ˆä¼šè°ƒç”¨å¯è¿­ä»£å¯¹è±¡goodså†…ç½®çš„<strong>iter</strong>æ–¹æ³•æ‹¿åˆ°ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œç„¶åå†è°ƒç”¨è¯¥è¿­ä»£å™¨å¯¹è±¡çš„<strong>next</strong>æ–¹æ³•å°†å–åˆ°çš„å€¼èµ‹ç»™item,æ‰§è¡Œå¾ªç¯ä½“å®Œæˆä¸€æ¬¡å¾ªç¯ï¼Œå‘¨è€Œå¤å§‹ï¼Œç›´åˆ°æ•æ‰StopIterationå¼‚å¸¸ï¼Œç»“æŸè¿­ä»£ã€‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-c64b3c28a2b8977bfce7621078da63b9_720w.jpg" alt="img"></p>
<h2 id="ä¸‰-è¿­ä»£å™¨çš„ä¼˜ç¼ºç‚¹"><a href="#ä¸‰-è¿­ä»£å™¨çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¸‰ è¿­ä»£å™¨çš„ä¼˜ç¼ºç‚¹"></a>ä¸‰ è¿­ä»£å™¨çš„ä¼˜ç¼ºç‚¹</h2><p>åŸºäºç´¢å¼•çš„è¿­ä»£å–å€¼ï¼Œæ‰€æœ‰è¿­ä»£çš„çŠ¶æ€éƒ½ä¿å­˜åœ¨äº†ç´¢å¼•ä¸­ï¼Œè€ŒåŸºäºè¿­ä»£å™¨å®ç°è¿­ä»£çš„æ–¹å¼ä¸å†éœ€è¦ç´¢å¼•ï¼Œæ‰€æœ‰è¿­ä»£çš„çŠ¶æ€å°±ä¿å­˜åœ¨è¿­ä»£å™¨ä¸­ï¼Œç„¶è€Œè¿™ç§å¤„ç†æ–¹å¼ä¼˜ç‚¹ä¸ç¼ºç‚¹å¹¶å­˜ï¼š</p>
<h2 id="3-1-ä¼˜ç‚¹ï¼š"><a href="#3-1-ä¼˜ç‚¹ï¼š" class="headerlink" title="3.1 ä¼˜ç‚¹ï¼š"></a>3.1 ä¼˜ç‚¹ï¼š</h2><p>1ã€ä¸ºåºåˆ—å’Œéåºåˆ—ç±»å‹æä¾›äº†ä¸€ç§ç»Ÿä¸€çš„è¿­ä»£å–å€¼æ–¹å¼ã€‚</p>
<p>2ã€æƒ°æ€§è®¡ç®—ï¼šè¿­ä»£å™¨å¯¹è±¡è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªæ•°æ®æµï¼Œå¯ä»¥åªåœ¨éœ€è¦æ—¶æ‰å»è°ƒç”¨<strong>next</strong>æ¥è®¡ç®—å‡ºä¸€ä¸ªå€¼ï¼Œå°±è¿­ä»£å™¨æœ¬èº«æ¥è¯´ï¼ŒåŒä¸€æ—¶åˆ»åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä¸ªå€¼ï¼Œå› è€Œå¯ä»¥å­˜æ”¾æ— é™å¤§çš„æ•°æ®æµï¼Œè€Œå¯¹äºå…¶ä»–å®¹å™¨ç±»å‹ï¼Œå¦‚åˆ—è¡¨ï¼Œéœ€è¦æŠŠæ‰€æœ‰çš„å…ƒç´ éƒ½å­˜æ”¾äºå†…å­˜ä¸­ï¼Œå—å†…å­˜å¤§å°çš„é™åˆ¶ï¼Œå¯ä»¥å­˜æ”¾çš„å€¼çš„ä¸ªæ•°æ˜¯æœ‰é™çš„ã€‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-c91b05bd30f1abae45ec6867bb5e9625_720w.jpg" alt="img"></p>
<h2 id="3-2-ç¼ºç‚¹ï¼š"><a href="#3-2-ç¼ºç‚¹ï¼š" class="headerlink" title="3.2 ç¼ºç‚¹ï¼š"></a>3.2 ç¼ºç‚¹ï¼š</h2><p>1ã€é™¤éå–å°½ï¼Œå¦åˆ™æ— æ³•è·å–è¿­ä»£å™¨çš„é•¿åº¦</p>
<p>2ã€åªèƒ½å–ä¸‹ä¸€ä¸ªå€¼ï¼Œä¸èƒ½å›åˆ°å¼€å§‹ï¼Œæ›´åƒæ˜¯â€˜ä¸€æ¬¡æ€§çš„â€™ï¼Œè¿­ä»£å™¨äº§ç”Ÿåçš„å”¯ä¸€ç›®æ ‡å°±æ˜¯é‡å¤æ‰§è¡Œnextæ–¹æ³•ç›´åˆ°å€¼å–å°½ï¼Œå¦åˆ™å°±ä¼šåœç•™åœ¨æŸä¸ªä½ç½®ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡è°ƒç”¨nextï¼›è‹¥æ˜¯è¦å†æ¬¡è¿­ä»£åŒä¸ªå¯¹è±¡ï¼Œä½ åªèƒ½é‡æ–°è°ƒç”¨iteræ–¹æ³•å»åˆ›å»ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨å¯¹è±¡ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªæˆ–è€…å¤šä¸ªå¾ªç¯ä½¿ç”¨åŒä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¿…ç„¶åªä¼šæœ‰ä¸€ä¸ªå¾ªç¯èƒ½å–åˆ°å€¼ã€‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-8e0f71376333332d0411bb2199131c6d_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=51">https://www.bilibili.com/video/av73342471?p=51www.bilibili.com/video/av73342471?p=51</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>15-è£…é¥°å™¨</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/15_%E8%A3%85%E9%A5%B0%E5%99%A8/</url>
    <content><![CDATA[<h2 id="ä¸€-è£…é¥°å™¨ä»‹ç»"><a href="#ä¸€-è£…é¥°å™¨ä»‹ç»" class="headerlink" title="ä¸€ è£…é¥°å™¨ä»‹ç»"></a>ä¸€ è£…é¥°å™¨ä»‹ç»</h2><h2 id="1-1-ä¸ºä½•è¦ç”¨è£…é¥°å™¨"><a href="#1-1-ä¸ºä½•è¦ç”¨è£…é¥°å™¨" class="headerlink" title="1.1 ä¸ºä½•è¦ç”¨è£…é¥°å™¨"></a>1.1 ä¸ºä½•è¦ç”¨è£…é¥°å™¨</h2><p><img src="https://pic3.zhimg.com/80/v2-5f0bd90a1428a4b373be52c22f7d871a_720w.jpg" alt="img"></p>
<p>è½¯ä»¶çš„è®¾è®¡åº”è¯¥éµå¾ªå¼€æ”¾å°é—­åŸåˆ™ï¼Œå³å¯¹æ‰©å±•æ˜¯å¼€æ”¾çš„ï¼Œè€Œå¯¹ä¿®æ”¹æ˜¯å°é—­çš„ã€‚å¯¹æ‰©å±•å¼€æ”¾ï¼Œæ„å‘³ç€æœ‰æ–°çš„éœ€æ±‚æˆ–å˜åŒ–æ—¶ï¼Œå¯ä»¥å¯¹ç°æœ‰ä»£ç è¿›è¡Œæ‰©å±•ï¼Œä»¥é€‚åº”æ–°çš„æƒ…å†µã€‚å¯¹ä¿®æ”¹å°é—­ï¼Œæ„å‘³ç€å¯¹è±¡ä¸€æ—¦è®¾è®¡å®Œæˆï¼Œå°±å¯ä»¥ç‹¬ç«‹å®Œæˆå…¶å·¥ä½œï¼Œè€Œä¸è¦å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚</p>
<p>è½¯ä»¶åŒ…å«çš„æ‰€æœ‰åŠŸèƒ½çš„æºä»£ç ä»¥åŠè°ƒç”¨æ–¹å¼ï¼Œéƒ½åº”è¯¥é¿å…ä¿®æ”¹ï¼Œå¦åˆ™ä¸€æ—¦æ”¹é”™ï¼Œåˆ™ææœ‰å¯èƒ½äº§ç”Ÿè¿é”ååº”ï¼Œæœ€ç»ˆå¯¼è‡´ç¨‹åºå´©æºƒï¼Œè€Œå¯¹äºä¸Šçº¿åçš„è½¯ä»¶ï¼Œæ–°éœ€æ±‚æˆ–è€…å˜åŒ–åˆå±‚å‡ºä¸ç©·ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºç¨‹åºæä¾›æ‰©å±•çš„å¯èƒ½æ€§ï¼Œè¿™å°±ç”¨åˆ°äº†è£…é¥°å™¨ã€‚</p>
<h2 id="1-2-ä»€ä¹ˆæ˜¯è£…é¥°å™¨"><a href="#1-2-ä»€ä¹ˆæ˜¯è£…é¥°å™¨" class="headerlink" title="1.2 ä»€ä¹ˆæ˜¯è£…é¥°å™¨"></a>1.2 ä»€ä¹ˆæ˜¯è£…é¥°å™¨</h2><p><img src="https://pic2.zhimg.com/80/v2-b43bfaa7c4abf2a53d535ce272d937b9_720w.jpg" alt="img"></p>
<p>â€™è£…é¥°â€™ä»£æŒ‡ä¸ºè¢«è£…é¥°å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œâ€™å™¨â€™ä»£æŒ‡å™¨å…·&#x2F;å·¥å…·ï¼Œè£…é¥°å™¨ä¸è¢«è£…é¥°çš„å¯¹è±¡å‡å¯ä»¥æ˜¯ä»»æ„å¯è°ƒç”¨å¯¹è±¡ã€‚æ¦‚æ‹¬åœ°è®²ï¼Œè£…é¥°å™¨çš„ä½œç”¨å°±æ˜¯åœ¨ä¸ä¿®æ”¹è¢«è£…é¥°å¯¹è±¡æºä»£ç å’Œè°ƒç”¨æ–¹å¼çš„å‰æä¸‹ä¸ºè¢«è£…é¥°å¯¹è±¡æ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚è£…é¥°å™¨ç»å¸¸ç”¨äºæœ‰åˆ‡é¢éœ€æ±‚çš„åœºæ™¯ï¼Œæ¯”å¦‚ï¼šæ’å…¥æ—¥å¿—ã€æ€§èƒ½æµ‹è¯•ã€äº‹åŠ¡å¤„ç†ã€ç¼“å­˜ã€æƒé™æ ¡éªŒç­‰åº”ç”¨åœºæ™¯ï¼Œè£…é¥°å™¨æ˜¯è§£å†³è¿™ç±»é—®é¢˜çš„ç»ä½³è®¾è®¡ï¼Œæœ‰äº†è£…é¥°å™¨ï¼Œå°±å¯ä»¥æŠ½ç¦»å‡ºå¤§é‡ä¸å‡½æ•°åŠŸèƒ½æœ¬èº«æ— å…³çš„é›·åŒä»£ç å¹¶ç»§ç»­é‡ç”¨ã€‚</p>
<p>æç¤ºï¼šå¯è°ƒç”¨å¯¹è±¡æœ‰å‡½æ•°ï¼Œæ–¹æ³•æˆ–è€…ç±»ï¼Œæ­¤å¤„æˆ‘ä»¬å•ä»¥æœ¬ç« ä¸»é¢˜å‡½æ•°ä¸ºä¾‹ï¼Œæ¥ä»‹ç»å‡½æ•°è£…é¥°å™¨ï¼Œå¹¶ä¸”è¢«è£…é¥°çš„å¯¹è±¡ä¹Ÿæ˜¯å‡½æ•°ã€‚</p>
<h2 id="äºŒ-è£…é¥°å™¨çš„å®ç°"><a href="#äºŒ-è£…é¥°å™¨çš„å®ç°" class="headerlink" title="äºŒ è£…é¥°å™¨çš„å®ç°"></a>äºŒ è£…é¥°å™¨çš„å®ç°</h2><p>å‡½æ•°è£…é¥°å™¨åˆ†ä¸ºï¼šæ— å‚è£…é¥°å™¨å’Œæœ‰å‚è£…é¥°ä¸¤ç§ï¼ŒäºŒè€…çš„å®ç°åŸç†ä¸€æ ·ï¼Œéƒ½æ˜¯â€™å‡½æ•°åµŒå¥—+é—­åŒ…+å‡½æ•°å¯¹è±¡â€™çš„ç»„åˆä½¿ç”¨çš„äº§ç‰©ã€‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-21b3488ea792ad818b3eea81740f6945_720w.jpg" alt="img"></p>
<h2 id="2-1-æ— å‚è£…é¥°å™¨çš„å®ç°"><a href="#2-1-æ— å‚è£…é¥°å™¨çš„å®ç°" class="headerlink" title="2.1 æ— å‚è£…é¥°å™¨çš„å®ç°"></a>2.1 æ— å‚è£…é¥°å™¨çš„å®ç°</h2><p>å¦‚æœæƒ³ä¸ºä¸‹è¿°å‡½æ•°æ·»åŠ ç»Ÿè®¡å…¶æ‰§è¡Œæ—¶é—´çš„åŠŸèƒ½</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>():</span></span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Welcome to the index pageâ€™)</span></span><br><span class="line"><span class="string">    return 200</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">index() #å‡½æ•°æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure>

<p>éµå¾ªä¸ä¿®æ”¹è¢«è£…é¥°å¯¹è±¡æºä»£ç çš„åŸåˆ™ï¼Œæˆ‘ä»¬æƒ³åˆ°çš„è§£å†³æ–¹æ³•å¯èƒ½æ˜¯è¿™æ ·</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">start_time=time.time()</span><br><span class="line">index() <span class="comment">#å‡½æ•°æ‰§è¡Œ</span></span><br><span class="line">stop_time=time.time()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;run time is %s&#x27;</span> %(stop_time-start_time))</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-2e3af8429a3c2606c4cfbedb0b196e89_720w.jpg" alt="img"></p>
<p>è€ƒè™‘åˆ°è¿˜æœ‰å¯èƒ½è¦ç»Ÿè®¡å…¶ä»–å‡½æ•°çš„æ‰§è¡Œæ—¶é—´ï¼Œäºæ˜¯æˆ‘ä»¬å°†å…¶åšæˆä¸€ä¸ªå•ç‹¬çš„å·¥å…·ï¼Œå‡½æ•°ä½“éœ€è¦å¤–éƒ¨ä¼ å…¥è¢«è£…é¥°çš„å‡½æ•°ä»è€Œè¿›è¡Œè°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‚æ•°çš„å½¢å¼ä¼ å…¥</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">func</span>):</span> <span class="comment"># é€šè¿‡å‚æ•°æ¥æ”¶å¤–éƒ¨çš„å€¼</span></span><br><span class="line">    start_time=time.time()</span><br><span class="line">    res=func()</span><br><span class="line">    stop_time=time.time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;run time is %s&#x27;</span> %(stop_time-start_time))</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>

<p>ä½†ä¹‹åå‡½æ•°çš„è°ƒç”¨æ–¹å¼éƒ½éœ€è¦ç»Ÿä¸€æ”¹æˆ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">wrapper(index)</span><br><span class="line">wrapper(å…¶ä»–å‡½æ•°)</span><br></pre></td></tr></table></figure>

<p>è¿™ä¾¿è¿åäº†ä¸èƒ½ä¿®æ”¹è¢«è£…é¥°å¯¹è±¡è°ƒç”¨æ–¹å¼çš„åŸåˆ™ï¼Œäºæ˜¯æˆ‘ä»¬æ¢ä¸€ç§ä¸ºå‡½æ•°ä½“ä¼ å€¼çš„æ–¹å¼ï¼Œå³å°†å€¼åŒ…ç»™å‡½æ•°ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timer</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>():</span> <span class="comment"># å¼•ç”¨å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡func</span></span><br><span class="line">        start_time=time.time()</span><br><span class="line">        res=func()</span><br><span class="line">        stop_time=time.time()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;run time is %s&#x27;</span> %(stop_time-start_time))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·æˆ‘ä»¬ä¾¿å¯ä»¥åœ¨ä¸ä¿®æ”¹è¢«è£…é¥°å‡½æ•°æºä»£ç å’Œè°ƒç”¨æ–¹å¼çš„å‰æä¸‹ä¸ºå…¶åŠ ä¸Šç»Ÿè®¡æ—¶é—´çš„åŠŸèƒ½ï¼Œåªä¸è¿‡éœ€è¦äº‹å…ˆæ‰§è¡Œä¸€æ¬¡timerå°†è¢«è£…é¥°çš„å‡½æ•°ä¼ å…¥ï¼Œè¿”å›ä¸€ä¸ªé—­åŒ…å‡½æ•°wrapperé‡æ–°èµ‹å€¼ç»™å˜é‡å &#x2F;å‡½æ•°åindexï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">index=timer(index)  <span class="comment">#å¾—åˆ°index=wrapperï¼Œwrapperæºå¸¦å¯¹å¤–ä½œç”¨åŸŸçš„å¼•ç”¨ï¼šfunc=åŸå§‹çš„index</span></span><br><span class="line">index() <span class="comment"># æ‰§è¡Œçš„æ˜¯wrapper()ï¼Œåœ¨wrapperçš„å‡½æ•°ä½“å†…å†æ‰§è¡Œæœ€åŸå§‹çš„index</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-6c1260375fb70d489df20b676c5cac51_720w.jpg" alt="img"></p>
<p>è‡³æ­¤æˆ‘ä»¬ä¾¿å®ç°äº†ä¸€ä¸ªæ— å‚è£…é¥°å™¨timerï¼Œå¯ä»¥åœ¨ä¸ä¿®æ”¹è¢«è£…é¥°å¯¹è±¡indexæºä»£ç å’Œè°ƒç”¨æ–¹å¼çš„å‰æä¸‹ä¸ºå…¶åŠ ä¸Šæ–°åŠŸèƒ½ã€‚ä½†æˆ‘ä»¬å¿½ç•¥äº†è‹¥è¢«è£…é¥°çš„å‡½æ•°æ˜¯ä¸€ä¸ªæœ‰å‚å‡½æ•°ï¼Œä¾¿ä¼šæŠ›å‡ºå¼‚å¸¸</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">home</span>(<span class="params">name</span>):</span></span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Welcome to the home page&#x27;</span>,name)</span><br><span class="line"></span><br><span class="line">home=timer(home)</span><br><span class="line">home(<span class="string">&#x27;egon&#x27;</span>)</span><br><span class="line"><span class="comment">#æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">TypeError: wrapper() takes <span class="number">0</span> positional arguments but <span class="number">1</span> was given</span><br></pre></td></tr></table></figure>

<p>ä¹‹æ‰€ä»¥ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ˜¯å› ä¸ºhome(â€˜egonâ€™)è°ƒç”¨çš„å…¶å®æ˜¯wrapper(â€˜egonâ€™)ï¼Œè€Œå‡½æ•°wrapperæ²¡æœ‰å‚æ•°ã€‚wrapperå‡½æ•°æ¥æ”¶çš„å‚æ•°å…¶å®æ˜¯ç»™æœ€åŸå§‹çš„funcç”¨çš„ï¼Œä¸ºäº†èƒ½æ»¡è¶³è¢«è£…é¥°å‡½æ•°å‚æ•°çš„æ‰€æœ‰æƒ…å†µï¼Œä¾¿ç”¨ä¸Š*args+**kwargsç»„åˆï¼ˆè§4.3å°èŠ‚ï¼‰,äºæ˜¯ä¿®æ­£è£…é¥°å™¨timerå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timer</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args,**kwargs</span>):</span></span><br><span class="line">        start_time=time.time()</span><br><span class="line">        res=func(*args,**kwargs)</span><br><span class="line">        stop_time=time.time()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;run time is %s&#x27;</span> %(stop_time-start_time))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-da8d9c6733f96b2a897c986e3515ffe3_720w.jpg" alt="img"></p>
<p>æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥ç”¨timeræ¥è£…é¥°å¸¦å‚æ•°æˆ–ä¸å¸¦å‚æ•°çš„å‡½æ•°äº†ï¼Œä½†æ˜¯ä¸ºäº†ç®€æ´è€Œä¼˜é›…åœ°ä½¿ç”¨è£…é¥°å™¨ï¼ŒPythonæä¾›äº†ä¸“é—¨çš„è£…é¥°å™¨è¯­æ³•æ¥å–ä»£index&#x3D;timer(index)çš„å½¢å¼ï¼Œéœ€è¦åœ¨è¢«è£…é¥°å¯¹è±¡çš„æ­£ä¸Šæ–¹å•ç‹¬ä¸€è¡Œæ·»åŠ @timer,å½“è§£é‡Šå™¨è§£é‡Šåˆ°@timeræ—¶å°±ä¼šè°ƒç”¨timerå‡½æ•°ï¼Œä¸”æŠŠå®ƒæ­£ä¸‹æ–¹çš„å‡½æ•°åå½“åšå®å‚ä¼ å…¥ï¼Œç„¶åå°†è¿”å›çš„ç»“æœé‡æ–°èµ‹å€¼ç»™åŸå‡½æ•°å</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@timer </span><span class="comment"># index=timer(index)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>():</span></span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Welcome to the index page&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">200</span></span><br><span class="line"><span class="meta">@timer </span><span class="comment"># index=timer(home)</span>â€¨          <span class="function"><span class="keyword">def</span> <span class="title">home</span>(<span class="params">name</span>):</span></span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Welcome to the home pageâ€™,name)</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬æœ‰å¤šä¸ªè£…é¥°å™¨ï¼Œå¯ä»¥å åŠ å¤šä¸ª</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@deco3</span></span><br><span class="line"><span class="meta">@deco2</span></span><br><span class="line"><span class="meta">@deco1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>():</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>å åŠ å¤šä¸ªè£…é¥°å™¨ä¹Ÿæ— ç‰¹æ®Šä¹‹å¤„ï¼Œä¸Šè¿°ä»£ç è¯­ä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">index=deco3(deco2(deco1(index)))</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-c6e67404ac0e4319ce3cd89af56ead5d_720w.jpg" alt="img"></p>
<h2 id="2-2-æœ‰å‚è£…é¥°å™¨çš„å®ç°"><a href="#2-2-æœ‰å‚è£…é¥°å™¨çš„å®ç°" class="headerlink" title="2.2 æœ‰å‚è£…é¥°å™¨çš„å®ç°"></a>2.2 æœ‰å‚è£…é¥°å™¨çš„å®ç°</h2><p>äº†è§£æ— å‚è£…é¥°å™¨çš„å®ç°åŸç†åï¼Œæˆ‘ä»¬å¯ä»¥å†å®ç°ä¸€ä¸ªç”¨æ¥ä¸ºè¢«è£…é¥°å¯¹è±¡æ·»åŠ è®¤è¯åŠŸèƒ½çš„è£…é¥°å™¨ï¼Œå®ç°çš„åŸºæœ¬å½¢å¼å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">deco</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args,**kwargs</span>):</span></span><br><span class="line">        ç¼–å†™åŸºäºæ–‡ä»¶çš„è®¤è¯,è®¤è¯é€šè¿‡åˆ™æ‰§è¡Œres=func(*args,**kwargs),å¹¶è¿”å›res</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬æƒ³æä¾›å¤šç§ä¸åŒçš„è®¤è¯æ–¹å¼ä»¥ä¾›é€‰æ‹©ï¼Œå•ä»wrapperå‡½æ•°çš„å®ç°è§’åº¦æ”¹å†™å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">deco</span>(<span class="params">func</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args,**kwargs</span>):</span></span><br><span class="line">            <span class="keyword">if</span> driver == <span class="string">&#x27;file&#x27;</span>:</span><br><span class="line">                ç¼–å†™åŸºäºæ–‡ä»¶çš„è®¤è¯,è®¤è¯é€šè¿‡åˆ™æ‰§è¡Œres=func(*args,**kwargs),å¹¶è¿”å›res</span><br><span class="line">            <span class="keyword">elif</span> driver == <span class="string">&#x27;mysql&#x27;</span>:</span><br><span class="line">                ç¼–å†™åŸºäºmysqlè®¤è¯,è®¤è¯é€šè¿‡åˆ™æ‰§è¡Œres=func(*args,**kwargs),å¹¶è¿”å›res</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-82fb584a53b2277048a09561b3e19b58_720w.jpg" alt="img"></p>
<p>å‡½æ•°wrapperéœ€è¦ä¸€ä¸ªdriverå‚æ•°ï¼Œè€Œå‡½æ•°decoä¸wrapperçš„å‚æ•°éƒ½æœ‰å…¶ç‰¹å®šçš„åŠŸèƒ½ï¼Œä¸èƒ½ç”¨æ¥æ¥å—å…¶ä»–ç±»åˆ«çš„å‚æ•°ï¼Œå¯ä»¥åœ¨decoçš„å¤–éƒ¨å†åŒ…ä¸€å±‚å‡½æ•°authï¼Œç”¨æ¥ä¸“é—¨æ¥å—é¢å¤–çš„å‚æ•°ï¼Œè¿™æ ·ä¾¿ä¿è¯äº†åœ¨authå‡½æ•°å†…æ— è®ºå¤šå°‘å±‚éƒ½å¯ä»¥å¼•ç”¨åˆ°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">auth</span>(<span class="params">driver</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deco</span>(<span class="params">func</span>):</span></span><br><span class="line">        â€¦â€¦</span><br><span class="line">    <span class="keyword">return</span> deco</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶æˆ‘ä»¬å°±å®ç°äº†ä¸€ä¸ªæœ‰å‚è£…é¥°å™¨ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">å…ˆè°ƒç”¨auth_type(driver=<span class="string">&#x27;file&#x27;</span>)ï¼Œå¾—åˆ°@decoï¼Œdecoæ˜¯ä¸€ä¸ªé—­åŒ…å‡½æ•°ï¼Œ</span><br><span class="line">åŒ…å«äº†å¯¹å¤–éƒ¨ä½œç”¨åŸŸåå­—driverçš„å¼•ç”¨ï¼Œ@decoçš„è¯­æ³•æ„ä¹‰ä¸æ— å‚è£…é¥°å™¨ä¸€æ ·</span><br><span class="line"><span class="meta">@auth(<span class="params">driver=<span class="string">&#x27;file&#x27;</span></span>) </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>():</span>     </span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="meta">@auth(<span class="params">driver=<span class="string">&#x27;mysql&#x27;</span></span>) </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">home</span>():</span></span><br><span class="line">    <span class="keyword">pass</span>  </span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä½¿ç”¨help(å‡½æ•°å)æ¥æŸ¥çœ‹å‡½æ•°çš„æ–‡æ¡£æ³¨é‡Šï¼Œæœ¬è´¨å°±æ˜¯æŸ¥çœ‹å‡½æ•°çš„<strong>doc</strong>å±æ€§ï¼Œä½†å¯¹äºè¢«è£…é¥°ä¹‹åçš„å‡½æ•°ï¼ŒæŸ¥çœ‹æ–‡æ¡£æ³¨é‡Š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@timer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">home</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    home page function</span></span><br><span class="line"><span class="string">    :param name: str</span></span><br><span class="line"><span class="string">    :return: None</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Welcome to the home page&#x27;</span>,name)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">help</span>(home))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">æ‰“å°ç»“æœï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Help on function wrapper in module __main__:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">wrapper(*args, **kwargs)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">None</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-3380e05c82d8501f9ac1c2681311a062_720w.jpg" alt="img"></p>
<p>åœ¨è¢«è£…é¥°ä¹‹åhome&#x3D;wrapper,æŸ¥çœ‹home.<strong>name</strong>ä¹Ÿå¯ä»¥å‘ç°homeçš„å‡½æ•°åç¡®å®æ˜¯wrapperï¼Œæƒ³è¦ä¿ç•™åŸå‡½æ•°çš„æ–‡æ¡£å’Œå‡½æ•°åå±æ€§ï¼Œéœ€è¦ä¿®æ­£è£…é¥°å™¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timer</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args,**kwargs</span>):</span></span><br><span class="line">        start_time=time.time()</span><br><span class="line">        res=func(*args,**kwargs)</span><br><span class="line">        stop_time=time.time()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;run time is %s&#x27;</span> %(stop_time-start_time))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    wrapper.__doc__=func.__doc__</span><br><span class="line">    wrapper.__name__=func.__name__</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure>

<p>æŒ‰ç…§ä¸Šè¿°æ–¹å¼æ¥å®ç°ä¿ç•™åŸå‡½æ•°å±æ€§è¿‡äºéº»çƒ¦ï¼Œfunctoolsæ¨¡å—ä¸‹æä¾›ä¸€ä¸ªè£…é¥°å™¨wrapsä¸“é—¨ç”¨æ¥å¸®æˆ‘ä»¬å®ç°è¿™ä»¶äº‹ï¼Œç”¨æ³•å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timer</span>(<span class="params">func</span>):</span></span><br><span class="line"><span class="meta">    @wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args,**kwargs</span>):</span></span><br><span class="line">        start_time=time.time()</span><br><span class="line">        res=func(*args,**kwargs)</span><br><span class="line">        stop_time=time.time()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;run time is %s&#x27;</span> %(stop_time-start_time))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-091acff94160bf2b8258553158168f79_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p>ç®€å•è£…é¥°å™¨çš„å®ç°</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=47">https://www.bilibili.com/video/av73342471?p=47www.bilibili.com/video/av73342471?p=47</a></p>
<p>è£…é¥°å™¨ä¿®è®¢</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=48">https://www.bilibili.com/video/av73342471?p=48www.bilibili.com/video/av73342471?p=48</a></p>
<p>wrapsè¡¥å……</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=49">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=49<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>18-å‡½æ•°é€’å½’</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/18_%E5%87%BD%E6%95%B0%E9%80%92%E5%BD%92/</url>
    <content><![CDATA[<h2 id="ä¸€-å‡½æ•°é€’å½’è°ƒç”¨ä»‹ç»"><a href="#ä¸€-å‡½æ•°é€’å½’è°ƒç”¨ä»‹ç»" class="headerlink" title="ä¸€ å‡½æ•°é€’å½’è°ƒç”¨ä»‹ç»"></a>ä¸€ å‡½æ•°é€’å½’è°ƒç”¨ä»‹ç»</h2><p><img src="https://pic2.zhimg.com/80/v2-41fbf2d09891b34e4150056188af9201_720w.jpg" alt="img"></p>
<p>å‡½æ•°ä¸ä»…å¯ä»¥åµŒå¥—å®šä¹‰ï¼Œè¿˜å¯ä»¥åµŒå¥—è°ƒç”¨ï¼Œå³åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°å†…éƒ¨åˆè°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ï¼Œè€Œå‡½æ•°çš„é€’å½’è°ƒç”¨æŒ‡çš„æ˜¯åœ¨è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„è¿‡ç¨‹ä¸­åˆç›´æ¥æˆ–é—´æ¥åœ°è°ƒç”¨è¯¥å‡½æ•°æœ¬èº«</p>
<p><img src="https://pic3.zhimg.com/80/v2-3b052e2e8d0b3e8db1e7c7230478bd8a_720w.jpg" alt="img"></p>
<p>ä¾‹å¦‚</p>
<p>åœ¨è°ƒç”¨f1çš„è¿‡ç¨‹ä¸­ï¼Œåˆè°ƒç”¨f1ï¼Œè¿™å°±æ˜¯ç›´æ¥è°ƒç”¨å‡½æ•°f1æœ¬èº«</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;from f1&#x27;</span>)</span><br><span class="line">    f1()</span><br><span class="line">f1()</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-e409210099ed20bf4b6a01fc4f1a7c9e_720w.jpg" alt="img"></p>
<p>åœ¨è°ƒç”¨f1çš„è¿‡ç¨‹ä¸­ï¼Œåˆè°ƒç”¨f2ï¼Œè€Œåœ¨è°ƒç”¨f2çš„è¿‡ç¨‹ä¸­åˆè°ƒç”¨f1ï¼Œè¿™å°±æ˜¯é—´æ¥è°ƒç”¨å‡½æ•°f1æœ¬èº«</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;from f1&#x27;</span>)</span><br><span class="line">    f2()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;from f2&#x27;</span>)</span><br><span class="line">    f1()</span><br><span class="line"></span><br><span class="line">f1()</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-3190338dfab02a5e59a1f6d099801667_720w.jpg" alt="img"></p>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œä¸¤ç§æƒ…å†µä¸‹çš„é€’å½’è°ƒç”¨éƒ½æ˜¯ä¸€ä¸ªæ— é™å¾ªç¯çš„è¿‡ç¨‹ï¼Œä½†åœ¨pythonå¯¹å‡½æ•°çš„é€’å½’è°ƒç”¨çš„æ·±åº¦åšäº†é™åˆ¶ï¼Œå› è€Œå¹¶ä¸ä¼šåƒå¤§å®¶æ‰€æƒ³çš„é‚£æ ·è¿›å…¥æ— é™å¾ªç¯ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè¦é¿å…å‡ºç°è¿™ç§æƒ…å†µï¼Œå°±å¿…é¡»è®©é€’å½’è°ƒç”¨åœ¨æ»¡è¶³æŸä¸ªç‰¹å®šæ¡ä»¶ä¸‹ç»ˆæ­¢ã€‚</p>
<p>æç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. å¯ä»¥ä½¿ç”¨sys.getrecursionlimit()å»æŸ¥çœ‹é€’å½’æ·±åº¦ï¼Œé»˜è®¤å€¼ä¸º1000ï¼Œè™½ç„¶å¯ä»¥ä½¿ç”¨</span></span><br><span class="line">sys.setrecursionlimit()å»è®¾å®šè¯¥å€¼ï¼Œä½†ä»å—é™äºä¸»æœºæ“ä½œç³»ç»Ÿæ ˆå¤§å°çš„é™åˆ¶</span><br><span class="line"></span><br><span class="line"><span class="comment">#2. pythonä¸æ˜¯ä¸€é—¨å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ï¼Œæ— æ³•å¯¹é€’å½’è¿›è¡Œå°¾é€’å½’ä¼˜åŒ–ã€‚</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-d949d426fb903f274b5fa4126516b9d8_720w.jpg" alt="img"></p>
<h2 id="äºŒ-å›æº¯ä¸é€’æ¨"><a href="#äºŒ-å›æº¯ä¸é€’æ¨" class="headerlink" title="äºŒ å›æº¯ä¸é€’æ¨"></a>äºŒ å›æº¯ä¸é€’æ¨</h2><p>ä¸‹é¢æˆ‘ä»¬ç”¨ä¸€ä¸ªæµ…æ˜¾çš„ä¾‹å­ï¼Œä¸ºäº†è®©è¯»è€…é˜é‡Šé€’å½’çš„åŸç†å’Œä½¿ç”¨ï¼š</p>
<p>ä¾‹4.5</p>
<p>æŸå…¬å¸å››ä¸ªå‘˜å·¥ååœ¨ä¸€èµ·ï¼Œé—®ç¬¬å››ä¸ªäººè–ªæ°´ï¼Œä»–è¯´æ¯”ç¬¬ä¸‰ä¸ªäººå¤š1000ï¼Œé—®ç¬¬ä¸‰ä¸ªäººè–ªæ°´ï¼Œç¬¬ä»–è¯´æ¯”ç¬¬äºŒä¸ªäººå¤š1000ï¼Œé—®ç¬¬äºŒä¸ªäººè–ªæ°´ï¼Œä»–è¯´æ¯”ç¬¬ä¸€ä¸ªäººå¤š1000ï¼Œæœ€åç¬¬ä¸€äººè¯´è‡ªå·±æ¯æœˆ5000ï¼Œè¯·é—®ç¬¬å››ä¸ªäººçš„è–ªæ°´æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>æ€è·¯è§£æï¼š</p>
<p>è¦çŸ¥é“ç¬¬å››ä¸ªäººçš„æœˆè–ªï¼Œå°±å¿…é¡»çŸ¥é“ç¬¬ä¸‰ä¸ªäººçš„ï¼Œç¬¬ä¸‰ä¸ªäººçš„åˆå–å†³äºç¬¬äºŒä¸ªäººçš„ï¼Œç¬¬äºŒä¸ªäººçš„åˆå–å†³äºç¬¬ä¸€ä¸ªäººçš„ï¼Œè€Œä¸”æ¯ä¸€ä¸ªå‘˜å·¥éƒ½æ¯”å‰ä¸€ä¸ªå¤šä¸€åƒï¼Œæ•°å­¦è¡¨è¾¾å¼å³ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">salary(<span class="number">4</span>)=salary(<span class="number">3</span>)+<span class="number">1000</span> </span><br><span class="line">salary(<span class="number">3</span>)=salary(<span class="number">2</span>)+<span class="number">1000</span> </span><br><span class="line">salary(<span class="number">2</span>)=salary(<span class="number">1</span>)+<span class="number">1000</span> </span><br><span class="line">salary(<span class="number">1</span>)=<span class="number">5000</span></span><br><span class="line">æ€»ç»“ä¸ºï¼š </span><br><span class="line">salary(n)=salary(n-<span class="number">1</span>)+<span class="number">1000</span> (n&gt;<span class="number">1</span>) </span><br><span class="line">salary(<span class="number">1</span>)=<span class="number">5000</span> (n=<span class="number">1</span>) </span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-56aac40500c7f687bf181640f4c36eee_720w.jpg" alt="img"></p>
<p>å¾ˆæ˜æ˜¾è¿™æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œå¯ä»¥å°†è¯¥è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šå›æº¯å’Œé€’æ¨ã€‚</p>
<p> åœ¨å›æº¯é˜¶æ®µï¼Œè¦æ±‚ç¬¬nä¸ªå‘˜å·¥çš„è–ªæ°´ï¼Œéœ€è¦å›æº¯å¾—åˆ°(n-1)ä¸ªå‘˜å·¥çš„è–ªæ°´ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°å¾—åˆ°ç¬¬ä¸€ä¸ªå‘˜å·¥çš„è–ªæ°´ï¼Œæ­¤æ—¶ï¼Œsalary(1)å·²çŸ¥ï¼Œå› è€Œä¸å¿…å†å‘å‰å›æº¯äº†ã€‚ç„¶åè¿›å…¥é€’æ¨é˜¶æ®µï¼šä»ç¬¬ä¸€ä¸ªå‘˜å·¥çš„è–ªæ°´å¯ä»¥æ¨ç®—å‡ºç¬¬äºŒä¸ªå‘˜å·¥çš„è–ªæ°´(6000)ï¼Œä»ç¬¬äºŒä¸ªå‘˜å·¥çš„è–ªæ°´å¯ä»¥æ¨ç®—å‡ºç¬¬ä¸‰ä¸ªå‘˜å·¥çš„è–ªæ°´(7000)ï¼Œä»¥æ­¤ç±»æ¨ï¼Œä¸€ç›´æ¨ç®—å‡ºç¬¬ç¬¬å››ä¸ªå‘˜å·¥çš„è–ªæ°´(8000)ä¸ºæ­¢ï¼Œé€’å½’ç»“æŸã€‚éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œé€’å½’ä¸€å®šè¦æœ‰ä¸€ä¸ªç»“æŸæ¡ä»¶ï¼Œè¿™é‡Œn&#x3D;1å°±æ˜¯ç»“æŸæ¡ä»¶ã€‚</p>
<p><img src="https://pic3.zhimg.com/80/v2-b8756ae5141d371f4594408e3df84e56_720w.jpg" alt="img"></p>
<p>ä»£ç å®ç°ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">salary</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="keyword">if</span> n==<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">5000</span></span><br><span class="line">    <span class="keyword">return</span> salary(n-<span class="number">1</span>)+<span class="number">1000</span></span><br><span class="line"></span><br><span class="line">s=salary(<span class="number">4</span>)</span><br><span class="line"><span class="built_in">print</span>(s)</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œç»“æœï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">8000</span></span><br></pre></td></tr></table></figure>

<p>ç¨‹åºåˆ†æï¼š</p>
<p>åœ¨æœªæ»¡è¶³n==1çš„æ¡ä»¶æ—¶ï¼Œä¸€ç›´è¿›è¡Œé€’å½’è°ƒç”¨ï¼Œå³ä¸€ç›´å›æº¯ï¼Œè§å›¾4.3çš„å·¦åŠéƒ¨åˆ†ã€‚è€Œåœ¨æ»¡è¶³n==1çš„æ¡ä»¶æ—¶ï¼Œç»ˆæ­¢é€’å½’è°ƒç”¨ï¼Œå³ç»“æŸå›æº¯ï¼Œä»è€Œè¿›å…¥é€’æ¨é˜¶æ®µï¼Œä¾æ¬¡æ¨å¯¼ç›´åˆ°å¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚</p>
<p>é€’å½’æœ¬è´¨å°±æ˜¯åœ¨åšé‡å¤çš„äº‹æƒ…ï¼Œæ‰€ä»¥ç†è®ºä¸Šé€’å½’å¯ä»¥è§£å†³çš„é—®é¢˜å¾ªç¯ä¹Ÿéƒ½å¯ä»¥è§£å†³ï¼Œåªä¸è¿‡åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨é€’å½’ä¼šæ›´å®¹æ˜“å®ç°ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªåµŒå¥—å¤šå±‚çš„åˆ—è¡¨ï¼Œè¦æ±‚æ‰“å°å‡ºæ‰€æœ‰çš„å…ƒç´ ï¼Œä»£ç å®ç°å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">items=[[<span class="number">1</span>,<span class="number">2</span>],<span class="number">3</span>,[<span class="number">4</span>,[<span class="number">5</span>,[<span class="number">6</span>,<span class="number">7</span>]]]]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">items</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> items:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(i,<span class="built_in">list</span>): <span class="comment">#æ»¡è¶³æœªéå†å®Œitemsä»¥åŠifåˆ¤æ–­æˆç«‹çš„æ¡ä»¶æ—¶ï¼Œä¸€ç›´è¿›è¡Œé€’å½’è°ƒç”¨</span></span><br><span class="line">            foo(i) </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(i,end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"></span><br><span class="line">foo(items) <span class="comment">#æ‰“å°ç»“æœ1 2 3 4 5 6 7</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨é€’å½’ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ†æå‡ºè¦é‡å¤æ‰§è¡Œçš„ä»£ç é€»è¾‘ï¼Œç„¶åæå–è¿›å…¥ä¸‹ä¸€æ¬¡é€’å½’è°ƒç”¨çš„æ¡ä»¶æˆ–è€…è¯´é€’å½’ç»“æŸçš„æ¡ä»¶å³å¯ï¼Œä»£ç å®ç°èµ·æ¥ç®€æ´æ¸…æ™°</p>
<p><img src="https://pic4.zhimg.com/80/v2-73c8b40fe24179104a712dcb49be1153_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=59">https://www.bilibili.com/video/av73342471?p=59www.bilibili.com/video/av73342471?p=59</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>19-é¢å‘è¿‡ç¨‹å’Œå‡½æ•°å¼</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/19_%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B%E4%B8%8E%E5%87%BD%E6%95%B0%E5%BC%8F/</url>
    <content><![CDATA[<h2 id="ä¸€-ç¼–ç¨‹èŒƒå¼"><a href="#ä¸€-ç¼–ç¨‹èŒƒå¼" class="headerlink" title="ä¸€ ç¼–ç¨‹èŒƒå¼"></a>ä¸€ ç¼–ç¨‹èŒƒå¼</h2><p> å¾ˆå¤šåˆå­¦è€…åœ¨äº†è§£äº†ä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„åŸºæœ¬è¯­æ³•å’Œä½¿ç”¨ä¹‹åï¼Œé¢å¯¹ä¸€ä¸ªâ€™å¼€å‘éœ€æ±‚â€˜æ—¶ä»ç„¶ä¼šè§‰å¾—æ— ä»ä¸‹æ‰‹ã€æ²¡æœ‰æ€è·¯&#x2F;å¥—è·¯ï¼Œæœ¬èŠ‚ä¸»é¢˜â€œç¼–ç¨‹èŒƒå¼â€æ­£æ˜¯ä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼Œé‚£åˆ°åº•ä»€ä¹ˆæ˜¯ç¼–ç¨‹èŒƒå¼å‘¢ï¼Ÿ</p>
<p>ç¼–ç¨‹èŒƒå¼æŒ‡çš„å°±æ˜¯ç¼–ç¨‹çš„å¥—è·¯ï¼Œæ‰“ä¸ªæ¯”æ–¹ï¼Œå¦‚æœæŠŠç¼–ç¨‹çš„è¿‡ç¨‹æ¯”å–»ä¸ºç»ƒä¹ æ­¦åŠŸï¼Œé‚£ç¼–ç¨‹èŒƒå¼æŒ‡çš„å°±æ˜¯æ­¦æ—ä¸­çš„å„ç§æµæ´¾ï¼Œè€Œåœ¨ç¼–ç¨‹çš„ä¸–ç•Œé‡Œå¸¸è§çš„æµæ´¾æœ‰ï¼šé¢å‘è¿‡ç¨‹ã€å‡½æ•°å¼ã€é¢å‘å¯¹è±¡ç­‰ï¼Œæœ¬èŠ‚æˆ‘ä»¬ä¸»è¦ä»‹ç»å‰ä¸¤è€…ã€‚</p>
<p> åœ¨æ­£å¼ä»‹ç»å‰ï¼Œæˆ‘ä»¬éœ€è¦å¼ºè°ƒï¼šâ€œåŠŸå¤«çš„æµæ´¾æ²¡æœ‰é«˜ä½ä¹‹åˆ†ï¼Œåªæœ‰ä¹ æ­¦çš„äººæ‰æœ‰é«˜ä½ä¹‹åˆ†â€œï¼Œåœ¨ç¼–ç¨‹ä¸–ç•Œé‡Œæ›´æ˜¯è¿™æ ·ï¼Œå„ç§ç¼–ç¨‹èŒƒå¼åœ¨ä¸åŒçš„åœºæ™¯ä¸‹éƒ½å„æœ‰ä¼˜åŠ£ï¼Œè°å¥½è°åä¸èƒ½ä¸€æ¦‚è€Œè®ºï¼Œä¸‹é¢å°±è®©æˆ‘ä»¬æ¥ä¸€ä¸€è§£è¯»å®ƒä»¬ã€‚</p>
<p><img src="https://pic3.zhimg.com/80/v2-320a4e510709df1dd29361212ca7617e_720w.jpg" alt="img"></p>
<h2 id="äºŒ-é¢å‘è¿‡ç¨‹"><a href="#äºŒ-é¢å‘è¿‡ç¨‹" class="headerlink" title="äºŒ é¢å‘è¿‡ç¨‹"></a>äºŒ é¢å‘è¿‡ç¨‹</h2><p> â€é¢å‘è¿‡ç¨‹â€œæ ¸å¿ƒæ˜¯â€œè¿‡ç¨‹â€äºŒå­—ï¼Œâ€œè¿‡ç¨‹â€æŒ‡çš„æ˜¯è§£å†³é—®é¢˜çš„æ­¥éª¤ï¼Œå³å…ˆå¹²ä»€ä¹ˆå†å¹²ä»€ä¹ˆâ€¦â€¦ï¼ŒåŸºäºé¢å‘è¿‡ç¨‹å¼€å‘ç¨‹åºå°±å¥½æ¯”åœ¨è®¾è®¡ä¸€æ¡æµæ°´çº¿ï¼Œæ˜¯ä¸€ç§æœºæ¢°å¼çš„æ€ç»´æ–¹å¼ï¼Œè¿™æ­£å¥½å¥‘åˆè®¡ç®—æœºçš„è¿è¡ŒåŸç†ï¼šä»»ä½•ç¨‹åºçš„æ‰§è¡Œæœ€ç»ˆéƒ½éœ€è¦è½¬æ¢æˆcpuçš„æŒ‡ä»¤æµæ°´æŒ‰è¿‡ç¨‹è°ƒåº¦æ‰§è¡Œï¼Œå³æ— è®ºé‡‡ç”¨ä»€ä¹ˆè¯­è¨€ã€æ— è®ºä¾æ®ä½•ç§ç¼–ç¨‹èŒƒå¼è®¾è®¡å‡ºçš„ç¨‹åºï¼Œæœ€ç»ˆçš„æ‰§è¡Œéƒ½æ˜¯è¿‡ç¨‹å¼çš„ã€‚</p>
<p><img src="https://pic1.zhimg.com/80/v2-84ee41725a5dbbd4e8c6cbcf9c7a28f8_720w.jpg" alt="img"></p>
<p> è¯¦ç»†çš„ï¼Œè‹¥ç¨‹åºä¸€å¼€å§‹æ˜¯è¦ç€æ‰‹è§£å†³ä¸€ä¸ªå¤§çš„é—®é¢˜ï¼ŒæŒ‰ç…§è¿‡ç¨‹å¼çš„æ€è·¯å°±æ˜¯æŠŠè¿™ä¸ªå¤§çš„é—®é¢˜åˆ†è§£æˆå¾ˆå¤šä¸ªå°é—®é¢˜æˆ–å­è¿‡ç¨‹å»å®ç°ï¼Œç„¶åä¾æ¬¡è°ƒç”¨å³å¯ï¼Œè¿™æå¤§åœ°é™ä½äº†ç¨‹åºçš„å¤æ‚åº¦ã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<p> å†™ä¸€ä¸ªæ•°æ®è¿œç¨‹å¤‡ä»½ç¨‹åºï¼Œåˆ†ä¸‰æ­¥ï¼šæœ¬åœ°æ•°æ®æ‰“åŒ…ï¼Œä¸Šä¼ è‡³äº‘æœåŠ¡å™¨ï¼Œæ£€æµ‹å¤‡ä»½æ–‡ä»¶å¯ç”¨æ€§</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os,time</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸€ï¼šåŸºäºæœ¬ç« æ‰€å­¦ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•°å»å®ç°è¿™ä¸€ä¸ªä¸ªçš„æ­¥éª¤</span></span><br><span class="line"><span class="comment"># 1ã€æœ¬åœ°æ•°æ®æ‰“åŒ…</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">data_backup</span>(<span class="params">folder</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ‰¾åˆ°å¤‡ä»½ç›®å½•: %s&quot;</span> %folder)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;æ­£åœ¨å¤‡ä»½...&#x27;</span>)</span><br><span class="line">    zip_file=<span class="string">&#x27;/tmp/backup_%s.zip&#x27;</span> %time.strftime(<span class="string">&#x27;%Y%m%d&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å¤‡ä»½æˆåŠŸï¼Œå¤‡ä»½æ–‡ä»¶ä¸º: %s&#x27;</span> %zip_file)</span><br><span class="line">    <span class="keyword">return</span> zip_file</span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€ä¸Šä¼ è‡³äº‘æœåŠ¡å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cloud_upload</span>(<span class="params">file</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\nconnecting cloud storage center...&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;cloud storage connected&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;upload [%s] to cloud...&quot;</span> %file)</span><br><span class="line">    link=<span class="string">&#x27;https://www.xxx.com/bak/%s&#x27;</span> %os.path.basename(file)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;close connection&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> link</span><br><span class="line"></span><br><span class="line"><span class="comment">#3ã€æ£€æµ‹å¤‡ä»½æ–‡ä»¶å¯ç”¨æ€§</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">data_backup_check</span>(<span class="params">link</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;\nä¸‹è½½æ–‡ä»¶: %s , éªŒè¯æ–‡ä»¶æ˜¯å¦æ— æŸ...&quot;</span> %link)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#äºŒï¼šä¾æ¬¡è°ƒç”¨</span></span><br><span class="line"><span class="comment"># æ­¥éª¤ä¸€ï¼šæœ¬åœ°æ•°æ®æ‰“åŒ…</span></span><br><span class="line">zip_file = data_backup(<span class="string">r&quot;/Users/egon/æ¬§ç¾100Gé«˜æ¸…æ— ç &quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­¥éª¤äºŒï¼šä¸Šä¼ è‡³äº‘æœåŠ¡å™¨</span></span><br><span class="line">link=cloud_upload(zip_file)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­¥éª¤ä¸‰ï¼šæ£€æµ‹å¤‡ä»½æ–‡ä»¶çš„å¯ç”¨æ€§</span></span><br><span class="line">data_backup_check(link)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-d7abc4f23679ef40d74b5ab5a5d01e95_720w.jpg" alt="img"></p>
<p>é¢å‘è¿‡ç¨‹æ€»ç»“ï¼š</p>
<p>1ã€ä¼˜ç‚¹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">å°†å¤æ‚çš„é—®é¢˜æµç¨‹åŒ–ï¼Œè¿›è€Œç®€å•åŒ–</span><br></pre></td></tr></table></figure>

<p>2ã€ç¼ºç‚¹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">ç¨‹åºçš„å¯æ‰©å±•æ€§æå·®ï¼Œå› ä¸ºä¸€å¥—æµæ°´çº¿æˆ–è€…æµç¨‹å°±æ˜¯ç”¨æ¥è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œå°±å¥½æ¯”ç”Ÿäº§æ±½æ°´çš„æµæ°´çº¿æ— æ³•ç”Ÿäº§æ±½è½¦ä¸€æ ·ï¼Œå³ä¾¿æ˜¯èƒ½ï¼Œä¹Ÿå¾—æ˜¯å¤§æ”¹ï¼Œè€Œä¸”æ”¹ä¸€ä¸ªç»„ä»¶ï¼Œä¸å…¶ç›¸å…³çš„ç»„ä»¶å¯èƒ½éƒ½éœ€è¦ä¿®æ”¹ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¿®æ”¹äº†cloud_uploadçš„é€»è¾‘ï¼Œé‚£ä¹ˆä¾èµ–å…¶ç»“æœæ‰èƒ½æ­£å¸¸æ‰§è¡Œçš„data_backup_checkä¹Ÿéœ€è¦ä¿®æ”¹ï¼Œè¿™å°±é€ æˆäº†è¿é”ååº”ï¼Œè€Œä¸”è¿™ä¸€é—®é¢˜ä¼šéšç€ç¨‹åºè§„æ¨¡çš„å¢å¤§è€Œå˜å¾—è¶Šå‘çš„ç³Ÿç³•ã€‚</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cloud_upload</span>(<span class="params">file</span>):</span> <span class="comment"># åŠ ä¸Šå¼‚å¸¸å¤„ç†ï¼Œåœ¨å‡ºç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œæ²¡æœ‰linkè¿”å›</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\nconnecting cloud storage center...&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;cloud storage connected&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;upload [%s] to cloud...&quot;</span> %file)</span><br><span class="line">        link=<span class="string">&#x27;https://www.xxx.com/bak/%s&#x27;</span> %os.path.basename(file)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;close connection&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> link</span><br><span class="line">    <span class="keyword">except</span> Exception:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;upload error&#x27;</span>)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;close connection.....&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">data_backup_check</span>(<span class="params">link</span>):</span> <span class="comment"># åŠ ä¸Šå¯¹å‚æ•°linkçš„åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span> link:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\nä¸‹è½½æ–‡ä»¶: %s , éªŒè¯æ–‡ä»¶æ˜¯å¦æ— æŸ...&quot;</span> %link)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\né“¾æ¥ä¸å­˜åœ¨&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>3ã€åº”ç”¨åœºæ™¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">é¢å‘è¿‡ç¨‹çš„ç¨‹åºè®¾è®¡ä¸€èˆ¬ç”¨äºé‚£äº›åŠŸèƒ½ä¸€æ—¦å®ç°ä¹‹åå°±å¾ˆå°‘éœ€è¦æ”¹å˜çš„åœºæ™¯ï¼Œ å¦‚æœä½ åªæ˜¯å†™ä¸€äº›ç®€å•çš„è„šæœ¬ï¼Œå»åšä¸€äº›ä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œç”¨é¢å‘è¿‡ç¨‹å»å®ç°æ˜¯æå¥½çš„ï¼Œä½†å¦‚æœä½ è¦å¤„ç†çš„ä»»åŠ¡æ˜¯å¤æ‚çš„ï¼Œä¸”éœ€è¦ä¸æ–­è¿­ä»£å’Œç»´æŠ¤ï¼Œ é‚£è¿˜æ˜¯ç”¨é¢å‘å¯¹è±¡æœ€ä¸ºæ–¹ä¾¿ã€‚</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-7ef6c56d758201f1262fce11e4b52cc6_720w.jpg" alt="img"></p>
<h2 id="ä¸‰-å‡½æ•°å¼"><a href="#ä¸‰-å‡½æ•°å¼" class="headerlink" title="ä¸‰ å‡½æ•°å¼"></a>ä¸‰ å‡½æ•°å¼</h2><p>å‡½æ•°å¼ç¼–ç¨‹å¹¶éç”¨å‡½æ•°ç¼–ç¨‹è¿™ä¹ˆç®€å•ï¼Œè€Œæ˜¯å°†è®¡ç®—æœºçš„è¿ç®—è§†ä¸ºæ•°å­¦æ„ä¹‰ä¸Šçš„è¿ç®—ï¼Œæ¯”èµ·é¢å‘è¿‡ç¨‹ï¼Œå‡½æ•°å¼æ›´åŠ æ³¨é‡çš„æ˜¯æ‰§è¡Œç»“æœè€Œéæ‰§è¡Œçš„è¿‡ç¨‹ï¼Œä»£è¡¨è¯­è¨€æœ‰ï¼šHaskellã€Erlangã€‚è€Œpythonå¹¶ä¸æ˜¯ä¸€é—¨å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ï¼Œä½†æ˜¯ä»ä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šå‡½æ•°å¼ç¼–ç¨‹å¥½çš„ç‰¹æ€§ï¼Œå¦‚lambdaï¼Œmapï¼Œreduceï¼Œfilter</p>
<p><img src="https://pic1.zhimg.com/80/v2-fcd96db9b6524e583f4483121d7fe160_720w.jpg" alt="img"></p>
<h2 id="3-1-åŒ¿åå‡½æ•°ä¸lambda"><a href="#3-1-åŒ¿åå‡½æ•°ä¸lambda" class="headerlink" title="3.1 åŒ¿åå‡½æ•°ä¸lambda"></a>3.1 åŒ¿åå‡½æ•°ä¸lambda</h2><p> å¯¹æ¯”ä½¿ç”¨defå…³é”®å­—åˆ›å»ºçš„æ˜¯æœ‰åå­—çš„å‡½æ•°ï¼Œä½¿ç”¨lambdaå…³é”®å­—åˆ›å»ºåˆ™æ˜¯æ²¡æœ‰åå­—çš„å‡½æ•°ï¼Œå³åŒ¿åå‡½æ•°ï¼Œè¯­æ³•å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">lambda</span> å‚æ•°<span class="number">1</span>,å‚æ•°<span class="number">2</span>,...: expression</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1ã€å®šä¹‰</span></span><br><span class="line"><span class="keyword">lambda</span> x,y,z:x+y+z</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç­‰åŒäº</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">x,y,z</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x+y+z</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€è°ƒç”¨</span></span><br><span class="line"><span class="comment"># æ–¹å¼ä¸€ï¼š</span></span><br><span class="line">res=(<span class="keyword">lambda</span> x,y,z:x+y+z)(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹å¼äºŒï¼š</span></span><br><span class="line">func=<span class="keyword">lambda</span> x,y,z:x+y+z <span class="comment"># â€œåŒ¿åâ€çš„æœ¬è´¨å°±æ˜¯è¦æ²¡æœ‰åå­—ï¼Œæ‰€ä»¥æ­¤å¤„ä¸ºåŒ¿åå‡½æ•°æŒ‡å®šåå­—æ˜¯æ²¡æœ‰æ„ä¹‰çš„</span></span><br><span class="line">res=func(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-51fa4a8780bba6ac0b31a882bedfd92d_720w.jpg" alt="img"></p>
<p>åŒ¿åå‡½æ•°ä¸æœ‰åå‡½æ•°æœ‰ç›¸åŒçš„ä½œç”¨åŸŸï¼Œä½†æ˜¯åŒ¿åæ„å‘³ç€å¼•ç”¨è®¡æ•°ä¸º0ï¼Œä½¿ç”¨ä¸€æ¬¡å°±é‡Šæ”¾ï¼Œæ‰€ä»¥åŒ¿åå‡½æ•°ç”¨äºä¸´æ—¶ä½¿ç”¨ä¸€æ¬¡çš„åœºæ™¯ï¼ŒåŒ¿åå‡½æ•°é€šå¸¸ä¸å…¶ä»–å‡½æ•°é…åˆä½¿ç”¨ï¼Œæˆ‘ä»¬ä»¥ä¸‹è¿°å­—å…¸ä¸ºä¾‹æ¥ä»‹ç»å®ƒ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">salaries=&#123;</span><br><span class="line">    <span class="string">&#x27;siry&#x27;</span>:<span class="number">3000</span>,</span><br><span class="line">    <span class="string">&#x27;tom&#x27;</span>:<span class="number">7000</span>,</span><br><span class="line">    <span class="string">&#x27;lili&#x27;</span>:<span class="number">10000</span>,</span><br><span class="line">    <span class="string">&#x27;jack&#x27;</span>:<span class="number">2000</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¦æƒ³å–å¾—è–ªæ°´çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®å‡½æ•°maxå’Œminï¼ˆä¸ºäº†æ–¹ä¾¿å¼€å‘ï¼Œpythonè§£é‡Šå™¨å·²ç»ä¸ºæˆ‘ä»¬å®šä¹‰å¥½äº†ä¸€ç³»åˆ—å¸¸ç”¨çš„åŠŸèƒ½ï¼Œç§°ä¹‹ä¸ºå†…ç½®çš„å‡½æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦æ‹¿æ¥ä½¿ç”¨å³å¯ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">max</span>(salaries)</span><br><span class="line"><span class="string">&#x27;tom&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">min</span>(salaries)</span><br><span class="line"><span class="string">&#x27;jack&#x27;</span></span><br></pre></td></tr></table></figure>

<p>å†…ç½®maxå’Œminéƒ½æ”¯æŒè¿­ä»£å™¨åè®®ï¼Œå·¥ä½œåŸç†éƒ½æ˜¯è¿­ä»£å­—å…¸ï¼Œå–å¾—æ˜¯å­—å…¸çš„é”®ï¼Œå› è€Œæ¯”è¾ƒçš„æ˜¯é”®çš„æœ€å¤§å’Œæœ€å°å€¼ï¼Œè€Œæˆ‘ä»¬æƒ³è¦çš„æ˜¯æ¯”è¾ƒå€¼çš„æœ€å¤§å€¼ä¸æœ€å°å€¼ï¼Œäºæ˜¯åšå‡ºå¦‚ä¸‹æ”¹åŠ¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‡½æ•°maxä¼šè¿­ä»£å­—å…¸salariesï¼Œæ¯å–å‡ºä¸€ä¸ªâ€œäººåâ€å°±ä¼šå½“åšå‚æ•°ä¼ ç»™æŒ‡å®šçš„åŒ¿åå‡½æ•°ï¼Œç„¶åå°†åŒ¿åå‡½æ•°çš„è¿”å›å€¼å½“åšæ¯”è¾ƒä¾æ®ï¼Œæœ€ç»ˆè¿”å›è–ªèµ„æœ€é«˜çš„é‚£ä¸ªäººçš„åå­—</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">max</span>(salaries,key=<span class="keyword">lambda</span> k:salaries[k]) </span><br><span class="line"><span class="string">&#x27;lili&#x27;</span></span><br><span class="line"><span class="comment"># åŸç†åŒä¸Š</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">min</span>(salaries,key=<span class="keyword">lambda</span> k:salaries[k])</span><br><span class="line"><span class="string">&#x27;jack&#x27;</span></span><br></pre></td></tr></table></figure>

<p>åŒç†ï¼Œæˆ‘ä»¬ç›´æ¥å¯¹å­—å…¸è¿›è¡Œæ’åºï¼Œé»˜è®¤ä¹Ÿæ˜¯æŒ‰ç…§å­—å…¸çš„é”®å»æ’åºçš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">sorted</span>(salaries)</span><br><span class="line">[<span class="string">&#x27;jack&#x27;</span>, <span class="string">&#x27;lili&#x27;</span>, <span class="string">&#x27;siry&#x27;</span>, <span class="string">&#x27;tom&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-73a826d95d6e8a03bf2db2c8e3bfd84e_720w.jpg" alt="img"></p>
<h2 id="3-2-mapã€reduceã€filter"><a href="#3-2-mapã€reduceã€filter" class="headerlink" title="3.2 mapã€reduceã€filter"></a>3.2 mapã€reduceã€filter</h2><p>å‡½æ•°mapã€reduceã€filteréƒ½æ”¯æŒè¿­ä»£å™¨åè®®ï¼Œç”¨æ¥å¤„ç†å¯è¿­ä»£å¯¹è±¡ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡arrayä¸ºä¾‹æ¥ä»‹ç»å®ƒä»¬ä¸‰ä¸ªçš„ç”¨æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">array=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<p>è¦æ±‚ä¸€ï¼šå¯¹arrayçš„æ¯ä¸ªå…ƒç´ åšå¹³æ–¹å¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨mapå‡½æ•°</p>
<p>mapå‡½æ•°å¯ä»¥æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå…·ä½“ç”¨æ³•å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>res=<span class="built_in">map</span>(<span class="keyword">lambda</span> x:x**<span class="number">2</span>,array)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line">&lt;<span class="built_in">map</span> <span class="built_in">object</span> at <span class="number">0x1033f45f8</span>&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<p>è§£æï¼šmapä¼šä¾æ¬¡è¿­ä»£arrayï¼Œå¾—åˆ°çš„å€¼ä¾æ¬¡ä¼ ç»™åŒ¿åå‡½æ•°ï¼ˆä¹Ÿå¯ä»¥æ˜¯æœ‰åå‡½æ•°ï¼‰ï¼Œè€Œmapå‡½æ•°å¾—åˆ°çš„ç»“æœä»ç„¶æ˜¯è¿­ä»£å™¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(res) <span class="comment">#ä½¿ç”¨listå¯ä»¥ä¾æ¬¡è¿­ä»£resï¼Œå–å¾—çš„å€¼ä½œä¸ºåˆ—è¡¨å…ƒç´ </span></span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>]</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-585046858a6b78be30ccd4a4b1ef2da3_720w.jpg" alt="img"></p>
<p>è¦æ±‚äºŒï¼šå¯¹arrayè¿›è¡Œåˆå¹¶æ“ä½œï¼Œæ¯”å¦‚æ±‚å’Œè¿ç®—ï¼Œè¿™å°±ç”¨åˆ°äº†reduceå‡½æ•°</p>
<p>reduceå‡½æ•°å¯ä»¥æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°ï¼Œç¬¬äºŒä¸ªæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œç¬¬ä¸‰ä¸ªæ˜¯åˆå§‹å€¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># reduceåœ¨python2ä¸­æ˜¯å†…ç½®å‡½æ•°ï¼Œåœ¨python3ä¸­åˆ™è¢«é›†æˆåˆ°æ¨¡å—functoolsä¸­ï¼Œéœ€è¦å¯¼å…¥æ‰èƒ½ä½¿ç”¨</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> functools <span class="keyword">import</span> reduce </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res=reduce(<span class="keyword">lambda</span> x,y:x+y,array)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line"><span class="number">15</span></span><br></pre></td></tr></table></figure>

<p>è§£æï¼š</p>
<p>1 æ²¡æœ‰åˆå§‹å€¼ï¼Œreduceå‡½æ•°ä¼šå…ˆè¿­ä»£ä¸€æ¬¡arrayå¾—åˆ°çš„å€¼ä½œä¸ºåˆå§‹å€¼ï¼Œä½œä¸ºç¬¬ä¸€ä¸ªå€¼æ•°ä¼ ç»™xï¼Œç„¶åç»§ç»­è¿­ä»£ä¸€æ¬¡arrayå¾—åˆ°çš„å€¼ä½œä¸ºç¬¬äºŒä¸ªå€¼ä¼ ç»™yï¼Œè¿ç®—çš„ç»“æœä¸º3</p>
<p>2 å°†ä¸Šä¸€æ¬¡reduceè¿ç®—çš„ç»“æœä½œä¸ºç¬¬ä¸€ä¸ªå€¼ä¼ ç»™xï¼Œç„¶åè¿­ä»£ä¸€æ¬¡arrayå¾—åˆ°çš„ç»“æœä½œä¸ºç¬¬äºŒä¸ªå€¼ä¼ ç»™yï¼Œä¾æ¬¡ç±»æ¨ï¼ŒçŸ¥é“è¿­ä»£å®Œarrayçš„æ‰€æœ‰å…ƒç´ ï¼Œå¾—åˆ°æœ€ç»ˆçš„ç»“æœ15</p>
<p>ä¹Ÿå¯ä»¥ä¸ºreduceæŒ‡å®šåˆå§‹å€¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>res=reduce(<span class="keyword">lambda</span> x,y:x+y,array,<span class="number">100</span>)â€¨<span class="meta">&gt;&gt;&gt; </span>res</span><br><span class="line"><span class="number">115</span></span><br></pre></td></tr></table></figure>

<p>è¦æ±‚ä¸‰ï¼šå¯¹arrayè¿›è¡Œè¿‡æ»¤æ“ä½œï¼Œè¿™å°±ç”¨åˆ°äº†filterå‡½æ•°ï¼Œæ¯”å¦‚è¿‡æ»¤å‡ºå¤§äº3çš„å…ƒç´ </p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>res=<span class="built_in">filter</span>(<span class="keyword">lambda</span> x:x&gt;<span class="number">3</span>,array)</span><br></pre></td></tr></table></figure>

<p>è§£æï¼šfilterå‡½æ•°ä¼šä¾æ¬¡è¿­ä»£arrayï¼Œå¾—åˆ°çš„å€¼ä¾æ¬¡ä¼ ç»™åŒ¿åå‡½æ•°ï¼Œå¦‚æœåŒ¿åå‡½æ•°çš„è¿”å›å€¼ä¸ºçœŸï¼Œåˆ™è¿‡æ»¤å‡ºè¯¥å…ƒç´ ï¼Œè€Œfilterå‡½æ•°å¾—åˆ°çš„ç»“æœä»ç„¶æ˜¯è¿­ä»£å™¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(res) </span><br><span class="line">[<span class="number">4</span>, <span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<p>æç¤ºï¼šæˆ‘ä»¬ä»‹ç»mapã€filterã€reduceåªæ˜¯ä¸ºäº†å¸¦å¤§å®¶äº†è§£å‡½æ•°å¼ç¼–ç¨‹çš„å¤§è‡´æ€æƒ³ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨åˆ—è¡¨ç”Ÿæˆå¼æˆ–è€…ç”Ÿæˆå™¨è¡¨è¾¾å¼æ¥å®ç°ä¸‰è€…çš„åŠŸèƒ½ã€‚</p>
<p><img src="https://pic3.zhimg.com/80/v2-8ce8d9f5f81621b10d67231fd1c60f86_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=55">https://www.bilibili.com/video/av73342471?p=55www.bilibili.com/video/av73342471?p=55</a></p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=56">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=56<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>20-æ¨¡å—</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/20_%E6%A8%A1%E5%9D%97/</url>
    <content><![CDATA[<h2 id="ä¸€-æ¨¡å—ä»‹ç»"><a href="#ä¸€-æ¨¡å—ä»‹ç»" class="headerlink" title="ä¸€ æ¨¡å—ä»‹ç»"></a>ä¸€ æ¨¡å—ä»‹ç»</h2><p>åœ¨Pythonä¸­ï¼Œä¸€ä¸ªpyæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæ–‡ä»¶åä¸ºxxx.pyæ¨¡å—ååˆ™æ˜¯xxx,å¯¼å…¥æ¨¡å—å¯ä»¥å¼•ç”¨æ¨¡å—ä¸­å·²ç»å†™å¥½çš„åŠŸèƒ½ã€‚å¦‚æœæŠŠå¼€å‘ç¨‹åºæ¯”å–»æˆåˆ¶é€ ä¸€å°ç”µè„‘ï¼Œç¼–å†™æ¨¡å—å°±åƒæ˜¯åœ¨åˆ¶é€ ç”µè„‘çš„é›¶éƒ¨ä»¶ï¼Œå‡†å¤‡å¥½é›¶éƒ¨ä»¶åï¼Œå‰©ä¸‹çš„å·¥ä½œå°±æ˜¯æŒ‰ç…§é€»è¾‘æŠŠå®ƒä»¬ç»„è£…åˆ°ä¸€èµ·ã€‚</p>
<p>å°†ç¨‹åºæ¨¡å—åŒ–ä¼šä½¿å¾—ç¨‹åºçš„ç»„ç»‡ç»“æ„æ¸…æ™°ï¼Œç»´æŠ¤èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚æ¯”èµ·ç›´æ¥å¼€å‘ä¸€ä¸ªå®Œæ•´çš„ç¨‹åºï¼Œå•ç‹¬å¼€å‘ä¸€ä¸ªå°çš„æ¨¡å—ä¹Ÿä¼šæ›´åŠ ç®€å•ï¼Œå¹¶ä¸”ç¨‹åºä¸­çš„æ¨¡å—ä¸ç”µè„‘ä¸­çš„é›¶éƒ¨ä»¶ç¨å¾®ä¸åŒçš„æ˜¯ï¼šç¨‹åºä¸­çš„æ¨¡å—å¯ä»¥è¢«é‡å¤ä½¿ç”¨ã€‚æ‰€ä»¥æ€»ç»“ä¸‹æ¥ï¼Œä½¿ç”¨æ¨¡å—æ—¢ä¿è¯äº†ä»£ç çš„é‡ç”¨æ€§ï¼Œåˆå¢å¼ºäº†ç¨‹åºçš„ç»“æ„æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å¦å¤–é™¤äº†è‡ªå®šä¹‰æ¨¡å—å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¼å…¥ä½¿ç”¨å†…ç½®æˆ–ç¬¬ä¸‰æ–¹æ¨¡å—æä¾›çš„ç°æˆåŠŸèƒ½ï¼Œè¿™ç§â€œæ‹¿æ¥ä¸»ä¹‰â€æå¤§åœ°æé«˜äº†ç¨‹åºå‘˜çš„å¼€å‘æ•ˆç‡ã€‚</p>
<h2 id="äºŒ-æ¨¡å—çš„ä½¿ç”¨"><a href="#äºŒ-æ¨¡å—çš„ä½¿ç”¨" class="headerlink" title="äºŒ æ¨¡å—çš„ä½¿ç”¨"></a>äºŒ æ¨¡å—çš„ä½¿ç”¨</h2><h2 id="2-1-importè¯­å¥"><a href="#2-1-importè¯­å¥" class="headerlink" title="2.1 importè¯­å¥"></a>2.1 importè¯­å¥</h2><p>æœ‰å¦‚ä¸‹ç¤ºèŒƒæ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ–‡ä»¶åï¼šfoo.py</span></span><br><span class="line">x=<span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(x)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change</span>():</span></span><br><span class="line">    <span class="keyword">global</span> x</span><br><span class="line">    x=<span class="number">0</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">self</span>):</span></span><br><span class="line">       <span class="built_in">print</span>(<span class="string">&#x27;from the func&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>è¦æƒ³åœ¨å¦å¤–ä¸€ä¸ªpyæ–‡ä»¶ä¸­å¼•ç”¨foo.pyä¸­çš„åŠŸèƒ½ï¼Œéœ€è¦ä½¿ç”¨import fooï¼Œé¦–æ¬¡å¯¼å…¥æ¨¡å—ä¼šåšä¸‰ä»¶äº‹ï¼š</p>
<p>1ã€æ‰§è¡Œæºæ–‡ä»¶ä»£ç </p>
<p>2ã€äº§ç”Ÿä¸€ä¸ªæ–°çš„åç§°ç©ºé—´ç”¨äºå­˜æ”¾æºæ–‡ä»¶æ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„åå­—</p>
<p>3ã€åœ¨å½“å‰æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„åç§°ç©ºé—´ä¸­å¾—åˆ°ä¸€ä¸ªåå­—fooï¼Œè¯¥åå­—æŒ‡å‘æ–°åˆ›å»ºçš„æ¨¡å—åç§°ç©ºé—´ï¼Œè‹¥è¦å¼•ç”¨æ¨¡å—åç§°ç©ºé—´ä¸­çš„åå­—ï¼Œéœ€è¦åŠ ä¸Šè¯¥å‰ç¼€ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> foo <span class="comment">#å¯¼å…¥æ¨¡å—foo</span></span><br><span class="line">a=foo.x <span class="comment">#å¼•ç”¨æ¨¡å—fooä¸­å˜é‡xçš„å€¼èµ‹å€¼ç»™å½“å‰åç§°ç©ºé—´ä¸­çš„åå­—a</span></span><br><span class="line">foo.get() <span class="comment">#è°ƒç”¨æ¨¡å—fooçš„getå‡½æ•°</span></span><br><span class="line">foo.change() <span class="comment">#è°ƒç”¨æ¨¡å—fooä¸­çš„changeå‡½æ•°</span></span><br><span class="line">obj=foo.Foo() <span class="comment">#ä½¿ç”¨æ¨¡å—fooçš„ç±»Fooæ¥å®ä¾‹åŒ–ï¼Œè¿›ä¸€æ­¥å¯ä»¥æ‰§è¡Œobj.func()</span></span><br></pre></td></tr></table></figure>

<p>åŠ ä¸Šfoo.ä½œä¸ºå‰ç¼€å°±ç›¸å½“äºæŒ‡åé“å§“åœ°è¯´æ˜è¦å¼•ç”¨fooåç§°ç©ºé—´ä¸­çš„åå­—ï¼Œæ‰€ä»¥è‚¯å®šä¸ä¼šä¸å½“å‰æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨åç§°ç©ºé—´ä¸­çš„åå­—ç›¸å†²çªï¼Œå¹¶ä¸”è‹¥å½“å‰æ‰§è¡Œæ–‡ä»¶çš„åç§°ç©ºé—´ä¸­å­˜åœ¨xï¼Œæ‰§è¡Œfoo.get()æˆ–foo.change()æ“ä½œçš„éƒ½æ˜¯æºæ–‡ä»¶ä¸­çš„å…¨å±€å˜é‡xã€‚</p>
<p><img src="https://pic4.zhimg.com/80/v2-884e2868bde505c7fb7232f576bbcfdb_720w.jpg" alt="img"></p>
<p>éœ€è¦å¼ºè°ƒä¸€ç‚¹æ˜¯ï¼Œç¬¬ä¸€æ¬¡å¯¼å…¥æ¨¡å—å·²ç»å°†å…¶åŠ è½½åˆ°å†…å­˜ç©ºé—´äº†ï¼Œä¹‹åçš„é‡å¤å¯¼å…¥ä¼šç›´æ¥å¼•ç”¨å†…å­˜ä¸­å·²å­˜åœ¨çš„æ¨¡å—ï¼Œä¸ä¼šé‡å¤æ‰§è¡Œæ–‡ä»¶ï¼Œé€šè¿‡import sysï¼Œæ‰“å°sys.modulesçš„å€¼å¯ä»¥çœ‹åˆ°å†…å­˜ä¸­å·²ç»åŠ è½½çš„æ¨¡å—åã€‚</p>
<p>æç¤ºï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€åœ¨Pythonä¸­æ¨¡å—ä¹Ÿå±äºç¬¬ä¸€ç±»å¯¹è±¡ï¼Œå¯ä»¥è¿›è¡Œèµ‹å€¼ã€ä»¥æ•°æ®å½¢å¼ä¼ é€’ä»¥åŠä½œä¸ºå®¹å™¨ç±»å‹çš„å…ƒç´ ç­‰æ“ä½œã€‚</span></span><br><span class="line"><span class="comment">#2ã€æ¨¡å—ååº”è¯¥éµå¾ªå°å†™å½¢å¼ï¼Œæ ‡å‡†åº“ä»python2è¿‡æ¸¡åˆ°python3åšå‡ºäº†å¾ˆå¤šè¿™ç±»è°ƒæ•´ï¼Œæ¯”å¦‚ConfigParserã€Queueã€SocketServerå…¨æ›´æ–°ä¸ºçº¯å°å†™å½¢å¼ã€‚</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-d0708c002191a57754895d0ed4d05262_720w.jpg" alt="img"></p>
<p>ç”¨importè¯­å¥å¯¼å…¥å¤šä¸ªæ¨¡å—ï¼Œå¯ä»¥å†™å¤šè¡Œimportè¯­å¥</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> module1</span><br><span class="line"><span class="keyword">import</span> module2</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">import</span> moduleN</span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥åœ¨ä¸€è¡Œå¯¼å…¥ï¼Œç”¨é€—å·åˆ†éš”å¼€ä¸åŒçš„æ¨¡å—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> module1,module2,...,moduleN</span><br></pre></td></tr></table></figure>

<p>ä½†å…¶å®ç¬¬ä¸€ç§å½¢å¼æ›´ä¸ºè§„èŒƒï¼Œå¯è¯»æ€§æ›´å¼ºï¼Œæ¨èä½¿ç”¨ï¼Œè€Œä¸”æˆ‘ä»¬å¯¼å…¥çš„æ¨¡å—ä¸­å¯èƒ½åŒ…å«æœ‰pythonå†…ç½®çš„æ¨¡å—ã€ç¬¬ä¸‰æ–¹çš„æ¨¡å—ã€è‡ªå®šä¹‰çš„æ¨¡å—ï¼Œä¸ºäº†ä¾¿äºæ˜æ˜¾åœ°åŒºåˆ†å®ƒä»¬ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨æ–‡ä»¶çš„å¼€å¤´å¯¼å…¥æ¨¡å—ï¼Œå¹¶ä¸”åˆ†ç±»å¯¼å…¥ï¼Œä¸€ç±»æ¨¡å—çš„å¯¼å…¥ä¸å¦å¤–ä¸€ç±»çš„å¯¼å…¥ç”¨ç©ºè¡Œéš”å¼€ï¼Œä¸åŒç±»åˆ«çš„å¯¼å…¥é¡ºåºå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. pythonå†…ç½®æ¨¡å—</span></span><br><span class="line"><span class="comment">#2. ç¬¬ä¸‰æ–¹æ¨¡å—</span></span><br><span class="line"><span class="comment">#3. ç¨‹åºå‘˜è‡ªå®šä¹‰æ¨¡å—</span></span><br></pre></td></tr></table></figure>

<p> å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å‡½æ•°å†…å¯¼å…¥æ¨¡å—ï¼Œå¯¹æ¯”åœ¨æ–‡ä»¶å¼€å¤´å¯¼å…¥æ¨¡å—å±äºå…¨å±€ä½œç”¨åŸŸï¼Œåœ¨å‡½æ•°å†…å¯¼å…¥çš„æ¨¡å—åˆ™å±äºå±€éƒ¨çš„ä½œç”¨åŸŸã€‚</p>
<p><img src="https://pic1.zhimg.com/80/v2-506cce5c2b597bfe50f9644086cb2258_720w.jpg" alt="img"></p>
<h2 id="2-2-from-import-è¯­å¥"><a href="#2-2-from-import-è¯­å¥" class="headerlink" title="2.2 from-import è¯­å¥"></a>2.2 from-import è¯­å¥</h2><p>fromâ€¦importâ€¦ä¸importè¯­å¥åŸºæœ¬ä¸€è‡´ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼šä½¿ç”¨import fooå¯¼å…¥æ¨¡å—åï¼Œå¼•ç”¨æ¨¡å—ä¸­çš„åå­—éƒ½éœ€è¦åŠ ä¸Šfoo.ä½œä¸ºå‰ç¼€ï¼Œè€Œä½¿ç”¨from foo import x,get,change,Fooåˆ™å¯ä»¥åœ¨å½“å‰æ‰§è¡Œæ–‡ä»¶ä¸­ç›´æ¥å¼•ç”¨æ¨¡å—fooä¸­çš„åå­—ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> foo <span class="keyword">import</span> x,get,change <span class="comment">#å°†æ¨¡å—fooä¸­çš„xå’Œgetå¯¼å…¥åˆ°å½“å‰åç§°ç©ºé—´</span></span><br><span class="line">a=x <span class="comment">#ç›´æ¥ä½¿ç”¨æ¨¡å—fooä¸­çš„xèµ‹å€¼ç»™a</span></span><br><span class="line">get() <span class="comment">#ç›´æ¥æ‰§è¡Œfooä¸­çš„getå‡½æ•°</span></span><br><span class="line">change() <span class="comment">#å³ä¾¿æ˜¯å½“å‰æœ‰é‡åçš„xï¼Œä¿®æ”¹çš„ä»ç„¶æ˜¯æºæ–‡ä»¶ä¸­çš„x</span></span><br></pre></td></tr></table></figure>

<p>æ— éœ€åŠ å‰ç¼€çš„å¥½å¤„æ˜¯ä½¿å¾—æˆ‘ä»¬çš„ä»£ç æ›´åŠ ç®€æ´ï¼Œåå¤„åˆ™æ˜¯å®¹æ˜“ä¸å½“å‰åç§°ç©ºé—´ä¸­çš„åå­—å†²çªï¼Œå¦‚æœå½“å‰åç§°ç©ºé—´å­˜åœ¨ç›¸åŒçš„åå­—ï¼Œåˆ™åå®šä¹‰çš„åå­—ä¼šè¦†ç›–ä¹‹å‰å®šä¹‰çš„åå­—ã€‚</p>
<p><img src="https://pic3.zhimg.com/80/v2-13b67a1601f0ad7ca5f461fb17a631ce_720w.jpg" alt="img"></p>
<p>å¦å¤–fromè¯­å¥æ”¯æŒfrom foo import <em>è¯­æ³•ï¼Œ</em>ä»£è¡¨å°†fooä¸­æ‰€æœ‰çš„åå­—éƒ½å¯¼å…¥åˆ°å½“å‰ä½ç½®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> foo <span class="keyword">import</span> * <span class="comment">#æŠŠfooä¸­æ‰€æœ‰çš„åå­—éƒ½å¯¼å…¥åˆ°å½“å‰æ‰§è¡Œæ–‡ä»¶çš„åç§°ç©ºé—´ä¸­ï¼Œåœ¨å½“å‰ä½ç½®ç›´æ¥å¯ä»¥ä½¿ç”¨è¿™äº›åå­—</span></span><br><span class="line"></span><br><span class="line">a=x</span><br><span class="line">get()</span><br><span class="line">change()</span><br><span class="line">obj=Foo()</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬éœ€è¦å¼•ç”¨æ¨¡å—ä¸­çš„åå­—è¿‡å¤šçš„è¯ï¼Œå¯ä»¥é‡‡ç”¨ä¸Šè¿°çš„å¯¼å…¥å½¢å¼æ¥è¾¾åˆ°èŠ‚çœä»£ç é‡çš„æ•ˆæœï¼Œä½†æ˜¯éœ€è¦å¼ºè°ƒçš„ä¸€ç‚¹æ˜¯ï¼šåªèƒ½åœ¨æ¨¡å—æœ€é¡¶å±‚ä½¿ç”¨<em>çš„æ–¹å¼å¯¼å…¥ï¼Œåœ¨å‡½æ•°å†…åˆ™éæ³•ï¼Œå¹¶ä¸”</em>çš„æ–¹å¼ä¼šå¸¦æ¥ä¸€ç§å‰¯ä½œç”¨ï¼Œå³æˆ‘ä»¬æ— æ³•ææ¸…æ¥šç©¶ç«Ÿä»æºæ–‡ä»¶ä¸­å¯¼å…¥äº†å“ªäº›åå­—åˆ°å½“å‰ä½ç½®ï¼Œè¿™ææœ‰å¯èƒ½ä¸å½“å‰ä½ç½®çš„åå­—äº§ç”Ÿå†²çªã€‚æ¨¡å—çš„ç¼–å†™è€…å¯ä»¥åœ¨è‡ªå·±çš„æ–‡ä»¶ä¸­å®šä¹‰__all__å˜é‡ç”¨æ¥æ§åˆ¶*ä»£è¡¨çš„æ„æ€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#foo.py</span></span><br><span class="line">__all__=[<span class="string">&#x27;x&#x27;</span>,<span class="string">&#x27;get&#x27;</span>] <span class="comment">#è¯¥åˆ—è¡¨ä¸­æ‰€æœ‰çš„å…ƒç´ å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ¯ä¸ªå…ƒç´ å¯¹åº”foo.pyä¸­çš„ä¸€ä¸ªåå­—</span></span><br><span class="line">x=<span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(x)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change</span>():</span></span><br><span class="line">    <span class="keyword">global</span> x</span><br><span class="line">    x=<span class="number">0</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">self</span>):</span></span><br><span class="line">       <span class="built_in">print</span>(<span class="string">&#x27;from the func&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·æˆ‘ä»¬åœ¨å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨*å¯¼å…¥æ—¶ï¼Œå°±åªèƒ½å¯¼å…¥__all__å®šä¹‰çš„åå­—äº†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> foo <span class="keyword">import</span> * <span class="comment">#æ­¤æ—¶çš„*åªä»£è¡¨xå’Œget</span></span><br><span class="line"></span><br><span class="line">x <span class="comment">#å¯ç”¨</span></span><br><span class="line">get() <span class="comment">#å¯ç”¨</span></span><br><span class="line">change() <span class="comment">#ä¸å¯ç”¨</span></span><br><span class="line">Foo() <span class="comment">#ä¸å¯ç”¨</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-a7d712d021543c75a8f4be75999cee1e_720w.jpg" alt="img"></p>
<h2 id="2-3-å…¶ä»–å¯¼å…¥è¯­æ³•-as"><a href="#2-3-å…¶ä»–å¯¼å…¥è¯­æ³•-as" class="headerlink" title="2.3 å…¶ä»–å¯¼å…¥è¯­æ³•(as)"></a>2.3 å…¶ä»–å¯¼å…¥è¯­æ³•(as)</h2><p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨å½“å‰ä½ç½®ä¸ºå¯¼å…¥çš„æ¨¡å—èµ·ä¸€ä¸ªåˆ«å</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> foo <span class="keyword">as</span> f <span class="comment">#ä¸ºå¯¼å…¥çš„æ¨¡å—fooåœ¨å½“å‰ä½ç½®èµ·åˆ«åfï¼Œä»¥åå†ä½¿ç”¨æ—¶å°±ç”¨è¿™ä¸ªåˆ«åf</span></span><br><span class="line">f.x</span><br><span class="line">f.get()</span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥ä¸ºå¯¼å…¥çš„ä¸€ä¸ªåå­—èµ·åˆ«å</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> foo <span class="keyword">import</span> get <span class="keyword">as</span> get_x</span><br><span class="line">get_x()</span><br></pre></td></tr></table></figure>

<p>é€šå¸¸åœ¨è¢«å¯¼å…¥çš„åå­—è¿‡é•¿æ—¶é‡‡ç”¨èµ·åˆ«åçš„æ–¹å¼æ¥ç²¾ç®€ä»£ç ï¼Œå¦å¤–ä¸ºè¢«å¯¼å…¥çš„åå­—èµ·åˆ«åå¯ä»¥å¾ˆå¥½åœ°é¿å…ä¸å½“å‰åå­—å‘ç”Ÿå†²çªï¼Œè¿˜æœ‰å¾ˆé‡è¦çš„ä¸€ç‚¹å°±æ˜¯ï¼šå¯ä»¥ä¿æŒè°ƒç”¨æ–¹å¼çš„ä¸€è‡´æ€§ï¼Œä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸¤ä¸ªæ¨¡å—jsonå’ŒpickleåŒæ—¶å®ç°äº†loadæ–¹æ³•ï¼Œä½œç”¨æ˜¯ä»ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶ä¸­è§£æå‡ºç»“æ„åŒ–çš„æ•°æ®ï¼Œä½†è§£æçš„æ ¼å¼ä¸åŒï¼Œå¯ä»¥ç”¨ä¸‹è¿°ä»£ç æœ‰é€‰æ‹©æ€§åœ°åŠ è½½ä¸åŒçš„æ¨¡å—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> data_format == <span class="string">&#x27;json&#x27;</span>:</span><br><span class="line">    <span class="keyword">import</span> json <span class="keyword">as</span> serialize <span class="comment">#å¦‚æœæ•°æ®æ ¼å¼æ˜¯jsonï¼Œé‚£ä¹ˆå¯¼å…¥jsonæ¨¡å—å¹¶å‘½åä¸ºserialize</span></span><br><span class="line"><span class="keyword">elif</span> data_format == <span class="string">&#x27;pickle&#x27;</span>:</span><br><span class="line">    <span class="keyword">import</span> pickle <span class="keyword">as</span> serialize <span class="comment">#å¦‚æœæ•°æ®æ ¼å¼æ˜¯pickleï¼Œé‚£ä¹ˆå¯¼å…¥pickleæ¨¡å—å¹¶å‘½åä¸ºserialize</span></span><br><span class="line"></span><br><span class="line">data=serialize.load(fn) <span class="comment">#æœ€ç»ˆè°ƒç”¨çš„æ–¹å¼æ˜¯ä¸€è‡´çš„</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-46fbc37fa93302dfacd0803f7d78715d_720w.jpg" alt="img"></p>
<h2 id="2-4-å¾ªç¯å¯¼å…¥é—®é¢˜"><a href="#2-4-å¾ªç¯å¯¼å…¥é—®é¢˜" class="headerlink" title="2.4 å¾ªç¯å¯¼å…¥é—®é¢˜"></a>2.4 å¾ªç¯å¯¼å…¥é—®é¢˜</h2><p><img src="https://pic1.zhimg.com/80/v2-415ea58d416900ea166573cb65543080_720w.jpg" alt="img"></p>
<p>å¾ªç¯å¯¼å…¥é—®é¢˜æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªæ¨¡å—åŠ è½½&#x2F;å¯¼å…¥çš„è¿‡ç¨‹ä¸­å¯¼å…¥å¦å¤–ä¸€ä¸ªæ¨¡å—ï¼Œè€Œåœ¨å¦å¤–ä¸€ä¸ªæ¨¡å—ä¸­åˆè¿”å›æ¥å¯¼å…¥ç¬¬ä¸€ä¸ªæ¨¡å—ä¸­çš„åå­—ï¼Œç”±äºç¬¬ä¸€ä¸ªæ¨¡å—å°šæœªåŠ è½½å®Œæ¯•ï¼Œæ‰€ä»¥å¼•ç”¨å¤±è´¥ã€æŠ›å‡ºå¼‚å¸¸ï¼Œç©¶å…¶æ ¹æºå°±æ˜¯åœ¨pythonä¸­ï¼ŒåŒä¸€ä¸ªæ¨¡å—åªä¼šåœ¨ç¬¬ä¸€æ¬¡å¯¼å…¥æ—¶æ‰§è¡Œå…¶å†…éƒ¨ä»£ç ï¼Œå†æ¬¡å¯¼å…¥è¯¥æ¨¡å—æ—¶ï¼Œå³ä¾¿æ˜¯è¯¥æ¨¡å—å°šæœªå®Œå…¨åŠ è½½å®Œæ¯•ä¹Ÿä¸ä¼šå»é‡å¤æ‰§è¡Œå†…éƒ¨ä»£ç </p>
<p><strong>æˆ‘ä»¬ä»¥ä¸‹è¿°æ–‡ä»¶ä¸ºä¾‹ï¼Œæ¥è¯¦ç»†åˆ†æå¾ªç¯&#x2F;åµŒå¥—å¯¼å…¥å‡ºç°å¼‚å¸¸çš„åŸå› ä»¥åŠè§£å†³çš„æ–¹æ¡ˆ</strong></p>
<p>m1.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;æ­£åœ¨å¯¼å…¥m1&#x27;</span>)</span><br><span class="line"><span class="keyword">from</span> m2 <span class="keyword">import</span> y</span><br><span class="line"></span><br><span class="line">x=<span class="string">&#x27;m1&#x27;</span></span><br></pre></td></tr></table></figure>

<p>m2.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;æ­£åœ¨å¯¼å…¥m2&#x27;</span>)</span><br><span class="line"><span class="keyword">from</span> m1 <span class="keyword">import</span> x</span><br><span class="line"></span><br><span class="line">y=<span class="string">&#x27;m2&#x27;</span></span><br></pre></td></tr></table></figure>

<p>run.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> m1</span><br></pre></td></tr></table></figure>

<p><strong>æµ‹è¯•ä¸€</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€æ‰§è¡Œrun.pyä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">æ­£åœ¨å¯¼å…¥m1</span><br><span class="line">æ­£åœ¨å¯¼å…¥m2</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;/Users/linhaifeng/PycharmProjects/pro01/1 aaaaç»ƒä¹ ç›®å½•/aa.py&quot;</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">import</span> m1</span><br><span class="line">  File <span class="string">&quot;/Users/linhaifeng/PycharmProjects/pro01/1 aaaaç»ƒä¹ ç›®å½•/m1.py&quot;</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> m2 <span class="keyword">import</span> y</span><br><span class="line">  File <span class="string">&quot;/Users/linhaifeng/PycharmProjects/pro01/1 aaaaç»ƒä¹ ç›®å½•/m2.py&quot;</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> m1 <span class="keyword">import</span> x</span><br><span class="line">ImportError: cannot <span class="keyword">import</span> name <span class="string">&#x27;x&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€åˆ†æ</span></span><br><span class="line">å…ˆæ‰§è¡Œrun.py---&gt;æ‰§è¡Œ<span class="keyword">import</span> m1ï¼Œå¼€å§‹å¯¼å…¥m1å¹¶è¿è¡Œå…¶å†…éƒ¨ä»£ç ---&gt;æ‰“å°å†…å®¹<span class="string">&quot;æ­£åœ¨å¯¼å…¥m1&quot;</span></span><br><span class="line">---&gt;æ‰§è¡Œ<span class="keyword">from</span> m2 <span class="keyword">import</span> y å¼€å§‹å¯¼å…¥m2å¹¶è¿è¡Œå…¶å†…éƒ¨ä»£ç ---&gt;æ‰“å°å†…å®¹â€œæ­£åœ¨å¯¼å…¥m2â€---&gt;æ‰§è¡Œ<span class="keyword">from</span> m1 <span class="keyword">import</span> x,ç”±äºm1å·²ç»è¢«å¯¼å…¥è¿‡äº†ï¼Œæ‰€ä»¥ä¸ä¼šé‡æ–°å¯¼å…¥ï¼Œæ‰€ä»¥ç›´æ¥å»m1ä¸­æ‹¿xï¼Œç„¶è€Œxæ­¤æ—¶å¹¶æ²¡æœ‰å­˜åœ¨äºm1ä¸­ï¼Œæ‰€ä»¥æŠ¥é”™</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-991b007f2b930863c768b479e0f303eb_720w.jpg" alt="img"></p>
<p><strong>æµ‹è¯•äºŒ</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€æ‰§è¡Œæ–‡ä»¶ä¸ç­‰äºå¯¼å…¥æ–‡ä»¶ï¼Œæ¯”å¦‚æ‰§è¡Œm1.pyä¸ç­‰äºå¯¼å…¥äº†m1</span></span><br><span class="line">ç›´æ¥æ‰§è¡Œm1.pyæŠ›å‡ºå¼‚å¸¸</span><br><span class="line">æ­£åœ¨å¯¼å…¥m1</span><br><span class="line">æ­£åœ¨å¯¼å…¥m2</span><br><span class="line">æ­£åœ¨å¯¼å…¥m1</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;/Users/linhaifeng/PycharmProjects/pro01/1 aaaaç»ƒä¹ ç›®å½•/m1.py&quot;</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> m2 <span class="keyword">import</span> y</span><br><span class="line">  File <span class="string">&quot;/Users/linhaifeng/PycharmProjects/pro01/1 aaaaç»ƒä¹ ç›®å½•/m2.py&quot;</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> m1 <span class="keyword">import</span> x</span><br><span class="line">  File <span class="string">&quot;/Users/linhaifeng/PycharmProjects/pro01/1 aaaaç»ƒä¹ ç›®å½•/m1.py&quot;</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> m2 <span class="keyword">import</span> y</span><br><span class="line">ImportError: cannot <span class="keyword">import</span> name <span class="string">&#x27;y&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€åˆ†æ</span></span><br><span class="line">æ‰§è¡Œm1.pyï¼Œæ‰“å°â€œæ­£åœ¨å¯¼å…¥m1â€ï¼Œæ‰§è¡Œ<span class="keyword">from</span> m2 <span class="keyword">import</span> y ï¼Œå¯¼å…¥m2è¿›è€Œæ‰§è¡Œm2.pyå†…éƒ¨ä»£ç ---&gt;æ‰“å°<span class="string">&quot;æ­£åœ¨å¯¼å…¥m2&quot;</span>ï¼Œæ‰§è¡Œ<span class="keyword">from</span> m1 <span class="keyword">import</span> xï¼Œæ­¤æ—¶m1æ˜¯ç¬¬ä¸€æ¬¡è¢«å¯¼å…¥ï¼Œæ‰§è¡Œm1.pyå¹¶ä¸ç­‰äºå¯¼å…¥äº†m1ï¼Œäºæ˜¯å¼€å§‹å¯¼å…¥m1å¹¶æ‰§è¡Œå…¶å†…éƒ¨ä»£ç ---&gt;æ‰“å°<span class="string">&quot;æ­£åœ¨å¯¼å…¥m1&quot;</span>ï¼Œæ‰§è¡Œ<span class="keyword">from</span> m1 <span class="keyword">import</span> yï¼Œç”±äºm1å·²ç»è¢«å¯¼å…¥è¿‡äº†ï¼Œæ‰€ä»¥æ— éœ€ç»§ç»­å¯¼å…¥è€Œç›´æ¥é—®m2è¦yï¼Œç„¶è€Œyæ­¤æ—¶å¹¶æ²¡æœ‰å­˜åœ¨äºm2ä¸­æ‰€ä»¥æŠ¥é”™</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-99a7e78c8f88bf5e443c03d3b94183ca_720w.jpg" alt="img"></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ–¹æ¡ˆä¸€ï¼šå¯¼å…¥è¯­å¥æ”¾åˆ°æœ€åï¼Œä¿è¯åœ¨å¯¼å…¥æ—¶ï¼Œæ‰€æœ‰åå­—éƒ½å·²ç»åŠ è½½è¿‡</span></span><br><span class="line"><span class="comment"># æ–‡ä»¶ï¼šm1.py</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;æ­£åœ¨å¯¼å…¥m1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">x=<span class="string">&#x27;m1&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> m2 <span class="keyword">import</span> y</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–‡ä»¶ï¼šm2.py</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;æ­£åœ¨å¯¼å…¥m2&#x27;</span>)</span><br><span class="line">y=<span class="string">&#x27;m2&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> m1 <span class="keyword">import</span> x</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–‡ä»¶ï¼šrun.pyå†…å®¹å¦‚ä¸‹ï¼Œæ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">import</span> m1</span><br><span class="line"><span class="built_in">print</span>(m1.x)</span><br><span class="line"><span class="built_in">print</span>(m1.y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ¡ˆäºŒï¼šå¯¼å…¥è¯­å¥æ”¾åˆ°å‡½æ•°ä¸­ï¼Œåªæœ‰åœ¨è°ƒç”¨å‡½æ•°æ—¶æ‰ä¼šæ‰§è¡Œå…¶å†…éƒ¨ä»£ç </span></span><br><span class="line"><span class="comment"># æ–‡ä»¶ï¼šm1.py</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;æ­£åœ¨å¯¼å…¥m1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span>():</span></span><br><span class="line">    <span class="keyword">from</span> m2 <span class="keyword">import</span> y</span><br><span class="line">    <span class="built_in">print</span>(x,y)</span><br><span class="line"></span><br><span class="line">x = <span class="string">&#x27;m1&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–‡ä»¶ï¼šm2.py</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;æ­£åœ¨å¯¼å…¥m2&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span>():</span></span><br><span class="line">    <span class="keyword">from</span> m1 <span class="keyword">import</span> x</span><br><span class="line">    <span class="built_in">print</span>(x,y)</span><br><span class="line"></span><br><span class="line">y = <span class="string">&#x27;m2&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–‡ä»¶ï¼šrun.pyå†…å®¹å¦‚ä¸‹ï¼Œæ‰§è¡Œè¯¥æ–‡ä»¶ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">import</span> m1</span><br><span class="line"></span><br><span class="line">m1.f1()</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼šå¾ªç¯å¯¼å…¥é—®é¢˜å¤§å¤šæ•°æƒ…å†µæ˜¯å› ä¸ºç¨‹åºè®¾è®¡å¤±è¯¯å¯¼è‡´ï¼Œä¸Šè¿°è§£å†³æ–¹æ¡ˆä¹Ÿåªæ˜¯åœ¨çƒ‚è®¾è®¡ä¹‹ä¸Šçš„æ— å¥ˆä¹‹ä¸¾ï¼Œåœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­åº”è¯¥å°½é‡é¿å…å‡ºç°å¾ªç¯&#x2F;åµŒå¥—å¯¼å…¥ï¼Œå¦‚æœå¤šä¸ªæ¨¡å—ç¡®å®éƒ½éœ€è¦å…±äº«æŸäº›æ•°æ®ï¼Œå¯ä»¥å°†å…±äº«çš„æ•°æ®é›†ä¸­å­˜æ”¾åˆ°æŸä¸€ä¸ªåœ°æ–¹ï¼Œç„¶åè¿›è¡Œå¯¼å…¥</strong></p>
<p><img src="https://pic2.zhimg.com/80/v2-ba9d3d04398d89655c579c67cbe9f9f1_720w.jpg" alt="img"></p>
<h2 id="2-5-æœç´¢æ¨¡å—çš„è·¯å¾„ä¸ä¼˜å…ˆçº§"><a href="#2-5-æœç´¢æ¨¡å—çš„è·¯å¾„ä¸ä¼˜å…ˆçº§" class="headerlink" title="2.5 æœç´¢æ¨¡å—çš„è·¯å¾„ä¸ä¼˜å…ˆçº§"></a>2.5 æœç´¢æ¨¡å—çš„è·¯å¾„ä¸ä¼˜å…ˆçº§</h2><p>æ¨¡å—å…¶å®åˆ†ä¸ºå››ä¸ªé€šç”¨ç±»åˆ«ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<p>1ã€ä½¿ç”¨çº¯Pythonä»£ç ç¼–å†™çš„pyæ–‡ä»¶</p>
<p>2ã€åŒ…å«ä¸€ç³»åˆ—æ¨¡å—çš„åŒ…</p>
<p>3ã€ä½¿ç”¨Cç¼–å†™å¹¶é“¾æ¥åˆ°Pythonè§£é‡Šå™¨ä¸­çš„å†…ç½®æ¨¡å—</p>
<p>4ã€ä½¿ç”¨Cæˆ–C++ç¼–è¯‘çš„æ‰©å±•æ¨¡å—</p>
<p>åœ¨å¯¼å…¥ä¸€ä¸ªæ¨¡å—æ—¶ï¼Œå¦‚æœè¯¥æ¨¡å—å·²åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œåˆ™ç›´æ¥å¼•ç”¨ï¼Œå¦åˆ™ä¼šä¼˜å…ˆæŸ¥æ‰¾å†…ç½®æ¨¡å—ï¼Œç„¶åæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºä¾æ¬¡æ£€ç´¢sys.pathä¸­å®šä¹‰çš„è·¯å¾„ï¼Œç›´åˆ°æ‰¾æ¨¡å—å¯¹åº”çš„æ–‡ä»¶ä¸ºæ­¢ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚sys.pathä¹Ÿè¢«ç§°ä¸ºæ¨¡å—çš„æœç´¢è·¯å¾„ï¼Œå®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨ç±»å‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>sys.path</span><br><span class="line">[<span class="string">&#x27;&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;/Library/Frameworks/Python.framework/Versions/3.5/lib/python35.zip&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5&#x27;</span>,</span><br><span class="line">...,</span><br><span class="line"><span class="string">&#x27;/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages&#x27;</span></span><br></pre></td></tr></table></figure>

<p>åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ å…¶å®éƒ½å¯ä»¥å½“ä½œä¸€ä¸ªç›®å½•æ¥çœ‹ï¼šåœ¨åˆ—è¡¨ä¸­ä¼šå‘ç°æœ‰.zipæˆ–.eggç»“å°¾çš„æ–‡ä»¶ï¼ŒäºŒè€…æ˜¯ä¸åŒå½¢å¼çš„å‹ç¼©æ–‡ä»¶ï¼Œäº‹å®ä¸ŠPythonç¡®å®æ”¯æŒä»ä¸€ä¸ªå‹ç¼©æ–‡ä»¶ä¸­å¯¼å…¥æ¨¡å—ï¼Œæˆ‘ä»¬ä¹Ÿåªéœ€è¦æŠŠå®ƒä»¬éƒ½å½“æˆç›®å½•å»çœ‹å³å¯ã€‚</p>
<p><img src="https://pic3.zhimg.com/80/v2-b380918dbff3c80f06c3e47d778b913e_720w.jpg" alt="img"></p>
<p>sys.pathä¸­çš„ç¬¬ä¸€ä¸ªè·¯å¾„é€šå¸¸ä¸ºç©ºï¼Œä»£è¡¨æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ï¼Œæ‰€ä»¥åœ¨è¢«å¯¼å…¥æ¨¡å—ä¸æ‰§è¡Œæ–‡ä»¶åœ¨åŒä¸€ç›®å½•ä¸‹æ—¶è‚¯å®šæ˜¯å¯ä»¥æ­£å¸¸å¯¼å…¥çš„ï¼Œè€Œé’ˆå¯¹è¢«å¯¼å…¥çš„æ¨¡å—ä¸æ‰§è¡Œæ–‡ä»¶åœ¨ä¸åŒè·¯å¾„ä¸‹çš„æƒ…å†µï¼Œä¸ºäº†ç¡®ä¿æ¨¡å—å¯¹åº”çš„æºæ–‡ä»¶ä»å¯ä»¥è¢«æ‰¾åˆ°ï¼Œéœ€è¦å°†æºæ–‡ä»¶foo.pyæ‰€åœ¨çš„è·¯å¾„æ·»åŠ åˆ°sys.pathä¸­ï¼Œå‡è®¾foo.pyæ‰€åœ¨çš„è·¯å¾„ä¸º&#x2F;pythoner&#x2F;projects&#x2F;</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(<span class="string">r&#x27;/pythoner/projects/&#x27;</span>) <span class="comment">#ä¹Ÿå¯ä»¥ä½¿ç”¨sys.path.insert(â€¦â€¦)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> foo <span class="comment">#æ— è®ºfoo.pyåœ¨ä½•å¤„,æˆ‘ä»¬éƒ½å¯ä»¥å¯¼å…¥å®ƒäº†</span></span><br></pre></td></tr></table></figure>

<h2 id="2-6-åŒºåˆ†pyæ–‡ä»¶çš„ä¸¤ç§ç”¨é€”"><a href="#2-6-åŒºåˆ†pyæ–‡ä»¶çš„ä¸¤ç§ç”¨é€”" class="headerlink" title="2.6 åŒºåˆ†pyæ–‡ä»¶çš„ä¸¤ç§ç”¨é€”"></a>2.6 åŒºåˆ†pyæ–‡ä»¶çš„ä¸¤ç§ç”¨é€”</h2><p>ä¸€ä¸ªPythonæ–‡ä»¶æœ‰ä¸¤ç§ç”¨é€”ï¼Œä¸€ç§è¢«å½“ä¸»ç¨‹åº&#x2F;è„šæœ¬æ‰§è¡Œï¼Œå¦ä¸€ç§è¢«å½“æ¨¡å—å¯¼å…¥ï¼Œä¸ºäº†åŒºåˆ«åŒä¸€ä¸ªæ–‡ä»¶çš„ä¸åŒç”¨é€”ï¼Œæ¯ä¸ªpyæ–‡ä»¶éƒ½å†…ç½®äº†__name__å˜é‡ï¼Œè¯¥å˜é‡åœ¨pyæ–‡ä»¶è¢«å½“åšè„šæœ¬æ‰§è¡Œæ—¶èµ‹å€¼ä¸ºâ€œ__main__â€,åœ¨pyæ–‡ä»¶è¢«å½“åšæ¨¡å—å¯¼å…¥æ—¶èµ‹å€¼ä¸ºæ¨¡å—å</p>
<p><img src="https://pic4.zhimg.com/80/v2-d10449104b8d634196b784b31ab1f0e3_720w.jpg" alt="img"></p>
<p>ä½œä¸ºæ¨¡å—foo.pyçš„å¼€å‘è€…ï¼Œå¯ä»¥åœ¨æ–‡ä»¶æœ«å°¾åŸºäº__name__åœ¨ä¸åŒåº”ç”¨åœºæ™¯ä¸‹å€¼çš„ä¸åŒæ¥æ§åˆ¶æ–‡ä»¶æ‰§è¡Œä¸åŒçš„é€»è¾‘</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#foo.py</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    foo.pyè¢«å½“åšè„šæœ¬æ‰§è¡Œæ—¶è¿è¡Œçš„ä»£ç </span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    foo.pyè¢«å½“åšæ¨¡å—å¯¼å…¥æ—¶è¿è¡Œçš„ä»£ç </span><br></pre></td></tr></table></figure>

<p>é€šå¸¸æˆ‘ä»¬ä¼šåœ¨ifçš„å­ä»£ç å—ä¸­ç¼–å†™é’ˆå¯¹æ¨¡å—åŠŸèƒ½çš„æµ‹è¯•ä»£ç ï¼Œè¿™æ ·foo.pyåœ¨è¢«å½“åšè„šæœ¬è¿è¡Œæ—¶ï¼Œå°±ä¼šæ‰§è¡Œæµ‹è¯•ä»£ç ï¼Œè€Œè¢«å½“åšæ¨¡å—å¯¼å…¥æ—¶åˆ™ä¸ç”¨æ‰§è¡Œæµ‹è¯•ä»£ç ã€‚</p>
<h2 id="2-7-ç¼–å†™ä¸€ä¸ªè§„èŒƒçš„æ¨¡å—"><a href="#2-7-ç¼–å†™ä¸€ä¸ªè§„èŒƒçš„æ¨¡å—" class="headerlink" title="2.7 ç¼–å†™ä¸€ä¸ªè§„èŒƒçš„æ¨¡å—"></a>2.7 ç¼–å†™ä¸€ä¸ªè§„èŒƒçš„æ¨¡å—</h2><p><img src="https://pic2.zhimg.com/80/v2-c8e40baa1976d8e26f75f0fa2ceb5cd5_720w.jpg" alt="img"></p>
<p>æˆ‘ä»¬åœ¨ç¼–å†™pyæ–‡ä»¶æ—¶ï¼Œéœ€è¦æ—¶åˆ»æé†’è‡ªå·±ï¼Œè¯¥æ–‡ä»¶æ—¢æ˜¯ç»™è‡ªå·±ç”¨çš„ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šè¢«å…¶ä»–äººä½¿ç”¨ï¼Œå› è€Œä»£ç çš„å¯è¯»æ€§ä¸æ˜“ç»´æŠ¤æ€§æ˜¾å¾—ååˆ†é‡è¦ï¼Œä¸ºæ­¤æˆ‘ä»¬åœ¨ç¼–å†™ä¸€ä¸ªæ¨¡å—æ—¶æœ€å¥½æŒ‰ç…§ç»Ÿä¸€çš„è§„èŒƒå»ç¼–å†™ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python #é€šå¸¸åªåœ¨ç±»unixç¯å¢ƒæœ‰æ•ˆ,ä½œç”¨æ˜¯å¯ä»¥ä½¿ç”¨è„šæœ¬åæ¥æ‰§è¡Œï¼Œè€Œæ— éœ€ç›´æ¥è°ƒç”¨è§£é‡Šå™¨ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;The module is used to...&quot;</span> <span class="comment">#æ¨¡å—çš„æ–‡æ¡£æè¿°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys <span class="comment">#å¯¼å…¥æ¨¡å—</span></span><br><span class="line"></span><br><span class="line">x=<span class="number">1</span> <span class="comment">#å®šä¹‰å…¨å±€å˜é‡,å¦‚æœéå¿…é¡»,åˆ™æœ€å¥½ä½¿ç”¨å±€éƒ¨å˜é‡,è¿™æ ·å¯ä»¥æé«˜ä»£ç çš„æ˜“ç»´æŠ¤æ€§,å¹¶ä¸”å¯ä»¥èŠ‚çœå†…å­˜æé«˜æ€§èƒ½</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span> <span class="comment">#å®šä¹‰ç±»,å¹¶å†™å¥½ç±»çš„æ³¨é‡Š</span></span><br><span class="line">    <span class="string">&#x27;Class Foo is used to...&#x27;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>():</span> <span class="comment">#å®šä¹‰å‡½æ•°,å¹¶å†™å¥½å‡½æ•°çš„æ³¨é‡Š</span></span><br><span class="line">    <span class="string">&#x27;Function test is used toâ€¦&#x27;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>: <span class="comment">#ä¸»ç¨‹åº</span></span><br><span class="line">    test() <span class="comment">#åœ¨è¢«å½“åšè„šæœ¬æ‰§è¡Œæ—¶,æ‰§è¡Œæ­¤å¤„çš„ä»£ç </span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-0aa2d5e22f88e3b8b8f4b6f2fdfb76b1_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p>æ¨¡å—çš„ä½¿ç”¨ä¹‹import</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=65">https://www.bilibili.com/video/av73342471?p=65www.bilibili.com/video/av73342471?p=65</a></p>
<p>æ¨¡å—çš„ä½¿ç”¨ä¹‹fromâ€¦importâ€¦</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=66">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=66<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p>åŒºåˆ†pythonæ–‡ä»¶çš„ä¸¤ç§ç”¨é€”</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=67">https://www.bilibili.com/video/av73342471?p=67www.bilibili.com/video/av73342471?p=67</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>22-è½¯ä»¶å¼€å‘çš„ç›®å½•è§„èŒƒ</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/22_%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E7%9A%84%E7%9B%AE%E5%BD%95%E8%A7%84%E8%8C%83/</url>
    <content><![CDATA[<h2 id="è½¯ä»¶å¼€å‘ç›®å½•è§„èŒƒ"><a href="#è½¯ä»¶å¼€å‘ç›®å½•è§„èŒƒ" class="headerlink" title="è½¯ä»¶å¼€å‘ç›®å½•è§„èŒƒ"></a>è½¯ä»¶å¼€å‘ç›®å½•è§„èŒƒ</h2><p><img src="https://pic2.zhimg.com/80/v2-0cda8e5e376f38fcc2d7c5dac518c0b9_720w.jpg" alt="img"></p>
<p>å¼ºçƒˆæ¨èé…å¥—èµ„æ–™ï¼š<a href="https://link.zhihu.com/?target=https://egonlin.com/book.html">egonæ–°ä¹¦æ¥è¢­å¹²è´§æ»¡æ»¡ - linhaifeng</a></p>
<p>ä¸ºäº†æé«˜ç¨‹åºçš„å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§ï¼Œæˆ‘ä»¬åº”è¯¥ä¸ºè½¯ä»¶è®¾è®¡è‰¯å¥½çš„ç›®å½•ç»“æ„ï¼Œè¿™ä¸è§„èŒƒçš„ç¼–ç é£æ ¼åŒç­‰é‡è¦ã€‚è½¯ä»¶çš„ç›®å½•è§„èŒƒå¹¶æ— ç¡¬æ€§æ ‡å‡†ï¼Œåªè¦æ¸…æ™°å¯è¯»å³å¯ï¼Œå‡è®¾ä½ çš„è½¯ä»¶åä¸ºfooï¼Œç¬”è€…æ¨èç›®å½•ç»“æ„å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Foo/</span><br><span class="line">|-- core/</span><br><span class="line">|   |-- core.py</span><br><span class="line">|</span><br><span class="line">|-- api/</span><br><span class="line">|   |-- api.py</span><br><span class="line">|</span><br><span class="line">|-- db/</span><br><span class="line">|   |-- db_handle.py</span><br><span class="line">|</span><br><span class="line">|-- lib/</span><br><span class="line">|   |-- common.py</span><br><span class="line">|</span><br><span class="line">|-- conf/</span><br><span class="line">|   |-- settings.py</span><br><span class="line">|</span><br><span class="line">|-- run.py</span><br><span class="line">|-- setup.py</span><br><span class="line">|-- requirements.txt</span><br><span class="line">|-- README</span><br></pre></td></tr></table></figure>

<p>ç®€è¦è§£é‡Šä¸€ä¸‹:</p>
<p> â€¢ core&#x2F;: å­˜æ”¾ä¸šåŠ¡é€»è¾‘ç›¸å…³ä»£ç </p>
<p> â€¢ api&#x2F;: å­˜æ”¾æ¥å£æ–‡ä»¶ï¼Œæ¥å£ä¸»è¦ç”¨äºä¸ºä¸šåŠ¡é€»è¾‘æä¾›æ•°æ®æ“ä½œã€‚</p>
<p> â€¢ db&#x2F;: å­˜æ”¾æ“ä½œæ•°æ®åº“ç›¸å…³æ–‡ä»¶ï¼Œä¸»è¦ç”¨äºä¸æ•°æ®åº“äº¤äº’</p>
<p> â€¢ lib&#x2F;: å­˜æ”¾ç¨‹åºä¸­å¸¸ç”¨çš„è‡ªå®šä¹‰æ¨¡å—</p>
<p> â€¢ conf&#x2F;: å­˜æ”¾é…ç½®æ–‡ä»¶</p>
<p> â€¢ run.py: ç¨‹åºçš„å¯åŠ¨æ–‡ä»¶ï¼Œä¸€èˆ¬æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œå› ä¸ºåœ¨è¿è¡Œæ—¶ä¼šé»˜è®¤å°†è¿è¡Œæ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä½œä¸ºsys.pathçš„ç¬¬ä¸€ä¸ªè·¯å¾„ï¼Œè¿™æ ·å°±çœå»äº†å¤„ç†ç¯å¢ƒå˜é‡çš„æ­¥éª¤</p>
<p> â€¢ setup.py: å®‰è£…ã€éƒ¨ç½²ã€æ‰“åŒ…çš„è„šæœ¬ã€‚</p>
<p> â€¢ requirements.txt: å­˜æ”¾è½¯ä»¶ä¾èµ–çš„å¤–éƒ¨PythonåŒ…åˆ—è¡¨ã€‚</p>
<p> â€¢ README: é¡¹ç›®è¯´æ˜æ–‡ä»¶ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæœ‰ä¸€äº›æ–¹æ¡ˆç»™å‡ºäº†æ›´åŠ å¤šçš„å†…å®¹ï¼Œæ¯”å¦‚LICENSE.txt,ChangeLog.txtæ–‡ä»¶ç­‰ï¼Œä¸»è¦æ˜¯åœ¨é¡¹ç›®éœ€è¦å¼€æºæ—¶æ‰ä¼šç”¨åˆ°ï¼Œè¯·è¯»è€…è‡ªè¡ŒæŸ¥é˜…ã€‚</p>
<p>å…³äºREADMEçš„å†…å®¹ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯æ¯ä¸ªé¡¹ç›®éƒ½åº”è¯¥æœ‰çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œç›®çš„æ˜¯èƒ½ç®€è¦æè¿°è¯¥é¡¹ç›®çš„ä¿¡æ¯ï¼Œè®©è¯»è€…å¿«é€Ÿäº†è§£è¿™ä¸ªé¡¹ç›®ã€‚å®ƒéœ€è¦è¯´æ˜ä»¥ä¸‹å‡ ä¸ªäº‹é¡¹:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>ã€è½¯ä»¶å®šä½ï¼Œè½¯ä»¶çš„åŸºæœ¬åŠŸèƒ½ï¼›</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>ã€è¿è¡Œä»£ç çš„æ–¹æ³•: å®‰è£…ç¯å¢ƒã€å¯åŠ¨å‘½ä»¤ç­‰ï¼›</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>ã€ç®€è¦çš„ä½¿ç”¨è¯´æ˜ï¼›</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>ã€ä»£ç ç›®å½•ç»“æ„è¯´æ˜ï¼Œæ›´è¯¦ç»†ç‚¹å¯ä»¥è¯´æ˜è½¯ä»¶çš„åŸºæœ¬åŸç†ï¼›</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>ã€å¸¸è§é—®é¢˜è¯´æ˜ã€‚</span><br></pre></td></tr></table></figure>

<p>å…³äºsetup.pyå’Œrequirements.txtï¼š</p>
<p><img src="https://pic3.zhimg.com/80/v2-6e2c485cb45f4d50dd8d98f091fe062a_720w.jpg" alt="img"></p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œç”¨setup.pyæ¥ç®¡ç†ä»£ç çš„æ‰“åŒ…ã€å®‰è£…ã€éƒ¨ç½²é—®é¢˜ã€‚ä¸šç•Œæ ‡å‡†çš„å†™æ³•æ˜¯ç”¨Pythonæµè¡Œçš„æ‰“åŒ…å·¥å…·setuptoolsæ¥ç®¡ç†è¿™äº›äº‹æƒ…ï¼Œè¿™ç§æ–¹å¼æ™®éåº”ç”¨äºå¼€æºé¡¹ç›®ä¸­ã€‚ä¸è¿‡è¿™é‡Œçš„æ ¸å¿ƒæ€æƒ³ä¸æ˜¯ç”¨æ ‡å‡†åŒ–çš„å·¥å…·æ¥è§£å†³è¿™äº›é—®é¢˜ï¼Œè€Œæ˜¯è¯´ï¼Œä¸€ä¸ªé¡¹ç›®ä¸€å®šè¦æœ‰ä¸€ä¸ªå®‰è£…éƒ¨ç½²å·¥å…·ï¼Œèƒ½å¿«é€Ÿä¾¿æ·çš„åœ¨ä¸€å°æ–°æœºå™¨ä¸Šå°†ç¯å¢ƒè£…å¥½ã€ä»£ç éƒ¨ç½²å¥½å’Œå°†ç¨‹åºè¿è¡Œèµ·æ¥ã€‚</p>
<p>requirements.txtæ–‡ä»¶çš„å­˜åœ¨æ˜¯ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…ç»´æŠ¤è½¯ä»¶çš„ä¾èµ–åº“ã€‚æˆ‘ä»¬éœ€è¦å°†å¼€å‘è¿‡ç¨‹ä¸­ä¾èµ–åº“çš„ä¿¡æ¯æ·»åŠ è¿›è¯¥æ–‡ä»¶ä¸­ï¼Œé¿å…åœ¨ setup.pyå®‰è£…ä¾èµ–æ—¶æ¼æ‰è½¯ä»¶åŒ…ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿äº†ä½¿ç”¨è€…æ˜ç¡®é¡¹ç›®å¼•ç”¨äº†å“ªäº›PythonåŒ…ã€‚</p>
<p>è¿™ä¸ªæ–‡ä»¶çš„æ ¼å¼æ˜¯æ¯ä¸€è¡ŒåŒ…å«ä¸€ä¸ªåŒ…ä¾èµ–çš„è¯´æ˜ï¼Œé€šå¸¸æ˜¯flask&gt;&#x3D;0.10è¿™ç§æ ¼å¼ï¼Œè¦æ±‚æ˜¯è¿™ä¸ªæ ¼å¼èƒ½è¢«pipè¯†åˆ«ï¼Œè¿™æ ·å°±å¯ä»¥ç®€å•çš„é€šè¿‡ pip install -r requirements.txtæ¥æŠŠæ‰€æœ‰Pythonä¾èµ–åº“éƒ½è£…å¥½äº†ï¼Œå…·ä½“æ ¼å¼å‚ç…§<a href="https://link.zhihu.com/?target=https://pip.readthedocs.io/en/1.1/requirements.html">https://pip.readthedocs.io/en/1.1/requirements.html</a></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=71">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=71<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>21-åŒ…</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/21_%E5%8C%85/</url>
    <content><![CDATA[<h2 id="ä¸€-åŒ…ä»‹ç»"><a href="#ä¸€-åŒ…ä»‹ç»" class="headerlink" title="ä¸€ åŒ…ä»‹ç»"></a>ä¸€ åŒ…ä»‹ç»</h2><p>éšç€æ¨¡å—æ•°ç›®çš„å¢å¤šï¼ŒæŠŠæ‰€æœ‰æ¨¡å—ä¸åŠ åŒºåˆ†åœ°æ”¾åˆ°ä¸€èµ·ä¹Ÿæ˜¯æä¸åˆç†çš„ï¼Œäºæ˜¯Pythonä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æŠŠæ¨¡å—ç»„ç»‡åˆ°ä¸€èµ·çš„æ–¹æ³•ï¼Œå³åˆ›å»ºä¸€ä¸ªåŒ…ã€‚åŒ…å°±æ˜¯ä¸€ä¸ªå«æœ‰__init__.pyæ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹å†…å¯ä»¥ç»„ç»‡å­æ¨¡å—æˆ–å­åŒ…ï¼Œä¾‹å¦‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pool/                <span class="comment">#é¡¶çº§åŒ…</span></span><br><span class="line">â”œâ”€â”€ __init__.py     </span><br><span class="line">â”œâ”€â”€ futures          <span class="comment">#å­åŒ…</span></span><br><span class="line">â”‚   â”œâ”€â”€ __init__.py</span><br><span class="line">â”‚   â”œâ”€â”€ process.py</span><br><span class="line">â”‚   â””â”€â”€ thread.py</span><br><span class="line">â””â”€â”€ versions.py      <span class="comment">#å­æ¨¡å—</span></span><br></pre></td></tr></table></figure>

<p>éœ€è¦å¼ºè°ƒçš„æ˜¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. åœ¨python3ä¸­ï¼Œå³ä½¿åŒ…ä¸‹æ²¡æœ‰__init__.pyæ–‡ä»¶ï¼Œimport åŒ…ä»ç„¶ä¸ä¼šæŠ¥é”™ï¼Œè€Œåœ¨python2ä¸­ï¼ŒåŒ…ä¸‹ä¸€å®šè¦æœ‰è¯¥æ–‡ä»¶ï¼Œå¦åˆ™import åŒ…æŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2. åˆ›å»ºåŒ…çš„ç›®çš„ä¸æ˜¯ä¸ºäº†è¿è¡Œï¼Œè€Œæ˜¯è¢«å¯¼å…¥ä½¿ç”¨ï¼Œè®°ä½ï¼ŒåŒ…åªæ˜¯æ¨¡å—çš„ä¸€ç§å½¢å¼è€Œå·²ï¼ŒåŒ…çš„æœ¬è´¨å°±æ˜¯ä¸€ç§æ¨¡</span></span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä»¥åŒ…poolä¸ºä¾‹æ¥ä»‹ç»åŒ…çš„ä½¿ç”¨ï¼ŒåŒ…å†…å„æ–‡ä»¶å†…å®¹å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># process.py</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProcessPoolExecutor</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,max_workers</span>):</span></span><br><span class="line">        self.max_workers=max_workers</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">submit</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;ProcessPool submit&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># thread.py</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThreadPoolExecutor</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, max_workers</span>):</span></span><br><span class="line">        self.max_workers = max_workers</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">submit</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;ThreadPool submit&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># versions.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;check versionsâ€™)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># __init__.pyæ–‡ä»¶å†…å®¹å‡ä¸ºç©º</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-5dd50856f36ac71d32e384a0c9cb514f_720w.jpg" alt="img"></p>
<h2 id="äºŒ-åŒ…çš„ä½¿ç”¨"><a href="#äºŒ-åŒ…çš„ä½¿ç”¨" class="headerlink" title="äºŒ åŒ…çš„ä½¿ç”¨"></a>äºŒ åŒ…çš„ä½¿ç”¨</h2><h2 id="2-1-å¯¼å…¥åŒ…ä¸-init-py"><a href="#2-1-å¯¼å…¥åŒ…ä¸-init-py" class="headerlink" title="2.1 å¯¼å…¥åŒ…ä¸__init__.py"></a>2.1 å¯¼å…¥åŒ…ä¸__init__.py</h2><p>åŒ…å±äºæ¨¡å—çš„ä¸€ç§ï¼Œå› è€ŒåŒ…ä»¥åŠåŒ…å†…çš„æ¨¡å—å‡æ˜¯ç”¨æ¥è¢«å¯¼å…¥ä½¿ç”¨çš„ï¼Œè€Œç»éè¢«ç›´æ¥æ‰§è¡Œï¼Œé¦–æ¬¡å¯¼å…¥åŒ…ï¼ˆå¦‚import poolï¼‰åŒæ ·ä¼šåšä¸‰ä»¶äº‹ï¼š</p>
<p>1ã€æ‰§è¡ŒåŒ…ä¸‹çš„__init__.pyæ–‡ä»¶</p>
<p>2ã€äº§ç”Ÿä¸€ä¸ªæ–°çš„åç§°ç©ºé—´ç”¨äºå­˜æ”¾__init__.pyæ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„åå­—</p>
<p>3ã€åœ¨å½“å‰æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„åç§°ç©ºé—´ä¸­å¾—åˆ°ä¸€ä¸ªåå­—poolï¼Œè¯¥åå­—æŒ‡å‘__init__.pyçš„åç§°ç©ºé—´ï¼Œä¾‹å¦‚<a href="https://link.zhihu.com/?target=http://pool.xxx">http://pool.xxx</a>å’Œpool.yyyä¸­çš„xxxå’Œyyyéƒ½æ˜¯æ¥è‡ªäºpoolä¸‹çš„__init__.pyï¼Œä¹Ÿå°±æ˜¯è¯´å¯¼å…¥åŒ…æ—¶å¹¶ä¸ä¼šå¯¼å…¥åŒ…ä¸‹æ‰€æœ‰çš„å­æ¨¡å—ä¸å­åŒ…</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pool</span><br><span class="line"></span><br><span class="line">pool.versions.check() <span class="comment">#æŠ›å‡ºå¼‚å¸¸AttributeError</span></span><br><span class="line">pool.futures.process.ProcessPoolExecutor(<span class="number">3</span>) <span class="comment">#æŠ›å‡ºå¼‚å¸¸AttributeError</span></span><br></pre></td></tr></table></figure>

<p>pool.versions.check()è¦æ±‚poolä¸‹æœ‰åå­—versionsï¼Œè¿›è€Œpool.versionsä¸‹æœ‰åå­—checkã€‚pool.versionsä¸‹å·²ç»æœ‰åå­—checkäº†ï¼Œæ‰€ä»¥é—®é¢˜å‡ºåœ¨poolä¸‹æ²¡æœ‰åå­—versionsï¼Œè¿™å°±éœ€è¦åœ¨poolä¸‹çš„__init__.pyä¸­å¯¼å…¥æ¨¡å—versions</p>
<p><img src="https://pic3.zhimg.com/80/v2-08c7810c490572e8aed0d3dccfb2eb26_720w.jpg" alt="img"></p>
<p><strong>å¼ºè°ƒ</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>å…³äºåŒ…ç›¸å…³çš„å¯¼å…¥è¯­å¥ä¹Ÿåˆ†ä¸º<span class="keyword">import</span>å’Œ<span class="keyword">from</span> ... <span class="keyword">import</span> ...ä¸¤ç§ï¼Œä½†æ˜¯æ— è®ºå“ªç§ï¼Œæ— è®ºåœ¨ä»€ä¹ˆä½ç½®ï¼Œåœ¨å¯¼å…¥æ—¶éƒ½å¿…é¡»éµå¾ªä¸€ä¸ªåŸåˆ™ï¼šå‡¡æ˜¯åœ¨å¯¼å…¥æ—¶å¸¦ç‚¹çš„ï¼Œç‚¹çš„å·¦è¾¹éƒ½å¿…é¡»æ˜¯ä¸€ä¸ªåŒ…ï¼Œå¦åˆ™éæ³•ã€‚å¯ä»¥å¸¦æœ‰ä¸€è¿ä¸²çš„ç‚¹ï¼Œå¦‚<span class="keyword">import</span> é¡¶çº§åŒ….å­åŒ….å­æ¨¡å—,ä½†éƒ½å¿…é¡»éµå¾ªè¿™ä¸ªåŸåˆ™ã€‚ä½†å¯¹äºå¯¼å…¥åï¼Œåœ¨ä½¿ç”¨æ—¶å°±æ²¡æœ‰è¿™ç§é™åˆ¶äº†ï¼Œç‚¹çš„å·¦è¾¹å¯ä»¥æ˜¯åŒ…,æ¨¡å—ï¼Œå‡½æ•°ï¼Œç±»(å®ƒä»¬éƒ½å¯ä»¥ç”¨ç‚¹çš„æ–¹å¼è°ƒç”¨è‡ªå·±çš„å±æ€§)ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>ã€åŒ…Aå’ŒåŒ…Bä¸‹æœ‰åŒåæ¨¡å—ä¹Ÿä¸ä¼šå†²çªï¼Œå¦‚A.aä¸B.aæ¥è‡ªä¿©ä¸ªå‘½åç©ºé—´</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>ã€<span class="keyword">import</span>å¯¼å…¥æ–‡ä»¶æ—¶ï¼Œäº§ç”Ÿåç§°ç©ºé—´ä¸­çš„åå­—æ¥æºäºæ–‡ä»¶ï¼Œ<span class="keyword">import</span> åŒ…ï¼Œäº§ç”Ÿçš„åç§°ç©ºé—´çš„åå­—åŒæ ·æ¥æºäºæ–‡ä»¶ï¼Œå³åŒ…ä¸‹çš„__init__.pyï¼Œå¯¼å…¥åŒ…æœ¬è´¨å°±æ˜¯åœ¨å¯¼å…¥è¯¥æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<h2 id="2-2-ç»å¯¹å¯¼å…¥ä¸ç›¸å¯¹å¯¼å…¥"><a href="#2-2-ç»å¯¹å¯¼å…¥ä¸ç›¸å¯¹å¯¼å…¥" class="headerlink" title="2.2 ç»å¯¹å¯¼å…¥ä¸ç›¸å¯¹å¯¼å…¥"></a>2.2 ç»å¯¹å¯¼å…¥ä¸ç›¸å¯¹å¯¼å…¥</h2><p>é’ˆå¯¹åŒ…å†…çš„æ¨¡å—ä¹‹é—´äº’ç›¸å¯¼å…¥ï¼Œå¯¼å…¥çš„æ–¹å¼æœ‰ä¸¤ç§</p>
<p>1ã€ç»å¯¹å¯¼å…¥ï¼šä»¥é¡¶çº§åŒ…ä¸ºèµ·å§‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#poolä¸‹çš„__init__.py</span></span><br><span class="line"><span class="keyword">from</span> pool <span class="keyword">import</span> versions</span><br></pre></td></tr></table></figure>

<p>2ã€ç›¸å¯¹å¯¼å…¥ï¼š.ä»£è¡¨å½“å‰æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œ..ä»£è¡¨å½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•ï¼Œä¾æ­¤ç±»æ¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#poolä¸‹çš„__init__.py</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> versions</span><br></pre></td></tr></table></figure>

<p>åŒç†ï¼Œé’ˆå¯¹pool.futures.process.ProcessPoolExecutor(3)ï¼Œåˆ™éœ€è¦</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ“ä½œpoolä¸‹çš„__init__.pyï¼Œä¿è¯pool.futures</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> futures <span class="comment">#æˆ–from pool import futures</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ“ä½œfutruesä¸‹çš„__init__.pyï¼Œä¿è¯pool.futures.process</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> process <span class="comment">#æˆ–from pool.futures import process</span></span><br></pre></td></tr></table></figure>

<p>åœ¨åŒ…å†…ä½¿ç”¨ç›¸å¯¹å¯¼å…¥è¿˜å¯ä»¥è·¨ç›®å½•å¯¼å…¥æ¨¡å—ï¼Œæ¯”å¦‚thread.pyä¸­æƒ³å¼•ç”¨versions.pyçš„åå­—check</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span>ä¹Ÿèƒ½ä½¿ç”¨ç»å¯¹å¯¼å…¥ï¼Œå¯¼å…¥è¿‡ç¨‹ä¸­åŒæ ·ä¼šä¾æ¬¡æ‰§è¡ŒåŒ…ä¸‹çš„__init__.py,åªæ˜¯åŸºäº<span class="keyword">import</span>å¯¼å…¥çš„ç»“æœï¼Œä½¿ç”¨æ—¶å¿…é¡»åŠ ä¸Šè¯¥å‰ç¼€</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-0d72cc18ba9ff316c955509c82222653_720w.jpg" alt="img"></p>
<p>ä¾‹1ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pool.futures <span class="comment">#æ‹¿åˆ°åå­—pool.futuresæŒ‡å‘futuresä¸‹çš„__init__.py</span></span><br><span class="line"></span><br><span class="line">pool.futures.xxx <span class="comment">#è¦æ±‚futuresä¸‹çš„__init__.pyä¸­å¿…é¡»æœ‰åå­—xxx</span></span><br></pre></td></tr></table></figure>

<p>ä¾‹2ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pool.futures.thread <span class="comment">#æ‹¿åˆ°åå­—pool.futures.threadæŒ‡å‘thread.py</span></span><br><span class="line"></span><br><span class="line">thread_pool=pool.futures.thread.ThreadPoolExecutor(<span class="number">3</span>)</span><br><span class="line">thread_pool.submit()</span><br></pre></td></tr></table></figure>

<p>ç›¸å¯¹å¯¼å…¥åªèƒ½ç”¨from module import symbolçš„å½¢å¼,import ..versionsè¯­æ³•æ˜¯ä¸å¯¹çš„ï¼Œä¸”symbolåªèƒ½æ˜¯ä¸€ä¸ªæ˜ç¡®çš„åå­—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pool <span class="keyword">import</span> futures.process <span class="comment">#è¯­æ³•é”™è¯¯</span></span><br><span class="line"><span class="keyword">from</span> pool.futures <span class="keyword">import</span> process <span class="comment">#è¯­æ³•æ­£ç¡®</span></span><br></pre></td></tr></table></figure>

<p>é’ˆå¯¹åŒ…å†…éƒ¨æ¨¡å—ä¹‹é—´çš„ç›¸äº’å¯¼å…¥æ¨èä½¿ç”¨ç›¸å¯¹å¯¼å…¥ï¼Œéœ€è¦ç‰¹åˆ«å¼ºè°ƒï¼š</p>
<p>1ã€ç›¸å¯¹å¯¼å…¥åªèƒ½åœ¨åŒ…å†…éƒ¨ä½¿ç”¨ï¼Œç”¨ç›¸å¯¹å¯¼å…¥ä¸åŒç›®å½•ä¸‹çš„æ¨¡å—æ˜¯éæ³•çš„</p>
<p>2ã€æ— è®ºæ˜¯importè¿˜æ˜¯from-importï¼Œä½†å‡¡æ˜¯åœ¨å¯¼å…¥æ—¶å¸¦ç‚¹çš„ï¼Œç‚¹çš„å·¦è¾¹å¿…é¡»æ˜¯åŒ…,å¦åˆ™è¯­æ³•é”™è¯¯</p>
<p><img src="https://pic4.zhimg.com/80/v2-833bff5bca842734b92acebb8d524e03_720w.jpg" alt="img"></p>
<p>æ€»ç»“åŒ…çš„ä½¿ç”¨éœ€è¦ç‰¢è®°ä¸‰ç‚¹<br>1ã€å¯¼åŒ…å°±æ˜¯åœ¨å¯¼åŒ…ä¸‹__init__.pyæ–‡ä»¶<br>2ã€åŒ…å†…éƒ¨çš„å¯¼å…¥åº”è¯¥ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ï¼Œç›¸å¯¹å¯¼å…¥ä¹Ÿåªèƒ½åœ¨åŒ…å†…éƒ¨ä½¿ç”¨ï¼Œè€Œä¸”â€¦å–ä¸Šä¸€çº§ä¸èƒ½å‡ºåŒ…<br>3ã€<br>ä½¿ç”¨è¯­å¥ä¸­çš„ç‚¹ä»£è¡¨çš„æ˜¯è®¿é—®å±æ€§<br>m.n.x â€”-&gt; å‘mè¦nï¼Œå‘nè¦x<br>è€Œå¯¼å…¥è¯­å¥ä¸­çš„ç‚¹ä»£è¡¨çš„æ˜¯è·¯å¾„åˆ†éš”ç¬¦<br>import a.b.c â€“&gt; a&#x2F;b&#x2F;cï¼Œæ–‡ä»¶å¤¹ä¸‹aä¸‹æœ‰å­æ–‡ä»¶å¤¹bï¼Œæ–‡ä»¶å¤¹bä¸‹æœ‰å­æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹c<br>æ‰€ä»¥å¯¼å…¥è¯­å¥ä¸­ç‚¹çš„å·¦è¾¹å¿…é¡»æ˜¯ä¸€ä¸ªåŒ…</p>
<h2 id="2-3-from-åŒ…-import"><a href="#2-3-from-åŒ…-import" class="headerlink" title="2.3 from åŒ… import *"></a>2.3 from åŒ… import *</h2><p> åœ¨ä½¿ç”¨åŒ…æ—¶åŒæ ·æ”¯æŒfrom pool.futures import * ï¼Œæ¯«æ— ç–‘é—®<em>ä»£è¡¨çš„æ˜¯futuresä¸‹__init__.pyä¸­æ‰€æœ‰çš„åå­—ï¼Œé€šç”¨æ˜¯ç”¨å˜é‡__all__æ¥æ§åˆ¶</em>ä»£è¡¨çš„æ„æ€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#futuresä¸‹çš„__init__.py</span></span><br><span class="line">__all__=[<span class="string">&#x27;process&#x27;</span>,<span class="string">&#x27;thread&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p> æœ€åè¯´æ˜ä¸€ç‚¹ï¼ŒåŒ…å†…éƒ¨çš„ç›®å½•ç»“æ„é€šå¸¸æ˜¯åŒ…çš„å¼€å‘è€…ä¸ºäº†æ–¹ä¾¿è‡ªå·±ç®¡ç†å’Œç»´æŠ¤ä»£ç è€Œåˆ›å»ºçš„ï¼Œè¿™ç§ç›®å½•ç»“æ„å¯¹åŒ…çš„ä½¿ç”¨è€…å¾€å¾€æ˜¯æ— ç”¨çš„ï¼Œæ­¤æ—¶é€šè¿‡æ“ä½œ__init__.pyå¯ä»¥â€œéšè—â€åŒ…å†…éƒ¨çš„ç›®å½•ç»“æ„ï¼Œé™ä½ä½¿ç”¨éš¾åº¦ï¼Œæ¯”å¦‚æƒ³è¦è®©ä½¿ç”¨è€…ç›´æ¥ä½¿ç”¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pool</span><br><span class="line"></span><br><span class="line">pool.check()</span><br><span class="line">pool.ProcessPoolExecutor(<span class="number">3</span>)</span><br><span class="line">pool.ThreadPoolExecutor(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ“ä½œpoolä¸‹çš„__init__.py</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> .versions <span class="keyword">import</span> check</span><br><span class="line"><span class="keyword">from</span> .futures.process <span class="keyword">import</span> ProcessPoolExecutor</span><br><span class="line"><span class="keyword">from</span> .futures.thread <span class="keyword">import</span> ThreadPoolExecutor</span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-6c06f350e2f63e5e46e0fc59062dc6ac_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p>åŒ…çš„å®šä¹‰ï¼š</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=69">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=69<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p>åŒ…çš„ä½¿ç”¨ï¼š</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=70">https://www.bilibili.com/video/av73342471?p=70www.bilibili.com/video/av73342471?p=70</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>23-é¢å‘å¯¹è±¡ç¼–ç¨‹</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/23_%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/</url>
    <content><![CDATA[<h2 id="ä¸€-å¯¹è±¡çš„æ¦‚å¿µ"><a href="#ä¸€-å¯¹è±¡çš„æ¦‚å¿µ" class="headerlink" title="ä¸€ å¯¹è±¡çš„æ¦‚å¿µ"></a>ä¸€ å¯¹è±¡çš„æ¦‚å¿µ</h2><p><img src="https://pic2.zhimg.com/80/v2-9e0fb874291cdb93dc680387fb4b6895_720w.jpg" alt="img"></p>
<p>â€é¢å‘å¯¹è±¡â€œçš„æ ¸å¿ƒæ˜¯â€œå¯¹è±¡â€äºŒå­—ï¼Œè€Œå¯¹è±¡çš„ç²¾é«“åœ¨äºâ€œæ•´åˆâ€œï¼Œä»€ä¹ˆæ„æ€ï¼Ÿ</p>
<p><img src="https://pic3.zhimg.com/80/v2-35fa66297dc63ecf396e6cbdbdf55e82_720w.jpg" alt="img"></p>
<p>æ‰€æœ‰çš„ç¨‹åºéƒ½æ˜¯ç”±â€æ•°æ®â€ä¸â€œåŠŸèƒ½â€œç»„æˆï¼Œå› è€Œç¼–å†™ç¨‹åºçš„æœ¬è´¨å°±æ˜¯å®šä¹‰å‡ºä¸€ç³»åˆ—çš„æ•°æ®ï¼Œç„¶åå®šä¹‰å‡ºä¸€ç³»åˆ—çš„åŠŸèƒ½æ¥å¯¹æ•°æ®è¿›è¡Œæ“ä½œã€‚åœ¨å­¦ä¹ â€å¯¹è±¡â€œä¹‹å‰ï¼Œç¨‹åºä¸­çš„æ•°æ®ä¸åŠŸèƒ½æ˜¯åˆ†ç¦»å¼€çš„ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ•°æ®ï¼šnameã€ageã€sex</span></span><br><span class="line">name=<span class="string">&#x27;lili&#x27;</span></span><br><span class="line">age=<span class="number">18</span></span><br><span class="line">sex=<span class="string">&#x27;female&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠŸèƒ½ï¼štell_info</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tell_info</span>(<span class="params">name,age,sex</span>):</span> </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&lt;%s:%s:%s&gt;&#x27;</span> %(name,age,sex))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­¤æ—¶è‹¥æƒ³æ‰§è¡ŒæŸ¥çœ‹ä¸ªäººä¿¡æ¯çš„åŠŸèƒ½ï¼Œéœ€è¦åŒæ—¶æ‹¿æ¥ä¸¤æ ·ä¸œè¥¿ï¼Œä¸€ç±»æ˜¯åŠŸèƒ½tell_infoï¼Œå¦å¤–ä¸€ç±»åˆ™æ˜¯å¤šä¸ªæ•°æ®nameã€ageã€sexï¼Œç„¶åæ‰èƒ½æ‰§è¡Œï¼Œéå¸¸éº»çƒ¦</span></span><br><span class="line">tell_info(name,age,sex)</span><br></pre></td></tr></table></figure>

<p>åœ¨å­¦ä¹ äº†â€œå¯¹è±¡â€ä¹‹åï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªå®¹å™¨ï¼Œè¯¥å®¹å™¨å¯ä»¥ç››æ”¾æ•°æ®ä¸åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¯´ï¼šå¯¹è±¡æ˜¯æŠŠæ•°æ®ä¸åŠŸèƒ½æ•´åˆåˆ°ä¸€èµ·çš„äº§ç‰©ï¼Œæˆ–è€…è¯´â€å¯¹è±¡â€œå°±æ˜¯ä¸€ä¸ªç››æ”¾æ•°æ®ä¸åŠŸèƒ½çš„å®¹å™¨&#x2F;ç®±å­&#x2F;ç›’å­ã€‚</p>
<p>å¦‚æœæŠŠâ€æ•°æ®â€œæ¯”å–»ä¸ºâ€ç«æ¯›è†â€œã€â€çœ¼å½±â€œã€â€å”‡å½©â€œç­‰åŒ–å¦†æ‰€éœ€è¦çš„åŸææ–™ï¼›æŠŠâ€åŠŸèƒ½â€œæ¯”å–»ä¸ºçœ¼çº¿ç¬”ã€çœ‰ç¬”ç­‰åŒ–å¦†æ‰€éœ€è¦çš„å·¥å…·ï¼Œé‚£ä¹ˆâ€å¯¹è±¡â€œå°±æ˜¯ä¸€ä¸ªå½©å¦†ç›’ï¼Œå½©å¦†ç›’å¯ä»¥æŠŠâ€åŸææ–™â€œä¸â€å·¥å…·â€œéƒ½è£…åˆ°ä¸€èµ·</p>
<p><img src="https://pic2.zhimg.com/80/v2-0e2848da85da660b62cd804505d52095_720w.jpg" alt="img"></p>
<p>å¦‚æœæˆ‘ä»¬æŠŠâ€åŒ–å¦†â€œæ¯”å–»ä¸ºè¦æ‰§è¡Œçš„ä¸šåŠ¡é€»è¾‘ï¼Œæ­¤æ—¶åªéœ€è¦æ‹¿æ¥ä¸€æ ·ä¸œè¥¿å³å¯ï¼Œé‚£å°±æ˜¯å½©å¦†ç›’ï¼Œå› ä¸ºå½©å¦†ç›’é‡Œæ•´åˆäº†åŒ–å¦†æ‰€éœ€çš„æ‰€æœ‰åŸææ–™ä¸åŠŸèƒ½ï¼Œè¿™æ¯”èµ·ä½ åˆ†åˆ«æ‹¿æ¥åŸææ–™ä¸åŠŸèƒ½æ‰èƒ½æ‰§è¡Œï¼Œè¦æ–¹ä¾¿çš„å¤šã€‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-4cb7055278382e36149f1ebc48d995e5_720w.jpg" alt="img"></p>
<p> åœ¨äº†è§£äº†å¯¹è±¡çš„åŸºæœ¬æ¦‚å¿µä¹‹åï¼Œç†è§£é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ–¹å¼å°±ç›¸å¯¹ç®€å•å¾ˆå¤šäº†ï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹å°±æ˜¯è¦é€ å‡ºä¸€ä¸ªä¸ªçš„å¯¹è±¡ï¼ŒæŠŠåŸæœ¬åˆ†æ•£å¼€çš„ç›¸å…³æ•°æ®ä¸åŠŸèƒ½æ•´åˆåˆ°ä¸€ä¸ªä¸ªçš„å¯¹è±¡é‡Œï¼Œè¿™ä¹ˆåšæ—¢æ–¹ä¾¿ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥æé«˜ç¨‹åºçš„è§£è€¦åˆç¨‹åº¦ï¼Œè¿›è€Œæå‡äº†ç¨‹åºçš„å¯æ‰©å±•æ€§ï¼ˆéœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œè½¯ä»¶è´¨é‡å±æ€§åŒ…å«å¾ˆå¤šæ–¹é¢ï¼Œé¢å‘å¯¹è±¡è§£å†³çš„ä»…ä»…åªæ˜¯æ‰©å±•æ€§é—®é¢˜ï¼‰</p>
<p><img src="https://pic1.zhimg.com/80/v2-be68cd9e27b83c937cf44dbe7a2cf56c_720w.jpg" alt="img"></p>
<h2 id="äºŒ-ç±»ä¸å¯¹è±¡"><a href="#äºŒ-ç±»ä¸å¯¹è±¡" class="headerlink" title="äºŒ ç±»ä¸å¯¹è±¡"></a>äºŒ ç±»ä¸å¯¹è±¡</h2><p>ç±»å³ç±»åˆ«&#x2F;ç§ç±»ï¼Œæ˜¯é¢å‘å¯¹è±¡åˆ†æå’Œè®¾è®¡çš„åŸºçŸ³ï¼Œå¦‚æœå¤šä¸ªå¯¹è±¡æœ‰ç›¸ä¼¼çš„æ•°æ®ä¸åŠŸèƒ½ï¼Œé‚£ä¹ˆè¯¥å¤šä¸ªå¯¹è±¡å°±å±äºåŒä¸€ç§ç±»ã€‚æœ‰äº†ç±»çš„å¥½å¤„æ˜¯ï¼šæˆ‘ä»¬å¯ä»¥æŠŠåŒä¸€ç±»å¯¹è±¡ç›¸åŒçš„æ•°æ®ä¸åŠŸèƒ½å­˜æ”¾åˆ°ç±»é‡Œï¼Œè€Œæ— éœ€æ¯ä¸ªå¯¹è±¡éƒ½é‡å¤å­˜ä¸€ä»½ï¼Œè¿™æ ·æ¯ä¸ªå¯¹è±¡é‡Œåªéœ€å­˜è‡ªå·±ç‹¬æœ‰çš„æ•°æ®å³å¯ï¼Œæå¤§åœ°èŠ‚çœäº†ç©ºé—´ã€‚æ‰€ä»¥ï¼Œå¦‚æœè¯´å¯¹è±¡æ˜¯ç”¨æ¥å­˜æ”¾æ•°æ®ä¸åŠŸèƒ½çš„å®¹å™¨ï¼Œé‚£ä¹ˆç±»åˆ™æ˜¯ç”¨æ¥å­˜æ”¾å¤šä¸ªå¯¹è±¡ç›¸åŒçš„æ•°æ®ä¸åŠŸèƒ½çš„å®¹å™¨ã€‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-0b1c2138d316307c0c830aa1df3aa1e1_720w.jpg" alt="img"></p>
<p> ç»¼ä¸Šæ‰€è¿°ï¼Œè™½ç„¶æˆ‘ä»¬æ˜¯å…ˆä»‹ç»å¯¹è±¡åä»‹ç»ç±»ï¼Œä½†æ˜¯éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼šåœ¨ç¨‹åºä¸­ï¼Œå¿…é¡»è¦äº‹å…ˆå®šä¹‰ç±»ï¼Œç„¶åå†è°ƒç”¨ç±»äº§ç”Ÿå¯¹è±¡ï¼ˆè°ƒç”¨ç±»æ‹¿åˆ°çš„è¿”å›å€¼å°±æ˜¯å¯¹è±¡ï¼‰ã€‚äº§ç”Ÿå¯¹è±¡çš„ç±»ä¸å¯¹è±¡ä¹‹é—´å­˜åœ¨å…³è”ï¼Œè¿™ç§å…³è”æŒ‡çš„æ˜¯ï¼šå¯¹è±¡å¯ä»¥è®¿é—®åˆ°ç±»ä¸­å…±æœ‰çš„æ•°æ®ä¸åŠŸèƒ½ï¼Œæ‰€ä»¥ç±»ä¸­çš„å†…å®¹ä»ç„¶æ˜¯å±äºå¯¹è±¡çš„ï¼Œç±»åªä¸è¿‡æ˜¯ä¸€ç§èŠ‚çœç©ºé—´ã€å‡å°‘ä»£ç å†—ä½™çš„æœºåˆ¶ï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹æœ€ç»ˆçš„æ ¸å¿ƒä»ç„¶æ˜¯å»ä½¿ç”¨å¯¹è±¡ã€‚</p>
<p> åœ¨äº†è§£äº†ç±»ä¸å¯¹è±¡è¿™ä¸¤å¤§æ ¸å¿ƒæ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥ä»‹ç»ä¸€ä¸‹é¢å‘å¯¹è±¡ç¼–ç¨‹å•¦ã€‚</p>
<p><img src="https://pic3.zhimg.com/80/v2-dad32bbb5927e33abfc0003c07c6edd2_720w.jpg" alt="img"></p>
<h2 id="ä¸‰-é¢å‘å¯¹è±¡ç¼–ç¨‹"><a href="#ä¸‰-é¢å‘å¯¹è±¡ç¼–ç¨‹" class="headerlink" title="ä¸‰ é¢å‘å¯¹è±¡ç¼–ç¨‹"></a>ä¸‰ é¢å‘å¯¹è±¡ç¼–ç¨‹</h2><h2 id="3-1-ç±»çš„å®šä¹‰ä¸å®ä¾‹åŒ–"><a href="#3-1-ç±»çš„å®šä¹‰ä¸å®ä¾‹åŒ–" class="headerlink" title="3.1 ç±»çš„å®šä¹‰ä¸å®ä¾‹åŒ–"></a>3.1 ç±»çš„å®šä¹‰ä¸å®ä¾‹åŒ–</h2><p>æˆ‘ä»¬ä»¥å¼€å‘ä¸€ä¸ªæ¸…åå¤§å­¦çš„é€‰è¯¾ç³»ç»Ÿä¸ºä¾‹ï¼Œæ¥ç®€å•ä»‹ç»åŸºäºé¢å‘å¯¹è±¡çš„æ€æƒ³å¦‚ä½•ç¼–å†™ç¨‹åº</p>
<p><img src="https://pic3.zhimg.com/80/v2-39114d379b38da06b6a6b9923573e30a_720w.jpg" alt="img"></p>
<p>é¢å‘å¯¹è±¡çš„åŸºæœ¬æ€è·¯å°±æ˜¯æŠŠç¨‹åºä¸­è¦ç”¨åˆ°çš„ã€ç›¸å…³è”çš„æ•°æ®ä¸åŠŸèƒ½æ•´åˆåˆ°å¯¹è±¡é‡Œï¼Œç„¶åå†å»ä½¿ç”¨ï¼Œä½†ç¨‹åºä¸­è¦ç”¨åˆ°çš„æ•°æ®ä»¥åŠåŠŸèƒ½é‚£ä¹ˆå¤šï¼Œå¦‚ä½•æ‰¾åˆ°ç›¸å…³è¿çš„å‘¢ï¼Ÿæˆ‘éœ€è¦å…ˆæå–é€‰è¯¾ç³»ç»Ÿé‡Œçš„è§’è‰²ï¼šå­¦ç”Ÿã€è€å¸ˆã€è¯¾ç¨‹ç­‰ï¼Œç„¶åæ˜¾è€Œæ˜“è§çš„æ˜¯ï¼šå­¦ç”Ÿæœ‰å­¦ç”Ÿç›¸å…³çš„æ•°æ®äºåŠŸèƒ½ï¼Œè€å¸ˆæœ‰è€å¸ˆç›¸å…³çš„æ•°æ®ä¸åŠŸèƒ½ï¼Œæˆ‘ä»¬å•ä»¥å­¦ç”Ÿä¸ºä¾‹ï¼Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å­¦ç”Ÿçš„æ•°æ®æœ‰</span></span><br><span class="line">å­¦æ ¡</span><br><span class="line">åå­—</span><br><span class="line">å¹´é¾„</span><br><span class="line">æ€§åˆ«</span><br><span class="line"></span><br><span class="line"><span class="comment"># å­¦ç”Ÿçš„åŠŸèƒ½æœ‰</span></span><br><span class="line">é€‰è¯¾</span><br></pre></td></tr></table></figure>

<p>è¯¦ç»†çš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å­¦ç”Ÿ1ï¼š</span></span><br><span class="line">    æ•°æ®:</span><br><span class="line">        å­¦æ ¡=æ¸…åå¤§å­¦</span><br><span class="line">        å§“å=æå»ºåˆš</span><br><span class="line">        æ€§åˆ«=ç”·</span><br><span class="line">        å¹´é¾„=<span class="number">28</span></span><br><span class="line">    åŠŸèƒ½ï¼š</span><br><span class="line">        é€‰è¯¾</span><br><span class="line"></span><br><span class="line"><span class="comment"># å­¦ç”Ÿ2ï¼š</span></span><br><span class="line">    æ•°æ®:</span><br><span class="line">        å­¦æ ¡=æ¸…åå¤§å­¦</span><br><span class="line">        å§“å=ç‹å¤§åŠ›</span><br><span class="line">        æ€§åˆ«=å¥³</span><br><span class="line">        å¹´é¾„=<span class="number">18</span></span><br><span class="line">    åŠŸèƒ½ï¼š</span><br><span class="line">        é€‰è¯¾</span><br><span class="line"></span><br><span class="line"><span class="comment"># å­¦ç”Ÿ3ï¼š</span></span><br><span class="line">    æ•°æ®:</span><br><span class="line">        å­¦æ ¡=æ¸…åå¤§å­¦</span><br><span class="line">        å§“å=ç‰›å—·å—·</span><br><span class="line">        æ€§åˆ«=ç”·</span><br><span class="line">        å¹´é¾„=<span class="number">38</span></span><br><span class="line">    åŠŸèƒ½ï¼š</span><br><span class="line">        é€‰è¯¾</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºä¸€ä¸ªå­¦ç”Ÿç±»ï¼Œç”¨æ¥å­˜æ”¾å­¦ç”Ÿä»¬ç›¸åŒçš„æ•°æ®ä¸åŠŸèƒ½</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å­¦ç”Ÿç±»</span></span><br><span class="line">    ç›¸åŒçš„ç‰¹å¾:</span><br><span class="line">        å­¦æ ¡=æ¸…åå¤§å­¦</span><br><span class="line">    ç›¸åŒçš„åŠŸèƒ½ï¼š</span><br><span class="line">        é€‰è¯¾</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-953b7365b40efb7c36560df09c4ec93d_720w.jpg" alt="img"></p>
<p>åŸºäºä¸Šè¿°åˆ†æçš„ç»“æœï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥éœ€è¦åšçš„å°±æ˜¯åœ¨ç¨‹åºä¸­å®šä¹‰å‡ºç±»ï¼Œç„¶åè°ƒç”¨ç±»äº§ç”Ÿå¯¹è±¡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span> <span class="comment"># ç±»çš„å‘½ååº”è¯¥ä½¿ç”¨â€œé©¼å³°ä½“â€</span></span><br><span class="line"></span><br><span class="line">    school=<span class="string">&#x27;æ¸…åå¤§å­¦&#x27;</span> <span class="comment"># æ•°æ®</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">choose</span>(<span class="params">self</span>):</span> <span class="comment"># åŠŸèƒ½</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is choosing a course&#x27;</span> %self.name)</span><br></pre></td></tr></table></figure>

<p>ç±»ä½“æœ€å¸¸è§çš„æ˜¯å˜é‡çš„å®šä¹‰å’Œå‡½æ•°çš„å®šä¹‰ï¼Œä½†å…¶å®ç±»ä½“å¯ä»¥åŒ…å«ä»»æ„Pythonä»£ç ï¼Œç±»ä½“çš„ä»£ç åœ¨ç±»å®šä¹‰é˜¶æ®µå°±ä¼šæ‰§è¡Œï¼Œå› è€Œä¼šäº§ç”Ÿæ–°çš„åç§°ç©ºé—´ç”¨æ¥å­˜æ”¾ç±»ä¸­å®šä¹‰çš„åå­—ï¼Œå¯ä»¥æ‰“å°Student.__dict__æ¥æŸ¥çœ‹ç±»è¿™ä¸ªå®¹å™¨å†…ç››æ”¾çš„ä¸œè¥¿</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(Student.__dict__)</span><br><span class="line">&#123;..., <span class="string">&#x27;school&#x27;</span>: <span class="string">&#x27;æ¸…åå¤§å­¦&#x27;</span>, <span class="string">&#x27;choose&#x27;</span>: &lt;function Student.choose at <span class="number">0x1018a2950</span>&gt;, ...&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-ba4f6b43742c2eb0d1d2be4395948ba4_720w.jpg" alt="img"></p>
<p>è°ƒç”¨ç±»çš„è¿‡ç¨‹ç§°ä¸ºå°†ç±»å®ä¾‹åŒ–ï¼Œæ‹¿åˆ°çš„è¿”å›å€¼å°±æ˜¯ç¨‹åºä¸­çš„å¯¹è±¡ï¼Œæˆ–ç§°ä¸ºä¸€ä¸ªå®ä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu1=Student() <span class="comment"># æ¯å®ä¾‹åŒ–ä¸€æ¬¡Studentç±»å°±å¾—åˆ°ä¸€ä¸ªå­¦ç”Ÿå¯¹è±¡</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu2=Student()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu3=Student()</span><br></pre></td></tr></table></figure>

<p>å¦‚æ­¤stu1ã€stu2ã€stu3å…¨éƒ½ä¸€æ ·äº†ï¼ˆåªæœ‰ç±»ä¸­å…±æœ‰çš„å†…å®¹ï¼Œè€Œæ²¡æœ‰å„è‡ªç‹¬æœ‰çš„æ•°æ®ï¼‰ï¼Œæƒ³åœ¨å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­å°±ä¸ºä¸‰ä½å­¦ç”Ÿå®šåˆ¶å„è‡ªç‹¬æœ‰çš„æ•°æ®ï¼šå§“åï¼Œæ€§åˆ«ï¼Œå¹´é¾„ï¼Œéœ€è¦æˆ‘ä»¬åœ¨ç±»å†…éƒ¨æ–°å¢ä¸€ä¸ª__init__æ–¹æ³•,å¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    school=<span class="string">&#x27;æ¸…åå¤§å­¦&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#è¯¥æ–¹æ³•ä¼šåœ¨å¯¹è±¡äº§ç”Ÿä¹‹åè‡ªåŠ¨æ‰§è¡Œï¼Œä¸“é—¨ä¸ºå¯¹è±¡è¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œå¯ä»¥æœ‰ä»»æ„ä»£ç ï¼Œä½†ä¸€å®šä¸èƒ½è¿”å›éNoneçš„å€¼</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,sex,age</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.sex=sex</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">choose</span>(<span class="params">self</span>):</span> </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is choosing a course&#x27;</span> %self.name)</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬é‡æ–°å®ä¾‹å‡ºä¸‰ä½å­¦ç”Ÿ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu1=Student(<span class="string">&#x27;æå»ºåˆš&#x27;</span>,<span class="string">&#x27;ç”·&#x27;</span>,<span class="number">28</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu2=Student(<span class="string">&#x27;ç‹å¤§åŠ›&#x27;</span>,<span class="string">&#x27;å¥³&#x27;</span>,<span class="number">18</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu3=Student(<span class="string">&#x27;ç‰›å—·å—·&#x27;</span>,<span class="string">&#x27;ç”·&#x27;</span>,<span class="number">38</span>)</span><br></pre></td></tr></table></figure>

<p>å•æ‹¿stu1çš„äº§ç”Ÿè¿‡ç¨‹æ¥åˆ†æï¼Œè°ƒç”¨ç±»ä¼šå…ˆäº§ç”Ÿä¸€ä¸ªç©ºå¯¹è±¡stu1ï¼Œç„¶åå°†stu1è¿åŒè°ƒç”¨ç±»æ—¶æ‹¬å·å†…çš„å‚æ•°ä¸€èµ·ä¼ ç»™Student.<strong>init</strong>(stu1,â€™æå»ºåˆšâ€™,â€™ç”·â€™,28)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, sex, age</span>):</span></span><br><span class="line">    self.name = name  <span class="comment"># stu1.name = &#x27;æå»ºåˆš&#x27;</span></span><br><span class="line">    self.sex = sex    <span class="comment"># stu1.sex = &#x27;ç”·&#x27;</span></span><br><span class="line">    self.age = age    <span class="comment"># stu1.age = 28</span></span><br></pre></td></tr></table></figure>

<p>ä¼šäº§ç”Ÿå¯¹è±¡çš„åç§°ç©ºé—´ï¼ŒåŒæ ·å¯ä»¥ç”¨__dict__æŸ¥çœ‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu1.__dict__</span><br><span class="line">&#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;æå»ºåˆš&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;ç”·&#x27;</span>, <span class="string">&#x27;age&#x27;</span>: <span class="number">28</span>&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-83db32155675e830580cb17e6c767a4f_720w.jpg" alt="img"></p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬é€ å‡ºäº†ä¸‰ä¸ªå¯¹è±¡ä¸ä¸€ä¸ªç±»ï¼Œå¯¹è±¡å­˜æ”¾å„è‡ªç‹¬æœ‰çš„æ•°æ®ï¼Œç±»ä¸­å­˜æ”¾å¯¹è±¡ä»¬å…±æœ‰çš„å†…å®¹</p>
<p><img src="https://pic2.zhimg.com/80/v2-c3bb7aefce6ffee1029b1ae5dee72689_720w.jpg" alt="img"></p>
<p><img src="https://pic3.zhimg.com/80/v2-1c37ec375b8bcc6f734df307b13f978a_720w.jpg" alt="img"></p>
<p>å­˜çš„ç›®çš„æ˜¯ä¸ºäº†ç”¨ï¼Œé‚£ä¹ˆå¦‚ä½•è®¿é—®å¯¹è±¡æˆ–è€…ç±»ä¸­å­˜æ”¾çš„å†…å®¹å‘¢ï¼Ÿ</p>
<p><img src="https://pic4.zhimg.com/80/v2-990cc37a6f39fc36193ba32a6a3c722f_720w.jpg" alt="img"></p>
<h2 id="3-2-å±æ€§è®¿é—®"><a href="#3-2-å±æ€§è®¿é—®" class="headerlink" title="3.2 å±æ€§è®¿é—®"></a>3.2 å±æ€§è®¿é—®</h2><h3 id="3-2-1-ç±»å±æ€§ä¸å¯¹è±¡å±æ€§"><a href="#3-2-1-ç±»å±æ€§ä¸å¯¹è±¡å±æ€§" class="headerlink" title="3.2.1 ç±»å±æ€§ä¸å¯¹è±¡å±æ€§"></a>3.2.1 ç±»å±æ€§ä¸å¯¹è±¡å±æ€§</h3><p><img src="https://pic4.zhimg.com/80/v2-ebbce58a25058d9ee08eba3272cba03f_720w.jpg" alt="img"></p>
<p>åœ¨ç±»ä¸­å®šä¹‰çš„åå­—ï¼Œéƒ½æ˜¯ç±»çš„å±æ€§ï¼Œç»†è¯´çš„è¯ï¼Œç±»æœ‰ä¸¤ç§å±æ€§ï¼šæ•°æ®å±æ€§å’Œå‡½æ•°å±æ€§ï¼Œå¯ä»¥é€šè¿‡__dict__è®¿é—®å±æ€§çš„å€¼ï¼Œæ¯”å¦‚Student.<strong>dict</strong>[â€˜schoolâ€™]ï¼Œä½†Pythonæä¾›äº†ä¸“é—¨çš„å±æ€§è®¿é—®è¯­æ³•</p>
<p>æ’å›¾ï¼šæ¶æå›¾</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Student.school <span class="comment"># è®¿é—®æ•°æ®å±æ€§ï¼Œç­‰åŒäºStudent.__dict__[&#x27;school&#x27;]</span></span><br><span class="line"><span class="string">&#x27;æ¸…åå¤§å­¦&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Student.choose <span class="comment"># è®¿é—®å‡½æ•°å±æ€§ï¼Œç­‰åŒäºStudent.__dict__[&#x27;choose&#x27;]</span></span><br><span class="line">&lt;function Student.choose at <span class="number">0x1018a2950</span>&gt;</span><br><span class="line"><span class="comment"># é™¤äº†æŸ¥çœ‹å±æ€§å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨Student.attrib=value(ä¿®æ”¹æˆ–æ–°å¢å±æ€§),ç”¨del Student.attribåˆ é™¤å±æ€§ã€‚</span></span><br></pre></td></tr></table></figure>

<p>æ“ä½œå¯¹è±¡çš„å±æ€§ä¹Ÿæ˜¯ä¸€æ ·</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu1.name <span class="comment"># æŸ¥çœ‹ï¼Œç­‰åŒäºobj1.__dict__[â€˜name&#x27;]</span></span><br><span class="line"><span class="string">&#x27;æå»ºåˆš&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu1.course=â€™pythonâ€™ <span class="comment"># æ–°å¢ï¼Œç­‰åŒäºobj1.__dict__[â€˜course&#x27;]=&#x27;python&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu1.age=<span class="number">38</span> <span class="comment"># ä¿®æ”¹ï¼Œç­‰åŒäºobj1.__dict__[â€˜age&#x27;]=38</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> obj1.course <span class="comment"># åˆ é™¤ï¼Œç­‰åŒäºdel obj1.__dict__[&#x27;course&#x27;]</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-1c37ec375b8bcc6f734df307b13f978a_720w.jpg" alt="img"></p>
<h3 id="3-2-2-å±æ€§æŸ¥æ‰¾é¡ºåºä¸ç»‘å®šæ–¹æ³•"><a href="#3-2-2-å±æ€§æŸ¥æ‰¾é¡ºåºä¸ç»‘å®šæ–¹æ³•" class="headerlink" title="3.2.2 å±æ€§æŸ¥æ‰¾é¡ºåºä¸ç»‘å®šæ–¹æ³•"></a>3.2.2 å±æ€§æŸ¥æ‰¾é¡ºåºä¸ç»‘å®šæ–¹æ³•</h3><p>å¯¹è±¡çš„åç§°ç©ºé—´é‡Œåªå­˜æ”¾ç€å¯¹è±¡ç‹¬æœ‰çš„å±æ€§ï¼Œè€Œå¯¹è±¡ä»¬ç›¸ä¼¼çš„å±æ€§æ˜¯å­˜æ”¾äºç±»ä¸­çš„ã€‚å¯¹è±¡åœ¨è®¿é—®å±æ€§æ—¶ï¼Œä¼šä¼˜å…ˆä»å¯¹è±¡æœ¬èº«çš„__dict__ä¸­æŸ¥æ‰¾ï¼Œæœªæ‰¾åˆ°ï¼Œåˆ™å»ç±»çš„__dict__ä¸­æŸ¥æ‰¾</p>
<p><img src="https://pic4.zhimg.com/80/v2-990cc37a6f39fc36193ba32a6a3c722f_720w.jpg" alt="img"></p>
<p>1ã€ç±»ä¸­å®šä¹‰çš„å˜é‡æ˜¯ç±»çš„æ•°æ®å±æ€§ï¼Œæ˜¯å…±äº«ç»™æ‰€æœ‰å¯¹è±¡ç”¨çš„ï¼ŒæŒ‡å‘ç›¸åŒçš„å†…å­˜åœ°å€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># idéƒ½ä¸€æ ·</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(Student.school)) <span class="comment"># 4301108704</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(stu1.school)) <span class="comment"># 4301108704</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(stu2.school)) <span class="comment"># 4301108704</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(stu3.school)) <span class="comment"># 4301108704</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-b636757ed106dde009623bd44a59f95e_720w.jpg" alt="img"></p>
<p><img src="https://pic1.zhimg.com/80/v2-15142b4a30e324fec709b506e2ecc518_720w.jpg" alt="img"></p>
<p>2ã€ç±»ä¸­å®šä¹‰çš„å‡½æ•°æ˜¯ç±»çš„å‡½æ•°å±æ€§ï¼Œç±»å¯ä»¥ä½¿ç”¨ï¼Œä½†å¿…é¡»éµå¾ªå‡½æ•°çš„å‚æ•°è§„åˆ™ï¼Œæœ‰å‡ ä¸ªå‚æ•°éœ€è¦ä¼ å‡ ä¸ªå‚æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Student.choose(stu1) <span class="comment"># æå»ºåˆš is choosing a course</span></span><br><span class="line">Student.choose(stu2) <span class="comment"># ç‹å¤§åŠ› is choosing a course</span></span><br><span class="line">Student.choose(stu3) <span class="comment"># ç‰›å—·å—· is choosing a course</span></span><br></pre></td></tr></table></figure>

<p>ä½†å…¶å®ç±»ä¸­å®šä¹‰çš„å‡½æ•°ä¸»è¦æ˜¯ç»™å¯¹è±¡ä½¿ç”¨çš„ï¼Œè€Œä¸”æ˜¯ç»‘å®šç»™å¯¹è±¡çš„ï¼Œè™½ç„¶æ‰€æœ‰å¯¹è±¡æŒ‡å‘çš„éƒ½æ˜¯ç›¸åŒçš„åŠŸèƒ½ï¼Œä½†æ˜¯ç»‘å®šåˆ°ä¸åŒçš„å¯¹è±¡å°±æ˜¯ä¸åŒçš„ç»‘å®šæ–¹æ³•ï¼Œå†…å­˜åœ°å€å„ä¸ç›¸åŒ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(Student.choose)) <span class="comment"># 4335426280</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(stu1.choose)) <span class="comment"># 4300433608</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(stu2.choose)) <span class="comment"># 4300433608</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">id</span>(stu3.choose)) <span class="comment"># 4300433608</span></span><br></pre></td></tr></table></figure>

<p>ç»‘å®šåˆ°å¯¹è±¡çš„æ–¹æ³•ç‰¹æ®Šä¹‹å¤„åœ¨äºï¼Œç»‘å®šç»™è°å°±åº”è¯¥ç”±è°æ¥è°ƒç”¨ï¼Œè°æ¥è°ƒç”¨ï¼Œå°±ä¼šå°†â€™è°â€™æœ¬èº«å½“åšç¬¬ä¸€ä¸ªå‚æ•°è‡ªåŠ¨ä¼ å…¥ï¼ˆæ–¹æ³•__init__ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">stu1.choose()  <span class="comment"># ç­‰åŒäºStudent.choose(stu1)</span></span><br><span class="line">stu2.choose()  <span class="comment"># ç­‰åŒäºStudent.choose(stu2)</span></span><br><span class="line">stu3.choose()  <span class="comment"># ç­‰åŒäºStudent.choose(stu3)</span></span><br></pre></td></tr></table></figure>

<p>ç»‘å®šåˆ°ä¸åŒå¯¹è±¡çš„chooseæŠ€èƒ½ï¼Œè™½ç„¶éƒ½æ˜¯é€‰è¯¾ï¼Œä½†æå»ºåˆšé€‰çš„è¯¾ï¼Œä¸ä¼šé€‰ç»™ç‹å¤§åŠ›ï¼Œè¿™æ­£æ˜¯â€ç»‘å®šâ€œäºŒå­—çš„ç²¾é«“æ‰€åœ¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ³¨æ„ï¼šç»‘å®šåˆ°å¯¹è±¡æ–¹æ³•çš„è¿™ç§è‡ªåŠ¨ä¼ å€¼çš„ç‰¹å¾ï¼Œå†³å®šäº†åœ¨ç±»ä¸­å®šä¹‰çš„å‡½æ•°éƒ½è¦é»˜è®¤å†™ä¸€ä¸ªå‚æ•°selfï¼Œselfå¯ä»¥æ˜¯ä»»æ„åå­—ï¼Œä½†å‘½åä¸ºselfæ˜¯çº¦å®šä¿—æˆçš„ã€‚</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-e54a102e09cb18b8deebc1bfee58c0ed_720w.jpg" alt="img"></p>
<p>Pythonä¸­ä¸€åˆ‡çš†ä¸ºå¯¹è±¡ï¼Œä¸”Python3ä¸­ç±»ä¸ç±»å‹æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œå› è€Œç»‘å®šæ–¹æ³•æˆ‘ä»¬æ—©å°±æ¥è§¦è¿‡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç±»å‹listå°±æ˜¯ç±»</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span></span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">list</span>&#x27;&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">#å®ä¾‹åŒ–çš„åˆ°3ä¸ªå¯¹è±¡<span class="title">l1</span>,<span class="title">l2</span>,<span class="title">l3</span></span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">l1</span>=<span class="title">list</span>(<span class="params">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span>)</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">l2</span>=<span class="title">list</span>(<span class="params">[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span>)</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">l3</span>=<span class="title">list</span>(<span class="params">[<span class="string">&#x27;x&#x27;</span>,<span class="string">&#x27;y&#x27;</span>]</span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">#ä¸‰ä¸ªå¯¹è±¡éƒ½æœ‰ç»‘å®šæ–¹æ³•<span class="title">append</span>,æ˜¯ç›¸åŒçš„åŠŸèƒ½,ä½†å†…å­˜åœ°å€ä¸åŒ</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">l1</span>.<span class="title">append</span></span></span><br><span class="line"><span class="class">&lt;<span class="title">built</span>-<span class="title">in</span> <span class="title">method</span> <span class="title">append</span> <span class="title">of</span> <span class="title">list</span> <span class="title">object</span> <span class="title">at</span> 0<span class="title">x10b482b48</span>&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">l2</span>.<span class="title">append</span></span></span><br><span class="line"><span class="class">&lt;<span class="title">built</span>-<span class="title">in</span> <span class="title">method</span> <span class="title">append</span> <span class="title">of</span> <span class="title">list</span> <span class="title">object</span> <span class="title">at</span> 0<span class="title">x10b482b88</span>&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">l3</span>.<span class="title">append</span></span></span><br><span class="line"><span class="class">&lt;<span class="title">built</span>-<span class="title">in</span> <span class="title">method</span> <span class="title">append</span> <span class="title">of</span> <span class="title">list</span> <span class="title">object</span> <span class="title">at</span> 0<span class="title">x10b482bc8</span>&gt;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">#æ“ä½œç»‘å®šæ–¹æ³•<span class="title">l1</span>.<span class="title">append</span>(<span class="params"><span class="number">4</span></span>),å°±æ˜¯åœ¨å¾€<span class="title">l1</span>æ·»åŠ 4,ç»å¯¹ä¸ä¼šå°†4æ·»åŠ åˆ°<span class="title">l2</span>æˆ–<span class="title">l3</span></span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">l1</span>.<span class="title">append</span>(<span class="params"><span class="number">4</span></span>) #ç­‰åŒäº<span class="title">list</span>.<span class="title">append</span>(<span class="params">l1,<span class="number">4</span></span>)</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">l1</span></span></span><br><span class="line"><span class="class">[1,2,3,4]</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">l2</span></span></span><br><span class="line"><span class="class">[&#x27;<span class="title">a</span>&#x27;,&#x27;<span class="title">b</span>&#x27;,&#x27;<span class="title">c</span>&#x27;]</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">l3</span></span></span><br><span class="line"><span class="class">[&#x27;<span class="title">x</span>&#x27;,&#x27;<span class="title">y</span>&#x27;]</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-b636757ed106dde009623bd44a59f95e_720w.jpg" alt="img"></p>
<h3 id="3-3-3-å°ç»“"><a href="#3-3-3-å°ç»“" class="headerlink" title="3.3.3 å°ç»“"></a>3.3.3 å°ç»“</h3><p>åœ¨ä¸Šè¿°ä»‹ç»ç±»ä¸å¯¹è±¡çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ›´å¤šçš„æ˜¯ç«™åœ¨åº•å±‚åŸç†çš„è§’åº¦å»ä»‹ç»ç±»ä¸å¯¹è±¡ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œå¦‚æœåªæ˜¯ç«™åœ¨ä½¿ç”¨çš„è§’åº¦ï¼Œæˆ‘ä»¬æ— éœ€è€ƒè™‘è¯­æ³•â€œå¯¹è±¡.å±æ€§â€ä¸­â€å±æ€§â€œåˆ°åº•æºè‡ªäºå“ªé‡Œï¼Œåªéœ€è¦çŸ¥é“æ˜¯é€šè¿‡å¯¹è±¡è·å–åˆ°çš„å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥è¯´ï¼Œå¯¹è±¡æ˜¯ä¸€ä¸ªé«˜åº¦æ•´åˆçš„äº§ç‰©ï¼Œæœ‰äº†å¯¹è±¡ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨â€å¯¹è±¡.xxxâ€œçš„è¯­æ³•å°±å¯ä»¥å¾—åˆ°è·Ÿè¿™ä¸ªå¯¹è±¡ç›¸å…³çš„æ‰€æœ‰æ•°æ®ä¸åŠŸèƒ½ï¼Œååˆ†æ–¹ä¾¿ä¸”è§£è€¦åˆç¨‹åº¦æé«˜ã€‚</p>
<p><img src="https://pic4.zhimg.com/80/v2-990cc37a6f39fc36193ba32a6a3c722f_720w.jpg" alt="img"></p>
<p><img src="https://pic1.zhimg.com/80/v2-b6a8d20895c9d6c58cdb2be667a03774_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=91">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=91<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>24-å°è£…</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/24_%E5%B0%81%E8%A3%85/</url>
    <content><![CDATA[<h1 id="24ã€å°è£…"><a href="#24ã€å°è£…" class="headerlink" title="24ã€å°è£…"></a>24ã€å°è£…</h1><p><a href="https://www.zhihu.com/people/xiaoyuanqujing"><img src="https://pic3.zhimg.com/v2-c71f12bc82a46fa2c0ad1268aa249d7e_xs.jpg?source=172ae18b" alt="Egonæ—æµ·å³°"></a></p>
<p><a href="https://www.zhihu.com/people/xiaoyuanqujing">Egonæ—æµ·å³°</a></p>
<p>Egonçš„çŸ¥è¯†æ˜Ÿçƒï¼š<a href="https://egonlin.com/">https://egonlin.com</a></p>
<p>å…³æ³¨ä»–</p>
<p>65 äººèµåŒäº†è¯¥æ–‡ç« </p>
<p>ç›®å½•ï¼š</p>
<ul>
<li><p>å¼•å…¥</p>
</li>
<li><p>éšè—å±æ€§</p>
</li>
<li><p>å¼€æ”¾æ¥å£</p>
</li>
<li><ul>
<li>éšè—æ•°æ®æ¥å£</li>
<li>éšè—å‡½æ•°æ¥å£</li>
</ul>
</li>
<li><p>property</p>
</li>
<li><p>è§†é¢‘é“¾æ¥</p>
</li>
</ul>
<p>å¼ºçƒˆæ¨èé…å¥—èµ„æ–™ï¼š<a href="https://link.zhihu.com/?target=https://egonlin.com/book.html">egonæ–°ä¹¦æ¥è¢­å¹²è´§æ»¡æ»¡ - linhaifeng</a></p>
<h2 id="ä¸€-å¼•å…¥"><a href="#ä¸€-å¼•å…¥" class="headerlink" title="ä¸€ å¼•å…¥"></a>ä¸€ å¼•å…¥</h2><p> é¢å‘å¯¹è±¡ç¼–ç¨‹æœ‰ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¸€ä¸ªç‰¹æ€§å°±æ˜¯å°è£…ã€‚å°è£…æŒ‡çš„å°±æ˜¯æŠŠæ•°æ®ä¸åŠŸèƒ½éƒ½æ•´åˆåˆ°ä¸€èµ·ï¼Œå¬èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œæ²¡é”™ï¼Œæˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„â€æ•´åˆâ€œäºŒå­—å…¶å®å°±æ˜¯å°è£…çš„é€šä¿—è¯´æ³•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œé’ˆå¯¹å°è£…åˆ°å¯¹è±¡æˆ–è€…ç±»ä¸­çš„å±æ€§ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¸¥æ ¼æ§åˆ¶å¯¹å®ƒä»¬çš„è®¿é—®ï¼Œåˆ†ä¸¤æ­¥å®ç°ï¼šéšè—ä¸å¼€æ”¾æ¥å£</p>
<p><img src="https://pic4.zhimg.com/80/v2-6a32e315fdeb5e7de1452455ee287933_720w.jpg" alt="img"></p>
<h2 id="äºŒ-éšè—å±æ€§"><a href="#äºŒ-éšè—å±æ€§" class="headerlink" title="äºŒ éšè—å±æ€§"></a>äºŒ éšè—å±æ€§</h2><p>Pythonçš„Classæœºåˆ¶é‡‡ç”¨åŒä¸‹åˆ’çº¿å¼€å¤´çš„æ–¹å¼å°†å±æ€§éšè—èµ·æ¥ï¼ˆè®¾ç½®æˆç§æœ‰çš„ï¼‰ï¼Œä½†å…¶å®è¿™ä»…ä»…åªæ˜¯ä¸€ç§å˜å½¢æ“ä½œï¼Œç±»ä¸­æ‰€æœ‰åŒä¸‹æ»‘çº¿å¼€å¤´çš„å±æ€§éƒ½ä¼šåœ¨ç±»å®šä¹‰é˜¶æ®µã€æ£€æµ‹è¯­æ³•æ—¶è‡ªåŠ¨å˜æˆâ€œ_ç±»å__å±æ€§åâ€çš„å½¢å¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    __N=<span class="number">0</span> <span class="comment"># å˜å½¢ä¸º_Foo__N</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span> <span class="comment"># å®šä¹‰å‡½æ•°æ—¶ï¼Œä¼šæ£€æµ‹å‡½æ•°è¯­æ³•ï¼Œæ‰€ä»¥__å¼€å¤´çš„å±æ€§ä¹Ÿä¼šå˜å½¢</span></span><br><span class="line">        self.__x=<span class="number">10</span> <span class="comment"># å˜å½¢ä¸ºself._Foo__x</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__f1</span>(<span class="params">self</span>):</span> <span class="comment"># å˜å½¢ä¸º_Foo__f1</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;__f1 run&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f2</span>(<span class="params">self</span>):</span>  <span class="comment"># å®šä¹‰å‡½æ•°æ—¶ï¼Œä¼šæ£€æµ‹å‡½æ•°è¯­æ³•ï¼Œæ‰€ä»¥__å¼€å¤´çš„å±æ€§ä¹Ÿä¼šå˜å½¢</span></span><br><span class="line">        self.__f1() <span class="comment">#å˜å½¢ä¸ºself._Foo__f1()</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Foo.__N) <span class="comment"># æŠ¥é”™AttributeError:ç±»Fooæ²¡æœ‰å±æ€§__N</span></span><br><span class="line"></span><br><span class="line">obj = Foo()</span><br><span class="line"><span class="built_in">print</span>(obbj.__x) <span class="comment"># æŠ¥é”™AttributeError:å¯¹è±¡objæ²¡æœ‰å±æ€§__x</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-805e04f3fd093604e61c6fa286d1658a_720w.jpg" alt="img"></p>
<p>è¿™ç§å˜å½¢éœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼š</p>
<p>1ã€åœ¨ç±»å¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®åŒä¸‹æ»‘çº¿å¼€å¤´çš„å±æ€§ï¼Œä½†çŸ¥é“äº†ç±»åå’Œå±æ€§åå°±å¯ä»¥æ‹¼å‡ºåå­—ï¼š_ç±»å__å±æ€§ï¼Œç„¶åå°±å¯ä»¥è®¿é—®äº†ï¼Œå¦‚Foo._A__Nï¼Œæ‰€ä»¥è¯´è¿™ç§æ“ä½œå¹¶æ²¡æœ‰ä¸¥æ ¼æ„ä¹‰ä¸Šåœ°é™åˆ¶å¤–éƒ¨è®¿é—®ï¼Œä»…ä»…åªæ˜¯ä¸€ç§è¯­æ³•æ„ä¹‰ä¸Šçš„å˜å½¢ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Foo.__dict__</span><br><span class="line">mappingproxy(&#123;..., <span class="string">&#x27;_Foo__N&#x27;</span>: <span class="number">0</span>, ...&#125;)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj.__dict__</span><br><span class="line">&#123;<span class="string">&#x27;_Foo__x&#x27;</span>: <span class="number">10</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Foo._Foo__N</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj._Foo__x</span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj._Foo__N</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>2ã€åœ¨ç±»å†…éƒ¨æ˜¯å¯ä»¥ç›´æ¥è®¿é—®åŒä¸‹æ»‘çº¿å¼€å¤´çš„å±æ€§çš„ï¼Œæ¯”å¦‚self.__f1()ï¼Œå› ä¸ºåœ¨ç±»å®šä¹‰é˜¶æ®µç±»å†…éƒ¨åŒä¸‹æ»‘çº¿å¼€å¤´çš„å±æ€§ç»Ÿä¸€å‘ç”Ÿäº†å˜å½¢ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj.f2()</span><br><span class="line">__f1 run</span><br></pre></td></tr></table></figure>

<p>3ã€å˜å½¢æ“ä½œåªåœ¨ç±»å®šä¹‰é˜¶æ®µå‘ç”Ÿä¸€æ¬¡,åœ¨ç±»å®šä¹‰ä¹‹åçš„èµ‹å€¼æ“ä½œï¼Œä¸ä¼šå˜å½¢ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Foo.__M=<span class="number">100</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Foo.__dict__</span><br><span class="line">mappingproxy(&#123;..., <span class="string">&#x27;__M&#x27;</span>: <span class="number">100</span>,...&#125;)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Foo.__M</span><br><span class="line"><span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj.__y=<span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj.__dict__</span><br><span class="line">&#123;<span class="string">&#x27;__y&#x27;</span>: <span class="number">20</span>, <span class="string">&#x27;_Foo__x&#x27;</span>: <span class="number">10</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj.__y</span><br><span class="line"><span class="number">20</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-8832156adebe2467bff885f22728411f_720w.jpg" alt="img"></p>
<h2 id="ä¸‰-å¼€æ”¾æ¥å£"><a href="#ä¸‰-å¼€æ”¾æ¥å£" class="headerlink" title="ä¸‰ å¼€æ”¾æ¥å£"></a>ä¸‰ å¼€æ”¾æ¥å£</h2><p>å®šä¹‰å±æ€§å°±æ˜¯ä¸ºäº†ä½¿ç”¨ï¼Œæ‰€ä»¥éšè—å¹¶ä¸æ˜¯ç›®çš„</p>
<h2 id="3-1-éšè—æ•°æ®å±æ€§"><a href="#3-1-éšè—æ•°æ®å±æ€§" class="headerlink" title="3.1 éšè—æ•°æ®å±æ€§"></a>3.1 éšè—æ•°æ®å±æ€§</h2><p>å°†æ•°æ®éšè—èµ·æ¥å°±é™åˆ¶äº†ç±»å¤–éƒ¨å¯¹æ•°æ®çš„ç›´æ¥æ“ä½œï¼Œç„¶åç±»å†…åº”è¯¥æä¾›ç›¸åº”çš„æ¥å£æ¥å…è®¸ç±»å¤–éƒ¨é—´æ¥åœ°æ“ä½œæ•°æ®ï¼Œæ¥å£ä¹‹ä¸Šå¯ä»¥é™„åŠ é¢å¤–çš„é€»è¾‘æ¥å¯¹æ•°æ®çš„æ“ä½œè¿›è¡Œä¸¥æ ¼åœ°æ§åˆ¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,age</span>):</span> <span class="comment">#å°†åå­—å’Œå¹´çºªéƒ½éšè—èµ·æ¥</span></span><br><span class="line"><span class="meta">... </span>        self.__name=name</span><br><span class="line"><span class="meta">... </span>        self.__age=age</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">tell_info</span>(<span class="params">self</span>):</span> <span class="comment">#å¯¹å¤–æä¾›è®¿é—®è€å¸ˆä¿¡æ¯çš„æ¥å£</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;å§“å:%s,å¹´é¾„:%s&#x27;</span> %(self.__name,self.__age))</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">set_info</span>(<span class="params">self,name,age</span>):</span> <span class="comment">#å¯¹å¤–æä¾›è®¾ç½®è€å¸ˆä¿¡æ¯çš„æ¥å£ï¼Œå¹¶é™„åŠ ç±»å‹æ£€æŸ¥çš„é€»è¾‘</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(name,<span class="built_in">str</span>):</span><br><span class="line"><span class="meta">... </span>            <span class="keyword">raise</span> TypeError(<span class="string">&#x27;å§“åå¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹&#x27;</span>)</span><br><span class="line"><span class="meta">... </span>        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(age,<span class="built_in">int</span>):</span><br><span class="line"><span class="meta">... </span>            <span class="keyword">raise</span> TypeError(<span class="string">&#x27;å¹´é¾„å¿…é¡»æ˜¯æ•´å‹&#x27;</span>)</span><br><span class="line"><span class="meta">... </span>        self.__name=name</span><br><span class="line"><span class="meta">... </span>        self.__age=age</span><br><span class="line"><span class="meta">... </span></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t=Teacher(<span class="string">&#x27;lili&#x27;</span>,<span class="number">18</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>t.set_info(â€˜LiLi<span class="string">&#x27;,&#x27;</span><span class="number">19</span><span class="string">&#x27;) # å¹´é¾„ä¸ä¸ºæ•´å‹ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="string">Traceback (most recent call last):</span></span><br><span class="line"><span class="string">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span></span><br><span class="line"><span class="string">  File &quot;&lt;stdin&gt;&quot;, line 11, in set_info</span></span><br><span class="line"><span class="string">TypeError: å¹´é¾„å¿…é¡»æ˜¯æ•´å‹</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; t.set_info(&#x27;</span>LiLi<span class="string">&#x27;,19) # åå­—ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œå¹´é¾„ä¸ºæ•´å½¢ï¼Œå¯ä»¥æ­£å¸¸è®¾ç½®</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; t.tell_info() # æŸ¥çœ‹è€å¸ˆçš„ä¿¡æ¯</span></span><br><span class="line"><span class="string">å§“å:LiLi,å¹´é¾„:19</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-8ee414d1292c42e754f32fa3887c77eb_720w.jpg" alt="img"></p>
<h2 id="3-2-éšè—å‡½æ•°å±æ€§"><a href="#3-2-éšè—å‡½æ•°å±æ€§" class="headerlink" title="3.2 éšè—å‡½æ•°å±æ€§"></a>3.2 éšè—å‡½æ•°å±æ€§</h2><p>ç›®çš„çš„æ˜¯ä¸ºäº†éš”ç¦»å¤æ‚åº¦ï¼Œä¾‹å¦‚ATMç¨‹åºçš„å–æ¬¾åŠŸèƒ½,è¯¥åŠŸèƒ½æœ‰å¾ˆå¤šå…¶ä»–åŠŸèƒ½ç»„æˆï¼Œæ¯”å¦‚æ’å¡ã€èº«ä»½è®¤è¯ã€è¾“å…¥é‡‘é¢ã€æ‰“å°å°ç¥¨ã€å–é’±ç­‰ï¼Œè€Œå¯¹ä½¿ç”¨è€…æ¥è¯´,åªéœ€è¦å¼€å‘å–æ¬¾è¿™ä¸ªåŠŸèƒ½æ¥å£å³å¯,å…¶ä½™åŠŸèƒ½æˆ‘ä»¬éƒ½å¯ä»¥éšè—èµ·æ¥</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">ATM</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__card</span>(<span class="params">self</span>):</span> <span class="comment">#æ’å¡</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;æ’å¡&#x27;</span>)</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__auth</span>(<span class="params">self</span>):</span> <span class="comment">#èº«ä»½è®¤è¯</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;ç”¨æˆ·è®¤è¯&#x27;</span>)</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__input</span>(<span class="params">self</span>):</span> <span class="comment">#è¾“å…¥é‡‘é¢</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;è¾“å…¥å–æ¬¾é‡‘é¢&#x27;</span>)</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__print_bill</span>(<span class="params">self</span>):</span> <span class="comment">#æ‰“å°å°ç¥¨</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;æ‰“å°è´¦å•&#x27;</span>)</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__take_money</span>(<span class="params">self</span>):</span> <span class="comment">#å–é’±</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;å–æ¬¾&#x27;</span>)</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">withdraw</span>(<span class="params">self</span>):</span> <span class="comment">#å–æ¬¾åŠŸèƒ½</span></span><br><span class="line"><span class="meta">... </span>        self.__card()</span><br><span class="line"><span class="meta">... </span>        self.__auth()</span><br><span class="line"><span class="meta">... </span>        self.__<span class="built_in">input</span>()</span><br><span class="line"><span class="meta">... </span>        self.__print_bill()</span><br><span class="line"><span class="meta">... </span>        self.__take_money()</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj=ATM()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj.withdraw()</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-3a8cbf5b04077b88e85f6c075b37b94d_720w.jpg" alt="img"></p>
<p>æ€»ç»“éšè—å±æ€§ä¸å¼€æ”¾æ¥å£ï¼Œæœ¬è´¨å°±æ˜¯ä¸ºäº†æ˜ç¡®åœ°åŒºåˆ†å†…å¤–ï¼Œç±»å†…éƒ¨å¯ä»¥ä¿®æ”¹å°è£…å†…çš„ä¸œè¥¿è€Œä¸å½±å“å¤–éƒ¨è°ƒç”¨è€…çš„ä»£ç ï¼›è€Œç±»å¤–éƒ¨åªéœ€æ‹¿åˆ°ä¸€ä¸ªæ¥å£ï¼Œåªè¦æ¥å£åã€å‚æ•°ä¸å˜ï¼Œåˆ™æ— è®ºè®¾è®¡è€…å¦‚ä½•æ”¹å˜å†…éƒ¨å®ç°ä»£ç ï¼Œä½¿ç”¨è€…å‡æ— éœ€æ”¹å˜ä»£ç ã€‚è¿™å°±æä¾›ä¸€ä¸ªè‰¯å¥½çš„åˆä½œåŸºç¡€ï¼Œåªè¦æ¥å£è¿™ä¸ªåŸºç¡€çº¦å®šä¸å˜ï¼Œåˆ™ä»£ç çš„ä¿®æ”¹ä¸è¶³ä¸ºè™‘ã€‚</p>
<h2 id="å››-property"><a href="#å››-property" class="headerlink" title="å›› property"></a>å›› property</h2><p>BMIæŒ‡æ•°æ˜¯ç”¨æ¥è¡¡é‡ä¸€ä¸ªäººçš„ä½“é‡ä¸èº«é«˜å¯¹å¥åº·å½±å“çš„ä¸€ä¸ªæŒ‡æ ‡ï¼Œè®¡ç®—å…¬å¼ä¸º</p>
<p><img src="https://pic3.zhimg.com/80/v2-43498605399e4a86e295e67ddd75962e_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ä½“è´¨æŒ‡æ•°ï¼ˆBMIï¼‰=ä½“é‡ï¼ˆkgï¼‰Ã·èº«é«˜^<span class="number">2</span>ï¼ˆmï¼‰</span><br><span class="line">EXï¼š70kgÃ·ï¼ˆ<span class="number">1.75</span>Ã—<span class="number">1.75</span>ï¼‰=<span class="number">22.86</span></span><br></pre></td></tr></table></figure>

<p>èº«é«˜æˆ–ä½“é‡æ˜¯ä¸æ–­å˜åŒ–çš„ï¼Œå› è€Œæ¯æ¬¡æƒ³æŸ¥çœ‹BMIå€¼éƒ½éœ€è¦é€šè¿‡è®¡ç®—æ‰èƒ½å¾—åˆ°ï¼Œä½†å¾ˆæ˜æ˜¾BMIå¬èµ·æ¥æ›´åƒæ˜¯ä¸€ä¸ªç‰¹å¾è€ŒéåŠŸèƒ½ï¼Œä¸ºæ­¤Pythonä¸“é—¨æä¾›äº†ä¸€ä¸ªè£…é¥°å™¨propertyï¼Œå¯ä»¥å°†ç±»ä¸­çš„å‡½æ•°â€œä¼ªè£…æˆâ€å¯¹è±¡çš„æ•°æ®å±æ€§ï¼Œå¯¹è±¡åœ¨è®¿é—®è¯¥ç‰¹æ®Šå±æ€§æ—¶ä¼šè§¦å‘åŠŸèƒ½çš„æ‰§è¡Œï¼Œç„¶åå°†è¿”å›å€¼ä½œä¸ºæœ¬æ¬¡è®¿é—®çš„ç»“æœï¼Œä¾‹å¦‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">People</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,weight,height</span>):</span></span><br><span class="line"><span class="meta">... </span>        self.name=name</span><br><span class="line"><span class="meta">... </span>        self.weight=weight</span><br><span class="line"><span class="meta">... </span>        self.height=height</span><br><span class="line"><span class="meta">... </span>    @<span class="built_in">property</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">bmi</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">return</span> self.weight / (self.height**<span class="number">2</span>)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj=People(<span class="string">&#x27;lili&#x27;</span>,<span class="number">75</span>,<span class="number">1.85</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj.bmi <span class="comment">#è§¦å‘æ–¹æ³•bmiçš„æ‰§è¡Œï¼Œå°†objè‡ªåŠ¨ä¼ ç»™selfï¼Œæ‰§è¡Œåè¿”å›å€¼ä½œä¸ºæœ¬æ¬¡å¼•ç”¨çš„ç»“æœ</span></span><br><span class="line"><span class="number">21.913805697589478</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-6efd0b831d73e828f7c644df0d8d996f_720w.jpg" alt="img"></p>
<p>ä½¿ç”¨propertyæœ‰æ•ˆåœ°ä¿è¯äº†å±æ€§è®¿é—®çš„ä¸€è‡´æ€§ã€‚å¦å¤–propertyè¿˜æä¾›è®¾ç½®å’Œåˆ é™¤å±æ€§çš„åŠŸèƒ½ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,val</span>):</span></span><br><span class="line"><span class="meta">... </span>        self.__NAME=val <span class="comment">#å°†å±æ€§éšè—èµ·æ¥</span></span><br><span class="line"><span class="meta">... </span>    @<span class="built_in">property</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">name</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">return</span> self.__NAME</span><br><span class="line"><span class="meta">... </span>    @name.setter</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">name</span>(<span class="params">self,value</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(value,<span class="built_in">str</span>):  <span class="comment">#åœ¨è®¾å®šå€¼ä¹‹å‰è¿›è¡Œç±»å‹æ£€æŸ¥</span></span><br><span class="line"><span class="meta">... </span>            <span class="keyword">raise</span> TypeError(<span class="string">&#x27;%s must be str&#x27;</span> %value)</span><br><span class="line"><span class="meta">... </span>        self.__NAME=value <span class="comment">#é€šè¿‡ç±»å‹æ£€æŸ¥å,å°†å€¼valueå­˜æ”¾åˆ°çœŸå®çš„ä½ç½®self.__NAME</span></span><br><span class="line"><span class="meta">... </span>    @name.deleter</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">name</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">raise</span> PermissionError(<span class="string">&#x27;Can not delete&#x27;</span>)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f=Foo(<span class="string">&#x27;lili&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.name</span><br><span class="line">lili</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.name=<span class="string">&#x27;LiLi&#x27;</span> <span class="comment">#è§¦å‘name.setterè£…é¥°å™¨å¯¹åº”çš„å‡½æ•°name(f,â€™Egon&#x27;)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.name=<span class="number">123</span> <span class="comment">#è§¦å‘name.setterå¯¹åº”çš„çš„å‡½æ•°name(f,123),æŠ›å‡ºå¼‚å¸¸TypeError</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> f.name <span class="comment">#è§¦å‘name.deleterå¯¹åº”çš„å‡½æ•°name(f),æŠ›å‡ºå¼‚å¸¸PermissionError</span></span><br></pre></td></tr></table></figure>

<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p>å°è£…ä¹‹éšè—å±æ€§</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=111">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=111<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p>å°è£…çœŸæ­£çš„æ„ä¹‰</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=112">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=112<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
<p>property</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=113">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=113<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>25-ç»§æ‰¿ä¸æ´¾ç”Ÿ</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/25_%E7%BB%A7%E6%89%BF%E4%B8%8E%E6%B4%BE%E7%94%9F/</url>
    <content><![CDATA[<h2 id="ä¸€-ç»§æ‰¿ä»‹ç»"><a href="#ä¸€-ç»§æ‰¿ä»‹ç»" class="headerlink" title="ä¸€ ç»§æ‰¿ä»‹ç»"></a>ä¸€ ç»§æ‰¿ä»‹ç»</h2><p><img src="https://pic3.zhimg.com/80/v2-e3ac39ed0476bd4ad372e51bea210c72_720w.jpg" alt="img"></p>
<p>ç»§æ‰¿æ˜¯ä¸€ç§åˆ›å»ºæ–°ç±»çš„æ–¹å¼ï¼Œåœ¨Pythonä¸­ï¼Œæ–°å»ºçš„ç±»å¯ä»¥ç»§æ‰¿ä¸€ä¸ªæˆ–å¤šä¸ªçˆ¶ç±»ï¼Œæ–°å»ºçš„ç±»å¯ç§°ä¸ºå­ç±»æˆ–æ´¾ç”Ÿç±»ï¼Œçˆ¶ç±»åˆå¯ç§°ä¸ºåŸºç±»æˆ–è¶…ç±»</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParentClass1</span>:</span> <span class="comment">#å®šä¹‰çˆ¶ç±»</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParentClass2</span>:</span> <span class="comment">#å®šä¹‰çˆ¶ç±»</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClass1</span>(<span class="params">ParentClass1</span>):</span> <span class="comment">#å•ç»§æ‰¿</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClass2</span>(<span class="params">ParentClass1,ParentClass2</span>):</span> <span class="comment">#å¤šç»§æ‰¿</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ç±»çš„å†…ç½®å±æ€§__bases__å¯ä»¥æŸ¥çœ‹ç±»ç»§æ‰¿çš„æ‰€æœ‰çˆ¶ç±»</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>SubClass2.__bases__</span><br><span class="line">(&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">__main__</span>.<span class="title">ParentClass1</span>&#x27;&gt;, &lt;<span class="title">class</span> &#x27;<span class="title">__main__</span>.<span class="title">ParentClass2</span>&#x27;&gt;)</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-b61fc012e7821e82ed7a57bf446f238c_720w.jpg" alt="img"></p>
<p>åœ¨Python2ä¸­æœ‰ç»å…¸ç±»ä¸æ–°å¼ç±»ä¹‹åˆ†ï¼Œæ²¡æœ‰æ˜¾å¼åœ°ç»§æ‰¿objectç±»çš„ç±»ï¼Œä»¥åŠè¯¥ç±»çš„å­ç±»ï¼Œéƒ½æ˜¯ç»å…¸ç±»ï¼Œæ˜¾å¼åœ°ç»§æ‰¿objectçš„ç±»ï¼Œä»¥åŠè¯¥ç±»çš„å­ç±»ï¼Œéƒ½æ˜¯æ–°å¼ç±»ã€‚è€Œåœ¨Python3ä¸­ï¼Œå³ä½¿æ²¡æœ‰æ˜¾å¼åœ°ç»§æ‰¿objectï¼Œä¹Ÿä¼šé»˜è®¤ç»§æ‰¿è¯¥ç±»ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>ParentClass1.__bases__</span><br><span class="line">(&lt;<span class="class"><span class="keyword">class</span> â€˜<span class="title">object</span>&#x27;&gt;,)</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">ParentClass2</span>.<span class="title">__bases__</span></span></span><br><span class="line"><span class="class">(<span class="params">&lt;<span class="keyword">class</span> <span class="string">&#x27;object&#x27;</span>&gt;,</span>)</span></span><br></pre></td></tr></table></figure>

<p>å› è€Œåœ¨Python3ä¸­ç»Ÿä¸€éƒ½æ˜¯æ–°å¼ç±»ï¼Œå…³äºç»å…¸ç±»ä¸æ–°å¼ç±»çš„åŒºåˆ«ï¼Œæˆ‘ä»¬ç¨åè®¨è®º</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">æç¤ºï¼š<span class="built_in">object</span>ç±»æä¾›äº†ä¸€äº›å¸¸ç”¨å†…ç½®æ–¹æ³•çš„å®ç°ï¼Œå¦‚ç”¨æ¥åœ¨æ‰“å°å¯¹è±¡æ—¶è¿”å›å­—ç¬¦ä¸²çš„å†…ç½®æ–¹æ³•__str__</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-7c9d1a5d2778f92a7327f8733dcb419a_720w.jpg" alt="img"></p>
<h2 id="äºŒ-ç»§æ‰¿ä¸æŠ½è±¡"><a href="#äºŒ-ç»§æ‰¿ä¸æŠ½è±¡" class="headerlink" title="äºŒ ç»§æ‰¿ä¸æŠ½è±¡"></a>äºŒ ç»§æ‰¿ä¸æŠ½è±¡</h2><p>è¦æ‰¾å‡ºç±»ä¸ç±»ä¹‹é—´çš„ç»§æ‰¿å…³ç³»ï¼Œéœ€è¦å…ˆæŠ½è±¡ï¼Œå†ç»§æ‰¿ã€‚æŠ½è±¡å³æ€»ç»“ç›¸ä¼¼ä¹‹å¤„ï¼Œæ€»ç»“å¯¹è±¡ä¹‹é—´çš„ç›¸ä¼¼ä¹‹å¤„å¾—åˆ°ç±»ï¼Œæ€»ç»“ç±»ä¸ç±»ä¹‹é—´çš„ç›¸ä¼¼ä¹‹å¤„å°±å¯ä»¥å¾—åˆ°çˆ¶ç±»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://pic1.zhimg.com/80/v2-10df80634dbda00e4dcb4113c2a75b3c_720w.jpg" alt="img"></p>
<p>åŸºäºæŠ½è±¡çš„ç»“æœï¼Œæˆ‘ä»¬å°±æ‰¾åˆ°äº†ç»§æ‰¿å…³ç³»</p>
<p><img src="https://pic1.zhimg.com/80/v2-d22528a722bfbb1765b99d1d75d8f1a4_720w.jpg" alt="img"></p>
<p>åŸºäºä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹å‡ºç±»ä¸ç±»ä¹‹é—´çš„ç»§æ‰¿æŒ‡çš„æ˜¯ä»€ä¹ˆâ€™æ˜¯â€™ä»€ä¹ˆçš„å…³ç³»ï¼ˆæ¯”å¦‚äººç±»ï¼ŒçŒªç±»ï¼ŒçŒ´ç±»éƒ½æ˜¯åŠ¨ç‰©ç±»ï¼‰ã€‚å­ç±»å¯ä»¥ç»§æ‰¿ï¼é—ä¼ çˆ¶ç±»æ‰€æœ‰çš„å±æ€§ï¼Œå› è€Œç»§æ‰¿å¯ä»¥ç”¨æ¥è§£å†³ç±»ä¸ç±»ä¹‹é—´çš„ä»£ç é‡ç”¨æ€§é—®é¢˜ã€‚æ¯”å¦‚æˆ‘ä»¬æŒ‰ç…§å®šä¹‰Studentç±»çš„æ–¹å¼å†å®šä¹‰ä¸€ä¸ªTeacherç±»</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>:</span></span><br><span class="line">    school=<span class="string">&#x27;æ¸…åå¤§å­¦&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,sex,age</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.sex=sex</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">teach</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is teaching&#x27;</span> %self.name)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-a17f608a24f6f7dfc8d72c1394a8057f_720w.jpg" alt="img"></p>
<p>ç±»Teacherä¸Studentä¹‹é—´å­˜åœ¨é‡å¤çš„ä»£ç ï¼Œè€å¸ˆä¸å­¦ç”Ÿéƒ½æ˜¯äººç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—å‡ºå¦‚ä¸‹ç»§æ‰¿å…³ç³»ï¼Œå®ç°ä»£ç é‡ç”¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span>:</span></span><br><span class="line">    school=<span class="string">&#x27;æ¸…åå¤§å­¦&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,sex,age</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.sex=sex</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>(<span class="params">People</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">choose</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is choosing a course&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>(<span class="params">People</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">teach</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is teaching&#x27;</span> %self.name)</span><br></pre></td></tr></table></figure>

<p>Teacherç±»å†…å¹¶æ²¡æœ‰å®šä¹‰__init__æ–¹æ³•ï¼Œä½†æ˜¯ä¼šä»çˆ¶ç±»ä¸­æ‰¾åˆ°__init__,å› è€Œä»ç„¶å¯ä»¥æ­£å¸¸å®ä¾‹åŒ–ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>teacher1=Teacher(<span class="string">&#x27;lili&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">18</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>teacher1.school,teacher1.name,teacher1.sex,teacher1.age</span><br><span class="line">(<span class="string">&#x27;æ¸…åå¤§å­¦&#x27;</span>, <span class="string">&#x27;lili&#x27;</span>, <span class="string">&#x27;male&#x27;</span>, <span class="number">18</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-b933b0de334a6cad2b227b53f3ae170a_720w.jpg" alt="img"></p>
<h2 id="ä¸‰-å±æ€§æŸ¥æ‰¾"><a href="#ä¸‰-å±æ€§æŸ¥æ‰¾" class="headerlink" title="ä¸‰ å±æ€§æŸ¥æ‰¾"></a>ä¸‰ å±æ€§æŸ¥æ‰¾</h2><p>æœ‰äº†ç»§æ‰¿å…³ç³»ï¼Œå¯¹è±¡åœ¨æŸ¥æ‰¾å±æ€§æ—¶ï¼Œå…ˆä»å¯¹è±¡è‡ªå·±çš„__dict__ä¸­æ‰¾ï¼Œå¦‚æœæ²¡æœ‰åˆ™å»å­ç±»ä¸­æ‰¾ï¼Œç„¶åå†å»çˆ¶ç±»ä¸­æ‰¾â€¦â€¦</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">f1</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;Foo.f1&#x27;</span>)</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">f2</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;Foo.f2&#x27;</span>)</span><br><span class="line"><span class="meta">... </span>        self.f1()</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Bar</span>(<span class="params">Foo</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">f1</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;Foo.f1&#x27;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=Bar()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.f2()</span><br><span class="line">Foo.f2</span><br><span class="line">Foo.f1</span><br></pre></td></tr></table></figure>

<p>b.f2()ä¼šåœ¨çˆ¶ç±»Fooä¸­æ‰¾åˆ°f2ï¼Œå…ˆæ‰“å°Foo.f2,ç„¶åæ‰§è¡Œåˆ°self.f1(),å³b.f1()ï¼Œä»ä¼šæŒ‰ç…§ï¼šå¯¹è±¡æœ¬èº«-&gt;ç±»Bar-&gt;çˆ¶ç±»Fooçš„é¡ºåºä¾æ¬¡æ‰¾ä¸‹å»ï¼Œåœ¨ç±»Barä¸­æ‰¾åˆ°f1ï¼Œå› è€Œæ‰“å°ç»“æœä¸ºFoo.f1</p>
<p><img src="https://pic2.zhimg.com/80/v2-3b3119b9824bc80de6d1c7cb11219a6d_720w.jpg" alt="img"></p>
<p>çˆ¶ç±»å¦‚æœä¸æƒ³è®©å­ç±»è¦†ç›–è‡ªå·±çš„æ–¹æ³•ï¼Œå¯ä»¥é‡‡ç”¨åŒä¸‹åˆ’çº¿å¼€å¤´çš„æ–¹å¼å°†æ–¹æ³•è®¾ç½®ä¸ºç§æœ‰çš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__f1</span>(<span class="params">self</span>):</span> <span class="comment"># å˜å½¢ä¸º_Foo__fa</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;Foo.f1&#x27;</span>) </span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">f2</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;Foo.f2&#x27;</span>)</span><br><span class="line"><span class="meta">... </span>        self.__f1() <span class="comment"># å˜å½¢ä¸ºself._Foo__fa,å› è€Œåªä¼šè°ƒç”¨è‡ªå·±æ‰€åœ¨çš„ç±»ä¸­çš„æ–¹æ³•</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Bar</span>(<span class="params">Foo</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__f1</span>(<span class="params">self</span>):</span> <span class="comment"># å˜å½¢ä¸º_Bar__f1</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;Foo.f1&#x27;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=Bar()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.f2() <span class="comment">#åœ¨çˆ¶ç±»ä¸­æ‰¾åˆ°f2æ–¹æ³•ï¼Œè¿›è€Œè°ƒç”¨b._Foo__f1()æ–¹æ³•ï¼ŒåŒæ ·æ˜¯åœ¨çˆ¶ç±»ä¸­æ‰¾åˆ°è¯¥æ–¹æ³•</span></span><br><span class="line">Foo.f2</span><br><span class="line">Foo.f1</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-80a1043173e8f968576b1efd57e857e9_720w.jpg" alt="img"></p>
<h2 id="å››-ç»§æ‰¿çš„å®ç°åŸç†"><a href="#å››-ç»§æ‰¿çš„å®ç°åŸç†" class="headerlink" title="å›› ç»§æ‰¿çš„å®ç°åŸç†"></a>å›› ç»§æ‰¿çš„å®ç°åŸç†</h2><h3 id="4-1-è±å½¢é—®é¢˜"><a href="#4-1-è±å½¢é—®é¢˜" class="headerlink" title="4.1 è±å½¢é—®é¢˜"></a>4.1 è±å½¢é—®é¢˜</h3><p> å¤§å¤šæ•°é¢å‘å¯¹è±¡è¯­è¨€éƒ½ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œè€Œåœ¨Pythonä¸­ï¼Œä¸€ä¸ªå­ç±»æ˜¯å¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªçˆ¶ç±»çš„ï¼Œè¿™å›ºç„¶å¯ä»¥å¸¦æ¥ä¸€ä¸ªå­ç±»å¯ä»¥å¯¹å¤šä¸ªä¸åŒçˆ¶ç±»åŠ ä»¥é‡ç”¨çš„å¥½å¤„ï¼Œä½†ä¹Ÿæœ‰å¯èƒ½å¼•å‘è‘—åçš„ <a href="https://link.zhihu.com/?target=https://en.wikipedia.org/wiki/Diamond_problem">Diamond problem</a>è±å½¢é—®é¢˜(æˆ–ç§°é’»çŸ³é—®é¢˜ï¼Œæœ‰æ—¶å€™ä¹Ÿè¢«ç§°ä¸ºâ€œæ­»äº¡é’»çŸ³â€)ï¼Œè±å½¢å…¶å®å°±æ˜¯å¯¹ä¸‹é¢è¿™ç§ç»§æ‰¿ç»“æ„çš„å½¢è±¡æ¯”å–»</p>
<p><img src="https://pic4.zhimg.com/80/v2-7c6088a106bbf1fc46de0cca9c03a037_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Aç±»åœ¨é¡¶éƒ¨ï¼ŒBç±»å’ŒCç±»åˆ†åˆ«ä½äºå…¶ä¸‹æ–¹ï¼ŒDç±»åœ¨åº•éƒ¨å°†ä¸¤è€…è¿æ¥åœ¨ä¸€èµ·å½¢æˆè±å½¢ã€‚</span><br></pre></td></tr></table></figure>

<p>è¿™ç§ç»§æ‰¿ç»“æ„ä¸‹å¯¼è‡´çš„é—®é¢˜ç§°ä¹‹ä¸ºè±å½¢é—®é¢˜ï¼šå¦‚æœAä¸­æœ‰ä¸€ä¸ªæ–¹æ³•ï¼ŒBå’Œ&#x2F;æˆ–Céƒ½é‡å†™äº†è¯¥æ–¹æ³•ï¼Œè€ŒDæ²¡æœ‰é‡å†™å®ƒï¼Œé‚£ä¹ˆDç»§æ‰¿çš„æ˜¯å“ªä¸ªç‰ˆæœ¬çš„æ–¹æ³•ï¼šBçš„è¿˜æ˜¯Cçš„ï¼Ÿå¦‚ä¸‹æ‰€ç¤º</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from A&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>(<span class="params">A</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from B&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>(<span class="params">A</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from C&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span>(<span class="params">B,C</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = D()</span><br><span class="line">obj.test() <span class="comment"># ç»“æœä¸ºï¼šfrom B</span></span><br></pre></td></tr></table></figure>

<p>è¦æƒ³ææ˜ç™½obj.test()æ˜¯å¦‚ä½•æ‰¾åˆ°æ–¹æ³•testçš„ï¼Œéœ€è¦äº†è§£pythonçš„ç»§æ‰¿å®ç°åŸç†</p>
<h3 id="4-2-ç»§æ‰¿åŸç†"><a href="#4-2-ç»§æ‰¿åŸç†" class="headerlink" title="4.2 ç»§æ‰¿åŸç†"></a>4.2 ç»§æ‰¿åŸç†</h3><p>pythonåˆ°åº•æ˜¯å¦‚ä½•å®ç°ç»§æ‰¿çš„å‘¢ï¼Ÿ å¯¹äºä½ å®šä¹‰çš„æ¯ä¸€ä¸ªç±»ï¼ŒPythonéƒ½ä¼šè®¡ç®—å‡ºä¸€ä¸ªæ–¹æ³•è§£æé¡ºåº(MRO)åˆ—è¡¨ï¼Œè¯¥MROåˆ—è¡¨å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ‰€æœ‰åŸºç±»çš„çº¿æ€§é¡ºåºåˆ—è¡¨ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>D.mro() <span class="comment"># æ–°å¼ç±»å†…ç½®äº†mroæ–¹æ³•å¯ä»¥æŸ¥çœ‹çº¿æ€§åˆ—è¡¨çš„å†…å®¹ï¼Œç»å…¸ç±»æ²¡æœ‰è¯¥å†…ç½®è¯¥æ–¹æ³•</span></span><br><span class="line">[&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">__main__</span>.<span class="title">D</span>&#x27;&gt;, &lt;<span class="title">class</span> &#x27;<span class="title">__main__</span>.<span class="title">B</span>&#x27;&gt;, &lt;<span class="title">class</span> &#x27;<span class="title">__main__</span>.<span class="title">C</span>&#x27;&gt;, &lt;<span class="title">class</span> &#x27;<span class="title">__main__</span>.<span class="title">A</span>&#x27;&gt;, &lt;<span class="title">class</span> &#x27;<span class="title">object</span>&#x27;&gt;]</span></span><br></pre></td></tr></table></figure>

<p>pythonä¼šåœ¨MROåˆ—è¡¨ä¸Šä»å·¦åˆ°å³å¼€å§‹æŸ¥æ‰¾åŸºç±»,ç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…è¿™ä¸ªå±æ€§çš„ç±»ä¸ºæ­¢ã€‚ è€Œè¿™ä¸ªMROåˆ—è¡¨çš„æ„é€ æ˜¯é€šè¿‡ä¸€ä¸ªC3çº¿æ€§åŒ–ç®—æ³•æ¥å®ç°çš„ã€‚æˆ‘ä»¬ä¸å»æ·±ç©¶è¿™ä¸ªç®—æ³•çš„æ•°å­¦åŸç†,å®ƒå®é™…ä¸Šå°±æ˜¯åˆå¹¶æ‰€æœ‰çˆ¶ç±»çš„MROåˆ—è¡¨å¹¶éµå¾ªå¦‚ä¸‹ä¸‰æ¡å‡†åˆ™:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>å­ç±»ä¼šå…ˆäºçˆ¶ç±»è¢«æ£€æŸ¥</span><br><span class="line"><span class="number">2.</span>å¤šä¸ªçˆ¶ç±»ä¼šæ ¹æ®å®ƒä»¬åœ¨åˆ—è¡¨ä¸­çš„é¡ºåºè¢«æ£€æŸ¥</span><br><span class="line"><span class="number">3.</span>å¦‚æœå¯¹ä¸‹ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªåˆæ³•çš„é€‰æ‹©,é€‰æ‹©ç¬¬ä¸€ä¸ªçˆ¶ç±»</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥obj.test()çš„æŸ¥æ‰¾é¡ºåºæ˜¯ï¼Œå…ˆä»å¯¹è±¡objæœ¬èº«çš„å±æ€§é‡Œæ‰¾æ–¹æ³•testï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™å‚ç…§å±æ€§æŸ¥æ‰¾çš„å‘èµ·è€…(å³obj)æ‰€å¤„ç±»Dçš„MROåˆ—è¡¨æ¥ä¾æ¬¡æ£€ç´¢ï¼Œé¦–å…ˆåœ¨ç±»Dä¸­æœªæ‰¾åˆ°ï¼Œç„¶åå†Bä¸­æ‰¾åˆ°æ–¹æ³•test</p>
<p>psï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>ç”±å¯¹è±¡å‘èµ·çš„å±æ€§æŸ¥æ‰¾ï¼Œä¼šä»å¯¹è±¡è‡ªèº«çš„å±æ€§é‡Œæ£€ç´¢ï¼Œæ²¡æœ‰åˆ™ä¼šæŒ‰ç…§å¯¹è±¡çš„ç±».mro()è§„å®šçš„é¡ºåºä¾æ¬¡æ‰¾ä¸‹å»ï¼Œ</span><br><span class="line"><span class="number">2.</span>ç”±ç±»å‘èµ·çš„å±æ€§æŸ¥æ‰¾ï¼Œä¼šæŒ‰ç…§å½“å‰ç±».mro()è§„å®šçš„é¡ºåºä¾æ¬¡æ‰¾ä¸‹å»ï¼Œ</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-e75f3e5658ec15a3d5e964d32dce7d19_720w.jpg" alt="img"></p>
<h3 id="4-3-æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ"><a href="#4-3-æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ" class="headerlink" title="4.3 æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ"></a>4.3 æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ</h3><p>å‚ç…§ä¸‹è¿°ä»£ç ï¼Œå¤šç»§æ‰¿ç»“æ„ä¸ºéè±å½¢ç»“æ„ï¼Œæ­¤æ—¶ï¼Œä¼šæŒ‰ç…§å…ˆæ‰¾Bè¿™ä¸€æ¡åˆ†æ”¯ï¼Œç„¶åå†æ‰¾Cè¿™ä¸€æ¡åˆ†æ”¯ï¼Œæœ€åæ‰¾Dè¿™ä¸€æ¡åˆ†æ”¯çš„é¡ºåºç›´åˆ°æ‰¾åˆ°æˆ‘ä»¬æƒ³è¦çš„å±æ€§</p>
<p><img src="https://pic4.zhimg.com/80/v2-64faa1a6e825277233fe2bf40401b99b_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">E</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from E&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">F</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from F&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>(<span class="params">E</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from B&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>(<span class="params">F</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from C&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from D&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>(<span class="params">B, C, D</span>):</span></span><br><span class="line">    <span class="comment"># def test(self):</span></span><br><span class="line">    <span class="comment">#     print(&#x27;from A&#x27;)</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(A.mro())</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[&lt;class &#x27;__main__.A&#x27;&gt;, &lt;class &#x27;__main__.B&#x27;&gt;, &lt;class &#x27;__main__.E&#x27;&gt;, &lt;class &#x27;__main__.C&#x27;&gt;, &lt;class &#x27;__main__.F&#x27;&gt;, &lt;class &#x27;__main__.D&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">obj = A()</span><br><span class="line">obj.test() <span class="comment"># ç»“æœä¸ºï¼šfrom B</span></span><br><span class="line"><span class="comment"># å¯ä¾æ¬¡æ³¨é‡Šä¸Šè¿°ç±»ä¸­çš„æ–¹æ³•testæ¥è¿›è¡ŒéªŒè¯</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœç»§æ‰¿å…³ç³»ä¸ºè±å½¢ç»“æ„ï¼Œé‚£ä¹ˆç»å…¸ç±»ä¸æ–°å¼ç±»ä¼šæœ‰ä¸åŒMROï¼Œåˆ†åˆ«å¯¹åº”å±æ€§çš„ä¸¤ç§æŸ¥æ‰¾æ–¹å¼ï¼šæ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆ</p>
<p><img src="https://pic4.zhimg.com/80/v2-e95d9f13b01af6eb7da3b5043442f697_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>:</span> <span class="comment"># åœ¨python2ä¸­ï¼Œæœªç»§æ‰¿objectçš„ç±»åŠå…¶å­ç±»ï¼Œéƒ½æ˜¯ç»å…¸ç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from G&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">E</span>(<span class="params">G</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from E&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">F</span>(<span class="params">G</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from F&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>(<span class="params">E</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from B&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>(<span class="params">F</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from C&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span>(<span class="params">G</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from D&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>(<span class="params">B,C,D</span>):</span></span><br><span class="line">    <span class="comment"># def test(self):</span></span><br><span class="line">    <span class="comment">#     print(&#x27;from A&#x27;)</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">obj = A()</span><br><span class="line">obj.test() <span class="comment"># å¦‚ä¸Šå›¾ï¼ŒæŸ¥æ‰¾é¡ºåºä¸º:obj-&gt;A-&gt;B-&gt;E-&gt;G-&gt;C-&gt;F-&gt;D-&gt;object</span></span><br><span class="line"><span class="comment"># å¯ä¾æ¬¡æ³¨é‡Šä¸Šè¿°ç±»ä¸­çš„æ–¹æ³•testæ¥è¿›è¡ŒéªŒè¯,æ³¨æ„è¯·åœ¨python2.xä¸­è¿›è¡Œæµ‹è¯•</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-08eb8fd2226110ae845da74805cb98fb_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">G</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from G&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">E</span>(<span class="params">G</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from E&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">F</span>(<span class="params">G</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from F&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>(<span class="params">E</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from B&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>(<span class="params">F</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from C&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span>(<span class="params">G</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;from D&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>(<span class="params">B,C,D</span>):</span></span><br><span class="line">    <span class="comment"># def test(self):</span></span><br><span class="line">    <span class="comment">#     print(&#x27;from A&#x27;)</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">obj = A()</span><br><span class="line">obj.test() <span class="comment"># å¦‚ä¸Šå›¾ï¼ŒæŸ¥æ‰¾é¡ºåºä¸º:obj-&gt;A-&gt;B-&gt;E-&gt;C-&gt;F-&gt;D-&gt;G-&gt;object</span></span><br><span class="line"><span class="comment"># å¯ä¾æ¬¡æ³¨é‡Šä¸Šè¿°ç±»ä¸­çš„æ–¹æ³•testæ¥è¿›è¡ŒéªŒè¯</span></span><br></pre></td></tr></table></figure>

<h3 id="4-4-Pyton-Mixinsæœºåˆ¶"><a href="#4-4-Pyton-Mixinsæœºåˆ¶" class="headerlink" title="4.4 Pyton Mixinsæœºåˆ¶"></a>4.4 Pyton Mixinsæœºåˆ¶</h3><p> ä¸€ä¸ªå­ç±»å¯ä»¥åŒæ—¶ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ï¼Œè¿™æ ·çš„è®¾è®¡å¸¸è¢«äººè¯Ÿç—…ï¼Œä¸€æ¥å®ƒæœ‰å¯èƒ½å¯¼è‡´å¯æ¶çš„è±å½¢é—®é¢˜ï¼ŒäºŒæ¥åœ¨äººçš„ä¸–ç•Œè§‚é‡Œç»§æ‰¿åº”è¯¥æ˜¯ä¸ªâ€is-aâ€å…³ç³»ã€‚ æ¯”å¦‚è½¿è½¦ç±»ä¹‹æ‰€ä»¥å¯ä»¥ç»§æ‰¿äº¤é€šå·¥å…·ç±»ï¼Œæ˜¯å› ä¸ºåŸºäºäººçš„ä¸–ç•Œè§‚ï¼Œæˆ‘ä»¬å¯ä»¥è¯´ï¼šè½¿è½¦æ˜¯ä¸€ä¸ª(â€œis-aâ€)äº¤é€šå·¥å…·ï¼Œè€Œåœ¨äººçš„ä¸–ç•Œè§‚é‡Œï¼Œä¸€ä¸ªç‰©å“ä¸å¯èƒ½æ˜¯å¤šç§ä¸åŒçš„ä¸œè¥¿ï¼Œå› æ­¤å¤šé‡ç»§æ‰¿åœ¨äººçš„ä¸–ç•Œè§‚é‡Œæ˜¯è¯´ä¸é€šçš„ï¼Œå®ƒä»…ä»…åªæ˜¯ä»£ç å±‚é¢çš„é€»è¾‘ã€‚ä¸è¿‡æœ‰æ²¡æœ‰è¿™ç§æƒ…å†µï¼Œä¸€ä¸ªç±»çš„ç¡®æ˜¯éœ€è¦ç»§æ‰¿å¤šä¸ªç±»å‘¢ï¼Ÿ</p>
<p> ç­”æ¡ˆæ˜¯æœ‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ‹¿äº¤é€šå·¥å…·æ¥ä¸¾ä¾‹å­:</p>
<p> æ°‘èˆªé£æœºã€ç›´å‡é£æœºã€è½¿è½¦éƒ½æ˜¯ä¸€ä¸ªï¼ˆis-aï¼‰äº¤é€šå·¥å…·ï¼Œå‰ä¸¤è€…éƒ½æœ‰ä¸€ä¸ªåŠŸèƒ½æ˜¯é£è¡Œflyï¼Œä½†æ˜¯è½¿è½¦æ²¡æœ‰ï¼Œæ‰€ä»¥å¦‚ä¸‹æ‰€ç¤ºæˆ‘ä»¬æŠŠé£è¡ŒåŠŸèƒ½æ”¾åˆ°äº¤é€šå·¥å…·è¿™ä¸ªçˆ¶ç±»ä¸­æ˜¯ä¸åˆç†çš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span>:</span>  <span class="comment"># äº¤é€šå·¥å…·</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        é£è¡ŒåŠŸèƒ½ç›¸åº”çš„ä»£ç         </span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I am flying&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CivilAircraft</span>(<span class="params">Vehicle</span>):</span>  <span class="comment"># æ°‘èˆªé£æœº</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Helicopter</span>(<span class="params">Vehicle</span>):</span>  <span class="comment"># ç›´å‡é£æœº</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span>(<span class="params">Vehicle</span>):</span>  <span class="comment"># æ±½è½¦å¹¶ä¸ä¼šé£ï¼Œä½†æŒ‰ç…§ä¸Šè¿°ç»§æ‰¿å…³ç³»ï¼Œæ±½è½¦ä¹Ÿèƒ½é£äº†</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p> ä½†æ˜¯å¦‚æœæ°‘èˆªé£æœºå’Œç›´å‡æœºéƒ½å„è‡ªå†™è‡ªå·±çš„é£è¡Œflyæ–¹æ³•ï¼Œåˆè¿èƒŒäº†ä»£ç å°½å¯èƒ½é‡ç”¨çš„åŸåˆ™ï¼ˆå¦‚æœä»¥åé£è¡Œå·¥å…·è¶Šæ¥è¶Šå¤šï¼Œé‚£ä¼šé‡å¤ä»£ç å°†ä¼šè¶Šæ¥è¶Šå¤šï¼‰ã€‚</p>
<p> æ€ä¹ˆåŠï¼Ÿï¼Ÿï¼Ÿä¸ºäº†å°½å¯èƒ½åœ°é‡ç”¨ä»£ç ï¼Œé‚£å°±åªå¥½åœ¨å®šä¹‰å‡ºä¸€ä¸ªé£è¡Œå™¨çš„ç±»ï¼Œç„¶åè®©æ°‘èˆªé£æœºå’Œç›´å‡é£æœºåŒæ—¶ç»§æ‰¿äº¤é€šå·¥å…·ä»¥åŠé£è¡Œå™¨ä¸¤ä¸ªçˆ¶ç±»ï¼Œè¿™æ ·å°±å‡ºç°äº†å¤šé‡ç»§æ‰¿ã€‚è¿™æ—¶åˆè¿èƒŒäº†ç»§æ‰¿å¿…é¡»æ˜¯â€is-aâ€å…³ç³»ã€‚è¿™ä¸ªéš¾é¢˜è¯¥æ€ä¹ˆè§£å†³ï¼Ÿ</p>
<p> ä¸åŒçš„è¯­è¨€ç»™å‡ºäº†ä¸åŒçš„æ–¹æ³•ï¼Œè®©æˆ‘ä»¬å…ˆæ¥äº†è§£Javaçš„å¤„ç†æ–¹æ³•ã€‚Javaæä¾›äº†æ¥å£interfaceåŠŸèƒ½ï¼Œæ¥å®ç°å¤šé‡ç»§æ‰¿ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŠ½è±¡åŸºç±»ï¼šäº¤é€šå·¥å…·ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥å£ï¼šé£è¡Œå™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Flyable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç±»ï¼šå®ç°äº†é£è¡Œå™¨æ¥å£çš„ç±»ï¼Œåœ¨è¯¥ç±»ä¸­å®ç°å…·ä½“çš„flyæ–¹æ³•ï¼Œè¿™æ ·ä¸‹é¢æ°‘èˆªé£æœºä¸ç›´å‡é£æœºåœ¨å®ç°flyæ—¶ç›´æ¥é‡ç”¨å³å¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FlyableImpl</span> <span class="keyword">implements</span> <span class="title">Flyable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;I am flying&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ°‘èˆªé£æœºï¼Œç»§æ‰¿è‡ªäº¤é€šå·¥å…·ç±»ï¼Œå¹¶å®ç°äº†é£è¡Œå™¨æ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CivilAircraft</span> <span class="keyword">extends</span> <span class="title">Vehicle</span> <span class="keyword">implements</span> <span class="title">Flyable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Flyable flyable;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CivilAircraft</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        flyable = <span class="keyword">new</span> FlyableImpl();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        flyable.fly();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›´å‡é£æœºï¼Œç»§æ‰¿è‡ªäº¤é€šå·¥å…·ç±»ï¼Œå¹¶å®ç°äº†é£è¡Œå™¨æ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Helicopter</span> <span class="keyword">extends</span> <span class="title">Vehicle</span> <span class="keyword">implements</span> <span class="title">Flyable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Flyable flyable;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Helicopter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        flyable = <span class="keyword">new</span> FlyableImpl();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        flyable.fly();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ±½è½¦ï¼Œç»§æ‰¿è‡ªäº¤é€šå·¥å…·ç±»ï¼Œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> <span class="keyword">extends</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘ä»¬çš„é£æœºåŒæ—¶å…·æœ‰äº†äº¤é€šå·¥å…·åŠé£è¡Œå™¨ä¸¤ç§å±æ€§ï¼Œè€Œä¸”æˆ‘ä»¬ä¸éœ€è¦é‡å†™é£è¡Œå™¨ä¸­çš„é£è¡Œæ–¹æ³•ï¼ŒåŒæ—¶æˆ‘ä»¬æ²¡æœ‰ç ´åå•ä¸€ç»§æ‰¿çš„åŸåˆ™ã€‚é£æœºå°±æ˜¯ä¸€ç§äº¤é€šå·¥å…·ï¼Œå¯é£è¡Œçš„èƒ½åŠ›æ˜¯é£æœºçš„å±æ€§ï¼Œé€šè¿‡ç»§æ‰¿æ¥å£æ¥è·å–ã€‚</p>
<p>å›åˆ°ä¸»é¢˜ï¼ŒPythonè¯­è¨€å¯æ²¡æœ‰æ¥å£åŠŸèƒ½ï¼Œä½†Pythonæä¾›äº†Mixinsæœºåˆ¶ï¼Œç®€å•æ¥è¯´Mixinsæœºåˆ¶æŒ‡çš„æ˜¯å­ç±»æ··åˆ(mixin)ä¸åŒç±»çš„åŠŸèƒ½ï¼Œè€Œè¿™äº›ç±»é‡‡ç”¨ç»Ÿä¸€çš„å‘½åè§„èŒƒï¼ˆä¾‹å¦‚Mixinåç¼€ï¼‰ï¼Œä»¥æ­¤æ ‡è¯†è¿™äº›ç±»åªæ˜¯ç”¨æ¥æ··åˆåŠŸèƒ½çš„ï¼Œå¹¶ä¸æ˜¯ç”¨æ¥æ ‡è¯†å­ç±»çš„ä»å±â€is-aâ€å…³ç³»çš„ï¼Œæ‰€ä»¥Mixinsæœºåˆ¶æœ¬è´¨ä»æ˜¯å¤šç»§æ‰¿ï¼Œä½†åŒæ ·éµå®ˆâ€is-aâ€å…³ç³»ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span>:</span>  <span class="comment"># äº¤é€šå·¥å…·</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlyableMixin</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fly</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        é£è¡ŒåŠŸèƒ½ç›¸åº”çš„ä»£ç         </span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;I am flying&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CivilAircraft</span>(<span class="params">FlyableMixin, Vehicle</span>):</span>  <span class="comment"># æ°‘èˆªé£æœº</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Helicopter</span>(<span class="params">FlyableMixin, Vehicle</span>):</span>  <span class="comment"># ç›´å‡é£æœº</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span>(<span class="params">Vehicle</span>):</span>  <span class="comment"># æ±½è½¦</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ps: é‡‡ç”¨æŸç§è§„èŒƒï¼ˆå¦‚å‘½åè§„èŒƒï¼‰æ¥è§£å†³å…·ä½“çš„é—®é¢˜æ˜¯pythonæƒ¯ç”¨çš„å¥—è·¯</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢çš„CivilAircraftã€Helicopterç±»å®ç°äº†å¤šç»§æ‰¿ï¼Œä¸è¿‡å®ƒç»§æ‰¿çš„ç¬¬ä¸€ä¸ªç±»æˆ‘ä»¬èµ·åä¸ºFlyableMixinï¼Œè€Œä¸æ˜¯Flyableï¼Œè¿™ä¸ªå¹¶ä¸å½±å“åŠŸèƒ½ï¼Œä½†æ˜¯ä¼šå‘Šè¯‰åæ¥è¯»ä»£ç çš„äººï¼Œè¿™ä¸ªç±»æ˜¯ä¸€ä¸ªMixinç±»ï¼Œè¡¨ç¤ºæ··å…¥(mix-in)ï¼Œè¿™ç§å‘½åæ–¹å¼å°±æ˜¯ç”¨æ¥æ˜ç¡®åœ°å‘Šè¯‰åˆ«äººï¼ˆpythonè¯­è¨€æƒ¯ç”¨çš„æ‰‹æ³•ï¼‰ï¼Œè¿™ä¸ªç±»æ˜¯ä½œä¸ºåŠŸèƒ½æ·»åŠ åˆ°å­ç±»ä¸­ï¼Œè€Œä¸æ˜¯ä½œä¸ºçˆ¶ç±»ï¼Œå®ƒçš„ä½œç”¨åŒJavaä¸­çš„æ¥å£ã€‚æ‰€ä»¥ä»å«ä¹‰ä¸Šç†è§£ï¼ŒCivilAircraftã€Helicopterç±»éƒ½åªæ˜¯ä¸€ä¸ªVehicleï¼Œè€Œä¸æ˜¯ä¸€ä¸ªé£è¡Œå™¨ã€‚</p>
<p>ä½¿ç”¨Mixinç±»å®ç°å¤šé‡ç»§æ‰¿è¦éå¸¸å°å¿ƒ</p>
<ul>
<li>é¦–å…ˆå®ƒå¿…é¡»è¡¨ç¤ºæŸä¸€ç§åŠŸèƒ½ï¼Œè€Œä¸æ˜¯æŸä¸ªç‰©å“ï¼Œpython å¯¹äºmixinç±»çš„å‘½åæ–¹å¼ä¸€èˆ¬ä»¥ Mixin, able, ible ä¸ºåç¼€</li>
<li>å…¶æ¬¡å®ƒå¿…é¡»è´£ä»»å•ä¸€ï¼Œå¦‚æœæœ‰å¤šä¸ªåŠŸèƒ½ï¼Œé‚£å°±å†™å¤šä¸ªMixinç±»ï¼Œä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿å¤šä¸ªMixinï¼Œä¸ºäº†ä¿è¯éµå¾ªç»§æ‰¿çš„â€œis-aâ€åŸåˆ™ï¼Œåªèƒ½ç»§æ‰¿ä¸€ä¸ªæ ‡è¯†å…¶å½’å±å«ä¹‰çš„çˆ¶ç±»</li>
<li>ç„¶åï¼Œå®ƒä¸ä¾èµ–äºå­ç±»çš„å®ç°</li>
<li>æœ€åï¼Œå­ç±»å³ä¾¿æ²¡æœ‰ç»§æ‰¿è¿™ä¸ªMixinç±»ï¼Œä¹Ÿç…§æ ·å¯ä»¥å·¥ä½œï¼Œå°±æ˜¯ç¼ºå°‘äº†æŸä¸ªåŠŸèƒ½ã€‚ï¼ˆæ¯”å¦‚é£æœºç…§æ ·å¯ä»¥è½½å®¢ï¼Œå°±æ˜¯ä¸èƒ½é£äº†ï¼‰</li>
</ul>
<p> Mixinsæ˜¯ä»å¤šä¸ªç±»ä¸­é‡ç”¨ä»£ç çš„å¥½æ–¹æ³•ï¼Œä½†æ˜¯éœ€è¦ä»˜å‡ºç›¸åº”çš„ä»£ä»·ï¼Œæˆ‘ä»¬å®šä¹‰çš„Minxç±»è¶Šå¤šï¼Œå­ç±»çš„ä»£ç å¯è¯»æ€§å°±ä¼šè¶Šå·®ï¼Œå¹¶ä¸”æ›´æ¶å¿ƒçš„æ˜¯ï¼Œåœ¨ç»§æ‰¿çš„å±‚çº§å˜å¤šæ—¶ï¼Œä»£ç é˜…è¯»è€…åœ¨å®šä½æŸä¸€ä¸ªæ–¹æ³•åˆ°åº•åœ¨ä½•å¤„è°ƒç”¨æ—¶ä¼šæ™•å¤´è½¬å‘ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Displayer</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display</span>(<span class="params">self, message</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(message)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoggerMixin</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">log</span>(<span class="params">self, message, filename=<span class="string">&#x27;logfile.txt&#x27;</span></span>):</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> fh:</span><br><span class="line">            fh.write(message)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">display</span>(<span class="params">self, message</span>):</span></span><br><span class="line">        <span class="built_in">super</span>().display(message) <span class="comment"># superçš„ç”¨æ³•è¯·å‚è€ƒä¸‹ä¸€å°èŠ‚</span></span><br><span class="line">        self.log(message)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySubClass</span>(<span class="params">LoggerMixin, Displayer</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">log</span>(<span class="params">self, message</span>):</span></span><br><span class="line">        <span class="built_in">super</span>().log(message, filename=<span class="string">&#x27;subclasslog.txt&#x27;</span>) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = MySubClass()</span><br><span class="line">obj.display(<span class="string">&quot;This string will be shown and logged in subclasslog.txt&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å±æ€§æŸ¥æ‰¾çš„å‘èµ·è€…æ˜¯obj,æ‰€ä»¥ä¼šå‚ç…§ç±»MySubClassçš„MROæ¥æ£€ç´¢å±æ€§</span></span><br><span class="line"><span class="comment">#[&lt;class &#x27;__main__.MySubClass&#x27;&gt;, &lt;class &#x27;__main__.LoggerMixin&#x27;&gt;, &lt;class &#x27;__main__.Displayer&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1ã€é¦–å…ˆä¼šå»å¯¹è±¡objçš„ç±»MySubClassæ‰¾æ–¹æ³•displayï¼Œæ²¡æœ‰åˆ™å»ç±»LoggerMixinä¸­æ‰¾ï¼Œæ‰¾åˆ°å¼€å§‹æ‰§è¡Œä»£ç </span></span><br><span class="line"><span class="comment"># 2ã€æ‰§è¡ŒLoggerMixinçš„ç¬¬ä¸€è¡Œä»£ç ï¼šæ‰§è¡Œsuper().display(message)ï¼Œå‚ç…§MySubClass.mro(),superä¼šå»ä¸‹ä¸€ä¸ªç±»å³ç±»Displayerä¸­æ‰¾ï¼Œæ‰¾åˆ°displayï¼Œå¼€å§‹æ‰§è¡Œä»£ç ï¼Œæ‰“å°æ¶ˆæ¯&quot;This string will be shown and logged in subclasslog.txt&quot;</span></span><br><span class="line"><span class="comment"># 3ã€æ‰§è¡ŒLoggerMixinçš„ç¬¬äºŒè¡Œä»£ç ï¼šself.log(message)ï¼Œselfæ˜¯å¯¹è±¡objï¼Œå³obj.log(message)ï¼Œå±æ€§æŸ¥æ‰¾çš„å‘èµ·è€…ä¸ºobjï¼Œæ‰€ä»¥ä¼šæŒ‰ç…§å…¶ç±»MySubClass.mro(),å³MySubClass-&gt;LoggerMixin-&gt;Displayer-&gt;objectçš„é¡ºåºæŸ¥æ‰¾ï¼Œåœ¨MySubClassä¸­æ‰¾åˆ°æ–¹æ³•logï¼Œå¼€å§‹æ‰§è¡Œsuper().log(message, filename=&#x27;subclasslog.txt&#x27;)ï¼Œsuperä¼šæŒ‰ç…§MySubClass.mro()æŸ¥æ‰¾ä¸‹ä¸€ä¸ªç±»ï¼Œåœ¨ç±»LoggerMixinä¸­æ‰¾åˆ°logæ–¹æ³•å¼€å§‹æ‰§è¡Œï¼Œæœ€ç»ˆå°†æ—¥å¿—å†™å…¥æ–‡ä»¶subclasslog.txt</span></span><br></pre></td></tr></table></figure>

<p>psï¼šè¯¾å¤–äº†è§£å°çŸ¥è¯†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Javaåªå…è®¸æ¥å£çš„å¤šé‡ç»§æ‰¿ã€‚æ¥å£æœ¬è´¨ä¸Šæ˜¯æŠ½è±¡åŸºç±»ï¼Œå…·æœ‰æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œæ²¡æœ‰æ•°æ®æˆå‘˜ã€‚</span><br><span class="line">ä¸javaä¸€æ ·ï¼Œpythonä¹Ÿæœ‰æŠ½è±¡ç±»çš„æ¦‚å¿µä½†æ˜¯åŒæ ·éœ€è¦å€ŸåŠ©æ¨¡å—å®ç°ï¼ŒæŠ½è±¡ç±»æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»ï¼Œå®ƒçš„ç‰¹æ®Šä¹‹å¤„åœ¨äºåªèƒ½è¢«ç»§æ‰¿ï¼Œä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œç»§æ‰¿çš„å­ç±»å¿…é¡»å®ç°æŠ½è±¡åŸºç±»è§„å®šçš„æ–¹æ³•ï¼Œè¿™æ ·ä¾¿å¯ä¿è¯å§‹ç»ˆåªæœ‰ä¸€ä¸ªç‰¹å®šæ–¹æ³•æˆ–å±æ€§çš„å®ç°ï¼Œå¹¶ä¸”ä¸ä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œå› è€Œä¹Ÿå¯ä»¥èµ·åˆ°é¿å…è±å½¢é—®é¢˜çš„ä½œç”¨</span><br><span class="line"></span><br><span class="line">javaçš„interfaceï¼šhttps://www.cnblogs.com/linhaifeng/articles/<span class="number">7340153.</span>html<span class="comment">#_label6</span></span><br><span class="line">pythonçš„æŠ½è±¡åŸºç±»ï¼šhttps://www.cnblogs.com/linhaifeng/articles/<span class="number">7340153.</span>html<span class="comment">#_label7</span></span><br></pre></td></tr></table></figure>

<h2 id="äº”-æ´¾ç”Ÿä¸æ–¹æ³•é‡ç”¨"><a href="#äº”-æ´¾ç”Ÿä¸æ–¹æ³•é‡ç”¨" class="headerlink" title="äº” æ´¾ç”Ÿä¸æ–¹æ³•é‡ç”¨"></a>äº” æ´¾ç”Ÿä¸æ–¹æ³•é‡ç”¨</h2><p>å­ç±»å¯ä»¥æ´¾ç”Ÿå‡ºè‡ªå·±æ–°çš„å±æ€§ï¼Œåœ¨è¿›è¡Œå±æ€§æŸ¥æ‰¾æ—¶ï¼Œå­ç±»ä¸­çš„å±æ€§åä¼šä¼˜å…ˆäºçˆ¶ç±»è¢«æŸ¥æ‰¾ï¼Œä¾‹å¦‚æ¯ä¸ªè€å¸ˆè¿˜æœ‰èŒç§°è¿™ä¸€å±æ€§ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨Teacherç±»ä¸­å®šä¹‰è¯¥ç±»è‡ªå·±çš„__init__è¦†ç›–çˆ¶ç±»çš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">People</span>:</span></span><br><span class="line"><span class="meta">... </span>    school=<span class="string">&#x27;æ¸…åå¤§å­¦&#x27;</span></span><br><span class="line"><span class="meta">... </span>    </span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,sex,age</span>):</span></span><br><span class="line"><span class="meta">... </span>        self.name=name</span><br><span class="line"><span class="meta">... </span>        self.sex=sex</span><br><span class="line"><span class="meta">... </span>        self.age=age</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>(<span class="params">People</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,sex,age,title</span>):</span> <span class="comment"># æ´¾ç”Ÿ</span></span><br><span class="line"><span class="meta">... </span>        self.name=name</span><br><span class="line"><span class="meta">... </span>        self.sex=sex</span><br><span class="line"><span class="meta">... </span>        self.age=age</span><br><span class="line"><span class="meta">... </span>        self.title=title</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">teach</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;%s is teaching&#x27;</span> %self.name)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj=Teacher(<span class="string">&#x27;lili&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="number">28</span>,<span class="string">&#x27;é«˜çº§è®²å¸ˆ&#x27;</span>) <span class="comment">#åªä¼šæ‰¾è‡ªå·±ç±»ä¸­çš„__init__ï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj.name,obj.sex,obj.age,obj.title</span><br><span class="line">(<span class="string">&#x27;lili&#x27;</span>, <span class="string">&#x27;female&#x27;</span>, <span class="number">28</span>, <span class="string">&#x27;é«˜çº§è®²å¸ˆ&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>å¾ˆæ˜æ˜¾å­ç±»Teacherä¸­__init__å†…çš„å‰ä¸‰è¡Œåˆæ˜¯åœ¨å†™é‡å¤ä»£ç ï¼Œè‹¥æƒ³åœ¨å­ç±»æ´¾ç”Ÿå‡ºçš„æ–¹æ³•å†…é‡ç”¨çˆ¶ç±»çš„åŠŸèƒ½ï¼Œæœ‰ä¸¤ç§å®ç°æ–¹å¼</p>
<p>æ–¹æ³•ä¸€ï¼šâ€œæŒ‡åé“å§“â€åœ°è°ƒç”¨æŸä¸€ä¸ªç±»çš„å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>(<span class="params">People</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,sex,age,title</span>):</span></span><br><span class="line"><span class="meta">... </span>        People.__init__(self,name,age,sex) <span class="comment">#è°ƒç”¨çš„æ˜¯å‡½æ•°,å› è€Œéœ€è¦ä¼ å…¥self</span></span><br><span class="line"><span class="meta">... </span>        self.title=title</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">teach</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;%s is teaching&#x27;</span> %self.name)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-d21ae6052b43be565f551fc1fcabe5c3_720w.jpg" alt="img"></p>
<p>æ–¹æ³•äºŒï¼šsuper()</p>
<p>è°ƒç”¨super()ä¼šå¾—åˆ°ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸“é—¨ç”¨æ¥å¼•ç”¨çˆ¶ç±»çš„å±æ€§ï¼Œä¸”ä¸¥æ ¼æŒ‰ç…§MROè§„å®šçš„é¡ºåºå‘åæŸ¥æ‰¾</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>(<span class="params">People</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,sex,age,title</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">super</span>().__init__(name,age,sex) <span class="comment">#è°ƒç”¨çš„æ˜¯ç»‘å®šæ–¹æ³•ï¼Œè‡ªåŠ¨ä¼ å…¥self</span></span><br><span class="line"><span class="meta">... </span>        self.title=title</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">teach</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;%s is teaching&#x27;</span> %self.name)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>æç¤ºï¼šåœ¨Python2ä¸­superçš„ä½¿ç”¨éœ€è¦å®Œæ•´åœ°å†™æˆsuper(è‡ªå·±çš„ç±»å,self) ,è€Œåœ¨python3ä¸­å¯ä»¥ç®€å†™ä¸ºsuper()ã€‚</p>
<p><img src="https://pic3.zhimg.com/80/v2-908bf3b15e8a66ce55d1dc41155639ea_720w.jpg" alt="img"></p>
<p>è¿™ä¸¤ç§æ–¹å¼çš„åŒºåˆ«æ˜¯ï¼šæ–¹å¼ä¸€æ˜¯è·Ÿç»§æ‰¿æ²¡æœ‰å…³ç³»çš„ï¼Œè€Œæ–¹å¼äºŒçš„super()æ˜¯ä¾èµ–äºç»§æ‰¿çš„ï¼Œå¹¶ä¸”å³ä½¿æ²¡æœ‰ç›´æ¥ç»§æ‰¿å…³ç³»ï¼Œsuper()ä»ç„¶ä¼šæŒ‰ç…§MROç»§ç»­å¾€åæŸ¥æ‰¾</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment">#Aæ²¡æœ‰ç»§æ‰¿B</span></span><br><span class="line"><span class="meta">... </span><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">super</span>().test()</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;from B&#x27;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">C</span>(<span class="params">A,B</span>):</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">pass</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>C.mro() <span class="comment"># åœ¨ä»£ç å±‚é¢Aå¹¶ä¸æ˜¯Bçš„å­ç±»ï¼Œä½†ä»MROåˆ—è¡¨æ¥çœ‹ï¼Œå±æ€§æŸ¥æ‰¾æ—¶ï¼Œå°±æ˜¯æŒ‰ç…§é¡ºåºC-&gt;A-&gt;B-&gt;objectï¼ŒBå°±ç›¸å½“äºAçš„â€œçˆ¶ç±»â€</span></span><br><span class="line">[&lt;<span class="class"><span class="keyword">class</span> &#x27;<span class="title">__main__</span>.<span class="title">C</span>&#x27;&gt;, &lt;<span class="title">class</span> &#x27;<span class="title">__main__</span>.<span class="title">A</span>&#x27;&gt;, &lt;<span class="title">class</span> &#x27;<span class="title">__main__</span>.<span class="title">B</span>&#x27;&gt;,&lt;<span class="title">class</span> â€˜<span class="title">object</span>&#x27;&gt;]</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">obj</span>=<span class="title">C</span>()</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">obj</span>.<span class="title">test</span>() # å±æ€§æŸ¥æ‰¾çš„å‘èµ·è€…æ˜¯ç±»<span class="title">C</span>çš„å¯¹è±¡<span class="title">obj</span>ï¼Œæ‰€ä»¥ä¸­é€”å‘ç”Ÿçš„å±æ€§æŸ¥æ‰¾éƒ½æ˜¯å‚ç…§<span class="title">C</span>.<span class="title">mro</span>()</span></span><br><span class="line"><span class="class"><span class="title">from</span> <span class="title">B</span></span></span><br></pre></td></tr></table></figure>

<p>obj.test()é¦–å…ˆæ‰¾åˆ°Aä¸‹çš„testæ–¹æ³•ï¼Œæ‰§è¡Œsuper().test()ä¼šåŸºäºMROåˆ—è¡¨(ä»¥C.mro()ä¸ºå‡†)å½“å‰æ‰€å¤„çš„ä½ç½®ç»§ç»­å¾€åæŸ¥æ‰¾()ï¼Œç„¶ååœ¨Bä¸­æ‰¾åˆ°äº†testæ–¹æ³•å¹¶æ‰§è¡Œã€‚</p>
<p>å…³äºåœ¨å­ç±»ä¸­é‡ç”¨çˆ¶ç±»åŠŸèƒ½çš„è¿™ä¸¤ç§æ–¹å¼ï¼Œä½¿ç”¨ä»»ä½•ä¸€ç§éƒ½å¯ä»¥ï¼Œä½†æ˜¯åœ¨æœ€æ–°çš„ä»£ç ä¸­è¿˜æ˜¯æ¨èä½¿ç”¨super()</p>
<p><img src="https://pic1.zhimg.com/80/v2-ad4967402d87e33226ff03f96801f350_720w.jpg" alt="img"></p>
<h2 id="å…­-ç»„åˆ"><a href="#å…­-ç»„åˆ" class="headerlink" title="å…­ ç»„åˆ"></a>å…­ ç»„åˆ</h2><p>åœ¨ä¸€ä¸ªç±»ä¸­ä»¥å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡ä½œä¸ºæ•°æ®å±æ€§ï¼Œç§°ä¸ºç±»çš„ç»„åˆã€‚ç»„åˆä¸ç»§æ‰¿éƒ½æ˜¯ç”¨æ¥è§£å†³ä»£ç çš„é‡ç”¨æ€§é—®é¢˜ã€‚ä¸åŒçš„æ˜¯ï¼šç»§æ‰¿æ˜¯ä¸€ç§â€œæ˜¯â€çš„å…³ç³»ï¼Œæ¯”å¦‚è€å¸ˆæ˜¯äººã€å­¦ç”Ÿæ˜¯äººï¼Œå½“ç±»ä¹‹é—´æœ‰å¾ˆå¤šç›¸åŒçš„ä¹‹å¤„ï¼Œåº”è¯¥ä½¿ç”¨ç»§æ‰¿ï¼›è€Œç»„åˆåˆ™æ˜¯ä¸€ç§â€œæœ‰â€çš„å…³ç³»ï¼Œæ¯”å¦‚è€å¸ˆæœ‰ç”Ÿæ—¥ï¼Œè€å¸ˆæœ‰å¤šé—¨è¯¾ç¨‹ï¼Œå½“ç±»ä¹‹é—´æœ‰æ˜¾è‘—ä¸åŒï¼Œå¹¶ä¸”è¾ƒå°çš„ç±»æ˜¯è¾ƒå¤§çš„ç±»æ‰€éœ€è¦çš„ç»„ä»¶æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ç»„åˆï¼Œå¦‚ä¸‹ç¤ºä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Course</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,period,price</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.period=period</span><br><span class="line">        self.price=price</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tell_info</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;&lt;%s %s %s&gt;&#x27;</span> %(self.name,self.period,self.price))</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Date</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,year,mon,day</span>):</span></span><br><span class="line">        self.year=year</span><br><span class="line">        self.mon=mon</span><br><span class="line">        self.day=day</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tell_birth</span>(<span class="params">self</span>):</span></span><br><span class="line">       <span class="built_in">print</span>(<span class="string">&#x27;&lt;%s-%s-%s&gt;&#x27;</span> %(self.year,self.mon,self.day))</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span>:</span></span><br><span class="line">    school=<span class="string">&#x27;æ¸…åå¤§å­¦&#x27;</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,sex,age</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.sex=sex</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line"><span class="comment">#Teacherç±»åŸºäºç»§æ‰¿æ¥é‡ç”¨Peopleçš„ä»£ç ï¼ŒåŸºäºç»„åˆæ¥é‡ç”¨Dateç±»å’ŒCourseç±»çš„ä»£ç </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>(<span class="params">People</span>):</span> <span class="comment">#è€å¸ˆæ˜¯äºº</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,sex,age,title,year,mon,day</span>):</span></span><br><span class="line">        <span class="built_in">super</span>().__init__(name,age,sex)</span><br><span class="line">        self.birth=Date(year,mon,day) <span class="comment">#è€å¸ˆæœ‰ç”Ÿæ—¥</span></span><br><span class="line">        self.courses=[] <span class="comment">#è€å¸ˆæœ‰è¯¾ç¨‹ï¼Œå¯ä»¥åœ¨å®ä¾‹åŒ–åï¼Œå¾€è¯¥åˆ—è¡¨ä¸­æ·»åŠ Courseç±»çš„å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">teach</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is teaching&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">python=Course(<span class="string">&#x27;python&#x27;</span>,<span class="string">&#x27;3mons&#x27;</span>,<span class="number">3000.0</span>)</span><br><span class="line">linux=Course(<span class="string">&#x27;linux&#x27;</span>,<span class="string">&#x27;5mons&#x27;</span>,<span class="number">5000.0</span>)</span><br><span class="line">teacher1=Teacher(<span class="string">&#x27;lili&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="number">28</span>,<span class="string">&#x27;åšå£«ç”Ÿå¯¼å¸ˆ&#x27;</span>,<span class="number">1990</span>,<span class="number">3</span>,<span class="number">23</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># teacher1æœ‰ä¸¤é—¨è¯¾ç¨‹</span></span><br><span class="line">teacher1.courses.append(python)</span><br><span class="line">teacher1.courses.append(linux)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡ç”¨Dateç±»çš„åŠŸèƒ½</span></span><br><span class="line">teacher1.birth.tell_birth()</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡ç”¨Courseç±»çš„åŠŸèƒ½</span></span><br><span class="line"><span class="keyword">for</span> obj <span class="keyword">in</span> teacher1.courses: </span><br><span class="line">    obj.tell_info()</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶å¯¹è±¡teacher1é›†å¯¹è±¡ç‹¬æœ‰çš„å±æ€§ã€Teacherç±»ä¸­çš„å†…å®¹ã€Courseç±»ä¸­çš„å†…å®¹äºä¸€èº«ï¼ˆéƒ½å¯ä»¥è®¿é—®åˆ°ï¼‰ï¼Œæ˜¯ä¸€ä¸ªé«˜åº¦æ•´åˆçš„äº§ç‰©</p>
<p><img src="https://pic2.zhimg.com/80/v2-80420dc0b3ecd5676e7b9d9f02f41aad_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p>ç»§æ‰¿ä¸æ´¾ç”Ÿ</p>
<p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=100">https://www.bilibili.com/video/av73342471?p=100www.bilibili.com/video/av73342471?p=100</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>29-å…ƒç±»</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/29_%E5%85%83%E7%B1%BB/</url>
    <content><![CDATA[<h2 id="ä¸€-å…ƒç±»ä»‹ç»"><a href="#ä¸€-å…ƒç±»ä»‹ç»" class="headerlink" title="ä¸€ å…ƒç±»ä»‹ç»"></a>ä¸€ å…ƒç±»ä»‹ç»</h2><p><img src="https://pic1.zhimg.com/80/v2-29cebafe1389b48a2773171be4c65688_720w.jpg" alt="img"></p>
<p>ä»€ä¹ˆæ˜¯å…ƒç±»å‘¢ï¼Ÿä¸€åˆ‡æºè‡ªäºä¸€å¥è¯ï¼špythonä¸­ä¸€åˆ‡çš†ä¸ºå¯¹è±¡ã€‚è®©æˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªç±»ï¼Œç„¶åé€æ­¥åˆ†æ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StanfordTeacher</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    school=<span class="string">&#x27;Stanford&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,age</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s says welcome to the Stanford to learn Python&#x27;</span> %self.name)</span><br></pre></td></tr></table></figure>

<p>æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯å®ä¾‹åŒ–æˆ–è€…è¯´è°ƒç”¨ç±»è€Œå¾—åˆ°çš„ï¼ˆè°ƒç”¨ç±»çš„è¿‡ç¨‹ç§°ä¸ºç±»çš„å®ä¾‹åŒ–ï¼‰ï¼Œæ¯”å¦‚å¯¹è±¡t1æ˜¯è°ƒç”¨ç±»StanfordTeacherå¾—åˆ°çš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">t1=StanfordTeacher(<span class="string">&#x27;lili&#x27;</span>,<span class="number">18</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(t1)) <span class="comment">#æŸ¥çœ‹å¯¹è±¡t1çš„ç±»æ˜¯&lt;class &#x27;__main__.StanfordTeacher&#x27;&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸€åˆ‡çš†ä¸ºå¯¹è±¡ï¼Œé‚£ä¹ˆç±»StanfordTeacheræœ¬è´¨ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ—¢ç„¶æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯è°ƒç”¨ç±»å¾—åˆ°çš„ï¼Œé‚£ä¹ˆStanfordTeacherå¿…ç„¶ä¹Ÿæ˜¯è°ƒç”¨äº†ä¸€ä¸ªç±»å¾—åˆ°çš„ï¼Œè¿™ä¸ªç±»ç§°ä¸ºå…ƒç±»</p>
<p><strong>äºæ˜¯æˆ‘ä»¬å¯ä»¥æ¨å¯¼å‡º&#x3D;&#x3D;&#x3D;&gt;äº§ç”ŸStanfordTeacherçš„è¿‡ç¨‹ä¸€å®šå‘ç”Ÿäº†ï¼šStanfordTeacher&#x3D;å…ƒç±»(â€¦)</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(StanfordTeacher)) <span class="comment"># ç»“æœä¸º&lt;class &#x27;type&#x27;&gt;ï¼Œè¯æ˜æ˜¯è°ƒç”¨äº†typeè¿™ä¸ªå…ƒç±»è€Œäº§ç”Ÿçš„StanfordTeacherï¼Œå³é»˜è®¤çš„å…ƒç±»ä¸ºtype</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-0c3a9e7d4555f2ad236b5b2952ccfc0f_720w.jpg" alt="img"></p>
<p><img src="https://pic3.zhimg.com/80/v2-51512d73604c757d83751fb2a486cad6_720w.jpg" alt="img"></p>
<h2 id="äºŒ-classå…³é”®å­—åˆ›å»ºç±»çš„æµç¨‹åˆ†æ"><a href="#äºŒ-classå…³é”®å­—åˆ›å»ºç±»çš„æµç¨‹åˆ†æ" class="headerlink" title="äºŒ classå…³é”®å­—åˆ›å»ºç±»çš„æµç¨‹åˆ†æ"></a>äºŒ classå…³é”®å­—åˆ›å»ºç±»çš„æµç¨‹åˆ†æ</h2><p>ä¸Šæ–‡æˆ‘ä»¬åŸºäºpythonä¸­ä¸€åˆ‡çš†ä¸ºå¯¹è±¡çš„æ¦‚å¿µåˆ†æå‡ºï¼šæˆ‘ä»¬ç”¨classå…³é”®å­—å®šä¹‰çš„ç±»æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè´Ÿè´£äº§ç”Ÿè¯¥å¯¹è±¡çš„ç±»ç§°ä¹‹ä¸ºå…ƒç±»ï¼ˆå…ƒç±»å¯ä»¥ç®€ç§°ä¸ºç±»çš„ç±»ï¼‰ï¼Œå†…ç½®çš„å…ƒç±»ä¸ºtype</p>
<p>classå…³é”®å­—åœ¨å¸®æˆ‘ä»¬åˆ›å»ºç±»æ—¶ï¼Œå¿…ç„¶å¸®æˆ‘ä»¬è°ƒç”¨äº†å…ƒç±»StanfordTeacher&#x3D;type(â€¦)ï¼Œé‚£è°ƒç”¨typeæ—¶ä¼ å…¥çš„å‚æ•°æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¿…ç„¶æ˜¯ç±»çš„å…³é”®ç»„æˆéƒ¨åˆ†ï¼Œä¸€ä¸ªç±»æœ‰ä¸‰å¤§ç»„æˆéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯</p>
<p>1ã€ç±»åclass_name&#x3D;â€™StanfordTeacherâ€™</p>
<p>2ã€åŸºç±»ä»¬class_bases&#x3D;(object,)</p>
<p>3ã€ç±»çš„åç§°ç©ºé—´class_dicï¼Œç±»çš„åç§°ç©ºé—´æ˜¯æ‰§è¡Œç±»ä½“ä»£ç è€Œå¾—åˆ°çš„</p>
<p>è°ƒç”¨typeæ—¶ä¼šä¾æ¬¡ä¼ å…¥ä»¥ä¸Šä¸‰ä¸ªå‚æ•°</p>
<p>ç»¼ä¸Šï¼Œclasså…³é”®å­—å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»åº”è¯¥ç»†åˆ†ä¸ºä»¥ä¸‹å››ä¸ªè¿‡ç¨‹</p>
<p><img src="https://pic3.zhimg.com/80/v2-434226f9a3a7c464e73981972ab666a6_720w.jpg" alt="img"></p>
<p><img src="https://pic3.zhimg.com/80/v2-6b9d3aedf59408e10a7e6d17ce5f834a_720w.jpg" alt="img"></p>
<p>è¡¥å……ï¼šexecçš„ç”¨æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#execï¼šä¸‰ä¸ªå‚æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å‚æ•°ä¸€ï¼šåŒ…å«ä¸€ç³»åˆ—pythonä»£ç çš„å­—ç¬¦ä¸²</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å‚æ•°äºŒï¼šå…¨å±€ä½œç”¨åŸŸï¼ˆå­—å…¸å½¢å¼ï¼‰ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä¸ºglobals()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å‚æ•°ä¸‰ï¼šå±€éƒ¨ä½œç”¨åŸŸï¼ˆå­—å…¸å½¢å¼ï¼‰ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä¸ºlocals()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯ä»¥æŠŠexecå‘½ä»¤çš„æ‰§è¡Œå½“æˆæ˜¯ä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œï¼Œä¼šå°†æ‰§è¡ŒæœŸé—´äº§ç”Ÿçš„åå­—å­˜æ”¾äºå±€éƒ¨åç§°ç©ºé—´ä¸­</span></span><br><span class="line">g=&#123;</span><br><span class="line">    <span class="string">&#x27;x&#x27;</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;y&#x27;</span>:<span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">l=&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exec</span>(<span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">global x,z</span></span><br><span class="line"><span class="string">x=100</span></span><br><span class="line"><span class="string">z=200</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">m=300</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span>,g,l)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(g) <span class="comment">#&#123;&#x27;x&#x27;: 100, &#x27;y&#x27;: 2,&#x27;z&#x27;:200,......&#125;</span></span><br><span class="line"><span class="built_in">print</span>(l) <span class="comment">#&#123;&#x27;m&#x27;: 300&#125;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-1c83a64a4831811981dd5db4aafb3e6a_720w.jpg" alt="img"></p>
<h2 id="å››-è‡ªå®šä¹‰å…ƒç±»æ§åˆ¶ç±»StanfordTeacherçš„åˆ›å»º"><a href="#å››-è‡ªå®šä¹‰å…ƒç±»æ§åˆ¶ç±»StanfordTeacherçš„åˆ›å»º" class="headerlink" title="å›› è‡ªå®šä¹‰å…ƒç±»æ§åˆ¶ç±»StanfordTeacherçš„åˆ›å»º"></a>å›› è‡ªå®šä¹‰å…ƒç±»æ§åˆ¶ç±»StanfordTeacherçš„åˆ›å»º</h2><p>ä¸€ä¸ªç±»æ²¡æœ‰å£°æ˜è‡ªå·±çš„å…ƒç±»ï¼Œé»˜è®¤ä»–çš„å…ƒç±»å°±æ˜¯typeï¼Œé™¤äº†ä½¿ç”¨å†…ç½®å…ƒç±»typeï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç»§æ‰¿typeæ¥è‡ªå®šä¹‰å…ƒç±»ï¼Œç„¶åä½¿ç”¨metaclasså…³é”®å­—å‚æ•°ä¸ºä¸€ä¸ªç±»æŒ‡å®šå…ƒç±»</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mymeta</span>(<span class="params"><span class="built_in">type</span></span>):</span> <span class="comment">#åªæœ‰ç»§æ‰¿äº†typeç±»æ‰èƒ½ç§°ä¹‹ä¸ºä¸€ä¸ªå…ƒç±»ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„è‡ªå®šä¹‰ç±»</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># StanfordTeacher=Mymeta(&#x27;StanfordTeacher&#x27;,(object),&#123;...&#125;)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StanfordTeacher</span>(<span class="params"><span class="built_in">object</span>,metaclass=Mymeta</span>):</span> </span><br><span class="line">    school=<span class="string">&#x27;Stanford&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,age</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s says welcome to the Stanford to learn Python&#x27;</span> %self.name)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-8efe701a4c33c45178b9ecbf8de2c5de_720w.jpg" alt="img"></p>
<p>è‡ªå®šä¹‰å…ƒç±»å¯ä»¥æ§åˆ¶ç±»çš„äº§ç”Ÿè¿‡ç¨‹ï¼Œç±»çš„äº§ç”Ÿè¿‡ç¨‹å…¶å®å°±æ˜¯å…ƒç±»çš„è°ƒç”¨è¿‡ç¨‹,å³StanfordTeacher&#x3D;Mymeta(â€˜StanfordTeacherâ€™,(object),{â€¦})ï¼Œè°ƒç”¨Mymetaä¼šå…ˆäº§ç”Ÿä¸€ä¸ªç©ºå¯¹è±¡StanfordTeacherï¼Œç„¶åè¿åŒè°ƒç”¨Mymetaæ‹¬å·å†…çš„å‚æ•°ä¸€åŒä¼ ç»™Mymetaä¸‹çš„__init__æ–¹æ³•ï¼Œå®Œæˆåˆå§‹åŒ–ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mymeta</span>(<span class="params"><span class="built_in">type</span></span>):</span> <span class="comment">#åªæœ‰ç»§æ‰¿äº†typeç±»æ‰èƒ½ç§°ä¹‹ä¸ºä¸€ä¸ªå…ƒç±»ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„è‡ªå®šä¹‰ç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,class_name,class_bases,class_dic</span>):</span></span><br><span class="line">        <span class="comment"># print(self) #&lt;class &#x27;__main__.StanfordTeacher&#x27;&gt;</span></span><br><span class="line">        <span class="comment"># print(class_bases) #(&lt;class &#x27;object&#x27;&gt;,)</span></span><br><span class="line">        <span class="comment"># print(class_dic) #&#123;&#x27;__module__&#x27;: &#x27;__main__&#x27;, &#x27;__qualname__&#x27;: &#x27;StanfordTeacher&#x27;, &#x27;school&#x27;: &#x27;Stanford&#x27;, &#x27;__init__&#x27;: &lt;function StanfordTeacher.__init__ at 0x102b95ae8&gt;, &#x27;say&#x27;: &lt;function StanfordTeacher.say at 0x10621c6a8&gt;&#125;</span></span><br><span class="line">        <span class="built_in">super</span>(Mymeta, self).__init__(class_name, class_bases, class_dic)  <span class="comment"># é‡ç”¨çˆ¶ç±»çš„åŠŸèƒ½</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> class_name.islower():</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">&#x27;ç±»å%sè¯·ä¿®æ”¹ä¸ºé©¼å³°ä½“&#x27;</span> %class_name)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;__doc__&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> class_dic <span class="keyword">or</span> <span class="built_in">len</span>(class_dic[<span class="string">&#x27;__doc__&#x27;</span>].strip(<span class="string">&#x27; \n&#x27;</span>)) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">&#x27;ç±»ä¸­å¿…é¡»æœ‰æ–‡æ¡£æ³¨é‡Šï¼Œå¹¶ä¸”æ–‡æ¡£æ³¨é‡Šä¸èƒ½ä¸ºç©º&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># StanfordTeacher=Mymeta(&#x27;StanfordTeacher&#x27;,(object),&#123;...&#125;)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StanfordTeacher</span>(<span class="params"><span class="built_in">object</span>,metaclass=Mymeta</span>):</span> </span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ç±»StanfordTeacherçš„æ–‡æ¡£æ³¨é‡Š</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    school=<span class="string">&#x27;Stanford&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,age</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s says welcome to the Stanford to learn Python&#x27;</span> %self.name)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-cb7c3e73b09fc81f61bde2d076aeb605_720w.jpg" alt="img"></p>
<p><img src="https://pic1.zhimg.com/80/v2-ac1e4d27769d13173968120e88ae3954_720w.jpg" alt="img"></p>
<p><img src="https://pic1.zhimg.com/80/v2-583d76e816de5247564f2452a3050fc8_720w.jpg" alt="img"></p>
<h2 id="äº”-è‡ªå®šä¹‰å…ƒç±»æ§åˆ¶ç±»StanfordTeacherçš„è°ƒç”¨"><a href="#äº”-è‡ªå®šä¹‰å…ƒç±»æ§åˆ¶ç±»StanfordTeacherçš„è°ƒç”¨" class="headerlink" title="äº” è‡ªå®šä¹‰å…ƒç±»æ§åˆ¶ç±»StanfordTeacherçš„è°ƒç”¨"></a>äº” è‡ªå®šä¹‰å…ƒç±»æ§åˆ¶ç±»StanfordTeacherçš„è°ƒç”¨</h2><p>å‚¨å¤‡çŸ¥è¯†ï¼š<strong>call</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(self)</span><br><span class="line">        <span class="built_in">print</span>(args)</span><br><span class="line">        <span class="built_in">print</span>(kwargs)</span><br><span class="line"></span><br><span class="line">obj=Foo()</span><br><span class="line"><span class="comment">#1ã€è¦æƒ³è®©objè¿™ä¸ªå¯¹è±¡å˜æˆä¸€ä¸ªå¯è°ƒç”¨çš„å¯¹è±¡ï¼Œéœ€è¦åœ¨è¯¥å¯¹è±¡çš„ç±»ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•__call__æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨è°ƒç”¨å¯¹è±¡æ—¶è‡ªåŠ¨è§¦å‘</span></span><br><span class="line"><span class="comment">#2ã€è°ƒç”¨objçš„è¿”å›å€¼å°±æ˜¯__call__æ–¹æ³•çš„è¿”å›å€¼</span></span><br><span class="line">res=obj(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,x=<span class="number">1</span>,y=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-69fee84a115c801a72c489b2047a11ab_720w.jpg" alt="img"></p>
<p>ç”±ä¸Šä¾‹å¾—çŸ¥ï¼Œè°ƒç”¨ä¸€ä¸ªå¯¹è±¡ï¼Œå°±æ˜¯è§¦å‘å¯¹è±¡æ‰€åœ¨ç±»ä¸­çš„__call__æ–¹æ³•çš„æ‰§è¡Œï¼Œå¦‚æœæŠŠStanfordTeacherä¹Ÿå½“åšä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆåœ¨StanfordTeacherè¿™ä¸ªå¯¹è±¡çš„ç±»ä¸­ä¹Ÿå¿…ç„¶å­˜åœ¨ä¸€ä¸ª__call__æ–¹æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mymeta</span>(<span class="params"><span class="built_in">type</span></span>):</span> <span class="comment">#åªæœ‰ç»§æ‰¿äº†typeç±»æ‰èƒ½ç§°ä¹‹ä¸ºä¸€ä¸ªå…ƒç±»ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„è‡ªå®šä¹‰ç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(self) <span class="comment">#&lt;class &#x27;__main__.StanfordTeacher&#x27;&gt;</span></span><br><span class="line">        <span class="built_in">print</span>(args) <span class="comment">#(&#x27;lili&#x27;, 18)</span></span><br><span class="line">        <span class="built_in">print</span>(kwargs) <span class="comment">#&#123;&#125;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StanfordTeacher</span>(<span class="params"><span class="built_in">object</span>,metaclass=Mymeta</span>):</span></span><br><span class="line">    school=<span class="string">&#x27;Stanford&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,age</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s says welcome to the Stanford to learn Python&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒç”¨StanfordTeacherå°±æ˜¯åœ¨è°ƒç”¨StanfordTeacherç±»ä¸­çš„__call__æ–¹æ³•</span></span><br><span class="line"><span class="comment"># ç„¶åå°†StanfordTeacherä¼ ç»™self,æº¢å‡ºçš„ä½ç½®å‚æ•°ä¼ ç»™*ï¼Œæº¢å‡ºçš„å…³é”®å­—å‚æ•°ä¼ ç»™**</span></span><br><span class="line"><span class="comment"># è°ƒç”¨StanfordTeacherçš„è¿”å›å€¼å°±æ˜¯è°ƒç”¨__call__çš„è¿”å›å€¼</span></span><br><span class="line">t1=StanfordTeacher(<span class="string">&#x27;lili&#x27;</span>,<span class="number">18</span>)</span><br><span class="line"><span class="built_in">print</span>(t1) <span class="comment">#123</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-138ef01613092ea6cdfce93a4fca1133_720w.jpg" alt="img"></p>
<p>é»˜è®¤åœ°ï¼Œè°ƒç”¨t1&#x3D;StanfordTeacher(â€˜liliâ€™,18)ä¼šåšä¸‰ä»¶äº‹</p>
<p>1ã€äº§ç”Ÿä¸€ä¸ªç©ºå¯¹è±¡obj</p>
<p>2ã€è°ƒç”¨__init__æ–¹æ³•åˆå§‹åŒ–å¯¹è±¡obj</p>
<p>3ã€è¿”å›åˆå§‹åŒ–å¥½çš„obj</p>
<p>å¯¹åº”ç€ï¼ŒStanfordTeacherç±»ä¸­çš„__call__æ–¹æ³•ä¹Ÿåº”è¯¥åšè¿™ä¸‰ä»¶äº‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mymeta</span>(<span class="params"><span class="built_in">type</span></span>):</span> <span class="comment">#åªæœ‰ç»§æ‰¿äº†typeç±»æ‰èƒ½ç§°ä¹‹ä¸ºä¸€ä¸ªå…ƒç±»ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„è‡ªå®šä¹‰ç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span> <span class="comment">#self=&lt;class &#x27;__main__.StanfordTeacher&#x27;&gt;</span></span><br><span class="line">        <span class="comment">#1ã€è°ƒç”¨__new__äº§ç”Ÿä¸€ä¸ªç©ºå¯¹è±¡obj</span></span><br><span class="line">        obj=self.__new__(self) <span class="comment"># æ­¤å¤„çš„selfæ˜¯ç±»OldoyTeacherï¼Œå¿…é¡»ä¼ å‚ï¼Œä»£è¡¨åˆ›å»ºä¸€ä¸ªStanfordTeacherçš„å¯¹è±¡obj</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#2ã€è°ƒç”¨__init__åˆå§‹åŒ–ç©ºå¯¹è±¡obj</span></span><br><span class="line">        self.__init__(obj,*args,**kwargs)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#3ã€è¿”å›åˆå§‹åŒ–å¥½çš„å¯¹è±¡obj</span></span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StanfordTeacher</span>(<span class="params"><span class="built_in">object</span>,metaclass=Mymeta</span>):</span></span><br><span class="line">    school=<span class="string">&#x27;Stanford&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,age</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s says welcome to the Stanford to learn Python&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line">t1=StanfordTeacher(<span class="string">&#x27;lili&#x27;</span>,<span class="number">18</span>)</span><br><span class="line"><span class="built_in">print</span>(t1.__dict__) <span class="comment">#&#123;&#x27;name&#x27;: &#x27;lili&#x27;, &#x27;age&#x27;: 18&#125;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-9869aa7ace53374e834e800453c2b911_720w.jpg" alt="img"></p>
<p>ä¸Šä¾‹çš„__call__ç›¸å½“äºä¸€ä¸ªæ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¯¥åŸºç¡€ä¸Šæ”¹å†™__call__çš„é€»è¾‘ä»è€Œæ§åˆ¶è°ƒç”¨StanfordTeacherçš„è¿‡ç¨‹ï¼Œæ¯”å¦‚å°†StanfordTeacherçš„å¯¹è±¡çš„æ‰€æœ‰å±æ€§éƒ½å˜æˆç§æœ‰çš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mymeta</span>(<span class="params"><span class="built_in">type</span></span>):</span> <span class="comment">#åªæœ‰ç»§æ‰¿äº†typeç±»æ‰èƒ½ç§°ä¹‹ä¸ºä¸€ä¸ªå…ƒç±»ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„è‡ªå®šä¹‰ç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span> <span class="comment">#self=&lt;class &#x27;__main__.StanfordTeacher&#x27;&gt;</span></span><br><span class="line">        <span class="comment">#1ã€è°ƒç”¨__new__äº§ç”Ÿä¸€ä¸ªç©ºå¯¹è±¡obj</span></span><br><span class="line">        obj=self.__new__(self) <span class="comment"># æ­¤å¤„çš„selfæ˜¯ç±»StanfordTeacherï¼Œå¿…é¡»ä¼ å‚ï¼Œä»£è¡¨åˆ›å»ºä¸€ä¸ªStanfordTeacherçš„å¯¹è±¡obj</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#2ã€è°ƒç”¨__init__åˆå§‹åŒ–ç©ºå¯¹è±¡obj</span></span><br><span class="line">        self.__init__(obj,*args,**kwargs)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åœ¨åˆå§‹åŒ–ä¹‹åï¼Œobj.__dict__é‡Œå°±æœ‰å€¼äº†</span></span><br><span class="line">        obj.__dict__=&#123;<span class="string">&#x27;_%s__%s&#x27;</span> %(self.__name__,k):v <span class="keyword">for</span> k,v <span class="keyword">in</span> obj.__dict__.items()&#125;</span><br><span class="line">        <span class="comment">#3ã€è¿”å›åˆå§‹åŒ–å¥½çš„å¯¹è±¡obj</span></span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StanfordTeacher</span>(<span class="params"><span class="built_in">object</span>,metaclass=Mymeta</span>):</span></span><br><span class="line">    school=<span class="string">&#x27;Stanford&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,age</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s says welcome to the Stanford to learn Python&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line">t1=StanfordTeacher(<span class="string">&#x27;lili&#x27;</span>,<span class="number">18</span>)</span><br><span class="line"><span class="built_in">print</span>(t1.__dict__) <span class="comment">#&#123;&#x27;_StanfordTeacher__name&#x27;: &#x27;lili&#x27;, &#x27;_StanfordTeacher__age&#x27;: 18&#125;</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šä¾‹ä¸­æ¶‰åŠåˆ°æŸ¥æ‰¾å±æ€§çš„é—®é¢˜ï¼Œæ¯”å¦‚self.__new__ï¼Œè¯·çœ‹ä¸‹ä¸€å°èŠ‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-9869aa7ace53374e834e800453c2b911_720w.jpg" alt="img"></p>
<h2 id="äº”-å†çœ‹å±æ€§æŸ¥æ‰¾"><a href="#äº”-å†çœ‹å±æ€§æŸ¥æ‰¾" class="headerlink" title="äº” å†çœ‹å±æ€§æŸ¥æ‰¾"></a>äº” å†çœ‹å±æ€§æŸ¥æ‰¾</h2><p>ç»“åˆpythonç»§æ‰¿çš„å®ç°åŸç†+å…ƒç±»é‡æ–°çœ‹å±æ€§çš„æŸ¥æ‰¾åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿï¼Ÿï¼Ÿ</p>
<p><img src="https://pic4.zhimg.com/80/v2-771f5846e57b1e89944a7135f9f307a7_720w.jpg" alt="img"></p>
<p>åœ¨å­¦ä¹ å®Œå…ƒç±»åï¼Œå…¶å®æˆ‘ä»¬ç”¨classè‡ªå®šä¹‰çš„ç±»ä¹Ÿå…¨éƒ½æ˜¯å¯¹è±¡ï¼ˆåŒ…æ‹¬objectç±»æœ¬èº«ä¹Ÿæ˜¯å…ƒç±»typeçš„ ä¸€ä¸ªå®ä¾‹ï¼Œå¯ä»¥ç”¨type(object)æŸ¥çœ‹ï¼‰ï¼Œæˆ‘ä»¬å­¦ä¹ è¿‡ç»§æ‰¿çš„å®ç°åŸç†ï¼Œå¦‚æœæŠŠç±»å½“æˆå¯¹è±¡å»çœ‹ï¼Œå°†ä¸‹è¿°ç»§æ‰¿åº”è¯¥è¯´æˆæ˜¯ï¼šå¯¹è±¡StanfordTeacherç»§æ‰¿å¯¹è±¡Fooï¼Œå¯¹è±¡Fooç»§æ‰¿å¯¹è±¡Barï¼Œå¯¹è±¡Barç»§æ‰¿å¯¹è±¡object</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mymeta</span>(<span class="params"><span class="built_in">type</span></span>):</span> <span class="comment">#åªæœ‰ç»§æ‰¿äº†typeç±»æ‰èƒ½ç§°ä¹‹ä¸ºä¸€ä¸ªå…ƒç±»ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„è‡ªå®šä¹‰ç±»</span></span><br><span class="line">    n=<span class="number">444</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span> <span class="comment">#self=&lt;class &#x27;__main__.StanfordTeacher&#x27;&gt;</span></span><br><span class="line">        obj=self.__new__(self)</span><br><span class="line">        self.__init__(obj,*args,**kwargs)</span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    n=<span class="number">333</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>(<span class="params">Bar</span>):</span></span><br><span class="line">    n=<span class="number">222</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StanfordTeacher</span>(<span class="params">Foo,metaclass=Mymeta</span>):</span></span><br><span class="line">    n=<span class="number">111</span></span><br><span class="line"></span><br><span class="line">    school=<span class="string">&#x27;Stanford&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,age</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s says welcome to the Stanford to learn Python&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(StanfordTeacher.n) <span class="comment">#è‡ªä¸‹è€Œä¸Šä¾æ¬¡æ³¨é‡Šå„ä¸ªç±»ä¸­çš„n=xxxï¼Œç„¶åé‡æ–°è¿è¡Œç¨‹åºï¼Œå‘ç°nçš„æŸ¥æ‰¾é¡ºåºä¸ºStanfordTeacher-&gt;Foo-&gt;Bar-&gt;object-&gt;Mymeta-&gt;type</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-1c83a64a4831811981dd5db4aafb3e6a_720w.jpg" alt="img"></p>
<p>äºæ˜¯å±æ€§æŸ¥æ‰¾åº”è¯¥åˆ†æˆä¸¤å±‚ï¼Œä¸€å±‚æ˜¯å¯¹è±¡å±‚ï¼ˆåŸºäºc3ç®—æ³•çš„MROï¼‰çš„æŸ¥æ‰¾ï¼Œå¦å¤–ä¸€ä¸ªå±‚åˆ™æ˜¯ç±»å±‚ï¼ˆå³å…ƒç±»å±‚ï¼‰çš„æŸ¥æ‰¾</p>
<p><img src="https://pic4.zhimg.com/80/v2-ddf630cf4b846c88c1ab506ba573521b_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æŸ¥æ‰¾é¡ºåºï¼š</span></span><br><span class="line"><span class="comment">#1ã€å…ˆå¯¹è±¡å±‚ï¼šStanfordTeacher-&gt;Foo-&gt;Bar-&gt;object</span></span><br><span class="line"><span class="comment">#2ã€ç„¶åå…ƒç±»å±‚ï¼šMymeta-&gt;type</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-1f4193a21056eeed75d3e4f9bbba57b3_720w.jpg" alt="img"></p>
<p>ä¾æ®ä¸Šè¿°æ€»ç»“ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹å…ƒç±»Mymetaä¸­__call__é‡Œçš„self.__new__çš„æŸ¥æ‰¾</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mymeta</span>(<span class="params"><span class="built_in">type</span></span>):</span> </span><br><span class="line">    n=<span class="number">444</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span> <span class="comment">#self=&lt;class &#x27;__main__.StanfordTeacher&#x27;&gt;</span></span><br><span class="line">        obj=self.__new__(self)</span><br><span class="line">        <span class="built_in">print</span>(self.__new__ <span class="keyword">is</span> <span class="built_in">object</span>.__new__) <span class="comment">#True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bar</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    n=<span class="number">333</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># def __new__(cls, *args, **kwargs):</span></span><br><span class="line">    <span class="comment">#     print(&#x27;Bar.__new__&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>(<span class="params">Bar</span>):</span></span><br><span class="line">    n=<span class="number">222</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># def __new__(cls, *args, **kwargs):</span></span><br><span class="line">    <span class="comment">#     print(&#x27;Foo.__new__&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StanfordTeacher</span>(<span class="params">Foo,metaclass=Mymeta</span>):</span></span><br><span class="line">    n=<span class="number">111</span></span><br><span class="line"></span><br><span class="line">    school=<span class="string">&#x27;Stanford&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,age</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s says welcome to the Stanford to learn Python&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># def __new__(cls, *args, **kwargs):</span></span><br><span class="line">    <span class="comment">#     print(&#x27;StanfordTeacher.__new__&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">StanfordTeacher(<span class="string">&#x27;lili&#x27;</span>,<span class="number">18</span>) <span class="comment">#è§¦å‘StanfordTeacherçš„ç±»ä¸­çš„__call__æ–¹æ³•çš„æ‰§è¡Œï¼Œè¿›è€Œæ‰§è¡Œself.__new__å¼€å§‹æŸ¥æ‰¾</span></span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ï¼ŒMymetaä¸‹çš„__call__é‡Œçš„self.<strong>new__åœ¨StanfordTeacherã€Fooã€Baré‡Œéƒ½æ²¡æœ‰æ‰¾åˆ°__new__çš„æƒ…å†µä¸‹ï¼Œä¼šå»æ‰¾objecté‡Œçš„__new__ï¼Œè€Œobjectä¸‹é»˜è®¤å°±æœ‰ä¸€ä¸ª__new__ï¼Œæ‰€ä»¥å³ä¾¿æ˜¯ä¹‹å‰çš„ç±»å‡æœªå®ç°__new</strong>,ä¹Ÿä¸€å®šä¼šåœ¨objectä¸­æ‰¾åˆ°ä¸€ä¸ªï¼Œæ ¹æœ¬ä¸ä¼šã€ä¹Ÿæ ¹æœ¬æ²¡å¿…è¦å†å»æ‰¾å…ƒç±»Mymeta-&gt;typeä¸­æŸ¥æ‰¾__new__</p>
<p><img src="https://pic3.zhimg.com/80/v2-cdbf64639b7652fb9698c52e856ecbbe_720w.jpg" alt="img"></p>
<p><img src="https://pic2.zhimg.com/80/v2-0efee7de2aeae470f383336f50f4f2a1_720w.jpg" alt="img"></p>
<p>æˆ‘ä»¬åœ¨å…ƒç±»çš„__call__ä¸­ä¹Ÿå¯ä»¥ç”¨object.<strong>new</strong>(self)å»é€ å¯¹è±¡</p>
<p><img src="https://pic4.zhimg.com/80/v2-657eafd32c29b05e69777e671975d867_720w.jpg" alt="img"></p>
<p><strong>ä½†æˆ‘ä»¬è¿˜æ˜¯æ¨èåœ¨__call__ä¸­ä½¿ç”¨self.<strong>new</strong>(self)å»åˆ›é€ ç©ºå¯¹è±¡ï¼Œå› ä¸ºè¿™ç§æ–¹å¼ä¼šæ£€ç´¢ä¸‰ä¸ªç±»StanfordTeacher-&gt;Foo-&gt;Bar,è€Œobject.__new__åˆ™æ˜¯ç›´æ¥è·¨è¿‡äº†ä»–ä»¬ä¸‰ä¸ª</strong></p>
<p>æœ€åè¯´æ˜ä¸€ç‚¹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mymeta</span>(<span class="params"><span class="built_in">type</span></span>):</span> <span class="comment">#åªæœ‰ç»§æ‰¿äº†typeç±»æ‰èƒ½ç§°ä¹‹ä¸ºä¸€ä¸ªå…ƒç±»ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„è‡ªå®šä¹‰ç±»</span></span><br><span class="line">    n=<span class="number">444</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span>(<span class="params">cls, *args, **kwargs</span>):</span></span><br><span class="line">        obj=<span class="built_in">type</span>.__new__(cls,*args,**kwargs) <span class="comment"># å¿…é¡»æŒ‰ç…§è¿™ç§ä¼ å€¼æ–¹å¼</span></span><br><span class="line">        <span class="built_in">print</span>(obj.__dict__)</span><br><span class="line">        <span class="comment"># return obj # åªæœ‰åœ¨è¿”å›å€¼æ˜¯typeçš„å¯¹è±¡æ—¶ï¼Œæ‰ä¼šè§¦å‘ä¸‹é¢çš„__init__</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">123</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,class_name,class_bases,class_dic</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;runã€‚ã€‚ã€‚&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StanfordTeacher</span>(<span class="params"><span class="built_in">object</span>,metaclass=Mymeta</span>):</span> <span class="comment">#StanfordTeacher=Mymeta(&#x27;StanfordTeacher&#x27;,(object),&#123;...&#125;)</span></span><br><span class="line">    n=<span class="number">111</span></span><br><span class="line"></span><br><span class="line">    school=<span class="string">&#x27;Stanford&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,age</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s says welcome to the Stanford to learn Python&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(Mymeta)) <span class="comment">#&lt;class &#x27;type&#x27;&gt;</span></span><br><span class="line"><span class="comment"># äº§ç”Ÿç±»StanfordTeacherçš„è¿‡ç¨‹å°±æ˜¯åœ¨è°ƒç”¨Mymetaï¼Œè€ŒMymetaä¹Ÿæ˜¯typeç±»çš„ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆMymetaä¹‹æ‰€ä»¥å¯ä»¥è°ƒç”¨ï¼Œä¸€å®šæ˜¯åœ¨å…ƒç±»typeä¸­æœ‰ä¸€ä¸ª__call__æ–¹æ³•</span></span><br><span class="line"><span class="comment"># è¯¥æ–¹æ³•ä¸­åŒæ ·éœ€è¦åšè‡³å°‘ä¸‰ä»¶äº‹ï¼š</span></span><br><span class="line"><span class="comment"># class type:</span></span><br><span class="line"><span class="comment">#     def __call__(self, *args, **kwargs): #self=&lt;class &#x27;__main__.Mymeta&#x27;&gt;</span></span><br><span class="line"><span class="comment">#         obj=self.__new__(self,*args,**kwargs) # äº§ç”ŸMymetaçš„ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="comment">#         self.__init__(obj,*args,**kwargs) </span></span><br><span class="line"><span class="comment">#         return obj</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-f3490b306ed20138970d52fac3f665c0_720w.jpg" alt="img"></p>
<h2 id="å…­-ä½œä¸š"><a href="#å…­-ä½œä¸š" class="headerlink" title="å…­ ä½œä¸š"></a>å…­ ä½œä¸š</h2><p><img src="https://pic2.zhimg.com/80/v2-d550ffee42388e25d9edb134f3b958a1_720w.jpg" alt="img"></p>
<p><strong>1ã€åœ¨å…ƒç±»ä¸­æ§åˆ¶æŠŠè‡ªå®šä¹‰ç±»çš„æ•°æ®å±æ€§éƒ½å˜æˆå¤§å†™</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mymetaclass</span>(<span class="params"><span class="built_in">type</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span>(<span class="params">cls,name,bases,attrs</span>):</span></span><br><span class="line">        update_attrs=&#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> k,v <span class="keyword">in</span> attrs.items():</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">callable</span>(v) <span class="keyword">and</span> <span class="keyword">not</span> k.startswith(<span class="string">&#x27;__&#x27;</span>):</span><br><span class="line">                update_attrs[k.upper()]=v</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                update_attrs[k]=v</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">type</span>.__new__(cls,name,bases,update_attrs)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chinese</span>(<span class="params">metaclass=Mymetaclass</span>):</span></span><br><span class="line">    country=<span class="string">&#x27;China&#x27;</span></span><br><span class="line">    tag=<span class="string">&#x27;Legend of the Dragon&#x27;</span> <span class="comment">#é¾™çš„ä¼ äºº</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is walking&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Chinese.__dict__)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&#123;&#x27;__module__&#x27;: &#x27;__main__&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;COUNTRY&#x27;: &#x27;China&#x27;, </span></span><br><span class="line"><span class="string"> &#x27;TAG&#x27;: &#x27;Legend of the Dragon&#x27;,</span></span><br><span class="line"><span class="string"> &#x27;walk&#x27;: &lt;function Chinese.walk at 0x0000000001E7B950&gt;,</span></span><br><span class="line"><span class="string"> &#x27;__dict__&#x27;: &lt;attribute &#x27;__dict__&#x27; of &#x27;Chinese&#x27; objects&gt;,                                         </span></span><br><span class="line"><span class="string"> &#x27;__weakref__&#x27;: &lt;attribute &#x27;__weakref__&#x27; of &#x27;Chinese&#x27; objects&gt;,</span></span><br><span class="line"><span class="string"> &#x27;__doc__&#x27;: None&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>2ã€åœ¨å…ƒç±»ä¸­æ§åˆ¶è‡ªå®šä¹‰çš„ç±»æ— éœ€__init__æ–¹æ³•</strong></p>
<p> 1.å…ƒç±»å¸®å…¶å®Œæˆåˆ›å»ºå¯¹è±¡ï¼Œä»¥åŠåˆå§‹åŒ–æ“ä½œï¼›</p>
<p>2.è¦æ±‚å®ä¾‹åŒ–æ—¶ä¼ å‚å¿…é¡»ä¸ºå…³é”®å­—å½¢å¼ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸TypeError: must use keyword argument</p>
<p>3.keyä½œä¸ºç”¨æˆ·è‡ªå®šä¹‰ç±»äº§ç”Ÿå¯¹è±¡çš„å±æ€§ï¼Œä¸”æ‰€æœ‰å±æ€§å˜æˆå¤§å†™</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mymetaclass</span>(<span class="params"><span class="built_in">type</span></span>):</span></span><br><span class="line">    <span class="comment"># def __new__(cls,name,bases,attrs):</span></span><br><span class="line">    <span class="comment">#     update_attrs=&#123;&#125;</span></span><br><span class="line">    <span class="comment">#     for k,v in attrs.items():</span></span><br><span class="line">    <span class="comment">#         if not callable(v) and not k.startswith(&#x27;__&#x27;):</span></span><br><span class="line">    <span class="comment">#             update_attrs[k.upper()]=v</span></span><br><span class="line">    <span class="comment">#         else:</span></span><br><span class="line">    <span class="comment">#             update_attrs[k]=v</span></span><br><span class="line">    <span class="comment">#     return type.__new__(cls,name,bases,update_attrs)</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="keyword">if</span> args:</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">&#x27;must use keyword argument for key function&#x27;</span>)</span><br><span class="line">        obj = <span class="built_in">object</span>.__new__(self) <span class="comment">#åˆ›å»ºå¯¹è±¡ï¼Œselfä¸ºç±»Foo</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> k,v <span class="keyword">in</span> kwargs.items():</span><br><span class="line">            obj.__dict__[k.upper()]=v</span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chinese</span>(<span class="params">metaclass=Mymetaclass</span>):</span></span><br><span class="line">    country=<span class="string">&#x27;China&#x27;</span></span><br><span class="line">    tag=<span class="string">&#x27;Legend of the Dragon&#x27;</span> <span class="comment">#é¾™çš„ä¼ äºº</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is walking&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p=Chinese(name=<span class="string">&#x27;lili&#x27;</span>,age=<span class="number">18</span>,sex=<span class="string">&#x27;male&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(p.__dict__)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-63bab846a06315171b4c8ac24c4cf44c_720w.jpg" alt="img"></p>
<p><strong>3ã€åœ¨å…ƒç±»ä¸­æ§åˆ¶è‡ªå®šä¹‰çš„ç±»äº§ç”Ÿçš„å¯¹è±¡ç›¸å…³çš„å±æ€§å…¨éƒ¨ä¸ºéšè—å±æ€§</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mymeta</span>(<span class="params"><span class="built_in">type</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,class_name,class_bases,class_dic</span>):</span></span><br><span class="line">        <span class="comment">#æ§åˆ¶ç±»Fooçš„åˆ›å»º</span></span><br><span class="line">        <span class="built_in">super</span>(Mymeta,self).__init__(class_name,class_bases,class_dic)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span></span><br><span class="line">        <span class="comment">#æ§åˆ¶Fooçš„è°ƒç”¨è¿‡ç¨‹ï¼Œå³Fooå¯¹è±¡çš„äº§ç”Ÿè¿‡ç¨‹</span></span><br><span class="line">        obj = self.__new__(self)</span><br><span class="line">        self.__init__(obj, *args, **kwargs)</span><br><span class="line">        obj.__dict__=&#123;<span class="string">&#x27;_%s__%s&#x27;</span> %(self.__name__,k):v <span class="keyword">for</span> k,v <span class="keyword">in</span> obj.__dict__.items()&#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> obj</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>(<span class="params"><span class="built_in">object</span>,metaclass=Mymeta</span>):</span>  <span class="comment"># Foo=Mymeta(...)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, age,sex</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line">        self.sex=sex</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj=Foo(<span class="string">&#x27;lili&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;male&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(obj.__dict__)</span><br></pre></td></tr></table></figure>

<p><strong>4ã€åŸºäºå…ƒç±»å®ç°å•ä¾‹æ¨¡å¼</strong></p>
<p><img src="https://pic3.zhimg.com/80/v2-b80f116811d7948d519390f4021f160a_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ­¥éª¤äº”ï¼šåŸºäºå…ƒç±»å®ç°å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="comment"># å•ä¾‹ï¼šå³å•ä¸ªå®ä¾‹ï¼ŒæŒ‡çš„æ˜¯åŒä¸€ä¸ªç±»å®ä¾‹åŒ–å¤šæ¬¡çš„ç»“æœæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºèŠ‚çœå†…å­˜ç©ºé—´</span></span><br><span class="line"><span class="comment"># å¦‚æœæˆ‘ä»¬ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–é…ç½®æ¥è¿›è¡Œå®ä¾‹åŒ–ï¼Œåœ¨é…ç½®ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œå°±æ²¡å¿…è¦é‡å¤äº§ç”Ÿå¯¹è±¡æµªè´¹å†…å­˜äº†</span></span><br><span class="line"><span class="comment">#settings.pyæ–‡ä»¶å†…å®¹å¦‚ä¸‹</span></span><br><span class="line">HOST=<span class="string">&#x27;1.1.1.1&#x27;</span></span><br><span class="line">PORT=<span class="number">3306</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–¹å¼ä¸€:å®šä¹‰ä¸€ä¸ªç±»æ–¹æ³•å®ç°å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mysql</span>:</span></span><br><span class="line">    __instance=<span class="literal">None</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,host,port</span>):</span></span><br><span class="line">        self.host=host</span><br><span class="line">        self.port=port</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">singleton</span>(<span class="params">cls</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> cls.__instance:</span><br><span class="line">            cls.__instance=cls(settings.HOST,settings.PORT)</span><br><span class="line">        <span class="keyword">return</span> cls.__instance</span><br><span class="line"></span><br><span class="line">obj1=Mysql(<span class="string">&#x27;1.1.1.2&#x27;</span>,<span class="number">3306</span>)</span><br><span class="line">obj2=Mysql(<span class="string">&#x27;1.1.1.3&#x27;</span>,<span class="number">3307</span>)</span><br><span class="line"><span class="built_in">print</span>(obj1 <span class="keyword">is</span> obj2) <span class="comment">#False</span></span><br><span class="line"></span><br><span class="line">obj3=Mysql.singleton()</span><br><span class="line">obj4=Mysql.singleton()</span><br><span class="line"><span class="built_in">print</span>(obj3 <span class="keyword">is</span> obj4) <span class="comment">#True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–¹å¼äºŒï¼šå®šåˆ¶å…ƒç±»å®ç°å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mymeta</span>(<span class="params"><span class="built_in">type</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,bases,dic</span>):</span> <span class="comment">#å®šä¹‰ç±»Mysqlæ—¶å°±è§¦å‘</span></span><br><span class="line">        <span class="comment"># äº‹å…ˆå…ˆä»é…ç½®æ–‡ä»¶ä¸­å–é…ç½®æ¥é€ ä¸€ä¸ªMysqlçš„å®ä¾‹å‡ºæ¥</span></span><br><span class="line">        self.__instance = <span class="built_in">object</span>.__new__(self)  <span class="comment"># äº§ç”Ÿå¯¹è±¡</span></span><br><span class="line">        self.__init__(self.__instance, settings.HOST, settings.PORT)  <span class="comment"># åˆå§‹åŒ–å¯¹è±¡</span></span><br><span class="line">        <span class="comment"># ä¸Šè¿°ä¸¤æ­¥å¯ä»¥åˆæˆä¸‹é¢ä¸€æ­¥</span></span><br><span class="line">        <span class="comment"># self.__instance=super().__call__(*args,**kwargs)</span></span><br><span class="line">        <span class="built_in">super</span>().__init__(name,bases,dic)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span> <span class="comment">#Mysql(...)æ—¶è§¦å‘</span></span><br><span class="line">        <span class="keyword">if</span> args <span class="keyword">or</span> kwargs: <span class="comment"># argsæˆ–kwargså†…æœ‰å€¼</span></span><br><span class="line">            obj=<span class="built_in">object</span>.__new__(self)</span><br><span class="line">            self.__init__(obj,*args,**kwargs)</span><br><span class="line">            <span class="keyword">return</span> obj</span><br><span class="line">        <span class="keyword">return</span> self.__instance</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mysql</span>(<span class="params">metaclass=Mymeta</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,host,port</span>):</span></span><br><span class="line">        self.host=host</span><br><span class="line">        self.port=port</span><br><span class="line"></span><br><span class="line">obj1=Mysql() <span class="comment"># æ²¡æœ‰ä¼ å€¼åˆ™é»˜è®¤ä»é…ç½®æ–‡ä»¶ä¸­è¯»é…ç½®æ¥å®ä¾‹åŒ–ï¼Œæ‰€æœ‰çš„å®ä¾‹åº”è¯¥æŒ‡å‘ä¸€ä¸ªå†…å­˜åœ°å€</span></span><br><span class="line">obj2=Mysql()</span><br><span class="line">obj3=Mysql()</span><br><span class="line"><span class="built_in">print</span>(obj1 <span class="keyword">is</span> obj2 <span class="keyword">is</span> obj3)</span><br><span class="line">obj4=Mysql(<span class="string">&#x27;1.1.1.4&#x27;</span>,<span class="number">3307</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–¹å¼ä¸‰:å®šä¹‰ä¸€ä¸ªè£…é¥°å™¨å®ç°å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="keyword">import</span> settings</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">singleton</span>(<span class="params">cls</span>):</span> <span class="comment">#cls=Mysql</span></span><br><span class="line">    _instance=cls(settings.HOST,settings.PORT)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args,**kwargs</span>):</span></span><br><span class="line">        <span class="keyword">if</span> args <span class="keyword">or</span> kwargs:</span><br><span class="line">            obj=cls(*args,**kwargs)</span><br><span class="line">            <span class="keyword">return</span> obj</span><br><span class="line">        <span class="keyword">return</span> _instance</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@singleton </span><span class="comment"># Mysql=singleton(Mysql)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mysql</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,host,port</span>):</span></span><br><span class="line">        self.host=host</span><br><span class="line">        self.port=port</span><br><span class="line"></span><br><span class="line">obj1=Mysql()</span><br><span class="line">obj2=Mysql()</span><br><span class="line">obj3=Mysql()</span><br><span class="line"><span class="built_in">print</span>(obj1 <span class="keyword">is</span> obj2 <span class="keyword">is</span> obj3) <span class="comment">#True</span></span><br><span class="line"></span><br><span class="line">obj4=Mysql(<span class="string">&#x27;1.1.1.3&#x27;</span>,<span class="number">3307</span>)</span><br><span class="line">obj5=Mysql(<span class="string">&#x27;1.1.1.4&#x27;</span>,<span class="number">3308</span>)</span><br><span class="line"><span class="built_in">print</span>(obj3 <span class="keyword">is</span> obj4) <span class="comment">#False</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-9751369a2d4179f20d716d81f5cbbd19_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73346821?p=1">pythonå¿«é€Ÿå…¥é—¨è¡¥å……_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73346821?p=1
  </a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>26-å¤šæ€ä¸é¸­å­ç±»å‹</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/26_%E5%A4%9A%E6%80%81%E6%80%A7%E4%B8%8E%E9%B8%AD%E5%AD%90%E7%B1%BB%E5%9E%8B/</url>
    <content><![CDATA[<h2 id="å¤šæ€ä¸å¤šæ€æ€§"><a href="#å¤šæ€ä¸å¤šæ€æ€§" class="headerlink" title="å¤šæ€ä¸å¤šæ€æ€§"></a>å¤šæ€ä¸å¤šæ€æ€§</h2><p>å¤šæ€æŒ‡çš„æ˜¯ä¸€ç±»äº‹ç‰©æœ‰å¤šç§å½¢æ€ï¼Œæ¯”å¦‚åŠ¨ç‰©æœ‰å¤šç§å½¢æ€ï¼šçŒ«ã€ç‹—ã€çŒª</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>:</span> <span class="comment">#åŒä¸€ç±»äº‹ç‰©:åŠ¨ç‰©</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">talk</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>(<span class="params">Animal</span>):</span> <span class="comment">#åŠ¨ç‰©çš„å½¢æ€ä¹‹ä¸€:çŒ«</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">talk</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;å–µå–µå–µ&#x27;</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>(<span class="params">Animal</span>):</span> <span class="comment">#åŠ¨ç‰©çš„å½¢æ€ä¹‹äºŒ:ç‹—</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">talk</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;æ±ªæ±ªæ±ª&#x27;</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pig</span>(<span class="params">Animal</span>):</span> <span class="comment">#åŠ¨ç‰©çš„å½¢æ€ä¹‹ä¸‰:çŒª</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">talk</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;å“¼å“¼å“¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®ä¾‹åŒ–å¾—åˆ°ä¸‰ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cat=Cat()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dog=Dog()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pig=Pig()</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-422b662cd3ea9bc9566bccae2e2a6a5e_720w.jpg" alt="img"></p>
<p>å¤šæ€æ€§æŒ‡çš„æ˜¯å¯ä»¥åœ¨ä¸ç”¨è€ƒè™‘å¯¹è±¡å…·ä½“ç±»å‹çš„æƒ…å†µä¸‹è€Œç›´æ¥ä½¿ç”¨å¯¹è±¡ï¼Œè¿™å°±éœ€è¦åœ¨è®¾è®¡æ—¶ï¼ŒæŠŠå¯¹è±¡çš„ä½¿ç”¨æ–¹æ³•ç»Ÿä¸€æˆä¸€ç§ï¼šä¾‹å¦‚catã€dogã€pigéƒ½æ˜¯åŠ¨ç‰©,ä½†å‡¡æ˜¯åŠ¨ç‰©è‚¯å®šæœ‰talkæ–¹æ³•ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥ä¸ç”¨è€ƒè™‘å®ƒä»¬ä¸‰è€…çš„å…·ä½“æ˜¯ä»€ä¹ˆç±»å‹çš„åŠ¨ç‰©,è€Œç›´æ¥ä½¿ç”¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>cat.talk()</span><br><span class="line">å–µå–µå–µ</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dog.talk()</span><br><span class="line">æ±ªæ±ªæ±ª</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>pig.talk()</span><br><span class="line">å“¼å“¼å“¼</span><br></pre></td></tr></table></figure>

<p>æ›´è¿›ä¸€æ­¥,æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£æ¥ä½¿ç”¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">Talk</span>(<span class="params">animal</span>):</span></span><br><span class="line"><span class="meta">... </span>    animal.talk()</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Talk(cat)</span><br><span class="line">å–µå–µå–µ</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Talk(dog)</span><br><span class="line">æ±ªæ±ªæ±ª</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Talk(pig)</span><br><span class="line">å“¼å“¼å“¼</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-382e86f07927121108888dea757b1a9a_720w.jpg" alt="img"></p>
<p>Pythonä¸­ä¸€åˆ‡çš†å¯¹è±¡ï¼Œæœ¬èº«å°±æ”¯æŒå¤šæ€æ€§</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æˆ‘ä»¬å¯ä»¥åœ¨ä¸è€ƒè™‘ä¸‰è€…ç±»å‹çš„æƒ…å†µä¸‹ç›´æ¥ä½¿ç”¨ç»Ÿè®¡ä¸‰ä¸ªå¯¹è±¡çš„é•¿åº¦</span></span><br><span class="line">s.__len__()</span><br><span class="line">l.__len__()</span><br><span class="line">t.__len__()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Pythonå†…ç½®äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£</span></span><br><span class="line"><span class="built_in">len</span>(s)</span><br><span class="line"><span class="built_in">len</span>(l)</span><br><span class="line"><span class="built_in">len</span>(t)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-3d3cdbecfc5d47a2ac2f3143e1abd205_720w.jpg" alt="img"></p>
<p>å¤šæ€æ€§çš„å¥½å¤„åœ¨äºå¢å¼ºäº†ç¨‹åºçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæ¯”å¦‚é€šè¿‡ç»§æ‰¿Animalç±»åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç±»ï¼Œå®ä¾‹åŒ–å¾—åˆ°çš„å¯¹è±¡objï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ–¹å¼ä½¿ç”¨obj.talk()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">Wolf</span>(<span class="params">Animal</span>):</span> <span class="comment">#åŠ¨ç‰©çš„å¦å¤–ä¸€ç§å½¢æ€ï¼šç‹¼</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">talk</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;å—·...&#x27;</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>wolf=Wolf() <span class="comment"># å®ä¾‹å‡ºä¸€å¤´ç‹¼</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>wolf.talk() <span class="comment"># ä½¿ç”¨è€…æ ¹æœ¬æ— éœ€å…³å¿ƒwolfæ˜¯ä»€ä¹ˆç±»å‹è€Œè°ƒç”¨talk</span></span><br><span class="line">å—·...</span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-b091d792728d28043c60245f801b1d80_720w.jpg" alt="img"></p>
<p>ç»¼ä¸Šæˆ‘ä»¬å¾—çŸ¥ï¼Œå¤šæ€æ€§çš„æœ¬è´¨åœ¨äºä¸åŒçš„ç±»ä¸­å®šä¹‰æœ‰ç›¸åŒçš„æ–¹æ³•åï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸è€ƒè™‘ç±»è€Œç»Ÿä¸€ç”¨ä¸€ç§æ–¹å¼å»ä½¿ç”¨å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡åœ¨çˆ¶ç±»å¼•å…¥æŠ½è±¡ç±»çš„æ¦‚å¿µæ¥ç¡¬æ€§é™åˆ¶å­ç±»å¿…é¡»æœ‰æŸäº›æ–¹æ³•å</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> abc</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šmetaclasså±æ€§å°†ç±»è®¾ç½®ä¸ºæŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»æœ¬èº«åªæ˜¯ç”¨æ¥çº¦æŸå­ç±»çš„ï¼Œä¸èƒ½è¢«å®ä¾‹åŒ–</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>(<span class="params">metaclass=abc.ABCMeta</span>):</span></span><br><span class="line"><span class="meta">    @abc.abstractmethod </span><span class="comment"># è¯¥è£…é¥°å™¨é™åˆ¶å­ç±»å¿…é¡»å®šä¹‰æœ‰ä¸€ä¸ªåä¸ºtalkçš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">talk</span>(<span class="params">self</span>):</span> <span class="comment"># æŠ½è±¡æ–¹æ³•ä¸­æ— éœ€å®ç°å…·ä½“çš„åŠŸèƒ½</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>(<span class="params">Animal</span>):</span> <span class="comment"># ä½†å‡¡ç»§æ‰¿Animalçš„å­ç±»éƒ½å¿…é¡»éµå¾ªAnimalè§„å®šçš„æ ‡å‡†</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">talk</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">cat=Cat() <span class="comment"># è‹¥å­ç±»ä¸­æ²¡æœ‰ä¸€ä¸ªåä¸ºtalkçš„æ–¹æ³•åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸TypeErrorï¼Œæ— æ³•å®ä¾‹åŒ–</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-9835c439fe40447cec2e8c0417181828_720w.jpg" alt="img"></p>
<p>ä½†å…¶å®æˆ‘ä»¬å®Œå…¨å¯ä»¥ä¸ä¾èµ–äºç»§æ‰¿ï¼Œåªéœ€è¦åˆ¶é€ å‡ºå¤–è§‚å’Œè¡Œä¸ºç›¸åŒå¯¹è±¡ï¼ŒåŒæ ·å¯ä»¥å®ç°ä¸è€ƒè™‘å¯¹è±¡ç±»å‹è€Œä½¿ç”¨å¯¹è±¡ï¼Œè¿™æ­£æ˜¯Pythonå´‡å°šçš„â€œé¸­å­ç±»å‹â€ï¼ˆduck typingï¼‰ï¼šâ€œå¦‚æœçœ‹èµ·æ¥åƒã€å«å£°åƒè€Œä¸”èµ°èµ·è·¯æ¥åƒé¸­å­ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯é¸­å­â€ã€‚æ¯”èµ·ç»§æ‰¿çš„æ–¹å¼ï¼Œé¸­å­ç±»å‹åœ¨æŸç§ç¨‹åº¦ä¸Šå®ç°äº†ç¨‹åºçš„æ¾è€¦åˆåº¦ï¼Œå¦‚ä¸‹</p>
<p><img src="https://pic3.zhimg.com/80/v2-703589a4b0d56594a97612979289495e_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#äºŒè€…çœ‹èµ·æ¥éƒ½åƒæ–‡ä»¶,å› è€Œå°±å¯ä»¥å½“æ–‡ä»¶ä¸€æ ·å»ç”¨ï¼Œç„¶è€Œå®ƒä»¬å¹¶æ²¡æœ‰ç›´æ¥çš„å…³ç³»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Txt</span>:</span> <span class="comment">#Txtç±»æœ‰ä¸¤ä¸ªä¸æ–‡ä»¶ç±»å‹åŒåçš„æ–¹æ³•ï¼Œå³readå’Œwrite</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Disk</span>:</span> <span class="comment">#Diskç±»ä¹Ÿæœ‰ä¸¤ä¸ªä¸æ–‡ä»¶ç±»å‹åŒåçš„æ–¹æ³•ï¼šreadå’Œwrite</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">read</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">write</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-97aafbff736a6fa0f2cf945a4a47dca9_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=110">https://www.bilibili.com/video/av73342471?p=110www.bilibili.com/video/av73342471?p=110</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>26-ç»‘å®šæ–¹æ³•å’Œéç»‘å®šæ–¹æ³•</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/27_%E7%BB%91%E5%AE%9A%E6%96%B9%E6%B3%95%E4%B8%8E%E9%9D%9E%E7%BB%91%E5%AE%9A%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<h2 id="ä¸€-ç»‘å®šæ–¹æ³•ä¸éç»‘å®šæ–¹æ³•"><a href="#ä¸€-ç»‘å®šæ–¹æ³•ä¸éç»‘å®šæ–¹æ³•" class="headerlink" title="ä¸€ ç»‘å®šæ–¹æ³•ä¸éç»‘å®šæ–¹æ³•"></a>ä¸€ ç»‘å®šæ–¹æ³•ä¸éç»‘å®šæ–¹æ³•</h2><p> ç±»ä¸­å®šä¹‰çš„å‡½æ•°åˆ†ä¸ºä¸¤å¤§ç±»ï¼šç»‘å®šæ–¹æ³•å’Œéç»‘å®šæ–¹æ³•</p>
<p> å…¶ä¸­ç»‘å®šæ–¹æ³•åˆåˆ†ä¸ºç»‘å®šåˆ°å¯¹è±¡çš„å¯¹è±¡æ–¹æ³•å’Œç»‘å®šåˆ°ç±»çš„ç±»æ–¹æ³•ã€‚</p>
<p> åœ¨ç±»ä¸­æ­£å¸¸å®šä¹‰çš„å‡½æ•°é»˜è®¤æ˜¯ç»‘å®šåˆ°å¯¹è±¡çš„ï¼Œè€Œä¸ºæŸä¸ªå‡½æ•°åŠ ä¸Šè£…é¥°å™¨@classmethodåï¼Œè¯¥å‡½æ•°å°±ç»‘å®šåˆ°äº†ç±»ã€‚</p>
<p><img src="https://pic1.zhimg.com/80/v2-a60b7d2829a72bfcca8dd8d0c74fb028_720w.jpg" alt="img"></p>
<p> æˆ‘ä»¬åœ¨ä¹‹å‰çš„ç« èŠ‚ä¸­å·²ç»ä»‹ç»è¿‡å¯¹è±¡æ–¹æ³•äº†ï¼Œæœ¬èŠ‚æˆ‘ä»¬ä¸»è¦ä»‹ç»ç±»æ–¹æ³•ã€‚ç±»æ–¹æ³•é€šå¸¸ç”¨æ¥åœ¨__init__çš„åŸºç¡€ä¸Šæä¾›é¢å¤–çš„åˆå§‹åŒ–å®ä¾‹çš„æ–¹å¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é…ç½®æ–‡ä»¶settings.pyçš„å†…å®¹</span></span><br><span class="line">HOST=<span class="string">&#x27;127.0.0.1&#x27;</span></span><br><span class="line">PORT=<span class="number">3306</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç±»æ–¹æ³•çš„åº”ç”¨</span></span><br><span class="line"><span class="keyword">import</span> settings</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySQL</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,host,port</span>):</span></span><br><span class="line">        self.host=host</span><br><span class="line">        self.port=port</span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">from_conf</span>(<span class="params">cls</span>):</span> <span class="comment"># ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–é…ç½®è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">        <span class="keyword">return</span> cls(settings.HOST,settings.PORT)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>MySQL.from_conf <span class="comment"># ç»‘å®šåˆ°ç±»çš„æ–¹æ³•</span></span><br><span class="line">&lt;bound method MySQL.from_conf of &lt;<span class="class"><span class="keyword">class</span> â€˜<span class="title">__main__</span>.<span class="title">MySQL</span>&#x27;&gt;&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">conn</span>=<span class="title">MySQL</span>.<span class="title">from_conf</span>() # è°ƒç”¨ç±»æ–¹æ³•ï¼Œè‡ªåŠ¨å°†ç±»<span class="title">MySQL</span>å½“ä½œç¬¬ä¸€ä¸ªå‚æ•°ä¼ ç»™<span class="title">cls</span></span></span><br></pre></td></tr></table></figure>

<p>ç»‘å®šåˆ°ç±»çš„æ–¹æ³•å°±æ˜¯ä¸“é—¨ç»™ç±»ç”¨çš„ï¼Œä½†å…¶å®å¯¹è±¡ä¹Ÿå¯ä»¥è°ƒç”¨ï¼Œåªä¸è¿‡è‡ªåŠ¨ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ä»ç„¶æ˜¯ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ç§è°ƒç”¨æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå¹¶ä¸”å®¹æ˜“å¼•èµ·æ··æ·†ï¼Œè¿™ä¹Ÿæ˜¯Pythonçš„å¯¹è±¡ç³»ç»Ÿä¸å…¶ä»–é¢å‘å¯¹è±¡è¯­è¨€å¯¹è±¡ç³»ç»Ÿçš„åŒºåˆ«ä¹‹ä¸€ï¼Œæ¯”å¦‚Smalltalkå’ŒRubyä¸­ï¼Œç»‘å®šåˆ°ç±»çš„æ–¹æ³•ä¸ç»‘å®šåˆ°å¯¹è±¡çš„æ–¹æ³•æ˜¯ä¸¥æ ¼åŒºåˆ†å¼€çš„ã€‚</p>
<p><img src="https://pic1.zhimg.com/80/v2-ac3327054b536d6be35c9664c05cf4ac_720w.jpg" alt="img"></p>
<h2 id="äºŒ-éç»‘å®šæ–¹æ³•"><a href="#äºŒ-éç»‘å®šæ–¹æ³•" class="headerlink" title="äºŒ éç»‘å®šæ–¹æ³•"></a>äºŒ éç»‘å®šæ–¹æ³•</h2><p>ä¸ºç±»ä¸­æŸä¸ªå‡½æ•°åŠ ä¸Šè£…é¥°å™¨@staticmethodåï¼Œè¯¥å‡½æ•°å°±å˜æˆäº†éç»‘å®šæ–¹æ³•ï¼Œä¹Ÿç§°ä¸ºé™æ€æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¸ä¸ç±»æˆ–å¯¹è±¡ç»‘å®šï¼Œç±»ä¸å¯¹è±¡éƒ½å¯ä»¥æ¥è°ƒç”¨å®ƒï¼Œä½†å®ƒå°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°è€Œå·²ï¼Œå› è€Œæ²¡æœ‰è‡ªåŠ¨ä¼ å€¼é‚£ä¹ˆä¸€è¯´</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySQL</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,host,port</span>):</span></span><br><span class="line">        self.<span class="built_in">id</span>=self.create_id()</span><br><span class="line">        self.host=host</span><br><span class="line">        self.port=port</span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_id</span>():</span></span><br><span class="line">        <span class="keyword">return</span> uuid.uuid1()</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>conn=MySQL(â€˜<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">&#x27;,3306)</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; print(conn.id) #100365f6-8ae0-11e7-a51e-0088653ea1ec</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># ç±»æˆ–å¯¹è±¡æ¥è°ƒç”¨create_idå‘ç°éƒ½æ˜¯æ™®é€šå‡½æ•°ï¼Œè€Œéç»‘å®šåˆ°è°çš„æ–¹æ³•</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; MySQL.create_id</span></span><br><span class="line"><span class="string">&lt;function MySQL.create_id at 0x1025c16a8&gt;</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; conn.create_id</span></span><br><span class="line"><span class="string">&lt;function MySQL.create_id at 0x1025c16a8&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ç»‘å®šæ–¹æ³•ä¸éç»‘å®šæ–¹æ³•çš„ä½¿ç”¨ï¼šè‹¥ç±»ä¸­éœ€è¦ä¸€ä¸ªåŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½çš„å®ç°ä»£ç ä¸­éœ€è¦å¼•ç”¨å¯¹è±¡åˆ™å°†å…¶å®šä¹‰æˆå¯¹è±¡æ–¹æ³•ã€éœ€è¦å¼•ç”¨ç±»åˆ™å°†å…¶å®šä¹‰æˆç±»æ–¹æ³•ã€æ— éœ€å¼•ç”¨ç±»æˆ–å¯¹è±¡åˆ™å°†å…¶å®šä¹‰æˆé™æ€æ–¹æ³•ã€‚</p>
<p><img src="https://pic4.zhimg.com/80/v2-66b5c969960fb21cd5d0f69ea6364e1f_720w.jpg" alt="img"></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>34-å¹¶å‘ç¼–ç¨‹ï¼ˆä¸‰ï¼‰</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/34_python%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%A4%9A%E8%BF%9B%E7%A8%8B%EF%BC%88%E6%93%8D%E4%BD%9C%E7%AF%87%EF%BC%89/</url>
    <content><![CDATA[<h3 id="ä¸€-multiprocessingæ¨¡å—ä»‹ç»"><a href="#ä¸€-multiprocessingæ¨¡å—ä»‹ç»" class="headerlink" title="ä¸€ multiprocessingæ¨¡å—ä»‹ç»"></a>ä¸€ multiprocessingæ¨¡å—ä»‹ç»</h3><p>pythonä¸­çš„å¤šçº¿ç¨‹æ— æ³•åˆ©ç”¨å¤šæ ¸ä¼˜åŠ¿ï¼Œå¦‚æœæƒ³è¦å……åˆ†åœ°ä½¿ç”¨å¤šæ ¸CPUçš„èµ„æºï¼ˆos.cpu_count()æŸ¥çœ‹ï¼‰ï¼Œåœ¨pythonä¸­å¤§éƒ¨åˆ†æƒ…å†µéœ€è¦ä½¿ç”¨å¤šè¿›ç¨‹ã€‚Pythonæä¾›äº†multiprocessingã€‚ multiprocessingæ¨¡å—ç”¨æ¥å¼€å¯å­è¿›ç¨‹ï¼Œå¹¶åœ¨å­è¿›ç¨‹ä¸­æ‰§è¡Œæˆ‘ä»¬å®šåˆ¶çš„ä»»åŠ¡ï¼ˆæ¯”å¦‚å‡½æ•°ï¼‰ï¼Œè¯¥æ¨¡å—ä¸å¤šçº¿ç¨‹æ¨¡å—threadingçš„ç¼–ç¨‹æ¥å£ç±»ä¼¼ã€‚</p>
<p>multiprocessingæ¨¡å—çš„åŠŸèƒ½ä¼—å¤šï¼šæ”¯æŒå­è¿›ç¨‹ã€é€šä¿¡å’Œå…±äº«æ•°æ®ã€æ‰§è¡Œä¸åŒå½¢å¼çš„åŒæ­¥ï¼Œæä¾›äº†Processã€Queueã€Pipeã€Lockç­‰ç»„ä»¶ã€‚</p>
<p>éœ€è¦å†æ¬¡å¼ºè°ƒçš„ä¸€ç‚¹æ˜¯ï¼šä¸çº¿ç¨‹ä¸åŒï¼Œè¿›ç¨‹æ²¡æœ‰ä»»ä½•å…±äº«çŠ¶æ€ï¼Œè¿›ç¨‹ä¿®æ”¹çš„æ•°æ®ï¼Œæ”¹åŠ¨ä»…é™äºè¯¥è¿›ç¨‹å†…ã€‚</p>
<h3 id="äºŒ-Processç±»çš„ä»‹ç»"><a href="#äºŒ-Processç±»çš„ä»‹ç»" class="headerlink" title="äºŒ Processç±»çš„ä»‹ç»"></a>äºŒ Processç±»çš„ä»‹ç»</h3><p><strong>åˆ›å»ºè¿›ç¨‹çš„ç±»</strong>ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Process([group [, target [, name [, args [, kwargs]]]]])ï¼Œç”±è¯¥ç±»å®ä¾‹åŒ–å¾—åˆ°çš„å¯¹è±¡ï¼Œè¡¨ç¤ºä¸€ä¸ªå­è¿›ç¨‹ä¸­çš„ä»»åŠ¡ï¼ˆå°šæœªå¯åŠ¨ï¼‰</span><br><span class="line"></span><br><span class="line">å¼ºè°ƒï¼š</span><br><span class="line"><span class="number">1.</span> éœ€è¦ä½¿ç”¨å…³é”®å­—çš„æ–¹å¼æ¥æŒ‡å®šå‚æ•°</span><br><span class="line"><span class="number">2.</span> argsæŒ‡å®šçš„ä¸ºä¼ ç»™targetå‡½æ•°çš„ä½ç½®å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå…ƒç»„å½¢å¼ï¼Œå¿…é¡»æœ‰é€—å·</span><br></pre></td></tr></table></figure>

<p><strong>å‚æ•°ä»‹ç»ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> groupå‚æ•°æœªä½¿ç”¨ï¼Œå€¼å§‹ç»ˆä¸º<span class="literal">None</span></span><br><span class="line"><span class="number">2</span> </span><br><span class="line"><span class="number">3</span> targetè¡¨ç¤ºè°ƒç”¨å¯¹è±¡ï¼Œå³å­è¿›ç¨‹è¦æ‰§è¡Œçš„ä»»åŠ¡</span><br><span class="line"><span class="number">4</span> </span><br><span class="line"><span class="number">5</span> argsè¡¨ç¤ºè°ƒç”¨å¯¹è±¡çš„ä½ç½®å‚æ•°å…ƒç»„ï¼Œargs=(<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;egon&#x27;</span>,)</span><br><span class="line"><span class="number">6</span> </span><br><span class="line"><span class="number">7</span> kwargsè¡¨ç¤ºè°ƒç”¨å¯¹è±¡çš„å­—å…¸,kwargs=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>&#125;</span><br><span class="line"><span class="number">8</span> </span><br><span class="line"><span class="number">9</span> nameä¸ºå­è¿›ç¨‹çš„åç§°</span><br></pre></td></tr></table></figure>

<p><strong>æ–¹æ³•ä»‹ç»ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> p.start()ï¼šå¯åŠ¨è¿›ç¨‹ï¼Œå¹¶è°ƒç”¨è¯¥å­è¿›ç¨‹ä¸­çš„p.run() </span><br><span class="line"> <span class="number">2</span> p.run():è¿›ç¨‹å¯åŠ¨æ—¶è¿è¡Œçš„æ–¹æ³•ï¼Œæ­£æ˜¯å®ƒå»è°ƒç”¨targetæŒ‡å®šçš„å‡½æ•°ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰ç±»çš„ç±»ä¸­ä¸€å®šè¦å®ç°è¯¥æ–¹æ³•  </span><br><span class="line"> <span class="number">3</span> </span><br><span class="line"> <span class="number">4</span> p.terminate():å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹pï¼Œä¸ä¼šè¿›è¡Œä»»ä½•æ¸…ç†æ“ä½œï¼Œå¦‚æœpåˆ›å»ºäº†å­è¿›ç¨‹ï¼Œè¯¥å­è¿›ç¨‹å°±æˆäº†åƒµå°¸è¿›ç¨‹ï¼Œä½¿ç”¨è¯¥æ–¹æ³•éœ€è¦ç‰¹åˆ«å°å¿ƒè¿™ç§æƒ…å†µã€‚å¦‚æœpè¿˜ä¿å­˜äº†ä¸€ä¸ªé”é‚£ä¹ˆä¹Ÿå°†ä¸ä¼šè¢«é‡Šæ”¾ï¼Œè¿›è€Œå¯¼è‡´æ­»é”</span><br><span class="line"> <span class="number">5</span> p.is_alive():å¦‚æœpä»ç„¶è¿è¡Œï¼Œè¿”å›<span class="literal">True</span></span><br><span class="line"> <span class="number">6</span> </span><br><span class="line"> <span class="number">7</span> p.join([timeout]):ä¸»çº¿ç¨‹ç­‰å¾…pç»ˆæ­¢ï¼ˆå¼ºè°ƒï¼šæ˜¯ä¸»çº¿ç¨‹å¤„äºç­‰çš„çŠ¶æ€ï¼Œè€Œpæ˜¯å¤„äºè¿è¡Œçš„çŠ¶æ€ï¼‰ã€‚timeoutæ˜¯å¯é€‰çš„è¶…æ—¶æ—¶é—´ï¼Œéœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œp.joinåªèƒ½joinä½startå¼€å¯çš„è¿›ç¨‹ï¼Œè€Œä¸èƒ½joinä½runå¼€å¯çš„è¿›ç¨‹</span><br></pre></td></tr></table></figure>

<p><strong>å±æ€§ä»‹ç»ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> p.daemonï¼šé»˜è®¤å€¼ä¸º<span class="literal">False</span>ï¼Œå¦‚æœè®¾ä¸º<span class="literal">True</span>ï¼Œä»£è¡¨pä¸ºåå°è¿è¡Œçš„å®ˆæŠ¤è¿›ç¨‹ï¼Œå½“pçš„çˆ¶è¿›ç¨‹ç»ˆæ­¢æ—¶ï¼Œpä¹Ÿéšä¹‹ç»ˆæ­¢ï¼Œå¹¶ä¸”è®¾å®šä¸º<span class="literal">True</span>åï¼Œpä¸èƒ½åˆ›å»ºè‡ªå·±çš„æ–°è¿›ç¨‹ï¼Œå¿…é¡»åœ¨p.start()ä¹‹å‰è®¾ç½®</span><br><span class="line"><span class="number">2</span> </span><br><span class="line"><span class="number">3</span> p.name:è¿›ç¨‹çš„åç§°</span><br><span class="line"><span class="number">4</span> </span><br><span class="line"><span class="number">5</span> p.pidï¼šè¿›ç¨‹çš„pid</span><br><span class="line"><span class="number">6</span> </span><br><span class="line"><span class="number">7</span> p.exitcode:è¿›ç¨‹åœ¨è¿è¡Œæ—¶ä¸º<span class="literal">None</span>ã€å¦‚æœä¸ºâ€“Nï¼Œè¡¨ç¤ºè¢«ä¿¡å·Nç»“æŸ(äº†è§£å³å¯)</span><br><span class="line"><span class="number">8</span> </span><br><span class="line"><span class="number">9</span> p.authkey:è¿›ç¨‹çš„èº«ä»½éªŒè¯é”®,é»˜è®¤æ˜¯ç”±os.urandom()éšæœºç”Ÿæˆçš„<span class="number">32</span>å­—ç¬¦çš„å­—ç¬¦ä¸²ã€‚è¿™ä¸ªé”®çš„ç”¨é€”æ˜¯ä¸ºæ¶‰åŠç½‘ç»œè¿æ¥çš„åº•å±‚è¿›ç¨‹é—´é€šä¿¡æä¾›å®‰å…¨æ€§ï¼Œè¿™ç±»è¿æ¥åªæœ‰åœ¨å…·æœ‰ç›¸åŒçš„èº«ä»½éªŒè¯é”®æ—¶æ‰èƒ½æˆåŠŸï¼ˆäº†è§£å³å¯ï¼‰</span><br></pre></td></tr></table></figure>

<h3 id="ä¸‰-Processç±»çš„ä½¿ç”¨"><a href="#ä¸‰-Processç±»çš„ä½¿ç”¨" class="headerlink" title="ä¸‰ Processç±»çš„ä½¿ç”¨"></a>ä¸‰ Processç±»çš„ä½¿ç”¨</h3><p><strong>æ³¨æ„ï¼šåœ¨windowsä¸­Process()å¿…é¡»æ”¾åˆ°# if <strong>name</strong> &#x3D;&#x3D; â€˜<strong>main</strong>â€˜:ä¸‹</strong></p>
<p>è¯¦ç»†è§£é‡Š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Since Windows has no fork, the multiprocessing module starts a new Python process <span class="keyword">and</span> imports the calling module. </span><br><span class="line">If Process() gets called upon <span class="keyword">import</span>, then this sets off an infinite succession of new processes (<span class="keyword">or</span> until your machine runs out of resources). </span><br><span class="line">This <span class="keyword">is</span> the reason <span class="keyword">for</span> hiding calls to Process() inside</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span></span><br><span class="line">since statements inside this <span class="keyword">if</span>-statement will <span class="keyword">not</span> get called upon <span class="keyword">import</span>.</span><br><span class="line">ç”±äºWindowsæ²¡æœ‰forkï¼Œå¤šå¤„ç†æ¨¡å—å¯åŠ¨ä¸€ä¸ªæ–°çš„Pythonè¿›ç¨‹å¹¶å¯¼å…¥è°ƒç”¨æ¨¡å—ã€‚ </span><br><span class="line">å¦‚æœåœ¨å¯¼å…¥æ—¶è°ƒç”¨Processï¼ˆï¼‰ï¼Œé‚£ä¹ˆè¿™å°†å¯åŠ¨æ— é™ç»§æ‰¿çš„æ–°è¿›ç¨‹ï¼ˆæˆ–ç›´åˆ°æœºå™¨è€—å°½èµ„æºï¼‰ã€‚ </span><br><span class="line">è¿™æ˜¯éšè—å¯¹Processï¼ˆï¼‰å†…éƒ¨è°ƒç”¨çš„åŸï¼Œä½¿ç”¨<span class="keyword">if</span> __name__ == â€œ__main __â€ï¼Œè¿™ä¸ª<span class="keyword">if</span>è¯­å¥ä¸­çš„è¯­å¥å°†ä¸ä¼šåœ¨å¯¼å…¥æ—¶è¢«è°ƒç”¨ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>åˆ›å»ºå¹¶å¼€å¯å­è¿›ç¨‹çš„ä¸¤ç§æ–¹å¼</strong></p>
<p>æ–¹æ³•ä¸€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¼€è¿›ç¨‹çš„æ–¹æ³•ä¸€:</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">piao</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s piaoing&#x27;</span> %name)</span><br><span class="line">    time.sleep(random.randrange(<span class="number">1</span>,<span class="number">5</span>))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s piao end&#x27;</span> %name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p1=Process(target=piao,args=(<span class="string">&#x27;egon&#x27;</span>,)) <span class="comment">#å¿…é¡»åŠ ,å·</span></span><br><span class="line">p2=Process(target=piao,args=(<span class="string">&#x27;alex&#x27;</span>,))</span><br><span class="line">p3=Process(target=piao,args=(<span class="string">&#x27;wupeqi&#x27;</span>,))</span><br><span class="line">p4=Process(target=piao,args=(<span class="string">&#x27;yuanhao&#x27;</span>,))</span><br><span class="line"></span><br><span class="line">p1.start()</span><br><span class="line">p2.start()</span><br><span class="line">p3.start()</span><br><span class="line">p4.start()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ä¸»çº¿ç¨‹&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>æ–¹æ³•äºŒ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¼€è¿›ç¨‹çš„æ–¹æ³•äºŒ:</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Piao</span>(<span class="params">Process</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name</span>):</span></span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.name=name</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s piaoing&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line">        time.sleep(random.randrange(<span class="number">1</span>,<span class="number">5</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s piao end&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line">p1=Piao(<span class="string">&#x27;egon&#x27;</span>)</span><br><span class="line">p2=Piao(<span class="string">&#x27;alex&#x27;</span>)</span><br><span class="line">p3=Piao(<span class="string">&#x27;wupeiqi&#x27;</span>)</span><br><span class="line">p4=Piao(<span class="string">&#x27;yuanhao&#x27;</span>)</span><br><span class="line"></span><br><span class="line">p1.start() <span class="comment">#startä¼šè‡ªåŠ¨è°ƒç”¨run</span></span><br><span class="line">p2.start()</span><br><span class="line">p3.start()</span><br><span class="line">p4.start()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ä¸»çº¿ç¨‹&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>è¿›ç¨‹ç›´æ¥çš„å†…å­˜ç©ºé—´æ˜¯éš”ç¦»çš„</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line">n=<span class="number">100</span> <span class="comment">#åœ¨windowsç³»ç»Ÿä¸­åº”è¯¥æŠŠå…¨å±€å˜é‡å®šä¹‰åœ¨if __name__ == &#x27;__main__&#x27;ä¹‹ä¸Šå°±å¯ä»¥äº†</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span>():</span></span><br><span class="line">    <span class="keyword">global</span> n</span><br><span class="line">    n=<span class="number">0</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å­è¿›ç¨‹å†…: &#x27;</span>,n)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    p=Process(target=work)</span><br><span class="line">    p.start()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»è¿›ç¨‹å†…: &#x27;</span>,n)</span><br></pre></td></tr></table></figure>

<p>ç»ƒä¹ 1ï¼šæŠŠä¸Šå‘¨æ‰€å­¦çš„socketé€šä¿¡å˜æˆå¹¶å‘çš„å½¢å¼</p>
<p>serverç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"></span><br><span class="line">server=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">server.setsockopt(SOL_SOCKET,SO_REUSEADDR,<span class="number">1</span>)</span><br><span class="line">server.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line">server.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">talk</span>(<span class="params">conn,client_addr</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            msg=conn.recv(<span class="number">1024</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> msg:<span class="keyword">break</span></span><br><span class="line">            conn.send(msg.upper())</span><br><span class="line">        <span class="keyword">except</span> Exception:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>: <span class="comment">#windowsä¸‹startè¿›ç¨‹ä¸€å®šè¦å†™åˆ°è¿™ä¸‹é¢</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        conn,client_addr=server.accept()</span><br><span class="line">        p=Process(target=talk,args=(conn,client_addr))</span><br><span class="line">        p.start()</span><br></pre></td></tr></table></figure>

<p>å¤šä¸ªclientç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">client=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> msg:<span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    client.send(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    msg=client.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="built_in">print</span>(msg.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>è¿™ä¹ˆå®ç°æœ‰æ²¡æœ‰é—®é¢˜ï¼Ÿï¼Ÿï¼Ÿ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">æ¯æ¥ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œéƒ½åœ¨æœåŠ¡ç«¯å¼€å¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå¦‚æœå¹¶å‘æ¥ä¸€ä¸ªä¸‡ä¸ªå®¢æˆ·ç«¯ï¼Œè¦å¼€å¯ä¸€ä¸‡ä¸ªè¿›ç¨‹å—ï¼Œä½ è‡ªå·±å°è¯•ç€åœ¨ä½ è‡ªå·±çš„æœºå™¨ä¸Šå¼€å¯ä¸€ä¸‡ä¸ªï¼Œ<span class="number">10</span>ä¸‡ä¸ªè¿›ç¨‹è¯•ä¸€è¯•ã€‚</span><br><span class="line">è§£å†³æ–¹æ³•ï¼šè¿›ç¨‹æ± </span><br></pre></td></tr></table></figure>

<p><em><strong>*Processå¯¹è±¡çš„joinæ–¹æ³•*</strong></em></p>
<p>joinï¼šä¸»è¿›ç¨‹ç­‰ï¼Œç­‰å¾…å­è¿›ç¨‹ç»“æŸ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Piao</span>(<span class="params">Process</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is piaoing&#x27;</span> %self.name)</span><br><span class="line">        time.sleep(random.randrange(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is piao end&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p=Piao(<span class="string">&#x27;egon&#x27;</span>)</span><br><span class="line">p.start()</span><br><span class="line">p.join(<span class="number">0.0001</span>) <span class="comment">#ç­‰å¾…påœæ­¢,ç­‰0.0001ç§’å°±ä¸å†ç­‰äº†</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;å¼€å§‹&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>æœ‰äº†joinï¼Œç¨‹åºä¸å°±æ˜¯ä¸²è¡Œäº†å—ï¼Ÿï¼Ÿï¼Ÿ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">piao</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s is piaoing&#x27;</span> %name)</span><br><span class="line">    time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s is piao end&#x27;</span> %name)</span><br><span class="line"></span><br><span class="line">p1=Process(target=piao,args=(<span class="string">&#x27;egon&#x27;</span>,))</span><br><span class="line">p2=Process(target=piao,args=(<span class="string">&#x27;alex&#x27;</span>,))</span><br><span class="line">p3=Process(target=piao,args=(<span class="string">&#x27;yuanhao&#x27;</span>,))</span><br><span class="line">p4=Process(target=piao,args=(<span class="string">&#x27;wupeiqi&#x27;</span>,))</span><br><span class="line"></span><br><span class="line">p1.start()</span><br><span class="line">p2.start()</span><br><span class="line">p3.start()</span><br><span class="line">p4.start()</span><br><span class="line"></span><br><span class="line"><span class="comment">#æœ‰çš„åŒå­¦ä¼šæœ‰ç–‘é—®:æ—¢ç„¶joinæ˜¯ç­‰å¾…è¿›ç¨‹ç»“æŸ,é‚£ä¹ˆæˆ‘åƒä¸‹é¢è¿™æ ·å†™,è¿›ç¨‹ä¸å°±åˆå˜æˆä¸²è¡Œçš„äº†å—?</span></span><br><span class="line"><span class="comment">#å½“ç„¶ä¸æ˜¯äº†,å¿…é¡»æ˜ç¡®ï¼šp.join()æ˜¯è®©è°ç­‰ï¼Ÿ</span></span><br><span class="line"><span class="comment">#å¾ˆæ˜æ˜¾p.join()æ˜¯è®©ä¸»çº¿ç¨‹ç­‰å¾…pçš„ç»“æŸï¼Œå¡ä½çš„æ˜¯ä¸»çº¿ç¨‹è€Œç»éè¿›ç¨‹pï¼Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¯¦ç»†è§£æå¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment">#è¿›ç¨‹åªè¦startå°±ä¼šåœ¨å¼€å§‹è¿è¡Œäº†,æ‰€ä»¥p1-p4.start()æ—¶,ç³»ç»Ÿä¸­å·²ç»æœ‰å››ä¸ªå¹¶å‘çš„è¿›ç¨‹äº†</span></span><br><span class="line"><span class="comment">#è€Œæˆ‘ä»¬p1.join()æ˜¯åœ¨ç­‰p1ç»“æŸ,æ²¡é”™p1åªè¦ä¸ç»“æŸä¸»çº¿ç¨‹å°±ä¼šä¸€ç›´å¡åœ¨åŸåœ°,è¿™ä¹Ÿæ˜¯é—®é¢˜çš„å…³é”®</span></span><br><span class="line"><span class="comment">#joinæ˜¯è®©ä¸»çº¿ç¨‹ç­‰,è€Œp1-p4ä»ç„¶æ˜¯å¹¶å‘æ‰§è¡Œçš„,p1.joinçš„æ—¶å€™,å…¶ä½™p2,p3,p4ä»ç„¶åœ¨è¿è¡Œ,ç­‰#p1.joinç»“æŸ,å¯èƒ½p2,p3,p4æ—©å·²ç»ç»“æŸäº†,è¿™æ ·p2.join,p3.join.p4.joinç›´æ¥é€šè¿‡æ£€æµ‹ï¼Œæ— éœ€ç­‰å¾…</span></span><br><span class="line"><span class="comment"># æ‰€ä»¥4ä¸ªjoinèŠ±è´¹çš„æ€»æ—¶é—´ä»ç„¶æ˜¯è€—è´¹æ—¶é—´æœ€é•¿çš„é‚£ä¸ªè¿›ç¨‹è¿è¡Œçš„æ—¶é—´</span></span><br><span class="line">p1.join()</span><br><span class="line">p2.join()</span><br><span class="line">p3.join()</span><br><span class="line">p4.join()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ä¸»çº¿ç¨‹&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸Šè¿°å¯åŠ¨è¿›ç¨‹ä¸joinè¿›ç¨‹å¯ä»¥ç®€å†™ä¸º</span></span><br><span class="line"><span class="comment"># p_l=[p1,p2,p3,p4]</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># for p in p_l:</span></span><br><span class="line"><span class="comment">#     p.start()</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># for p in p_l:</span></span><br><span class="line"><span class="comment">#     p.join()</span></span><br></pre></td></tr></table></figure>

<p><strong>Processå¯¹è±¡çš„å…¶ä»–æ–¹æ³•æˆ–å±æ€§ï¼ˆäº†è§£ï¼‰</strong></p>
<p>terminateä¸is_alive</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è¿›ç¨‹å¯¹è±¡çš„å…¶ä»–æ–¹æ³•ä¸€:terminate,is_alive</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Piao</span>(<span class="params">Process</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is piaoing&#x27;</span> %self.name)</span><br><span class="line">        time.sleep(random.randrange(<span class="number">1</span>,<span class="number">5</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is piao end&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p1=Piao(<span class="string">&#x27;egon1&#x27;</span>)</span><br><span class="line">p1.start()</span><br><span class="line"></span><br><span class="line">p1.terminate()<span class="comment">#å…³é—­è¿›ç¨‹,ä¸ä¼šç«‹å³å…³é—­,æ‰€ä»¥is_aliveç«‹åˆ»æŸ¥çœ‹çš„ç»“æœå¯èƒ½è¿˜æ˜¯å­˜æ´»</span></span><br><span class="line"><span class="built_in">print</span>(p1.is_alive()) <span class="comment">#ç»“æœä¸ºTrue</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;å¼€å§‹&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(p1.is_alive()) <span class="comment">#ç»“æœä¸ºFalse</span></span><br></pre></td></tr></table></figure>

<p>nameä¸pid</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Piao</span>(<span class="params">Process</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name</span>):</span></span><br><span class="line">        <span class="comment"># self.name=name</span></span><br><span class="line">        <span class="comment"># super().__init__() #Processçš„__init__æ–¹æ³•ä¼šæ‰§è¡Œself.name=Piao-1,</span></span><br><span class="line">        <span class="comment">#                    #æ‰€ä»¥åŠ åˆ°è¿™é‡Œ,ä¼šè¦†ç›–æˆ‘ä»¬çš„self.name=name</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#ä¸ºæˆ‘ä»¬å¼€å¯çš„è¿›ç¨‹è®¾ç½®åå­—çš„åšæ³•</span></span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.name=name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is piaoing&#x27;</span> %self.name)</span><br><span class="line">        time.sleep(random.randrange(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is piao end&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line">p=Piao(<span class="string">&#x27;egon&#x27;</span>)</span><br><span class="line">p.start()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;å¼€å§‹&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(p.pid) <span class="comment">#æŸ¥çœ‹pid</span></span><br></pre></td></tr></table></figure>

<p><strong><img src="https://pic4.zhimg.com/80/v2-1891198a21b860d672d8ac2fae66da97_720w.jpg" alt="img"></strong></p>
<p><strong>åƒµå°¸è¿›ç¨‹ä¸å­¤å„¿è¿›ç¨‹ï¼ˆäº†è§£ï¼‰</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">å‚è€ƒåšå®¢ï¼šhttp://www.cnblogs.com/Anker/p/<span class="number">3271773.</span>html</span><br><span class="line"></span><br><span class="line">ä¸€ï¼šåƒµå°¸è¿›ç¨‹ï¼ˆæœ‰å®³ï¼‰</span><br><span class="line">ã€€ã€€åƒµå°¸è¿›ç¨‹ï¼šä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨forkåˆ›å»ºå­è¿›ç¨‹ï¼Œå¦‚æœå­è¿›ç¨‹é€€å‡ºï¼Œè€Œçˆ¶è¿›ç¨‹å¹¶æ²¡æœ‰è°ƒç”¨waitæˆ–waitpidè·å–å­è¿›ç¨‹çš„çŠ¶æ€ä¿¡æ¯ï¼Œé‚£ä¹ˆå­è¿›ç¨‹çš„è¿›ç¨‹æè¿°ç¬¦ä»ç„¶ä¿å­˜åœ¨ç³»ç»Ÿä¸­ã€‚è¿™ç§è¿›ç¨‹ç§°ä¹‹ä¸ºåƒµæ­»è¿›ç¨‹ã€‚è¯¦è§£å¦‚ä¸‹</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬çŸ¥é“åœ¨unix/linuxä¸­ï¼Œæ­£å¸¸æƒ…å†µä¸‹å­è¿›ç¨‹æ˜¯é€šè¿‡çˆ¶è¿›ç¨‹åˆ›å»ºçš„ï¼Œå­è¿›ç¨‹åœ¨åˆ›å»ºæ–°çš„è¿›ç¨‹ã€‚å­è¿›ç¨‹çš„ç»“æŸå’Œçˆ¶è¿›ç¨‹çš„è¿è¡Œæ˜¯ä¸€ä¸ªå¼‚æ­¥è¿‡ç¨‹,å³çˆ¶è¿›ç¨‹æ°¸è¿œæ— æ³•é¢„æµ‹å­è¿›ç¨‹åˆ°åº•ä»€ä¹ˆæ—¶å€™ç»“æŸï¼Œå¦‚æœå­è¿›ç¨‹ä¸€ç»“æŸå°±ç«‹åˆ»å›æ”¶å…¶å…¨éƒ¨èµ„æºï¼Œé‚£ä¹ˆåœ¨çˆ¶è¿›ç¨‹å†…å°†æ— æ³•è·å–å­è¿›ç¨‹çš„çŠ¶æ€ä¿¡æ¯ã€‚</span><br><span class="line"></span><br><span class="line">å› æ­¤ï¼ŒUNâ…¨æä¾›äº†ä¸€ç§æœºåˆ¶å¯ä»¥ä¿è¯çˆ¶è¿›ç¨‹å¯ä»¥åœ¨ä»»æ„æ—¶åˆ»è·å–å­è¿›ç¨‹ç»“æŸæ—¶çš„çŠ¶æ€ä¿¡æ¯ï¼š</span><br><span class="line"><span class="number">1</span>ã€åœ¨æ¯ä¸ªè¿›ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œå†…æ ¸é‡Šæ”¾è¯¥è¿›ç¨‹æ‰€æœ‰çš„èµ„æºï¼ŒåŒ…æ‹¬æ‰“å¼€çš„æ–‡ä»¶ï¼Œå ç”¨çš„å†…å­˜ç­‰ã€‚ä½†æ˜¯ä»ç„¶ä¸ºå…¶ä¿ç•™ä¸€å®šçš„ä¿¡æ¯ï¼ˆåŒ…æ‹¬è¿›ç¨‹å·the process IDï¼Œé€€å‡ºçŠ¶æ€the termination status of the processï¼Œè¿è¡Œæ—¶é—´the amount of CPU time taken by the processç­‰ï¼‰</span><br><span class="line"><span class="number">2</span>ã€ç›´åˆ°çˆ¶è¿›ç¨‹é€šè¿‡wait / waitpidæ¥å–æ—¶æ‰é‡Šæ”¾. ä½†è¿™æ ·å°±å¯¼è‡´äº†é—®é¢˜ï¼Œå¦‚æœè¿›ç¨‹ä¸è°ƒç”¨wait / waitpidçš„è¯ï¼Œé‚£ä¹ˆä¿ç•™çš„é‚£æ®µä¿¡æ¯å°±ä¸ä¼šé‡Šæ”¾ï¼Œå…¶è¿›ç¨‹å·å°±ä¼šä¸€ç›´è¢«å ç”¨ï¼Œä½†æ˜¯ç³»ç»Ÿæ‰€èƒ½ä½¿ç”¨çš„è¿›ç¨‹å·æ˜¯æœ‰é™çš„ï¼Œå¦‚æœå¤§é‡çš„äº§ç”Ÿåƒµæ­»è¿›ç¨‹ï¼Œå°†å› ä¸ºæ²¡æœ‰å¯ç”¨çš„è¿›ç¨‹å·è€Œå¯¼è‡´ç³»ç»Ÿä¸èƒ½äº§ç”Ÿæ–°çš„è¿›ç¨‹. æ­¤å³ä¸ºåƒµå°¸è¿›ç¨‹çš„å±å®³ï¼Œåº”å½“é¿å…ã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€ä»»ä½•ä¸€ä¸ªå­è¿›ç¨‹(inité™¤å¤–)åœ¨exit()ä¹‹åï¼Œå¹¶éé©¬ä¸Šå°±æ¶ˆå¤±æ‰ï¼Œè€Œæ˜¯ç•™ä¸‹ä¸€ä¸ªç§°ä¸ºåƒµå°¸è¿›ç¨‹(Zombie)çš„æ•°æ®ç»“æ„ï¼Œç­‰å¾…çˆ¶è¿›ç¨‹å¤„ç†ã€‚è¿™æ˜¯æ¯ä¸ªå­è¿›ç¨‹åœ¨ç»“æŸæ—¶éƒ½è¦ç»è¿‡çš„é˜¶æ®µã€‚å¦‚æœå­è¿›ç¨‹åœ¨exit()ä¹‹åï¼Œçˆ¶è¿›ç¨‹æ²¡æœ‰æ¥å¾—åŠå¤„ç†ï¼Œè¿™æ—¶ç”¨pså‘½ä»¤å°±èƒ½çœ‹åˆ°å­è¿›ç¨‹çš„çŠ¶æ€æ˜¯â€œZâ€ã€‚å¦‚æœçˆ¶è¿›ç¨‹èƒ½åŠæ—¶ å¤„ç†ï¼Œå¯èƒ½ç”¨pså‘½ä»¤å°±æ¥ä¸åŠçœ‹åˆ°å­è¿›ç¨‹çš„åƒµå°¸çŠ¶æ€ï¼Œä½†è¿™å¹¶ä¸ç­‰äºå­è¿›ç¨‹ä¸ç»è¿‡åƒµå°¸çŠ¶æ€ã€‚  å¦‚æœçˆ¶è¿›ç¨‹åœ¨å­è¿›ç¨‹ç»“æŸä¹‹å‰é€€å‡ºï¼Œåˆ™å­è¿›ç¨‹å°†ç”±initæ¥ç®¡ã€‚initå°†ä¼šä»¥çˆ¶è¿›ç¨‹çš„èº«ä»½å¯¹åƒµå°¸çŠ¶æ€çš„å­è¿›ç¨‹è¿›è¡Œå¤„ç†ã€‚</span><br><span class="line"></span><br><span class="line">äºŒï¼šå­¤å„¿è¿›ç¨‹ï¼ˆæ— å®³ï¼‰</span><br><span class="line"></span><br><span class="line">ã€€ã€€å­¤å„¿è¿›ç¨‹ï¼šä¸€ä¸ªçˆ¶è¿›ç¨‹é€€å‡ºï¼Œè€Œå®ƒçš„ä¸€ä¸ªæˆ–å¤šä¸ªå­è¿›ç¨‹è¿˜åœ¨è¿è¡Œï¼Œé‚£ä¹ˆé‚£äº›å­è¿›ç¨‹å°†æˆä¸ºå­¤å„¿è¿›ç¨‹ã€‚å­¤å„¿è¿›ç¨‹å°†è¢«initè¿›ç¨‹(è¿›ç¨‹å·ä¸º<span class="number">1</span>)æ‰€æ”¶å…»ï¼Œå¹¶ç”±initè¿›ç¨‹å¯¹å®ƒä»¬å®ŒæˆçŠ¶æ€æ”¶é›†å·¥ä½œã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€å­¤å„¿è¿›ç¨‹æ˜¯æ²¡æœ‰çˆ¶è¿›ç¨‹çš„è¿›ç¨‹ï¼Œå­¤å„¿è¿›ç¨‹è¿™ä¸ªé‡ä»»å°±è½åˆ°äº†initè¿›ç¨‹èº«ä¸Šï¼Œinitè¿›ç¨‹å°±å¥½åƒæ˜¯ä¸€ä¸ªæ°‘æ”¿å±€ï¼Œä¸“é—¨è´Ÿè´£å¤„ç†å­¤å„¿è¿›ç¨‹çš„å–„åå·¥ä½œã€‚æ¯å½“å‡ºç°ä¸€ä¸ªå­¤å„¿è¿›ç¨‹çš„æ—¶å€™ï¼Œå†…æ ¸å°±æŠŠå­¤ å„¿è¿›ç¨‹çš„çˆ¶è¿›ç¨‹è®¾ç½®ä¸ºinitï¼Œè€Œinitè¿›ç¨‹ä¼šå¾ªç¯åœ°wait()å®ƒçš„å·²ç»é€€å‡ºçš„å­è¿›ç¨‹ã€‚è¿™æ ·ï¼Œå½“ä¸€ä¸ªå­¤å„¿è¿›ç¨‹å‡„å‡‰åœ°ç»“æŸäº†å…¶ç”Ÿå‘½å‘¨æœŸçš„æ—¶å€™ï¼Œinitè¿›ç¨‹å°±ä¼šä»£è¡¨å…šå’Œæ”¿åºœå‡ºé¢å¤„ç†å®ƒçš„ä¸€åˆ‡å–„åå·¥ä½œã€‚å› æ­¤å­¤å„¿è¿›ç¨‹å¹¶ä¸ä¼šæœ‰ä»€ä¹ˆå±å®³ã€‚</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼ˆåˆ›å»ºå®Œå­è¿›ç¨‹åï¼Œä¸»è¿›ç¨‹æ‰€åœ¨çš„è¿™ä¸ªè„šæœ¬å°±é€€å‡ºäº†ï¼Œå½“çˆ¶è¿›ç¨‹å…ˆäºå­è¿›ç¨‹ç»“æŸæ—¶ï¼Œå­è¿›ç¨‹ä¼šè¢«initæ”¶å…»ï¼Œæˆä¸ºå­¤å„¿è¿›ç¨‹ï¼Œè€Œéåƒµå°¸è¿›ç¨‹ï¼‰ï¼Œæ–‡ä»¶å†…å®¹</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">pid = os.getpid()</span><br><span class="line">ppid = os.getppid()</span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;im father&#x27;</span>, <span class="string">&#x27;pid&#x27;</span>, pid, <span class="string">&#x27;ppid&#x27;</span>, ppid</span><br><span class="line">pid = os.fork()</span><br><span class="line"><span class="comment">#æ‰§è¡Œpid=os.fork()åˆ™ä¼šç”Ÿæˆä¸€ä¸ªå­è¿›ç¨‹</span></span><br><span class="line"><span class="comment">#è¿”å›å€¼pidæœ‰ä¸¤ç§å€¼ï¼š</span></span><br><span class="line"><span class="comment">#    å¦‚æœè¿”å›çš„pidå€¼ä¸º0ï¼Œè¡¨ç¤ºåœ¨å­è¿›ç¨‹å½“ä¸­</span></span><br><span class="line"><span class="comment">#    å¦‚æœè¿”å›çš„pidå€¼&gt;0ï¼Œè¡¨ç¤ºåœ¨çˆ¶è¿›ç¨‹å½“ä¸­</span></span><br><span class="line"><span class="keyword">if</span> pid &gt; <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;father died..&#x27;</span></span><br><span class="line">    sys.exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿è¯ä¸»çº¿ç¨‹é€€å‡ºå®Œæ¯•</span></span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;im child&#x27;</span>, os.getpid(), os.getppid()</span><br><span class="line"></span><br><span class="line">æ‰§è¡Œæ–‡ä»¶ï¼Œè¾“å‡ºç»“æœï¼š</span><br><span class="line">im father pid <span class="number">32515</span> ppid <span class="number">32015</span></span><br><span class="line">father died..</span><br><span class="line">im child <span class="number">32516</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">çœ‹ï¼Œå­è¿›ç¨‹å·²ç»è¢«pidä¸º<span class="number">1</span>çš„initè¿›ç¨‹æ¥æ”¶äº†ï¼Œæ‰€ä»¥åƒµå°¸è¿›ç¨‹åœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯ä¸å­˜åœ¨çš„ï¼Œå­˜åœ¨åªæœ‰å­¤å„¿è¿›ç¨‹è€Œå·²ï¼Œå­¤å„¿è¿›ç¨‹å£°æ˜å‘¨æœŸç»“æŸè‡ªç„¶ä¼šè¢«initæ¥é”€æ¯ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä¸‰ï¼šåƒµå°¸è¿›ç¨‹å±å®³åœºæ™¯ï¼š</span><br><span class="line"></span><br><span class="line">ã€€ã€€ä¾‹å¦‚æœ‰ä¸ªè¿›ç¨‹ï¼Œå®ƒå®šæœŸçš„äº§ ç”Ÿä¸€ä¸ªå­è¿›ç¨‹ï¼Œè¿™ä¸ªå­è¿›ç¨‹éœ€è¦åšçš„äº‹æƒ…å¾ˆå°‘ï¼Œåšå®Œå®ƒè¯¥åšçš„äº‹æƒ…ä¹‹åå°±é€€å‡ºäº†ï¼Œå› æ­¤è¿™ä¸ªå­è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ï¼Œä½†æ˜¯ï¼Œçˆ¶è¿›ç¨‹åªç®¡ç”Ÿæˆæ–°çš„å­è¿›ç¨‹ï¼Œè‡³äºå­è¿›ç¨‹ é€€å‡ºä¹‹åçš„äº‹æƒ…ï¼Œåˆ™ä¸€æ¦‚ä¸é—»ä¸é—®ï¼Œè¿™æ ·ï¼Œç³»ç»Ÿè¿è¡Œä¸Šä¸€æ®µæ—¶é—´ä¹‹åï¼Œç³»ç»Ÿä¸­å°±ä¼šå­˜åœ¨å¾ˆå¤šçš„åƒµæ­»è¿›ç¨‹ï¼Œå€˜è‹¥ç”¨pså‘½ä»¤æŸ¥çœ‹çš„è¯ï¼Œå°±ä¼šçœ‹åˆ°å¾ˆå¤šçŠ¶æ€ä¸ºZçš„è¿›ç¨‹ã€‚ ä¸¥æ ¼åœ°æ¥è¯´ï¼Œåƒµæ­»è¿›ç¨‹å¹¶ä¸æ˜¯é—®é¢˜çš„æ ¹æºï¼Œç½ªé­ç¥¸é¦–æ˜¯äº§ç”Ÿå‡ºå¤§é‡åƒµæ­»è¿›ç¨‹çš„é‚£ä¸ªçˆ¶è¿›ç¨‹ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬å¯»æ±‚å¦‚ä½•æ¶ˆç­ç³»ç»Ÿä¸­å¤§é‡çš„åƒµæ­»è¿›ç¨‹æ—¶ï¼Œç­”æ¡ˆå°±æ˜¯æŠŠäº§ç”Ÿå¤§ é‡åƒµæ­»è¿›ç¨‹çš„é‚£ä¸ªå…ƒå‡¶æªæ¯™æ‰ï¼ˆä¹Ÿå°±æ˜¯é€šè¿‡killå‘é€SIGTERMæˆ–è€…SIGKILLä¿¡å·å•¦ï¼‰ã€‚æªæ¯™äº†å…ƒå‡¶è¿›ç¨‹ä¹‹åï¼Œå®ƒäº§ç”Ÿçš„åƒµæ­»è¿›ç¨‹å°±å˜æˆäº†å­¤å„¿è¿› ç¨‹ï¼Œè¿™äº›å­¤å„¿è¿›ç¨‹ä¼šè¢«initè¿›ç¨‹æ¥ç®¡ï¼Œinitè¿›ç¨‹ä¼šwait()è¿™äº›å­¤å„¿è¿›ç¨‹ï¼Œé‡Šæ”¾å®ƒä»¬å ç”¨çš„ç³»ç»Ÿè¿›ç¨‹è¡¨ä¸­çš„èµ„æºï¼Œè¿™æ ·ï¼Œè¿™äº›å·²ç»åƒµæ­»çš„å­¤å„¿è¿›ç¨‹ å°±èƒ½ç‘ç›®è€Œå»äº†ã€‚</span><br><span class="line"></span><br><span class="line">å››ï¼šæµ‹è¯•</span><br><span class="line"><span class="comment">#1ã€äº§ç”Ÿåƒµå°¸è¿›ç¨‹çš„ç¨‹åºtest.pyå†…å®¹å¦‚ä¸‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> time,os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å­&#x27;</span>,os.getpid())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    p=Process(target=run)</span><br><span class="line">    p.start()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»&#x27;</span>,os.getpid())</span><br><span class="line">    time.sleep(<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€åœ¨unixæˆ–linuxç³»ç»Ÿä¸Šæ‰§è¡Œ</span></span><br><span class="line">[root@vm172-<span class="number">31</span>-<span class="number">0</span>-<span class="number">19</span> ~]<span class="comment"># python3  test.py &amp;</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">18652</span></span><br><span class="line">[root@vm172-<span class="number">31</span>-<span class="number">0</span>-<span class="number">19</span> ~]<span class="comment"># ä¸» 18652</span></span><br><span class="line">å­ <span class="number">18653</span></span><br><span class="line"></span><br><span class="line">[root@vm172-<span class="number">31</span>-<span class="number">0</span>-<span class="number">19</span> ~]<span class="comment"># ps aux |grep Z</span></span><br><span class="line">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root     <span class="number">18653</span>  <span class="number">0.0</span>  <span class="number">0.0</span>      <span class="number">0</span>     <span class="number">0</span> pts/<span class="number">0</span>    Z    <span class="number">20</span>:02   <span class="number">0</span>:<span class="number">00</span> [python3] &lt;defunct&gt; <span class="comment">#å‡ºç°åƒµå°¸è¿›ç¨‹</span></span><br><span class="line">root     <span class="number">18656</span>  <span class="number">0.0</span>  <span class="number">0.0</span> <span class="number">112648</span>   <span class="number">952</span> pts/<span class="number">0</span>    S+   <span class="number">20</span>:02   <span class="number">0</span>:<span class="number">00</span> grep --color=auto Z</span><br><span class="line"></span><br><span class="line">[root@vm172-<span class="number">31</span>-<span class="number">0</span>-<span class="number">19</span> ~]<span class="comment"># top #æ‰§è¡Œtopå‘½ä»¤å‘ç°1zombie</span></span><br><span class="line">top - <span class="number">20</span>:03:<span class="number">42</span> up <span class="number">31</span> <span class="built_in">min</span>,  <span class="number">3</span> users,  load average: <span class="number">0.01</span>, <span class="number">0.06</span>, <span class="number">0.12</span></span><br><span class="line">Tasks:  <span class="number">93</span> total,   <span class="number">2</span> running,  <span class="number">90</span> sleeping,   <span class="number">0</span> stopped,   <span class="number">1</span> zombie</span><br><span class="line">%Cpu(s):  <span class="number">0.0</span> us,  <span class="number">0.3</span> sy,  <span class="number">0.0</span> ni, <span class="number">99.7</span> <span class="built_in">id</span>,  <span class="number">0.0</span> wa,  <span class="number">0.0</span> hi,  <span class="number">0.0</span> si,  <span class="number">0.0</span> st</span><br><span class="line">KiB Mem :  <span class="number">1016884</span> total,    <span class="number">97184</span> free,    <span class="number">70848</span> used,   <span class="number">848852</span> buff/cache</span><br><span class="line">KiB Swap:        <span class="number">0</span> total,        <span class="number">0</span> free,        <span class="number">0</span> used.   <span class="number">782540</span> avail Mem </span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND                                                                                                                                        </span><br><span class="line">root      <span class="number">20</span>   <span class="number">0</span>   <span class="number">29788</span>   <span class="number">1256</span>    <span class="number">988</span> S  <span class="number">0.3</span>  <span class="number">0.1</span>   <span class="number">0</span>:<span class="number">01.50</span> elfin                                                                                                                      </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#3ã€</span></span><br><span class="line">ç­‰å¾…çˆ¶è¿›ç¨‹æ­£å¸¸ç»“æŸåä¼šè°ƒç”¨waitï¼waitpidå»å›æ”¶åƒµå°¸è¿›ç¨‹</span><br><span class="line">ä½†å¦‚æœçˆ¶è¿›ç¨‹æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ï¼Œæ°¸è¿œä¸ä¼šç»“æŸï¼Œé‚£ä¹ˆè¯¥åƒµå°¸è¿›ç¨‹å°±ä¼šä¸€ç›´å­˜åœ¨ï¼Œåƒµå°¸è¿›ç¨‹è¿‡å¤šï¼Œå°±æ˜¯æœ‰å®³çš„</span><br><span class="line">è§£å†³æ–¹æ³•ä¸€ï¼šæ€æ­»çˆ¶è¿›ç¨‹</span><br><span class="line">è§£å†³æ–¹æ³•äºŒï¼šå¯¹å¼€å¯çš„å­è¿›ç¨‹åº”è¯¥è®°å¾—ä½¿ç”¨joinï¼Œjoinä¼šå›æ”¶åƒµå°¸è¿›ç¨‹</span><br><span class="line">å‚è€ƒpython2æºç æ³¨é‡Š</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Process</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">join</span>(<span class="params">self, timeout=<span class="literal">None</span></span>):</span></span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">        Wait until child process terminates</span></span><br><span class="line"><span class="string">        &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">assert</span> self._parent_pid == os.getpid(), <span class="string">&#x27;can only join a child process&#x27;</span></span><br><span class="line">        <span class="keyword">assert</span> self._popen <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>, <span class="string">&#x27;can only join a started process&#x27;</span></span><br><span class="line">        res = self._popen.wait(timeout)</span><br><span class="line">        <span class="keyword">if</span> res <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            _current_process._children.discard(self)</span><br><span class="line"></span><br><span class="line">joinæ–¹æ³•ä¸­è°ƒç”¨äº†waitï¼Œå‘Šè¯‰ç³»ç»Ÿé‡Šæ”¾åƒµå°¸è¿›ç¨‹ã€‚discardä¸ºä»è‡ªå·±çš„childrenä¸­å‰”é™¤</span><br><span class="line"></span><br><span class="line">è§£å†³æ–¹æ³•ä¸‰ï¼šhttp://blog.csdn.net/u010571844/article/details/<span class="number">50419798</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€è€ƒï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> time,os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s is running&#x27;</span> %os.getpid())</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    p=Process(target=task)</span><br><span class="line">    p.start()</span><br><span class="line">    p.join() <span class="comment"># ç­‰å¾…è¿›ç¨‹pç»“æŸåï¼Œjoinå‡½æ•°å†…éƒ¨ä¼šå‘é€ç³»ç»Ÿè°ƒç”¨waitï¼Œå»å‘Šè¯‰æ“ä½œç³»ç»Ÿå›æ”¶æ‰è¿›ç¨‹pçš„idå·</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(p.pid) <span class="comment">#ï¼Ÿï¼Ÿï¼Ÿæ­¤æ—¶èƒ½å¦çœ‹åˆ°å­è¿›ç¨‹pçš„idå·</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>ç­”æ¡ˆ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç­”æ¡ˆï¼šå¯ä»¥</span></span><br><span class="line"><span class="comment">#åˆ†æï¼š</span></span><br><span class="line">p.join()æ˜¯åƒæ“ä½œç³»ç»Ÿå‘é€è¯·æ±‚ï¼Œå‘ŠçŸ¥æ“ä½œç³»ç»Ÿpçš„<span class="built_in">id</span>å·ä¸éœ€è¦å†å ç”¨äº†ï¼Œå›æ”¶å°±å¯ä»¥ï¼Œ</span><br><span class="line">æ­¤æ—¶åœ¨çˆ¶è¿›ç¨‹å†…è¿˜å¯ä»¥çœ‹åˆ°p.pid,ä½†æ­¤æ—¶çš„p.pidæ˜¯ä¸€ä¸ªæ— æ„ä¹‰çš„<span class="built_in">id</span>å·ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿå·²ç»å°†è¯¥ç¼–å·å›æ”¶</span><br><span class="line"></span><br><span class="line">æ‰“ä¸ªæ¯”æ–¹ï¼š</span><br><span class="line">æˆ‘å…šç›¸å½“äºæ“ä½œç³»ç»Ÿï¼Œæ§åˆ¶ç€æ•´ä¸ªä¸­å›½çš„ç¡¬ä»¶ï¼Œæ¯ä¸ªäººç›¸å½“äºä¸€ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªäººéƒ½éœ€è¦è·Ÿæˆ‘å…šç”³è¯·ä¸€ä¸ªèº«ä»½è¯å·</span><br><span class="line">è¯¥å·ç å°±ç›¸å½“äºè¿›ç¨‹çš„pidï¼Œäººæ­»ååº”è¯¥åˆ°æˆ‘å…šé‚£é‡Œæ³¨é”€èº«ä»½è¯å·ï¼Œp.join()å°±ç›¸å½“äºè¦æ±‚æˆ‘å…šå›æ”¶èº«ä»½è¯å·ï¼Œä½†pçš„å®¶äººï¼ˆç›¸å½“äºä¸»è¿›ç¨‹ï¼‰</span><br><span class="line">ä»ç„¶æŒæœ‰pçš„èº«ä»½è¯ï¼Œä½†æ­¤åˆ»çš„èº«ä»½è¯å·²ç»æ²¡æœ‰æ„ä¹‰</span><br></pre></td></tr></table></figure>

<h3 id="å››-å®ˆæŠ¤è¿›ç¨‹"><a href="#å››-å®ˆæŠ¤è¿›ç¨‹" class="headerlink" title="å›› å®ˆæŠ¤è¿›ç¨‹"></a>å›› å®ˆæŠ¤è¿›ç¨‹</h3><p>ä¸»è¿›ç¨‹åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹</p>
<p>å…¶ä¸€ï¼šå®ˆæŠ¤è¿›ç¨‹ä¼šåœ¨ä¸»è¿›ç¨‹ä»£ç æ‰§è¡Œç»“æŸåå°±ç»ˆæ­¢</p>
<p>å…¶äºŒï¼šå®ˆæŠ¤è¿›ç¨‹å†…æ— æ³•å†å¼€å¯å­è¿›ç¨‹,å¦åˆ™æŠ›å‡ºå¼‚å¸¸ï¼šAssertionError: daemonic processes are not allowed to have children</p>
<p>æ³¨æ„ï¼šè¿›ç¨‹ä¹‹é—´æ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼Œä¸»è¿›ç¨‹ä»£ç è¿è¡Œç»“æŸï¼Œå®ˆæŠ¤è¿›ç¨‹éšå³ç»ˆæ­¢</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Piao</span>(<span class="params">Process</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name</span>):</span></span><br><span class="line">        self.name=name</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is piaoing&#x27;</span> %self.name)</span><br><span class="line">        time.sleep(random.randrange(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s is piao end&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p=Piao(<span class="string">&#x27;egon&#x27;</span>)</span><br><span class="line">p.daemon=<span class="literal">True</span> <span class="comment">#ä¸€å®šè¦åœ¨p.start()å‰è®¾ç½®,è®¾ç½®pä¸ºå®ˆæŠ¤è¿›ç¨‹,ç¦æ­¢påˆ›å»ºå­è¿›ç¨‹,å¹¶ä¸”çˆ¶è¿›ç¨‹ä»£ç æ‰§è¡Œç»“æŸ,på³ç»ˆæ­¢è¿è¡Œ</span></span><br><span class="line">p.start()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ä¸»&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>è¿·æƒ‘äººçš„ä¾‹å­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¸»è¿›ç¨‹ä»£ç è¿è¡Œå®Œæ¯•,å®ˆæŠ¤è¿›ç¨‹å°±ä¼šç»“æŸ</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">123</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;end123&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">456</span>)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;end456&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p1=Process(target=foo)</span><br><span class="line">p2=Process(target=bar)</span><br><span class="line"></span><br><span class="line">p1.daemon=<span class="literal">True</span></span><br><span class="line">p1.start()</span><br><span class="line">p2.start()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;main-------&quot;</span>) <span class="comment">#æ‰“å°è¯¥è¡Œåˆ™ä¸»è¿›ç¨‹ä»£ç ç»“æŸ,åˆ™å®ˆæŠ¤è¿›ç¨‹p1åº”è¯¥è¢«ç»ˆæ­¢,å¯èƒ½ä¼šæœ‰p1ä»»åŠ¡æ‰§è¡Œçš„æ‰“å°ä¿¡æ¯123,å› ä¸ºä¸»è¿›ç¨‹æ‰“å°main----æ—¶,p1ä¹Ÿæ‰§è¡Œäº†,ä½†æ˜¯éšå³è¢«ç»ˆæ­¢</span></span><br></pre></td></tr></table></figure>

<h3 id="äº”-è¿›ç¨‹åŒæ­¥-é”"><a href="#äº”-è¿›ç¨‹åŒæ­¥-é”" class="headerlink" title="äº” è¿›ç¨‹åŒæ­¥(é”)"></a>äº” è¿›ç¨‹åŒæ­¥(é”)</h3><p>è¿›ç¨‹ä¹‹é—´æ•°æ®ä¸å…±äº«,ä½†æ˜¯å…±äº«åŒä¸€å¥—æ–‡ä»¶ç³»ç»Ÿ,æ‰€ä»¥è®¿é—®åŒä¸€ä¸ªæ–‡ä»¶,æˆ–åŒä¸€ä¸ªæ‰“å°ç»ˆç«¯,æ˜¯æ²¡æœ‰é—®é¢˜çš„,</p>
<p>è€Œå…±äº«å¸¦æ¥çš„æ˜¯ç«äº‰ï¼Œç«äº‰å¸¦æ¥çš„ç»“æœå°±æ˜¯é”™ä¹±ï¼Œå¦‚ä½•æ§åˆ¶ï¼Œå°±æ˜¯åŠ é”å¤„ç†</p>
<p>part1ï¼šå¤šä¸ªè¿›ç¨‹å…±äº«åŒä¸€æ‰“å°ç»ˆç«¯</p>
<p>å¹¶å‘è¿è¡Œ,æ•ˆç‡é«˜,ä½†ç«äº‰åŒä¸€æ‰“å°ç»ˆç«¯,å¸¦æ¥äº†æ‰“å°é”™ä¹±</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¹¶å‘è¿è¡Œ,æ•ˆç‡é«˜,ä½†ç«äº‰åŒä¸€æ‰“å°ç»ˆç«¯,å¸¦æ¥äº†æ‰“å°é”™ä¹±</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> os,time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s is running&#x27;</span> %os.getpid())</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s is done&#x27;</span> %os.getpid())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        p=Process(target=work)</span><br><span class="line">        p.start()</span><br></pre></td></tr></table></figure>

<p>åŠ é”ï¼šç”±å¹¶å‘å˜æˆäº†ä¸²è¡Œ,ç‰ºç‰²äº†è¿è¡Œæ•ˆç‡,ä½†é¿å…äº†ç«äº‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç”±å¹¶å‘å˜æˆäº†ä¸²è¡Œ,ç‰ºç‰²äº†è¿è¡Œæ•ˆç‡,ä½†é¿å…äº†ç«äº‰</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Lock</span><br><span class="line"><span class="keyword">import</span> os,time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span>(<span class="params">lock</span>):</span></span><br><span class="line">    lock.acquire()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s is running&#x27;</span> %os.getpid())</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s is done&#x27;</span> %os.getpid())</span><br><span class="line">    lock.release()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    lock=Lock()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        p=Process(target=work,args=(lock,))</span><br><span class="line">        p.start()</span><br></pre></td></tr></table></figure>

<p>part2ï¼šå¤šä¸ªè¿›ç¨‹å…±äº«åŒä¸€æ–‡ä»¶</p>
<p>æ–‡ä»¶å½“æ•°æ®åº“ï¼Œæ¨¡æ‹ŸæŠ¢ç¥¨</p>
<p>å¹¶å‘è¿è¡Œï¼Œæ•ˆç‡é«˜ï¼Œä½†ç«äº‰å†™åŒä¸€æ–‡ä»¶ï¼Œæ•°æ®å†™å…¥é”™ä¹±</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ–‡ä»¶dbçš„å†…å®¹ä¸ºï¼š&#123;&quot;count&quot;:1&#125;</span></span><br><span class="line"><span class="comment">#æ³¨æ„ä¸€å®šè¦ç”¨åŒå¼•å·ï¼Œä¸ç„¶jsonæ— æ³•è¯†åˆ«</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Lock</span><br><span class="line"><span class="keyword">import</span> time,json,random</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">search</span>():</span></span><br><span class="line">    dic=json.load(<span class="built_in">open</span>(<span class="string">&#x27;db.txt&#x27;</span>))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;\033[43må‰©ä½™ç¥¨æ•°%s\033[0m&#x27;</span> %dic[<span class="string">&#x27;count&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get</span>():</span></span><br><span class="line">    dic=json.load(<span class="built_in">open</span>(<span class="string">&#x27;db.txt&#x27;</span>))</span><br><span class="line">    time.sleep(<span class="number">0.1</span>) <span class="comment">#æ¨¡æ‹Ÿè¯»æ•°æ®çš„ç½‘ç»œå»¶è¿Ÿ</span></span><br><span class="line">    <span class="keyword">if</span> dic[<span class="string">&#x27;count&#x27;</span>] &gt;<span class="number">0</span>:</span><br><span class="line">        dic[<span class="string">&#x27;count&#x27;</span>]-=<span class="number">1</span></span><br><span class="line">        time.sleep(<span class="number">0.2</span>) <span class="comment">#æ¨¡æ‹Ÿå†™æ•°æ®çš„ç½‘ç»œå»¶è¿Ÿ</span></span><br><span class="line">        json.dump(dic,<span class="built_in">open</span>(<span class="string">&#x27;db.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[43mè´­ç¥¨æˆåŠŸ\033[0m&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task</span>(<span class="params">lock</span>):</span></span><br><span class="line">    search()</span><br><span class="line">    get()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    lock=Lock()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>): <span class="comment">#æ¨¡æ‹Ÿå¹¶å‘100ä¸ªå®¢æˆ·ç«¯æŠ¢ç¥¨</span></span><br><span class="line">        p=Process(target=task,args=(lock,))</span><br><span class="line">        p.start()</span><br></pre></td></tr></table></figure>

<p>åŠ é”ï¼šè´­ç¥¨è¡Œä¸ºç”±å¹¶å‘å˜æˆäº†ä¸²è¡Œï¼Œç‰ºç‰²äº†è¿è¡Œæ•ˆç‡ï¼Œä½†ä¿è¯äº†æ•°æ®å®‰å…¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ–‡ä»¶dbçš„å†…å®¹ä¸ºï¼š&#123;&quot;count&quot;:1&#125;</span></span><br><span class="line"><span class="comment">#æ³¨æ„ä¸€å®šè¦ç”¨åŒå¼•å·ï¼Œä¸ç„¶jsonæ— æ³•è¯†åˆ«</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Lock</span><br><span class="line"><span class="keyword">import</span> time,json,random</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">search</span>():</span></span><br><span class="line">    dic=json.load(<span class="built_in">open</span>(<span class="string">&#x27;db.txt&#x27;</span>))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;\033[43må‰©ä½™ç¥¨æ•°%s\033[0m&#x27;</span> %dic[<span class="string">&#x27;count&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get</span>():</span></span><br><span class="line">    dic=json.load(<span class="built_in">open</span>(<span class="string">&#x27;db.txt&#x27;</span>))</span><br><span class="line">    time.sleep(<span class="number">0.1</span>) <span class="comment">#æ¨¡æ‹Ÿè¯»æ•°æ®çš„ç½‘ç»œå»¶è¿Ÿ</span></span><br><span class="line">    <span class="keyword">if</span> dic[<span class="string">&#x27;count&#x27;</span>] &gt;<span class="number">0</span>:</span><br><span class="line">        dic[<span class="string">&#x27;count&#x27;</span>]-=<span class="number">1</span></span><br><span class="line">        time.sleep(<span class="number">0.2</span>) <span class="comment">#æ¨¡æ‹Ÿå†™æ•°æ®çš„ç½‘ç»œå»¶è¿Ÿ</span></span><br><span class="line">        json.dump(dic,<span class="built_in">open</span>(<span class="string">&#x27;db.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[43mè´­ç¥¨æˆåŠŸ\033[0m&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task</span>(<span class="params">lock</span>):</span></span><br><span class="line">    search()</span><br><span class="line">    lock.acquire()</span><br><span class="line">    get()</span><br><span class="line">    lock.release()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    lock=Lock()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>): <span class="comment">#æ¨¡æ‹Ÿå¹¶å‘100ä¸ªå®¢æˆ·ç«¯æŠ¢ç¥¨</span></span><br><span class="line">        p=Process(target=task,args=(lock,))</span><br><span class="line">        p.start()</span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åŠ é”å¯ä»¥ä¿è¯å¤šä¸ªè¿›ç¨‹ä¿®æ”¹åŒä¸€å—æ•°æ®æ—¶ï¼ŒåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªä»»åŠ¡å¯ä»¥è¿›è¡Œä¿®æ”¹ï¼Œå³ä¸²è¡Œçš„ä¿®æ”¹ï¼Œæ²¡é”™ï¼Œé€Ÿåº¦æ˜¯æ…¢äº†ï¼Œä½†ç‰ºç‰²äº†é€Ÿåº¦å´ä¿è¯äº†æ•°æ®å®‰å…¨ã€‚</span></span><br><span class="line">è™½ç„¶å¯ä»¥ç”¨æ–‡ä»¶å…±äº«æ•°æ®å®ç°è¿›ç¨‹é—´é€šä¿¡ï¼Œä½†é—®é¢˜æ˜¯ï¼š</span><br><span class="line"><span class="number">1.</span>æ•ˆç‡ä½ï¼ˆå…±äº«æ•°æ®åŸºäºæ–‡ä»¶ï¼Œè€Œæ–‡ä»¶æ˜¯ç¡¬ç›˜ä¸Šçš„æ•°æ®ï¼‰</span><br><span class="line"><span class="number">2.</span>éœ€è¦è‡ªå·±åŠ é”å¤„ç†</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å› æ­¤æˆ‘ä»¬æœ€å¥½æ‰¾å¯»ä¸€ç§è§£å†³æ–¹æ¡ˆèƒ½å¤Ÿå…¼é¡¾ï¼š1ã€æ•ˆç‡é«˜ï¼ˆå¤šä¸ªè¿›ç¨‹å…±äº«ä¸€å—å†…å­˜çš„æ•°æ®ï¼‰2ã€å¸®æˆ‘ä»¬å¤„ç†å¥½é”é—®é¢˜ã€‚è¿™å°±æ˜¯mutiprocessingæ¨¡å—ä¸ºæˆ‘ä»¬æä¾›çš„åŸºäºæ¶ˆæ¯çš„IPCé€šä¿¡æœºåˆ¶ï¼šé˜Ÿåˆ—å’Œç®¡é“ã€‚</span></span><br><span class="line"><span class="number">1</span> é˜Ÿåˆ—å’Œç®¡é“éƒ½æ˜¯å°†æ•°æ®å­˜æ”¾äºå†…å­˜ä¸­</span><br><span class="line"><span class="number">2</span> é˜Ÿåˆ—åˆæ˜¯åŸºäºï¼ˆç®¡é“+é”ï¼‰å®ç°çš„ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä»å¤æ‚çš„é”é—®é¢˜ä¸­è§£è„±å‡ºæ¥ï¼Œ</span><br><span class="line">æˆ‘ä»¬åº”è¯¥å°½é‡é¿å…ä½¿ç”¨å…±äº«æ•°æ®ï¼Œå°½å¯èƒ½ä½¿ç”¨æ¶ˆæ¯ä¼ é€’å’Œé˜Ÿåˆ—ï¼Œé¿å…å¤„ç†å¤æ‚çš„åŒæ­¥å’Œé”é—®é¢˜ï¼Œè€Œä¸”åœ¨è¿›ç¨‹æ•°ç›®å¢å¤šæ—¶ï¼Œå¾€å¾€å¯ä»¥è·å¾—æ›´å¥½çš„å¯è·å±•æ€§ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="å…­-é˜Ÿåˆ—ï¼ˆæ¨èä½¿ç”¨ï¼‰"><a href="#å…­-é˜Ÿåˆ—ï¼ˆæ¨èä½¿ç”¨ï¼‰" class="headerlink" title="å…­ é˜Ÿåˆ—ï¼ˆæ¨èä½¿ç”¨ï¼‰"></a>å…­ é˜Ÿåˆ—ï¼ˆæ¨èä½¿ç”¨ï¼‰</h3><p>è¿›ç¨‹å½¼æ­¤ä¹‹é—´äº’ç›¸éš”ç¦»ï¼Œè¦å®ç°è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ï¼Œmultiprocessingæ¨¡å—æ”¯æŒä¸¤ç§å½¢å¼ï¼šé˜Ÿåˆ—å’Œç®¡é“ï¼Œè¿™ä¸¤ç§æ–¹å¼éƒ½æ˜¯ä½¿ç”¨æ¶ˆæ¯ä¼ é€’çš„</p>
<p><strong>åˆ›å»ºé˜Ÿåˆ—çš„ç±»ï¼ˆåº•å±‚å°±æ˜¯ä»¥ç®¡é“å’Œé”å®šçš„æ–¹å¼å®ç°ï¼‰</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 Queue([maxsize]):åˆ›å»ºå…±äº«çš„è¿›ç¨‹é˜Ÿåˆ—ï¼ŒQueueæ˜¯å¤šè¿›ç¨‹å®‰å…¨çš„é˜Ÿåˆ—ï¼Œå¯ä»¥ä½¿ç”¨Queueå®ç°å¤šè¿›ç¨‹ä¹‹é—´çš„æ•°æ®ä¼ é€’ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>å‚æ•°ä»‹ç»ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1 maxsizeæ˜¯é˜Ÿåˆ—ä¸­å…è®¸æœ€å¤§é¡¹æ•°ï¼Œçœç•¥åˆ™æ— å¤§å°é™åˆ¶ã€‚</span><br></pre></td></tr></table></figure>

<p><strong>æ–¹æ³•ä»‹ç»ï¼š</strong></p>
<p>ä¸»è¦æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> q.putæ–¹æ³•ç”¨ä»¥æ’å…¥æ•°æ®åˆ°é˜Ÿåˆ—ä¸­ï¼Œputæ–¹æ³•è¿˜æœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼šblockedå’Œtimeoutã€‚å¦‚æœblockedä¸º<span class="literal">True</span>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œå¹¶ä¸”timeoutä¸ºæ­£å€¼ï¼Œè¯¥æ–¹æ³•ä¼šé˜»å¡timeoutæŒ‡å®šçš„æ—¶é—´ï¼Œç›´åˆ°è¯¥é˜Ÿåˆ—æœ‰å‰©ä½™çš„ç©ºé—´ã€‚å¦‚æœè¶…æ—¶ï¼Œä¼šæŠ›å‡ºQueue.Fullå¼‚å¸¸ã€‚å¦‚æœblockedä¸º<span class="literal">False</span>ï¼Œä½†è¯¥Queueå·²æ»¡ï¼Œä¼šç«‹å³æŠ›å‡ºQueue.Fullå¼‚å¸¸ã€‚</span><br><span class="line"><span class="number">2</span> q.getæ–¹æ³•å¯ä»¥ä»é˜Ÿåˆ—è¯»å–å¹¶ä¸”åˆ é™¤ä¸€ä¸ªå…ƒç´ ã€‚åŒæ ·ï¼Œgetæ–¹æ³•æœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼šblockedå’Œtimeoutã€‚å¦‚æœblockedä¸º<span class="literal">True</span>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œå¹¶ä¸”timeoutä¸ºæ­£å€¼ï¼Œé‚£ä¹ˆåœ¨ç­‰å¾…æ—¶é—´å†…æ²¡æœ‰å–åˆ°ä»»ä½•å…ƒç´ ï¼Œä¼šæŠ›å‡ºQueue.Emptyå¼‚å¸¸ã€‚å¦‚æœblockedä¸º<span class="literal">False</span>ï¼Œæœ‰ä¸¤ç§æƒ…å†µå­˜åœ¨ï¼Œå¦‚æœQueueæœ‰ä¸€ä¸ªå€¼å¯ç”¨ï¼Œåˆ™ç«‹å³è¿”å›è¯¥å€¼ï¼Œå¦åˆ™ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™ç«‹å³æŠ›å‡ºQueue.Emptyå¼‚å¸¸.</span><br><span class="line"><span class="number">3</span>  </span><br><span class="line"><span class="number">4</span> q.get_nowait():åŒq.get(<span class="literal">False</span>)</span><br><span class="line"><span class="number">5</span> q.put_nowait():åŒq.put(<span class="literal">False</span>)</span><br><span class="line"><span class="number">6</span> </span><br><span class="line"><span class="number">7</span> q.empty():è°ƒç”¨æ­¤æ–¹æ³•æ—¶qä¸ºç©ºåˆ™è¿”å›<span class="literal">True</span>ï¼Œè¯¥ç»“æœä¸å¯é ï¼Œæ¯”å¦‚åœ¨è¿”å›<span class="literal">True</span>çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­åˆåŠ å…¥äº†é¡¹ç›®ã€‚</span><br><span class="line"><span class="number">8</span> q.full()ï¼šè°ƒç”¨æ­¤æ–¹æ³•æ—¶qå·²æ»¡åˆ™è¿”å›<span class="literal">True</span>ï¼Œè¯¥ç»“æœä¸å¯é ï¼Œæ¯”å¦‚åœ¨è¿”å›<span class="literal">True</span>çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­çš„é¡¹ç›®è¢«å–èµ°ã€‚</span><br><span class="line"><span class="number">9</span> q.qsize():è¿”å›é˜Ÿåˆ—ä¸­ç›®å‰é¡¹ç›®çš„æ­£ç¡®æ•°é‡ï¼Œç»“æœä¹Ÿä¸å¯é ï¼Œç†ç”±åŒq.empty()å’Œq.full()ä¸€æ ·</span><br></pre></td></tr></table></figure>

<p>å…¶ä»–æ–¹æ³•(äº†è§£)ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> q.cancel_join_thread():ä¸ä¼šåœ¨è¿›ç¨‹é€€å‡ºæ—¶è‡ªåŠ¨è¿æ¥åå°çº¿ç¨‹ã€‚å¯ä»¥é˜²æ­¢join_thread()æ–¹æ³•é˜»å¡</span><br><span class="line"><span class="number">2</span> q.close():å…³é—­é˜Ÿåˆ—ï¼Œé˜²æ­¢é˜Ÿåˆ—ä¸­åŠ å…¥æ›´å¤šæ•°æ®ã€‚è°ƒç”¨æ­¤æ–¹æ³•ï¼Œåå°çº¿ç¨‹å°†ç»§ç»­å†™å…¥é‚£äº›å·²ç»å…¥é˜Ÿåˆ—ä½†å°šæœªå†™å…¥çš„æ•°æ®ï¼Œä½†å°†åœ¨æ­¤æ–¹æ³•å®Œæˆæ—¶é©¬ä¸Šå…³é—­ã€‚å¦‚æœqè¢«åƒåœ¾æ”¶é›†ï¼Œå°†è°ƒç”¨æ­¤æ–¹æ³•ã€‚å…³é—­é˜Ÿåˆ—ä¸ä¼šåœ¨é˜Ÿåˆ—ä½¿ç”¨è€…ä¸­äº§ç”Ÿä»»ä½•ç±»å‹çš„æ•°æ®ç»“æŸä¿¡å·æˆ–å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸä¸ªä½¿ç”¨è€…æ­£åœ¨è¢«é˜»å¡åœ¨get()æ“ä½œä¸Šï¼Œå…³é—­ç”Ÿäº§è€…ä¸­çš„é˜Ÿåˆ—ä¸ä¼šå¯¼è‡´get()æ–¹æ³•è¿”å›é”™è¯¯ã€‚</span><br><span class="line"><span class="number">3</span> q.join_thread()ï¼šè¿æ¥é˜Ÿåˆ—çš„åå°çº¿ç¨‹ã€‚æ­¤æ–¹æ³•ç”¨äºåœ¨è°ƒç”¨q.close()æ–¹æ³•ä¹‹åï¼Œç­‰å¾…æ‰€æœ‰é˜Ÿåˆ—é¡¹è¢«æ¶ˆè€—ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤æ–¹æ³•ç”±ä¸æ˜¯qçš„åŸå§‹åˆ›å»ºè€…çš„æ‰€æœ‰è¿›ç¨‹è°ƒç”¨ã€‚è°ƒç”¨q.cancel_join_threadæ–¹æ³•å¯ä»¥ç¦æ­¢è¿™ç§è¡Œä¸º</span><br></pre></td></tr></table></figure>

<p><strong>åº”ç”¨ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">multiprocessingæ¨¡å—æ”¯æŒè¿›ç¨‹é—´é€šä¿¡çš„ä¸¤ç§ä¸»è¦å½¢å¼:ç®¡é“å’Œé˜Ÿåˆ—</span></span><br><span class="line"><span class="string">éƒ½æ˜¯åŸºäºæ¶ˆæ¯ä¼ é€’å®ç°çš„,ä½†æ˜¯é˜Ÿåˆ—æ¥å£</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Queue</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">q=Queue(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#put ,get ,put_nowait,get_nowait,full,empty</span></span><br><span class="line">q.put(<span class="number">3</span>)</span><br><span class="line">q.put(<span class="number">3</span>)</span><br><span class="line">q.put(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(q.full()) <span class="comment">#æ»¡äº†</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(q.get())</span><br><span class="line"><span class="built_in">print</span>(q.get())</span><br><span class="line"><span class="built_in">print</span>(q.get())</span><br><span class="line"><span class="built_in">print</span>(q.empty()) <span class="comment">#ç©ºäº†</span></span><br></pre></td></tr></table></figure>

<p><strong>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</strong></p>
<p><em>åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ä½¿ç”¨ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼èƒ½å¤Ÿè§£å†³ç»å¤§å¤šæ•°å¹¶å‘é—®é¢˜ã€‚è¯¥æ¨¡å¼é€šè¿‡å¹³è¡¡ç”Ÿäº§çº¿ç¨‹å’Œæ¶ˆè´¹çº¿ç¨‹çš„å·¥ä½œèƒ½åŠ›æ¥æé«˜ç¨‹åºçš„æ•´ä½“å¤„ç†æ•°æ®çš„é€Ÿåº¦ã€‚</em></p>
<p><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼</strong></p>
<p><em>åœ¨çº¿ç¨‹ä¸–ç•Œé‡Œï¼Œç”Ÿäº§è€…å°±æ˜¯ç”Ÿäº§æ•°æ®çš„çº¿ç¨‹ï¼Œæ¶ˆè´¹è€…å°±æ˜¯æ¶ˆè´¹æ•°æ®çš„çº¿ç¨‹ã€‚åœ¨å¤šçº¿ç¨‹å¼€å‘å½“ä¸­ï¼Œå¦‚æœç”Ÿäº§è€…å¤„ç†é€Ÿåº¦å¾ˆå¿«ï¼Œè€Œæ¶ˆè´¹è€…å¤„ç†é€Ÿåº¦å¾ˆæ…¢ï¼Œé‚£ä¹ˆç”Ÿäº§è€…å°±å¿…é¡»ç­‰å¾…æ¶ˆè´¹è€…å¤„ç†å®Œï¼Œæ‰èƒ½ç»§ç»­ç”Ÿäº§æ•°æ®ã€‚åŒæ ·çš„é“ç†ï¼Œå¦‚æœæ¶ˆè´¹è€…çš„å¤„ç†èƒ½åŠ›å¤§äºç”Ÿäº§è€…ï¼Œé‚£ä¹ˆæ¶ˆè´¹è€…å°±å¿…é¡»ç­‰å¾…ç”Ÿäº§è€…ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜äºæ˜¯å¼•å…¥äº†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼ã€‚</em></p>
<p><strong>ä»€ä¹ˆæ˜¯ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼</strong></p>
<p><em>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼æ˜¯é€šè¿‡ä¸€ä¸ªå®¹å™¨æ¥è§£å†³ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å¼ºè€¦åˆé—®é¢˜ã€‚ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å½¼æ­¤ä¹‹é—´ä¸ç›´æ¥é€šè®¯ï¼Œè€Œé€šè¿‡é˜»å¡é˜Ÿåˆ—æ¥è¿›è¡Œé€šè®¯ï¼Œæ‰€ä»¥ç”Ÿäº§è€…ç”Ÿäº§å®Œæ•°æ®ä¹‹åä¸ç”¨ç­‰å¾…æ¶ˆè´¹è€…å¤„ç†ï¼Œç›´æ¥æ‰”ç»™é˜»å¡é˜Ÿåˆ—ï¼Œæ¶ˆè´¹è€…ä¸æ‰¾ç”Ÿäº§è€…è¦æ•°æ®ï¼Œè€Œæ˜¯ç›´æ¥ä»é˜»å¡é˜Ÿåˆ—é‡Œå–ï¼Œé˜»å¡é˜Ÿåˆ—å°±ç›¸å½“äºä¸€ä¸ªç¼“å†²åŒºï¼Œå¹³è¡¡äº†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å¤„ç†èƒ½åŠ›ã€‚</em></p>
<p><em>åŸºäºé˜Ÿåˆ—å®ç°ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹</em></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Queue</span><br><span class="line"><span class="keyword">import</span> time,random,os</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">consumer</span>(<span class="params">q</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        res=q.get()</span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[45m%s åƒ %s\033[0m&#x27;</span> %(os.getpid(),res))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">producer</span>(<span class="params">q</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        res=<span class="string">&#x27;åŒ…å­%s&#x27;</span> %i</span><br><span class="line">        q.put(res)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[44m%s ç”Ÿäº§äº† %s\033[0m&#x27;</span> %(os.getpid(),res))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    q=Queue()</span><br><span class="line">    <span class="comment">#ç”Ÿäº§è€…ä»¬:å³å¨å¸ˆä»¬</span></span><br><span class="line">    p1=Process(target=producer,args=(q,))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#æ¶ˆè´¹è€…ä»¬:å³åƒè´§ä»¬</span></span><br><span class="line">    c1=Process(target=consumer,args=(q,))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å¼€å§‹</span></span><br><span class="line">    p1.start()</span><br><span class="line">    c1.start()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹æ€»ç»“</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹æ€»ç»“</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#ç¨‹åºä¸­æœ‰ä¸¤ç±»è§’è‰²</span></span><br><span class="line">        ä¸€ç±»è´Ÿè´£ç”Ÿäº§æ•°æ®ï¼ˆç”Ÿäº§è€…ï¼‰</span><br><span class="line">        ä¸€ç±»è´Ÿè´£å¤„ç†æ•°æ®ï¼ˆæ¶ˆè´¹è€…ï¼‰</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å¼•å…¥ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ä¸ºäº†è§£å†³çš„é—®é¢˜æ˜¯ï¼š</span></span><br><span class="line">        å¹³è¡¡ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ä¹‹é—´çš„å·¥ä½œèƒ½åŠ›ï¼Œä»è€Œæé«˜ç¨‹åºæ•´ä½“å¤„ç†æ•°æ®çš„é€Ÿåº¦</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å¦‚ä½•å®ç°ï¼š</span></span><br><span class="line">        ç”Ÿäº§è€…&lt;--&gt;é˜Ÿåˆ—&lt;â€”â€”&gt;æ¶ˆè´¹è€…</span><br><span class="line">    <span class="comment">#ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹å®ç°ç±»ç¨‹åºçš„è§£è€¦å’Œ</span></span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶çš„é—®é¢˜æ˜¯ä¸»è¿›ç¨‹æ°¸è¿œä¸ä¼šç»“æŸï¼ŒåŸå› æ˜¯ï¼šç”Ÿäº§è€…påœ¨ç”Ÿäº§å®Œåå°±ç»“æŸäº†ï¼Œä½†æ˜¯æ¶ˆè´¹è€…cåœ¨å–ç©ºäº†qä¹‹åï¼Œåˆ™ä¸€ç›´å¤„äºæ­»å¾ªç¯ä¸­ä¸”å¡åœ¨q.get()è¿™ä¸€æ­¥ã€‚</p>
<p>è§£å†³æ–¹å¼æ— éæ˜¯è®©ç”Ÿäº§è€…åœ¨ç”Ÿäº§å®Œæ¯•åï¼Œå¾€é˜Ÿåˆ—ä¸­å†å‘ä¸€ä¸ªç»“æŸä¿¡å·ï¼Œè¿™æ ·æ¶ˆè´¹è€…åœ¨æ¥æ”¶åˆ°ç»“æŸä¿¡å·åå°±å¯ä»¥breakå‡ºæ­»å¾ªç¯</p>
<p>ç”Ÿäº§è€…åœ¨ç”Ÿäº§å®Œæ¯•åå‘é€ç»“æŸä¿¡å·None</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Queue</span><br><span class="line"><span class="keyword">import</span> time,random,os</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">consumer</span>(<span class="params">q</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        res=q.get()</span><br><span class="line">        <span class="keyword">if</span> res <span class="keyword">is</span> <span class="literal">None</span>:<span class="keyword">break</span> <span class="comment">#æ”¶åˆ°ç»“æŸä¿¡å·åˆ™ç»“æŸ</span></span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[45m%s åƒ %s\033[0m&#x27;</span> %(os.getpid(),res))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">producer</span>(<span class="params">q</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        res=<span class="string">&#x27;åŒ…å­%s&#x27;</span> %i</span><br><span class="line">        q.put(res)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[44m%s ç”Ÿäº§äº† %s\033[0m&#x27;</span> %(os.getpid(),res))</span><br><span class="line">    q.put(<span class="literal">None</span>) <span class="comment">#å‘é€ç»“æŸä¿¡å·</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    q=Queue()</span><br><span class="line">    <span class="comment">#ç”Ÿäº§è€…ä»¬:å³å¨å¸ˆä»¬</span></span><br><span class="line">    p1=Process(target=producer,args=(q,))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#æ¶ˆè´¹è€…ä»¬:å³åƒè´§ä»¬</span></span><br><span class="line">    c1=Process(target=consumer,args=(q,))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å¼€å§‹</span></span><br><span class="line">    p1.start()</span><br><span class="line">    c1.start()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šç»“æŸä¿¡å·Noneï¼Œä¸ä¸€å®šè¦ç”±ç”Ÿäº§è€…å‘ï¼Œä¸»è¿›ç¨‹é‡ŒåŒæ ·å¯ä»¥å‘ï¼Œä½†ä¸»è¿›ç¨‹éœ€è¦ç­‰ç”Ÿäº§è€…ç»“æŸåæ‰åº”è¯¥å‘é€è¯¥ä¿¡å·</p>
<p>ä¸»è¿›ç¨‹åœ¨ç”Ÿäº§è€…ç”Ÿäº§å®Œæ¯•åå‘é€ç»“æŸä¿¡å·None</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Queue</span><br><span class="line"><span class="keyword">import</span> time,random,os</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">consumer</span>(<span class="params">q</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        res=q.get()</span><br><span class="line">        <span class="keyword">if</span> res <span class="keyword">is</span> <span class="literal">None</span>:<span class="keyword">break</span> <span class="comment">#æ”¶åˆ°ç»“æŸä¿¡å·åˆ™ç»“æŸ</span></span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[45m%s åƒ %s\033[0m&#x27;</span> %(os.getpid(),res))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">producer</span>(<span class="params">q</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        res=<span class="string">&#x27;åŒ…å­%s&#x27;</span> %i</span><br><span class="line">        q.put(res)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[44m%s ç”Ÿäº§äº† %s\033[0m&#x27;</span> %(os.getpid(),res))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    q=Queue()</span><br><span class="line">    <span class="comment">#ç”Ÿäº§è€…ä»¬:å³å¨å¸ˆä»¬</span></span><br><span class="line">    p1=Process(target=producer,args=(q,))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#æ¶ˆè´¹è€…ä»¬:å³åƒè´§ä»¬</span></span><br><span class="line">    c1=Process(target=consumer,args=(q,))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å¼€å§‹</span></span><br><span class="line">    p1.start()</span><br><span class="line">    c1.start()</span><br><span class="line"></span><br><span class="line">    p1.join()</span><br><span class="line">    q.put(<span class="literal">None</span>) <span class="comment">#å‘é€ç»“æŸä¿¡å·</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>ä½†ä¸Šè¿°è§£å†³æ–¹å¼ï¼Œåœ¨æœ‰å¤šä¸ªç”Ÿäº§è€…å’Œå¤šä¸ªæ¶ˆè´¹è€…æ—¶ï¼Œæˆ‘ä»¬åˆ™éœ€è¦ç”¨ä¸€ä¸ªå¾ˆlowçš„æ–¹å¼å»è§£å†³</p>
<p>æœ‰å‡ ä¸ªæ¶ˆè´¹è€…å°±éœ€è¦å‘é€å‡ æ¬¡ç»“æŸä¿¡å·ï¼šç›¸å½“low</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Queue</span><br><span class="line"><span class="keyword">import</span> time,random,os</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">consumer</span>(<span class="params">q</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        res=q.get()</span><br><span class="line">        <span class="keyword">if</span> res <span class="keyword">is</span> <span class="literal">None</span>:<span class="keyword">break</span> <span class="comment">#æ”¶åˆ°ç»“æŸä¿¡å·åˆ™ç»“æŸ</span></span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[45m%s åƒ %s\033[0m&#x27;</span> %(os.getpid(),res))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">producer</span>(<span class="params">name,q</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        res=<span class="string">&#x27;%s%s&#x27;</span> %(name,i)</span><br><span class="line">        q.put(res)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[44m%s ç”Ÿäº§äº† %s\033[0m&#x27;</span> %(os.getpid(),res))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    q=Queue()</span><br><span class="line">    <span class="comment">#ç”Ÿäº§è€…ä»¬:å³å¨å¸ˆä»¬</span></span><br><span class="line">    p1=Process(target=producer,args=(<span class="string">&#x27;åŒ…å­&#x27;</span>,q))</span><br><span class="line">    p2=Process(target=producer,args=(<span class="string">&#x27;éª¨å¤´&#x27;</span>,q))</span><br><span class="line">    p3=Process(target=producer,args=(<span class="string">&#x27;æ³”æ°´&#x27;</span>,q))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#æ¶ˆè´¹è€…ä»¬:å³åƒè´§ä»¬</span></span><br><span class="line">    c1=Process(target=consumer,args=(q,))</span><br><span class="line">    c2=Process(target=consumer,args=(q,))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å¼€å§‹</span></span><br><span class="line">    p1.start()</span><br><span class="line">    p2.start()</span><br><span class="line">    p3.start()</span><br><span class="line">    c1.start()</span><br><span class="line"></span><br><span class="line">    p1.join() <span class="comment">#å¿…é¡»ä¿è¯ç”Ÿäº§è€…å…¨éƒ¨ç”Ÿäº§å®Œæ¯•,æ‰åº”è¯¥å‘é€ç»“æŸä¿¡å·</span></span><br><span class="line">    p2.join()</span><br><span class="line">    p3.join()</span><br><span class="line">    q.put(<span class="literal">None</span>) <span class="comment">#æœ‰å‡ ä¸ªæ¶ˆè´¹è€…å°±åº”è¯¥å‘é€å‡ æ¬¡ç»“æŸä¿¡å·None</span></span><br><span class="line">    q.put(<span class="literal">None</span>) <span class="comment">#å‘é€ç»“æŸä¿¡å·</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>å…¶å®æˆ‘ä»¬çš„æ€è·¯æ— éæ˜¯å‘é€ç»“æŸä¿¡å·è€Œå·²ï¼Œæœ‰å¦å¤–ä¸€ç§é˜Ÿåˆ—æä¾›äº†è¿™ç§æœºåˆ¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#JoinableQueue([maxsize])ï¼šè¿™å°±åƒæ˜¯ä¸€ä¸ªQueueå¯¹è±¡ï¼Œä½†é˜Ÿåˆ—å…è®¸é¡¹ç›®çš„ä½¿ç”¨è€…é€šçŸ¥ç”Ÿæˆè€…é¡¹ç›®å·²ç»è¢«æˆåŠŸå¤„ç†ã€‚é€šçŸ¥è¿›ç¨‹æ˜¯ä½¿ç”¨å…±äº«çš„ä¿¡å·å’Œæ¡ä»¶å˜é‡æ¥å®ç°çš„ã€‚</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">#å‚æ•°ä»‹ç»ï¼š</span></span><br><span class="line">    maxsizeæ˜¯é˜Ÿåˆ—ä¸­å…è®¸æœ€å¤§é¡¹æ•°ï¼Œçœç•¥åˆ™æ— å¤§å°é™åˆ¶ã€‚    </span><br><span class="line">ã€€ <span class="comment">#æ–¹æ³•ä»‹ç»ï¼š</span></span><br><span class="line">    JoinableQueueçš„å®ä¾‹pé™¤äº†ä¸Queueå¯¹è±¡ç›¸åŒçš„æ–¹æ³•ä¹‹å¤–è¿˜å…·æœ‰ï¼š</span><br><span class="line">    q.task_done()ï¼šä½¿ç”¨è€…ä½¿ç”¨æ­¤æ–¹æ³•å‘å‡ºä¿¡å·ï¼Œè¡¨ç¤ºq.get()çš„è¿”å›é¡¹ç›®å·²ç»è¢«å¤„ç†ã€‚å¦‚æœè°ƒç”¨æ­¤æ–¹æ³•çš„æ¬¡æ•°å¤§äºä»é˜Ÿåˆ—ä¸­åˆ é™¤é¡¹ç›®çš„æ•°é‡ï¼Œå°†å¼•å‘ValueErrorå¼‚å¸¸</span><br><span class="line">    q.join():ç”Ÿäº§è€…è°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œé˜»å¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æ‰€æœ‰çš„é¡¹ç›®å‡è¢«å¤„ç†ã€‚é˜»å¡å°†æŒç»­åˆ°é˜Ÿåˆ—ä¸­çš„æ¯ä¸ªé¡¹ç›®å‡è°ƒç”¨q.task_doneï¼ˆï¼‰æ–¹æ³•ä¸ºæ­¢</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,JoinableQueue</span><br><span class="line"><span class="keyword">import</span> time,random,os</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">consumer</span>(<span class="params">q</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        res=q.get()</span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[45m%s åƒ %s\033[0m&#x27;</span> %(os.getpid(),res))</span><br><span class="line"></span><br><span class="line">        q.task_done() <span class="comment">#å‘q.join()å‘é€ä¸€æ¬¡ä¿¡å·,è¯æ˜ä¸€ä¸ªæ•°æ®å·²ç»è¢«å–èµ°äº†</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">producer</span>(<span class="params">name,q</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        res=<span class="string">&#x27;%s%s&#x27;</span> %(name,i)</span><br><span class="line">        q.put(res)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[44m%s ç”Ÿäº§äº† %s\033[0m&#x27;</span> %(os.getpid(),res))</span><br><span class="line">    q.join()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    q=JoinableQueue()</span><br><span class="line">    <span class="comment">#ç”Ÿäº§è€…ä»¬:å³å¨å¸ˆä»¬</span></span><br><span class="line">    p1=Process(target=producer,args=(<span class="string">&#x27;åŒ…å­&#x27;</span>,q))</span><br><span class="line">    p2=Process(target=producer,args=(<span class="string">&#x27;éª¨å¤´&#x27;</span>,q))</span><br><span class="line">    p3=Process(target=producer,args=(<span class="string">&#x27;æ³”æ°´&#x27;</span>,q))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#æ¶ˆè´¹è€…ä»¬:å³åƒè´§ä»¬</span></span><br><span class="line">    c1=Process(target=consumer,args=(q,))</span><br><span class="line">    c2=Process(target=consumer,args=(q,))</span><br><span class="line">    c1.daemon=<span class="literal">True</span></span><br><span class="line">    c2.daemon=<span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#å¼€å§‹</span></span><br><span class="line">    p_l=[p1,p2,p3,c1,c2]</span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> p_l:</span><br><span class="line">        p.start()</span><br><span class="line"></span><br><span class="line">    p1.join()</span><br><span class="line">    p2.join()</span><br><span class="line">    p3.join()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»&#x27;</span>) </span><br><span class="line"></span><br><span class="line">    <span class="comment">#ä¸»è¿›ç¨‹ç­‰---&gt;p1,p2,p3ç­‰----&gt;c1,c2</span></span><br><span class="line">    <span class="comment">#p1,p2,p3ç»“æŸäº†,è¯æ˜c1,c2è‚¯å®šå…¨éƒ½æ”¶å®Œäº†p1,p2,p3å‘åˆ°é˜Ÿåˆ—çš„æ•°æ®</span></span><br><span class="line">    <span class="comment">#å› è€Œc1,c2ä¹Ÿæ²¡æœ‰å­˜åœ¨çš„ä»·å€¼äº†,åº”è¯¥éšç€ä¸»è¿›ç¨‹çš„ç»“æŸè€Œç»“æŸ,æ‰€ä»¥è®¾ç½®æˆå®ˆæŠ¤è¿›ç¨‹</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¸ƒ-ç®¡é“"><a href="#ä¸ƒ-ç®¡é“" class="headerlink" title="ä¸ƒ ç®¡é“"></a>ä¸ƒ ç®¡é“</h3><p>è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰æ–¹å¼äºŒï¼šç®¡é“ï¼ˆä¸æ¨èä½¿ç”¨ï¼Œäº†è§£å³å¯ï¼‰</p>
<p>ä»‹ç»</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºç®¡é“çš„ç±»ï¼š</span></span><br><span class="line">Pipe([duplex]):åœ¨è¿›ç¨‹ä¹‹é—´åˆ›å»ºä¸€æ¡ç®¡é“ï¼Œå¹¶è¿”å›å…ƒç»„ï¼ˆconn1,conn2ï¼‰,å…¶ä¸­conn1ï¼Œconn2è¡¨ç¤ºç®¡é“ä¸¤ç«¯çš„è¿æ¥å¯¹è±¡ï¼Œå¼ºè°ƒä¸€ç‚¹ï¼šå¿…é¡»åœ¨äº§ç”ŸProcesså¯¹è±¡ä¹‹å‰äº§ç”Ÿç®¡é“</span><br><span class="line"><span class="comment">#å‚æ•°ä»‹ç»ï¼š</span></span><br><span class="line">dumplex:é»˜è®¤ç®¡é“æ˜¯å…¨åŒå·¥çš„ï¼Œå¦‚æœå°†duplexå°„æˆ<span class="literal">False</span>ï¼Œconn1åªèƒ½ç”¨äºæ¥æ”¶ï¼Œconn2åªèƒ½ç”¨äºå‘é€ã€‚</span><br><span class="line"><span class="comment">#ä¸»è¦æ–¹æ³•ï¼š</span></span><br><span class="line">    conn1.recv():æ¥æ”¶conn2.send(obj)å‘é€çš„å¯¹è±¡ã€‚å¦‚æœæ²¡æœ‰æ¶ˆæ¯å¯æ¥æ”¶ï¼Œrecvæ–¹æ³•ä¼šä¸€ç›´é˜»å¡ã€‚å¦‚æœè¿æ¥çš„å¦å¤–ä¸€ç«¯å·²ç»å…³é—­ï¼Œé‚£ä¹ˆrecvæ–¹æ³•ä¼šæŠ›å‡ºEOFErrorã€‚</span><br><span class="line">    conn1.send(obj):é€šè¿‡è¿æ¥å‘é€å¯¹è±¡ã€‚objæ˜¯ä¸åºåˆ—åŒ–å…¼å®¹çš„ä»»æ„å¯¹è±¡</span><br><span class="line"> <span class="comment">#å…¶ä»–æ–¹æ³•ï¼š</span></span><br><span class="line">conn1.close():å…³é—­è¿æ¥ã€‚å¦‚æœconn1è¢«åƒåœ¾å›æ”¶ï¼Œå°†è‡ªåŠ¨è°ƒç”¨æ­¤æ–¹æ³•</span><br><span class="line">conn1.fileno():è¿”å›è¿æ¥ä½¿ç”¨çš„æ•´æ•°æ–‡ä»¶æè¿°ç¬¦</span><br><span class="line">conn1.poll([timeout]):å¦‚æœè¿æ¥ä¸Šçš„æ•°æ®å¯ç”¨ï¼Œè¿”å›<span class="literal">True</span>ã€‚timeoutæŒ‡å®šç­‰å¾…çš„æœ€é•¿æ—¶é™ã€‚å¦‚æœçœç•¥æ­¤å‚æ•°ï¼Œæ–¹æ³•å°†ç«‹å³è¿”å›ç»“æœã€‚å¦‚æœå°†timeoutå°„æˆ<span class="literal">None</span>ï¼Œæ“ä½œå°†æ— é™æœŸåœ°ç­‰å¾…æ•°æ®åˆ°è¾¾ã€‚</span><br><span class="line"></span><br><span class="line">conn1.recv_bytes([maxlength]):æ¥æ”¶c.send_bytes()æ–¹æ³•å‘é€çš„ä¸€æ¡å®Œæ•´çš„å­—èŠ‚æ¶ˆæ¯ã€‚maxlengthæŒ‡å®šè¦æ¥æ”¶çš„æœ€å¤§å­—èŠ‚æ•°ã€‚å¦‚æœè¿›å…¥çš„æ¶ˆæ¯ï¼Œè¶…è¿‡äº†è¿™ä¸ªæœ€å¤§å€¼ï¼Œå°†å¼•å‘IOErrorå¼‚å¸¸ï¼Œå¹¶ä¸”åœ¨è¿æ¥ä¸Šæ— æ³•è¿›è¡Œè¿›ä¸€æ­¥è¯»å–ã€‚å¦‚æœè¿æ¥çš„å¦å¤–ä¸€ç«¯å·²ç»å…³é—­ï¼Œå†ä¹Ÿä¸å­˜åœ¨ä»»ä½•æ•°æ®ï¼Œå°†å¼•å‘EOFErrorå¼‚å¸¸ã€‚</span><br><span class="line">conn.send_bytes(buffer [, offset [, size]])ï¼šé€šè¿‡è¿æ¥å‘é€å­—èŠ‚æ•°æ®ç¼“å†²åŒºï¼Œbufferæ˜¯æ”¯æŒç¼“å†²åŒºæ¥å£çš„ä»»æ„å¯¹è±¡ï¼Œoffsetæ˜¯ç¼“å†²åŒºä¸­çš„å­—èŠ‚åç§»é‡ï¼Œè€Œsizeæ˜¯è¦å‘é€å­—èŠ‚æ•°ã€‚ç»“æœæ•°æ®ä»¥å•æ¡æ¶ˆæ¯çš„å½¢å¼å‘å‡ºï¼Œç„¶åè°ƒç”¨c.recv_bytes()å‡½æ•°è¿›è¡Œæ¥æ”¶    </span><br><span class="line"></span><br><span class="line">conn1.recv_bytes_into(buffer [, offset]):æ¥æ”¶ä¸€æ¡å®Œæ•´çš„å­—èŠ‚æ¶ˆæ¯ï¼Œå¹¶æŠŠå®ƒä¿å­˜åœ¨bufferå¯¹è±¡ä¸­ï¼Œè¯¥å¯¹è±¡æ”¯æŒå¯å†™å…¥çš„ç¼“å†²åŒºæ¥å£ï¼ˆå³<span class="built_in">bytearray</span>å¯¹è±¡æˆ–ç±»ä¼¼çš„å¯¹è±¡ï¼‰ã€‚offsetæŒ‡å®šç¼“å†²åŒºä¸­æ”¾ç½®æ¶ˆæ¯å¤„çš„å­—èŠ‚ä½ç§»ã€‚è¿”å›å€¼æ˜¯æ”¶åˆ°çš„å­—èŠ‚æ•°ã€‚å¦‚æœæ¶ˆæ¯é•¿åº¦å¤§äºå¯ç”¨çš„ç¼“å†²åŒºç©ºé—´ï¼Œå°†å¼•å‘BufferTooShortå¼‚å¸¸ã€‚</span><br></pre></td></tr></table></figure>

<p>åŸºäºç®¡é“å®ç°è¿›ç¨‹é—´é€šä¿¡ï¼ˆä¸é˜Ÿåˆ—çš„æ–¹å¼æ˜¯ç±»ä¼¼çš„ï¼Œé˜Ÿåˆ—å°±æ˜¯ç®¡é“åŠ é”å®ç°çš„ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Pipe</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time,os</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">consumer</span>(<span class="params">p,name</span>):</span></span><br><span class="line">    left,right=p</span><br><span class="line">    left.close()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            baozi=right.recv()</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;%s æ”¶åˆ°åŒ…å­:%s&#x27;</span> %(name,baozi))</span><br><span class="line">        <span class="keyword">except</span> EOFError:</span><br><span class="line">            right.close()</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">producer</span>(<span class="params">seq,p</span>):</span></span><br><span class="line">    left,right=p</span><br><span class="line">    right.close()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> seq:</span><br><span class="line">        left.send(i)</span><br><span class="line">        <span class="comment"># time.sleep(1)</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        left.close()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    left,right=Pipe()</span><br><span class="line">    c1=Process(target=consumer,args=((left,right),<span class="string">&#x27;c1&#x27;</span>))</span><br><span class="line">    c1.start()</span><br><span class="line">    seq=(i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line">    producer(seq,(left,right))</span><br><span class="line">    right.close()</span><br><span class="line">    left.close()</span><br><span class="line">    c1.join()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»è¿›ç¨‹&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>*<em>æ³¨æ„ï¼šç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…éƒ½æ²¡æœ‰ä½¿ç”¨ç®¡é“çš„æŸä¸ªç«¯ç‚¹ï¼Œå°±åº”è¯¥å°†å…¶å…³é—­ï¼Œå¦‚åœ¨ç”Ÿäº§è€…ä¸­å…³é—­ç®¡é“çš„å³ç«¯ï¼Œåœ¨æ¶ˆè´¹è€…ä¸­å…³é—­ç®¡é“çš„å·¦ç«¯ã€‚å¦‚æœå¿˜è®°æ‰§è¡Œè¿™äº›æ­¥éª¤ï¼Œç¨‹åºå¯èƒ½å†æ¶ˆè´¹è€…ä¸­çš„recv*</em>()*<em>æ“ä½œä¸ŠæŒ‚èµ·ã€‚ç®¡é“æ˜¯ç”±æ“ä½œç³»ç»Ÿè¿›è¡Œå¼•ç”¨è®¡æ•°çš„,å¿…é¡»åœ¨æ‰€æœ‰è¿›ç¨‹ä¸­å…³é—­ç®¡é“åæ‰èƒ½ç”Ÿäº§EOFErrorå¼‚å¸¸ã€‚å› æ­¤åœ¨ç”Ÿäº§è€…ä¸­å…³é—­ç®¡é“ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœï¼Œä»˜è´¹æ¶ˆè´¹è€…ä¸­ä¹Ÿå…³é—­äº†ç›¸åŒçš„ç®¡é“ç«¯ç‚¹ã€‚</em>*</p>
<p>ç®¡é“å¯ä»¥ç”¨äºåŒå‘é€šä¿¡ï¼Œåˆ©ç”¨é€šå¸¸åœ¨å®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨ä¸­ä½¿ç”¨çš„è¯·æ±‚ï¼å“åº”æ¨¡å‹æˆ–è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œå°±å¯ä»¥ä½¿ç”¨ç®¡é“ç¼–å†™ä¸è¿›ç¨‹äº¤äº’çš„ç¨‹åº</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Pipe</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time,os</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">adder</span>(<span class="params">p,name</span>):</span></span><br><span class="line">    server,client=p</span><br><span class="line">    client.close()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            x,y=server.recv()</span><br><span class="line">        <span class="keyword">except</span> EOFError:</span><br><span class="line">            server.close()</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        res=x+y</span><br><span class="line">        server.send(res)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;server done&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    server,client=Pipe()</span><br><span class="line"></span><br><span class="line">    c1=Process(target=adder,args=((server,client),<span class="string">&#x27;c1&#x27;</span>))</span><br><span class="line">    c1.start()</span><br><span class="line"></span><br><span class="line">    server.close()</span><br><span class="line"></span><br><span class="line">    client.send((<span class="number">10</span>,<span class="number">20</span>))</span><br><span class="line">    <span class="built_in">print</span>(client.recv())</span><br><span class="line">    client.close()</span><br><span class="line"></span><br><span class="line">    c1.join()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»è¿›ç¨‹&#x27;</span>)</span><br><span class="line"><span class="comment">#æ³¨æ„ï¼šsend()å’Œrecv()æ–¹æ³•ä½¿ç”¨pickleæ¨¡å—å¯¹å¯¹è±¡è¿›è¡Œåºåˆ—åŒ–ã€‚</span></span><br></pre></td></tr></table></figure>

<h3 id="å…«-å…±äº«æ•°æ®"><a href="#å…«-å…±äº«æ•°æ®" class="headerlink" title="å…« å…±äº«æ•°æ®"></a>å…« å…±äº«æ•°æ®</h3><p>å±•æœ›æœªæ¥ï¼ŒåŸºäºæ¶ˆæ¯ä¼ é€’çš„å¹¶å‘ç¼–ç¨‹æ˜¯å¤§åŠ¿æ‰€è¶‹</p>
<p>å³ä¾¿æ˜¯ä½¿ç”¨çº¿ç¨‹ï¼Œæ¨èåšæ³•ä¹Ÿæ˜¯å°†ç¨‹åºè®¾è®¡ä¸ºå¤§é‡ç‹¬ç«‹çš„çº¿ç¨‹é›†åˆ</p>
<p>é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—äº¤æ¢æ•°æ®ã€‚è¿™æ ·æå¤§åœ°å‡å°‘äº†å¯¹ä½¿ç”¨é”å®šå’Œå…¶ä»–åŒæ­¥æ‰‹æ®µçš„éœ€æ±‚ï¼Œ</p>
<p>è¿˜å¯ä»¥æ‰©å±•åˆ°åˆ†å¸ƒå¼ç³»ç»Ÿä¸­</p>
<p><strong>è¿›ç¨‹é—´é€šä¿¡åº”è¯¥å°½é‡é¿å…ä½¿ç”¨æœ¬èŠ‚æ‰€è®²çš„å…±äº«æ•°æ®çš„æ–¹å¼</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">è¿›ç¨‹é—´æ•°æ®æ˜¯ç‹¬ç«‹çš„ï¼Œå¯ä»¥å€ŸåŠ©äºé˜Ÿåˆ—æˆ–ç®¡é“å®ç°é€šä¿¡ï¼ŒäºŒè€…éƒ½æ˜¯åŸºäºæ¶ˆæ¯ä¼ é€’çš„</span><br><span class="line"></span><br><span class="line">è™½ç„¶è¿›ç¨‹é—´æ•°æ®ç‹¬ç«‹ï¼Œä½†å¯ä»¥é€šè¿‡Managerå®ç°æ•°æ®å…±äº«ï¼Œäº‹å®ä¸ŠManagerçš„åŠŸèƒ½è¿œä¸æ­¢äºæ­¤</span><br><span class="line"></span><br><span class="line">A manager <span class="built_in">object</span> returned by Manager() controls a server process which holds Python objects <span class="keyword">and</span> allows other processes to manipulate them using proxies.</span><br><span class="line"></span><br><span class="line">A manager returned by Manager() will support types <span class="built_in">list</span>, <span class="built_in">dict</span>, Namespace, Lock, RLock, Semaphore, BoundedSemaphore, Condition, Event, Barrier, Queue, Value <span class="keyword">and</span> Array. For example,</span><br></pre></td></tr></table></figure>

<p>è¿›ç¨‹ä¹‹é—´æ“ä½œå…±äº«çš„æ•°æ®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Manager,Process,Lock</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span>(<span class="params">d,lock</span>):</span></span><br><span class="line">    <span class="comment"># with lock: #ä¸åŠ é”è€Œæ“ä½œå…±äº«çš„æ•°æ®,è‚¯å®šä¼šå‡ºç°æ•°æ®é”™ä¹±</span></span><br><span class="line">        d[<span class="string">&#x27;count&#x27;</span>]-=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    lock=Lock()</span><br><span class="line">    <span class="keyword">with</span> Manager() <span class="keyword">as</span> m:</span><br><span class="line">        dic=m.<span class="built_in">dict</span>(&#123;<span class="string">&#x27;count&#x27;</span>:<span class="number">100</span>&#125;)</span><br><span class="line">        p_l=[]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">            p=Process(target=work,args=(dic,lock))</span><br><span class="line">            p_l.append(p)</span><br><span class="line">            p.start()</span><br><span class="line">        <span class="keyword">for</span> p <span class="keyword">in</span> p_l:</span><br><span class="line">            p.join()</span><br><span class="line">        <span class="built_in">print</span>(dic)</span><br><span class="line">        <span class="comment">#&#123;&#x27;count&#x27;: 94&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¹-ä¿¡å·é‡-äº†è§£ï¼‰"><a href="#ä¹-ä¿¡å·é‡-äº†è§£ï¼‰" class="headerlink" title="ä¹ ä¿¡å·é‡(äº†è§£ï¼‰"></a>ä¹ ä¿¡å·é‡(äº†è§£ï¼‰</h3><p>ä¿¡å·é‡Semahporeï¼ˆåŒçº¿ç¨‹ä¸€æ ·ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">äº’æ–¥é” åŒæ—¶åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ›´æ”¹æ•°æ®ï¼Œè€ŒSemaphoreæ˜¯åŒæ—¶å…è®¸ä¸€å®šæ•°é‡çš„çº¿ç¨‹æ›´æ”¹æ•°æ® ï¼Œæ¯”å¦‚å•æ‰€æœ‰<span class="number">3</span>ä¸ªå‘ï¼Œé‚£æœ€å¤šåªå…è®¸<span class="number">3</span>ä¸ªäººä¸Šå•æ‰€ï¼Œåé¢çš„äººåªèƒ½ç­‰é‡Œé¢æœ‰äººå‡ºæ¥äº†æ‰èƒ½å†è¿›å»ï¼Œå¦‚æœæŒ‡å®šä¿¡å·é‡ä¸º<span class="number">3</span>ï¼Œé‚£ä¹ˆæ¥ä¸€ä¸ªäººè·å¾—ä¸€æŠŠé”ï¼Œè®¡æ•°åŠ <span class="number">1</span>ï¼Œå½“è®¡æ•°ç­‰äº<span class="number">3</span>æ—¶ï¼Œåé¢çš„äººå‡éœ€è¦ç­‰å¾…ã€‚ä¸€æ—¦é‡Šæ”¾ï¼Œå°±æœ‰äººå¯ä»¥è·å¾—ä¸€æŠŠé”</span><br><span class="line"></span><br><span class="line">    ä¿¡å·é‡ä¸è¿›ç¨‹æ± çš„æ¦‚å¿µå¾ˆåƒï¼Œä½†æ˜¯è¦åŒºåˆ†å¼€ï¼Œä¿¡å·é‡æ¶‰åŠåˆ°åŠ é”çš„æ¦‚å¿µ</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Semaphore</span><br><span class="line"><span class="keyword">import</span> time,random</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">go_wc</span>(<span class="params">sem,user</span>):</span></span><br><span class="line">    sem.acquire()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s å åˆ°ä¸€ä¸ªèŒ…å‘&#x27;</span> %user)</span><br><span class="line">    time.sleep(random.randint(<span class="number">0</span>,<span class="number">3</span>)) <span class="comment">#æ¨¡æ‹Ÿæ¯ä¸ªäººæ‹‰å±é€Ÿåº¦ä¸ä¸€æ ·ï¼Œ0ä»£è¡¨æœ‰çš„äººè¹²ä¸‹å°±èµ·æ¥äº†</span></span><br><span class="line">    sem.release()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    sem=Semaphore(<span class="number">5</span>)</span><br><span class="line">    p_l=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">13</span>):</span><br><span class="line">        p=Process(target=go_wc,args=(sem,<span class="string">&#x27;user%s&#x27;</span> %i,))</span><br><span class="line">        p.start()</span><br><span class="line">        p_l.append(p)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> p_l:</span><br><span class="line">        i.join()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;============ã€‹&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="å-äº‹ä»¶-äº†è§£"><a href="#å-äº‹ä»¶-äº†è§£" class="headerlink" title="å äº‹ä»¶(äº†è§£)"></a>å äº‹ä»¶(äº†è§£)</h3><p>Eventï¼ˆåŒçº¿ç¨‹ä¸€æ ·ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pythonçº¿ç¨‹çš„äº‹ä»¶ç”¨äºä¸»çº¿ç¨‹æ§åˆ¶å…¶ä»–çº¿ç¨‹çš„æ‰§è¡Œï¼Œäº‹ä»¶ä¸»è¦æä¾›äº†ä¸‰ä¸ªæ–¹æ³• <span class="built_in">set</span>ã€waitã€clearã€‚</span><br><span class="line"></span><br><span class="line">    äº‹ä»¶å¤„ç†çš„æœºåˆ¶ï¼šå…¨å±€å®šä¹‰äº†ä¸€ä¸ªâ€œFlagâ€ï¼Œå¦‚æœâ€œFlagâ€å€¼ä¸º <span class="literal">False</span>ï¼Œé‚£ä¹ˆå½“ç¨‹åºæ‰§è¡Œ event.wait æ–¹æ³•æ—¶å°±ä¼šé˜»å¡ï¼Œå¦‚æœâ€œFlagâ€å€¼ä¸º<span class="literal">True</span>ï¼Œé‚£ä¹ˆevent.wait æ–¹æ³•æ—¶ä¾¿ä¸å†é˜»å¡ã€‚</span><br><span class="line"></span><br><span class="line">clearï¼šå°†â€œFlagâ€è®¾ç½®ä¸º<span class="literal">False</span></span><br><span class="line"><span class="built_in">set</span>ï¼šå°†â€œFlagâ€è®¾ç½®ä¸º<span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Event</span><br><span class="line"><span class="keyword">import</span> time,random</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">car</span>(<span class="params">e,n</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> e.is_set(): <span class="comment">#Flase</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;\033[31mçº¢ç¯äº®\033[0mï¼Œcar%sç­‰ç€&#x27;</span> %n)</span><br><span class="line">            e.wait()</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;\033[32mè½¦%s çœ‹è§ç»¿ç¯äº®äº†\033[0m&#x27;</span> %n)</span><br><span class="line">            time.sleep(random.randint(<span class="number">3</span>,<span class="number">6</span>))</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> e.is_set():</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;èµ°ä½ ,car&#x27;</span>, n)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">police_car</span>(<span class="params">e,n</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> e.is_set():</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;\033[31mçº¢ç¯äº®\033[0mï¼Œcar%sç­‰ç€&#x27;</span> % n)</span><br><span class="line">            e.wait(<span class="number">1</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;ç¯çš„æ˜¯%sï¼Œè­¦è½¦èµ°äº†,car %s&#x27;</span> %(e.is_set(),n))</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">traffic_lights</span>(<span class="params">e,inverval</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        time.sleep(inverval)</span><br><span class="line">        <span class="keyword">if</span> e.is_set():</span><br><span class="line">            e.clear() <span class="comment">#e.is_set() ----&gt;False</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            e.<span class="built_in">set</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    e=Event()</span><br><span class="line">    <span class="comment"># for i in range(10):</span></span><br><span class="line">    <span class="comment">#     p=Process(target=car,args=(e,i,))</span></span><br><span class="line">    <span class="comment">#     p.start()</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">        p = Process(target=police_car, args=(e, i,))</span><br><span class="line">        p.start()</span><br><span class="line">    t=Process(target=traffic_lights,args=(e,<span class="number">10</span>))</span><br><span class="line">    t.start()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;============ã€‹&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="åä¸€-è¿›ç¨‹æ± "><a href="#åä¸€-è¿›ç¨‹æ± " class="headerlink" title="åä¸€ è¿›ç¨‹æ± "></a>åä¸€ è¿›ç¨‹æ± </h3><p>åœ¨åˆ©ç”¨Pythonè¿›è¡Œç³»ç»Ÿç®¡ç†çš„æ—¶å€™ï¼Œç‰¹åˆ«æ˜¯åŒæ—¶æ“ä½œå¤šä¸ªæ–‡ä»¶ç›®å½•ï¼Œæˆ–è€…è¿œç¨‹æ§åˆ¶å¤šå°ä¸»æœºï¼Œå¹¶è¡Œæ“ä½œå¯ä»¥èŠ‚çº¦å¤§é‡çš„æ—¶é—´ã€‚å¤šè¿›ç¨‹æ˜¯å®ç°å¹¶å‘çš„æ‰‹æ®µä¹‹ä¸€ï¼Œéœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼š</p>
<ol>
<li>å¾ˆæ˜æ˜¾éœ€è¦å¹¶å‘æ‰§è¡Œçš„ä»»åŠ¡é€šå¸¸è¦è¿œå¤§äºæ ¸æ•°</li>
<li>ä¸€ä¸ªæ“ä½œç³»ç»Ÿä¸å¯èƒ½æ— é™å¼€å¯è¿›ç¨‹ï¼Œé€šå¸¸æœ‰å‡ ä¸ªæ ¸å°±å¼€å‡ ä¸ªè¿›ç¨‹</li>
<li>è¿›ç¨‹å¼€å¯è¿‡å¤šï¼Œæ•ˆç‡åè€Œä¼šä¸‹é™ï¼ˆå¼€å¯è¿›ç¨‹æ˜¯éœ€è¦å ç”¨ç³»ç»Ÿèµ„æºçš„ï¼Œè€Œä¸”å¼€å¯å¤šä½™æ ¸æ•°ç›®çš„è¿›ç¨‹ä¹Ÿæ— æ³•åšåˆ°å¹¶è¡Œï¼‰</li>
</ol>
<p>ä¾‹å¦‚å½“è¢«æ“ä½œå¯¹è±¡æ•°ç›®ä¸å¤§æ—¶ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨multiprocessingä¸­çš„ProcessåŠ¨æ€æˆç”Ÿå¤šä¸ªè¿›ç¨‹ï¼Œåå‡ ä¸ªè¿˜å¥½ï¼Œä½†å¦‚æœæ˜¯ä¸Šç™¾ä¸ªï¼Œä¸Šåƒä¸ªã€‚ã€‚ã€‚æ‰‹åŠ¨çš„å»é™åˆ¶è¿›ç¨‹æ•°é‡å´åˆå¤ªè¿‡ç¹çï¼Œæ­¤æ—¶å¯ä»¥å‘æŒ¥è¿›ç¨‹æ± çš„åŠŸæ•ˆã€‚</p>
<p>æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ç»´æŠ¤ä¸€ä¸ªè¿›ç¨‹æ± æ¥æ§åˆ¶è¿›ç¨‹æ•°ç›®ï¼Œæ¯”å¦‚httpdçš„è¿›ç¨‹æ¨¡å¼ï¼Œè§„å®šæœ€å°è¿›ç¨‹æ•°å’Œæœ€å¤§è¿›ç¨‹æ•°â€¦ <em>psï¼šå¯¹äºè¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„é«˜çº§åº”ç”¨ç¨‹åºè€Œè¨€ï¼Œåº”è¯¥ä½¿ç”¨è¿›ç¨‹æ± ï¼ŒPoolå¯ä»¥æä¾›æŒ‡å®šæ•°é‡çš„è¿›ç¨‹ï¼Œä¾›ç”¨æˆ·è°ƒç”¨ï¼Œå½“æœ‰æ–°çš„è¯·æ±‚æäº¤åˆ°poolä¸­æ—¶ï¼Œå¦‚æœæ± è¿˜æ²¡æœ‰æ»¡ï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ç”¨æ¥æ‰§è¡Œè¯¥è¯·æ±‚ï¼›ä½†å¦‚æœæ± ä¸­çš„è¿›ç¨‹æ•°å·²ç»è¾¾åˆ°è§„å®šæœ€å¤§å€¼ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚å°±ä¼šç­‰å¾…ï¼Œç›´åˆ°æ± ä¸­æœ‰è¿›ç¨‹ç»“æŸï¼Œå°±é‡ç”¨è¿›ç¨‹æ± ä¸­çš„è¿›ç¨‹ã€‚</em></p>
<p><strong>åˆ›å»ºè¿›ç¨‹æ± çš„ç±»ï¼šå¦‚æœæŒ‡å®šnumprocessä¸º3ï¼Œåˆ™è¿›ç¨‹æ± ä¼šä»æ— åˆ°æœ‰åˆ›å»ºä¸‰ä¸ªè¿›ç¨‹ï¼Œç„¶åè‡ªå§‹è‡³ç»ˆä½¿ç”¨è¿™ä¸‰ä¸ªè¿›ç¨‹å»æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡ï¼Œä¸ä¼šå¼€å¯å…¶ä»–è¿›ç¨‹</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> Pool([numprocess  [,initializer [, initargs]]]):åˆ›å»ºè¿›ç¨‹æ± </span><br></pre></td></tr></table></figure>

<p><strong>å‚æ•°ä»‹ç»ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> numprocess:è¦åˆ›å»ºçš„è¿›ç¨‹æ•°ï¼Œå¦‚æœçœç•¥ï¼Œå°†é»˜è®¤ä½¿ç”¨cpu_count()çš„å€¼</span><br><span class="line"><span class="number">2</span> initializerï¼šæ˜¯æ¯ä¸ªå·¥ä½œè¿›ç¨‹å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å¯è°ƒç”¨å¯¹è±¡ï¼Œé»˜è®¤ä¸º<span class="literal">None</span></span><br><span class="line"><span class="number">3</span> initargsï¼šæ˜¯è¦ä¼ ç»™initializerçš„å‚æ•°ç»„</span><br></pre></td></tr></table></figure>

<p><strong>æ–¹æ³•ä»‹ç»ï¼š</strong></p>
<p>ä¸»è¦æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> p.apply(func [, args [, kwargs]]):åœ¨ä¸€ä¸ªæ± å·¥ä½œè¿›ç¨‹ä¸­æ‰§è¡Œfunc(*args,**kwargs),ç„¶åè¿”å›ç»“æœã€‚éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼šæ­¤æ“ä½œå¹¶ä¸ä¼šåœ¨æ‰€æœ‰æ± å·¥ä½œè¿›ç¨‹ä¸­å¹¶æ‰§è¡Œfuncå‡½æ•°ã€‚å¦‚æœè¦é€šè¿‡ä¸åŒå‚æ•°å¹¶å‘åœ°æ‰§è¡Œfuncå‡½æ•°ï¼Œå¿…é¡»ä»ä¸åŒçº¿ç¨‹è°ƒç”¨p.apply()å‡½æ•°æˆ–è€…ä½¿ç”¨p.apply_async()</span><br><span class="line"><span class="number">2</span> p.apply_async(func [, args [, kwargs]]):åœ¨ä¸€ä¸ªæ± å·¥ä½œè¿›ç¨‹ä¸­æ‰§è¡Œfunc(*args,**kwargs),ç„¶åè¿”å›ç»“æœã€‚æ­¤æ–¹æ³•çš„ç»“æœæ˜¯AsyncResultç±»çš„å®ä¾‹ï¼Œcallbackæ˜¯å¯è°ƒç”¨å¯¹è±¡ï¼Œæ¥æ”¶è¾“å…¥å‚æ•°ã€‚å½“funcçš„ç»“æœå˜ä¸ºå¯ç”¨æ—¶ï¼Œå°†ç†è§£ä¼ é€’ç»™callbackã€‚callbackç¦æ­¢æ‰§è¡Œä»»ä½•é˜»å¡æ“ä½œï¼Œå¦åˆ™å°†æ¥æ”¶å…¶ä»–å¼‚æ­¥æ“ä½œä¸­çš„ç»“æœã€‚</span><br><span class="line"><span class="number">3</span>    </span><br><span class="line"><span class="number">4</span> p.close():å…³é—­è¿›ç¨‹æ± ï¼Œé˜²æ­¢è¿›ä¸€æ­¥æ“ä½œã€‚å¦‚æœæ‰€æœ‰æ“ä½œæŒç»­æŒ‚èµ·ï¼Œå®ƒä»¬å°†åœ¨å·¥ä½œè¿›ç¨‹ç»ˆæ­¢å‰å®Œæˆ</span><br><span class="line"><span class="number">5</span> P.jion():ç­‰å¾…æ‰€æœ‰å·¥ä½œè¿›ç¨‹é€€å‡ºã€‚æ­¤æ–¹æ³•åªèƒ½åœ¨closeï¼ˆï¼‰æˆ–teminate()ä¹‹åè°ƒç”¨</span><br></pre></td></tr></table></figure>

<p>å…¶ä»–æ–¹æ³•ï¼ˆäº†è§£éƒ¨åˆ†ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">æ–¹æ³•apply_async()å’Œmap_asyncï¼ˆï¼‰çš„è¿”å›å€¼æ˜¯AsyncResulçš„å®ä¾‹objã€‚å®ä¾‹å…·æœ‰ä»¥ä¸‹æ–¹æ³•</span><br><span class="line">obj.get():è¿”å›ç»“æœï¼Œå¦‚æœæœ‰å¿…è¦åˆ™ç­‰å¾…ç»“æœåˆ°è¾¾ã€‚timeoutæ˜¯å¯é€‰çš„ã€‚å¦‚æœåœ¨æŒ‡å®šæ—¶é—´å†…è¿˜æ²¡æœ‰åˆ°è¾¾ï¼Œå°†å¼•å‘ä¸€åœºã€‚å¦‚æœè¿œç¨‹æ“ä½œä¸­å¼•å‘äº†å¼‚å¸¸ï¼Œå®ƒå°†åœ¨è°ƒç”¨æ­¤æ–¹æ³•æ—¶å†æ¬¡è¢«å¼•å‘ã€‚</span><br><span class="line">obj.ready():å¦‚æœè°ƒç”¨å®Œæˆï¼Œè¿”å›<span class="literal">True</span></span><br><span class="line">obj.successful():å¦‚æœè°ƒç”¨å®Œæˆä¸”æ²¡æœ‰å¼•å‘å¼‚å¸¸ï¼Œè¿”å›<span class="literal">True</span>ï¼Œå¦‚æœåœ¨ç»“æœå°±ç»ªä¹‹å‰è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¼•å‘å¼‚å¸¸</span><br><span class="line">obj.wait([timeout]):ç­‰å¾…ç»“æœå˜ä¸ºå¯ç”¨ã€‚</span><br><span class="line">obj.terminate()ï¼šç«‹å³ç»ˆæ­¢æ‰€æœ‰å·¥ä½œè¿›ç¨‹ï¼ŒåŒæ—¶ä¸æ‰§è¡Œä»»ä½•æ¸…ç†æˆ–ç»“æŸä»»ä½•æŒ‚èµ·å·¥ä½œã€‚å¦‚æœpè¢«åƒåœ¾å›æ”¶ï¼Œå°†è‡ªåŠ¨è°ƒç”¨æ­¤å‡½æ•°</span><br></pre></td></tr></table></figure>

<p><strong>åº”ç”¨ï¼š</strong></p>
<p>åŒæ­¥è°ƒç”¨apply</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> os,time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s run&#x27;</span> %os.getpid())</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">return</span> n**<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    p=Pool(<span class="number">3</span>) <span class="comment">#è¿›ç¨‹æ± ä¸­ä»æ— åˆ°æœ‰åˆ›å»ºä¸‰ä¸ªè¿›ç¨‹,ä»¥åä¸€ç›´æ˜¯è¿™ä¸‰ä¸ªè¿›ç¨‹åœ¨æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">    res_l=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        res=p.apply(work,args=(i,)) <span class="comment">#åŒæ­¥è°ƒç”¨ï¼Œç›´åˆ°æœ¬æ¬¡ä»»åŠ¡æ‰§è¡Œå®Œæ¯•æ‹¿åˆ°resï¼Œç­‰å¾…ä»»åŠ¡workæ‰§è¡Œçš„è¿‡ç¨‹ä¸­å¯èƒ½æœ‰é˜»å¡ä¹Ÿå¯èƒ½æ²¡æœ‰é˜»å¡ï¼Œä½†ä¸ç®¡è¯¥ä»»åŠ¡æ˜¯å¦å­˜åœ¨é˜»å¡ï¼ŒåŒæ­¥è°ƒç”¨éƒ½ä¼šåœ¨åŸåœ°ç­‰ç€ï¼Œåªæ˜¯ç­‰çš„è¿‡ç¨‹ä¸­è‹¥æ˜¯ä»»åŠ¡å‘ç”Ÿäº†é˜»å¡å°±ä¼šè¢«å¤ºèµ°cpuçš„æ‰§è¡Œæƒé™</span></span><br><span class="line">        res_l.append(res)</span><br><span class="line">    <span class="built_in">print</span>(res_l)</span><br></pre></td></tr></table></figure>

<p>å¼‚æ­¥è°ƒç”¨apply_async</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> os,time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s run&#x27;</span> %os.getpid())</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">return</span> n**<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    p=Pool(<span class="number">3</span>) <span class="comment">#è¿›ç¨‹æ± ä¸­ä»æ— åˆ°æœ‰åˆ›å»ºä¸‰ä¸ªè¿›ç¨‹,ä»¥åä¸€ç›´æ˜¯è¿™ä¸‰ä¸ªè¿›ç¨‹åœ¨æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">    res_l=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        res=p.apply_async(work,args=(i,)) <span class="comment">#åŒæ­¥è¿è¡Œ,é˜»å¡ã€ç›´åˆ°æœ¬æ¬¡ä»»åŠ¡æ‰§è¡Œå®Œæ¯•æ‹¿åˆ°res</span></span><br><span class="line">        res_l.append(res)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å¼‚æ­¥apply_asyncç”¨æ³•ï¼šå¦‚æœä½¿ç”¨å¼‚æ­¥æäº¤çš„ä»»åŠ¡ï¼Œä¸»è¿›ç¨‹éœ€è¦ä½¿ç”¨jionï¼Œç­‰å¾…è¿›ç¨‹æ± å†…ä»»åŠ¡éƒ½å¤„ç†å®Œï¼Œç„¶åå¯ä»¥ç”¨getæ”¶é›†ç»“æœï¼Œå¦åˆ™ï¼Œä¸»è¿›ç¨‹ç»“æŸï¼Œè¿›ç¨‹æ± å¯èƒ½è¿˜æ²¡æ¥å¾—åŠæ‰§è¡Œï¼Œä¹Ÿå°±è·Ÿç€ä¸€èµ·ç»“æŸäº†</span></span><br><span class="line">    p.close()</span><br><span class="line">    p.join()</span><br><span class="line">    <span class="keyword">for</span> res <span class="keyword">in</span> res_l:</span><br><span class="line">        <span class="built_in">print</span>(res.get()) <span class="comment">#ä½¿ç”¨getæ¥è·å–apply_ayncçš„ç»“æœ,å¦‚æœæ˜¯apply,åˆ™æ²¡æœ‰getæ–¹æ³•,å› ä¸ºapplyæ˜¯åŒæ­¥æ‰§è¡Œ,ç«‹åˆ»è·å–ç»“æœ,ä¹Ÿæ ¹æœ¬æ— éœ€get</span></span><br></pre></td></tr></table></figure>

<p>è¯¦è§£ï¼šapply_asyncä¸apply</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¸€ï¼šä½¿ç”¨è¿›ç¨‹æ± ï¼ˆå¼‚æ­¥è°ƒç”¨,apply_asyncï¼‰</span></span><br><span class="line"><span class="comment">#coding: utf-8</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Pool</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">msg</span>):</span></span><br><span class="line">    <span class="built_in">print</span>( <span class="string">&quot;msg:&quot;</span>, msg)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> msg</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    pool = Pool(processes = <span class="number">3</span>)</span><br><span class="line">    res_l=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        msg = <span class="string">&quot;hello %d&quot;</span> %(i)</span><br><span class="line">        res=pool.apply_async(func, (msg, ))   <span class="comment">#ç»´æŒæ‰§è¡Œçš„è¿›ç¨‹æ€»æ•°ä¸ºprocessesï¼Œå½“ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œå®Œæ¯•åä¼šæ·»åŠ æ–°çš„è¿›ç¨‹è¿›å»</span></span><br><span class="line">        res_l.append(res)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;==============================&gt;&quot;</span>) <span class="comment">#æ²¡æœ‰åé¢çš„joinï¼Œæˆ–getï¼Œåˆ™ç¨‹åºæ•´ä½“ç»“æŸï¼Œè¿›ç¨‹æ± ä¸­çš„ä»»åŠ¡è¿˜æ²¡æ¥å¾—åŠå…¨éƒ¨æ‰§è¡Œå®Œä¹Ÿéƒ½è·Ÿç€ä¸»è¿›ç¨‹ä¸€èµ·ç»“æŸäº†</span></span><br><span class="line"></span><br><span class="line">    pool.close() <span class="comment">#å…³é—­è¿›ç¨‹æ± ï¼Œé˜²æ­¢è¿›ä¸€æ­¥æ“ä½œã€‚å¦‚æœæ‰€æœ‰æ“ä½œæŒç»­æŒ‚èµ·ï¼Œå®ƒä»¬å°†åœ¨å·¥ä½œè¿›ç¨‹ç»ˆæ­¢å‰å®Œæˆ</span></span><br><span class="line">    pool.join()   <span class="comment">#è°ƒç”¨joinä¹‹å‰ï¼Œå…ˆè°ƒç”¨closeå‡½æ•°ï¼Œå¦åˆ™ä¼šå‡ºé”™ã€‚æ‰§è¡Œå®Œcloseåä¸ä¼šæœ‰æ–°çš„è¿›ç¨‹åŠ å…¥åˆ°pool,joinå‡½æ•°ç­‰å¾…æ‰€æœ‰å­è¿›ç¨‹ç»“æŸ</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(res_l) <span class="comment">#çœ‹åˆ°çš„æ˜¯&lt;multiprocessing.pool.ApplyResult object at 0x10357c4e0&gt;å¯¹è±¡ç»„æˆçš„åˆ—è¡¨,è€Œéæœ€ç»ˆçš„ç»“æœ,ä½†è¿™ä¸€æ­¥æ˜¯åœ¨joinåæ‰§è¡Œçš„,è¯æ˜ç»“æœå·²ç»è®¡ç®—å®Œæ¯•,å‰©ä¸‹çš„äº‹æƒ…å°±æ˜¯è°ƒç”¨æ¯ä¸ªå¯¹è±¡ä¸‹çš„getæ–¹æ³•å»è·å–ç»“æœ</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> res_l:</span><br><span class="line">        <span class="built_in">print</span>(i.get()) <span class="comment">#ä½¿ç”¨getæ¥è·å–apply_ayncçš„ç»“æœ,å¦‚æœæ˜¯apply,åˆ™æ²¡æœ‰getæ–¹æ³•,å› ä¸ºapplyæ˜¯åŒæ­¥æ‰§è¡Œ,ç«‹åˆ»è·å–ç»“æœ,ä¹Ÿæ ¹æœ¬æ— éœ€get</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#äºŒï¼šä½¿ç”¨è¿›ç¨‹æ± ï¼ˆåŒæ­¥è°ƒç”¨,applyï¼‰</span></span><br><span class="line"><span class="comment">#coding: utf-8</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Pool</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params">msg</span>):</span></span><br><span class="line">    <span class="built_in">print</span>( <span class="string">&quot;msg:&quot;</span>, msg)</span><br><span class="line">    time.sleep(<span class="number">0.1</span>)</span><br><span class="line">    <span class="keyword">return</span> msg</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    pool = Pool(processes = <span class="number">3</span>)</span><br><span class="line">    res_l=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        msg = <span class="string">&quot;hello %d&quot;</span> %(i)</span><br><span class="line">        res=pool.apply(func, (msg, ))   <span class="comment">#ç»´æŒæ‰§è¡Œçš„è¿›ç¨‹æ€»æ•°ä¸ºprocessesï¼Œå½“ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œå®Œæ¯•åä¼šæ·»åŠ æ–°çš„è¿›ç¨‹è¿›å»</span></span><br><span class="line">        res_l.append(res) <span class="comment">#åŒæ­¥æ‰§è¡Œï¼Œå³æ‰§è¡Œå®Œä¸€ä¸ªæ‹¿åˆ°ç»“æœï¼Œå†å»æ‰§è¡Œå¦å¤–ä¸€ä¸ª</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;==============================&gt;&quot;</span>)</span><br><span class="line">    pool.close()</span><br><span class="line">    pool.join()   <span class="comment">#è°ƒç”¨joinä¹‹å‰ï¼Œå…ˆè°ƒç”¨closeå‡½æ•°ï¼Œå¦åˆ™ä¼šå‡ºé”™ã€‚æ‰§è¡Œå®Œcloseåä¸ä¼šæœ‰æ–°çš„è¿›ç¨‹åŠ å…¥åˆ°pool,joinå‡½æ•°ç­‰å¾…æ‰€æœ‰å­è¿›ç¨‹ç»“æŸ</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(res_l) <span class="comment">#çœ‹åˆ°çš„å°±æ˜¯æœ€ç»ˆçš„ç»“æœç»„æˆçš„åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> res_l: <span class="comment">#applyæ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥ç›´æ¥å¾—åˆ°ç»“æœï¼Œæ²¡æœ‰get()æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>

<p><strong>ç»ƒä¹ 2ï¼šä½¿ç”¨è¿›ç¨‹æ± ç»´æŠ¤å›ºå®šæ•°ç›®çš„è¿›ç¨‹ï¼ˆé‡å†™ç»ƒä¹ 1ï¼‰</strong></p>
<p>serverç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Poolå†…çš„è¿›ç¨‹æ•°é»˜è®¤æ˜¯cpuæ ¸æ•°ï¼Œå‡è®¾ä¸º4ï¼ˆæŸ¥çœ‹æ–¹æ³•os.cpu_count()ï¼‰</span></span><br><span class="line"><span class="comment">#å¼€å¯6ä¸ªå®¢æˆ·ç«¯ï¼Œä¼šå‘ç°2ä¸ªå®¢æˆ·ç«¯å¤„äºç­‰å¾…çŠ¶æ€</span></span><br><span class="line"><span class="comment">#åœ¨æ¯ä¸ªè¿›ç¨‹å†…æŸ¥çœ‹pidï¼Œä¼šå‘ç°pidä½¿ç”¨ä¸º4ä¸ªï¼Œå³å¤šä¸ªå®¢æˆ·ç«¯å…¬ç”¨4ä¸ªè¿›ç¨‹</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">server=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">server.setsockopt(SOL_SOCKET,SO_REUSEADDR,<span class="number">1</span>)</span><br><span class="line">server.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line">server.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">talk</span>(<span class="params">conn,client_addr</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;è¿›ç¨‹pid: %s&#x27;</span> %os.getpid())</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            msg=conn.recv(<span class="number">1024</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> msg:<span class="keyword">break</span></span><br><span class="line">            conn.send(msg.upper())</span><br><span class="line">        <span class="keyword">except</span> Exception:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    p=Pool()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        conn,client_addr=server.accept()</span><br><span class="line">        p.apply_async(talk,args=(conn,client_addr))</span><br><span class="line">        <span class="comment"># p.apply(talk,args=(conn,client_addr)) #åŒæ­¥çš„è¯ï¼Œåˆ™åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯èƒ½è®¿é—®</span></span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">client=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> msg:<span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    client.send(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    msg=client.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="built_in">print</span>(msg.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>å‘ç°ï¼šå¹¶å‘å¼€å¯å¤šä¸ªå®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯åŒä¸€æ—¶é—´åªæœ‰3ä¸ªä¸åŒçš„pidï¼Œå¹²æ‰ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå¦å¤–ä¸€ä¸ªå®¢æˆ·ç«¯æ‰ä¼šè¿›æ¥ï¼Œè¢«3ä¸ªè¿›ç¨‹ä¹‹ä¸€å¤„ç†</p>
<p><strong>å›æ‰å‡½æ•°ï¼š</strong></p>
<p><strong>éœ€è¦å›è°ƒå‡½æ•°çš„åœºæ™¯ï¼šè¿›ç¨‹æ± ä¸­ä»»ä½•ä¸€ä¸ªä»»åŠ¡ä¸€æ—¦å¤„ç†å®Œäº†ï¼Œå°±ç«‹å³å‘ŠçŸ¥ä¸»è¿›ç¨‹ï¼šæˆ‘å¥½äº†é¢ï¼Œä½ å¯ä»¥å¤„ç†æˆ‘çš„ç»“æœäº†ã€‚ä¸»è¿›ç¨‹åˆ™è°ƒç”¨ä¸€ä¸ªå‡½æ•°å»å¤„ç†è¯¥ç»“æœï¼Œè¯¥å‡½æ•°å³å›è°ƒå‡½æ•°</strong></p>
<p><strong>æˆ‘ä»¬å¯ä»¥æŠŠè€—æ—¶é—´ï¼ˆé˜»å¡ï¼‰çš„ä»»åŠ¡æ”¾åˆ°è¿›ç¨‹æ± ä¸­ï¼Œç„¶åæŒ‡å®šå›è°ƒå‡½æ•°ï¼ˆä¸»è¿›ç¨‹è´Ÿè´£æ‰§è¡Œï¼‰ï¼Œè¿™æ ·ä¸»è¿›ç¨‹åœ¨æ‰§è¡Œå›è°ƒå‡½æ•°æ—¶å°±çœå»äº†I&#x2F;Oçš„è¿‡ç¨‹ï¼Œç›´æ¥æ‹¿åˆ°çš„æ˜¯ä»»åŠ¡çš„ç»“æœã€‚</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_page</span>(<span class="params">url</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&lt;è¿›ç¨‹%s&gt; get %s&#x27;</span> %(os.getpid(),url))</span><br><span class="line">    respone=requests.get(url)</span><br><span class="line">    <span class="keyword">if</span> respone.status_code == <span class="number">200</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&#x27;url&#x27;</span>:url,<span class="string">&#x27;text&#x27;</span>:respone.text&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pasrse_page</span>(<span class="params">res</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&lt;è¿›ç¨‹%s&gt; parse %s&#x27;</span> %(os.getpid(),res[<span class="string">&#x27;url&#x27;</span>]))</span><br><span class="line">    parse_res=<span class="string">&#x27;url:&lt;%s&gt; size:[%s]\n&#x27;</span> %(res[<span class="string">&#x27;url&#x27;</span>],<span class="built_in">len</span>(res[<span class="string">&#x27;text&#x27;</span>]))</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;db.txt&#x27;</span>,<span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(parse_res)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    urls=[</span><br><span class="line">        <span class="string">&#x27;https://www.baidu.com&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://www.python.org&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://www.openstack.org&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://help.github.com/&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;http://www.sina.com.cn/&#x27;</span></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    p=Pool(<span class="number">3</span>)</span><br><span class="line">    res_l=[]</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">        res=p.apply_async(get_page,args=(url,),callback=pasrse_page)</span><br><span class="line">        res_l.append(res)</span><br><span class="line"></span><br><span class="line">    p.close()</span><br><span class="line">    p.join()</span><br><span class="line">    <span class="built_in">print</span>([res.get() <span class="keyword">for</span> res <span class="keyword">in</span> res_l]) <span class="comment">#æ‹¿åˆ°çš„æ˜¯get_pageçš„ç»“æœ,å…¶å®å®Œå…¨æ²¡å¿…è¦æ‹¿è¯¥ç»“æœ,è¯¥ç»“æœå·²ç»ä¼ ç»™å›è°ƒå‡½æ•°å¤„ç†äº†</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">æ‰“å°ç»“æœ:</span></span><br><span class="line"><span class="string">&lt;è¿›ç¨‹3388&gt; get https://www.baidu.com</span></span><br><span class="line"><span class="string">&lt;è¿›ç¨‹3389&gt; get https://www.python.org</span></span><br><span class="line"><span class="string">&lt;è¿›ç¨‹3390&gt; get https://www.openstack.org</span></span><br><span class="line"><span class="string">&lt;è¿›ç¨‹3388&gt; get https://help.github.com/</span></span><br><span class="line"><span class="string">&lt;è¿›ç¨‹3387&gt; parse https://www.baidu.com</span></span><br><span class="line"><span class="string">&lt;è¿›ç¨‹3389&gt; get http://www.sina.com.cn/</span></span><br><span class="line"><span class="string">&lt;è¿›ç¨‹3387&gt; parse https://www.python.org</span></span><br><span class="line"><span class="string">&lt;è¿›ç¨‹3387&gt; parse https://help.github.com/</span></span><br><span class="line"><span class="string">&lt;è¿›ç¨‹3387&gt; parse http://www.sina.com.cn/</span></span><br><span class="line"><span class="string">&lt;è¿›ç¨‹3387&gt; parse https://www.openstack.org</span></span><br><span class="line"><span class="string">[&#123;&#x27;url&#x27;: &#x27;https://www.baidu.com&#x27;, &#x27;text&#x27;: &#x27;&lt;!DOCTYPE html&gt;\r\n...&#x27;,...&#125;]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>çˆ¬è™«æ¡ˆä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> time,random</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_page</span>(<span class="params">url,pattern</span>):</span></span><br><span class="line">    response=requests.get(url)</span><br><span class="line">    <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">        <span class="keyword">return</span> (response.text,pattern)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_page</span>(<span class="params">info</span>):</span></span><br><span class="line">    page_content,pattern=info</span><br><span class="line">    res=re.findall(pattern,page_content)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> res:</span><br><span class="line">        dic=&#123;</span><br><span class="line">            <span class="string">&#x27;index&#x27;</span>:item[<span class="number">0</span>],</span><br><span class="line">            <span class="string">&#x27;title&#x27;</span>:item[<span class="number">1</span>],</span><br><span class="line">            <span class="string">&#x27;actor&#x27;</span>:item[<span class="number">2</span>].strip()[<span class="number">3</span>:],</span><br><span class="line">            <span class="string">&#x27;time&#x27;</span>:item[<span class="number">3</span>][<span class="number">5</span>:],</span><br><span class="line">            <span class="string">&#x27;score&#x27;</span>:item[<span class="number">4</span>]+item[<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">print</span>(dic)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    pattern1=re.<span class="built_in">compile</span>(<span class="string">r&#x27;&lt;dd&gt;.*?board-index.*?&gt;(\d+)&lt;.*?title=&quot;(.*?)&quot;.*?star.*?&gt;(.*?)&lt;.*?releasetime.*?&gt;(.*?)&lt;.*?integer.*?&gt;(.*?)&lt;.*?fraction.*?&gt;(.*?)&lt;&#x27;</span>,re.S)</span><br><span class="line"></span><br><span class="line">    url_dic=&#123;</span><br><span class="line">        <span class="string">&#x27;http://maoyan.com/board/7&#x27;</span>:pattern1,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p=Pool()</span><br><span class="line">    res_l=[]</span><br><span class="line">    <span class="keyword">for</span> url,pattern <span class="keyword">in</span> url_dic.items():</span><br><span class="line">        res=p.apply_async(get_page,args=(url,pattern),callback=parse_page)</span><br><span class="line">        res_l.append(res)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> res_l:</span><br><span class="line">        i.get()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># res=requests.get(&#x27;http://maoyan.com/board/7&#x27;)</span></span><br><span class="line">    <span class="comment"># print(re.findall(pattern,res.text))</span></span><br></pre></td></tr></table></figure>

<p><strong>å¦‚æœåœ¨ä¸»è¿›ç¨‹ä¸­ç­‰å¾…è¿›ç¨‹æ± ä¸­æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•åï¼Œå†ç»Ÿä¸€å¤„ç†ç»“æœï¼Œåˆ™æ— éœ€å›è°ƒå‡½æ•°</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> time,random,os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span>(<span class="params">n</span>):</span></span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> n**<span class="number">2</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    p=Pool()</span><br><span class="line"></span><br><span class="line">    res_l=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        res=p.apply_async(work,args=(i,))</span><br><span class="line">        res_l.append(res)</span><br><span class="line"></span><br><span class="line">    p.close()</span><br><span class="line">    p.join() <span class="comment">#ç­‰å¾…è¿›ç¨‹æ± ä¸­æ‰€æœ‰è¿›ç¨‹æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line"></span><br><span class="line">    nums=[]</span><br><span class="line">    <span class="keyword">for</span> res <span class="keyword">in</span> res_l:</span><br><span class="line">        nums.append(res.get()) <span class="comment">#æ‹¿åˆ°æ‰€æœ‰ç»“æœ</span></span><br><span class="line">    <span class="built_in">print</span>(nums) <span class="comment">#ä¸»è¿›ç¨‹æ‹¿åˆ°æ‰€æœ‰çš„å¤„ç†ç»“æœ,å¯ä»¥åœ¨ä¸»è¿›ç¨‹ä¸­è¿›è¡Œç»Ÿä¸€è¿›è¡Œå¤„ç†</span></span><br></pre></td></tr></table></figure>

<p><a href="https://link.zhihu.com/?target=https://docs.python.org/dev/library/concurrent.futures.html">è¿›ç¨‹æ± çš„å…¶ä»–å®ç°æ–¹å¼ï¼šhttps://docs.python.org/dev/library/concurrent.futures.htmldocs.python.org/dev/library/concurrent.futures.html</a></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=131">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=131<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>28-åå°„å’Œå†…ç½®æ–¹æ³•</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/28_%E5%8F%8D%E5%B0%84%E3%80%81%E5%86%85%E7%BD%AE%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<h2 id="ä¸€-åå°„"><a href="#ä¸€-åå°„" class="headerlink" title="ä¸€ åå°„"></a>ä¸€ åå°„</h2><p><img src="https://pic2.zhimg.com/80/v2-3d1d85b30d01da04b681d316cb460975_720w.jpg" alt="img"></p>
<p>pythonæ˜¯åŠ¨æ€è¯­è¨€ï¼Œè€Œåå°„(reflection)æœºåˆ¶è¢«è§†ä¸ºåŠ¨æ€è¯­è¨€çš„å…³é”®ã€‚</p>
<p>åå°„æœºåˆ¶æŒ‡çš„æ˜¯åœ¨ç¨‹åºçš„è¿è¡ŒçŠ¶æ€ä¸­</p>
<p>å¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½å¯ä»¥çŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›</p>
<p>å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨ä»–çš„ä»»æ„æ–¹æ³•å’Œå±æ€§ã€‚</p>
<p>è¿™ç§åŠ¨æ€è·å–ç¨‹åºä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„åŠŸèƒ½ç§°ä¸ºåå°„æœºåˆ¶ã€‚</p>
<p>åœ¨pythonä¸­å®ç°åå°„éå¸¸ç®€å•ï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæˆ‘ä»¬è·å–ä¸€ä¸ªä¸çŸ¥é“å­˜æœ‰ä½•ç§å±æ€§çš„å¯¹è±¡ï¼Œè‹¥æƒ³æ“ä½œå…¶å†…éƒ¨å±æ€§ï¼Œå¯ä»¥å…ˆé€šè¿‡å†…ç½®å‡½æ•°diræ¥è·å–ä»»æ„ä¸€ä¸ªç±»æˆ–è€…å¯¹è±¡çš„å±æ€§åˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­å…¨ä¸ºå­—ç¬¦ä¸²æ ¼å¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">People</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,age,gender</span>):</span></span><br><span class="line"><span class="meta">... </span>        self.name=name</span><br><span class="line"><span class="meta">... </span>        self.age=age</span><br><span class="line"><span class="meta">... </span>        self.gender=gender</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj=People(<span class="string">&#x27;egon&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;male&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">dir</span>(obj) <span class="comment"># åˆ—è¡¨ä¸­æŸ¥çœ‹åˆ°çš„å±æ€§å…¨ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">[......,<span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;gender&#x27;</span>, <span class="string">&#x27;name&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥å°±æ˜¯æƒ³åŠæ³•é€šè¿‡å­—ç¬¦ä¸²æ¥æ“ä½œå¯¹è±¡çš„å±æ€§äº†ï¼Œè¿™å°±æ¶‰åŠåˆ°å†…ç½®å‡½æ•°hasattrã€getattrã€setattrã€delattrçš„ä½¿ç”¨äº†ï¼ˆPythonä¸­ä¸€åˆ‡çš†å¯¹è±¡ï¼Œç±»å’Œå¯¹è±¡éƒ½å¯ä»¥è¢«è¿™å››ä¸ªå‡½æ•°æ“ä½œï¼Œç”¨æ³•ä¸€æ ·ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,full_name</span>):</span></span><br><span class="line">        self.full_name =full_name</span><br><span class="line"></span><br><span class="line">t=Teacher(<span class="string">&#x27;Egon Lin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># hasattr(object,&#x27;name&#x27;)</span></span><br><span class="line"><span class="built_in">hasattr</span>(t,<span class="string">&#x27;full_name&#x27;</span>) <span class="comment"># æŒ‰å­—ç¬¦ä¸²&#x27;full_name&#x27;åˆ¤æ–­æœ‰æ— å±æ€§t.full_name</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># getattr(object, &#x27;name&#x27;, default=None)</span></span><br><span class="line"><span class="built_in">getattr</span>(t,<span class="string">&#x27;full_name&#x27;</span>,<span class="literal">None</span>) <span class="comment"># ç­‰åŒäºt.full_name,ä¸å­˜åœ¨è¯¥å±æ€§åˆ™è¿”å›é»˜è®¤å€¼None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># setattr(x, &#x27;y&#x27;, v)</span></span><br><span class="line"><span class="built_in">setattr</span>(t,<span class="string">&#x27;age&#x27;</span>,<span class="number">18</span>) <span class="comment"># ç­‰åŒäºt.age=18</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># delattr(x, &#x27;y&#x27;)</span></span><br><span class="line"><span class="built_in">delattr</span>(t,<span class="string">&#x27;age&#x27;</span>) <span class="comment"># ç­‰åŒäºdel t.age</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-9bc82da339b0bf1fab4fa4c5da110592_720w.jpg" alt="img"></p>
<p>åŸºäºåå°„å¯ä»¥ååˆ†çµæ´»åœ°æ“ä½œå¯¹è±¡çš„å±æ€§ï¼Œæ¯”å¦‚å°†ç”¨æˆ·äº¤äº’çš„ç»“æœåå°„åˆ°å…·ä½“çš„åŠŸèƒ½æ‰§è¡Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">FtpServer</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">serve_forever</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="meta">... </span>            inp=<span class="built_in">input</span>(<span class="string">&#x27;input your cmd&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line"><span class="meta">... </span>            cmd,file=inp.split()</span><br><span class="line"><span class="meta">... </span>            <span class="keyword">if</span> <span class="built_in">hasattr</span>(self,cmd): <span class="comment"># æ ¹æ®ç”¨æˆ·è¾“å…¥çš„cmdï¼Œåˆ¤æ–­å¯¹è±¡selfæœ‰æ— å¯¹åº”çš„æ–¹æ³•å±æ€§</span></span><br><span class="line"><span class="meta">... </span>                func=<span class="built_in">getattr</span>(self,cmd) <span class="comment"># æ ¹æ®å­—ç¬¦ä¸²cmdï¼Œè·å–å¯¹è±¡selfå¯¹åº”çš„æ–¹æ³•å±æ€§</span></span><br><span class="line"><span class="meta">... </span>                func(file)</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self,file</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;Downloading %s...&#x27;</span> %file)</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">put</span>(<span class="params">self,file</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="built_in">print</span>(<span class="string">&#x27;Uploading %s...&#x27;</span> %file)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>server=FtpServer()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>server.serve_forever()</span><br><span class="line"><span class="built_in">input</span> your cmd&gt;&gt;: get a.txt</span><br><span class="line">Downloading a.txt...</span><br><span class="line"><span class="built_in">input</span> your cmd&gt;&gt;: put a.txt</span><br><span class="line">Uploading a.txt...</span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-97d87ec7c2fe74480aad298b224565a0_720w.jpg" alt="img"></p>
<h2 id="äºŒ-å†…ç½®æ–¹æ³•"><a href="#äºŒ-å†…ç½®æ–¹æ³•" class="headerlink" title="äºŒ å†…ç½®æ–¹æ³•"></a>äºŒ å†…ç½®æ–¹æ³•</h2><p>Pythonçš„Classæœºåˆ¶å†…ç½®äº†å¾ˆå¤šç‰¹æ®Šçš„æ–¹æ³•æ¥å¸®åŠ©ä½¿ç”¨è€…é«˜åº¦å®šåˆ¶è‡ªå·±çš„ç±»ï¼Œè¿™äº›å†…ç½®æ–¹æ³•éƒ½æ˜¯ä»¥åŒä¸‹åˆ’çº¿å¼€å¤´å’Œç»“å°¾çš„ï¼Œä¼šåœ¨æ»¡è¶³æŸç§æ¡ä»¶æ—¶è‡ªåŠ¨è§¦å‘ï¼Œæˆ‘ä»¬ä»¥å¸¸ç”¨çš„__str__å’Œ__del__ä¸ºä¾‹æ¥ç®€å•ä»‹ç»å®ƒä»¬çš„ä½¿ç”¨ã€‚</p>
<p><img src="https://pic4.zhimg.com/80/v2-6e4601a804f239a1f7f9a2aa14d8879f_720w.jpg" alt="img"></p>
<p>__str__æ–¹æ³•ä¼šåœ¨å¯¹è±¡è¢«æ‰“å°æ—¶è‡ªåŠ¨è§¦å‘ï¼ŒprintåŠŸèƒ½æ‰“å°çš„å°±æ˜¯å®ƒçš„è¿”å›å€¼ï¼Œæˆ‘ä»¬é€šå¸¸åŸºäºæ–¹æ³•æ¥å®šåˆ¶å¯¹è±¡çš„æ‰“å°ä¿¡æ¯ï¼Œè¯¥æ–¹æ³•å¿…é¡»è¿”å›å­—ç¬¦ä¸²ç±»å‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">People</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,age</span>):</span></span><br><span class="line"><span class="meta">... </span>        self.name=name</span><br><span class="line"><span class="meta">... </span>        self.age=age</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line"><span class="meta">... </span>        <span class="keyword">return</span> <span class="string">&#x27;&lt;Name:%s Age:%s&gt;&#x27;</span> %(self.name,self.age) <span class="comment">#è¿”å›ç±»å‹å¿…é¡»æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p=People(<span class="string">&#x27;lili&#x27;</span>,<span class="number">18</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(p) <span class="comment">#è§¦å‘p.__str__()ï¼Œæ‹¿åˆ°è¿”å›å€¼åè¿›è¡Œæ‰“å°</span></span><br><span class="line">&lt;Name:lili Age:<span class="number">18</span>&gt;</span><br></pre></td></tr></table></figure>

<p>__del__ä¼šåœ¨å¯¹è±¡è¢«åˆ é™¤æ—¶è‡ªåŠ¨è§¦å‘ã€‚ç”±äºPythonè‡ªå¸¦çš„åƒåœ¾å›æ”¶æœºåˆ¶ä¼šè‡ªåŠ¨æ¸…ç†Pythonç¨‹åºçš„èµ„æºï¼Œæ‰€ä»¥å½“ä¸€ä¸ªå¯¹è±¡åªå ç”¨åº”ç”¨ç¨‹åºçº§èµ„æºæ—¶ï¼Œå®Œå…¨æ²¡å¿…è¦ä¸ºå¯¹è±¡å®šåˆ¶__del__æ–¹æ³•ï¼Œä½†åœ¨äº§ç”Ÿä¸€ä¸ªå¯¹è±¡çš„åŒæ—¶æ¶‰åŠåˆ°ç”³è¯·ç³»ç»Ÿèµ„æºï¼ˆæ¯”å¦‚ç³»ç»Ÿæ‰“å¼€çš„æ–‡ä»¶ã€ç½‘ç»œè¿æ¥ç­‰ï¼‰çš„æƒ…å†µä¸‹ï¼Œå…³äºç³»ç»Ÿèµ„æºçš„å›æ”¶ï¼ŒPythonçš„åƒåœ¾å›æ”¶æœºåˆ¶ä¾¿æ´¾ä¸ä¸Šç”¨åœºäº†ï¼Œéœ€è¦æˆ‘ä»¬ä¸ºå¯¹è±¡å®šåˆ¶è¯¥æ–¹æ³•ï¼Œç”¨æ¥åœ¨å¯¹è±¡è¢«åˆ é™¤æ—¶è‡ªåŠ¨è§¦å‘å›æ”¶ç³»ç»Ÿèµ„æºçš„æ“ä½œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MySQL</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,ip,port</span>):</span></span><br><span class="line">        self.conn=connect(ip,port) <span class="comment"># ä¼ªä»£ç ï¼Œå‘èµ·ç½‘ç»œè¿æ¥ï¼Œéœ€è¦å ç”¨ç³»ç»Ÿèµ„æº</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.conn.close() <span class="comment"># å…³é—­ç½‘ç»œè¿æ¥ï¼Œå›æ”¶ç³»ç»Ÿèµ„æº</span></span><br><span class="line"></span><br><span class="line">obj=MySQL(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">3306</span>) <span class="comment"># åœ¨å¯¹è±¡objè¢«åˆ é™¤æ—¶ï¼Œè‡ªåŠ¨è§¦å‘obj.__del__()</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-d760c34985ac2f1797ea5c3e718e28be_720w.jpg" alt="img"></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>30-å¼‚å¸¸å¤„ç†</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/30_%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<h2 id="ä¸€-ä»€ä¹ˆæ˜¯å¼‚å¸¸"><a href="#ä¸€-ä»€ä¹ˆæ˜¯å¼‚å¸¸" class="headerlink" title="ä¸€ ä»€ä¹ˆæ˜¯å¼‚å¸¸"></a>ä¸€ ä»€ä¹ˆæ˜¯å¼‚å¸¸</h2><p>å¼‚å¸¸æ˜¯ç¨‹åºå‘ç”Ÿé”™è¯¯çš„ä¿¡å·ã€‚ç¨‹åºä¸€æ—¦å‡ºç°é”™è¯¯ï¼Œä¾¿ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸ï¼Œè‹¥ç¨‹åºä¸­æ²¡æœ‰å¤„ç†å®ƒï¼Œå°±ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸ï¼Œç¨‹åºçš„è¿è¡Œä¹Ÿéšä¹‹ç»ˆæ­¢ã€‚åœ¨Pythonä¸­,é”™è¯¯è§¦å‘çš„å¼‚å¸¸å¦‚ä¸‹</p>
<p><img src="https://pic3.zhimg.com/80/v2-4653ca6dbe955793d1e4ed1fb750ce86_720w.jpg" alt="img"></p>
<p>è€Œé”™è¯¯åˆ†æˆä¸¤ç§ï¼Œä¸€ç§æ˜¯è¯­æ³•ä¸Šçš„é”™è¯¯SyntaxErrorï¼Œè¿™ç§é”™è¯¯åº”è¯¥åœ¨ç¨‹åºè¿è¡Œå‰å°±ä¿®æ”¹æ­£ç¡®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">if</span>  </span><br><span class="line">  File <span class="string">&quot;&lt;stdin&gt;&quot;</span>, line <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span></span><br><span class="line">     ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure>

<p>å¦ä¸€ç±»å°±æ˜¯é€»è¾‘é”™è¯¯ï¼Œå¸¸è§çš„é€»è¾‘é”™è¯¯å¦‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># TypeErrorï¼šæ•°å­—ç±»å‹æ— æ³•ä¸å­—ç¬¦ä¸²ç±»å‹ç›¸åŠ </span></span><br><span class="line"><span class="number">1</span>+â€™<span class="number">2</span>â€™</span><br><span class="line"></span><br><span class="line"><span class="comment"># ValueErrorï¼šå½“å­—ç¬¦ä¸²åŒ…å«æœ‰éæ•°å­—çš„å€¼æ—¶ï¼Œæ— æ³•è½¬æˆintç±»å‹</span></span><br><span class="line">num=<span class="built_in">input</span>(<span class="string">&quot;&gt;&gt;: &quot;</span>) <span class="comment">#è¾“å…¥hello</span></span><br><span class="line"><span class="built_in">int</span>(num)</span><br><span class="line"></span><br><span class="line"><span class="comment"># NameErrorï¼šå¼•ç”¨äº†ä¸€ä¸ªä¸å­˜åœ¨çš„åå­—x</span></span><br><span class="line">x</span><br><span class="line"></span><br><span class="line"><span class="comment"># IndexErrorï¼šç´¢å¼•è¶…å‡ºåˆ—è¡¨çš„é™åˆ¶</span></span><br><span class="line">l=[<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;aa&#x27;</span>]</span><br><span class="line">l[<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># KeyErrorï¼šå¼•ç”¨äº†ä¸€ä¸ªä¸å­˜åœ¨çš„key</span></span><br><span class="line">dic=&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;egon&#x27;</span>&#125;</span><br><span class="line">dic[<span class="string">&#x27;age&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># AttributeErrorï¼šå¼•ç”¨çš„å±æ€§ä¸å­˜åœ¨</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">Foo.x</span><br><span class="line"></span><br><span class="line"><span class="comment"># ZeroDivisionErrorï¼šé™¤æ•°ä¸èƒ½ä¸º0</span></span><br><span class="line"><span class="number">1</span>/<span class="number">0</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-c568557e9385e17985dca3108dd58981_720w.jpg" alt="img"></p>
<h2 id="äºŒ-å¼‚å¸¸å¤„ç†"><a href="#äºŒ-å¼‚å¸¸å¤„ç†" class="headerlink" title="äºŒ å¼‚å¸¸å¤„ç†"></a>äºŒ å¼‚å¸¸å¤„ç†</h2><p>ä¸ºäº†ä¿è¯ç¨‹åºçš„å®¹é”™æ€§ä¸å¯é æ€§ï¼Œå³åœ¨é‡åˆ°é”™è¯¯æ—¶æœ‰ç›¸åº”çš„å¤„ç†æœºåˆ¶ä¸ä¼šä»»ç”±ç¨‹åºå´©æºƒæ‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œå¤„ç†çš„åŸºæœ¬å½¢å¼ä¸º</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    è¢«æ£€æµ‹çš„ä»£ç å—</span><br><span class="line"><span class="keyword">except</span> å¼‚å¸¸ç±»å‹ï¼š</span><br><span class="line">    æ£€æµ‹åˆ°å¼‚å¸¸ï¼Œå°±æ‰§è¡Œè¿™ä¸ªä½ç½®çš„é€»è¾‘</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;start...&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(x) <span class="comment"># å¼•ç”¨äº†ä¸€ä¸ªä¸å­˜åœ¨çš„åå­—ï¼Œè§¦å‘å¼‚å¸¸NameError</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;end...&#x27;</span>)</span><br><span class="line"><span class="keyword">except</span> NameError <span class="keyword">as</span> e: <span class="comment"># asè¯­æ³•å°†å¼‚å¸¸ç±»å‹çš„å€¼èµ‹å€¼ç»™å˜é‡eï¼Œè¿™æ ·æˆ‘ä»¬é€šè¿‡æ‰“å°eä¾¿å¯ä»¥çŸ¥é“é”™è¯¯çš„åŸå› </span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å¼‚å¸¸å€¼ä¸ºï¼š%s&#x27;</span> %e)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;run other code...&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰§è¡Œç»“æœä¸º</span></span><br><span class="line">start...</span><br><span class="line">å¼‚å¸¸å€¼ä¸ºï¼šname <span class="string">&#x27;x&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br><span class="line">run other code...</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-eb6851dbe7f64728348b5abb9b54934e_720w.jpg" alt="img"></p>
<p>æœ¬æ¥ç¨‹åºä¸€æ—¦å‡ºç°å¼‚å¸¸å°±æ•´ä½“ç»“æŸæ‰äº†ï¼Œæœ‰äº†å¼‚å¸¸å¤„ç†ä»¥åï¼Œåœ¨è¢«æ£€æµ‹çš„ä»£ç å—å‡ºç°å¼‚å¸¸æ—¶ï¼Œè¢«æ£€æµ‹çš„ä»£ç å—ä¸­å¼‚å¸¸å‘ç”Ÿä½ç½®ä¹‹åçš„ä»£ç å°†ä¸ä¼šæ‰§è¡Œï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ‰§è¡ŒåŒ¹é…å¼‚å¸¸çš„exceptå­ä»£ç å—ï¼Œå…¶ä½™ä»£ç å‡æ­£å¸¸è¿è¡Œã€‚</p>
<p> å½“è¢«æ£€æµ‹çš„ä»£ç å—ä¸­æœ‰å¯èƒ½è§¦å‘ä¸åŒç±»å‹çš„å¼‚å¸¸æ—¶ï¼Œé’ˆå¯¹ä¸åŒç±»å‹çš„å¼‚å¸¸ï¼š</p>
<p> å¦‚æœæˆ‘ä»¬æƒ³åˆ†åˆ«ç”¨ä¸åŒçš„é€»è¾‘å¤„ç†ï¼Œéœ€è¦ç”¨åˆ°å¤šåˆ†æ”¯çš„exceptï¼ˆç±»ä¼¼äºå¤šåˆ†æ”¯çš„elifï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡åŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸä¸€æ¬¡ä¾¿ä¸å†åŒ¹é…å…¶ä»–ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    è¢«æ£€æµ‹çš„ä»£ç å—</span><br><span class="line"><span class="keyword">except</span> NameError:</span><br><span class="line">    è§¦å‘NameErroræ—¶å¯¹åº”çš„å¤„ç†é€»è¾‘</span><br><span class="line"><span class="keyword">except</span> IndexError:</span><br><span class="line">    è§¦å‘IndexErroræ—¶å¯¹åº”çš„å¤„ç†é€»è¾‘</span><br><span class="line"><span class="keyword">except</span> KeyError:</span><br><span class="line">    è§¦å‘KeyErroræ—¶å¯¹åº”çš„å¤„ç†é€»è¾‘</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">convert_int</span>(<span class="params">obj</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        res=<span class="built_in">int</span>(obj)</span><br><span class="line">    <span class="keyword">except</span> ValueError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;ValueError: %s&#x27;</span> %e)</span><br><span class="line">        res=<span class="literal">None</span></span><br><span class="line">    <span class="keyword">except</span> TypeError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;TypeError: %s&#x27;</span> %e)</span><br><span class="line">        res=<span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">convert_int(<span class="string">&#x27;egon&#x27;</span>) <span class="comment"># ValueError: invalid literal for int() with base 10: &#x27;egon&#x27;</span></span><br><span class="line">convert_int(&#123;<span class="string">&#x27;n&#x27;</span>:<span class="number">1</span>&#125;) <span class="comment"># TypeError: int() argument must be a string, a bytes-like object or a number, not &#x27;dict&#x27;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-350521efd08746dac4bde9049f1e6cee_720w.jpg" alt="img"></p>
<p>å¦‚æœæˆ‘ä»¬æƒ³å¤šç§ç±»å‹çš„å¼‚å¸¸ç»Ÿä¸€ç”¨ä¸€ç§é€»è¾‘å¤„ç†ï¼Œå¯ä»¥å°†å¤šä¸ªå¼‚å¸¸æ”¾åˆ°ä¸€ä¸ªå…ƒç»„å†…ï¼Œç”¨ä¸€ä¸ªexceptåŒ¹é…</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    è¢«æ£€æµ‹çš„ä»£ç å—</span><br><span class="line"><span class="keyword">except</span> (NameError,IndexError,TypeError):</span><br><span class="line">    è§¦å‘NameErroræˆ–IndexErroræˆ–TypeErroræ—¶å¯¹åº”çš„å¤„ç†é€»è¾‘</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">convert_int</span>(<span class="params">obj</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        res=<span class="built_in">int</span>(obj)</span><br><span class="line">    <span class="keyword">except</span> (ValueError,TypeError):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;argument must be number or numeric string&#x27;</span>)</span><br><span class="line">        res=<span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">convert_int(<span class="string">&#x27;egon&#x27;</span>) <span class="comment"># argument must be number or numeric string</span></span><br><span class="line">convert_int(&#123;<span class="string">&#x27;n&#x27;</span>:<span class="number">1</span>&#125;) <span class="comment"># argument must be number or numeric string</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬æƒ³æ•è·æ‰€æœ‰å¼‚å¸¸å¹¶ç”¨ä¸€ç§é€»è¾‘å¤„ç†ï¼ŒPythonæä¾›äº†ä¸€ä¸ªä¸‡èƒ½å¼‚å¸¸ç±»å‹Exception</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    è¢«æ£€æµ‹çš„ä»£ç å—</span><br><span class="line"><span class="keyword">except</span> NameError:</span><br><span class="line">    è§¦å‘NameErroræ—¶å¯¹åº”çš„å¤„ç†é€»è¾‘</span><br><span class="line"><span class="keyword">except</span> IndexError:</span><br><span class="line">    è§¦å‘IndexErroræ—¶å¯¹åº”çš„å¤„ç†é€»è¾‘</span><br><span class="line"><span class="keyword">except</span> Exception:</span><br><span class="line">    å…¶ä»–ç±»å‹çš„å¼‚å¸¸ç»Ÿä¸€ç”¨æ­¤å¤„çš„é€»è¾‘å¤„ç†</span><br></pre></td></tr></table></figure>

<p><img src="https://pic3.zhimg.com/80/v2-3bcb24c9b610fc49cf8a5c65d81ca81e_720w.jpg" alt="img"></p>
<p>åœ¨å¤šåˆ†æ”¯exceptä¹‹åè¿˜å¯ä»¥è·Ÿä¸€ä¸ªelseï¼ˆelseå¿…é¡»è·Ÿåœ¨exceptä¹‹åï¼Œä¸èƒ½å•ç‹¬å­˜åœ¨ï¼‰ï¼Œåªæœ‰åœ¨è¢«æ£€æµ‹çš„ä»£ç å—æ²¡æœ‰è§¦å‘ä»»ä½•å¼‚å¸¸çš„æƒ…å†µä¸‹æ‰ä¼šæ‰§è¡Œelseçš„å­ä»£ç å—</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    è¢«æ£€æµ‹çš„ä»£ç å—</span><br><span class="line"><span class="keyword">except</span> å¼‚å¸¸ç±»å‹<span class="number">1</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">except</span> å¼‚å¸¸ç±»å‹<span class="number">2</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">......</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    æ²¡æœ‰å¼‚å¸¸å‘ç”Ÿæ—¶æ‰§è¡Œçš„ä»£ç å—</span><br></pre></td></tr></table></figure>

<p><img src="https://pic2.zhimg.com/80/v2-0f32aec0c63c6943040c3b6affdabc3d_720w.jpg" alt="img"></p>
<p>æ­¤å¤–tryè¿˜å¯ä»¥ä¸finallyè¿ç”¨ï¼Œä»è¯­æ³•ä¸Šè®²finallyå¿…é¡»æ”¾åˆ°elseä¹‹åï¼Œä½†å¯ä»¥ä½¿ç”¨try-except-finallyçš„å½¢å¼ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨try-finallyçš„å½¢å¼ã€‚æ— è®ºè¢«æ£€æµ‹çš„ä»£ç å—æ˜¯å¦è§¦å‘å¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œfinallyçš„å­ä»£ç å—ï¼Œå› æ­¤é€šå¸¸åœ¨finallyçš„å­ä»£ç å—åšä¸€äº›å›æ”¶èµ„æºçš„æ“ä½œï¼Œæ¯”å¦‚å…³é—­æ‰“å¼€çš„æ–‡ä»¶ã€å…³é—­æ•°æ®åº“è¿æ¥ç­‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python <span class="keyword">try</span>: è¢«æ£€æµ‹çš„ä»£ç å— <span class="keyword">except</span> å¼‚å¸¸ç±»å‹<span class="number">1</span>: <span class="keyword">pass</span> <span class="keyword">except</span> å¼‚å¸¸ç±»å‹<span class="number">2</span>: <span class="keyword">pass</span> ...... <span class="keyword">else</span>: æ²¡æœ‰å¼‚å¸¸å‘ç”Ÿæ—¶æ‰§è¡Œçš„ä»£ç å— <span class="keyword">finally</span>: æ— è®ºæœ‰æ— å¼‚å¸¸å‘ç”Ÿéƒ½ä¼šæ‰§è¡Œçš„ä»£ç å—</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">f=<span class="literal">None</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f=<span class="built_in">open</span>(â€˜db.txtâ€™,<span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    s=f.read().strip()</span><br><span class="line">    <span class="built_in">int</span>(s)  <span class="comment"># è‹¥å­—ç¬¦ä¸²sä¸­åŒ…å«éæ•°å­—æ—¶åˆ™ä¼šè§¦å‘å¼‚å¸¸ValueError</span></span><br><span class="line">    <span class="comment"># f.close() # è‹¥ä¸Šé¢çš„ä»£ç è§¦å‘å¼‚å¸¸ï¼Œåˆ™æ ¹æœ¬ä¸å¯èƒ½æ‰§è¡Œåˆ°æ­¤å¤„çš„ä»£ç ï¼Œåº”è¯¥å°†å…³é—­æ–‡ä»¶çš„æ“ä½œæ”¾åˆ°finallyä¸­</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="keyword">if</span> f: <span class="comment"># æ–‡ä»¶å­˜åœ¨åˆ™fçš„å€¼ä¸ä¸ºNone</span></span><br><span class="line">        f.close()</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸ç¬¦åˆPythonè§£é‡Šå™¨çš„è¯­æ³•æˆ–é€»è¾‘è§„åˆ™æ—¶ï¼Œæ˜¯ç”±Pythonè§£é‡Šå™¨ä¸»åŠ¨è§¦å‘çš„å„ç§ç±»å‹çš„å¼‚å¸¸ï¼Œè€Œå¯¹äºè¿åç¨‹åºå‘˜è‡ªå®šåˆ¶çš„å„ç±»è§„åˆ™ï¼Œåˆ™éœ€è¦ç”±ç¨‹åºå‘˜è‡ªå·±æ¥æ˜ç¡®åœ°è§¦å‘å¼‚å¸¸ï¼Œè¿™å°±ç”¨åˆ°äº†raiseè¯­å¥ï¼Œraiseåå¿…é¡»æ˜¯ä¸€ä¸ªå¼‚å¸¸çš„ç±»æˆ–è€…æ˜¯å¼‚å¸¸çš„å®ä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name,age</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(name,<span class="built_in">str</span>):</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">&#x27;name must be str&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(age,<span class="built_in">int</span>):</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">&#x27;age must be int&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">stu1=Student(<span class="number">4573</span>,<span class="number">18</span>) <span class="comment"># TypeError: name must be str</span></span><br><span class="line">stu2=Student(<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;18&#x27;</span>) <span class="comment"># TypeError: age must be int</span></span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-844dd17bef29d8cd13a459d3c28a9053_720w.jpg" alt="img"></p>
<p>åœ¨å†…ç½®å¼‚å¸¸ä¸å¤Ÿç”¨çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»§æ‰¿å†…ç½®çš„å¼‚å¸¸ç±»æ¥è‡ªå®šä¹‰å¼‚å¸¸ç±»</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PoolEmptyError</span>(<span class="params">Exception</span>):</span> <span class="comment"># å¯ä»¥é€šè¿‡ç»§æ‰¿Exceptionæ¥å®šä¹‰ä¸€ä¸ªå…¨æ–°çš„å¼‚å¸¸</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,value=<span class="string">&#x27;The proxy source is exhausted&#x27;</span></span>):</span> <span class="comment"># å¯ä»¥å®šåˆ¶åˆå§‹åŒ–æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">super</span>(PoolEmptyError,self).__init__()</span><br><span class="line">        self.value=value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span> <span class="comment"># å¯ä»¥å®šä¹‰è¯¥æ–¹æ³•ç”¨æ¥å®šåˆ¶è§¦å‘å¼‚å¸¸æ—¶æ‰“å°å¼‚å¸¸å€¼çš„æ ¼å¼</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&lt; %s &gt;&#x27;</span> %self.value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetworkIOError</span>(<span class="params">IOError</span>):</span> <span class="comment"># ä¹Ÿå¯ä»¥åœ¨ç‰¹å®šå¼‚å¸¸çš„åŸºç¡€ä¸Šæ‰©å±•ä¸€ä¸ªç›¸å…³çš„å¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">raise</span> PoolEmptyError <span class="comment"># __main__.PoolEmptyError: &lt; The proxy source is exhausted &gt;</span></span><br><span class="line"><span class="keyword">raise</span> NetworkIOError(<span class="string">&#x27;è¿æ¥è¢«æ‹’ç»&#x27;</span>) <span class="comment"># __main__.NetworkIOError: è¿æ¥è¢«æ‹’ç»</span></span><br></pre></td></tr></table></figure>

<p>æœ€åï¼ŒPythonè¿˜æä¾›äº†ä¸€ä¸ªæ–­è¨€è¯­å¥assert expressionï¼Œæ–­å®šè¡¨è¾¾å¼expressionæˆç«‹ï¼Œå¦åˆ™è§¦å‘å¼‚å¸¸AssertionErrorï¼Œä¸raise-if-notçš„è¯­ä¹‰ç›¸åŒï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">age=<span class="string">&#x27;18&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è‹¥è¡¨è¾¾å¼isinstance(age,int)è¿”å›å€¼ä¸ºFalseåˆ™è§¦å‘å¼‚å¸¸AssertionError</span></span><br><span class="line"><span class="keyword">assert</span> <span class="built_in">isinstance</span>(age,<span class="built_in">int</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰åŒäº</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(age,<span class="built_in">int</span>):</span><br><span class="line">    <span class="keyword">raise</span> AssertionError</span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-b4c672c234ecd697537f7cfcaac1a828_720w.jpg" alt="img"></p>
<h2 id="ä¸‰-ä½•æ—¶ä½¿ç”¨å¼‚å¸¸å¤„ç†"><a href="#ä¸‰-ä½•æ—¶ä½¿ç”¨å¼‚å¸¸å¤„ç†" class="headerlink" title="ä¸‰ ä½•æ—¶ä½¿ç”¨å¼‚å¸¸å¤„ç†"></a>ä¸‰ ä½•æ—¶ä½¿ç”¨å¼‚å¸¸å¤„ç†</h2><p>åœ¨äº†è§£äº†å¼‚å¸¸å¤„ç†æœºåˆ¶åï¼Œæœ¬ç€æé«˜ç¨‹åºå®¹é”™æ€§å’Œå¯é æ€§çš„ç›®çš„ï¼Œè¯»è€…å¯èƒ½ä¼šé”™è¯¯åœ°è®¤ä¸ºåº”è¯¥å°½å¯èƒ½å¤šåœ°ä¸ºç¨‹åºåŠ ä¸Štryâ€¦exceptâ€¦ï¼Œè¿™å…¶æ˜¯åœ¨è¿‡åº¦æ¶ˆè´¹ç¨‹åºçš„å¯è¯»æ€§ï¼Œå› ä¸ºtryâ€¦exceptæœ¬æ¥å°±æ˜¯ä½ é™„åŠ ç»™ç¨‹åºçš„ä¸€ç§é¢å¤–çš„é€»è¾‘ï¼Œä¸ä½ çš„ä¸»è¦å·¥ä½œæ˜¯æ²¡æœ‰å¤šå¤§å…³ç³»çš„ã€‚</p>
<p> å¦‚æœé”™è¯¯å‘ç”Ÿçš„æ¡ä»¶æ˜¯â€œå¯é¢„çŸ¥çš„â€ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨ifæ¥è¿›è¡Œâ€é¢„é˜²â€ï¼Œå¦‚ä¸‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">age=<span class="built_in">input</span>(<span class="string">&#x27;input your age&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line"><span class="keyword">if</span> age.isdigit(): <span class="comment"># å¯é¢„çŸ¥åªæœ‰æ»¡è¶³å­—ç¬¦ä¸²ageæ˜¯æ•°å­—çš„æ¡ä»¶ï¼Œint(age)æ‰ä¸ä¼šè§¦å‘å¼‚å¸¸ï¼Œ</span></span><br><span class="line">    age=<span class="built_in">int</span>(age)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;You must enter the number&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic1.zhimg.com/80/v2-93ad4d4a063406cea18caa3d056519a0_720w.jpg" alt="img"></p>
<p>å¦‚æœé”™è¯¯å‘ç”Ÿçš„æ¡ä»¶â€œä¸å¯é¢„çŸ¥â€ï¼Œå³å¼‚å¸¸ä¸€å®šä¼šè§¦å‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‰åº”è¯¥ä½¿ç”¨tryâ€¦exceptè¯­å¥æ¥å¤„ç†ã€‚ä¾‹å¦‚æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªä¸‹è½½ç½‘é¡µå†…å®¹çš„åŠŸèƒ½ï¼Œç½‘ç»œå‘ç”Ÿå»¶è¿Ÿä¹‹ç±»çš„å¼‚å¸¸æ˜¯å¾ˆæ­£å¸¸çš„äº‹ï¼Œè€Œæˆ‘ä»¬æ ¹æœ¬æ— æ³•é¢„çŸ¥åœ¨æ»¡è¶³ä»€ä¹ˆæ¡ä»¶çš„æƒ…å†µä¸‹æ‰ä¼šå‡ºç°å»¶è¿Ÿï¼Œå› è€Œåªèƒ½ç”¨å¼‚å¸¸å¤„ç†æœºåˆ¶äº†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> requests.exceptions <span class="keyword">import</span> ConnectTimeout <span class="comment"># å¯¼å…¥requestsæ¨¡å—å†…è‡ªå®šä¹‰çš„å¼‚å¸¸</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">url</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response=requests.get(url,timeout=<span class="number">3</span>)<span class="comment">#è¶…è¿‡3ç§’æœªä¸‹è½½æˆåŠŸåˆ™è§¦å‘ConnectTimeoutå¼‚å¸¸</span></span><br><span class="line">        res=response.text</span><br><span class="line">    <span class="keyword">except</span> ConnectTimeout:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¿æ¥è¯·æ±‚è¶…æ—¶&#x27;</span>)</span><br><span class="line">        res=<span class="literal">None</span></span><br><span class="line">    <span class="keyword">except</span> Exception:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;ç½‘ç»œå‡ºç°å…¶ä»–å¼‚å¸¸&#x27;</span>)</span><br><span class="line">        res=<span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">get(<span class="string">&#x27;https://www.python.org&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="https://pic4.zhimg.com/80/v2-7f0323790a39e9352c1a1a6671fb9623_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73346821?p=6">pythonå¿«é€Ÿå…¥é—¨è¡¥å……_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73346821?p=6<img src="https://pic4.zhimg.com/v2-2e36f1807728ea385dcbcf702a634e37_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>31-ç½‘ç»œç¼–ç¨‹</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/31_%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/</url>
    <content><![CDATA[<h2 id="ä¸€-å®¢æˆ·ç«¯-x2F-æœåŠ¡å™¨æ¶æ„"><a href="#ä¸€-å®¢æˆ·ç«¯-x2F-æœåŠ¡å™¨æ¶æ„" class="headerlink" title="ä¸€ å®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨æ¶æ„"></a>ä¸€ å®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨æ¶æ„</h2><p>1.ç¡¬ä»¶C&#x2F;Sæ¶æ„(æ‰“å°æœº)</p>
<p>2.è½¯ä»¶C&#x2F;Sæ¶æ„</p>
<p><em>äº’è”ç½‘ä¸­å¤„å¤„æ˜¯C&#x2F;Sæ¶æ„</em></p>
<p><em>å¦‚é»„è‰²ç½‘ç«™æ˜¯æœåŠ¡ç«¯ï¼Œä½ çš„æµè§ˆå™¨æ˜¯å®¢æˆ·ç«¯ï¼ˆB&#x2F;Sæ¶æ„ä¹Ÿæ˜¯C&#x2F;Sæ¶æ„çš„ä¸€ç§ï¼‰</em></p>
<p><em>è…¾è®¯ä½œä¸ºæœåŠ¡ç«¯ä¸ºä½ æä¾›è§†é¢‘ï¼Œä½ å¾—ä¸‹ä¸ªè…¾è®¯è§†é¢‘å®¢æˆ·ç«¯æ‰èƒ½çœ‹å®ƒçš„è§†é¢‘ï¼‰</em></p>
<p>C&#x2F;Sæ¶æ„ä¸socketçš„å…³ç³»ï¼š</p>
<p><em>æˆ‘ä»¬å­¦ä¹ socketå°±æ˜¯ä¸ºäº†å®ŒæˆC&#x2F;Sæ¶æ„çš„å¼€å‘</em></p>
<h3 id="äºŒ-osiä¸ƒå±‚"><a href="#äºŒ-osiä¸ƒå±‚" class="headerlink" title="äºŒ osiä¸ƒå±‚"></a>äºŒ osiä¸ƒå±‚</h3><p><strong>å¼•å­ï¼š</strong></p>
<p><em>é¡»çŸ¥ä¸€ä¸ªå®Œæ•´çš„è®¡ç®—æœºç³»ç»Ÿæ˜¯ç”±ç¡¬ä»¶ã€æ“ä½œç³»ç»Ÿã€åº”ç”¨è½¯ä»¶ä¸‰è€…ç»„æˆ,å…·å¤‡äº†è¿™ä¸‰ä¸ªæ¡ä»¶ï¼Œä¸€å°è®¡ç®—æœºç³»ç»Ÿå°±å¯ä»¥è‡ªå·±è·Ÿè‡ªå·±ç©äº†ï¼ˆæ‰“ä¸ªå•æœºæ¸¸æˆï¼Œç©ä¸ªæ‰«é›·å•¥çš„ï¼‰</em></p>
<p><em>å¦‚æœä½ è¦è·Ÿåˆ«äººä¸€èµ·ç©ï¼Œé‚£ä½ å°±éœ€è¦ä¸Šç½‘äº†ï¼Œä»€ä¹ˆæ˜¯äº’è”ç½‘ï¼Ÿ</em></p>
<p><em>äº’è”ç½‘çš„æ ¸å¿ƒå°±æ˜¯ç”±ä¸€å †åè®®ç»„æˆï¼Œåè®®å°±æ˜¯æ ‡å‡†ï¼Œæ¯”å¦‚å…¨ä¸–ç•Œäººé€šä¿¡çš„æ ‡å‡†æ˜¯è‹±è¯­</em></p>
<p><em>å¦‚æœæŠŠè®¡ç®—æœºæ¯”ä½œäººï¼Œäº’è”ç½‘åè®®å°±æ˜¯è®¡ç®—æœºç•Œçš„è‹±è¯­ã€‚æ‰€æœ‰çš„è®¡ç®—æœºéƒ½å­¦ä¼šäº†äº’è”ç½‘åè®®ï¼Œé‚£æ‰€æœ‰çš„è®¡ç®—æœºéƒ½å°±å¯ä»¥æŒ‰ç…§ç»Ÿä¸€çš„æ ‡å‡†å»æ”¶å‘ä¿¡æ¯ä»è€Œå®Œæˆé€šä¿¡äº†ã€‚</em></p>
<p><em>äººä»¬æŒ‰ç…§åˆ†å·¥ä¸åŒæŠŠäº’è”ç½‘åè®®ä»é€»è¾‘ä¸Šåˆ’åˆ†äº†å±‚çº§ï¼Œ</em></p>
<p><a href="https://link.zhihu.com/?target=http://www.cnblogs.com/linhaifeng/articles/5937962.html">è¯¦è§ç½‘ç»œé€šä¿¡åŸç†ï¼šhttp://www.cnblogs.com/linhaifeng/articles/5937962.html</a></p>
<p><strong>ä¸ºä½•å­¦ä¹ socketä¸€å®šè¦å…ˆå­¦ä¹ äº’è”ç½‘åè®®ï¼š</strong></p>
<p><em>1.é¦–å…ˆï¼šæœ¬èŠ‚è¯¾ç¨‹çš„ç›®æ ‡å°±æ˜¯æ•™ä¼šä½ å¦‚ä½•åŸºäºsocketç¼–ç¨‹ï¼Œæ¥å¼€å‘ä¸€æ¬¾è‡ªå·±çš„C&#x2F;Sæ¶æ„è½¯ä»¶</em></p>
<p><em>2.å…¶æ¬¡ï¼šC&#x2F;Sæ¶æ„çš„è½¯ä»¶ï¼ˆè½¯ä»¶å±äºåº”ç”¨å±‚ï¼‰æ˜¯åŸºäºç½‘ç»œè¿›è¡Œé€šä¿¡çš„</em></p>
<p><em>3.ç„¶åï¼šç½‘ç»œçš„æ ¸å¿ƒå³ä¸€å †åè®®ï¼Œåè®®å³æ ‡å‡†ï¼Œä½ æƒ³å¼€å‘ä¸€æ¬¾åŸºäºç½‘ç»œé€šä¿¡çš„è½¯ä»¶ï¼Œå°±å¿…é¡»éµå¾ªè¿™äº›æ ‡å‡†ã€‚</em></p>
<p><em>4.æœ€åï¼šå°±è®©æˆ‘ä»¬ä»è¿™äº›æ ‡å‡†å¼€å§‹ç ”ç©¶ï¼Œå¼€å¯æˆ‘ä»¬çš„socketç¼–ç¨‹ä¹‹æ—…</em></p>
<p><img src="https://pic4.zhimg.com/80/v2-3f2ab5646d1bbca993e920c8ae27f40f_720w.jpg" alt="img"></p>
<p> å›¾1</p>
<h3 id="ä¸‰-socketå±‚"><a href="#ä¸‰-socketå±‚" class="headerlink" title="ä¸‰ socketå±‚"></a>ä¸‰ socketå±‚</h3><p>åœ¨å›¾1ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰çœ‹åˆ°Socketçš„å½±å­ï¼Œé‚£ä¹ˆå®ƒåˆ°åº•åœ¨å“ªé‡Œå‘¢ï¼Ÿè¿˜æ˜¯ç”¨å›¾æ¥è¯´è¯ï¼Œä¸€ç›®äº†ç„¶ã€‚</p>
<p><img src="https://pic3.zhimg.com/80/v2-a4a1fd105e5e7af5d7db820b303ad7e2_720w.jpg" alt="img"></p>
<p><strong>å›¾2</strong></p>
<h3 id="å››-socketæ˜¯ä»€ä¹ˆ"><a href="#å››-socketæ˜¯ä»€ä¹ˆ" class="headerlink" title="å›› socketæ˜¯ä»€ä¹ˆ"></a>å›› socketæ˜¯ä»€ä¹ˆ</h3><p>Socketæ˜¯åº”ç”¨å±‚ä¸TCP&#x2F;IPåè®®æ—é€šä¿¡çš„ä¸­é—´è½¯ä»¶æŠ½è±¡å±‚ï¼Œå®ƒæ˜¯ä¸€ç»„æ¥å£ã€‚åœ¨è®¾è®¡æ¨¡å¼ä¸­ï¼ŒSocketå…¶å®å°±æ˜¯ä¸€ä¸ªé—¨é¢æ¨¡å¼ï¼Œå®ƒæŠŠå¤æ‚çš„TCP&#x2F;IPåè®®æ—éšè—åœ¨Socketæ¥å£åé¢ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ï¼Œä¸€ç»„ç®€å•çš„æ¥å£å°±æ˜¯å…¨éƒ¨ï¼Œè®©Socketå»ç»„ç»‡æ•°æ®ï¼Œä»¥ç¬¦åˆæŒ‡å®šçš„åè®®ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬æ— éœ€æ·±å…¥ç†è§£tcp&#x2F;udpåè®®ï¼Œsocketå·²ç»ä¸ºæˆ‘ä»¬å°è£…å¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦éµå¾ªsocketçš„è§„å®šå»ç¼–ç¨‹ï¼Œå†™å‡ºçš„ç¨‹åºè‡ªç„¶å°±æ˜¯éµå¾ªtcp&#x2F;udpæ ‡å‡†çš„ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ä¹Ÿæœ‰äººå°†socketè¯´æˆip+portï¼Œipæ˜¯ç”¨æ¥æ ‡è¯†äº’è”ç½‘ä¸­çš„ä¸€å°ä¸»æœºçš„ä½ç½®ï¼Œè€Œportæ˜¯ç”¨æ¥æ ‡è¯†è¿™å°æœºå™¨ä¸Šçš„ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œipåœ°å€æ˜¯é…ç½®åˆ°ç½‘å¡ä¸Šçš„ï¼Œè€Œportæ˜¯åº”ç”¨ç¨‹åºå¼€å¯çš„ï¼Œipä¸portçš„ç»‘å®šå°±æ ‡è¯†äº†äº’è”ç½‘ä¸­ç‹¬ä¸€æ— äºŒçš„ä¸€ä¸ªåº”ç”¨ç¨‹åº</span><br><span class="line"></span><br><span class="line">è€Œç¨‹åºçš„pidæ˜¯åŒä¸€å°æœºå™¨ä¸Šä¸åŒè¿›ç¨‹æˆ–è€…çº¿ç¨‹çš„æ ‡è¯†</span><br></pre></td></tr></table></figure>

<h3 id="äº”-å¥—æ¥å­—å‘å±•å²åŠåˆ†ç±»"><a href="#äº”-å¥—æ¥å­—å‘å±•å²åŠåˆ†ç±»" class="headerlink" title="äº” å¥—æ¥å­—å‘å±•å²åŠåˆ†ç±»"></a>äº” å¥—æ¥å­—å‘å±•å²åŠåˆ†ç±»</h3><p>å¥—æ¥å­—èµ·æºäº 20 ä¸–çºª 70 å¹´ä»£åŠ åˆ©ç¦å°¼äºšå¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡ç‰ˆæœ¬çš„ Unix,å³äººä»¬æ‰€è¯´çš„ BSD Unixã€‚ å› æ­¤,æœ‰æ—¶äººä»¬ä¹ŸæŠŠå¥—æ¥å­—ç§°ä¸ºâ€œä¼¯å…‹åˆ©å¥—æ¥å­—â€æˆ–â€œBSD å¥—æ¥å­—â€ã€‚ä¸€å¼€å§‹,å¥—æ¥å­—è¢«è®¾è®¡ç”¨åœ¨åŒ ä¸€å°ä¸»æœºä¸Šå¤šä¸ªåº”ç”¨ç¨‹åºä¹‹é—´çš„é€šè®¯ã€‚è¿™ä¹Ÿè¢«ç§°è¿›ç¨‹é—´é€šè®¯,æˆ– IPCã€‚å¥—æ¥å­—æœ‰ä¸¤ç§ï¼ˆæˆ–è€…ç§°ä¸ºæœ‰ä¸¤ä¸ªç§æ—ï¼‰,åˆ†åˆ«æ˜¯åŸºäºæ–‡ä»¶å‹çš„å’ŒåŸºäºç½‘ç»œå‹çš„ã€‚</p>
<p>*<strong>åŸºäºæ–‡ä»¶ç±»å‹çš„å¥—æ¥å­—å®¶æ—*</strong></p>
<p>å¥—æ¥å­—å®¶æ—çš„åå­—ï¼šAF_UNIX</p>
<p>unixä¸€åˆ‡çš†æ–‡ä»¶ï¼ŒåŸºäºæ–‡ä»¶çš„å¥—æ¥å­—è°ƒç”¨çš„å°±æ˜¯åº•å±‚çš„æ–‡ä»¶ç³»ç»Ÿæ¥å–æ•°æ®ï¼Œä¸¤ä¸ªå¥—æ¥å­—è¿›ç¨‹è¿è¡Œåœ¨åŒä¸€æœºå™¨ï¼Œå¯ä»¥é€šè¿‡è®¿é—®åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿé—´æ¥å®Œæˆé€šä¿¡</p>
<p>*<strong>åŸºäºç½‘ç»œç±»å‹çš„å¥—æ¥å­—å®¶æ—*</strong></p>
<p>å¥—æ¥å­—å®¶æ—çš„åå­—ï¼šAF_INET</p>
<p>(è¿˜æœ‰AF_INET6è¢«ç”¨äºipv6ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„åœ°å€å®¶æ—ï¼Œä¸è¿‡ï¼Œä»–ä»¬è¦ä¹ˆæ˜¯åªç”¨äºæŸä¸ªå¹³å°ï¼Œè¦ä¹ˆå°±æ˜¯å·²ç»è¢«åºŸå¼ƒï¼Œæˆ–è€…æ˜¯å¾ˆå°‘è¢«ä½¿ç”¨ï¼Œæˆ–è€…æ˜¯æ ¹æœ¬æ²¡æœ‰å®ç°ï¼Œæ‰€æœ‰åœ°å€å®¶æ—ä¸­ï¼ŒAF_INETæ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„ä¸€ä¸ªï¼Œpythonæ”¯æŒå¾ˆå¤šç§åœ°å€å®¶æ—ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬åªå…³å¿ƒç½‘ç»œç¼–ç¨‹ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æ—¶å€™æˆ‘ä¹ˆåªä½¿ç”¨AF_INET)</p>
<h3 id="å…­-å¥—æ¥å­—å·¥ä½œæµç¨‹"><a href="#å…­-å¥—æ¥å­—å·¥ä½œæµç¨‹" class="headerlink" title="å…­ å¥—æ¥å­—å·¥ä½œæµç¨‹"></a>å…­ å¥—æ¥å­—å·¥ä½œæµç¨‹</h3><p> ä¸€ä¸ªç”Ÿæ´»ä¸­çš„åœºæ™¯ã€‚ä½ è¦æ‰“ç”µè¯ç»™ä¸€ä¸ªæœ‹å‹ï¼Œå…ˆæ‹¨å·ï¼Œæœ‹å‹å¬åˆ°ç”µè¯é“ƒå£°åæèµ·ç”µè¯ï¼Œè¿™æ—¶ä½ å’Œä½ çš„æœ‹å‹å°±å»ºç«‹èµ·äº†è¿æ¥ï¼Œå°±å¯ä»¥è®²è¯äº†ã€‚ç­‰äº¤æµç»“æŸï¼ŒæŒ‚æ–­ç”µè¯ç»“æŸæ­¤æ¬¡äº¤è°ˆã€‚ ç”Ÿæ´»ä¸­çš„åœºæ™¯å°±è§£é‡Šäº†è¿™å·¥ä½œåŸç†ã€‚</p>
<p><img src="https://pic1.zhimg.com/80/v2-7d4ff6c59a5201bac25926b792826a40_720w.jpg" alt="img"></p>
<p> å›¾3</p>
<p>å…ˆä»æœåŠ¡å™¨ç«¯è¯´èµ·ã€‚æœåŠ¡å™¨ç«¯å…ˆåˆå§‹åŒ–Socketï¼Œç„¶åä¸ç«¯å£ç»‘å®š(bind)ï¼Œå¯¹ç«¯å£è¿›è¡Œç›‘å¬(listen)ï¼Œè°ƒç”¨accepté˜»å¡ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ã€‚åœ¨è¿™æ—¶å¦‚æœæœ‰ä¸ªå®¢æˆ·ç«¯åˆå§‹åŒ–ä¸€ä¸ªSocketï¼Œç„¶åè¿æ¥æœåŠ¡å™¨(connect)ï¼Œå¦‚æœè¿æ¥æˆåŠŸï¼Œè¿™æ—¶å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯çš„è¿æ¥å°±å»ºç«‹äº†ã€‚å®¢æˆ·ç«¯å‘é€æ•°æ®è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯æ¥æ”¶è¯·æ±‚å¹¶å¤„ç†è¯·æ±‚ï¼Œç„¶åæŠŠå›åº”æ•°æ®å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯è¯»å–æ•°æ®ï¼Œæœ€åå…³é—­è¿æ¥ï¼Œä¸€æ¬¡äº¤äº’ç»“æŸ</p>
<p>socket()æ¨¡å—å‡½æ•°ç”¨æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> <span class="keyword">import</span> socket</span><br><span class="line"> <span class="number">2</span> socket.socket(socket_family,socket_type,protocal=<span class="number">0</span>)</span><br><span class="line"> <span class="number">3</span> socket_family å¯ä»¥æ˜¯ AF_UNIX æˆ– AF_INETã€‚socket_type å¯ä»¥æ˜¯ SOCK_STREAM æˆ– SOCK_DGRAMã€‚protocol ä¸€èˆ¬ä¸å¡«,é»˜è®¤å€¼ä¸º <span class="number">0</span>ã€‚</span><br><span class="line"> <span class="number">4</span> </span><br><span class="line"> <span class="number">5</span> è·å–tcp/ipå¥—æ¥å­—</span><br><span class="line"> <span class="number">6</span> tcpSock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"> <span class="number">7</span> </span><br><span class="line"> <span class="number">8</span> è·å–udp/ipå¥—æ¥å­—</span><br><span class="line"> <span class="number">9</span> udpSock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line"><span class="number">10</span> </span><br><span class="line"><span class="number">11</span> ç”±äº socket æ¨¡å—ä¸­æœ‰å¤ªå¤šçš„å±æ€§ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œç ´ä¾‹ä½¿ç”¨äº†<span class="string">&#x27;from module import *&#x27;</span>è¯­å¥ã€‚ä½¿ç”¨ <span class="string">&#x27;from socket import *&#x27;</span>,æˆ‘ä»¬å°±æŠŠ socket æ¨¡å—é‡Œçš„æ‰€æœ‰å±æ€§éƒ½å¸¦åˆ°æˆ‘ä»¬çš„å‘½åç©ºé—´é‡Œäº†,è¿™æ ·èƒ½ å¤§å¹…å‡çŸ­æˆ‘ä»¬çš„ä»£ç ã€‚</span><br><span class="line"><span class="number">12</span> ä¾‹å¦‚tcpSock = socket(AF_INET, SOCK_STREAM</span><br></pre></td></tr></table></figure>

<p><em><strong>æœåŠ¡ç«¯å¥—æ¥å­—å‡½æ•°</strong></em><br>s.bind() ç»‘å®š(ä¸»æœº,ç«¯å£å·)åˆ°å¥—æ¥å­—<br>s.listen() å¼€å§‹TCPç›‘å¬<br>s.accept() è¢«åŠ¨æ¥å—TCPå®¢æˆ·çš„è¿æ¥,(é˜»å¡å¼)ç­‰å¾…è¿æ¥çš„åˆ°æ¥</p>
<p><em><strong>å®¢æˆ·ç«¯å¥—æ¥å­—å‡½æ•°</strong></em><br>s.connect() ä¸»åŠ¨åˆå§‹åŒ–TCPæœåŠ¡å™¨è¿æ¥<br>s.connect_ex() connect()å‡½æ•°çš„æ‰©å±•ç‰ˆæœ¬,å‡ºé”™æ—¶è¿”å›å‡ºé”™ç ,è€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸</p>
<p><em><strong>å…¬å…±ç”¨é€”çš„å¥—æ¥å­—å‡½æ•°</strong></em><br>s.recv() æ¥æ”¶TCPæ•°æ®<br>s.send() å‘é€TCPæ•°æ®(sendåœ¨å¾…å‘é€æ•°æ®é‡å¤§äºå·±ç«¯ç¼“å­˜åŒºå‰©ä½™ç©ºé—´æ—¶,æ•°æ®ä¸¢å¤±,ä¸ä¼šå‘å®Œ)<br>s.sendall() å‘é€å®Œæ•´çš„TCPæ•°æ®(æœ¬è´¨å°±æ˜¯å¾ªç¯è°ƒç”¨send,sendallåœ¨å¾…å‘é€æ•°æ®é‡å¤§äºå·±ç«¯ç¼“å­˜åŒºå‰©ä½™ç©ºé—´æ—¶,æ•°æ®ä¸ä¸¢å¤±,å¾ªç¯è°ƒç”¨sendç›´åˆ°å‘å®Œ)<br>s.recvfrom() æ¥æ”¶UDPæ•°æ®<br>s.sendto() å‘é€UDPæ•°æ®<br>s.getpeername() è¿æ¥åˆ°å½“å‰å¥—æ¥å­—çš„è¿œç«¯çš„åœ°å€<br>s.getsockname() å½“å‰å¥—æ¥å­—çš„åœ°å€<br>s.getsockopt() è¿”å›æŒ‡å®šå¥—æ¥å­—çš„å‚æ•°<br>s.setsockopt() è®¾ç½®æŒ‡å®šå¥—æ¥å­—çš„å‚æ•°<br>s.close() å…³é—­å¥—æ¥å­—</p>
<p><em><strong>é¢å‘é”çš„å¥—æ¥å­—æ–¹æ³•</strong></em><br>s.setblocking() è®¾ç½®å¥—æ¥å­—çš„é˜»å¡ä¸éé˜»å¡æ¨¡å¼<br>s.settimeout() è®¾ç½®é˜»å¡å¥—æ¥å­—æ“ä½œçš„è¶…æ—¶æ—¶é—´<br>s.gettimeout() å¾—åˆ°é˜»å¡å¥—æ¥å­—æ“ä½œçš„è¶…æ—¶æ—¶é—´</p>
<p><em><strong>é¢å‘æ–‡ä»¶çš„å¥—æ¥å­—çš„å‡½æ•°</strong></em><br>s.fileno() å¥—æ¥å­—çš„æ–‡ä»¶æè¿°ç¬¦<br>s.makefile() åˆ›å»ºä¸€ä¸ªä¸è¯¥å¥—æ¥å­—ç›¸å…³çš„æ–‡ä»¶</p>
<h3 id="ä¸ƒ-åŸºäºTCPçš„å¥—æ¥å­—"><a href="#ä¸ƒ-åŸºäºTCPçš„å¥—æ¥å­—" class="headerlink" title="ä¸ƒ åŸºäºTCPçš„å¥—æ¥å­—"></a>ä¸ƒ åŸºäºTCPçš„å¥—æ¥å­—</h3><p>*<strong>tcpæ˜¯åŸºäºé“¾æ¥çš„ï¼Œå¿…é¡»å…ˆå¯åŠ¨æœåŠ¡ç«¯ï¼Œç„¶åå†å¯åŠ¨å®¢æˆ·ç«¯å»é“¾æ¥æœåŠ¡ç«¯*</strong></p>
<p>*<strong>tcpæœåŠ¡ç«¯*</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> ss = socket() <span class="comment">#åˆ›å»ºæœåŠ¡å™¨å¥—æ¥å­—</span></span><br><span class="line"><span class="number">2</span> ss.bind()      <span class="comment">#æŠŠåœ°å€ç»‘å®šåˆ°å¥—æ¥å­—</span></span><br><span class="line"><span class="number">3</span> ss.listen()      <span class="comment">#ç›‘å¬é“¾æ¥</span></span><br><span class="line"><span class="number">4</span> inf_loop:      <span class="comment">#æœåŠ¡å™¨æ— é™å¾ªç¯</span></span><br><span class="line"><span class="number">5</span>     cs = ss.accept() <span class="comment">#æ¥å—å®¢æˆ·ç«¯é“¾æ¥</span></span><br><span class="line"><span class="number">6</span>     comm_loop:         <span class="comment">#é€šè®¯å¾ªç¯</span></span><br><span class="line"><span class="number">7</span>         cs.recv()/cs.send() <span class="comment">#å¯¹è¯(æ¥æ”¶ä¸å‘é€)</span></span><br><span class="line"><span class="number">8</span>     cs.close()    <span class="comment">#å…³é—­å®¢æˆ·ç«¯å¥—æ¥å­—</span></span><br><span class="line"><span class="number">9</span> ss.close()        <span class="comment">#å…³é—­æœåŠ¡å™¨å¥—æ¥å­—(å¯é€‰)</span></span><br></pre></td></tr></table></figure>

<p>*<strong>tcpå®¢æˆ·ç«¯*</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> cs = socket()    <span class="comment"># åˆ›å»ºå®¢æˆ·å¥—æ¥å­—</span></span><br><span class="line"><span class="number">2</span> cs.connect()    <span class="comment"># å°è¯•è¿æ¥æœåŠ¡å™¨</span></span><br><span class="line"><span class="number">3</span> comm_loop:        <span class="comment"># é€šè®¯å¾ªç¯</span></span><br><span class="line"><span class="number">4</span>     cs.send()/cs.recv()    <span class="comment"># å¯¹è¯(å‘é€/æ¥æ”¶)</span></span><br><span class="line"><span class="number">5</span> cs.close()            <span class="comment"># å…³é—­å®¢æˆ·å¥—æ¥å­—</span></span><br></pre></td></tr></table></figure>

<p>socketé€šä¿¡æµç¨‹ä¸æ‰“ç”µè¯æµç¨‹ç±»ä¼¼ï¼Œæˆ‘ä»¬å°±ä»¥æ‰“ç”µè¯ä¸ºä¾‹æ¥å®ç°ä¸€ä¸ªlowç‰ˆçš„å¥—æ¥å­—é€šä¿¡</p>
<p>æœåŠ¡ç«¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">9000</span>)  <span class="comment">#ç”µè¯å¡</span></span><br><span class="line">BUFSIZE=<span class="number">1024</span>                <span class="comment">#æ”¶å‘æ¶ˆæ¯çš„å°ºå¯¸</span></span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM) <span class="comment">#ä¹°æ‰‹æœº</span></span><br><span class="line">s.bind(ip_port) <span class="comment">#æ‰‹æœºæ’å¡</span></span><br><span class="line">s.listen(<span class="number">5</span>)     <span class="comment">#æ‰‹æœºå¾…æœº</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">conn,addr=s.accept()            <span class="comment">#æ‰‹æœºæ¥ç”µè¯</span></span><br><span class="line"><span class="comment"># print(conn)</span></span><br><span class="line"><span class="comment"># print(addr)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;æ¥åˆ°æ¥è‡ª%sçš„ç”µè¯&#x27;</span> %addr[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">msg=conn.recv(BUFSIZE)             <span class="comment">#å¬æ¶ˆæ¯,å¬è¯</span></span><br><span class="line"><span class="built_in">print</span>(msg,<span class="built_in">type</span>(msg))</span><br><span class="line"></span><br><span class="line">conn.send(msg.upper())          <span class="comment">#å‘æ¶ˆæ¯,è¯´è¯</span></span><br><span class="line"></span><br><span class="line">conn.close()                    <span class="comment">#æŒ‚ç”µè¯</span></span><br><span class="line"></span><br><span class="line">s.close()                       <span class="comment">#æ‰‹æœºå…³æœº</span></span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">9000</span>)</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line">s.connect_ex(ip_port)           <span class="comment">#æ‹¨ç”µè¯</span></span><br><span class="line"></span><br><span class="line">s.send(<span class="string">&#x27;linhaifeng nb&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))         <span class="comment">#å‘æ¶ˆæ¯,è¯´è¯(åªèƒ½å‘é€å­—èŠ‚ç±»å‹)</span></span><br><span class="line"></span><br><span class="line">feedback=s.recv(BUFSIZE)                           <span class="comment">#æ”¶æ¶ˆæ¯,å¬è¯</span></span><br><span class="line"><span class="built_in">print</span>(feedback.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">s.close()                                       <span class="comment">#æŒ‚ç”µè¯</span></span><br></pre></td></tr></table></figure>

<p>åŠ ä¸Šé“¾æ¥å¾ªç¯ä¸é€šä¿¡å¾ªç¯</p>
<p>æœåŠ¡ç«¯æ”¹è¿›ç‰ˆ:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8081</span>)<span class="comment">#ç”µè¯å¡</span></span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM) <span class="comment">#ä¹°æ‰‹æœº</span></span><br><span class="line">s.bind(ip_port) <span class="comment">#æ‰‹æœºæ’å¡</span></span><br><span class="line">s.listen(<span class="number">5</span>)     <span class="comment">#æ‰‹æœºå¾…æœº</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:                         <span class="comment">#æ–°å¢æ¥æ”¶é“¾æ¥å¾ªç¯,å¯ä»¥ä¸åœçš„æ¥ç”µè¯</span></span><br><span class="line">    conn,addr=s.accept()            <span class="comment">#æ‰‹æœºæ¥ç”µè¯</span></span><br><span class="line">    <span class="comment"># print(conn)</span></span><br><span class="line">    <span class="comment"># print(addr)</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;æ¥åˆ°æ¥è‡ª%sçš„ç”µè¯&#x27;</span> %addr[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:                         <span class="comment">#æ–°å¢é€šä¿¡å¾ªç¯,å¯ä»¥ä¸æ–­çš„é€šä¿¡,æ”¶å‘æ¶ˆæ¯</span></span><br><span class="line">        msg=conn.recv(BUFSIZE)             <span class="comment">#å¬æ¶ˆæ¯,å¬è¯</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># if len(msg) == 0:break        #å¦‚æœä¸åŠ ,é‚£ä¹ˆæ­£åœ¨é“¾æ¥çš„å®¢æˆ·ç«¯çªç„¶æ–­å¼€,recvä¾¿ä¸å†é˜»å¡,æ­»å¾ªç¯å‘ç”Ÿ</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(msg,<span class="built_in">type</span>(msg))</span><br><span class="line"></span><br><span class="line">        conn.send(msg.upper())          <span class="comment">#å‘æ¶ˆæ¯,è¯´è¯</span></span><br><span class="line"></span><br><span class="line">    conn.close()                    <span class="comment">#æŒ‚ç”µè¯</span></span><br><span class="line"></span><br><span class="line">s.close()                       <span class="comment">#æ‰‹æœºå…³æœº</span></span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯æ”¹è¿›ç‰ˆ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8081</span>)</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line">s.connect_ex(ip_port)           <span class="comment">#æ‹¨ç”µè¯</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:                             <span class="comment">#æ–°å¢é€šä¿¡å¾ªç¯,å®¢æˆ·ç«¯å¯ä»¥ä¸æ–­å‘æ”¶æ¶ˆæ¯</span></span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(msg) == <span class="number">0</span>:<span class="keyword">continue</span></span><br><span class="line">    s.send(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>))         <span class="comment">#å‘æ¶ˆæ¯,è¯´è¯(åªèƒ½å‘é€å­—èŠ‚ç±»å‹)</span></span><br><span class="line"></span><br><span class="line">    feedback=s.recv(BUFSIZE)                           <span class="comment">#æ”¶æ¶ˆæ¯,å¬è¯</span></span><br><span class="line">    <span class="built_in">print</span>(feedback.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">s.close()                                       <span class="comment">#æŒ‚ç”µè¯</span></span><br></pre></td></tr></table></figure>

<p>é—®é¢˜ï¼š</p>
<p>æœ‰çš„åŒå­¦åœ¨é‡å¯æœåŠ¡ç«¯æ—¶å¯èƒ½ä¼šé‡åˆ°</p>
<p><img src="https://pic2.zhimg.com/80/v2-aeeffa09a60bc1037ae69a2856cf8941_720w.jpg" alt="img"></p>
<p>è¿™ä¸ªæ˜¯ç”±äºä½ çš„æœåŠ¡ç«¯ä»ç„¶å­˜åœ¨å››æ¬¡æŒ¥æ‰‹çš„time_waitçŠ¶æ€åœ¨å ç”¨åœ°å€ï¼ˆå¦‚æœä¸æ‡‚ï¼Œè¯·æ·±å…¥ç ”ç©¶1.tcpä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹ 2.synæ´ªæ°´æ”»å‡» 3.æœåŠ¡å™¨é«˜å¹¶å‘æƒ…å†µä¸‹ä¼šæœ‰å¤§é‡çš„time_waitçŠ¶æ€çš„ä¼˜åŒ–æ–¹æ³•ï¼‰</p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<p>æ–¹æ³•ä¸€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åŠ å…¥ä¸€æ¡socketé…ç½®ï¼Œé‡ç”¨ipå’Œç«¯å£</span></span><br><span class="line"></span><br><span class="line">phone=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">phone.setsockopt(SOL_SOCKET,SO_REUSEADDR,<span class="number">1</span>) <span class="comment">#å°±æ˜¯å®ƒï¼Œåœ¨bindå‰åŠ </span></span><br><span class="line">phone.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br></pre></td></tr></table></figure>

<p>æ–¹æ³•äºŒ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">å‘ç°ç³»ç»Ÿå­˜åœ¨å¤§é‡TIME_WAITçŠ¶æ€çš„è¿æ¥ï¼Œé€šè¿‡è°ƒæ•´linuxå†…æ ¸å‚æ•°è§£å†³ï¼Œ</span><br><span class="line">vi /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">ç¼–è¾‘æ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š</span><br><span class="line">net.ipv4.tcp_syncookies = <span class="number">1</span></span><br><span class="line">net.ipv4.tcp_tw_reuse = <span class="number">1</span></span><br><span class="line">net.ipv4.tcp_tw_recycle = <span class="number">1</span></span><br><span class="line">net.ipv4.tcp_fin_timeout = <span class="number">30</span></span><br><span class="line"></span><br><span class="line">ç„¶åæ‰§è¡Œ /sbin/sysctl -p è®©å‚æ•°ç”Ÿæ•ˆã€‚</span><br><span class="line"></span><br><span class="line">net.ipv4.tcp_syncookies = <span class="number">1</span> è¡¨ç¤ºå¼€å¯SYN Cookiesã€‚å½“å‡ºç°SYNç­‰å¾…é˜Ÿåˆ—æº¢å‡ºæ—¶ï¼Œå¯ç”¨cookiesæ¥å¤„ç†ï¼Œå¯é˜²èŒƒå°‘é‡SYNæ”»å‡»ï¼Œé»˜è®¤ä¸º<span class="number">0</span>ï¼Œè¡¨ç¤ºå…³é—­ï¼›</span><br><span class="line"></span><br><span class="line">net.ipv4.tcp_tw_reuse = <span class="number">1</span> è¡¨ç¤ºå¼€å¯é‡ç”¨ã€‚å…è®¸å°†TIME-WAIT socketsé‡æ–°ç”¨äºæ–°çš„TCPè¿æ¥ï¼Œé»˜è®¤ä¸º<span class="number">0</span>ï¼Œè¡¨ç¤ºå…³é—­ï¼›</span><br><span class="line"></span><br><span class="line">net.ipv4.tcp_tw_recycle = <span class="number">1</span> è¡¨ç¤ºå¼€å¯TCPè¿æ¥ä¸­TIME-WAIT socketsçš„å¿«é€Ÿå›æ”¶ï¼Œé»˜è®¤ä¸º<span class="number">0</span>ï¼Œè¡¨ç¤ºå…³é—­ã€‚</span><br><span class="line"></span><br><span class="line">net.ipv4.tcp_fin_timeout ä¿®æ”¹ç³»çµ±é»˜è®¤çš„ TIMEOUT æ—¶é—´</span><br></pre></td></tr></table></figure>

<h3 id="å…«-åŸºäºUDPçš„å¥—æ¥å­—"><a href="#å…«-åŸºäºUDPçš„å¥—æ¥å­—" class="headerlink" title="å…« åŸºäºUDPçš„å¥—æ¥å­—"></a>å…« åŸºäºUDPçš„å¥—æ¥å­—</h3><p>*<strong>udpæ˜¯æ— é“¾æ¥çš„ï¼Œå…ˆå¯åŠ¨å“ªä¸€ç«¯éƒ½ä¸ä¼šæŠ¥é”™*</strong></p>
<p>udpæœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> ss = socket()   <span class="comment">#åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨çš„å¥—æ¥å­—</span></span><br><span class="line"><span class="number">2</span> ss.bind()       <span class="comment">#ç»‘å®šæœåŠ¡å™¨å¥—æ¥å­—</span></span><br><span class="line"><span class="number">3</span> inf_loop:       <span class="comment">#æœåŠ¡å™¨æ— é™å¾ªç¯</span></span><br><span class="line"><span class="number">4</span>     cs = ss.recvfrom()/ss.sendto() <span class="comment"># å¯¹è¯(æ¥æ”¶ä¸å‘é€)</span></span><br><span class="line"><span class="number">5</span> ss.close()                         <span class="comment"># å…³é—­æœåŠ¡å™¨å¥—æ¥å­—</span></span><br></pre></td></tr></table></figure>

<p>udpå®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">cs = socket()   <span class="comment"># åˆ›å»ºå®¢æˆ·å¥—æ¥å­—</span></span><br><span class="line">comm_loop:      <span class="comment"># é€šè®¯å¾ªç¯</span></span><br><span class="line">    cs.sendto()/cs.recvfrom()   <span class="comment"># å¯¹è¯(å‘é€/æ¥æ”¶)</span></span><br><span class="line">cs.close()                      <span class="comment"># å…³é—­å®¢æˆ·å¥—æ¥å­—</span></span><br></pre></td></tr></table></figure>

<p>*<strong>udpå¥—æ¥å­—ç®€å•ç¤ºä¾‹*</strong></p>
<p>udpæœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">9000</span>)</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">udp_server_client=socket.socket(socket.AF_INET,socket.SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line">udp_server_client.bind(ip_port)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg,addr=udp_server_client.recvfrom(BUFSIZE)</span><br><span class="line">    <span class="built_in">print</span>(msg,addr)</span><br><span class="line"></span><br><span class="line">    udp_server_client.sendto(msg.upper(),addr)</span><br></pre></td></tr></table></figure>

<p>udpå®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">9000</span>)</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">udp_server_client=socket.socket(socket.AF_INET,socket.SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> msg:<span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    udp_server_client.sendto(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>),ip_port)</span><br><span class="line"></span><br><span class="line">    back_msg,addr=udp_server_client.recvfrom(BUFSIZE)</span><br><span class="line">    <span class="built_in">print</span>(back_msg.decode(<span class="string">&#x27;utf-8&#x27;</span>),addr)</span><br></pre></td></tr></table></figure>

<p>*<strong>qqèŠå¤©(ç”±äºudpæ— è¿æ¥ï¼Œæ‰€ä»¥å¯ä»¥åŒæ—¶å¤šä¸ªå®¢æˆ·ç«¯å»è·ŸæœåŠ¡ç«¯é€šä¿¡)*</strong></p>
<p>udpæœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8081</span>)</span><br><span class="line">udp_server_sock=socket.socket(socket.AF_INET,socket.SOCK_DGRAM) <span class="comment">#ä¹°æ‰‹æœº</span></span><br><span class="line">udp_server_sock.bind(ip_port)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    qq_msg,addr=udp_server_sock.recvfrom(<span class="number">1024</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;æ¥è‡ª[%s:%s]çš„ä¸€æ¡æ¶ˆæ¯:\033[1;44m%s\033[0m&#x27;</span> %(addr[<span class="number">0</span>],addr[<span class="number">1</span>],qq_msg.decode(<span class="string">&#x27;utf-8&#x27;</span>)))</span><br><span class="line">    back_msg=<span class="built_in">input</span>(<span class="string">&#x27;å›å¤æ¶ˆæ¯: &#x27;</span>).strip()</span><br><span class="line"></span><br><span class="line">    udp_server_sock.sendto(back_msg.encode(<span class="string">&#x27;utf-8&#x27;</span>),addr)</span><br></pre></td></tr></table></figure>

<p>udpå®¢æˆ·ç«¯1</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">udp_client_socket=socket.socket(socket.AF_INET,socket.SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line">qq_name_dic=&#123;</span><br><span class="line">    <span class="string">&#x27;ç‹—å“¥alex&#x27;</span>:(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8081</span>),</span><br><span class="line">    <span class="string">&#x27;çé©´&#x27;</span>:(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8081</span>),</span><br><span class="line">    <span class="string">&#x27;ä¸€æ£µæ ‘&#x27;</span>:(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8081</span>),</span><br><span class="line">    <span class="string">&#x27;æ­¦å¤§éƒ&#x27;</span>:(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8081</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    qq_name=<span class="built_in">input</span>(<span class="string">&#x27;è¯·é€‰æ‹©èŠå¤©å¯¹è±¡: &#x27;</span>).strip()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        msg=<span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥æ¶ˆæ¯,å›è½¦å‘é€: &#x27;</span>).strip()</span><br><span class="line">        <span class="keyword">if</span> msg == <span class="string">&#x27;quit&#x27;</span>:<span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> msg <span class="keyword">or</span> <span class="keyword">not</span> qq_name <span class="keyword">or</span> qq_name <span class="keyword">not</span> <span class="keyword">in</span> qq_name_dic:<span class="keyword">continue</span></span><br><span class="line">        udp_client_socket.sendto(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>),qq_name_dic[qq_name])</span><br><span class="line"></span><br><span class="line">        back_msg,addr=udp_client_socket.recvfrom(BUFSIZE)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;æ¥è‡ª[%s:%s]çš„ä¸€æ¡æ¶ˆæ¯:\033[1;44m%s\033[0m&#x27;</span> %(addr[<span class="number">0</span>],addr[<span class="number">1</span>],back_msg.decode(<span class="string">&#x27;utf-8&#x27;</span>)))</span><br><span class="line"></span><br><span class="line">udp_client_socket.close()</span><br></pre></td></tr></table></figure>

<p>udpå®¢æˆ·ç«¯2</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">udp_client_socket=socket.socket(socket.AF_INET,socket.SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line">qq_name_dic=&#123;</span><br><span class="line">    <span class="string">&#x27;ç‹—å“¥alex&#x27;</span>:(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8081</span>),</span><br><span class="line">    <span class="string">&#x27;çé©´&#x27;</span>:(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8081</span>),</span><br><span class="line">    <span class="string">&#x27;ä¸€æ£µæ ‘&#x27;</span>:(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8081</span>),</span><br><span class="line">    <span class="string">&#x27;æ­¦å¤§éƒ&#x27;</span>:(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8081</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    qq_name=<span class="built_in">input</span>(<span class="string">&#x27;è¯·é€‰æ‹©èŠå¤©å¯¹è±¡: &#x27;</span>).strip()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        msg=<span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥æ¶ˆæ¯,å›è½¦å‘é€: &#x27;</span>).strip()</span><br><span class="line">        <span class="keyword">if</span> msg == <span class="string">&#x27;quit&#x27;</span>:<span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> msg <span class="keyword">or</span> <span class="keyword">not</span> qq_name <span class="keyword">or</span> qq_name <span class="keyword">not</span> <span class="keyword">in</span> qq_name_dic:<span class="keyword">continue</span></span><br><span class="line">        udp_client_socket.sendto(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>),qq_name_dic[qq_name])</span><br><span class="line"></span><br><span class="line">        back_msg,addr=udp_client_socket.recvfrom(BUFSIZE)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;æ¥è‡ª[%s:%s]çš„ä¸€æ¡æ¶ˆæ¯:\033[1;44m%s\033[0m&#x27;</span> %(addr[<span class="number">0</span>],addr[<span class="number">1</span>],back_msg.decode(<span class="string">&#x27;utf-8&#x27;</span>)))</span><br><span class="line"></span><br><span class="line">udp_client_socket.close()</span><br></pre></td></tr></table></figure>

<p>æœåŠ¡ç«¯è¿è¡Œç»“æœ</p>
<p><img src="https://pic3.zhimg.com/80/v2-b8475dd2de46da061d4f507bc2414206_720w.jpg" alt="img"></p>
<p>å®¢æˆ·ç«¯1è¿è¡Œç»“æœ</p>
<p><img src="https://pic1.zhimg.com/80/v2-7fa4072d1b9ed772c81fe72b20497eec_720w.jpg" alt="img"></p>
<p>å®¢æˆ·ç«¯2è¿è¡Œç»“æœ</p>
<p><img src="https://pic2.zhimg.com/80/v2-c70ea48a4774814cbc6d58657b811539_720w.jpg" alt="img"></p>
<p>*<strong>æ—¶é—´æœåŠ¡å™¨*</strong></p>
<p>ntpæœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> strftime</span><br><span class="line"></span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">9000</span>)</span><br><span class="line">bufsize=<span class="number">1024</span></span><br><span class="line"></span><br><span class="line">tcp_server=socket(AF_INET,SOCK_DGRAM)</span><br><span class="line">tcp_server.bind(ip_port)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg,addr=tcp_server.recvfrom(bufsize)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;===&gt;&#x27;</span>,msg)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> msg:</span><br><span class="line">        time_fmt=<span class="string">&#x27;%Y-%m-%d %X&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        time_fmt=msg.decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    back_msg=strftime(time_fmt)</span><br><span class="line"></span><br><span class="line">    tcp_server.sendto(back_msg.encode(<span class="string">&#x27;utf-8&#x27;</span>),addr)</span><br><span class="line"></span><br><span class="line">tcp_server.close()</span><br></pre></td></tr></table></figure>

<p>ntpå®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">9000</span>)</span><br><span class="line">bufsize=<span class="number">1024</span></span><br><span class="line"></span><br><span class="line">tcp_client=socket(AF_INET,SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥æ—¶é—´æ ¼å¼(ä¾‹%Y %m %d)&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    tcp_client.sendto(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>),ip_port)</span><br><span class="line">    data=tcp_client.recv(bufsize)</span><br><span class="line">    <span class="built_in">print</span>(data.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">tcp_client.close()</span><br></pre></td></tr></table></figure>

<h3 id="ä¹-ç²˜åŒ…ç°è±¡"><a href="#ä¹-ç²˜åŒ…ç°è±¡" class="headerlink" title="ä¹ ç²˜åŒ…ç°è±¡"></a>ä¹ ç²˜åŒ…ç°è±¡</h3><p>è®©æˆ‘ä»¬åŸºäºtcpå…ˆåˆ¶ä½œä¸€ä¸ªè¿œç¨‹æ‰§è¡Œå‘½ä»¤çš„ç¨‹åºï¼ˆ1ï¼šæ‰§è¡Œé”™è¯¯å‘½ä»¤ 2ï¼šæ‰§è¡Œls 3ï¼šæ‰§è¡Œifconfigï¼‰</p>
<p><strong>æ³¨æ„æ³¨æ„æ³¨æ„ï¼š</strong></p>
<p>res&#x3D;subprocess.Popen(cmd.decode(â€˜utf-8â€™), shell&#x3D;True, stderr&#x3D;subprocess.PIPE, stdout&#x3D;subprocess.PIPE)</p>
<p>çš„ç»“æœçš„ç¼–ç æ˜¯ä»¥å½“å‰æ‰€åœ¨çš„ç³»ç»Ÿä¸ºå‡†çš„ï¼Œå¦‚æœæ˜¯windowsï¼Œé‚£ä¹ˆ<strong>res.stdout.read()è¯»å‡ºçš„å°±æ˜¯GBKç¼–ç çš„</strong>ï¼Œåœ¨æ¥æ”¶ç«¯éœ€<strong>è¦ç”¨GBKè§£ç </strong></p>
<p><strong>ä¸”åªèƒ½ä»ç®¡é“é‡Œè¯»ä¸€æ¬¡ç»“æœ</strong></p>
<p>æ³¨æ„ï¼šå‘½ä»¤ls -l ; lllllll ; pwd çš„ç»“æœæ˜¯æ—¢æœ‰æ­£ç¡®stdoutç»“æœï¼Œåˆæœ‰é”™è¯¯stderrç»“æœ</p>
<p>æœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>)</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line"></span><br><span class="line">tcp_socket_server=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">tcp_socket_server.bind(ip_port)</span><br><span class="line">tcp_socket_server.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    conn,addr=tcp_socket_server.accept()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å®¢æˆ·ç«¯&#x27;</span>,addr)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        cmd=conn.recv(BUFSIZE)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(cmd) == <span class="number">0</span>:<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        res=subprocess.Popen(cmd.decode(<span class="string">&#x27;utf-8&#x27;</span>),shell=<span class="literal">True</span>,</span><br><span class="line">                         stdout=subprocess.PIPE,</span><br><span class="line">                         stdin=subprocess.PIPE,</span><br><span class="line">                         stderr=subprocess.PIPE)</span><br><span class="line"></span><br><span class="line">        stderr=act_res.stderr.read()</span><br><span class="line">        stdout=act_res.stdout.read()</span><br><span class="line">        conn.send(stderr)</span><br><span class="line">        conn.send(stdout)</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">res=s.connect_ex(ip_port)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(msg) == <span class="number">0</span>:<span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">if</span> msg == <span class="string">&#x27;quit&#x27;</span>:<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    s.send(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    act_res=s.recv(BUFSIZE)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(act_res.decode(<span class="string">&#x27;utf-8&#x27;</span>),end=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ç¨‹åºæ˜¯åŸºäºtcpçš„socketï¼Œåœ¨è¿è¡Œæ—¶ä¼šå‘ç”Ÿç²˜åŒ…</p>
<p>è®©æˆ‘ä»¬å†åŸºäºudpåˆ¶ä½œä¸€ä¸ªè¿œç¨‹æ‰§è¡Œå‘½ä»¤çš„ç¨‹åº</p>
<p>æœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">9003</span>)</span><br><span class="line">bufsize=<span class="number">1024</span></span><br><span class="line"></span><br><span class="line">udp_server=socket(AF_INET,SOCK_DGRAM)</span><br><span class="line">udp_server.bind(ip_port)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment">#æ”¶æ¶ˆæ¯</span></span><br><span class="line">    cmd,addr=udp_server.recvfrom(bufsize)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ç”¨æˆ·å‘½ä»¤-----&gt;&#x27;</span>,cmd)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#é€»è¾‘å¤„ç†</span></span><br><span class="line">    res=subprocess.Popen(cmd.decode(<span class="string">&#x27;utf-8&#x27;</span>),shell=<span class="literal">True</span>,stderr=subprocess.PIPE,stdin=subprocess.PIPE,stdout=subprocess.PIPE)</span><br><span class="line">    stderr=res.stderr.read()</span><br><span class="line">    stdout=res.stdout.read()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å‘æ¶ˆæ¯</span></span><br><span class="line">    udp_server.sendto(stderr,addr)</span><br><span class="line">    udp_server.sendto(stdout,addr)</span><br><span class="line">udp_server.close()</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">9003</span>)</span><br><span class="line">bufsize=<span class="number">1024</span></span><br><span class="line"></span><br><span class="line">udp_client=socket(AF_INET,SOCK_DGRAM)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    udp_client.sendto(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>),ip_port)</span><br><span class="line"></span><br><span class="line">    data,addr=udp_client.recvfrom(bufsize)</span><br><span class="line">    <span class="built_in">print</span>(data.decode(<span class="string">&#x27;utf-8&#x27;</span>),end=<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ç¨‹åºæ˜¯åŸºäºudpçš„socketï¼Œåœ¨è¿è¡Œæ—¶æ°¸è¿œä¸ä¼šå‘ç”Ÿç²˜åŒ…</p>
<h3 id="å-ä»€ä¹ˆæ˜¯ç²˜åŒ…"><a href="#å-ä»€ä¹ˆæ˜¯ç²˜åŒ…" class="headerlink" title="å ä»€ä¹ˆæ˜¯ç²˜åŒ…"></a>å ä»€ä¹ˆæ˜¯ç²˜åŒ…</h3><p>é¡»çŸ¥ï¼šåªæœ‰TCPæœ‰ç²˜åŒ…ç°è±¡ï¼ŒUDPæ°¸è¿œä¸ä¼šç²˜åŒ…ï¼Œä¸ºä½•ï¼Œä¸”å¬æˆ‘å¨“å¨“é“æ¥</p>
<p>é¦–å…ˆéœ€è¦æŒæ¡ä¸€ä¸ªsocketæ”¶å‘æ¶ˆæ¯çš„åŸç†</p>
<p><img src="https://pic4.zhimg.com/80/v2-5e9568f888a55cd273aca6f561cea2d7_720w.jpg" alt="img"></p>
<p>å‘é€ç«¯å¯ä»¥æ˜¯ä¸€Kä¸€Kåœ°å‘é€æ•°æ®ï¼Œè€Œæ¥æ”¶ç«¯çš„åº”ç”¨ç¨‹åºå¯ä»¥ä¸¤Kä¸¤Kåœ°æèµ°æ•°æ®ï¼Œå½“ç„¶ä¹Ÿæœ‰å¯èƒ½ä¸€æ¬¡æèµ°3Kæˆ–6Kæ•°æ®ï¼Œæˆ–è€…ä¸€æ¬¡åªæèµ°å‡ ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåº”ç”¨ç¨‹åºæ‰€çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œæˆ–è¯´æ˜¯ä¸€ä¸ªæµï¼ˆstreamï¼‰ï¼Œä¸€æ¡æ¶ˆæ¯æœ‰å¤šå°‘å­—èŠ‚å¯¹åº”ç”¨ç¨‹åºæ˜¯ä¸å¯è§çš„ï¼Œå› æ­¤TCPåè®®æ˜¯é¢å‘æµçš„åè®®ï¼Œè¿™ä¹Ÿæ˜¯å®¹æ˜“å‡ºç°ç²˜åŒ…é—®é¢˜çš„åŸå› ã€‚è€ŒUDPæ˜¯é¢å‘æ¶ˆæ¯çš„åè®®ï¼Œæ¯ä¸ªUDPæ®µéƒ½æ˜¯ä¸€æ¡æ¶ˆæ¯ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»ä»¥æ¶ˆæ¯ä¸ºå•ä½æå–æ•°æ®ï¼Œä¸èƒ½ä¸€æ¬¡æå–ä»»æ„å­—èŠ‚çš„æ•°æ®ï¼Œè¿™ä¸€ç‚¹å’ŒTCPæ˜¯å¾ˆä¸åŒçš„ã€‚æ€æ ·å®šä¹‰æ¶ˆæ¯å‘¢ï¼Ÿå¯ä»¥è®¤ä¸ºå¯¹æ–¹ä¸€æ¬¡æ€§write&#x2F;sendçš„æ•°æ®ä¸ºä¸€ä¸ªæ¶ˆæ¯ï¼Œéœ€è¦æ˜ç™½çš„æ˜¯å½“å¯¹æ–¹sendä¸€æ¡ä¿¡æ¯çš„æ—¶å€™ï¼Œæ— è®ºåº•å±‚æ€æ ·åˆ†æ®µåˆ†ç‰‡ï¼ŒTCPåè®®å±‚ä¼šæŠŠæ„æˆæ•´æ¡æ¶ˆæ¯çš„æ•°æ®æ®µæ’åºå®Œæˆåæ‰å‘ˆç°åœ¨å†…æ ¸ç¼“å†²åŒºã€‚</p>
<p>ä¾‹å¦‚åŸºäºtcpçš„å¥—æ¥å­—å®¢æˆ·ç«¯å¾€æœåŠ¡ç«¯ä¸Šä¼ æ–‡ä»¶ï¼Œå‘é€æ—¶æ–‡ä»¶å†…å®¹æ˜¯æŒ‰ç…§ä¸€æ®µä¸€æ®µçš„å­—èŠ‚æµå‘é€çš„ï¼Œåœ¨æ¥æ”¶æ–¹çœ‹äº†ï¼Œæ ¹æœ¬ä¸çŸ¥é“è¯¥æ–‡ä»¶çš„å­—èŠ‚æµä»ä½•å¤„å¼€å§‹ï¼Œåœ¨ä½•å¤„ç»“æŸ</p>
<p>æ‰€è°“ç²˜åŒ…é—®é¢˜ä¸»è¦è¿˜æ˜¯å› ä¸ºæ¥æ”¶æ–¹ä¸çŸ¥é“æ¶ˆæ¯ä¹‹é—´çš„ç•Œé™ï¼Œä¸çŸ¥é“ä¸€æ¬¡æ€§æå–å¤šå°‘å­—èŠ‚çš„æ•°æ®æ‰€é€ æˆçš„ã€‚</p>
<p>æ­¤å¤–ï¼Œå‘é€æ–¹å¼•èµ·çš„ç²˜åŒ…æ˜¯ç”±TCPåè®®æœ¬èº«é€ æˆçš„ï¼ŒTCPä¸ºæé«˜ä¼ è¾“æ•ˆç‡ï¼Œå‘é€æ–¹å¾€å¾€è¦æ”¶é›†åˆ°è¶³å¤Ÿå¤šçš„æ•°æ®åæ‰å‘é€ä¸€ä¸ªTCPæ®µã€‚è‹¥è¿ç»­å‡ æ¬¡éœ€è¦sendçš„æ•°æ®éƒ½å¾ˆå°‘ï¼Œé€šå¸¸TCPä¼šæ ¹æ®ä¼˜åŒ–<a href="https://link.zhihu.com/?target=http://lib.csdn.net/base/datastructure">ç®—æ³•</a>æŠŠè¿™äº›æ•°æ®åˆæˆä¸€ä¸ªTCPæ®µåä¸€æ¬¡å‘é€å‡ºå»ï¼Œè¿™æ ·æ¥æ”¶æ–¹å°±æ”¶åˆ°äº†ç²˜åŒ…æ•°æ®ã€‚</p>
<ol>
<li>TCPï¼ˆtransport control protocolï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰æ˜¯é¢å‘è¿æ¥çš„ï¼Œé¢å‘æµçš„ï¼Œæä¾›é«˜å¯é æ€§æœåŠ¡ã€‚æ”¶å‘ä¸¤ç«¯ï¼ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ï¼‰éƒ½è¦æœ‰ä¸€ä¸€æˆå¯¹çš„socketï¼Œå› æ­¤ï¼Œå‘é€ç«¯ä¸ºäº†å°†å¤šä¸ªå‘å¾€æ¥æ”¶ç«¯çš„åŒ…ï¼Œæ›´æœ‰æ•ˆçš„å‘åˆ°å¯¹æ–¹ï¼Œä½¿ç”¨äº†ä¼˜åŒ–æ–¹æ³•ï¼ˆNagleç®—æ³•ï¼‰ï¼Œå°†å¤šæ¬¡é—´éš”è¾ƒå°ä¸”æ•°æ®é‡å°çš„æ•°æ®ï¼Œåˆå¹¶æˆä¸€ä¸ªå¤§çš„æ•°æ®å—ï¼Œç„¶åè¿›è¡Œå°åŒ…ã€‚è¿™æ ·ï¼Œæ¥æ”¶ç«¯ï¼Œå°±éš¾äºåˆ†è¾¨å‡ºæ¥äº†ï¼Œå¿…é¡»æä¾›ç§‘å­¦çš„æ‹†åŒ…æœºåˆ¶ã€‚ å³é¢å‘æµçš„é€šä¿¡æ˜¯æ— æ¶ˆæ¯ä¿æŠ¤è¾¹ç•Œçš„ã€‚</li>
<li>UDPï¼ˆuser datagram protocolï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰æ˜¯æ— è¿æ¥çš„ï¼Œé¢å‘æ¶ˆæ¯çš„ï¼Œæä¾›é«˜æ•ˆç‡æœåŠ¡ã€‚ä¸ä¼šä½¿ç”¨å—çš„åˆå¹¶ä¼˜åŒ–ç®—æ³•ï¼Œ, ç”±äºUDPæ”¯æŒçš„æ˜¯ä¸€å¯¹å¤šçš„æ¨¡å¼ï¼Œæ‰€ä»¥æ¥æ”¶ç«¯çš„skbuff(å¥—æ¥å­—ç¼“å†²åŒºï¼‰é‡‡ç”¨äº†é“¾å¼ç»“æ„æ¥è®°å½•æ¯ä¸€ä¸ªåˆ°è¾¾çš„UDPåŒ…ï¼Œåœ¨æ¯ä¸ªUDPåŒ…ä¸­å°±æœ‰äº†æ¶ˆæ¯å¤´ï¼ˆæ¶ˆæ¯æ¥æºåœ°å€ï¼Œç«¯å£ç­‰ä¿¡æ¯ï¼‰ï¼Œè¿™æ ·ï¼Œå¯¹äºæ¥æ”¶ç«¯æ¥è¯´ï¼Œå°±å®¹æ˜“è¿›è¡ŒåŒºåˆ†å¤„ç†äº†ã€‚ <strong>å³é¢å‘æ¶ˆæ¯çš„é€šä¿¡æ˜¯æœ‰æ¶ˆæ¯ä¿æŠ¤è¾¹ç•Œçš„ã€‚</strong></li>
<li><strong>tcpæ˜¯åŸºäºæ•°æ®æµçš„ï¼Œäºæ˜¯æ”¶å‘çš„æ¶ˆæ¯ä¸èƒ½ä¸ºç©ºï¼Œè¿™å°±éœ€è¦åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æ·»åŠ ç©ºæ¶ˆæ¯çš„å¤„ç†æœºåˆ¶ï¼Œé˜²æ­¢ç¨‹åºå¡ä½ï¼Œè€Œudpæ˜¯åŸºäºæ•°æ®æŠ¥çš„ï¼Œå³ä¾¿æ˜¯ä½ è¾“å…¥çš„æ˜¯ç©ºå†…å®¹ï¼ˆç›´æ¥å›è½¦ï¼‰ï¼Œé‚£ä¹Ÿä¸æ˜¯ç©ºæ¶ˆæ¯ï¼Œudpåè®®ä¼šå¸®ä½ å°è£…ä¸Šæ¶ˆæ¯å¤´ï¼Œå®éªŒç•¥</strong></li>
</ol>
<p>udpçš„recvfromæ˜¯é˜»å¡çš„ï¼Œä¸€ä¸ªrecvfrom(x)å¿…é¡»å¯¹å”¯ä¸€ä¸€ä¸ªsendinto(y),æ”¶å®Œäº†xä¸ªå­—èŠ‚çš„æ•°æ®å°±ç®—å®Œæˆ,è‹¥æ˜¯y&gt;xæ•°æ®å°±ä¸¢å¤±ï¼Œè¿™æ„å‘³ç€udpæ ¹æœ¬ä¸ä¼šç²˜åŒ…ï¼Œä½†æ˜¯ä¼šä¸¢æ•°æ®ï¼Œä¸å¯é </p>
<p>tcpçš„åè®®æ•°æ®ä¸ä¼šä¸¢ï¼Œæ²¡æœ‰æ”¶å®ŒåŒ…ï¼Œä¸‹æ¬¡æ¥æ”¶ï¼Œä¼šç»§ç»­ä¸Šæ¬¡ç»§ç»­æ¥æ”¶ï¼Œå·±ç«¯æ€»æ˜¯åœ¨æ”¶åˆ°ackæ—¶æ‰ä¼šæ¸…é™¤ç¼“å†²åŒºå†…å®¹ã€‚æ•°æ®æ˜¯å¯é çš„ï¼Œä½†æ˜¯ä¼šç²˜åŒ…ã€‚</p>
<p>*<strong>ä¸¤ç§æƒ…å†µä¸‹ä¼šå‘ç”Ÿç²˜åŒ…ã€‚*</strong></p>
<p>å‘é€ç«¯éœ€è¦ç­‰ç¼“å†²åŒºæ»¡æ‰å‘é€å‡ºå»ï¼Œé€ æˆç²˜åŒ…ï¼ˆå‘é€æ•°æ®æ—¶é—´é—´éš”å¾ˆçŸ­ï¼Œæ•°æ®äº†å¾ˆå°ï¼Œä¼šåˆåˆ°ä¸€èµ·ï¼Œäº§ç”Ÿç²˜åŒ…ï¼‰</p>
<p>æœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line">tcp_socket_server=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">tcp_socket_server.bind(ip_port)</span><br><span class="line">tcp_socket_server.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">conn,addr=tcp_socket_server.accept()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data1=conn.recv(<span class="number">10</span>)</span><br><span class="line">data2=conn.recv(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-----&gt;&#x27;</span>,data1.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-----&gt;&#x27;</span>,data2.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">res=s.connect_ex(ip_port)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s.send(<span class="string">&#x27;hello&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">s.send(<span class="string">&#x27;feng&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>æ¥æ”¶æ–¹ä¸åŠæ—¶æ¥æ”¶ç¼“å†²åŒºçš„åŒ…ï¼Œé€ æˆå¤šä¸ªåŒ…æ¥æ”¶ï¼ˆå®¢æˆ·ç«¯å‘é€äº†ä¸€æ®µæ•°æ®ï¼ŒæœåŠ¡ç«¯åªæ”¶äº†ä¸€å°éƒ¨åˆ†ï¼ŒæœåŠ¡ç«¯ä¸‹æ¬¡å†æ”¶çš„æ—¶å€™è¿˜æ˜¯ä»ç¼“å†²åŒºæ‹¿ä¸Šæ¬¡é—ç•™çš„æ•°æ®ï¼Œäº§ç”Ÿç²˜åŒ…ï¼‰</p>
<p>æœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line">tcp_socket_server=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">tcp_socket_server.bind(ip_port)</span><br><span class="line">tcp_socket_server.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">conn,addr=tcp_socket_server.accept()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data1=conn.recv(<span class="number">2</span>) <span class="comment">#ä¸€æ¬¡æ²¡æœ‰æ”¶å®Œæ•´</span></span><br><span class="line">data2=conn.recv(<span class="number">10</span>)<span class="comment">#ä¸‹æ¬¡æ”¶çš„æ—¶å€™,ä¼šå…ˆå–æ—§çš„æ•°æ®,ç„¶åå–æ–°çš„</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-----&gt;&#x27;</span>,data1.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;-----&gt;&#x27;</span>,data2.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">BUFSIZE=<span class="number">1024</span></span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">res=s.connect_ex(ip_port)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s.send(<span class="string">&#x27;hello feng&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>*<strong>æ‹†åŒ…çš„å‘ç”Ÿæƒ…å†µ*</strong></p>
<p>å½“å‘é€ç«¯ç¼“å†²åŒºçš„é•¿åº¦å¤§äºç½‘å¡çš„MTUæ—¶ï¼Œtcpä¼šå°†è¿™æ¬¡å‘é€çš„æ•°æ®æ‹†æˆå‡ ä¸ªæ•°æ®åŒ…å‘é€å‡ºå»ã€‚</p>
<p>*<strong>è¡¥å……é—®é¢˜ä¸€ï¼šä¸ºä½•tcpæ˜¯å¯é ä¼ è¾“ï¼Œudpæ˜¯ä¸å¯é ä¼ è¾“*</strong></p>
<p>åŸºäºtcpçš„æ•°æ®ä¼ è¾“è¯·å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« <a href="https://link.zhihu.com/?target=http://www.cnblogs.com/linhaifeng/articles/5937962.html">http://www.cnblogs.com/linhaifeng/articles/5937962.html</a>ï¼Œtcpåœ¨æ•°æ®ä¼ è¾“æ—¶ï¼Œå‘é€ç«¯å…ˆæŠŠæ•°æ®å‘é€åˆ°è‡ªå·±çš„ç¼“å­˜ä¸­ï¼Œç„¶ååè®®æ§åˆ¶å°†ç¼“å­˜ä¸­çš„æ•°æ®å‘å¾€å¯¹ç«¯ï¼Œå¯¹ç«¯è¿”å›ä¸€ä¸ªack&#x3D;1ï¼Œå‘é€ç«¯åˆ™æ¸…ç†ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œå¯¹ç«¯è¿”å›ack&#x3D;0ï¼Œåˆ™é‡æ–°å‘é€æ•°æ®ï¼Œæ‰€ä»¥tcpæ˜¯å¯é çš„</p>
<p>è€Œudpå‘é€æ•°æ®ï¼Œå¯¹ç«¯æ˜¯ä¸ä¼šè¿”å›ç¡®è®¤ä¿¡æ¯çš„ï¼Œå› æ­¤ä¸å¯é </p>
<p>*<strong>è¡¥å……é—®é¢˜äºŒï¼šsend(å­—èŠ‚æµ)å’Œrecv(1024)åŠsendall*</strong></p>
<p>recvé‡ŒæŒ‡å®šçš„1024æ„æ€æ˜¯ä»ç¼“å­˜é‡Œä¸€æ¬¡æ‹¿å‡º1024ä¸ªå­—èŠ‚çš„æ•°æ®</p>
<p>sendçš„å­—èŠ‚æµæ˜¯å…ˆæ”¾å…¥å·±ç«¯ç¼“å­˜ï¼Œç„¶åç”±åè®®æ§åˆ¶å°†ç¼“å­˜å†…å®¹å‘å¾€å¯¹ç«¯ï¼Œå¦‚æœå¾…å‘é€çš„å­—èŠ‚æµå¤§å°å¤§äºç¼“å­˜å‰©ä½™ç©ºé—´ï¼Œé‚£ä¹ˆæ•°æ®ä¸¢å¤±ï¼Œç”¨sendallå°±ä¼šå¾ªç¯è°ƒç”¨sendï¼Œæ•°æ®ä¸ä¼šä¸¢å¤±</p>
<h3 id="åä¸€-è§£å†³ç²˜åŒ…çš„lowæ¯”å¤„ç†æ–¹æ³•"><a href="#åä¸€-è§£å†³ç²˜åŒ…çš„lowæ¯”å¤„ç†æ–¹æ³•" class="headerlink" title="åä¸€ è§£å†³ç²˜åŒ…çš„lowæ¯”å¤„ç†æ–¹æ³•"></a>åä¸€ è§£å†³ç²˜åŒ…çš„lowæ¯”å¤„ç†æ–¹æ³•</h3><p>é—®é¢˜çš„æ ¹æºåœ¨äºï¼Œæ¥æ”¶ç«¯ä¸çŸ¥é“å‘é€ç«¯å°†è¦ä¼ é€çš„å­—èŠ‚æµçš„é•¿åº¦ï¼Œæ‰€ä»¥è§£å†³ç²˜åŒ…çš„æ–¹æ³•å°±æ˜¯å›´ç»•ï¼Œå¦‚ä½•è®©å‘é€ç«¯åœ¨å‘é€æ•°æ®å‰ï¼ŒæŠŠè‡ªå·±å°†è¦å‘é€çš„å­—èŠ‚æµæ€»å¤§å°è®©æ¥æ”¶ç«¯çŸ¥æ™“ï¼Œç„¶åæ¥æ”¶ç«¯æ¥ä¸€ä¸ªæ­»å¾ªç¯æ¥æ”¶å®Œæ‰€æœ‰æ•°æ®</p>
<p>lowç‰ˆæœ¬çš„è§£å†³æ–¹æ³•</p>
<p>æœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket,subprocess</span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>)</span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">s.bind(ip_port)</span><br><span class="line">s.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    conn,addr=s.accept()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å®¢æˆ·ç«¯&#x27;</span>,addr)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        msg=conn.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> msg:<span class="keyword">break</span></span><br><span class="line">        res=subprocess.Popen(msg.decode(<span class="string">&#x27;utf-8&#x27;</span>),shell=<span class="literal">True</span>,\</span><br><span class="line">                            stdin=subprocess.PIPE,\</span><br><span class="line">                         stderr=subprocess.PIPE,\</span><br><span class="line">                         stdout=subprocess.PIPE)</span><br><span class="line">        err=res.stderr.read()</span><br><span class="line">        <span class="keyword">if</span> err:</span><br><span class="line">            ret=err</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            ret=res.stdout.read()</span><br><span class="line">        data_length=<span class="built_in">len</span>(ret)</span><br><span class="line">        conn.send(<span class="built_in">str</span>(data_length).encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">        data=conn.recv(<span class="number">1024</span>).decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> data == <span class="string">&#x27;recv_ready&#x27;</span>:</span><br><span class="line">            conn.sendall(ret)</span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket,time</span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">res=s.connect_ex((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(msg) == <span class="number">0</span>:<span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">if</span> msg == <span class="string">&#x27;quit&#x27;</span>:<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    s.send(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    length=<span class="built_in">int</span>(s.recv(<span class="number">1024</span>).decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    s.send(<span class="string">&#x27;recv_ready&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    send_size=<span class="number">0</span></span><br><span class="line">    recv_size=<span class="number">0</span></span><br><span class="line">    data=<span class="string">b&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">while</span> recv_size &lt; length:</span><br><span class="line">        data+=s.recv(<span class="number">1024</span>)</span><br><span class="line">        recv_size+=<span class="built_in">len</span>(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(data.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>ä¸ºä½•lowï¼š</p>
<p>ç¨‹åºçš„è¿è¡Œé€Ÿåº¦è¿œå¿«äºç½‘ç»œä¼ è¾“é€Ÿåº¦ï¼Œæ‰€ä»¥åœ¨å‘é€ä¸€æ®µå­—èŠ‚å‰ï¼Œå…ˆç”¨sendå»å‘é€è¯¥å­—èŠ‚æµé•¿åº¦ï¼Œè¿™ç§æ–¹å¼ä¼šæ”¾å¤§ç½‘ç»œå»¶è¿Ÿå¸¦æ¥çš„æ€§èƒ½æŸè€—</p>
<h3 id="åäºŒ-å³°å“¥è§£å†³ç²˜åŒ…çš„æ–¹æ³•"><a href="#åäºŒ-å³°å“¥è§£å†³ç²˜åŒ…çš„æ–¹æ³•" class="headerlink" title="åäºŒ å³°å“¥è§£å†³ç²˜åŒ…çš„æ–¹æ³•"></a>åäºŒ å³°å“¥è§£å†³ç²˜åŒ…çš„æ–¹æ³•</h3><p>ä¸ºå­—èŠ‚æµåŠ ä¸Šè‡ªå®šä¹‰å›ºå®šé•¿åº¦æŠ¥å¤´ï¼ŒæŠ¥å¤´ä¸­åŒ…å«å­—èŠ‚æµé•¿åº¦ï¼Œç„¶åä¸€æ¬¡sendåˆ°å¯¹ç«¯ï¼Œå¯¹ç«¯åœ¨æ¥æ”¶æ—¶ï¼Œå…ˆä»ç¼“å­˜ä¸­å–å‡ºå®šé•¿çš„æŠ¥å¤´ï¼Œç„¶åå†å–çœŸå®æ•°æ®</p>
<p><strong>structæ¨¡å—</strong></p>
<p>è¯¥æ¨¡å—å¯ä»¥æŠŠä¸€ä¸ªç±»å‹ï¼Œå¦‚æ•°å­—ï¼Œè½¬æˆå›ºå®šé•¿åº¦çš„bytes</p>
<p>&gt;&gt;&gt; struct.pack(â€˜iâ€™,1111111111111)</p>
<p>ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p>
<p>struct.error: â€˜iâ€™ format requires -2147483648 &lt;&#x3D; number &lt;&#x3D; 2147483647 #è¿™ä¸ªæ˜¯èŒƒå›´</p>
<p><img src="https://pic2.zhimg.com/80/v2-d7c66c9a0abe12041ae948a553b908c9_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json,struct</span><br><span class="line"><span class="comment">#å‡è®¾é€šè¿‡å®¢æˆ·ç«¯ä¸Šä¼ 1T:1073741824000çš„æ–‡ä»¶a.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸ºé¿å…ç²˜åŒ…,å¿…é¡»è‡ªå®šåˆ¶æŠ¥å¤´</span></span><br><span class="line">header=&#123;<span class="string">&#x27;file_size&#x27;</span>:<span class="number">1073741824000</span>,<span class="string">&#x27;file_name&#x27;</span>:<span class="string">&#x27;/a/b/c/d/e/a.txt&#x27;</span>,<span class="string">&#x27;md5&#x27;</span>:<span class="string">&#x27;8f6fbf8347faa4924a76856701edb0f3&#x27;</span>&#125; <span class="comment">#1Tæ•°æ®,æ–‡ä»¶è·¯å¾„å’Œmd5å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸ºäº†è¯¥æŠ¥å¤´èƒ½ä¼ é€,éœ€è¦åºåˆ—åŒ–å¹¶ä¸”è½¬ä¸ºbytes</span></span><br><span class="line">head_bytes=<span class="built_in">bytes</span>(json.dumps(header),encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="comment">#åºåˆ—åŒ–å¹¶è½¬æˆbytes,ç”¨äºä¼ è¾“</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸ºäº†è®©å®¢æˆ·ç«¯çŸ¥é“æŠ¥å¤´çš„é•¿åº¦,ç”¨struckå°†æŠ¥å¤´é•¿åº¦è¿™ä¸ªæ•°å­—è½¬æˆå›ºå®šé•¿åº¦:4ä¸ªå­—èŠ‚</span></span><br><span class="line">head_len_bytes=struct.pack(<span class="string">&#x27;i&#x27;</span>,<span class="built_in">len</span>(head_bytes)) <span class="comment">#è¿™4ä¸ªå­—èŠ‚é‡ŒåªåŒ…å«äº†ä¸€ä¸ªæ•°å­—,è¯¥æ•°å­—æ˜¯æŠ¥å¤´çš„é•¿åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å®¢æˆ·ç«¯å¼€å§‹å‘é€</span></span><br><span class="line">conn.send(head_len_bytes) <span class="comment">#å…ˆå‘æŠ¥å¤´çš„é•¿åº¦,4ä¸ªbytes</span></span><br><span class="line">conn.send(head_bytes) <span class="comment">#å†å‘æŠ¥å¤´çš„å­—èŠ‚æ ¼å¼</span></span><br><span class="line">conn.sendall(æ–‡ä»¶å†…å®¹) <span class="comment">#ç„¶åå‘çœŸå®å†…å®¹çš„å­—èŠ‚æ ¼å¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æœåŠ¡ç«¯å¼€å§‹æ¥æ”¶</span></span><br><span class="line">head_len_bytes=s.recv(<span class="number">4</span>) <span class="comment">#å…ˆæ”¶æŠ¥å¤´4ä¸ªbytes,å¾—åˆ°æŠ¥å¤´é•¿åº¦çš„å­—èŠ‚æ ¼å¼</span></span><br><span class="line">x=struct.unpack(<span class="string">&#x27;i&#x27;</span>,head_len_bytes)[<span class="number">0</span>] <span class="comment">#æå–æŠ¥å¤´çš„é•¿åº¦</span></span><br><span class="line"></span><br><span class="line">head_bytes=s.recv(x) <span class="comment">#æŒ‰ç…§æŠ¥å¤´é•¿åº¦x,æ”¶å–æŠ¥å¤´çš„bytesæ ¼å¼</span></span><br><span class="line">header=json.loads(json.dumps(header)) <span class="comment">#æå–æŠ¥å¤´</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æœ€åæ ¹æ®æŠ¥å¤´çš„å†…å®¹æå–çœŸå®çš„æ•°æ®,æ¯”å¦‚</span></span><br><span class="line">real_data_len=s.recv(header[<span class="string">&#x27;file_size&#x27;</span>])</span><br><span class="line">s.recv(real_data_len)</span><br></pre></td></tr></table></figure>

<p>å…³äºstructçš„è¯¦ç»†ç”¨æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="comment">#http://www.cnblogs.com/coser/archive/2011/12/17/2291160.html</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"><span class="keyword">import</span> binascii</span><br><span class="line"><span class="keyword">import</span> ctypes</span><br><span class="line"></span><br><span class="line">values1 = (<span class="number">1</span>, <span class="string">&#x27;abc&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>), <span class="number">2.7</span>)</span><br><span class="line">values2 = (<span class="string">&#x27;defg&#x27;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>),<span class="number">101</span>)</span><br><span class="line">s1 = struct.Struct(<span class="string">&#x27;I3sf&#x27;</span>)</span><br><span class="line">s2 = struct.Struct(<span class="string">&#x27;4sI&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s1.size,s2.size)</span><br><span class="line">prebuffer=ctypes.create_string_buffer(s1.size+s2.size)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Before : &#x27;</span>,binascii.hexlify(prebuffer))</span><br><span class="line"><span class="comment"># t=binascii.hexlify(&#x27;asdfaf&#x27;.encode(&#x27;utf-8&#x27;))</span></span><br><span class="line"><span class="comment"># print(t)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s1.pack_into(prebuffer,<span class="number">0</span>,*values1)</span><br><span class="line">s2.pack_into(prebuffer,s1.size,*values2)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;After pack&#x27;</span>,binascii.hexlify(prebuffer))</span><br><span class="line"><span class="built_in">print</span>(s1.unpack_from(prebuffer,<span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(s2.unpack_from(prebuffer,s1.size))</span><br><span class="line"></span><br><span class="line">s3=struct.Struct(<span class="string">&#x27;ii&#x27;</span>)</span><br><span class="line">s3.pack_into(prebuffer,<span class="number">0</span>,<span class="number">123</span>,<span class="number">123</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;After pack&#x27;</span>,binascii.hexlify(prebuffer))</span><br><span class="line"><span class="built_in">print</span>(s3.unpack_from(prebuffer,<span class="number">0</span>))</span><br></pre></td></tr></table></figure>

<p>æœåŠ¡ç«¯ï¼ˆè‡ªå®šåˆ¶æŠ¥å¤´ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket,struct,json</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">phone=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">phone.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,<span class="number">1</span>) <span class="comment">#å°±æ˜¯å®ƒï¼Œåœ¨bindå‰åŠ </span></span><br><span class="line"></span><br><span class="line">phone.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line">phone.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    conn,addr=phone.accept()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        cmd=conn.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> cmd:<span class="keyword">break</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;cmd: %s&#x27;</span> %cmd)</span><br><span class="line"></span><br><span class="line">        res=subprocess.Popen(cmd.decode(<span class="string">&#x27;utf-8&#x27;</span>),</span><br><span class="line">                             shell=<span class="literal">True</span>,</span><br><span class="line">                             stdout=subprocess.PIPE,</span><br><span class="line">                             stderr=subprocess.PIPE)</span><br><span class="line">        err=res.stderr.read()</span><br><span class="line">        <span class="built_in">print</span>(err)</span><br><span class="line">        <span class="keyword">if</span> err:</span><br><span class="line">            back_msg=err</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            back_msg=res.stdout.read()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        conn.send(struct.pack(<span class="string">&#x27;i&#x27;</span>,<span class="built_in">len</span>(back_msg))) <span class="comment">#å…ˆå‘back_msgçš„é•¿åº¦</span></span><br><span class="line">        conn.sendall(back_msg) <span class="comment">#åœ¨å‘çœŸå®çš„å†…å®¹</span></span><br><span class="line"></span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯ï¼ˆè‡ªå®šåˆ¶æŠ¥å¤´ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">import</span> socket,time,struct</span><br><span class="line"></span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">res=s.connect_ex((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(msg) == <span class="number">0</span>:<span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">if</span> msg == <span class="string">&#x27;quit&#x27;</span>:<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    s.send(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    l=s.recv(<span class="number">4</span>)</span><br><span class="line">    x=struct.unpack(<span class="string">&#x27;i&#x27;</span>,l)[<span class="number">0</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">type</span>(x),x)</span><br><span class="line">    <span class="comment"># print(struct.unpack(&#x27;I&#x27;,l))</span></span><br><span class="line">    r_s=<span class="number">0</span></span><br><span class="line">    data=<span class="string">b&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">while</span> r_s &lt; x:</span><br><span class="line">        r_d=s.recv(<span class="number">1024</span>)</span><br><span class="line">        data+=r_d</span><br><span class="line">        r_s+=<span class="built_in">len</span>(r_d)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(data.decode(&#x27;utf-8&#x27;))</span></span><br><span class="line">    <span class="built_in">print</span>(data.decode(<span class="string">&#x27;gbk&#x27;</span>)) <span class="comment">#windowsé»˜è®¤gbkç¼–ç </span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥æŠŠæŠ¥å¤´åšæˆå­—å…¸ï¼Œå­—å…¸é‡ŒåŒ…å«å°†è¦å‘é€çš„çœŸå®æ•°æ®çš„è¯¦ç»†ä¿¡æ¯ï¼Œç„¶åjsonåºåˆ—åŒ–ï¼Œç„¶åç”¨struckå°†åºåˆ—åŒ–åçš„æ•°æ®é•¿åº¦æ‰“åŒ…æˆ4ä¸ªå­—èŠ‚ï¼ˆ4ä¸ªè‡ªå·±è¶³å¤Ÿç”¨äº†ï¼‰</p>
<p>å‘é€æ—¶ï¼š</p>
<p>å…ˆå‘æŠ¥å¤´é•¿åº¦</p>
<p>å†ç¼–ç æŠ¥å¤´å†…å®¹ç„¶åå‘é€</p>
<p>æœ€åå‘çœŸå®å†…å®¹</p>
<p>æ¥æ”¶æ—¶ï¼š</p>
<p>å…ˆæ‰‹æŠ¥å¤´é•¿åº¦ï¼Œç”¨structå–å‡ºæ¥</p>
<p>æ ¹æ®å–å‡ºçš„é•¿åº¦æ”¶å–æŠ¥å¤´å†…å®¹ï¼Œç„¶åè§£ç ï¼Œååºåˆ—åŒ–</p>
<p>ä»ååºåˆ—åŒ–çš„ç»“æœä¸­å–å‡ºå¾…å–æ•°æ®çš„è¯¦ç»†ä¿¡æ¯ï¼Œç„¶åå»å–çœŸå®çš„æ•°æ®å†…å®¹</p>
<p>æœåŠ¡ç«¯ï¼šå®šåˆ¶ç¨å¾®å¤æ‚ä¸€ç‚¹çš„æŠ¥å¤´</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket,struct,json</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">phone=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">phone.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,<span class="number">1</span>) <span class="comment">#å°±æ˜¯å®ƒï¼Œåœ¨bindå‰åŠ </span></span><br><span class="line"></span><br><span class="line">phone.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line">phone.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    conn,addr=phone.accept()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        cmd=conn.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> cmd:<span class="keyword">break</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;cmd: %s&#x27;</span> %cmd)</span><br><span class="line"></span><br><span class="line">        res=subprocess.Popen(cmd.decode(<span class="string">&#x27;utf-8&#x27;</span>),</span><br><span class="line">                             shell=<span class="literal">True</span>,</span><br><span class="line">                             stdout=subprocess.PIPE,</span><br><span class="line">                             stderr=subprocess.PIPE)</span><br><span class="line">        err=res.stderr.read()</span><br><span class="line">        <span class="built_in">print</span>(err)</span><br><span class="line">        <span class="keyword">if</span> err:</span><br><span class="line">            back_msg=err</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            back_msg=res.stdout.read()</span><br><span class="line"></span><br><span class="line">        headers=&#123;<span class="string">&#x27;data_size&#x27;</span>:<span class="built_in">len</span>(back_msg)&#125;</span><br><span class="line">        head_json=json.dumps(headers)</span><br><span class="line">        head_json_bytes=<span class="built_in">bytes</span>(head_json,encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        conn.send(struct.pack(<span class="string">&#x27;i&#x27;</span>,<span class="built_in">len</span>(head_json_bytes))) <span class="comment">#å…ˆå‘æŠ¥å¤´çš„é•¿åº¦</span></span><br><span class="line">        conn.send(head_json_bytes) <span class="comment">#å†å‘æŠ¥å¤´</span></span><br><span class="line">        conn.sendall(back_msg) <span class="comment">#åœ¨å‘çœŸå®çš„å†…å®¹</span></span><br><span class="line"></span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> struct,json</span><br><span class="line"></span><br><span class="line">ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>)</span><br><span class="line">client=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">client.connect(ip_port)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    cmd=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> cmd:<span class="keyword">continue</span></span><br><span class="line">    client.send(<span class="built_in">bytes</span>(cmd,encoding=<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    head=client.recv(<span class="number">4</span>)</span><br><span class="line">    head_json_len=struct.unpack(<span class="string">&#x27;i&#x27;</span>,head)[<span class="number">0</span>]</span><br><span class="line">    head_json=json.loads(client.recv(head_json_len).decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    data_len=head_json[<span class="string">&#x27;data_size&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    recv_size=<span class="number">0</span></span><br><span class="line">    recv_data=<span class="string">b&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">while</span> recv_size &lt; data_len:</span><br><span class="line">        recv_data+=client.recv(<span class="number">1024</span>)</span><br><span class="line">        recv_size+=<span class="built_in">len</span>(recv_data)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(recv_data.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="comment">#print(recv_data.decode(&#x27;gbk&#x27;)) #windowsé»˜è®¤gbkç¼–ç </span></span><br></pre></td></tr></table></figure>

<p>FTPä½œä¸šï¼šä¸Šä¼ ä¸‹è½½æ–‡ä»¶</p>
<p>æœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MYTCPServer</span>:</span></span><br><span class="line">    address_family = socket.AF_INET</span><br><span class="line"></span><br><span class="line">    socket_type = socket.SOCK_STREAM</span><br><span class="line"></span><br><span class="line">    allow_reuse_address = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    max_packet_size = <span class="number">8192</span></span><br><span class="line"></span><br><span class="line">    coding=<span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line"></span><br><span class="line">    request_queue_size = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">    server_dir=<span class="string">&#x27;file_upload&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, server_address, bind_and_activate=<span class="literal">True</span></span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Constructor.  May be extended, do not override.&quot;&quot;&quot;</span></span><br><span class="line">        self.server_address=server_address</span><br><span class="line">        self.socket = socket.socket(self.address_family,</span><br><span class="line">                                    self.socket_type)</span><br><span class="line">        <span class="keyword">if</span> bind_and_activate:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                self.server_bind()</span><br><span class="line">                self.server_activate()</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                self.server_close()</span><br><span class="line">                <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">server_bind</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Called by constructor to bind the socket.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> self.allow_reuse_address:</span><br><span class="line">            self.socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line">        self.socket.bind(self.server_address)</span><br><span class="line">        self.server_address = self.socket.getsockname()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">server_activate</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Called by constructor to activate the server.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.socket.listen(self.request_queue_size)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">server_close</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Called to clean-up the server.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.socket.close()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_request</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Get the request and client address from the socket.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.socket.accept()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close_request</span>(<span class="params">self, request</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;Called to clean up an individual request.&quot;&quot;&quot;</span></span><br><span class="line">        request.close()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            self.conn,self.client_addr=self.get_request()</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;from client &#x27;</span>,self.client_addr)</span><br><span class="line">            <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    head_struct = self.conn.recv(<span class="number">4</span>)</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">not</span> head_struct:<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">                    head_len = struct.unpack(<span class="string">&#x27;i&#x27;</span>, head_struct)[<span class="number">0</span>]</span><br><span class="line">                    head_json = self.conn.recv(head_len).decode(self.coding)</span><br><span class="line">                    head_dic = json.loads(head_json)</span><br><span class="line"></span><br><span class="line">                    <span class="built_in">print</span>(head_dic)</span><br><span class="line">                    <span class="comment">#head_dic=&#123;&#x27;cmd&#x27;:&#x27;put&#x27;,&#x27;filename&#x27;:&#x27;a.txt&#x27;,&#x27;filesize&#x27;:123123&#125;</span></span><br><span class="line">                    cmd=head_dic[<span class="string">&#x27;cmd&#x27;</span>]</span><br><span class="line">                    <span class="keyword">if</span> <span class="built_in">hasattr</span>(self,cmd):</span><br><span class="line">                        func=<span class="built_in">getattr</span>(self,cmd)</span><br><span class="line">                        func(head_dic)</span><br><span class="line">                <span class="keyword">except</span> Exception:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span>(<span class="params">self,args</span>):</span></span><br><span class="line">        file_path=os.path.normpath(os.path.join(</span><br><span class="line">            self.server_dir,</span><br><span class="line">            args[<span class="string">&#x27;filename&#x27;</span>]</span><br><span class="line">        ))</span><br><span class="line"></span><br><span class="line">        filesize=args[<span class="string">&#x27;filesize&#x27;</span>]</span><br><span class="line">        recv_size=<span class="number">0</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;-----&gt;&#x27;</span>,file_path)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_path,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">while</span> recv_size &lt; filesize:</span><br><span class="line">                recv_data=self.conn.recv(self.max_packet_size)</span><br><span class="line">                f.write(recv_data)</span><br><span class="line">                recv_size+=<span class="built_in">len</span>(recv_data)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;recvsize:%s filesize:%s&#x27;</span> %(recv_size,filesize))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tcpserver1=MYTCPServer((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line">tcpserver1.run()</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MYTCPClient</span>:</span></span><br><span class="line">    address_family = socket.AF_INET</span><br><span class="line"></span><br><span class="line">    socket_type = socket.SOCK_STREAM</span><br><span class="line"></span><br><span class="line">    allow_reuse_address = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    max_packet_size = <span class="number">8192</span></span><br><span class="line"></span><br><span class="line">    coding=<span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line"></span><br><span class="line">    request_queue_size = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, server_address, connect=<span class="literal">True</span></span>):</span></span><br><span class="line">        self.server_address=server_address</span><br><span class="line">        self.socket = socket.socket(self.address_family,</span><br><span class="line">                                    self.socket_type)</span><br><span class="line">        <span class="keyword">if</span> connect:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                self.client_connect()</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                self.client_close()</span><br><span class="line">                <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">client_connect</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.socket.connect(self.server_address)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">client_close</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.socket.close()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            inp=<span class="built_in">input</span>(<span class="string">&quot;&gt;&gt;: &quot;</span>).strip()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> inp:<span class="keyword">continue</span></span><br><span class="line">            l=inp.split()</span><br><span class="line">            cmd=l[<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">hasattr</span>(self,cmd):</span><br><span class="line">                func=<span class="built_in">getattr</span>(self,cmd)</span><br><span class="line">                func(l)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span>(<span class="params">self,args</span>):</span></span><br><span class="line">        cmd=args[<span class="number">0</span>]</span><br><span class="line">        filename=args[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.isfile(filename):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;file:%s is not exists&#x27;</span> %filename)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            filesize=os.path.getsize(filename)</span><br><span class="line"></span><br><span class="line">        head_dic=&#123;<span class="string">&#x27;cmd&#x27;</span>:cmd,<span class="string">&#x27;filename&#x27;</span>:os.path.basename(filename),<span class="string">&#x27;filesize&#x27;</span>:filesize&#125;</span><br><span class="line">        <span class="built_in">print</span>(head_dic)</span><br><span class="line">        head_json=json.dumps(head_dic)</span><br><span class="line">        head_json_bytes=<span class="built_in">bytes</span>(head_json,encoding=self.coding)</span><br><span class="line"></span><br><span class="line">        head_struct=struct.pack(<span class="string">&#x27;i&#x27;</span>,<span class="built_in">len</span>(head_json_bytes))</span><br><span class="line">        self.socket.send(head_struct)</span><br><span class="line">        self.socket.send(head_json_bytes)</span><br><span class="line">        send_size=<span class="number">0</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(filename,<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">                self.socket.send(line)</span><br><span class="line">                send_size+=<span class="built_in">len</span>(line)</span><br><span class="line">                <span class="built_in">print</span>(send_size)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;upload successful&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">client=MYTCPClient((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line">client.run()</span><br></pre></td></tr></table></figure>

<h3 id="åä¸‰-è®¤è¯å®¢æˆ·ç«¯çš„é“¾æ¥åˆæ³•æ€§"><a href="#åä¸‰-è®¤è¯å®¢æˆ·ç«¯çš„é“¾æ¥åˆæ³•æ€§" class="headerlink" title="åä¸‰ è®¤è¯å®¢æˆ·ç«¯çš„é“¾æ¥åˆæ³•æ€§"></a>åä¸‰ è®¤è¯å®¢æˆ·ç«¯çš„é“¾æ¥åˆæ³•æ€§</h3><p>å¦‚æœä½ æƒ³åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°ä¸€ä¸ªç®€å•çš„å®¢æˆ·ç«¯é“¾æ¥è®¤è¯åŠŸèƒ½ï¼Œåˆä¸åƒSSLé‚£ä¹ˆå¤æ‚ï¼Œé‚£ä¹ˆåˆ©ç”¨hmac+åŠ ç›çš„æ–¹å¼æ¥å®ç°</p>
<p>æœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> hmac,os</span><br><span class="line"></span><br><span class="line">secret_key=<span class="string">b&#x27;linhaifeng bang bang bang&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conn_auth</span>(<span class="params">conn</span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    è®¤è¯å®¢æˆ·ç«¯é“¾æ¥</span></span><br><span class="line"><span class="string">    :param conn:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;å¼€å§‹éªŒè¯æ–°é“¾æ¥çš„åˆæ³•æ€§&#x27;</span>)</span><br><span class="line">    msg=os.urandom(<span class="number">32</span>)</span><br><span class="line">    conn.sendall(msg)</span><br><span class="line">    h=hmac.new(secret_key,msg)</span><br><span class="line">    digest=h.digest()</span><br><span class="line">    respone=conn.recv(<span class="built_in">len</span>(digest))</span><br><span class="line">    <span class="keyword">return</span> hmac.compare_digest(respone,digest)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">data_handler</span>(<span class="params">conn,bufsize=<span class="number">1024</span></span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> conn_auth(conn):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;è¯¥é“¾æ¥ä¸åˆæ³•,å…³é—­&#x27;</span>)</span><br><span class="line">        conn.close()</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;é“¾æ¥åˆæ³•,å¼€å§‹é€šä¿¡&#x27;</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        data=conn.recv(bufsize)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> data:<span class="keyword">break</span></span><br><span class="line">        conn.sendall(data.upper())</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">server_handler</span>(<span class="params">ip_port,bufsize,backlog=<span class="number">5</span></span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    åªå¤„ç†é“¾æ¥</span></span><br><span class="line"><span class="string">    :param ip_port:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    tcp_socket_server=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">    tcp_socket_server.bind(ip_port)</span><br><span class="line">    tcp_socket_server.listen(backlog)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        conn,addr=tcp_socket_server.accept()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;æ–°è¿æ¥[%s:%s]&#x27;</span> %(addr[<span class="number">0</span>],addr[<span class="number">1</span>]))</span><br><span class="line">        data_handler(conn,bufsize)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">9999</span>)</span><br><span class="line">    bufsize=<span class="number">1024</span></span><br><span class="line">    server_handler(ip_port,bufsize)</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯(åˆæ³•)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> hmac,os</span><br><span class="line"></span><br><span class="line">secret_key=<span class="string">b&#x27;linhaifeng bang bang bang&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conn_auth</span>(<span class="params">conn</span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    éªŒè¯å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„é“¾æ¥</span></span><br><span class="line"><span class="string">    :param conn:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    msg=conn.recv(<span class="number">32</span>)</span><br><span class="line">    h=hmac.new(secret_key,msg)</span><br><span class="line">    digest=h.digest()</span><br><span class="line">    conn.sendall(digest)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">client_handler</span>(<span class="params">ip_port,bufsize=<span class="number">1024</span></span>):</span></span><br><span class="line">    tcp_socket_client=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">    tcp_socket_client.connect(ip_port)</span><br><span class="line"></span><br><span class="line">    conn_auth(tcp_socket_client)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        data=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> data:<span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> data == <span class="string">&#x27;quit&#x27;</span>:<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        tcp_socket_client.sendall(data.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">        respone=tcp_socket_client.recv(bufsize)</span><br><span class="line">        <span class="built_in">print</span>(respone.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    tcp_socket_client.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">9999</span>)</span><br><span class="line">    bufsize=<span class="number">1024</span></span><br><span class="line">    client_handler(ip_port,bufsize)</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯(éæ³•:ä¸çŸ¥é“åŠ å¯†æ–¹å¼)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">client_handler</span>(<span class="params">ip_port,bufsize=<span class="number">1024</span></span>):</span></span><br><span class="line">    tcp_socket_client=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">    tcp_socket_client.connect(ip_port)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        data=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> data:<span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> data == <span class="string">&#x27;quit&#x27;</span>:<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        tcp_socket_client.sendall(data.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">        respone=tcp_socket_client.recv(bufsize)</span><br><span class="line">        <span class="built_in">print</span>(respone.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    tcp_socket_client.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">9999</span>)</span><br><span class="line">    bufsize=<span class="number">1024</span></span><br><span class="line">    client_handler(ip_port,bufsize)</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯(éæ³•:ä¸çŸ¥é“secret_key)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> hmac,os</span><br><span class="line"></span><br><span class="line">secret_key=<span class="string">b&#x27;linhaifeng bang bang bang1111&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conn_auth</span>(<span class="params">conn</span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    éªŒè¯å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„é“¾æ¥</span></span><br><span class="line"><span class="string">    :param conn:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    msg=conn.recv(<span class="number">32</span>)</span><br><span class="line">    h=hmac.new(secret_key,msg)</span><br><span class="line">    digest=h.digest()</span><br><span class="line">    conn.sendall(digest)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">client_handler</span>(<span class="params">ip_port,bufsize=<span class="number">1024</span></span>):</span></span><br><span class="line">    tcp_socket_client=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">    tcp_socket_client.connect(ip_port)</span><br><span class="line"></span><br><span class="line">    conn_auth(tcp_socket_client)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        data=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> data:<span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> data == <span class="string">&#x27;quit&#x27;</span>:<span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        tcp_socket_client.sendall(data.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">        respone=tcp_socket_client.recv(bufsize)</span><br><span class="line">        <span class="built_in">print</span>(respone.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    tcp_socket_client.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    ip_port=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">9999</span>)</span><br><span class="line">    bufsize=<span class="number">1024</span></span><br><span class="line">    client_handler(ip_port,bufsize)</span><br></pre></td></tr></table></figure>

<h3 id="åå››-socketserverå®ç°å¹¶å‘"><a href="#åå››-socketserverå®ç°å¹¶å‘" class="headerlink" title="åå›› socketserverå®ç°å¹¶å‘"></a>åå›› socketserverå®ç°å¹¶å‘</h3><p>åŸºäºtcpçš„å¥—æ¥å­—ï¼Œå…³é”®å°±æ˜¯ä¸¤ä¸ªå¾ªç¯ï¼Œä¸€ä¸ªé“¾æ¥å¾ªç¯ï¼Œä¸€ä¸ªé€šä¿¡å¾ªç¯</p>
<p>socketserveræ¨¡å—ä¸­åˆ†ä¸¤å¤§ç±»ï¼šserverç±»ï¼ˆè§£å†³é“¾æ¥é—®é¢˜ï¼‰å’Œrequestç±»ï¼ˆè§£å†³é€šä¿¡é—®é¢˜ï¼‰</p>
<p>serverç±»ï¼š</p>
<p><img src="https://pic1.zhimg.com/80/v2-8888d725cb767594afe03b558814ba28_720w.jpg" alt="img"></p>
<p>requestç±»ï¼š</p>
<p><img src="https://pic2.zhimg.com/80/v2-d39565c190e7edc28f8cf8be1bf981f9_720w.jpg" alt="img"></p>
<p>ç»§æ‰¿å…³ç³»:</p>
<p><img src="https://pic1.zhimg.com/80/v2-16fcc2d93beebe3f1739951dc5d80114_720w.jpg" alt="img"></p>
<p><img src="https://pic3.zhimg.com/80/v2-154c5cb9cc464fac3e81703938479446_720w.jpg" alt="img"></p>
<p><img src="https://pic3.zhimg.com/80/v2-43cec3a3b133fd33c4d4db33af86807a_720w.jpg" alt="img"></p>
<p>ä»¥ä¸‹è¿°ä»£ç ä¸ºä¾‹ï¼Œåˆ†æsocketserveræºç ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ftpserver=socketserver.ThreadingTCPServer((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>),FtpServer)</span><br><span class="line">ftpserver.serve_forever()</span><br></pre></td></tr></table></figure>

<p>æŸ¥æ‰¾å±æ€§çš„é¡ºåºï¼šThreadingTCPServer-&gt;ThreadingMixIn-&gt;TCPServer-&gt;BaseServer</p>
<ol>
<li>å®ä¾‹åŒ–å¾—åˆ°ftpserverï¼Œå…ˆæ‰¾ç±»ThreadingTCPServerçš„<strong>init</strong>,åœ¨TCPServerä¸­æ‰¾åˆ°ï¼Œè¿›è€Œæ‰§è¡Œserver_bind,server_active</li>
<li>æ‰¾ftpserverä¸‹çš„serve_forever,åœ¨BaseServerä¸­æ‰¾åˆ°ï¼Œè¿›è€Œæ‰§è¡Œself._handle_request_noblock()ï¼Œè¯¥æ–¹æ³•åŒæ ·æ˜¯åœ¨BaseServerä¸­</li>
<li>æ‰§è¡Œself._handle_request_noblock()è¿›è€Œæ‰§è¡Œrequest, client_address &#x3D; self.get_request()ï¼ˆå°±æ˜¯TCPServerä¸­çš„self.socket.accept()ï¼‰ï¼Œç„¶åæ‰§è¡Œself.process_request(request, client_address)</li>
<li>åœ¨ThreadingMixInä¸­æ‰¾åˆ°process_requestï¼Œå¼€å¯å¤šçº¿ç¨‹åº”å¯¹å¹¶å‘ï¼Œè¿›è€Œæ‰§è¡Œprocess_request_threadï¼Œæ‰§è¡Œself.finish_request(request, client_address)</li>
<li>ä¸Šè¿°å››éƒ¨åˆ†å®Œæˆäº†é“¾æ¥å¾ªç¯ï¼Œæœ¬éƒ¨åˆ†å¼€å§‹è¿›å…¥å¤„ç†é€šè®¯éƒ¨åˆ†ï¼Œåœ¨BaseServerä¸­æ‰¾åˆ°finish_request,è§¦å‘æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»çš„å®ä¾‹åŒ–ï¼Œå»æ‰¾<strong>init</strong>æ–¹æ³•ï¼Œè€Œæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»æ²¡æœ‰è¯¥æ–¹æ³•ï¼Œåˆ™å»å®ƒçš„çˆ¶ç±»ä¹Ÿå°±æ˜¯BaseRequestHandlerä¸­æ‰¾â€¦.</li>
</ol>
<p>æºç åˆ†ææ€»ç»“ï¼š</p>
<p>åŸºäºtcpçš„socketserveræˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»ä¸­çš„</p>
<ol>
<li>self.serverå³å¥—æ¥å­—å¯¹è±¡</li>
<li>self.requestå³ä¸€ä¸ªé“¾æ¥</li>
<li>self.client_addresså³å®¢æˆ·ç«¯åœ°å€</li>
</ol>
<p>åŸºäºudpçš„socketserveræˆ‘ä»¬è‡ªå·±å®šä¹‰çš„ç±»ä¸­çš„</p>
<ol>
<li>self.requestæ˜¯ä¸€ä¸ªå…ƒç»„ï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯æœåŠ¡ç«¯çš„udpå¥—æ¥å­—å¯¹è±¡ï¼‰ï¼Œå¦‚(bâ€™adsfâ€™, )</li>
<li>self.client_addresså³å®¢æˆ·ç«¯åœ°å€</li>
</ol>
<p>FtpServer</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socketserver</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FtpServer</span>(<span class="params">socketserver.BaseRequestHandler</span>):</span></span><br><span class="line">    coding=<span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line">    server_dir=<span class="string">&#x27;file_upload&#x27;</span></span><br><span class="line">    max_packet_size=<span class="number">1024</span></span><br><span class="line">    BASE_DIR=os.path.dirname(os.path.abspath(__file__))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handle</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(self.request)</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            data=self.request.recv(<span class="number">4</span>)</span><br><span class="line">            data_len=struct.unpack(<span class="string">&#x27;i&#x27;</span>,data)[<span class="number">0</span>]</span><br><span class="line">            head_json=self.request.recv(data_len).decode(self.coding)</span><br><span class="line">            head_dic=json.loads(head_json)</span><br><span class="line">            <span class="comment"># print(head_dic)</span></span><br><span class="line">            cmd=head_dic[<span class="string">&#x27;cmd&#x27;</span>]</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">hasattr</span>(self,cmd):</span><br><span class="line">                func=<span class="built_in">getattr</span>(self,cmd)</span><br><span class="line">                func(head_dic)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span>(<span class="params">self,args</span>):</span></span><br><span class="line">        file_path = os.path.normpath(os.path.join(</span><br><span class="line">            self.BASE_DIR,</span><br><span class="line">            self.server_dir,</span><br><span class="line">            args[<span class="string">&#x27;filename&#x27;</span>]</span><br><span class="line">        ))</span><br><span class="line"></span><br><span class="line">        filesize = args[<span class="string">&#x27;filesize&#x27;</span>]</span><br><span class="line">        recv_size = <span class="number">0</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;-----&gt;&#x27;</span>, file_path)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">while</span> recv_size &lt; filesize:</span><br><span class="line">                recv_data = self.request.recv(self.max_packet_size)</span><br><span class="line">                f.write(recv_data)</span><br><span class="line">                recv_size += <span class="built_in">len</span>(recv_data)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;recvsize:%s filesize:%s&#x27;</span> % (recv_size, filesize))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ftpserver=socketserver.ThreadingTCPServer((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>),FtpServer)</span><br><span class="line">ftpserver.serve_forever()</span><br></pre></td></tr></table></figure>

<p>FtpClient</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MYTCPClient</span>:</span></span><br><span class="line">    address_family = socket.AF_INET</span><br><span class="line"></span><br><span class="line">    socket_type = socket.SOCK_STREAM</span><br><span class="line"></span><br><span class="line">    allow_reuse_address = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    max_packet_size = <span class="number">8192</span></span><br><span class="line"></span><br><span class="line">    coding=<span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line"></span><br><span class="line">    request_queue_size = <span class="number">5</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, server_address, connect=<span class="literal">True</span></span>):</span></span><br><span class="line">        self.server_address=server_address</span><br><span class="line">        self.socket = socket.socket(self.address_family,</span><br><span class="line">                                    self.socket_type)</span><br><span class="line">        <span class="keyword">if</span> connect:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                self.client_connect()</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                self.client_close()</span><br><span class="line">                <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">client_connect</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.socket.connect(self.server_address)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">client_close</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.socket.close()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            inp=<span class="built_in">input</span>(<span class="string">&quot;&gt;&gt;: &quot;</span>).strip()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> inp:<span class="keyword">continue</span></span><br><span class="line">            l=inp.split()</span><br><span class="line">            cmd=l[<span class="number">0</span>]</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">hasattr</span>(self,cmd):</span><br><span class="line">                func=<span class="built_in">getattr</span>(self,cmd)</span><br><span class="line">                func(l)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span>(<span class="params">self,args</span>):</span></span><br><span class="line">        cmd=args[<span class="number">0</span>]</span><br><span class="line">        filename=args[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.isfile(filename):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;file:%s is not exists&#x27;</span> %filename)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            filesize=os.path.getsize(filename)</span><br><span class="line"></span><br><span class="line">        head_dic=&#123;<span class="string">&#x27;cmd&#x27;</span>:cmd,<span class="string">&#x27;filename&#x27;</span>:os.path.basename(filename),<span class="string">&#x27;filesize&#x27;</span>:filesize&#125;</span><br><span class="line">        <span class="built_in">print</span>(head_dic)</span><br><span class="line">        head_json=json.dumps(head_dic)</span><br><span class="line">        head_json_bytes=<span class="built_in">bytes</span>(head_json,encoding=self.coding)</span><br><span class="line"></span><br><span class="line">        head_struct=struct.pack(<span class="string">&#x27;i&#x27;</span>,<span class="built_in">len</span>(head_json_bytes))</span><br><span class="line">        self.socket.send(head_struct)</span><br><span class="line">        self.socket.send(head_json_bytes)</span><br><span class="line">        send_size=<span class="number">0</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(filename,<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">                self.socket.send(line)</span><br><span class="line">                send_size+=<span class="built_in">len</span>(line)</span><br><span class="line">                <span class="built_in">print</span>(send_size)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;upload successful&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">client=MYTCPClient((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line">client.run()</span><br></pre></td></tr></table></figure>

<h3 id="åäº”-ä½œä¸š"><a href="#åäº”-ä½œä¸š" class="headerlink" title="åäº” ä½œä¸š"></a>åäº” ä½œä¸š</h3><p><img src="https://pic3.zhimg.com/80/v2-37d4aec9c5fe06d298f0d35258c0a222_720w.jpg" alt="img"></p>
<h2 id="è§†é¢‘é“¾æ¥"><a href="#è§†é¢‘é“¾æ¥" class="headerlink" title="è§†é¢‘é“¾æ¥"></a>è§†é¢‘é“¾æ¥</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=119">
  </a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>32-å¹¶å‘ç¼–ç¨‹ï¼ˆä¸€ï¼‰</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/32_python%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8B%E8%83%8C%E6%99%AF%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<h2 id="ä¸€-å¼•å­"><a href="#ä¸€-å¼•å­" class="headerlink" title="ä¸€ å¼•å­"></a>ä¸€ å¼•å­</h2><p>é¡¾åæ€ä¹‰ï¼Œè¿›ç¨‹å³æ­£åœ¨æ‰§è¡Œçš„ä¸€ä¸ªè¿‡ç¨‹ã€‚è¿›ç¨‹æ˜¯å¯¹æ­£åœ¨è¿è¡Œç¨‹åºçš„ä¸€ä¸ªæŠ½è±¡ã€‚</p>
<p>è¿›ç¨‹çš„æ¦‚å¿µèµ·æºäºæ“ä½œç³»ç»Ÿï¼Œæ˜¯æ“ä½œç³»ç»Ÿæœ€æ ¸å¿ƒçš„æ¦‚å¿µï¼Œä¹Ÿæ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„æœ€å¤è€ä¹Ÿæ˜¯æœ€é‡è¦çš„æŠ½è±¡æ¦‚å¿µä¹‹ä¸€ã€‚æ“ä½œç³»ç»Ÿçš„å…¶ä»–æ‰€æœ‰å†…å®¹éƒ½æ˜¯å›´ç»•è¿›ç¨‹çš„æ¦‚å¿µå±•å¼€çš„ã€‚</p>
<p>æ‰€ä»¥æƒ³è¦çœŸæ­£äº†è§£è¿›ç¨‹ï¼Œå¿…é¡»äº‹å…ˆäº†è§£æ“ä½œç³»ç»Ÿ</p>
<h2 id="äºŒ-ä¸ºä»€ä¹ˆè¦æœ‰æ“ä½œç³»ç»Ÿ"><a href="#äºŒ-ä¸ºä»€ä¹ˆè¦æœ‰æ“ä½œç³»ç»Ÿ" class="headerlink" title="äºŒ ä¸ºä»€ä¹ˆè¦æœ‰æ“ä½œç³»ç»Ÿ"></a>äºŒ ä¸ºä»€ä¹ˆè¦æœ‰æ“ä½œç³»ç»Ÿ</h2><p>ç°ä»£çš„è®¡ç®—æœºç³»ç»Ÿä¸»è¦æ˜¯ç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ªå¤„ç†å™¨ï¼Œä¸»å­˜ï¼Œç¡¬ç›˜ï¼Œé”®ç›˜ï¼Œé¼ æ ‡ï¼Œæ˜¾ç¤ºå™¨ï¼Œæ‰“å°æœºï¼Œç½‘ç»œæ¥å£åŠå…¶ä»–è¾“å…¥è¾“å‡ºè®¾å¤‡ç»„æˆã€‚</p>
<p>ä¸€èˆ¬è€Œè¨€ï¼Œç°ä»£è®¡ç®—æœºç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿã€‚</p>
<p>å…¶ä¸€ï¼šå¦‚æœæ¯ä½åº”ç”¨ç¨‹åºå‘˜éƒ½å¿…é¡»æŒæ¡è¯¥ç³»ç»Ÿæ‰€æœ‰çš„ç»†èŠ‚ï¼Œé‚£å°±ä¸å¯èƒ½å†ç¼–å†™ä»£ç äº†ï¼ˆä¸¥é‡å½±å“äº†ç¨‹åºå‘˜çš„å¼€å‘æ•ˆç‡ï¼šå…¨éƒ¨æŒæ¡è¿™äº›ç»†èŠ‚å¯èƒ½éœ€è¦ä¸€ä¸‡å¹´â€¦.ï¼‰</p>
<p>å…¶äºŒï¼šå¹¶ä¸”ç®¡ç†è¿™äº›éƒ¨ä»¶å¹¶åŠ ä»¥ä¼˜åŒ–ä½¿ç”¨ï¼Œæ˜¯ä¸€ä»¶æå¯ŒæŒ‘æˆ˜æ€§çš„å·¥ä½œï¼Œäºæ˜¯ï¼Œè®¡ç®—å®‰è£…äº†ä¸€å±‚è½¯ä»¶ï¼ˆç³»ç»Ÿè½¯ä»¶ï¼‰ï¼Œç§°ä¸ºæ“ä½œç³»ç»Ÿã€‚å®ƒçš„ä»»åŠ¡å°±æ˜¯ä¸ºç”¨æˆ·ç¨‹åºæä¾›ä¸€ä¸ªæ›´å¥½ã€æ›´ç®€å•ã€æ›´æ¸…æ™°çš„è®¡ç®—æœºæ¨¡å‹ï¼Œå¹¶ç®¡ç†åˆšæ‰æåˆ°çš„æ‰€æœ‰è®¾å¤‡ã€‚</p>
<p><strong>æ€»ç»“ï¼š</strong></p>
<p><strong>ç¨‹åºå‘˜æ— æ³•æŠŠæ‰€æœ‰çš„ç¡¬ä»¶æ“ä½œç»†èŠ‚éƒ½äº†è§£åˆ°ï¼Œç®¡ç†è¿™äº›ç¡¬ä»¶å¹¶ä¸”åŠ ä»¥ä¼˜åŒ–ä½¿ç”¨æ˜¯éå¸¸ç¹ççš„å·¥ä½œï¼Œè¿™ä¸ªç¹ççš„å·¥ä½œå°±æ˜¯æ“ä½œç³»ç»Ÿæ¥å¹²çš„ï¼Œæœ‰äº†ä»–ï¼Œç¨‹åºå‘˜å°±ä»è¿™äº›ç¹ççš„å·¥ä½œä¸­è§£è„±äº†å‡ºæ¥ï¼Œåªéœ€è¦è€ƒè™‘è‡ªå·±çš„åº”ç”¨è½¯ä»¶çš„ç¼–å†™å°±å¯ä»¥äº†ï¼Œåº”ç”¨è½¯ä»¶ç›´æ¥ä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„åŠŸèƒ½æ¥é—´æ¥ä½¿ç”¨ç¡¬ä»¶ã€‚</strong></p>
<h2 id="ä¸‰-ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ"><a href="#ä¸‰-ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ" class="headerlink" title="ä¸‰ ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ"></a>ä¸‰ ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿ</h2><p><strong>ç²¾ç®€çš„è¯´çš„è¯ï¼Œæ“ä½œç³»ç»Ÿå°±æ˜¯ä¸€ä¸ªåè°ƒã€ç®¡ç†å’Œæ§åˆ¶è®¡ç®—æœºç¡¬ä»¶èµ„æºå’Œè½¯ä»¶èµ„æºçš„æ§åˆ¶ç¨‹åºã€‚æ“ä½œç³»ç»Ÿæ‰€å¤„çš„ä½ç½®å¦‚å›¾1</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#æ“ä½œç³»ç»Ÿä½äºè®¡ç®—æœºç¡¬ä»¶ä¸åº”ç”¨è½¯ä»¶ä¹‹é—´ï¼Œæœ¬è´¨ä¹Ÿæ˜¯ä¸€ä¸ªè½¯ä»¶ã€‚æ“ä½œç³»ç»Ÿç”±æ“ä½œç³»ç»Ÿçš„å†…æ ¸ï¼ˆè¿è¡Œäºå†…æ ¸æ€ï¼Œç®¡ç†ç¡¬ä»¶èµ„æºï¼‰ä»¥åŠç³»ç»Ÿè°ƒç”¨ï¼ˆè¿è¡Œäºç”¨æˆ·æ€ï¼Œä¸ºåº”ç”¨ç¨‹åºå‘˜å†™çš„åº”ç”¨ç¨‹åºæä¾›ç³»ç»Ÿè°ƒç”¨æ¥å£ï¼‰ä¸¤éƒ¨åˆ†ç»„æˆï¼Œæ‰€ä»¥ï¼Œå•çº¯çš„è¯´æ“ä½œç³»ç»Ÿæ˜¯è¿è¡Œäºå†…æ ¸æ€çš„ï¼Œæ˜¯ä¸å‡†ç¡®çš„ã€‚</span><br></pre></td></tr></table></figure>



<p><img src="https://pic4.zhimg.com/80/v2-6ad1085ae57855ce665ca5b8692b6e67_720w.jpg" alt="img"></p>
<p> å›¾1</p>
<p><strong>ç»†è¯´çš„è¯ï¼Œæ“ä½œç³»ç»Ÿåº”è¯¥åˆ†æˆä¸¤éƒ¨åˆ†åŠŸèƒ½ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¸€ï¼šéšè—äº†ä¸‘é™‹çš„ç¡¬ä»¶è°ƒç”¨æ¥å£ï¼Œä¸ºåº”ç”¨ç¨‹åºå‘˜æä¾›è°ƒç”¨ç¡¬ä»¶èµ„æºçš„æ›´å¥½ï¼Œæ›´ç®€å•ï¼Œæ›´æ¸…æ™°çš„æ¨¡å‹ï¼ˆç³»ç»Ÿè°ƒç”¨æ¥å£ï¼‰ã€‚åº”ç”¨ç¨‹åºå‘˜æœ‰äº†è¿™äº›æ¥å£åï¼Œå°±ä¸ç”¨å†è€ƒè™‘æ“ä½œç¡¬ä»¶çš„ç»†èŠ‚ï¼Œä¸“å¿ƒå¼€å‘è‡ªå·±çš„åº”ç”¨ç¨‹åºå³å¯ã€‚</span></span><br><span class="line">ä¾‹å¦‚ï¼šæ“ä½œç³»ç»Ÿæä¾›äº†æ–‡ä»¶è¿™ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå¯¹æ–‡ä»¶çš„æ“ä½œå°±æ˜¯å¯¹ç£ç›˜çš„æ“ä½œï¼Œæœ‰äº†æ–‡ä»¶æˆ‘ä»¬æ— éœ€å†å»è€ƒè™‘å…³äºç£ç›˜çš„è¯»å†™æ§åˆ¶ï¼ˆæ¯”å¦‚æ§åˆ¶ç£ç›˜è½¬åŠ¨ï¼Œç§»åŠ¨ç£å¤´è¯»å†™æ•°æ®ç­‰ç»†èŠ‚ï¼‰ï¼Œ</span><br><span class="line"></span><br><span class="line"><span class="comment">#äºŒï¼šå°†åº”ç”¨ç¨‹åºå¯¹ç¡¬ä»¶èµ„æºçš„ç«æ€è¯·æ±‚å˜å¾—æœ‰åºåŒ–</span></span><br><span class="line">ä¾‹å¦‚ï¼šå¾ˆå¤šåº”ç”¨è½¯ä»¶å…¶å®æ˜¯å…±äº«ä¸€å¥—è®¡ç®—æœºç¡¬ä»¶ï¼Œæ¯”æ–¹è¯´æœ‰å¯èƒ½æœ‰ä¸‰ä¸ªåº”ç”¨ç¨‹åºåŒæ—¶éœ€è¦ç”³è¯·æ‰“å°æœºæ¥è¾“å‡ºå†…å®¹ï¼Œé‚£ä¹ˆaç¨‹åºç«äº‰åˆ°äº†æ‰“å°æœºèµ„æºå°±æ‰“å°ï¼Œç„¶åå¯èƒ½æ˜¯bç«äº‰åˆ°æ‰“å°æœºèµ„æºï¼Œä¹Ÿå¯èƒ½æ˜¯cï¼Œè¿™å°±å¯¼è‡´äº†æ— åºï¼Œæ‰“å°æœºå¯èƒ½æ‰“å°ä¸€æ®µaçš„å†…å®¹ç„¶ååˆå»æ‰“å°c...,æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯å°†è¿™ç§æ— åºå˜å¾—æœ‰åºã€‚</span><br></pre></td></tr></table></figure>

<p>è¯¦è§£</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ç°ä»£è®¡ç®—æœºæˆ–è€…ç½‘ç»œéƒ½æ˜¯å¤šç”¨æˆ·çš„ï¼Œå¤šä¸ªç”¨æˆ·ä¸ä»…å…±äº«ç¡¬ä»¶ï¼Œè€Œä¸”å…±äº«æ–‡ä»¶ï¼Œæ•°æ®åº“ç­‰ä¿¡æ¯ï¼Œå…±äº«æ„å‘³ç€å†²çªå’Œæ— åºã€‚</span><br><span class="line"></span><br><span class="line">æ“ä½œç³»ç»Ÿä¸»è¦ä½¿ç”¨æ¥</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>è®°å½•å“ªä¸ªç¨‹åºä½¿ç”¨ä»€ä¹ˆèµ„æº</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>å¯¹èµ„æºè¯·æ±‚è¿›è¡Œåˆ†é…</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>ä¸ºä¸åŒçš„ç¨‹åºå’Œç”¨æˆ·è°ƒè§£äº’ç›¸å†²çªçš„èµ„æºè¯·æ±‚ã€‚</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬å¯å°†ä¸Šè¿°æ“ä½œç³»ç»Ÿçš„åŠŸèƒ½æ€»ç»“ä¸ºï¼šå¤„ç†æ¥è‡ªå¤šä¸ªç¨‹åºå‘èµ·çš„å¤šä¸ªï¼ˆå¤šä¸ªå³å¤šè·¯ï¼‰å…±äº«ï¼ˆå…±äº«å³å¤ç”¨ï¼‰èµ„æºçš„è¯·æ±‚ï¼Œç®€ç§°å¤šè·¯å¤ç”¨</span><br><span class="line"></span><br><span class="line">å¤šè·¯å¤ç”¨æœ‰ä¸¤ç§å®ç°æ–¹å¼</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>æ—¶é—´ä¸Šçš„å¤ç”¨</span><br><span class="line"></span><br><span class="line">å½“ä¸€ä¸ªèµ„æºåœ¨æ—¶é—´ä¸Šå¤ç”¨æ—¶ï¼Œä¸åŒçš„ç¨‹åºæˆ–ç”¨æˆ·è½®æµä½¿ç”¨å®ƒï¼Œç¬¬ä¸€ä¸ªç¨‹åºè·å–è¯¥èµ„æºä½¿ç”¨ç»“æŸåï¼Œåœ¨è½®åˆ°ç¬¬äºŒä¸ªã€‚ã€‚ã€‚ç¬¬ä¸‰ä¸ªã€‚ã€‚ã€‚</span><br><span class="line"></span><br><span class="line">ä¾‹å¦‚ï¼šåªæœ‰ä¸€ä¸ªcpuï¼Œå¤šä¸ªç¨‹åºéœ€è¦åœ¨è¯¥cpuä¸Šè¿è¡Œï¼Œæ“ä½œç³»ç»Ÿå…ˆæŠŠcpuåˆ†ç»™ç¬¬ä¸€ä¸ªç¨‹åºï¼Œåœ¨è¿™ä¸ªç¨‹åºè¿è¡Œçš„è¶³å¤Ÿé•¿çš„æ—¶é—´ï¼ˆæ—¶é—´é•¿çŸ­ç”±æ“ä½œç³»ç»Ÿçš„ç®—æ³•è¯´äº†ç®—ï¼‰æˆ–è€…é‡åˆ°äº†I/Oé˜»å¡ï¼Œæ“ä½œç³»ç»Ÿåˆ™æŠŠcpuåˆ†é…ç»™ä¸‹ä¸€ä¸ªç¨‹åºï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªç¨‹åºé‡æ–°è¢«åˆ†é…åˆ°äº†cpuç„¶åå†æ¬¡è¿è¡Œï¼Œç”±äºcpuçš„åˆ‡æ¢é€Ÿåº¦å¾ˆå¿«ï¼Œç»™ç”¨æˆ·çš„æ„Ÿè§‰å°±æ˜¯è¿™äº›ç¨‹åºæ˜¯åŒæ—¶è¿è¡Œçš„ï¼Œæˆ–è€…è¯´æ˜¯å¹¶å‘çš„ï¼Œæˆ–è€…è¯´æ˜¯ä¼ªå¹¶è¡Œçš„ã€‚è‡³äºèµ„æºå¦‚ä½•å®ç°æ—¶é—´å¤ç”¨ï¼Œæˆ–è€…è¯´è°åº”è¯¥æ˜¯ä¸‹ä¸€ä¸ªè¦è¿è¡Œçš„ç¨‹åºï¼Œä»¥åŠä¸€ä¸ªä»»åŠ¡éœ€è¦è¿è¡Œå¤šé•¿æ—¶é—´ï¼Œè¿™äº›éƒ½æ˜¯æ“ä½œç³»ç»Ÿçš„å·¥ä½œã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>ç©ºé—´ä¸Šçš„å¤ç”¨</span><br><span class="line"></span><br><span class="line">æ¯ä¸ªå®¢æˆ·éƒ½è·å–äº†ä¸€ä¸ªå¤§çš„èµ„æºä¸­çš„ä¸€å°éƒ¨åˆ†èµ„æºï¼Œä»è€Œå‡å°‘äº†æ’é˜Ÿç­‰å¾…èµ„æºçš„æ—¶é—´ã€‚</span><br><span class="line"></span><br><span class="line">ä¾‹å¦‚ï¼šå¤šä¸ªè¿è¡Œçš„ç¨‹åºåŒæ—¶è¿›å…¥å†…å­˜ï¼Œç¡¬ä»¶å±‚é¢æä¾›ä¿æŠ¤æœºåˆ¶æ¥ç¡®ä¿å„è‡ªçš„å†…å­˜æ˜¯åˆ†å‰²å¼€çš„ï¼Œä¸”ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶ï¼Œè¿™æ¯”ä¸€ä¸ªç¨‹åºç‹¬å å†…å­˜ä¸€ä¸ªä¸€ä¸ªæ’é˜Ÿè¿›å…¥å†…å­˜æ•ˆç‡è¦é«˜çš„å¤šã€‚</span><br><span class="line"></span><br><span class="line">æœ‰å…³ç©ºé—´å¤ç”¨çš„å…¶ä»–èµ„æºè¿˜æœ‰ç£ç›˜ï¼Œåœ¨è®¸å¤šç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªç£ç›˜åŒæ—¶ä¸ºè®¸å¤šç”¨æˆ·ä¿å­˜æ–‡ä»¶ã€‚åˆ†é…ç£ç›˜ç©ºé—´å¹¶ä¸”è®°å½•è°æ­£åœ¨ä½¿ç”¨å“ªä¸ªç£ç›˜å—æ˜¯æ“ä½œç³»ç»Ÿèµ„æºç®¡ç†çš„å…¸å‹ä»»åŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">è¿™ä¸¤ç§æ–¹å¼åˆèµ·æ¥ä¾¿æ˜¯å¤šé“æŠ€æœ¯</span><br></pre></td></tr></table></figure>



<p><img src="https://pic2.zhimg.com/80/v2-fb67806e24ae5472d9f9cfbb19a01855_720w.jpg" alt="img"></p>
<p> å›¾ 2</p>
<h2 id="å››-æ“ä½œç³»ç»Ÿä¸æ™®é€šè½¯ä»¶çš„åŒºåˆ«"><a href="#å››-æ“ä½œç³»ç»Ÿä¸æ™®é€šè½¯ä»¶çš„åŒºåˆ«" class="headerlink" title="å›› æ“ä½œç³»ç»Ÿä¸æ™®é€šè½¯ä»¶çš„åŒºåˆ«"></a>å›› æ“ä½œç³»ç»Ÿä¸æ™®é€šè½¯ä»¶çš„åŒºåˆ«</h2><p>1.ä¸»è¦åŒºåˆ«æ˜¯ï¼šä½ ä¸æƒ³ç”¨æš´é£å½±éŸ³äº†ä½ å¯ä»¥é€‰æ‹©ç”¨è¿…é›·æ’­æ”¾å™¨æˆ–è€…å¹²è„†è‡ªå·±å†™ä¸€ä¸ªï¼Œä½†æ˜¯ä½ æ— æ³•å†™ä¸€ä¸ªå±äºæ“ä½œç³»ç»Ÿä¸€éƒ¨åˆ†çš„ç¨‹åºï¼ˆæ—¶é’Ÿä¸­æ–­å¤„ç†ç¨‹åºï¼‰ï¼Œæ“ä½œç³»ç»Ÿç”±ç¡¬ä»¶ä¿æŠ¤ï¼Œä¸èƒ½è¢«ç”¨æˆ·ä¿®æ”¹ã€‚</p>
<p>2.æ“ä½œç³»ç»Ÿä¸ç”¨æˆ·ç¨‹åºçš„å·®å¼‚å¹¶ä¸åœ¨äºäºŒè€…æ‰€å¤„çš„åœ°ä½ã€‚ç‰¹åˆ«åœ°ï¼Œæ“ä½œç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤§å‹ã€å¤æ‚ã€é•¿å¯¿çš„è½¯ä»¶ï¼Œ</p>
<ul>
<li>å¤§å‹ï¼šlinuxæˆ–windowsçš„æºä»£ç æœ‰äº”ç™¾ä¸‡è¡Œæ•°é‡çº§ã€‚æŒ‰ç…§æ¯é¡µ50è¡Œå…±1000è¡Œçš„ä¹¦æ¥ç®—ï¼Œäº”ç™¾ä¸‡è¡Œè¦æœ‰100å·ï¼Œè¦ç”¨ä¸€æ•´ä¸ªä¹¦æ¶å­æ¥æ‘†ç½®ï¼Œè¿™è¿˜ä»…ä»…æ˜¯å†…æ ¸éƒ¨åˆ†ã€‚ç”¨æˆ·ç¨‹åºï¼Œå¦‚GUIï¼Œåº“ä»¥åŠåŸºæœ¬åº”ç”¨è½¯ä»¶ï¼ˆå¦‚windows Explorerç­‰ï¼‰ï¼Œå¾ˆå®¹æ˜“å°±èƒ½è¾¾åˆ°è¿™ä¸ªæ•°é‡çš„10å€æˆ–è€…20å€ä¹‹å¤šã€‚</li>
<li>é•¿å¯¿ï¼šæ“ä½œç³»ç»Ÿå¾ˆéš¾ç¼–å†™ï¼Œå¦‚æ­¤å¤§çš„ä»£ç é‡ï¼Œä¸€æ—¦å®Œæˆï¼Œæ“ä½œç³»ç»Ÿæ‰€æœ‰è€…ä¾¿ä¸ä¼šè½»æ˜“æ‰”æ‰ï¼Œå†å†™ä¸€ä¸ªã€‚è€Œæ˜¯åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›ã€‚ï¼ˆåŸºæœ¬ä¸Šå¯ä»¥æŠŠwindows95&#x2F;98&#x2F;Meçœ‹å‡ºä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼Œè€Œwindows NT&#x2F;2000&#x2F;XP&#x2F;Vistaåˆ™æ˜¯ä¸¤ä½ä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼Œå¯¹äºç”¨æˆ·æ¥è¯´å®ƒä»¬ååˆ†ç›¸ä¼¼ã€‚è¿˜æœ‰UNIXä»¥åŠå®ƒçš„å˜ä½“å’Œå…‹éš†ç‰ˆæœ¬ä¹Ÿæ¼”åŒ–äº†å¤šå¹´ï¼Œå¦‚System Vç‰ˆï¼ŒSolarisä»¥åŠFreeBSDç­‰éƒ½æ˜¯Unixçš„åŸå§‹ç‰ˆï¼Œä¸è¿‡å°½ç®¡linuxéå¸¸ä¾ç…§UNIXæ¨¡å¼è€Œä»¿åˆ¶ï¼Œå¹¶ä¸”ä¸UNIXé«˜åº¦å…¼å®¹ï¼Œä½†æ˜¯linuxå…·æœ‰å…¨æ–°çš„ä»£ç åŸºç¡€ï¼‰</li>
</ul>
<h2 id="äº”-æ“ä½œç³»ç»Ÿå‘å±•å²"><a href="#äº”-æ“ä½œç³»ç»Ÿå‘å±•å²" class="headerlink" title="äº” æ“ä½œç³»ç»Ÿå‘å±•å²"></a>äº” æ“ä½œç³»ç»Ÿå‘å±•å²</h2><p><strong>ç¬¬ä¸€ä»£è®¡ç®—æœºï¼ˆ1940~1955ï¼‰ï¼šçœŸç©ºç®¡å’Œç©¿å­”å¡ç‰‡</strong></p>
<p>ç¬¬ä¸€ä»£è®¡ç®—æœºçš„äº§ç”ŸèƒŒæ™¯ï¼š</p>
<p>ç¬¬ä¸€ä»£ä¹‹å‰äººç±»æ˜¯æƒ³ç”¨æœºæ¢°å–ä»£äººåŠ›ï¼Œç¬¬ä¸€ä»£è®¡ç®—æœºçš„äº§ç”Ÿæ˜¯è®¡ç®—æœºç”±æœºæ¢°æ—¶ä»£è¿›å…¥ç”µå­æ—¶ä»£çš„æ ‡å¿—ï¼Œä»Babbageå¤±è´¥ä¹‹åä¸€ç›´åˆ°ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜ï¼Œæ•°å­—è®¡ç®—æœºçš„å»ºé€ å‡ ä¹æ²¡æœ‰ä»€ä¹ˆè¿›å±•ï¼Œç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜åˆºæ¿€äº†æœ‰å…³è®¡ç®—æœºç ”ç©¶çš„çˆ†ç‚¸æ€§è¿›å±•ã€‚</p>
<p>lowaå·ç«‹å¤§å­¦çš„john Atanasoffæ•™æˆå’Œä»–çš„å­¦ç”ŸClifford Berryå»ºé€ äº†æ®è®¤ä¸ºæ˜¯ç¬¬ä¸€å°å¯å·¥ä½œçš„æ•°å­—è®¡ç®—æœºã€‚è¯¥æœºå™¨ä½¿ç”¨300ä¸ªçœŸç©ºç®¡ã€‚å¤§çº¦åœ¨åŒæ—¶ï¼ŒKonrad Zuseåœ¨æŸæ—ç”¨ç»§ç”µå™¨æ„å»ºäº†Z3è®¡ç®—æœºï¼Œè‹±æ ¼å…°å¸ƒè±åˆ‡åˆ©å›­çš„ä¸€ä¸ªå°ç»„åœ¨1944å¹´æ„å»ºäº†Colossusï¼ŒHoward Aikenåœ¨å“ˆä½›å¤§å­¦å»ºé€ äº†Mark 1ï¼Œå®¾å¤•æ³•å°¼äºšå¤§å­¦çš„William Mauchleyå’Œä»–çš„å­¦ç”ŸJ.Presper Eckertå»ºé€ äº†ENIACã€‚è¿™äº›æœºå™¨æœ‰çš„æ˜¯äºŒè¿›åˆ¶çš„ï¼Œæœ‰çš„ä½¿ç”¨çœŸç©ºç®¡ï¼Œæœ‰çš„æ˜¯å¯ç¼–ç¨‹çš„ï¼Œä½†éƒ½éå¸¸åŸå§‹ï¼Œè®¾ç½®éœ€è¦èŠ±è´¹æ•°ç§’é’Ÿæ—¶é—´æ‰èƒ½å®Œæˆæœ€ç®€å•çš„è¿ç®—ã€‚</p>
<p>åœ¨è¿™ä¸ªæ—¶æœŸï¼ŒåŒä¸€ä¸ªå°ç»„é‡Œçš„å·¥ç¨‹å¸ˆä»¬ï¼Œè®¾è®¡ã€å»ºé€ ã€ç¼–ç¨‹ã€æ“ä½œåŠç»´æŠ¤åŒä¸€å°æœºå™¨ï¼Œæ‰€æœ‰çš„ç¨‹åºè®¾è®¡æ˜¯ç”¨çº¯ç²¹çš„æœºå™¨è¯­è¨€ç¼–å†™çš„ï¼Œç”šè‡³æ›´ç³Ÿç³•ï¼Œéœ€è¦é€šè¿‡æˆåƒä¸Šä¸‡æ ¹ç”µç¼†æ¥åˆ°æ’ä»¶æ¿ä¸Šè¿æˆç”µè·¯æ¥æ§åˆ¶æœºå™¨çš„åŸºæœ¬åŠŸèƒ½ã€‚æ²¡æœ‰ç¨‹åºè®¾è®¡è¯­è¨€ï¼ˆæ±‡ç¼–ä¹Ÿæ²¡æœ‰ï¼‰ï¼Œæ“ä½œç³»ç»Ÿåˆ™æ˜¯ä»æ¥éƒ½æ²¡å¬è¯´è¿‡ã€‚ä½¿ç”¨æœºå™¨çš„è¿‡ç¨‹æ›´åŠ åŸå§‹ï¼Œè¯¦è§ä¸‹â€˜å·¥ä½œè¿‡ç¨‹â€™</p>
<p>ç‰¹ç‚¹ï¼š æ²¡æœ‰æ“ä½œç³»ç»Ÿçš„æ¦‚å¿µ æ‰€æœ‰çš„ç¨‹åºè®¾è®¡éƒ½æ˜¯ç›´æ¥æ“æ§ç¡¬ä»¶</p>
<p>å·¥ä½œè¿‡ç¨‹ï¼š ç¨‹åºå‘˜åœ¨å¢™ä¸Šçš„æœºæ—¶è¡¨é¢„çº¦ä¸€æ®µæ—¶é—´ï¼Œç„¶åç¨‹åºå‘˜æ‹¿ç€ä»–çš„æ’ä»¶ç‰ˆåˆ°æœºæˆ¿é‡Œï¼Œå°†è‡ªå·±çš„æ’ä»¶æ¿è¡—é“è®¡ç®—æœºé‡Œï¼Œè¿™å‡ ä¸ªå°æ—¶å†…ä»–ç‹¬äº«æ•´ä¸ªè®¡ç®—æœºèµ„æºï¼Œåé¢çš„ä¸€æ‰¹äººéƒ½å¾—ç­‰ç€(ä¸¤ä¸‡å¤šä¸ªçœŸç©ºç®¡ç»å¸¸ä¼šæœ‰è¢«çƒ§åçš„æƒ…å†µå‡ºç°)ã€‚</p>
<p>åæ¥å‡ºç°äº†ç©¿å­”å¡ç‰‡ï¼Œå¯ä»¥å°†ç¨‹åºå†™åœ¨å¡ç‰‡ä¸Šï¼Œç„¶åè¯»å…¥æœºè€Œä¸ç”¨æ’ä»¶æ¿</p>
<p>ä¼˜ç‚¹ï¼š</p>
<p>ç¨‹åºå‘˜åœ¨ç”³è¯·çš„æ—¶é—´æ®µå†…ç‹¬äº«æ•´ä¸ªèµ„æºï¼Œå¯ä»¥å³æ—¶åœ°è°ƒè¯•è‡ªå·±çš„ç¨‹åºï¼ˆæœ‰bugå¯ä»¥ç«‹åˆ»å¤„ç†ï¼‰</p>
<p>ç¼ºç‚¹ï¼š</p>
<p>æµªè´¹è®¡ç®—æœºèµ„æºï¼Œä¸€ä¸ªæ—¶é—´æ®µå†…åªæœ‰ä¸€ä¸ªäººç”¨ã€‚ æ³¨æ„ï¼šåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªç¨‹åºåœ¨å†…å­˜ä¸­ï¼Œè¢«cpuè°ƒç”¨æ‰§è¡Œï¼Œæ¯”æ–¹è¯´10ä¸ªç¨‹åºçš„æ‰§è¡Œï¼Œæ˜¯ä¸²è¡Œçš„</p>
<p>**ç¬¬äºŒä»£è®¡ç®—æœº*<em>ï¼ˆ1955~1965ï¼‰*<em>ï¼šæ™¶ä½“ç®¡å’Œæ‰¹å¤„ç†ç³»ç»Ÿ</em></em></p>
<p>ç¬¬äºŒä»£è®¡ç®—æœºçš„äº§ç”ŸèƒŒæ™¯ï¼š</p>
<p>ç”±äºå½“æ—¶çš„è®¡ç®—æœºéå¸¸æ˜‚è´µï¼Œè‡ªè®¤å¾ˆè‡ªç„¶çš„æƒ³åŠæ³•è¾ƒå°‘æœºæ—¶çš„æµªè´¹ã€‚é€šå¸¸é‡‡ç”¨çš„æ–¹æ³•å°±æ˜¯æ‰¹å¤„ç†ç³»ç»Ÿã€‚</p>
<p>ç‰¹ç‚¹ï¼š è®¾è®¡äººå‘˜ã€ç”Ÿäº§äººå‘˜ã€æ“ä½œäººå‘˜ã€ç¨‹åºäººå‘˜å’Œç»´æŠ¤äººå‘˜ç›´æ¥æœ‰äº†æ˜ç¡®çš„åˆ†å·¥ï¼Œè®¡ç®—æœºè¢«é”åœ¨ä¸“ç”¨ç©ºè°ƒæˆ¿é—´ä¸­ï¼Œç”±ä¸“ä¸šæ“ä½œäººå‘˜è¿è¡Œï¼Œè¿™ä¾¿æ˜¯â€˜å¤§å‹æœºâ€™ã€‚</p>
<p>æœ‰äº†æ“ä½œç³»ç»Ÿçš„æ¦‚å¿µ</p>
<p>æœ‰äº†ç¨‹åºè®¾è®¡è¯­è¨€ï¼šFORTRANè¯­è¨€æˆ–æ±‡ç¼–è¯­è¨€ï¼Œå†™åˆ°çº¸ä¸Šï¼Œç„¶åç©¿å­”æ‰“æˆå¡ç‰‡ï¼Œå†è®²å¡ç‰‡ç›’å¸¦åˆ°è¾“å…¥å®¤ï¼Œäº¤ç»™æ“ä½œå‘˜ï¼Œç„¶åå–ç€å’–å•¡ç­‰å¾…è¾“å‡ºæ¥å£</p>
<p>å·¥ä½œè¿‡ç¨‹ï¼šæ’å›¾</p>
<p><img src="https://pic3.zhimg.com/80/v2-342367e551bb23a7f1bceedd8a3cdf36_720w.jpg" alt="img"></p>
<p><img src="https://pic1.zhimg.com/80/v2-7e573545a6efac95f8d52717d2c74ffc_720w.jpg" alt="img"></p>
<p>ç¬¬äºŒä»£å¦‚ä½•è§£å†³ç¬¬ä¸€ä»£çš„é—®é¢˜&#x2F;ç¼ºç‚¹ï¼š 1.æŠŠä¸€å †äººçš„è¾“å…¥æ”’æˆä¸€å¤§æ³¢è¾“å…¥ï¼Œ 2.ç„¶åé¡ºåºè®¡ç®—ï¼ˆè¿™æ˜¯æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯ç¬¬äºŒä»£è®¡ç®—ä¹Ÿæ²¡æœ‰è§£å†³ï¼‰ 3.æŠŠä¸€å †äººçš„è¾“å‡ºæ”’æˆä¸€å¤§æ³¢è¾“å‡º</p>
<p>ç°ä»£æ“ä½œç³»ç»Ÿçš„å‰èº«:(è§å›¾ï¼‰</p>
<p>ä¼˜ç‚¹ï¼šæ‰¹å¤„ç†ï¼ŒèŠ‚çœäº†æœºæ—¶</p>
<p>ç¼ºç‚¹ï¼š <em>1.æ•´ä¸ªæµç¨‹éœ€è¦äººå‚ä¸æ§åˆ¶ï¼Œå°†ç£å¸¦æ¬æ¥æ¬å»ï¼ˆä¸­é—´ä¿©å°äººï¼‰</em></p>
<p>2.è®¡ç®—çš„è¿‡ç¨‹ä»ç„¶æ˜¯é¡ºåºè®¡ç®—-ã€‹ä¸²è¡Œ</p>
<p>3.ç¨‹åºå‘˜åŸæ¥ç‹¬äº«ä¸€æ®µæ—¶é—´çš„è®¡ç®—æœºï¼Œç°åœ¨å¿…é¡»è¢«ç»Ÿä¸€è§„åˆ’åˆ°ä¸€æ‰¹ä½œä¸šä¸­ï¼Œç­‰å¾…ç»“æœå’Œé‡æ–°è°ƒè¯•çš„è¿‡ç¨‹éƒ½éœ€è¦ç­‰åŒæ‰¹æ¬¡çš„å…¶ä»–ç¨‹åºéƒ½è¿ä½œå®Œæ‰å¯ä»¥ï¼ˆè¿™æå¤§çš„å½±å“äº†ç¨‹åºçš„å¼€å‘æ•ˆç‡ï¼Œæ— æ³•åŠæ—¶è°ƒè¯•ç¨‹åºï¼‰</p>
<p>**ç¬¬ä¸‰ä»£è®¡ç®—æœº*<em>ï¼ˆ1965~1980ï¼‰*<em>ï¼šé›†æˆç”µè·¯èŠ¯ç‰‡å’Œå¤šé“ç¨‹åºè®¾è®¡</em></em></p>
<p>ç¬¬ä¸‰ä»£è®¡ç®—æœºçš„äº§ç”ŸèƒŒæ™¯ï¼š</p>
<p>20ä¸–çºª60å¹´ä»£åˆæœŸï¼Œå¤§å¤šæ•°è®¡ç®—æœºå‚å•†éƒ½æœ‰ä¸¤æ¡å®Œå…¨ä¸å…¼å®¹çš„ç”Ÿäº§çº¿ã€‚</p>
<p>ä¸€æ¡æ˜¯é¢å‘å­—çš„ï¼šå¤§å‹çš„ç§‘å­¦è®¡ç®—æœºï¼Œå¦‚IBM 7094ï¼Œè§ä¸Šå›¾ï¼Œä¸»è¦ç”¨äºç§‘å­¦è®¡ç®—å’Œå·¥ç¨‹è®¡ç®—</p>
<p>å¦å¤–ä¸€æ¡æ˜¯é¢å‘å­—ç¬¦çš„ï¼šå•†ç”¨è®¡ç®—æœºï¼Œå¦‚IBM 1401ï¼Œè§ä¸Šå›¾ï¼Œä¸»è¦ç”¨äºé“¶è¡Œå’Œä¿é™©å…¬å¸ä»äº‹ç£å¸¦å½’æ¡£å’Œæ‰“å°æœåŠ¡</p>
<p>å¼€å‘å’Œç»´æŠ¤å®Œå…¨ä¸åŒçš„äº§å“æ˜¯æ˜‚è´µçš„ï¼ŒåŒæ—¶ä¸åŒçš„ç”¨æˆ·å¯¹è®¡ç®—æœºçš„ç”¨é€”ä¸åŒã€‚</p>
<p>IBMå…¬å¸è¯•å›¾é€šè¿‡å¼•å…¥system&#x2F;360ç³»åˆ—æ¥åŒæ—¶æ»¡è¶³ç§‘å­¦è®¡ç®—å’Œå•†ä¸šè®¡ç®—ï¼Œ360ç³»åˆ—ä½æ¡£æœºä¸1401ç›¸å½“ï¼Œé«˜æ¡£æœºæ¯”7094åŠŸèƒ½å¼ºå¾ˆå¤šï¼Œä¸åŒçš„æ€§èƒ½å–ä¸åŒçš„ä»·æ ¼</p>
<p>360æ˜¯ç¬¬ä¸€ä¸ªé‡‡ç”¨äº†ï¼ˆå°è§„æ¨¡ï¼‰èŠ¯ç‰‡ï¼ˆé›†æˆç”µè·¯ï¼‰çš„ä¸»æµæœºå‹ï¼Œä¸é‡‡ç”¨æ™¶ä½“ç®¡çš„ç¬¬äºŒä»£è®¡ç®—æœºç›¸æ¯”ï¼Œæ€§ä»·æ¯”æœ‰äº†å¾ˆå¤§çš„æé«˜ã€‚è¿™äº›è®¡ç®—æœºçš„åä»£ä»åœ¨å¤§å‹çš„è®¡ç®—æœºä¸­å¿ƒé‡Œä½¿ç”¨ï¼Œ<strong>æ­¤ä¹ƒç°åœ¨æœåŠ¡å™¨çš„å‰èº«</strong>ï¼Œè¿™äº›æœåŠ¡å™¨æ¯ç§’å¤„ç†ä¸å°äºåƒæ¬¡çš„è¯·æ±‚ã€‚</p>
<p>å¦‚ä½•è§£å†³ç¬¬äºŒä»£è®¡ç®—æœºçš„é—®é¢˜1ï¼š å¡ç‰‡è¢«æ‹¿åˆ°æœºæˆ¿åèƒ½å¤Ÿå¾ˆå¿«çš„å°†ä½œä¸šä»å¡ç‰‡è¯»å…¥ç£ç›˜ï¼Œäºæ˜¯ä»»ä½•æ—¶åˆ»å½“ä¸€ä¸ªä½œä¸šç»“æŸæ—¶ï¼Œæ“ä½œç³»ç»Ÿå°±èƒ½å°†ä¸€ä¸ªä½œä¸šä»ç£å¸¦è¯»å‡ºï¼Œè£…è¿›ç©ºå‡ºæ¥çš„å†…å­˜åŒºåŸŸè¿è¡Œï¼Œè¿™ç§æŠ€æœ¯å«åš åŒæ—¶çš„å¤–éƒ¨è®¾å¤‡è”æœºæ“ä½œï¼šSPOOLINGï¼Œè¯¥æŠ€æœ¯åŒæ—¶ç”¨äºè¾“å‡ºã€‚å½“é‡‡ç”¨äº†è¿™ç§æŠ€æœ¯åï¼Œå°±ä¸åœ¨éœ€è¦IBM1401æœºäº†ï¼Œä¹Ÿä¸å¿…å°†ç£å¸¦æ¬æ¥æ¬å»äº†ï¼ˆä¸­é—´ä¿©å°äººä¸å†éœ€è¦ï¼‰</p>
<p>å¦‚ä½•è§£å†³ç¬¬äºŒä»£è®¡ç®—æœºçš„é—®é¢˜2ï¼š</p>
<p>ç¬¬ä¸‰ä»£è®¡ç®—æœºçš„æ“ä½œç³»ç»Ÿå¹¿æ³›åº”ç”¨äº†ç¬¬äºŒä»£è®¡ç®—æœºçš„æ“ä½œç³»ç»Ÿæ²¡æœ‰çš„å…³é”®æŠ€æœ¯ï¼šå¤šé“æŠ€æœ¯</p>
<p>*<strong>cpuåœ¨æ‰§è¡Œä¸€ä¸ªä»»åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œè‹¥éœ€è¦æ“ä½œç¡¬ç›˜ï¼Œåˆ™å‘é€æ“ä½œç¡¬ç›˜çš„æŒ‡ä»¤ï¼ŒæŒ‡ä»¤ä¸€æ—¦å‘å‡ºï¼Œç¡¬ç›˜ä¸Šçš„æœºæ¢°æ‰‹è‡‚æ»‘åŠ¨è¯»å–æ•°æ®åˆ°å†…å­˜ä¸­ï¼Œè¿™ä¸€æ®µæ—¶é—´ï¼Œcpuéœ€è¦ç­‰å¾…ï¼Œæ—¶é—´å¯èƒ½å¾ˆçŸ­ï¼Œä½†å¯¹äºcpuæ¥è¯´å·²ç»å¾ˆé•¿å¾ˆé•¿ï¼Œé•¿åˆ°å¯ä»¥è®©cpuåšå¾ˆå¤šå…¶ä»–çš„ä»»åŠ¡ï¼Œå¦‚æœæˆ‘ä»¬è®©cpuåœ¨è¿™æ®µæ—¶é—´å†…åˆ‡æ¢åˆ°å»åšå…¶ä»–çš„ä»»åŠ¡ï¼Œè¿™æ ·cpuä¸å°±å……åˆ†åˆ©ç”¨äº†å—ã€‚è¿™æ­£æ˜¯å¤šé“æŠ€æœ¯äº§ç”Ÿçš„æŠ€æœ¯èƒŒæ™¯*</strong></p>
<p><strong>å¤šé“æŠ€æœ¯ï¼š</strong></p>
<p>å¤šé“æŠ€æœ¯ä¸­çš„å¤šé“æŒ‡çš„æ˜¯å¤šä¸ªç¨‹åºï¼Œå¤šé“æŠ€æœ¯çš„å®ç°æ˜¯ä¸ºäº†è§£å†³å¤šä¸ªç¨‹åºç«äº‰æˆ–è€…è¯´å…±äº«åŒä¸€ä¸ªèµ„æºï¼ˆæ¯”å¦‚cpuï¼‰çš„æœ‰åºè°ƒåº¦é—®é¢˜ï¼Œè§£å†³æ–¹å¼å³å¤šè·¯å¤ç”¨ï¼Œå¤šè·¯å¤ç”¨åˆ†ä¸ºæ—¶é—´ä¸Šçš„å¤ç”¨å’Œç©ºé—´ä¸Šçš„å¤ç”¨ã€‚</p>
<p><strong>ç©ºé—´ä¸Šçš„å¤ç”¨</strong>ï¼šå°†å†…å­˜åˆ†ä¸ºå‡ éƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†æ”¾å…¥ä¸€ä¸ªç¨‹åºï¼Œè¿™æ ·ï¼ŒåŒä¸€æ—¶é—´å†…å­˜ä¸­å°±æœ‰äº†å¤šé“ç¨‹åºã€‚</p>
<p><img src="https://pic4.zhimg.com/80/v2-668294576c0e934be21f7aebeb1ed45f_720w.jpg" alt="img"></p>
<p><strong>æ—¶é—´ä¸Šçš„å¤ç”¨</strong>ï¼šå½“ä¸€ä¸ªç¨‹åºåœ¨ç­‰å¾…I&#x2F;Oæ—¶ï¼Œå¦ä¸€ä¸ªç¨‹åºå¯ä»¥ä½¿ç”¨cpuï¼Œå¦‚æœå†…å­˜ä¸­å¯ä»¥åŒæ—¶å­˜æ”¾è¶³å¤Ÿå¤šçš„ä½œä¸šï¼Œåˆ™cpuçš„åˆ©ç”¨ç‡å¯ä»¥æ¥è¿‘100%ï¼Œç±»ä¼¼äºæˆ‘ä»¬å°å­¦æ•°å­¦æ‰€å­¦çš„<strong>ç»Ÿç­¹æ–¹æ³•</strong>ã€‚ï¼ˆæ“ä½œç³»ç»Ÿé‡‡ç”¨äº†å¤šé“æŠ€æœ¯åï¼Œå¯ä»¥æ§åˆ¶è¿›ç¨‹çš„åˆ‡æ¢ï¼Œæˆ–è€…è¯´è¿›ç¨‹ä¹‹é—´å»äº‰æŠ¢cpuçš„æ‰§è¡Œæƒé™ã€‚è¿™ç§åˆ‡æ¢ä¸ä»…ä¼šåœ¨ä¸€ä¸ªè¿›ç¨‹é‡åˆ°ioæ—¶è¿›è¡Œï¼Œä¸€ä¸ªè¿›ç¨‹å ç”¨cpuæ—¶é—´è¿‡é•¿ä¹Ÿä¼šåˆ‡æ¢ï¼Œæˆ–è€…è¯´è¢«æ“ä½œç³»ç»Ÿå¤ºèµ°cpuçš„æ‰§è¡Œæƒé™ï¼‰</p>
<p><img src="https://pic3.zhimg.com/80/v2-1c53668bcee393edac0d7b3b3daff1ae_720w.jpg" alt="img"></p>
<p>è¯¦è§£</p>
<p>ç©ºé—´ä¸Šçš„å¤ç”¨æœ€å¤§çš„é—®é¢˜æ˜¯ï¼šç¨‹åºä¹‹é—´çš„å†…å­˜å¿…é¡»åˆ†å‰²ï¼Œè¿™ç§åˆ†å‰²éœ€è¦åœ¨ç¡¬ä»¶å±‚é¢å®ç°ï¼Œç”±æ“ä½œç³»ç»Ÿæ§åˆ¶ã€‚å¦‚æœå†…å­˜å½¼æ­¤ä¸åˆ†å‰²ï¼Œåˆ™ä¸€ä¸ªç¨‹åºå¯ä»¥è®¿é—®å¦å¤–ä¸€ä¸ªç¨‹åºçš„å†…å­˜ï¼Œ</p>
<p>é¦–å…ˆä¸§å¤±çš„æ˜¯å®‰å…¨æ€§ï¼Œæ¯”å¦‚ä½ çš„qqç¨‹åºå¯ä»¥è®¿é—®æ“ä½œç³»ç»Ÿçš„å†…å­˜ï¼Œè¿™æ„å‘³ç€ä½ çš„qqå¯ä»¥æ‹¿åˆ°æ“ä½œç³»ç»Ÿçš„æ‰€æœ‰æƒé™ã€‚</p>
<p>å…¶æ¬¡ä¸§å¤±çš„æ˜¯ç¨³å®šæ€§ï¼ŒæŸä¸ªç¨‹åºå´©æºƒæ—¶æœ‰å¯èƒ½æŠŠåˆ«çš„ç¨‹åºçš„å†…å­˜ä¹Ÿç»™å›æ”¶äº†ï¼Œæ¯”æ–¹è¯´æŠŠæ“ä½œç³»ç»Ÿçš„å†…å­˜ç»™å›æ”¶äº†ï¼Œåˆ™æ“ä½œç³»ç»Ÿå´©æºƒã€‚</p>
<p>ç¬¬ä¸‰ä»£è®¡ç®—æœºçš„æ“ä½œç³»ç»Ÿä»ç„¶æ˜¯æ‰¹å¤„ç†</p>
<p>è®¸å¤šç¨‹åºå‘˜æ€€å¿µç¬¬ä¸€ä»£ç‹¬äº«çš„è®¡ç®—æœºï¼Œå¯ä»¥å³æ—¶è°ƒè¯•è‡ªå·±çš„ç¨‹åºã€‚ä¸ºäº†æ»¡è¶³ç¨‹åºå‘˜ä»¬å¾ˆå¿«å¯ä»¥å¾—åˆ°å“åº”ï¼Œå‡ºç°äº†åˆ†æ—¶æ“ä½œç³»ç»Ÿ</p>
<p>å¦‚ä½•è§£å†³ç¬¬äºŒä»£è®¡ç®—æœºçš„é—®é¢˜3ï¼š</p>
<p>åˆ†æ—¶æ“ä½œç³»ç»Ÿï¼š å¤šä¸ªè”æœºç»ˆç«¯+å¤šé“æŠ€æœ¯</p>
<p>20ä¸ªå®¢æˆ·ç«¯åŒæ—¶åŠ è½½åˆ°å†…å­˜ï¼Œæœ‰17åœ¨æ€è€ƒï¼Œ3ä¸ªåœ¨è¿è¡Œï¼Œcpuå°±é‡‡ç”¨å¤šé“çš„æ–¹å¼å¤„ç†å†…å­˜ä¸­çš„è¿™3ä¸ªç¨‹åºï¼Œç”±äºå®¢æˆ·æäº¤çš„ä¸€èˆ¬éƒ½æ˜¯ç®€çŸ­çš„æŒ‡ä»¤è€Œä¸”å¾ˆå°‘æœ‰è€—æ—¶é•¿çš„ï¼Œç´¢å¼•è®¡ç®—æœºèƒ½å¤Ÿä¸ºè®¸å¤šç”¨æˆ·æä¾›å¿«é€Ÿçš„äº¤äº’å¼æœåŠ¡ï¼Œæ‰€æœ‰çš„ç”¨æˆ·éƒ½ä»¥ä¸ºè‡ªå·±ç‹¬äº«äº†è®¡ç®—æœºèµ„æº</p>
<p>CTTSï¼šéº»çœç†å·¥ï¼ˆMITï¼‰åœ¨ä¸€å°æ”¹è£…è¿‡çš„7094æœºä¸Šå¼€å‘æˆåŠŸçš„ï¼ŒCTSSå…¼å®¹åˆ†æ—¶ç³»ç»Ÿï¼Œ<strong>ç¬¬ä¸‰ä»£è®¡ç®—æœºå¹¿æ³›é‡‡ç”¨äº†å¿…é¡»çš„ä¿æŠ¤ç¡¬ä»¶ï¼ˆç¨‹åºä¹‹é—´çš„å†…å­˜å½¼æ­¤éš”ç¦»ï¼‰ä¹‹åï¼Œåˆ†æ—¶ç³»ç»Ÿæ‰å¼€å§‹æµè¡Œ</strong></p>
<p>MITï¼Œè´å°”å®éªŒå®¤å’Œé€šç”¨ç”µæ°”åœ¨CTTSæˆåŠŸç ”åˆ¶åå†³å®šå¼€å‘èƒ½å¤ŸåŒæ—¶æ”¯æŒä¸Šç™¾ç»ˆç«¯çš„MULTICSï¼ˆå…¶è®¾è®¡è€…ç€çœ¼äºå»ºé€ æ»¡è¶³æ³¢å£«é¡¿åœ°åŒºæ‰€æœ‰ç”¨æˆ·è®¡ç®—éœ€æ±‚çš„ä¸€å°æœºå™¨ï¼‰ï¼Œå¾ˆæ˜æ˜¾çœŸæ˜¯è¦ä¸Šå¤©å•Šï¼Œæœ€åæ‘”æ­»äº†ã€‚</p>
<p>åæ¥ä¸€ä½å‚åŠ è¿‡MULTICSç ”åˆ¶çš„è´å°”å®éªŒå®¤è®¡ç®—æœºç§‘å­¦å®¶Ken Thompsonå¼€å‘äº†ä¸€ä¸ªç®€æ˜“çš„ï¼Œå•ç”¨æˆ·ç‰ˆæœ¬çš„MULTICSï¼Œ<strong>è¿™å°±æ˜¯åæ¥çš„UNIXç³»ç»Ÿ</strong>ã€‚åŸºäºå®ƒè¡ç”Ÿäº†å¾ˆå¤šå…¶ä»–çš„Unixç‰ˆæœ¬ï¼Œä¸ºäº†ä½¿ç¨‹åºèƒ½åœ¨ä»»ä½•ç‰ˆæœ¬çš„unixä¸Šè¿è¡Œï¼ŒIEEEæå‡ºäº†ä¸€ä¸ªunixæ ‡å‡†ï¼Œå³<strong>posixï¼ˆå¯ç§»æ¤çš„æ“ä½œç³»ç»Ÿæ¥å£Portable Operating System Interfaceï¼‰</strong></p>
<p>åæ¥ï¼Œåœ¨1987å¹´ï¼Œå‡ºç°äº†ä¸€ä¸ªUNIXçš„å°å‹å…‹éš†ï¼Œå³minixï¼Œç”¨äºæ•™å­¦ä½¿ç”¨ã€‚èŠ¬å…°å­¦ç”ŸLinus TorvaldsåŸºäºå®ƒç¼–å†™äº†Linux</p>
<p><strong>ç¬¬å››ä»£è®¡ç®—æœº*<em>ï¼ˆ1980~è‡³ä»Šï¼‰ï¼šä¸ªäººè®¡ç®—æœº*</em></strong></p>
<p>PSï¼šå³ä½¿å¯ä»¥åˆ©ç”¨çš„cpuåªæœ‰ä¸€ä¸ªï¼ˆæ—©æœŸçš„è®¡ç®—æœºç¡®å®å¦‚æ­¤ï¼‰ï¼Œä¹Ÿèƒ½ä¿è¯æ”¯æŒï¼ˆä¼ªï¼‰å¹¶å‘çš„èƒ½åŠ›ã€‚å°†ä¸€ä¸ªå•ç‹¬çš„cpuå˜æˆå¤šä¸ªè™šæ‹Ÿçš„cpuï¼ˆå¤šé“æŠ€æœ¯ï¼šæ—¶é—´å¤šè·¯å¤ç”¨å’Œç©ºé—´å¤šè·¯å¤ç”¨+ç¡¬ä»¶ä¸Šæ”¯æŒéš”ç¦»ï¼‰ï¼Œæ²¡æœ‰è¿›ç¨‹çš„æŠ½è±¡ï¼Œç°ä»£è®¡ç®—æœºå°†ä¸å¤å­˜åœ¨ã€‚</p>
<h2 id="å…­-æ€»ç»“"><a href="#å…­-æ€»ç»“" class="headerlink" title="å…­ æ€»ç»“"></a>å…­ æ€»ç»“</h2><p><strong>å¿…å¤‡çš„ç†è®ºåŸºç¡€ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¸€ æ“ä½œç³»ç»Ÿçš„ä½œç”¨ï¼š</span></span><br><span class="line">    <span class="number">1</span>ï¼šéšè—ä¸‘é™‹å¤æ‚çš„ç¡¬ä»¶æ¥å£ï¼Œæä¾›è‰¯å¥½çš„æŠ½è±¡æ¥å£</span><br><span class="line">    <span class="number">2</span>ï¼šç®¡ç†ã€è°ƒåº¦è¿›ç¨‹ï¼Œå¹¶ä¸”å°†å¤šä¸ªè¿›ç¨‹å¯¹ç¡¬ä»¶çš„ç«äº‰å˜å¾—æœ‰åº</span><br><span class="line"></span><br><span class="line"><span class="comment">#äºŒ å¤šé“æŠ€æœ¯ï¼š</span></span><br><span class="line">    <span class="number">1.</span>äº§ç”ŸèƒŒæ™¯ï¼šé’ˆå¯¹å•æ ¸ï¼Œå®ç°å¹¶å‘</span><br><span class="line">    psï¼š</span><br><span class="line">    ç°åœ¨çš„ä¸»æœºä¸€èˆ¬æ˜¯å¤šæ ¸ï¼Œé‚£ä¹ˆæ¯ä¸ªæ ¸éƒ½ä¼šåˆ©ç”¨å¤šé“æŠ€æœ¯</span><br><span class="line">    æœ‰<span class="number">4</span>ä¸ªcpuï¼Œè¿è¡Œäºcpu1çš„æŸä¸ªç¨‹åºé‡åˆ°ioé˜»å¡ï¼Œä¼šç­‰åˆ°ioç»“æŸå†é‡æ–°è°ƒåº¦ï¼Œä¼šè¢«è°ƒåº¦åˆ°<span class="number">4</span>ä¸ª</span><br><span class="line">    cpuä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œå…·ä½“ç”±æ“ä½œç³»ç»Ÿè°ƒåº¦ç®—æ³•å†³å®šã€‚</span><br><span class="line"></span><br><span class="line">    <span class="number">2.</span>ç©ºé—´ä¸Šçš„å¤ç”¨ï¼šå¦‚å†…å­˜ä¸­åŒæ—¶æœ‰å¤šé“ç¨‹åº</span><br><span class="line">    <span class="number">3.</span>æ—¶é—´ä¸Šçš„å¤ç”¨ï¼šå¤ç”¨ä¸€ä¸ªcpuçš„æ—¶é—´ç‰‡</span><br><span class="line">       å¼ºè°ƒï¼šé‡åˆ°ioåˆ‡ï¼Œå ç”¨cpuæ—¶é—´è¿‡é•¿ä¹Ÿåˆ‡ï¼Œæ ¸å¿ƒåœ¨äºåˆ‡ä¹‹å‰å°†è¿›ç¨‹çš„çŠ¶æ€ä¿å­˜ä¸‹æ¥ï¼Œè¿™æ ·</span><br><span class="line">            æ‰èƒ½ä¿è¯ä¸‹æ¬¡åˆ‡æ¢å›æ¥æ—¶ï¼Œèƒ½åŸºäºä¸Šæ¬¡åˆ‡èµ°çš„ä½ç½®ç»§ç»­è¿è¡Œ</span><br></pre></td></tr></table></figure>

<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=129">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=129<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>33-å¹¶å‘ç¼–ç¨‹ï¼ˆäºŒï¼‰</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/33_python%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%A4%9A%E8%BF%9B%E7%A8%8B%EF%BC%88%E7%90%86%E8%AE%BA%E7%AF%87%EF%BC%89/</url>
    <content><![CDATA[<h3 id="ä¸€-ä»€ä¹ˆæ˜¯è¿›ç¨‹"><a href="#ä¸€-ä»€ä¹ˆæ˜¯è¿›ç¨‹" class="headerlink" title="ä¸€ ä»€ä¹ˆæ˜¯è¿›ç¨‹"></a>ä¸€ ä»€ä¹ˆæ˜¯è¿›ç¨‹</h3><p>è¿›ç¨‹ï¼šæ­£åœ¨è¿›è¡Œçš„ä¸€ä¸ªè¿‡ç¨‹æˆ–è€…è¯´ä¸€ä¸ªä»»åŠ¡ã€‚è€Œè´Ÿè´£æ‰§è¡Œä»»åŠ¡åˆ™æ˜¯cpuã€‚</p>
<p>ä¸¾ä¾‹ï¼ˆå•æ ¸+å¤šé“ï¼Œå®ç°å¤šä¸ªè¿›ç¨‹çš„å¹¶å‘æ‰§è¡Œï¼‰ï¼š</p>
<p>egonåœ¨ä¸€ä¸ªæ—¶é—´æ®µå†…æœ‰å¾ˆå¤šä»»åŠ¡è¦åšï¼špythonå¤‡è¯¾çš„ä»»åŠ¡ï¼Œå†™ä¹¦çš„ä»»åŠ¡ï¼Œäº¤å¥³æœ‹å‹çš„ä»»åŠ¡ï¼Œç‹è€…è£è€€ä¸Šåˆ†çš„ä»»åŠ¡ï¼Œã€€ã€€</p>
<p>ä½†egonåŒä¸€æ—¶åˆ»åªèƒ½åšä¸€ä¸ªä»»åŠ¡ï¼ˆcpuåŒä¸€æ—¶é—´åªèƒ½å¹²ä¸€ä¸ªæ´»ï¼‰ï¼Œå¦‚ä½•æ‰èƒ½ç©å‡ºå¤šä¸ªä»»åŠ¡å¹¶å‘æ‰§è¡Œçš„æ•ˆæœï¼Ÿ</p>
<p>egonå¤‡ä¸€ä¼šè¯¾ï¼Œå†å»è·Ÿææ°çš„å¥³æœ‹å‹èŠèŠå¤©ï¼Œå†å»æ‰“ä¸€ä¼šç‹è€…è£è€€â€¦.è¿™å°±ä¿è¯äº†æ¯ä¸ªä»»åŠ¡éƒ½åœ¨è¿›è¡Œä¸­.</p>
<h3 id="äºŒ-è¿›ç¨‹ä¸ç¨‹åºçš„åŒºåˆ«"><a href="#äºŒ-è¿›ç¨‹ä¸ç¨‹åºçš„åŒºåˆ«" class="headerlink" title="äºŒ è¿›ç¨‹ä¸ç¨‹åºçš„åŒºåˆ«"></a>äºŒ è¿›ç¨‹ä¸ç¨‹åºçš„åŒºåˆ«</h3><p>ç¨‹åºä»…ä»…åªæ˜¯ä¸€å †ä»£ç è€Œå·²ï¼Œè€Œè¿›ç¨‹æŒ‡çš„æ˜¯ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ã€‚</p>
<p>ä¸¾ä¾‹ï¼š</p>
<p>æƒ³è±¡ä¸€ä½æœ‰ä¸€æ‰‹å¥½å¨è‰ºçš„è®¡ç®—æœºç§‘å­¦å®¶egonæ­£åœ¨ä¸ºä»–çš„å¥³å„¿å…ƒæ˜Šçƒ˜åˆ¶ç”Ÿæ—¥è›‹ç³•ã€‚</p>
<p>ä»–æœ‰åšç”Ÿæ—¥è›‹ç³•çš„é£Ÿè°±ï¼Œ</p>
<p>å¨æˆ¿é‡Œæœ‰æ‰€éœ€çš„åŸæ–™:é¢ç²‰ã€é¸¡è›‹ã€éŸ­èœï¼Œè’œæ³¥ç­‰ã€‚</p>
<p>åœ¨è¿™ä¸ªæ¯”å–»ä¸­ï¼š</p>
<p><strong>åšè›‹ç³•çš„é£Ÿè°±å°±æ˜¯ç¨‹åº</strong>(å³ç”¨é€‚å½“å½¢å¼æè¿°çš„ç®—æ³•)</p>
<p><strong>è®¡ç®—æœºç§‘å­¦å®¶å°±æ˜¯å¤„ç†å™¨(cpu)</strong></p>
<p><strong>è€Œåšè›‹ç³•çš„å„ç§åŸæ–™å°±æ˜¯è¾“å…¥æ•°æ®</strong>ã€‚</p>
<p><strong>è¿›ç¨‹å°±æ˜¯å¨å¸ˆé˜…è¯»é£Ÿè°±ã€å–æ¥å„ç§åŸæ–™ä»¥åŠçƒ˜åˆ¶è›‹ç³•ç­‰ä¸€ç³»åˆ—åŠ¨ä½œçš„æ€»å’Œ</strong>ã€‚</p>
<p>ç°åœ¨å‡è®¾è®¡ç®—æœºç§‘å­¦å®¶egonçš„å„¿å­alexå“­ç€è·‘äº†è¿›æ¥ï¼Œè¯´ï¼š<a href="https://link.zhihu.com/?target=http://fanyi.baidu.com/translate?aldtype=16047&query=%E5%98%BF%EF%BC%8C%E7%88%B8%E7%88%B8%EF%BC%8C%E6%88%91%E7%9A%84%E5%A4%B4%E8%A2%AB%E8%9C%9C%E8%9C%82%E8%9B%B0%E4%BA%86&keyfrom=baidu&smartresult=dict&lang=auto2zh%23zh/en/%E5%98%BF%EF%BC%8C%E7%88%B8%E7%88%B8%EF%BC%8C%E6%88%91%E7%9A%84%E5%A4%B4%E8%A2%AB%E8%9C%9C%E8%9C%82%E8%9B%B0%E4%BA%86">XXXXXXXXXXXXXX</a>ã€‚</p>
<p>ç§‘å­¦å®¶egonæƒ³äº†æƒ³ï¼Œå¤„ç†å„¿å­alexè›°ä¼¤çš„ä»»åŠ¡æ¯”ç»™å¥³å„¿å…ƒæ˜Šåšè›‹ç³•çš„ä»»åŠ¡æ›´é‡è¦ï¼Œäºæ˜¯</p>
<p>è®¡ç®—æœºç§‘å­¦å®¶å°±è®°å½•ä¸‹ä»–ç…§ç€é£Ÿè°±åšåˆ°å“ªå„¿äº†(ä¿å­˜è¿›ç¨‹çš„å½“å‰çŠ¶æ€)ï¼Œç„¶åæ‹¿å‡ºä¸€æœ¬æ€¥æ•‘æ‰‹å†Œï¼ŒæŒ‰ç…§å…¶ä¸­çš„æŒ‡ç¤ºå¤„ç†è›°ä¼¤ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°å¤„ç†æœºä»ä¸€ä¸ªè¿›ç¨‹(åšè›‹ç³•)åˆ‡æ¢åˆ°å¦ä¸€ä¸ªé«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹(å®æ–½åŒ»ç–—æ•‘æ²»)ï¼Œæ¯ä¸ªè¿›ç¨‹æ‹¥æœ‰å„è‡ªçš„ç¨‹åº(é£Ÿè°±å’Œæ€¥æ•‘æ‰‹å†Œ)ã€‚å½“èœœèœ‚è›°ä¼¤å¤„ç†å®Œä¹‹åï¼Œè¿™ä½è®¡ç®—æœºç§‘å­¦å®¶åˆå›æ¥åšè›‹ç³•ï¼Œä»ä»– ç¦»å¼€æ—¶çš„é‚£ä¸€æ­¥ç»§ç»­åšä¸‹å»ã€‚</p>
<p><strong>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼šåŒä¸€ä¸ªç¨‹åºæ‰§è¡Œä¸¤æ¬¡ï¼Œé‚£ä¹Ÿæ˜¯ä¸¤ä¸ªè¿›ç¨‹ï¼Œæ¯”å¦‚æ‰“å¼€æš´é£å½±éŸ³ï¼Œè™½ç„¶éƒ½æ˜¯åŒä¸€ä¸ªè½¯ä»¶ï¼Œä½†æ˜¯ä¸€ä¸ªå¯ä»¥æ’­æ”¾è‹äº•ç©ºï¼Œä¸€ä¸ªå¯ä»¥æ’­æ”¾é¥­å²›çˆ±ã€‚</strong></p>
<h3 id="ä¸‰-å¹¶å‘ä¸å¹¶è¡Œ"><a href="#ä¸‰-å¹¶å‘ä¸å¹¶è¡Œ" class="headerlink" title="ä¸‰ å¹¶å‘ä¸å¹¶è¡Œ"></a>ä¸‰ å¹¶å‘ä¸å¹¶è¡Œ</h3><p>æ— è®ºæ˜¯å¹¶è¡Œè¿˜æ˜¯å¹¶å‘ï¼Œåœ¨ç”¨æˆ·çœ‹æ¥éƒ½æ˜¯â€™åŒæ—¶â€™è¿è¡Œçš„ï¼Œä¸ç®¡æ˜¯è¿›ç¨‹è¿˜æ˜¯çº¿ç¨‹ï¼Œéƒ½åªæ˜¯ä¸€ä¸ªä»»åŠ¡è€Œå·²ï¼ŒçœŸæ˜¯å¹²æ´»çš„æ˜¯cpuï¼Œcpuæ¥åšè¿™äº›ä»»åŠ¡ï¼Œè€Œä¸€ä¸ªcpuåŒä¸€æ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡</p>
<p>ä¸€ å¹¶å‘ï¼šæ˜¯ä¼ªå¹¶è¡Œï¼Œå³çœ‹èµ·æ¥æ˜¯åŒæ—¶è¿è¡Œã€‚å•ä¸ªcpu+å¤šé“æŠ€æœ¯å°±å¯ä»¥å®ç°å¹¶å‘ï¼Œï¼ˆå¹¶è¡Œä¹Ÿå±äºå¹¶å‘ï¼‰</p>
<p>å•cpuï¼Œå¤šè¿›ç¨‹ï¼Œå¹¶å‘ä¸¾ä¾‹ä¸€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ä½ æ˜¯ä¸€ä¸ªcpuï¼Œä½ åŒæ—¶è°ˆäº†ä¸‰ä¸ªå¥³æœ‹å‹ï¼Œæ¯ä¸€ä¸ªéƒ½å¯ä»¥æ˜¯ä¸€ä¸ªæ‹çˆ±ä»»åŠ¡ï¼Œä½ è¢«è¿™ä¸‰ä¸ªä»»åŠ¡å…±äº«</span><br><span class="line">è¦ç©å‡ºå¹¶å‘æ‹çˆ±çš„æ•ˆæœï¼Œ</span><br><span class="line">åº”è¯¥æ˜¯ä½ å…ˆè·Ÿå¥³å‹<span class="number">1</span>å»çœ‹ç”µå½±ï¼Œçœ‹äº†ä¸€ä¼šè¯´ï¼šä¸å¥½ï¼Œæˆ‘è¦æ‹‰è‚šå­ï¼Œç„¶åè·‘å»è·Ÿç¬¬äºŒä¸ªå¥³å‹åƒé¥­ï¼Œåƒäº†ä¸€ä¼šè¯´ï¼šé‚£å•¥ï¼Œæˆ‘</span><br><span class="line">å»è¶Ÿæ´—æ‰‹é—´ï¼Œç„¶åè·‘å»è·Ÿå¥³å‹<span class="number">3</span>å¼€äº†ä¸ªæˆ¿</span><br></pre></td></tr></table></figure>

<p>å•cpuï¼Œå¤šè¿›ç¨‹ï¼Œå¹¶å‘ä¸¾ä¾‹äºŒ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">æŸå¤©ä¸‹åˆï¼Œegonï¼Œyuanhaoï¼Œwupeiqiï¼Œalexçº¦å¥½äº†ä¸€èµ·å»å«–å¨¼ï¼Œä½†å¨¼åªæœ‰ä¸€ä¸ªï¼Œcpuåªæœ‰ä¸€ä¸ªï¼Œä½†æ˜¯å´è¦â€˜åŒæ—¶â€™å¹²</span><br><span class="line">å››ä¸ªä»»åŠ¡(å«–å‡ºå¹¶å‘çš„æ•ˆæœ)ï¼Œé‚£å°±å¿…é¡»æ˜¯å¹²ä¸€ä¼šegonï¼Œå†å¹²ä¸€ä¼šyuanhaoï¼Œå†å¹²ä¸€ä¼šwupeiqiï¼Œå†å¹²ä¸€ä¼šalex</span><br><span class="line">egonï¼šèŠ±äº†<span class="number">200</span>å—é’±ï¼Œå› ä¸ºäººç¾æ´»å¥½</span><br><span class="line">yuanhaoï¼š<span class="number">500</span>å—é’±</span><br><span class="line">wupeiqiï¼š<span class="number">100</span>å—é’±ï¼Œå¯èƒ½æ˜¯ä¸å¤ªè¡Œ</span><br><span class="line">alexï¼šæ²¡è¦é’±ï¼Œä¸ºå•¥ï¼Ÿï¼Ÿï¼Ÿå› ä¸ºå¤§å®¶åˆšåˆšå«–çš„æ˜¯ä»–å¥³æœ‹å‹</span><br></pre></td></tr></table></figure>

<p>äºŒ å¹¶è¡Œï¼šåŒæ—¶è¿è¡Œï¼Œåªæœ‰å…·å¤‡å¤šä¸ªcpuæ‰èƒ½å®ç°å¹¶è¡Œ</p>
<p> å•æ ¸ä¸‹ï¼Œå¯ä»¥åˆ©ç”¨å¤šé“æŠ€æœ¯ï¼Œå¤šä¸ªæ ¸ï¼Œæ¯ä¸ªæ ¸ä¹Ÿéƒ½å¯ä»¥åˆ©ç”¨å¤šé“æŠ€æœ¯ï¼ˆ<strong>å¤šé“æŠ€æœ¯æ˜¯é’ˆå¯¹å•æ ¸è€Œè¨€çš„</strong>ï¼‰</p>
<p> æœ‰å››ä¸ªæ ¸ï¼Œå…­ä¸ªä»»åŠ¡ï¼Œè¿™æ ·åŒä¸€æ—¶é—´æœ‰å››ä¸ªä»»åŠ¡è¢«æ‰§è¡Œï¼Œå‡è®¾åˆ†åˆ«è¢«åˆ†é…ç»™äº†cpu1ï¼Œcpu2ï¼Œcpu3ï¼Œcpu4ï¼Œ</p>
<p> ä¸€æ—¦ä»»åŠ¡1é‡åˆ°I&#x2F;Oå°±è¢«è¿«ä¸­æ–­æ‰§è¡Œï¼Œæ­¤æ—¶ä»»åŠ¡5å°±æ‹¿åˆ°cpu1çš„æ—¶é—´ç‰‡å»æ‰§è¡Œï¼Œè¿™å°±æ˜¯å•æ ¸ä¸‹çš„å¤šé“æŠ€æœ¯</p>
<p> è€Œä¸€æ—¦ä»»åŠ¡1çš„I&#x2F;Oç»“æŸäº†ï¼Œæ“ä½œç³»ç»Ÿä¼šé‡æ–°è°ƒç”¨å®ƒ(<strong>éœ€çŸ¥è¿›ç¨‹çš„è°ƒåº¦ã€åˆ†é…ç»™å“ªä¸ªcpuè¿è¡Œï¼Œç”±æ“ä½œç³»ç»Ÿè¯´äº†ç®—</strong>)ï¼Œå¯èƒ½è¢«åˆ†é…ç»™å››ä¸ªcpuä¸­çš„ä»»æ„ä¸€ä¸ªå»æ‰§è¡Œ</p>
<p><img src="https://pic2.zhimg.com/80/v2-7137159d323204d49821595cb18e4729_720w.jpg" alt="img"></p>
<p>æ‰€æœ‰ç°ä»£è®¡ç®—æœºç»å¸¸ä¼šåœ¨åŒä¸€æ—¶é—´åšå¾ˆå¤šä»¶äº‹ï¼Œä¸€ä¸ªç”¨æˆ·çš„PCï¼ˆæ— è®ºæ˜¯å•cpuè¿˜æ˜¯å¤šcpuï¼‰ï¼Œéƒ½å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡ï¼ˆä¸€ä¸ªä»»åŠ¡å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè¿›ç¨‹ï¼‰ã€‚</p>
<p>å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹æ¥æ€æ¯’ï¼ˆ360è½¯ä»¶ï¼‰</p>
<p>å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹æ¥çœ‹ç”µå½±ï¼ˆæš´é£å½±éŸ³ï¼‰</p>
<p>å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹æ¥èŠå¤©ï¼ˆè…¾è®¯QQï¼‰</p>
<p>æ‰€æœ‰çš„è¿™äº›è¿›ç¨‹éƒ½éœ€è¢«ç®¡ç†ï¼Œäºæ˜¯ä¸€ä¸ªæ”¯æŒå¤šè¿›ç¨‹çš„å¤šé“ç¨‹åºç³»ç»Ÿæ˜¯è‡³å…³é‡è¦çš„</p>
<p>å¤šé“æŠ€æœ¯æ¦‚å¿µå›é¡¾ï¼šå†…å­˜ä¸­åŒæ—¶å­˜å…¥å¤šé“ï¼ˆå¤šä¸ªï¼‰ç¨‹åºï¼Œcpuä»ä¸€ä¸ªè¿›ç¨‹å¿«é€Ÿåˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ªï¼Œä½¿æ¯ä¸ªè¿›ç¨‹å„è‡ªè¿è¡Œå‡ åæˆ–å‡ ç™¾æ¯«ç§’ï¼Œè¿™æ ·ï¼Œè™½ç„¶åœ¨æŸä¸€ä¸ªç¬é—´ï¼Œä¸€ä¸ªcpuåªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œä½†åœ¨1ç§’å†…ï¼Œcpuå´å¯ä»¥è¿è¡Œå¤šä¸ªè¿›ç¨‹ï¼Œè¿™å°±ç»™äººäº§ç”Ÿäº†å¹¶è¡Œçš„é”™è§‰ï¼Œå³ä¼ªå¹¶å‘ï¼Œä»¥æ­¤æ¥åŒºåˆ†å¤šå¤„ç†å™¨æ“ä½œç³»ç»Ÿçš„çœŸæ­£ç¡¬ä»¶å¹¶è¡Œï¼ˆå¤šä¸ªcpuå…±äº«åŒä¸€ä¸ªç‰©ç†å†…å­˜ï¼‰</p>
<h3 id="å››-åŒæ­¥-å¼‚æ­¥andé˜»å¡-éé˜»å¡ï¼ˆé‡ç‚¹ï¼‰"><a href="#å››-åŒæ­¥-å¼‚æ­¥andé˜»å¡-éé˜»å¡ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="å›› åŒæ­¥\å¼‚æ­¥andé˜»å¡\éé˜»å¡ï¼ˆé‡ç‚¹ï¼‰"></a>å›› åŒæ­¥\å¼‚æ­¥andé˜»å¡\éé˜»å¡ï¼ˆé‡ç‚¹ï¼‰</h3><p><strong>åŒæ­¥ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ‰€è°“åŒæ­¥ï¼Œå°±æ˜¯åœ¨å‘å‡ºä¸€ä¸ªåŠŸèƒ½è°ƒç”¨æ—¶ï¼Œåœ¨æ²¡æœ‰å¾—åˆ°ç»“æœä¹‹å‰ï¼Œè¯¥è°ƒç”¨å°±ä¸ä¼šè¿”å›ã€‚æŒ‰ç…§è¿™ä¸ªå®šä¹‰ï¼Œå…¶å®ç»å¤§å¤šæ•°å‡½æ•°éƒ½æ˜¯åŒæ­¥è°ƒç”¨ã€‚ä½†æ˜¯ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä»¬åœ¨è¯´åŒæ­¥ã€å¼‚æ­¥çš„æ—¶å€™ï¼Œç‰¹æŒ‡é‚£äº›éœ€è¦å…¶ä»–éƒ¨ä»¶åä½œæˆ–è€…éœ€è¦ä¸€å®šæ—¶é—´å®Œæˆçš„ä»»åŠ¡ã€‚</span></span><br><span class="line"><span class="comment">#ä¸¾ä¾‹ï¼š</span></span><br><span class="line"><span class="comment">#1. multiprocessing.Poolä¸‹çš„apply #å‘èµ·åŒæ­¥è°ƒç”¨åï¼Œå°±åœ¨åŸåœ°ç­‰ç€ä»»åŠ¡ç»“æŸï¼Œæ ¹æœ¬ä¸è€ƒè™‘ä»»åŠ¡æ˜¯åœ¨è®¡ç®—è¿˜æ˜¯åœ¨ioé˜»å¡ï¼Œæ€»ä¹‹å°±æ˜¯ä¸€è‚¡è„‘åœ°ç­‰ä»»åŠ¡ç»“æŸ</span></span><br><span class="line"><span class="comment">#2. concurrent.futures.ProcessPoolExecutor().submit(func,).result()</span></span><br><span class="line"><span class="comment">#3. concurrent.futures.ThreadPoolExecutor().submit(func,).result()</span></span><br></pre></td></tr></table></figure>

<p><strong>å¼‚æ­¥ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¼‚æ­¥çš„æ¦‚å¿µå’ŒåŒæ­¥ç›¸å¯¹ã€‚å½“ä¸€ä¸ªå¼‚æ­¥åŠŸèƒ½è°ƒç”¨å‘å‡ºåï¼Œè°ƒç”¨è€…ä¸èƒ½ç«‹åˆ»å¾—åˆ°ç»“æœã€‚å½“è¯¥å¼‚æ­¥åŠŸèƒ½å®Œæˆåï¼Œé€šè¿‡çŠ¶æ€ã€é€šçŸ¥æˆ–å›è°ƒæ¥é€šçŸ¥è°ƒç”¨è€…ã€‚å¦‚æœå¼‚æ­¥åŠŸèƒ½ç”¨çŠ¶æ€æ¥é€šçŸ¥ï¼Œé‚£ä¹ˆè°ƒç”¨è€…å°±éœ€è¦æ¯éš”ä¸€å®šæ—¶é—´æ£€æŸ¥ä¸€æ¬¡ï¼Œæ•ˆç‡å°±å¾ˆä½ï¼ˆæœ‰äº›åˆå­¦å¤šçº¿ç¨‹ç¼–ç¨‹çš„äººï¼Œæ€»å–œæ¬¢ç”¨ä¸€ä¸ªå¾ªç¯å»æ£€æŸ¥æŸä¸ªå˜é‡çš„å€¼ï¼Œè¿™å…¶å®æ˜¯ä¸€ ç§å¾ˆä¸¥é‡çš„é”™è¯¯ï¼‰ã€‚å¦‚æœæ˜¯ä½¿ç”¨é€šçŸ¥çš„æ–¹å¼ï¼Œæ•ˆç‡åˆ™å¾ˆé«˜ï¼Œå› ä¸ºå¼‚æ­¥åŠŸèƒ½å‡ ä¹ä¸éœ€è¦åšé¢å¤–çš„æ“ä½œã€‚è‡³äºå›è°ƒå‡½æ•°ï¼Œå…¶å®å’Œé€šçŸ¥æ²¡å¤ªå¤šåŒºåˆ«ã€‚</span></span><br><span class="line"><span class="comment">#ä¸¾ä¾‹ï¼š</span></span><br><span class="line"><span class="comment">#1. multiprocessing.Pool().apply_async() #å‘èµ·å¼‚æ­¥è°ƒç”¨åï¼Œå¹¶ä¸ä¼šç­‰å¾…ä»»åŠ¡ç»“æŸæ‰è¿”å›ï¼Œç›¸åï¼Œä¼šç«‹å³è·å–ä¸€ä¸ªä¸´æ—¶ç»“æœï¼ˆå¹¶ä¸æ˜¯æœ€ç»ˆçš„ç»“æœï¼Œå¯èƒ½æ˜¯å°è£…å¥½çš„ä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">#2. concurrent.futures.ProcessPoolExecutor(3).submit(func,)</span></span><br><span class="line"><span class="comment">#3. concurrent.futures.ThreadPoolExecutor(3).submit(func,)</span></span><br></pre></td></tr></table></figure>

<p><strong>é˜»å¡ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#é˜»å¡è°ƒç”¨æ˜¯æŒ‡è°ƒç”¨ç»“æœè¿”å›ä¹‹å‰ï¼Œå½“å‰çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ˆå¦‚é‡åˆ°ioæ“ä½œï¼‰ã€‚å‡½æ•°åªæœ‰åœ¨å¾—åˆ°ç»“æœä¹‹åæ‰ä¼šå°†é˜»å¡çš„çº¿ç¨‹æ¿€æ´»ã€‚æœ‰äººä¹Ÿè®¸ä¼šæŠŠé˜»å¡è°ƒç”¨å’ŒåŒæ­¥è°ƒç”¨ç­‰åŒèµ·æ¥ï¼Œå®é™…ä¸Šä»–æ˜¯ä¸åŒçš„ã€‚å¯¹äºåŒæ­¥è°ƒç”¨æ¥è¯´ï¼Œå¾ˆå¤šæ—¶å€™å½“å‰çº¿ç¨‹è¿˜æ˜¯æ¿€æ´»çš„ï¼Œåªæ˜¯ä»é€»è¾‘ä¸Šå½“å‰å‡½æ•°æ²¡æœ‰è¿”å›è€Œå·²ã€‚</span></span><br><span class="line"><span class="comment">#ä¸¾ä¾‹ï¼š</span></span><br><span class="line"><span class="comment">#1. åŒæ­¥è°ƒç”¨ï¼šapplyä¸€ä¸ªç´¯è®¡1äº¿æ¬¡çš„ä»»åŠ¡ï¼Œè¯¥è°ƒç”¨ä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°ä»»åŠ¡è¿”å›ç»“æœä¸ºæ­¢ï¼Œä½†å¹¶æœªé˜»å¡ä½ï¼ˆå³ä¾¿æ˜¯è¢«æŠ¢èµ°cpuçš„æ‰§è¡Œæƒé™ï¼Œé‚£ä¹Ÿæ˜¯å¤„äºå°±ç»ªæ€ï¼‰;</span></span><br><span class="line"><span class="comment">#2. é˜»å¡è°ƒç”¨ï¼šå½“socketå·¥ä½œåœ¨é˜»å¡æ¨¡å¼çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®çš„æƒ…å†µä¸‹è°ƒç”¨recvå‡½æ•°ï¼Œåˆ™å½“å‰çº¿ç¨‹å°±ä¼šè¢«æŒ‚èµ·ï¼Œç›´åˆ°æœ‰æ•°æ®ä¸ºæ­¢ã€‚</span></span><br></pre></td></tr></table></figure>

<p><strong>éé˜»å¡ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#éé˜»å¡å’Œé˜»å¡çš„æ¦‚å¿µç›¸å¯¹åº”ï¼ŒæŒ‡åœ¨ä¸èƒ½ç«‹åˆ»å¾—åˆ°ç»“æœä¹‹å‰ä¹Ÿä¼šç«‹åˆ»è¿”å›ï¼ŒåŒæ—¶è¯¥å‡½æ•°ä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ã€‚</span></span><br></pre></td></tr></table></figure>

<p><strong>å°ç»“ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. åŒæ­¥ä¸å¼‚æ­¥é’ˆå¯¹çš„æ˜¯å‡½æ•°/ä»»åŠ¡çš„è°ƒç”¨æ–¹å¼ï¼šåŒæ­¥å°±æ˜¯å½“ä¸€ä¸ªè¿›ç¨‹å‘èµ·ä¸€ä¸ªå‡½æ•°ï¼ˆä»»åŠ¡ï¼‰è°ƒç”¨çš„æ—¶å€™ï¼Œä¸€ç›´ç­‰åˆ°å‡½æ•°ï¼ˆä»»åŠ¡ï¼‰å®Œæˆï¼Œè€Œè¿›ç¨‹ç»§ç»­å¤„äºæ¿€æ´»çŠ¶æ€ã€‚è€Œå¼‚æ­¥æƒ…å†µä¸‹æ˜¯å½“ä¸€ä¸ªè¿›ç¨‹å‘èµ·ä¸€ä¸ªå‡½æ•°ï¼ˆä»»åŠ¡ï¼‰è°ƒç”¨çš„æ—¶å€™ï¼Œä¸ä¼šç­‰å‡½æ•°è¿”å›ï¼Œè€Œæ˜¯ç»§ç»­å¾€ä¸‹æ‰§è¡Œå½“ï¼Œå‡½æ•°è¿”å›çš„æ—¶å€™é€šè¿‡çŠ¶æ€ã€é€šçŸ¥ã€äº‹ä»¶ç­‰æ–¹å¼é€šçŸ¥è¿›ç¨‹ä»»åŠ¡å®Œæˆã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2. é˜»å¡ä¸éé˜»å¡é’ˆå¯¹çš„æ˜¯è¿›ç¨‹æˆ–çº¿ç¨‹ï¼šé˜»å¡æ˜¯å½“è¯·æ±‚ä¸èƒ½æ»¡è¶³çš„æ—¶å€™å°±å°†è¿›ç¨‹æŒ‚èµ·ï¼Œè€Œéé˜»å¡åˆ™ä¸ä¼šé˜»å¡å½“å‰è¿›ç¨‹</span></span><br></pre></td></tr></table></figure>

<h3 id="äº”-è¿›ç¨‹çš„åˆ›å»ºï¼ˆäº†è§£ï¼‰"><a href="#äº”-è¿›ç¨‹çš„åˆ›å»ºï¼ˆäº†è§£ï¼‰" class="headerlink" title="äº” è¿›ç¨‹çš„åˆ›å»ºï¼ˆäº†è§£ï¼‰"></a>äº” è¿›ç¨‹çš„åˆ›å»ºï¼ˆäº†è§£ï¼‰</h3><p>ä½†å‡¡æ˜¯ç¡¬ä»¶ï¼Œéƒ½éœ€è¦æœ‰æ“ä½œç³»ç»Ÿå»ç®¡ç†ï¼Œåªè¦æœ‰æ“ä½œç³»ç»Ÿï¼Œå°±æœ‰è¿›ç¨‹çš„æ¦‚å¿µï¼Œå°±éœ€è¦æœ‰åˆ›å»ºè¿›ç¨‹çš„æ–¹å¼ï¼Œä¸€äº›æ“ä½œç³»ç»Ÿåªä¸ºä¸€ä¸ªåº”ç”¨ç¨‹åºè®¾è®¡ï¼Œæ¯”å¦‚å¾®æ³¢ç‚‰ä¸­çš„æ§åˆ¶å™¨ï¼Œä¸€æ—¦å¯åŠ¨å¾®æ³¢ç‚‰ï¼Œæ‰€æœ‰çš„è¿›ç¨‹éƒ½å·²ç»å­˜åœ¨ã€‚</p>
<p>è€Œå¯¹äºé€šç”¨ç³»ç»Ÿï¼ˆè·‘å¾ˆå¤šåº”ç”¨ç¨‹åºï¼‰ï¼Œéœ€è¦æœ‰ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­åˆ›å»ºæˆ–æ’¤é”€è¿›ç¨‹çš„èƒ½åŠ›ï¼Œä¸»è¦åˆ†ä¸º4ä¸­å½¢å¼åˆ›å»ºæ–°çš„è¿›ç¨‹</p>
<p>\1. ç³»ç»Ÿåˆå§‹åŒ–ï¼ˆæŸ¥çœ‹è¿›ç¨‹linuxä¸­ç”¨pså‘½ä»¤ï¼Œwindowsä¸­ç”¨ä»»åŠ¡ç®¡ç†å™¨ï¼Œå‰å°è¿›ç¨‹è´Ÿè´£ä¸ç”¨æˆ·äº¤äº’ï¼Œåå°è¿è¡Œçš„è¿›ç¨‹ä¸ç”¨æˆ·æ— å…³ï¼Œè¿è¡Œåœ¨åå°å¹¶ä¸”åªåœ¨éœ€è¦æ—¶æ‰å”¤é†’çš„è¿›ç¨‹ï¼Œç§°ä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼Œå¦‚ç”µå­é‚®ä»¶ã€webé¡µé¢ã€æ–°é—»ã€æ‰“å°ï¼‰</p>
<p>\2. ä¸€ä¸ªè¿›ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¼€å¯äº†å­è¿›ç¨‹ï¼ˆå¦‚nginxå¼€å¯å¤šè¿›ç¨‹ï¼Œos.fork,subprocess.Popenç­‰ï¼‰</p>
<p>\3. ç”¨æˆ·çš„äº¤äº’å¼è¯·æ±‚ï¼Œè€Œåˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹ï¼ˆå¦‚ç”¨æˆ·åŒå‡»æš´é£å½±éŸ³ï¼‰</p>
<p>\4. ä¸€ä¸ªæ‰¹å¤„ç†ä½œä¸šçš„åˆå§‹åŒ–ï¼ˆåªåœ¨å¤§å‹æœºçš„æ‰¹å¤„ç†ç³»ç»Ÿä¸­åº”ç”¨ï¼‰</p>
<p>æ— è®ºå“ªä¸€ç§ï¼Œæ–°è¿›ç¨‹çš„åˆ›å»ºéƒ½æ˜¯ç”±ä¸€ä¸ªå·²ç»å­˜åœ¨çš„è¿›ç¨‹æ‰§è¡Œäº†ä¸€ä¸ªç”¨äºåˆ›å»ºè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨è€Œåˆ›å»ºçš„ï¼š</p>
<p>\1. åœ¨UNIXä¸­è¯¥ç³»ç»Ÿè°ƒç”¨æ˜¯ï¼šforkï¼Œforkä¼šåˆ›å»ºä¸€ä¸ªä¸çˆ¶è¿›ç¨‹ä¸€æ¨¡ä¸€æ ·çš„å‰¯æœ¬ï¼ŒäºŒè€…æœ‰ç›¸åŒçš„å­˜å‚¨æ˜ åƒã€åŒæ ·çš„ç¯å¢ƒå­—ç¬¦ä¸²å’ŒåŒæ ·çš„æ‰“å¼€æ–‡ä»¶ï¼ˆåœ¨shellè§£é‡Šå™¨è¿›ç¨‹ä¸­ï¼Œæ‰§è¡Œä¸€ä¸ªå‘½ä»¤å°±ä¼šåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼‰</p>
<p>\2. åœ¨windowsä¸­è¯¥ç³»ç»Ÿè°ƒç”¨æ˜¯ï¼šCreateProcessï¼ŒCreateProcessæ—¢å¤„ç†è¿›ç¨‹çš„åˆ›å»ºï¼Œä¹Ÿè´Ÿè´£æŠŠæ­£ç¡®çš„ç¨‹åºè£…å…¥æ–°è¿›ç¨‹ã€‚ã€€</p>
<p>å…³äºåˆ›å»ºçš„å­è¿›ç¨‹ï¼ŒUNIXå’Œwindows</p>
<p>1.ç›¸åŒçš„æ˜¯ï¼šè¿›ç¨‹åˆ›å»ºåï¼Œçˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹æœ‰å„è‡ªä¸åŒçš„åœ°å€ç©ºé—´ï¼ˆ<strong>å¤šé“æŠ€æœ¯è¦æ±‚ç‰©ç†å±‚é¢å®ç°è¿›ç¨‹ä¹‹é—´å†…å­˜çš„éš”ç¦»</strong>ï¼‰ï¼Œä»»ä½•ä¸€ä¸ªè¿›ç¨‹çš„åœ¨å…¶åœ°å€ç©ºé—´ä¸­çš„ä¿®æ”¹éƒ½ä¸ä¼šå½±å“åˆ°å¦å¤–ä¸€ä¸ªè¿›ç¨‹ã€‚</p>
<p>2.ä¸åŒçš„æ˜¯ï¼šåœ¨UNIXä¸­ï¼Œå­è¿›ç¨‹çš„åˆå§‹åœ°å€ç©ºé—´æ˜¯çˆ¶è¿›ç¨‹çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œæç¤ºï¼šå­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹æ˜¯å¯ä»¥æœ‰åªè¯»çš„å…±äº«å†…å­˜åŒºçš„ã€‚ä½†æ˜¯å¯¹äºwindowsç³»ç»Ÿæ¥è¯´ï¼Œä»ä¸€å¼€å§‹çˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹çš„åœ°å€ç©ºé—´å°±æ˜¯ä¸åŒçš„ã€‚</p>
<h3 id="å…­-è¿›ç¨‹çš„ç»ˆæ­¢ï¼ˆäº†è§£ï¼‰"><a href="#å…­-è¿›ç¨‹çš„ç»ˆæ­¢ï¼ˆäº†è§£ï¼‰" class="headerlink" title="å…­ è¿›ç¨‹çš„ç»ˆæ­¢ï¼ˆäº†è§£ï¼‰"></a>å…­ è¿›ç¨‹çš„ç»ˆæ­¢ï¼ˆäº†è§£ï¼‰</h3><p>\1. æ­£å¸¸é€€å‡ºï¼ˆè‡ªæ„¿ï¼Œå¦‚ç”¨æˆ·ç‚¹å‡»äº¤äº’å¼é¡µé¢çš„å‰å·ï¼Œæˆ–ç¨‹åºæ‰§è¡Œå®Œæ¯•è°ƒç”¨å‘èµ·ç³»ç»Ÿè°ƒç”¨æ­£å¸¸é€€å‡ºï¼Œåœ¨linuxä¸­ç”¨exitï¼Œåœ¨windowsä¸­ç”¨ExitProcessï¼‰</p>
<p>\2. å‡ºé”™é€€å‡ºï¼ˆè‡ªæ„¿ï¼Œpython a.pyä¸­a.pyä¸å­˜åœ¨ï¼‰</p>
<p>\3. ä¸¥é‡é”™è¯¯ï¼ˆéè‡ªæ„¿ï¼Œæ‰§è¡Œéæ³•æŒ‡ä»¤ï¼Œå¦‚å¼•ç”¨ä¸å­˜åœ¨çš„å†…å­˜ï¼Œ1&#x2F;0ç­‰ï¼Œå¯ä»¥æ•æ‰å¼‚å¸¸ï¼Œtryâ€¦exceptâ€¦ï¼‰</p>
<p>\4. è¢«å…¶ä»–è¿›ç¨‹æ€æ­»ï¼ˆéè‡ªæ„¿ï¼Œå¦‚kill -9ï¼‰</p>
<h3 id="ä¸ƒ-è¿›ç¨‹çš„å±‚æ¬¡ç»“æ„"><a href="#ä¸ƒ-è¿›ç¨‹çš„å±‚æ¬¡ç»“æ„" class="headerlink" title="ä¸ƒ è¿›ç¨‹çš„å±‚æ¬¡ç»“æ„"></a>ä¸ƒ è¿›ç¨‹çš„å±‚æ¬¡ç»“æ„</h3><p>æ— è®ºUNIXè¿˜æ˜¯windowsï¼Œè¿›ç¨‹åªæœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹ï¼Œä¸åŒçš„æ˜¯ï¼š</p>
<p>\1. åœ¨UNIXä¸­æ‰€æœ‰çš„è¿›ç¨‹ï¼Œéƒ½æ˜¯ä»¥initè¿›ç¨‹ä¸ºæ ¹ï¼Œç»„æˆæ ‘å½¢ç»“æ„ã€‚çˆ¶å­è¿›ç¨‹å…±åŒç»„æˆä¸€ä¸ªè¿›ç¨‹ç»„ï¼Œè¿™æ ·ï¼Œå½“ä»é”®ç›˜å‘å‡ºä¸€ä¸ªä¿¡å·æ—¶ï¼Œè¯¥ä¿¡å·è¢«é€ç»™å½“å‰ä¸é”®ç›˜ç›¸å…³çš„è¿›ç¨‹ç»„ä¸­çš„æ‰€æœ‰æˆå‘˜ã€‚</p>
<p>\2. åœ¨windowsä¸­ï¼Œæ²¡æœ‰è¿›ç¨‹å±‚æ¬¡çš„æ¦‚å¿µï¼Œæ‰€æœ‰çš„è¿›ç¨‹éƒ½æ˜¯åœ°ä½ç›¸åŒçš„ï¼Œå”¯ä¸€ç±»ä¼¼äºè¿›ç¨‹å±‚æ¬¡çš„æš—ç¤ºï¼Œæ˜¯åœ¨åˆ›å»ºè¿›ç¨‹æ—¶ï¼Œçˆ¶è¿›ç¨‹å¾—åˆ°ä¸€ä¸ªç‰¹åˆ«çš„ä»¤ç‰Œï¼ˆ<strong>ç§°ä¸ºå¥æŸ„</strong>ï¼‰,è¯¥å¥æŸ„å¯ä»¥ç”¨æ¥æ§åˆ¶å­è¿›ç¨‹ï¼Œä½†æ˜¯çˆ¶è¿›ç¨‹æœ‰æƒæŠŠè¯¥å¥æŸ„ä¼ ç»™å…¶ä»–å­è¿›ç¨‹ï¼Œè¿™æ ·å°±æ²¡æœ‰å±‚æ¬¡äº†ã€‚</p>
<h3 id="å…«-è¿›ç¨‹çš„çŠ¶æ€"><a href="#å…«-è¿›ç¨‹çš„çŠ¶æ€" class="headerlink" title="å…« è¿›ç¨‹çš„çŠ¶æ€"></a>å…« è¿›ç¨‹çš„çŠ¶æ€</h3><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">tail -f <span class="keyword">access</span>.<span class="keyword">log</span> |grep <span class="string">&#x27;404&#x27;</span></span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œç¨‹åºtailï¼Œå¼€å¯ä¸€ä¸ªå­è¿›ç¨‹ï¼Œæ‰§è¡Œç¨‹åºgrepï¼Œå¼€å¯å¦å¤–ä¸€ä¸ªå­è¿›ç¨‹ï¼Œä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´åŸºäºç®¡é“â€™|â€™é€šè®¯ï¼Œå°†tailçš„ç»“æœä½œä¸ºgrepçš„è¾“å…¥ã€‚</p>
<p>è¿›ç¨‹grepåœ¨ç­‰å¾…è¾“å…¥ï¼ˆå³I&#x2F;Oï¼‰æ—¶çš„çŠ¶æ€ç§°ä¸ºé˜»å¡ï¼Œæ­¤æ—¶grepå‘½ä»¤éƒ½æ— æ³•è¿è¡Œ</p>
<p>å…¶å®åœ¨ä¸¤ç§æƒ…å†µä¸‹ä¼šå¯¼è‡´ä¸€ä¸ªè¿›ç¨‹åœ¨é€»è¾‘ä¸Šä¸èƒ½è¿è¡Œï¼Œ</p>
<p>\1. è¿›ç¨‹æŒ‚èµ·æ˜¯è‡ªèº«åŸå› ï¼Œé‡åˆ°I&#x2F;Oé˜»å¡ï¼Œä¾¿è¦è®©å‡ºCPUè®©å…¶ä»–è¿›ç¨‹å»æ‰§è¡Œï¼Œè¿™æ ·ä¿è¯CPUä¸€ç›´åœ¨å·¥ä½œ</p>
<p>\2. ä¸è¿›ç¨‹æ— å…³ï¼Œæ˜¯æ“ä½œç³»ç»Ÿå±‚é¢ï¼Œå¯èƒ½ä¼šå› ä¸ºä¸€ä¸ªè¿›ç¨‹å ç”¨æ—¶é—´è¿‡å¤šï¼Œæˆ–è€…ä¼˜å…ˆçº§ç­‰åŸå› ï¼Œè€Œè°ƒç”¨å…¶ä»–çš„è¿›ç¨‹å»ä½¿ç”¨CPUã€‚</p>
<p>å› è€Œä¸€ä¸ªè¿›ç¨‹ç”±ä¸‰ç§çŠ¶æ€</p>
<p><img src="https://pic1.zhimg.com/80/v2-1b816bea5d7900ca5faad9abdee1cec4_720w.jpg" alt="img"></p>
<h3 id="ä¹-è¿›ç¨‹å¹¶å‘çš„å®ç°ï¼ˆäº†è§£ï¼‰"><a href="#ä¹-è¿›ç¨‹å¹¶å‘çš„å®ç°ï¼ˆäº†è§£ï¼‰" class="headerlink" title="ä¹ è¿›ç¨‹å¹¶å‘çš„å®ç°ï¼ˆäº†è§£ï¼‰"></a>ä¹ è¿›ç¨‹å¹¶å‘çš„å®ç°ï¼ˆäº†è§£ï¼‰</h3><p>è¿›ç¨‹å¹¶å‘çš„å®ç°åœ¨äºï¼Œç¡¬ä»¶ä¸­æ–­ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼ŒæŠŠæ­¤æ—¶è¿›ç¨‹è¿è¡Œçš„æ‰€æœ‰çŠ¶æ€ä¿å­˜ä¸‹æ¥ï¼Œä¸ºæ­¤ï¼Œæ“ä½œç³»ç»Ÿç»´æŠ¤ä¸€å¼ è¡¨æ ¼ï¼Œå³è¿›ç¨‹è¡¨ï¼ˆprocess tableï¼‰ï¼Œæ¯ä¸ªè¿›ç¨‹å ç”¨ä¸€ä¸ªè¿›ç¨‹è¡¨é¡¹ï¼ˆè¿™äº›è¡¨é¡¹ä¹Ÿç§°ä¸ºè¿›ç¨‹æ§åˆ¶å—ï¼‰</p>
<p><img src="https://pic1.zhimg.com/80/v2-c7e653f1793ccc5d2aeed7d128459698_720w.jpg" alt="img"></p>
<p>è¯¥è¡¨å­˜æ”¾äº†è¿›ç¨‹çŠ¶æ€çš„é‡è¦ä¿¡æ¯ï¼šç¨‹åºè®¡æ•°å™¨ã€å †æ ˆæŒ‡é’ˆã€å†…å­˜åˆ†é…çŠ¶å†µã€æ‰€æœ‰æ‰“å¼€æ–‡ä»¶çš„çŠ¶æ€ã€å¸å·å’Œè°ƒåº¦ä¿¡æ¯ï¼Œä»¥åŠå…¶ä»–åœ¨è¿›ç¨‹ç”±è¿è¡Œæ€è½¬ä¸ºå°±ç»ªæ€æˆ–é˜»å¡æ€æ—¶ï¼Œå¿…é¡»ä¿å­˜çš„ä¿¡æ¯ï¼Œä»è€Œä¿è¯è¯¥è¿›ç¨‹åœ¨å†æ¬¡å¯åŠ¨æ—¶ï¼Œå°±åƒä»æœªè¢«ä¸­æ–­è¿‡ä¸€æ ·ã€‚<a href="https://link.zhihu.com/?target=https://www.cnblogs.com/linhaifeng/articles/7430066.html">pythonå¹¶å‘ç¼–ç¨‹ä¹‹å¤šè¿›ç¨‹ç†è®ºéƒ¨åˆ†</a></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=130">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=130<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>35-å¹¶å‘ç¼–ç¨‹ï¼ˆå››ï¼‰</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/35_python%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%88%E7%90%86%E8%AE%BA%E7%AF%87%EF%BC%89/</url>
    <content><![CDATA[<h3 id="ä¸€-ä»€ä¹ˆæ˜¯çº¿ç¨‹"><a href="#ä¸€-ä»€ä¹ˆæ˜¯çº¿ç¨‹" class="headerlink" title="ä¸€ ä»€ä¹ˆæ˜¯çº¿ç¨‹"></a>ä¸€ ä»€ä¹ˆæ˜¯çº¿ç¨‹</h3><p>åœ¨ä¼ ç»Ÿæ“ä½œç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªè¿›ç¨‹æœ‰ä¸€ä¸ªåœ°å€ç©ºé—´ï¼Œè€Œä¸”é»˜è®¤å°±æœ‰ä¸€ä¸ªæ§åˆ¶çº¿ç¨‹</p>
<p>çº¿ç¨‹é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸€æ¡æµæ°´çº¿å·¥ä½œçš„è¿‡ç¨‹ï¼Œä¸€æ¡æµæ°´çº¿å¿…é¡»å±äºä¸€ä¸ªè½¦é—´ï¼Œä¸€ä¸ªè½¦é—´çš„å·¥ä½œè¿‡ç¨‹æ˜¯ä¸€ä¸ªè¿›ç¨‹</p>
<p>è½¦é—´è´Ÿè´£æŠŠèµ„æºæ•´åˆåˆ°ä¸€èµ·ï¼Œæ˜¯ä¸€ä¸ªèµ„æºå•ä½ï¼Œè€Œä¸€ä¸ªè½¦é—´å†…è‡³å°‘æœ‰ä¸€ä¸ªæµæ°´çº¿</p>
<p>æµæ°´çº¿çš„å·¥ä½œéœ€è¦ç”µæºï¼Œç”µæºå°±ç›¸å½“äºcpu</p>
<p>æ‰€ä»¥ï¼Œ<strong>è¿›ç¨‹åªæ˜¯ç”¨æ¥æŠŠèµ„æºé›†ä¸­åˆ°ä¸€èµ·ï¼ˆè¿›ç¨‹åªæ˜¯ä¸€ä¸ªèµ„æºå•ä½ï¼Œæˆ–è€…è¯´èµ„æºé›†åˆï¼‰ï¼Œè€Œçº¿ç¨‹æ‰æ˜¯cpuä¸Šçš„æ‰§è¡Œå•ä½ã€‚</strong></p>
<p>å¤šçº¿ç¨‹ï¼ˆå³å¤šä¸ªæ§åˆ¶çº¿ç¨‹ï¼‰çš„æ¦‚å¿µæ˜¯ï¼Œåœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å­˜åœ¨å¤šä¸ªæ§åˆ¶çº¿ç¨‹ï¼Œå¤šä¸ªæ§åˆ¶çº¿ç¨‹å…±äº«è¯¥è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼Œç›¸å½“äºä¸€ä¸ªè½¦é—´å†…æœ‰å¤šæ¡æµæ°´çº¿ï¼Œéƒ½å…±ç”¨ä¸€ä¸ªè½¦é—´çš„èµ„æºã€‚</p>
<p>ä¾‹å¦‚ï¼ŒåŒ—äº¬åœ°é“ä¸ä¸Šæµ·åœ°é“æ˜¯ä¸åŒçš„è¿›ç¨‹ï¼Œè€ŒåŒ—äº¬åœ°é“é‡Œçš„13å·çº¿æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼ŒåŒ—äº¬åœ°é“æ‰€æœ‰çš„çº¿è·¯å…±äº«åŒ—äº¬åœ°é“æ‰€æœ‰çš„èµ„æºï¼Œæ¯”å¦‚æ‰€æœ‰çš„ä¹˜å®¢å¯ä»¥è¢«æ‰€æœ‰çº¿è·¯æ‹‰ã€‚</p>
<h3 id="äºŒ-çº¿ç¨‹çš„åˆ›å»ºå¼€é”€å°"><a href="#äºŒ-çº¿ç¨‹çš„åˆ›å»ºå¼€é”€å°" class="headerlink" title="äºŒ çº¿ç¨‹çš„åˆ›å»ºå¼€é”€å°"></a>äºŒ çº¿ç¨‹çš„åˆ›å»ºå¼€é”€å°</h3><p>åˆ›å»ºè¿›ç¨‹çš„å¼€é”€è¦è¿œå¤§äºçº¿ç¨‹ï¼Ÿ</p>
<p>å¦‚æœæˆ‘ä»¬çš„è½¯ä»¶æ˜¯ä¸€ä¸ªå·¥å‚ï¼Œè¯¥å·¥å‚æœ‰å¤šæ¡æµæ°´çº¿ï¼Œæµæ°´çº¿å·¥ä½œéœ€è¦ç”µæºï¼Œç”µæºåªæœ‰ä¸€ä¸ªå³cpuï¼ˆå•æ ¸cpuï¼‰</p>
<p>ä¸€ä¸ªè½¦é—´å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè½¦é—´è‡³å°‘ä¸€æ¡æµæ°´çº¿ï¼ˆä¸€ä¸ªè¿›ç¨‹è‡³å°‘ä¸€ä¸ªçº¿ç¨‹ï¼‰</p>
<p>åˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ªè½¦é—´ï¼ˆç”³è¯·ç©ºé—´ï¼Œåœ¨è¯¥ç©ºé—´å†…å»ºè‡³å°‘ä¸€æ¡æµæ°´çº¿ï¼‰</p>
<p>è€Œå»ºçº¿ç¨‹ï¼Œå°±åªæ˜¯åœ¨ä¸€ä¸ªè½¦é—´å†…é€ ä¸€æ¡æµæ°´çº¿ï¼Œæ— éœ€ç”³è¯·ç©ºé—´ï¼Œæ‰€ä»¥åˆ›å»ºå¼€é”€å°</p>
<p>è¿›ç¨‹ä¹‹é—´æ˜¯ç«äº‰å…³ç³»ï¼Œçº¿ç¨‹ä¹‹é—´æ˜¯åä½œå…³ç³»ï¼Ÿ</p>
<p>è½¦é—´ç›´æ¥æ˜¯ç«äº‰&#x2F;æŠ¢ç”µæºçš„å…³ç³»ï¼Œç«äº‰ï¼ˆä¸åŒçš„è¿›ç¨‹ç›´æ¥æ˜¯ç«äº‰å…³ç³»ï¼Œæ˜¯ä¸åŒçš„ç¨‹åºå‘˜å†™çš„ç¨‹åºè¿è¡Œçš„ï¼Œè¿…é›·æŠ¢å å…¶ä»–è¿›ç¨‹çš„ç½‘é€Ÿï¼Œ360æŠŠå…¶ä»–è¿›ç¨‹å½“åšç—…æ¯’å¹²æ­»ï¼‰ ä¸€ä¸ªè½¦é—´çš„ä¸åŒæµæ°´çº¿å¼ååŒå·¥ä½œçš„å…³ç³»ï¼ˆåŒä¸€ä¸ªè¿›ç¨‹çš„çº¿ç¨‹ä¹‹é—´æ˜¯åˆä½œå…³ç³»ï¼Œæ˜¯åŒä¸€ä¸ªç¨‹åºå†™çš„ç¨‹åºå†…å¼€å¯åŠ¨ï¼Œè¿…é›·å†…çš„çº¿ç¨‹æ˜¯åˆä½œå…³ç³»ï¼Œä¸ä¼šè‡ªå·±å¹²è‡ªå·±ï¼‰</p>
<h3 id="ä¸‰-çº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«"><a href="#ä¸‰-çº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«" class="headerlink" title="ä¸‰ çº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«"></a>ä¸‰ çº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«</h3><ol>
<li>Threads share the address space of the process that created it; processes have their own address space.</li>
<li>Threads have direct access to the data segment of its process; processes have their own copy of the data segment of the parent process.</li>
<li>Threads can directly communicate with other threads of its process; processes must use interprocess communication to communicate with sibling processes.</li>
<li>New threads are easily created; new processes require duplication of the parent process.</li>
<li>Threads can exercise considerable control over threads of the same process; processes can only exercise control over child processes.</li>
<li>Changes to the main thread (cancellation, priority change, etc.) may affect the behavior of the other threads of the process; changes to the parent process does not affect child processes.</li>
</ol>
<h3 id="å››-ä¸ºä½•è¦ç”¨å¤šçº¿ç¨‹"><a href="#å››-ä¸ºä½•è¦ç”¨å¤šçº¿ç¨‹" class="headerlink" title="å›› ä¸ºä½•è¦ç”¨å¤šçº¿ç¨‹"></a>å›› ä¸ºä½•è¦ç”¨å¤šçº¿ç¨‹</h3><p>å¤šçº¿ç¨‹æŒ‡çš„æ˜¯ï¼Œåœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å¼€å¯å¤šä¸ªçº¿ç¨‹ï¼Œç®€å•çš„è®²ï¼šå¦‚æœå¤šä¸ªä»»åŠ¡å…±ç”¨ä¸€å—åœ°å€ç©ºé—´ï¼Œé‚£ä¹ˆå¿…é¡»åœ¨ä¸€ä¸ªè¿›ç¨‹å†…å¼€å¯å¤šä¸ªçº¿ç¨‹ã€‚è¯¦ç»†çš„è®²åˆ†ä¸º4ç‚¹ï¼š</p>
<p>\1. å¤šçº¿ç¨‹å…±äº«ä¸€ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´</p>
<p>\2. çº¿ç¨‹æ¯”è¿›ç¨‹æ›´è½»é‡çº§ï¼Œçº¿ç¨‹æ¯”è¿›ç¨‹æ›´å®¹æ˜“åˆ›å»ºå¯æ’¤é”€ï¼Œåœ¨è®¸å¤šæ“ä½œç³»ç»Ÿä¸­ï¼Œåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¯”åˆ›å»ºä¸€ä¸ªè¿›ç¨‹è¦å¿«10-100å€ï¼Œåœ¨æœ‰å¤§é‡çº¿ç¨‹éœ€è¦åŠ¨æ€å’Œå¿«é€Ÿä¿®æ”¹æ—¶ï¼Œè¿™ä¸€ç‰¹æ€§å¾ˆæœ‰ç”¨</p>
<p>\3. è‹¥å¤šä¸ªçº¿ç¨‹éƒ½æ˜¯cpuå¯†é›†å‹çš„ï¼Œé‚£ä¹ˆå¹¶ä¸èƒ½è·å¾—æ€§èƒ½ä¸Šçš„å¢å¼ºï¼Œä½†æ˜¯å¦‚æœå­˜åœ¨å¤§é‡çš„è®¡ç®—å’Œå¤§é‡çš„I&#x2F;Oå¤„ç†ï¼Œæ‹¥æœ‰å¤šä¸ªçº¿ç¨‹å…è®¸è¿™äº›æ´»åŠ¨å½¼æ­¤é‡å è¿è¡Œï¼Œä»è€Œä¼šåŠ å¿«ç¨‹åºæ‰§è¡Œçš„é€Ÿåº¦ã€‚</p>
<p>\4. åœ¨å¤šcpuç³»ç»Ÿä¸­ï¼Œä¸ºäº†æœ€å¤§é™åº¦çš„åˆ©ç”¨å¤šæ ¸ï¼Œå¯ä»¥å¼€å¯å¤šä¸ªçº¿ç¨‹ï¼Œæ¯”å¼€è¿›ç¨‹å¼€é”€è¦å°çš„å¤šã€‚ï¼ˆè¿™ä¸€æ¡å¹¶ä¸é€‚ç”¨äºpythonï¼‰</p>
<h3 id="äº”-å¤šçº¿ç¨‹çš„åº”ç”¨ä¸¾ä¾‹"><a href="#äº”-å¤šçº¿ç¨‹çš„åº”ç”¨ä¸¾ä¾‹" class="headerlink" title="äº” å¤šçº¿ç¨‹çš„åº”ç”¨ä¸¾ä¾‹"></a>äº” å¤šçº¿ç¨‹çš„åº”ç”¨ä¸¾ä¾‹</h3><p><img src="https://pic4.zhimg.com/80/v2-23bf6d2fefc642b0e5e0beb35a1e0fb3_720w.jpg" alt="img"></p>
<p>å¼€å¯ä¸€ä¸ªå­—å¤„ç†è½¯ä»¶è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹è‚¯å®šéœ€è¦åŠä¸æ­¢ä¸€ä»¶äº‹æƒ…ï¼Œæ¯”å¦‚ç›‘å¬é”®ç›˜è¾“å…¥ï¼Œå¤„ç†æ–‡å­—ï¼Œå®šæ—¶è‡ªåŠ¨å°†æ–‡å­—ä¿å­˜åˆ°ç¡¬ç›˜ï¼Œè¿™ä¸‰ä¸ªä»»åŠ¡æ“ä½œçš„éƒ½æ˜¯åŒä¸€å—æ•°æ®ï¼Œå› è€Œä¸èƒ½ç”¨å¤šè¿›ç¨‹ã€‚åªèƒ½åœ¨ä¸€ä¸ªè¿›ç¨‹é‡Œå¹¶å‘åœ°å¼€å¯ä¸‰ä¸ªçº¿ç¨‹,å¦‚æœæ˜¯å•çº¿ç¨‹ï¼Œé‚£å°±åªèƒ½æ˜¯ï¼Œé”®ç›˜è¾“å…¥æ—¶ï¼Œä¸èƒ½å¤„ç†æ–‡å­—å’Œè‡ªåŠ¨ä¿å­˜ï¼Œè‡ªåŠ¨ä¿å­˜æ—¶åˆä¸èƒ½è¾“å…¥å’Œå¤„ç†æ–‡å­—ã€‚</p>
<h3 id="å…­-ç»å…¸çš„çº¿ç¨‹æ¨¡å‹ï¼ˆäº†è§£ï¼‰"><a href="#å…­-ç»å…¸çš„çº¿ç¨‹æ¨¡å‹ï¼ˆäº†è§£ï¼‰" class="headerlink" title="å…­ ç»å…¸çš„çº¿ç¨‹æ¨¡å‹ï¼ˆäº†è§£ï¼‰"></a>å…­ ç»å…¸çš„çº¿ç¨‹æ¨¡å‹ï¼ˆäº†è§£ï¼‰</h3><p>å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­çš„èµ„æºï¼Œæ˜¯å¯¹ä¸€å°è®¡ç®—æœºä¸Šå¤šä¸ªè¿›ç¨‹çš„æ¨¡æ‹Ÿï¼Œæœ‰æ—¶ä¹Ÿç§°çº¿ç¨‹ä¸ºè½»é‡çº§çš„è¿›ç¨‹</p>
<p>è€Œå¯¹ä¸€å°è®¡ç®—æœºä¸Šå¤šä¸ªè¿›ç¨‹ï¼Œåˆ™å…±äº«ç‰©ç†å†…å­˜ã€ç£ç›˜ã€æ‰“å°æœºç­‰å…¶ä»–ç‰©ç†èµ„æºã€‚</p>
<p>å¤šçº¿ç¨‹çš„è¿è¡Œä¹Ÿå¤šè¿›ç¨‹çš„è¿è¡Œç±»ä¼¼ï¼Œæ˜¯cpuåœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å¿«é€Ÿåˆ‡æ¢ã€‚</p>
<p><img src="https://pic4.zhimg.com/80/v2-c4ada42e8dac0fd7a35dbca9a76221a7_720w.jpg" alt="img"></p>
<p>ä¸åŒçš„è¿›ç¨‹ä¹‹é—´æ˜¯å……æ»¡æ•Œæ„çš„ï¼Œå½¼æ­¤æ˜¯æŠ¢å ã€ç«äº‰cpuçš„å…³ç³»ï¼Œå¦‚æœè¿…é›·ä¼šå’ŒQQæŠ¢èµ„æºã€‚è€ŒåŒä¸€ä¸ªè¿›ç¨‹æ˜¯ç”±ä¸€ä¸ªç¨‹åºå‘˜çš„ç¨‹åºåˆ›å»ºï¼Œæ‰€ä»¥åŒä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹æ˜¯åˆä½œå…³ç³»ï¼Œä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®å¦å¤–ä¸€ä¸ªçº¿ç¨‹çš„å†…å­˜åœ°å€ï¼Œå¤§å®¶éƒ½æ˜¯å…±äº«çš„ï¼Œä¸€ä¸ªçº¿ç¨‹å¹²æ­»äº†å¦å¤–ä¸€ä¸ªçº¿ç¨‹çš„å†…å­˜ï¼Œé‚£çº¯å±ç¨‹åºå‘˜è„‘å­æœ‰é—®é¢˜ã€‚</p>
<p>ç±»ä¼¼äºè¿›ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹ä¹Ÿæœ‰è‡ªå·±çš„å †æ ˆ</p>
<p><img src="https://pic1.zhimg.com/80/v2-c26f5bb3bb75125b6f9038b50152c924_720w.jpg" alt="img"></p>
<p>ä¸åŒäºè¿›ç¨‹ï¼Œçº¿ç¨‹åº“æ— æ³•åˆ©ç”¨æ—¶é’Ÿä¸­æ–­å¼ºåˆ¶çº¿ç¨‹è®©å‡ºCPUï¼Œå¯ä»¥è°ƒç”¨thread_yieldè¿è¡Œçº¿ç¨‹è‡ªåŠ¨æ”¾å¼ƒcpuï¼Œè®©å¦å¤–ä¸€ä¸ªçº¿ç¨‹è¿è¡Œã€‚</p>
<p>çº¿ç¨‹é€šå¸¸æ˜¯æœ‰ç›Šçš„ï¼Œä½†æ˜¯å¸¦æ¥äº†ä¸å°ç¨‹åºè®¾è®¡éš¾åº¦ï¼Œçº¿ç¨‹çš„é—®é¢˜æ˜¯ï¼š</p>
<p>\1. çˆ¶è¿›ç¨‹æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆå¼€å¯çš„å­çº¿ç¨‹æ˜¯å¦éœ€è¦åŒæ ·å¤šçš„çº¿ç¨‹</p>
<p>å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆé™„è¿‘ä¸­æŸä¸ªçº¿ç¨‹è¢«é˜»å¡ï¼Œé‚£ä¹ˆcopyåˆ°å­è¿›ç¨‹åï¼Œcopyç‰ˆçš„çº¿ç¨‹ä¹Ÿè¦è¢«é˜»å¡å—ï¼Œæƒ³ä¸€æƒ³nginxçš„å¤šçº¿ç¨‹æ¨¡å¼æ¥æ”¶ç”¨æˆ·è¿æ¥ã€‚</p>
<p>\2. åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹å…³é—­äº†é—®é¢˜ï¼Œè€Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹æ­£å‡†å¤‡å¾€è¯¥æ–‡ä»¶å†…å†™å†…å®¹å‘¢ï¼Ÿ</p>
<p> å¦‚æœä¸€ä¸ªçº¿ç¨‹æ³¨æ„åˆ°æ²¡æœ‰å†…å­˜äº†ï¼Œå¹¶å¼€å§‹åˆ†é…æ›´å¤šçš„å†…å­˜ï¼Œåœ¨å·¥ä½œä¸€åŠæ—¶ï¼Œå‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ï¼Œæ–°çš„çº¿ç¨‹ä¹Ÿå‘ç°å†…å­˜ä¸å¤Ÿç”¨äº†ï¼Œåˆå¼€å§‹åˆ†é…æ›´å¤šçš„å†…å­˜ï¼Œè¿™æ ·å†…å­˜å°±è¢«åˆ†é…äº†å¤šæ¬¡ï¼Œè¿™äº›é—®é¢˜éƒ½æ˜¯å¤šçº¿ç¨‹ç¼–ç¨‹çš„å…¸å‹é—®é¢˜ï¼Œéœ€è¦ä»”ç»†æ€è€ƒå’Œè®¾è®¡ã€‚</p>
<h3 id="ä¸ƒ-POSIXçº¿ç¨‹ï¼ˆäº†è§£ï¼‰"><a href="#ä¸ƒ-POSIXçº¿ç¨‹ï¼ˆäº†è§£ï¼‰" class="headerlink" title="ä¸ƒ POSIXçº¿ç¨‹ï¼ˆäº†è§£ï¼‰"></a>ä¸ƒ POSIXçº¿ç¨‹ï¼ˆäº†è§£ï¼‰</h3><p>ä¸ºäº†å®ç°å¯ç§»æ¤çš„çº¿ç¨‹ç¨‹åº,IEEEåœ¨IEEEæ ‡å‡†1003.1cä¸­å®šä¹‰äº†çº¿ç¨‹æ ‡å‡†ï¼Œå®ƒå®šä¹‰çš„çº¿ç¨‹åŒ…å«Pthreadã€‚å¤§éƒ¨åˆ†UNIXç³»ç»Ÿéƒ½æ”¯æŒè¯¥æ ‡å‡†ï¼Œç®€å•ä»‹ç»å¦‚ä¸‹</p>
<p><img src="https://pic4.zhimg.com/80/v2-855ddca7baa57baf9a5242a8167369b3_720w.jpg" alt="img"></p>
<h3 id="å…«-åœ¨ç”¨æˆ·ç©ºé—´å®ç°çš„çº¿ç¨‹ï¼ˆäº†è§£ï¼‰"><a href="#å…«-åœ¨ç”¨æˆ·ç©ºé—´å®ç°çš„çº¿ç¨‹ï¼ˆäº†è§£ï¼‰" class="headerlink" title="å…« åœ¨ç”¨æˆ·ç©ºé—´å®ç°çš„çº¿ç¨‹ï¼ˆäº†è§£ï¼‰"></a>å…« åœ¨ç”¨æˆ·ç©ºé—´å®ç°çš„çº¿ç¨‹ï¼ˆäº†è§£ï¼‰</h3><p>çº¿ç¨‹çš„å®ç°å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šç”¨æˆ·çº§çº¿ç¨‹(User-Level Thread)å’Œå†…æ ¸çº¿çº¿ç¨‹(Kernel-Level Thread)ï¼Œåè€…åˆç§°ä¸ºå†…æ ¸æ”¯æŒçš„çº¿ç¨‹æˆ–è½»é‡çº§è¿›ç¨‹ã€‚åœ¨å¤šçº¿ç¨‹æ“ä½œç³»ç»Ÿä¸­ï¼Œå„ä¸ªç³»ç»Ÿçš„å®ç°æ–¹å¼å¹¶ä¸ç›¸åŒï¼Œåœ¨æœ‰çš„ç³»ç»Ÿä¸­å®ç°äº†ç”¨æˆ·çº§çº¿ç¨‹ï¼Œæœ‰çš„ç³»ç»Ÿä¸­å®ç°äº†å†…æ ¸çº§çº¿ç¨‹ã€‚</p>
<p>ç”¨æˆ·çº§çº¿ç¨‹å†…æ ¸çš„åˆ‡æ¢ç”±ç”¨æˆ·æ€ç¨‹åºè‡ªå·±æ§åˆ¶å†…æ ¸åˆ‡æ¢,ä¸éœ€è¦å†…æ ¸å¹²æ¶‰ï¼Œå°‘äº†è¿›å‡ºå†…æ ¸æ€çš„æ¶ˆè€—ï¼Œä½†ä¸èƒ½å¾ˆå¥½çš„åˆ©ç”¨å¤šæ ¸Cpu,ç›®å‰Linux pthreadå¤§ä½“æ˜¯è¿™ä¹ˆåšçš„ã€‚</p>
<p><img src="https://pic1.zhimg.com/80/v2-4d55e64ce7c111b39a037000248719c0_720w.jpg" alt="img"></p>
<p>åœ¨ç”¨æˆ·ç©ºé—´æ¨¡æ‹Ÿæ“ä½œç³»ç»Ÿå¯¹è¿›ç¨‹çš„è°ƒåº¦ï¼Œæ¥è°ƒç”¨ä¸€ä¸ªè¿›ç¨‹ä¸­çš„çº¿ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªè¿è¡Œæ—¶ç³»ç»Ÿï¼Œç”¨æ¥è°ƒåº¦çº¿ç¨‹ã€‚æ­¤æ—¶å½“è¯¥è¿›ç¨‹è·å–cpuæ—¶ï¼Œè¿›ç¨‹å†…å†è°ƒåº¦å‡ºä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œï¼ŒåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚</p>
<h3 id="ä¹-åœ¨å†…æ ¸ç©ºé—´å®ç°çš„çº¿ç¨‹ï¼ˆäº†è§£ï¼‰"><a href="#ä¹-åœ¨å†…æ ¸ç©ºé—´å®ç°çš„çº¿ç¨‹ï¼ˆäº†è§£ï¼‰" class="headerlink" title="ä¹ åœ¨å†…æ ¸ç©ºé—´å®ç°çš„çº¿ç¨‹ï¼ˆäº†è§£ï¼‰"></a>ä¹ åœ¨å†…æ ¸ç©ºé—´å®ç°çš„çº¿ç¨‹ï¼ˆäº†è§£ï¼‰</h3><p>å†…æ ¸çº§çº¿ç¨‹:åˆ‡æ¢ç”±å†…æ ¸æ§åˆ¶ï¼Œå½“çº¿ç¨‹è¿›è¡Œåˆ‡æ¢çš„æ—¶å€™ï¼Œç”±ç”¨æˆ·æ€è½¬åŒ–ä¸ºå†…æ ¸æ€ã€‚åˆ‡æ¢å®Œæ¯•è¦ä»å†…æ ¸æ€è¿”å›ç”¨æˆ·æ€ï¼›å¯ä»¥å¾ˆå¥½çš„åˆ©ç”¨smpï¼Œå³åˆ©ç”¨å¤šæ ¸cpuã€‚windowsçº¿ç¨‹å°±æ˜¯è¿™æ ·çš„ã€‚</p>
<p><img src="https://pic4.zhimg.com/80/v2-d9b31239c632ccb1f4b3c39679ee5c07_720w.jpg" alt="img"></p>
<h3 id="å-ç”¨æˆ·çº§ä¸å†…æ ¸çº§çº¿ç¨‹çš„å¯¹æ¯”ï¼ˆäº†è§£ï¼‰"><a href="#å-ç”¨æˆ·çº§ä¸å†…æ ¸çº§çº¿ç¨‹çš„å¯¹æ¯”ï¼ˆäº†è§£ï¼‰" class="headerlink" title="å ç”¨æˆ·çº§ä¸å†…æ ¸çº§çº¿ç¨‹çš„å¯¹æ¯”ï¼ˆäº†è§£ï¼‰"></a>å ç”¨æˆ·çº§ä¸å†…æ ¸çº§çº¿ç¨‹çš„å¯¹æ¯”ï¼ˆäº†è§£ï¼‰</h3><p><strong>ä¸€ï¼š ä»¥ä¸‹æ˜¯ç”¨æˆ·çº§çº¿ç¨‹å’Œå†…æ ¸çº§çº¿ç¨‹çš„åŒºåˆ«ï¼š</strong></p>
<ol>
<li>å†…æ ¸æ”¯æŒçº¿ç¨‹æ˜¯OSå†…æ ¸å¯æ„ŸçŸ¥çš„ï¼Œè€Œç”¨æˆ·çº§çº¿ç¨‹æ˜¯OSå†…æ ¸ä¸å¯æ„ŸçŸ¥çš„ã€‚</li>
<li>ç”¨æˆ·çº§çº¿ç¨‹çš„åˆ›å»ºã€æ’¤æ¶ˆå’Œè°ƒåº¦ä¸éœ€è¦OSå†…æ ¸çš„æ”¯æŒï¼Œæ˜¯åœ¨è¯­è¨€ï¼ˆå¦‚Javaï¼‰è¿™ä¸€çº§å¤„ç†çš„ï¼›è€Œå†…æ ¸æ”¯æŒçº¿ç¨‹çš„åˆ›å»ºã€æ’¤æ¶ˆå’Œè°ƒåº¦éƒ½éœ€OSå†…æ ¸æä¾›æ”¯æŒï¼Œè€Œä¸”ä¸è¿›ç¨‹çš„åˆ›å»ºã€æ’¤æ¶ˆå’Œè°ƒåº¦å¤§ä½“æ˜¯ç›¸åŒçš„ã€‚</li>
<li>ç”¨æˆ·çº§çº¿ç¨‹æ‰§è¡Œç³»ç»Ÿè°ƒç”¨æŒ‡ä»¤æ—¶å°†å¯¼è‡´å…¶æ‰€å±è¿›ç¨‹è¢«ä¸­æ–­ï¼Œè€Œå†…æ ¸æ”¯æŒçº¿ç¨‹æ‰§è¡Œç³»ç»Ÿè°ƒç”¨æŒ‡ä»¤æ—¶ï¼Œåªå¯¼è‡´è¯¥çº¿ç¨‹è¢«ä¸­æ–­ã€‚</li>
<li>åœ¨åªæœ‰ç”¨æˆ·çº§çº¿ç¨‹çš„ç³»ç»Ÿå†…ï¼ŒCPUè°ƒåº¦è¿˜æ˜¯ä»¥è¿›ç¨‹ä¸ºå•ä½ï¼Œå¤„äºè¿è¡ŒçŠ¶æ€çš„è¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹ï¼Œç”±ç”¨æˆ·ç¨‹åºæ§åˆ¶çº¿ç¨‹çš„è½®æ¢è¿è¡Œï¼›åœ¨æœ‰å†…æ ¸æ”¯æŒçº¿ç¨‹çš„ç³»ç»Ÿå†…ï¼ŒCPUè°ƒåº¦åˆ™ä»¥çº¿ç¨‹ä¸ºå•ä½ï¼Œç”±OSçš„çº¿ç¨‹è°ƒåº¦ç¨‹åºè´Ÿè´£çº¿ç¨‹çš„è°ƒåº¦ã€‚</li>
<li>ç”¨æˆ·çº§çº¿ç¨‹çš„ç¨‹åºå®ä½“æ˜¯è¿è¡Œåœ¨ç”¨æˆ·æ€ä¸‹çš„ç¨‹åºï¼Œè€Œå†…æ ¸æ”¯æŒçº¿ç¨‹çš„ç¨‹åºå®ä½“åˆ™æ˜¯å¯ä»¥è¿è¡Œåœ¨ä»»ä½•çŠ¶æ€ä¸‹çš„ç¨‹åºã€‚</li>
</ol>
<p><strong>äºŒï¼š å†…æ ¸çº¿ç¨‹çš„ä¼˜ç¼ºç‚¹</strong></p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li>å½“æœ‰å¤šä¸ªå¤„ç†æœºæ—¶ï¼Œä¸€ä¸ªè¿›ç¨‹çš„å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶æ‰§è¡Œã€‚</li>
</ol>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ol>
<li>ç”±å†…æ ¸è¿›è¡Œè°ƒåº¦ã€‚</li>
</ol>
<p><strong>ä¸‰ï¼š ç”¨æˆ·è¿›ç¨‹çš„*<em>ä¼˜ç¼ºç‚¹*</em></strong></p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li>çº¿ç¨‹çš„è°ƒåº¦ä¸éœ€è¦å†…æ ¸ç›´æ¥å‚ä¸ï¼Œæ§åˆ¶ç®€å•ã€‚</li>
<li>å¯ä»¥åœ¨ä¸æ”¯æŒçº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­å®ç°ã€‚</li>
<li>åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ã€çº¿ç¨‹åˆ‡æ¢ä»£ä»·ç­‰çº¿ç¨‹ç®¡ç†çš„ä»£ä»·æ¯”å†…æ ¸çº¿ç¨‹å°‘å¾—å¤šã€‚</li>
<li>å…è®¸æ¯ä¸ªè¿›ç¨‹å®šåˆ¶è‡ªå·±çš„è°ƒåº¦ç®—æ³•ï¼Œçº¿ç¨‹ç®¡ç†æ¯”è¾ƒçµæ´»ã€‚</li>
<li>çº¿ç¨‹èƒ½å¤Ÿåˆ©ç”¨çš„è¡¨ç©ºé—´å’Œå †æ ˆç©ºé—´æ¯”å†…æ ¸çº§çº¿ç¨‹å¤šã€‚</li>
<li>åŒä¸€è¿›ç¨‹ä¸­åªèƒ½åŒæ—¶æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡Œï¼Œå¦‚æœæœ‰ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨äº†ç³»ç»Ÿè°ƒç”¨è€Œé˜»å¡ï¼Œé‚£ä¹ˆæ•´ä¸ªè¿›ç¨‹éƒ½ä¼šè¢«æŒ‚èµ·ã€‚å¦å¤–ï¼Œé¡µé¢å¤±æ•ˆä¹Ÿä¼šäº§ç”ŸåŒæ ·çš„é—®é¢˜ã€‚</li>
</ol>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ol>
<li>èµ„æºè°ƒåº¦æŒ‰ç…§è¿›ç¨‹è¿›è¡Œï¼Œå¤šä¸ªå¤„ç†æœºä¸‹ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„çº¿ç¨‹åªèƒ½åœ¨åŒä¸€ä¸ªå¤„ç†æœºä¸‹åˆ†æ—¶å¤ç”¨</li>
</ol>
<h3 id="åä¸€-æ··åˆå®ç°ï¼ˆäº†è§£ï¼‰"><a href="#åä¸€-æ··åˆå®ç°ï¼ˆäº†è§£ï¼‰" class="headerlink" title="åä¸€ æ··åˆå®ç°ï¼ˆäº†è§£ï¼‰"></a>åä¸€ æ··åˆå®ç°ï¼ˆäº†è§£ï¼‰</h3><p>ç”¨æˆ·çº§ä¸å†…æ ¸çº§çš„å¤šè·¯å¤ç”¨ï¼Œå†…æ ¸åŒä¸€è°ƒåº¦å†…æ ¸çº¿ç¨‹ï¼Œæ¯ä¸ªå†…æ ¸çº¿ç¨‹å¯¹åº”nä¸ªç”¨æˆ·çº¿ç¨‹</p>
<p><img src="https://pic1.zhimg.com/80/v2-0b049f0e481ee80e53331194d7f2c044_720w.jpg" alt="img"></p>
<h3 id="åäºŒ-çº¿ç¨‹å°æ•…äº‹"><a href="#åäºŒ-çº¿ç¨‹å°æ•…äº‹" class="headerlink" title="åäºŒ çº¿ç¨‹å°æ•…äº‹"></a>åäºŒ çº¿ç¨‹å°æ•…äº‹</h3><p><a href="https://link.zhihu.com/?target=https://mp.weixin.qq.com/s?amp;srcid=0330UDNmQ&mid=403498894&__biz=MjM5NzA1MTcyMA==&idx=2&scene=2&sn=219c1a6001b5bb7e6bdc7963b1af8450">æˆ‘æ˜¯ä¸€ä¸ªçº¿ç¨‹mp.weixin.qq.com&#x2F;s?amp;srcid&#x3D;0330UDNmQ&amp;mid&#x3D;403498894&amp;__biz&#x3D;MjM5NzA1MTcyMA%3D%3D&amp;idx&#x3D;2&amp;scene&#x3D;2&amp;sn&#x3D;219c1a6001b5bb7e6bdc7963b1af8450<img src="https://pic2.zhimg.com/v2-76083704a8583ebe0c3bc264e45cec4d_180x120.jpg" alt="img"></a></p>
<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=141">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=141<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>36-å¹¶å‘ç¼–ç¨‹ï¼ˆäº”ï¼‰</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/36_python%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B%EF%BC%88%E6%93%8D%E4%BD%9C%E7%AF%87%EF%BC%89/</url>
    <content><![CDATA[<h3 id="ä¸€-threadingæ¨¡å—ä»‹ç»"><a href="#ä¸€-threadingæ¨¡å—ä»‹ç»" class="headerlink" title="ä¸€ threadingæ¨¡å—ä»‹ç»"></a>ä¸€ threadingæ¨¡å—ä»‹ç»</h3><p>multiprocessæ¨¡å—çš„å®Œå…¨æ¨¡ä»¿äº†threadingæ¨¡å—çš„æ¥å£ï¼ŒäºŒè€…åœ¨ä½¿ç”¨å±‚é¢ï¼Œæœ‰å¾ˆå¤§çš„ç›¸ä¼¼æ€§ï¼Œå› è€Œä¸å†è¯¦ç»†ä»‹ç»</p>
<p><a href="https://link.zhihu.com/?target=https://docs.python.org/3/library/threading.html?highlight=threading%23">å®˜ç½‘é“¾æ¥ï¼šhttps://docs.python.org/3/library/threading.html?highlight=threading#</a></p>
<h3 id="äºŒ-å¼€å¯çº¿ç¨‹çš„ä¸¤ç§æ–¹å¼"><a href="#äºŒ-å¼€å¯çº¿ç¨‹çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="äºŒ å¼€å¯çº¿ç¨‹çš„ä¸¤ç§æ–¹å¼"></a>äºŒ å¼€å¯çº¿ç¨‹çš„ä¸¤ç§æ–¹å¼</h3><p>æ–¹å¼ä¸€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ–¹å¼ä¸€</span></span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sayhi</span>(<span class="params">name</span>):</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s say hello&#x27;</span> %name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    t=Thread(target=sayhi,args=(<span class="string">&#x27;egon&#x27;</span>,))</span><br><span class="line">    t.start()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»çº¿ç¨‹&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>æ–¹å¼äºŒ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ–¹å¼äºŒ</span></span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sayhi</span>(<span class="params">Thread</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,name</span>):</span></span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.name=name</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s say hello&#x27;</span> % self.name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    t = Sayhi(<span class="string">&#x27;egon&#x27;</span>)</span><br><span class="line">    t.start()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»çº¿ç¨‹&#x27;</span>)</span><br></pre></td></tr></table></figure>



<p><img src="https://pic3.zhimg.com/80/v2-4f7843543503e3a1836297921f9bb69e_720w.jpg" alt="img"></p>
<h3 id="ä¸‰-åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸‹å¼€å¯å¤šä¸ªçº¿ç¨‹ä¸åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸‹å¼€å¯å¤šä¸ªå­è¿›ç¨‹çš„åŒºåˆ«"><a href="#ä¸‰-åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸‹å¼€å¯å¤šä¸ªçº¿ç¨‹ä¸åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸‹å¼€å¯å¤šä¸ªå­è¿›ç¨‹çš„åŒºåˆ«" class="headerlink" title="ä¸‰ åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸‹å¼€å¯å¤šä¸ªçº¿ç¨‹ä¸åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸‹å¼€å¯å¤šä¸ªå­è¿›ç¨‹çš„åŒºåˆ«"></a>ä¸‰ åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸‹å¼€å¯å¤šä¸ªçº¿ç¨‹ä¸åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸‹å¼€å¯å¤šä¸ªå­è¿›ç¨‹çš„åŒºåˆ«</h3><p>1 è°çš„å¼€å¯é€Ÿåº¦å¿«</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment">#åœ¨ä¸»è¿›ç¨‹ä¸‹å¼€å¯çº¿ç¨‹</span></span><br><span class="line">    t=Thread(target=work)</span><br><span class="line">    t.start()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»çº¿ç¨‹/ä¸»è¿›ç¨‹&#x27;</span>)</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    æ‰“å°ç»“æœ:</span></span><br><span class="line"><span class="string">    hello</span></span><br><span class="line"><span class="string">    ä¸»çº¿ç¨‹/ä¸»è¿›ç¨‹</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#åœ¨ä¸»è¿›ç¨‹ä¸‹å¼€å¯å­è¿›ç¨‹</span></span><br><span class="line">    t=Process(target=work)</span><br><span class="line">    t.start()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»çº¿ç¨‹/ä¸»è¿›ç¨‹&#x27;</span>)</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    æ‰“å°ç»“æœ:</span></span><br><span class="line"><span class="string">    ä¸»çº¿ç¨‹/ä¸»è¿›ç¨‹</span></span><br><span class="line"><span class="string">    hello</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>2 ç…ä¸€ç…pid</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>,os.getpid())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment">#part1:åœ¨ä¸»è¿›ç¨‹ä¸‹å¼€å¯å¤šä¸ªçº¿ç¨‹,æ¯ä¸ªçº¿ç¨‹éƒ½è·Ÿä¸»è¿›ç¨‹çš„pidä¸€æ ·</span></span><br><span class="line">    t1=Thread(target=work)</span><br><span class="line">    t2=Thread(target=work)</span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»çº¿ç¨‹/ä¸»è¿›ç¨‹pid&#x27;</span>,os.getpid())</span><br><span class="line"></span><br><span class="line">    <span class="comment">#part2:å¼€å¤šä¸ªè¿›ç¨‹,æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸åŒçš„pid</span></span><br><span class="line">    p1=Process(target=work)</span><br><span class="line">    p2=Process(target=work)</span><br><span class="line">    p1.start()</span><br><span class="line">    p2.start()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»çº¿ç¨‹/ä¸»è¿›ç¨‹pid&#x27;</span>,os.getpid())</span><br></pre></td></tr></table></figure>

<p>3 åŒä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹å…±äº«è¯¥è¿›ç¨‹çš„æ•°æ®ï¼Ÿ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span>  threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span>():</span></span><br><span class="line">    <span class="keyword">global</span> n</span><br><span class="line">    n=<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># n=100</span></span><br><span class="line">    <span class="comment"># p=Process(target=work)</span></span><br><span class="line">    <span class="comment"># p.start()</span></span><br><span class="line">    <span class="comment"># p.join()</span></span><br><span class="line">    <span class="comment"># print(&#x27;ä¸»&#x27;,n) #æ¯«æ— ç–‘é—®å­è¿›ç¨‹på·²ç»å°†è‡ªå·±çš„å…¨å±€çš„næ”¹æˆäº†0,ä½†æ”¹çš„ä»…ä»…æ˜¯å®ƒè‡ªå·±çš„,æŸ¥çœ‹çˆ¶è¿›ç¨‹çš„nä»ç„¶ä¸º100</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    n=<span class="number">1</span></span><br><span class="line">    t=Thread(target=work)</span><br><span class="line">    t.start()</span><br><span class="line">    t.join()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»&#x27;</span>,n) <span class="comment">#æŸ¥çœ‹ç»“æœä¸º0,å› ä¸ºåŒä¸€è¿›ç¨‹å†…çš„çº¿ç¨‹ä¹‹é—´å…±äº«è¿›ç¨‹å†…çš„æ•°æ®</span></span><br></pre></td></tr></table></figure>

<h3 id="å››-ç»ƒä¹ "><a href="#å››-ç»ƒä¹ " class="headerlink" title="å›› ç»ƒä¹ "></a>å›› ç»ƒä¹ </h3><p>ç»ƒä¹ ä¸€ï¼š</p>
<p>å¤šçº¿ç¨‹å¹¶å‘çš„socketæœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">s.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line">s.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">action</span>(<span class="params">conn</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        data=conn.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="built_in">print</span>(data)</span><br><span class="line">        conn.send(data.upper())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        conn,addr=s.accept()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        p=threading.Thread(target=action,args=(conn,))</span><br><span class="line">        p.start()</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">s.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> msg:<span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    s.send(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    data=s.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="built_in">print</span>(data)</span><br></pre></td></tr></table></figure>

<p>ç»ƒä¹ äºŒï¼šä¸‰ä¸ªä»»åŠ¡ï¼Œä¸€ä¸ªæ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼Œä¸€ä¸ªå°†ç”¨æˆ·è¾“å…¥çš„å†…å®¹æ ¼å¼åŒ–æˆå¤§å†™ï¼Œä¸€ä¸ªå°†æ ¼å¼åŒ–åçš„ç»“æœå­˜å…¥æ–‡ä»¶</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line">msg_l=[]</span><br><span class="line">format_l=[]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">talk</span>():</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        msg=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> msg:<span class="keyword">continue</span></span><br><span class="line">        msg_l.append(msg)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">format_msg</span>():</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> msg_l:</span><br><span class="line">            res=msg_l.pop()</span><br><span class="line">            format_l.append(res.upper())</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save</span>():</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> format_l:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;db.txt&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                res=format_l.pop()</span><br><span class="line">                f.write(<span class="string">&#x27;%s\n&#x27;</span> %res)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    t1=Thread(target=talk)</span><br><span class="line">    t2=Thread(target=format_msg)</span><br><span class="line">    t3=Thread(target=save)</span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line">    t3.start()</span><br></pre></td></tr></table></figure>

<h3 id="äº”-çº¿ç¨‹ç›¸å…³çš„å…¶ä»–æ–¹æ³•"><a href="#äº”-çº¿ç¨‹ç›¸å…³çš„å…¶ä»–æ–¹æ³•" class="headerlink" title="äº” çº¿ç¨‹ç›¸å…³çš„å…¶ä»–æ–¹æ³•"></a>äº” çº¿ç¨‹ç›¸å…³çš„å…¶ä»–æ–¹æ³•</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Threadå®ä¾‹å¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">  <span class="comment"># isAlive(): è¿”å›çº¿ç¨‹æ˜¯å¦æ´»åŠ¨çš„ã€‚</span></span><br><span class="line">  <span class="comment"># getName(): è¿”å›çº¿ç¨‹åã€‚</span></span><br><span class="line">  <span class="comment"># setName(): è®¾ç½®çº¿ç¨‹åã€‚</span></span><br><span class="line"></span><br><span class="line">threadingæ¨¡å—æä¾›çš„ä¸€äº›æ–¹æ³•ï¼š</span><br><span class="line">  <span class="comment"># threading.currentThread(): è¿”å›å½“å‰çš„çº¿ç¨‹å˜é‡ã€‚</span></span><br><span class="line">  <span class="comment"># threading.enumerate(): è¿”å›ä¸€ä¸ªåŒ…å«æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹çš„listã€‚æ­£åœ¨è¿è¡ŒæŒ‡çº¿ç¨‹å¯åŠ¨åã€ç»“æŸå‰ï¼Œä¸åŒ…æ‹¬å¯åŠ¨å‰å’Œç»ˆæ­¢åçš„çº¿ç¨‹ã€‚</span></span><br><span class="line">  <span class="comment"># threading.activeCount(): è¿”å›æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹æ•°é‡ï¼Œä¸len(threading.enumerate())æœ‰ç›¸åŒçš„ç»“æœã€‚</span></span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span>():</span></span><br><span class="line">    <span class="keyword">import</span> time</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(threading.current_thread().getName())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment">#åœ¨ä¸»è¿›ç¨‹ä¸‹å¼€å¯çº¿ç¨‹</span></span><br><span class="line">    t=Thread(target=work)</span><br><span class="line">    t.start()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(threading.current_thread().getName())</span><br><span class="line">    <span class="built_in">print</span>(threading.current_thread()) <span class="comment">#ä¸»çº¿ç¨‹</span></span><br><span class="line">    <span class="built_in">print</span>(threading.<span class="built_in">enumerate</span>()) <span class="comment">#è¿åŒä¸»çº¿ç¨‹åœ¨å†…æœ‰ä¸¤ä¸ªè¿è¡Œçš„çº¿ç¨‹</span></span><br><span class="line">    <span class="built_in">print</span>(threading.active_count())</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»çº¿ç¨‹/ä¸»è¿›ç¨‹&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    æ‰“å°ç»“æœ:</span></span><br><span class="line"><span class="string">    MainThread</span></span><br><span class="line"><span class="string">    &lt;_MainThread(MainThread, started 140735268892672)&gt;</span></span><br><span class="line"><span class="string">    [&lt;_MainThread(MainThread, started 140735268892672)&gt;, &lt;Thread(Thread-1, started 123145307557888)&gt;]</span></span><br><span class="line"><span class="string">    ä¸»çº¿ç¨‹/ä¸»è¿›ç¨‹</span></span><br><span class="line"><span class="string">    Thread-1</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹ç»“æŸ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sayhi</span>(<span class="params">name</span>):</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s say hello&#x27;</span> %name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    t=Thread(target=sayhi,args=(<span class="string">&#x27;egon&#x27;</span>,))</span><br><span class="line">    t.start()</span><br><span class="line">    t.join()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»çº¿ç¨‹&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(t.is_alive())</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    egon say hello</span></span><br><span class="line"><span class="string">    ä¸»çº¿ç¨‹</span></span><br><span class="line"><span class="string">    False</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="å…­-å®ˆæŠ¤çº¿ç¨‹"><a href="#å…­-å®ˆæŠ¤çº¿ç¨‹" class="headerlink" title="å…­ å®ˆæŠ¤çº¿ç¨‹"></a>å…­ å®ˆæŠ¤çº¿ç¨‹</h3><p><strong>æ— è®ºæ˜¯è¿›ç¨‹è¿˜æ˜¯çº¿ç¨‹ï¼Œéƒ½éµå¾ªï¼šå®ˆæŠ¤xxxä¼šç­‰å¾…ä¸»xxxè¿è¡Œå®Œæ¯•åè¢«é”€æ¯</strong></p>
<p><strong>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼šè¿è¡Œå®Œæ¯•å¹¶éç»ˆæ­¢è¿è¡Œ</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1.å¯¹ä¸»è¿›ç¨‹æ¥è¯´ï¼Œè¿è¡Œå®Œæ¯•æŒ‡çš„æ˜¯ä¸»è¿›ç¨‹ä»£ç è¿è¡Œå®Œæ¯•</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2.å¯¹ä¸»çº¿ç¨‹æ¥è¯´ï¼Œè¿è¡Œå®Œæ¯•æŒ‡çš„æ˜¯ä¸»çº¿ç¨‹æ‰€åœ¨çš„è¿›ç¨‹å†…æ‰€æœ‰éå®ˆæŠ¤çº¿ç¨‹ç»Ÿç»Ÿè¿è¡Œå®Œæ¯•ï¼Œä¸»çº¿ç¨‹æ‰ç®—è¿è¡Œå®Œæ¯•</span></span><br></pre></td></tr></table></figure>

<p><strong>è¯¦ç»†è§£é‡Šï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1 ä¸»è¿›ç¨‹åœ¨å…¶ä»£ç ç»“æŸåå°±å·²ç»ç®—è¿è¡Œå®Œæ¯•äº†ï¼ˆå®ˆæŠ¤è¿›ç¨‹åœ¨æ­¤æ—¶å°±è¢«å›æ”¶ï¼‰,ç„¶åä¸»è¿›ç¨‹ä¼šä¸€ç›´ç­‰éå®ˆæŠ¤çš„å­è¿›ç¨‹éƒ½è¿è¡Œå®Œæ¯•åå›æ”¶å­è¿›ç¨‹çš„èµ„æº(å¦åˆ™ä¼šäº§ç”Ÿåƒµå°¸è¿›ç¨‹)ï¼Œæ‰ä¼šç»“æŸï¼Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2 ä¸»çº¿ç¨‹åœ¨å…¶ä»–éå®ˆæŠ¤çº¿ç¨‹è¿è¡Œå®Œæ¯•åæ‰ç®—è¿è¡Œå®Œæ¯•ï¼ˆå®ˆæŠ¤çº¿ç¨‹åœ¨æ­¤æ—¶å°±è¢«å›æ”¶ï¼‰ã€‚å› ä¸ºä¸»çº¿ç¨‹çš„ç»“æŸæ„å‘³ç€è¿›ç¨‹çš„ç»“æŸï¼Œè¿›ç¨‹æ•´ä½“çš„èµ„æºéƒ½å°†è¢«å›æ”¶ï¼Œè€Œè¿›ç¨‹å¿…é¡»ä¿è¯éå®ˆæŠ¤çº¿ç¨‹éƒ½è¿è¡Œå®Œæ¯•åæ‰èƒ½ç»“æŸã€‚</span></span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sayhi</span>(<span class="params">name</span>):</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s say hello&#x27;</span> %name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    t=Thread(target=sayhi,args=(<span class="string">&#x27;egon&#x27;</span>,))</span><br><span class="line">    t.setDaemon(<span class="literal">True</span>) <span class="comment">#å¿…é¡»åœ¨t.start()ä¹‹å‰è®¾ç½®</span></span><br><span class="line">    t.start()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»çº¿ç¨‹&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(t.is_alive())</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    ä¸»çº¿ç¨‹</span></span><br><span class="line"><span class="string">    True</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>è¿·æƒ‘äººçš„ä¾‹å­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">123</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;end123&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="number">456</span>)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;end456&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">t1=Thread(target=foo)</span><br><span class="line">t2=Thread(target=bar)</span><br><span class="line"></span><br><span class="line">t1.daemon=<span class="literal">True</span></span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;main-------&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="ä¸ƒ-Python-GIL-Global-Interpreter-Lock"><a href="#ä¸ƒ-Python-GIL-Global-Interpreter-Lock" class="headerlink" title="ä¸ƒ Python GIL(Global Interpreter Lock)"></a>ä¸ƒ Python GIL(Global Interpreter Lock)</h3><p><strong><a href="https://link.zhihu.com/?target=http://www.cnblogs.com/linhaifeng/articles/7449853.html">é“¾æ¥ï¼šhttp://www.cnblogs.com/linhaifeng/articles/7449853.html</a></strong></p>
<h3 id="å…«-åŒæ­¥é”"><a href="#å…«-åŒæ­¥é”" class="headerlink" title="å…« åŒæ­¥é”"></a>å…« åŒæ­¥é”</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ä¸‰ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š</span><br><span class="line"><span class="comment">#1.çº¿ç¨‹æŠ¢çš„æ˜¯GILé”ï¼ŒGILé”ç›¸å½“äºæ‰§è¡Œæƒé™ï¼Œæ‹¿åˆ°æ‰§è¡Œæƒé™åæ‰èƒ½æ‹¿åˆ°äº’æ–¥é”Lockï¼Œå…¶ä»–çº¿ç¨‹ä¹Ÿå¯ä»¥æŠ¢åˆ°GILï¼Œä½†å¦‚æœå‘ç°Lockä»ç„¶æ²¡æœ‰è¢«é‡Šæ”¾åˆ™é˜»å¡ï¼Œå³ä¾¿æ˜¯æ‹¿åˆ°æ‰§è¡Œæƒé™GILä¹Ÿè¦ç«‹åˆ»äº¤å‡ºæ¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2.joinæ˜¯ç­‰å¾…æ‰€æœ‰ï¼Œå³æ•´ä½“ä¸²è¡Œï¼Œè€Œé”åªæ˜¯é”ä½ä¿®æ”¹å…±äº«æ•°æ®çš„éƒ¨åˆ†ï¼Œå³éƒ¨åˆ†ä¸²è¡Œï¼Œè¦æƒ³ä¿è¯æ•°æ®å®‰å…¨çš„æ ¹æœ¬åŸç†åœ¨äºè®©å¹¶å‘å˜æˆä¸²è¡Œï¼Œjoinä¸äº’æ–¥é”éƒ½å¯ä»¥å®ç°ï¼Œæ¯«æ— ç–‘é—®ï¼Œäº’æ–¥é”çš„éƒ¨åˆ†ä¸²è¡Œæ•ˆç‡è¦æ›´é«˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3. ä¸€å®šè¦çœ‹æœ¬å°èŠ‚æœ€åçš„GILä¸äº’æ–¥é”çš„ç»å…¸åˆ†æ</span></span><br></pre></td></tr></table></figure>

<p><strong>GIL VS Lock</strong></p>
<p><strong>æœºæ™ºçš„åŒå­¦å¯èƒ½ä¼šé—®åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ—¢ç„¶ä½ ä¹‹å‰è¯´è¿‡äº†ï¼ŒPythonå·²ç»æœ‰ä¸€ä¸ªGILæ¥ä¿è¯åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œäº†ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œè¿˜éœ€è¦lock?</strong></p>
<p><strong>é¦–å…ˆæˆ‘ä»¬éœ€è¦è¾¾æˆå…±è¯†ï¼šé”çš„ç›®çš„æ˜¯ä¸ºäº†ä¿æŠ¤å…±äº«çš„æ•°æ®ï¼ŒåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ¥ä¿®æ”¹å…±äº«çš„æ•°æ®</strong></p>
<p><strong>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼šä¿æŠ¤ä¸åŒçš„æ•°æ®å°±åº”è¯¥åŠ ä¸åŒçš„é”ã€‚</strong></p>
<p><strong>æœ€åï¼Œé—®é¢˜å°±å¾ˆæ˜æœ—äº†ï¼ŒGIL ä¸Lockæ˜¯ä¸¤æŠŠé”ï¼Œä¿æŠ¤çš„æ•°æ®ä¸ä¸€æ ·ï¼Œå‰è€…æ˜¯è§£é‡Šå™¨çº§åˆ«çš„ï¼ˆå½“ç„¶ä¿æŠ¤çš„å°±æ˜¯è§£é‡Šå™¨çº§åˆ«çš„æ•°æ®ï¼Œæ¯”å¦‚åƒåœ¾å›æ”¶çš„æ•°æ®ï¼‰ï¼Œåè€…æ˜¯ä¿æŠ¤ç”¨æˆ·è‡ªå·±å¼€å‘çš„åº”ç”¨ç¨‹åºçš„æ•°æ®ï¼Œå¾ˆæ˜æ˜¾GILä¸è´Ÿè´£è¿™ä»¶äº‹ï¼Œåªèƒ½ç”¨æˆ·è‡ªå®šä¹‰åŠ é”å¤„ç†ï¼Œå³Lock</strong></p>
<p><strong>è¿‡ç¨‹åˆ†æï¼šæ‰€æœ‰çº¿ç¨‹æŠ¢çš„æ˜¯GILé”ï¼Œæˆ–è€…è¯´æ‰€æœ‰çº¿ç¨‹æŠ¢çš„æ˜¯æ‰§è¡Œæƒé™</strong></p>
<p><strong>çº¿ç¨‹1æŠ¢åˆ°GILé”ï¼Œæ‹¿åˆ°æ‰§è¡Œæƒé™ï¼Œå¼€å§‹æ‰§è¡Œï¼Œç„¶ååŠ äº†ä¸€æŠŠLockï¼Œè¿˜æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œå³çº¿ç¨‹1è¿˜æœªé‡Šæ”¾Lockï¼Œæœ‰å¯èƒ½çº¿ç¨‹2æŠ¢åˆ°GILé”ï¼Œå¼€å§‹æ‰§è¡Œï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç°Lockè¿˜æ²¡æœ‰è¢«çº¿ç¨‹1é‡Šæ”¾ï¼Œäºæ˜¯çº¿ç¨‹2è¿›å…¥é˜»å¡ï¼Œè¢«å¤ºèµ°æ‰§è¡Œæƒé™ï¼Œæœ‰å¯èƒ½çº¿ç¨‹1æ‹¿åˆ°GILï¼Œç„¶åæ­£å¸¸æ‰§è¡Œåˆ°é‡Šæ”¾Lockã€‚ã€‚ã€‚è¿™å°±å¯¼è‡´äº†ä¸²è¡Œè¿è¡Œçš„æ•ˆæœ</strong></p>
<p><strong>æ—¢ç„¶æ˜¯ä¸²è¡Œï¼Œé‚£æˆ‘ä»¬æ‰§è¡Œ</strong></p>
<p><strong>t1.start()</strong></p>
<p><strong>t1.join</strong></p>
<p><strong>t2.start()</strong></p>
<p><strong>t2.join()</strong></p>
<p><strong>è¿™ä¹Ÿæ˜¯ä¸²è¡Œæ‰§è¡Œå•Šï¼Œä¸ºä½•è¿˜è¦åŠ Lockå‘¢ï¼Œéœ€çŸ¥joinæ˜¯ç­‰å¾…t1æ‰€æœ‰çš„ä»£ç æ‰§è¡Œå®Œï¼Œç›¸å½“äºé”ä½äº†t1çš„æ‰€æœ‰ä»£ç ï¼Œè€ŒLockåªæ˜¯é”ä½ä¸€éƒ¨åˆ†æ“ä½œå…±äº«æ•°æ®çš„ä»£ç ã€‚</strong></p>
<p>è¯¦ç»†</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">å› ä¸ºPythonè§£é‡Šå™¨å¸®ä½ è‡ªåŠ¨å®šæœŸè¿›è¡Œå†…å­˜å›æ”¶ï¼Œä½ å¯ä»¥ç†è§£ä¸ºpythonè§£é‡Šå™¨é‡Œæœ‰ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹ï¼Œæ¯è¿‡ä¸€æ®µæ—¶é—´å®ƒèµ·wake upåšä¸€æ¬¡å…¨å±€è½®è¯¢çœ‹çœ‹å“ªäº›å†…å­˜æ•°æ®æ˜¯å¯ä»¥è¢«æ¸…ç©ºçš„ï¼Œæ­¤æ—¶ä½ è‡ªå·±çš„ç¨‹åº é‡Œçš„çº¿ç¨‹å’Œ pyè§£é‡Šå™¨è‡ªå·±çš„çº¿ç¨‹æ˜¯å¹¶å‘è¿è¡Œçš„ï¼Œå‡è®¾ä½ çš„çº¿ç¨‹åˆ é™¤äº†ä¸€ä¸ªå˜é‡ï¼Œpyè§£é‡Šå™¨çš„åƒåœ¾å›æ”¶çº¿ç¨‹åœ¨æ¸…ç©ºè¿™ä¸ªå˜é‡çš„è¿‡ç¨‹ä¸­çš„clearingæ—¶åˆ»ï¼Œå¯èƒ½ä¸€ä¸ªå…¶å®ƒçº¿ç¨‹æ­£å¥½åˆé‡æ–°ç»™è¿™ä¸ªè¿˜æ²¡æ¥åŠå¾—æ¸…ç©ºçš„å†…å­˜ç©ºé—´èµ‹å€¼äº†ï¼Œç»“æœå°±æœ‰å¯èƒ½æ–°èµ‹å€¼çš„æ•°æ®è¢«åˆ é™¤äº†ï¼Œä¸ºäº†è§£å†³ç±»ä¼¼çš„é—®é¢˜ï¼Œpythonè§£é‡Šå™¨ç®€å•ç²—æš´çš„åŠ äº†é”ï¼Œå³å½“ä¸€ä¸ªçº¿ç¨‹è¿è¡Œæ—¶ï¼Œå…¶å®ƒäººéƒ½ä¸èƒ½åŠ¨ï¼Œè¿™æ ·å°±è§£å†³äº†ä¸Šè¿°çš„é—®é¢˜ï¼Œ  è¿™å¯ä»¥è¯´æ˜¯Pythonæ—©æœŸç‰ˆæœ¬çš„é—ç•™é—®é¢˜ã€‚</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">import</span> os,time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span>():</span></span><br><span class="line">    <span class="keyword">global</span> n</span><br><span class="line">    temp=n</span><br><span class="line">    time.sleep(<span class="number">0.1</span>)</span><br><span class="line">    n=temp-<span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    n=<span class="number">100</span></span><br><span class="line">    l=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        p=Thread(target=work)</span><br><span class="line">        l.append(p)</span><br><span class="line">        p.start()</span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> l:</span><br><span class="line">        p.join()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(n) <span class="comment">#ç»“æœå¯èƒ½ä¸º99</span></span><br></pre></td></tr></table></figure>

<p><strong>é”é€šå¸¸è¢«ç”¨æ¥å®ç°å¯¹å…±äº«èµ„æºçš„åŒæ­¥è®¿é—®ã€‚ä¸ºæ¯ä¸€ä¸ªå…±äº«èµ„æºåˆ›å»ºä¸€ä¸ªLockå¯¹è±¡ï¼Œå½“ä½ éœ€è¦è®¿é—®è¯¥èµ„æºæ—¶ï¼Œè°ƒç”¨acquireæ–¹æ³•æ¥è·å–é”å¯¹è±¡ï¼ˆå¦‚æœå…¶å®ƒçº¿ç¨‹å·²ç»è·å¾—äº†è¯¥é”ï¼Œåˆ™å½“å‰çº¿ç¨‹éœ€ç­‰å¾…å…¶è¢«é‡Šæ”¾ï¼‰ï¼Œå¾…èµ„æºè®¿é—®å®Œåï¼Œå†è°ƒç”¨releaseæ–¹æ³•é‡Šæ”¾é”ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">R=threading.Lock()</span><br><span class="line"></span><br><span class="line">R.acquire()</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">å¯¹å…¬å…±æ•°æ®çš„æ“ä½œ</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">R.release()</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread,Lock</span><br><span class="line"><span class="keyword">import</span> os,time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span>():</span></span><br><span class="line">    <span class="keyword">global</span> n</span><br><span class="line">    lock.acquire()</span><br><span class="line">    temp=n</span><br><span class="line">    time.sleep(<span class="number">0.1</span>)</span><br><span class="line">    n=temp-<span class="number">1</span></span><br><span class="line">    lock.release()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    lock=Lock()</span><br><span class="line">    n=<span class="number">100</span></span><br><span class="line">    l=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        p=Thread(target=work)</span><br><span class="line">        l.append(p)</span><br><span class="line">        p.start()</span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> l:</span><br><span class="line">        p.join()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(n) <span class="comment">#ç»“æœè‚¯å®šä¸º0ï¼Œç”±åŸæ¥çš„å¹¶å‘æ‰§è¡Œå˜æˆä¸²è¡Œï¼Œç‰ºç‰²äº†æ‰§è¡Œæ•ˆç‡ä¿è¯äº†æ•°æ®å®‰å…¨</span></span><br></pre></td></tr></table></figure>

<p>GILé”ä¸äº’æ–¥é”ç»¼åˆåˆ†æï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">åˆ†æï¼š</span><br><span class="line">ã€€ã€€<span class="comment">#1.100ä¸ªçº¿ç¨‹å»æŠ¢GILé”ï¼Œå³æŠ¢æ‰§è¡Œæƒé™</span></span><br><span class="line">     <span class="comment">#2. è‚¯å®šæœ‰ä¸€ä¸ªçº¿ç¨‹å…ˆæŠ¢åˆ°GILï¼ˆæš‚ä¸”ç§°ä¸ºçº¿ç¨‹1ï¼‰ï¼Œç„¶åå¼€å§‹æ‰§è¡Œï¼Œä¸€æ—¦æ‰§è¡Œå°±ä¼šæ‹¿åˆ°lock.acquire()</span></span><br><span class="line">     <span class="comment">#3. ææœ‰å¯èƒ½çº¿ç¨‹1è¿˜æœªè¿è¡Œå®Œæ¯•ï¼Œå°±æœ‰å¦å¤–ä¸€ä¸ªçº¿ç¨‹2æŠ¢åˆ°GILï¼Œç„¶åå¼€å§‹è¿è¡Œï¼Œä½†çº¿ç¨‹2å‘ç°äº’æ–¥é”lockè¿˜æœªè¢«çº¿ç¨‹1é‡Šæ”¾ï¼Œäºæ˜¯é˜»å¡ï¼Œè¢«è¿«äº¤å‡ºæ‰§è¡Œæƒé™ï¼Œå³é‡Šæ”¾GIL</span></span><br><span class="line">    <span class="comment">#4.ç›´åˆ°çº¿ç¨‹1é‡æ–°æŠ¢åˆ°GILï¼Œå¼€å§‹ä»ä¸Šæ¬¡æš‚åœçš„ä½ç½®ç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°æ­£å¸¸é‡Šæ”¾äº’æ–¥é”lockï¼Œç„¶åå…¶ä»–çš„çº¿ç¨‹å†é‡å¤2 3 4çš„è¿‡ç¨‹</span></span><br></pre></td></tr></table></figure>

<p>äº’æ–¥é”ä¸joinçš„åŒºåˆ«ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¸åŠ é”:å¹¶å‘æ‰§è¡Œ,é€Ÿåº¦å¿«,æ•°æ®ä¸å®‰å…¨</span></span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> current_thread,Thread,Lock</span><br><span class="line"><span class="keyword">import</span> os,time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task</span>():</span></span><br><span class="line">    <span class="keyword">global</span> n</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s is running&#x27;</span> %current_thread().getName())</span><br><span class="line">    temp=n</span><br><span class="line">    time.sleep(<span class="number">0.5</span>)</span><br><span class="line">    n=temp-<span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    n=<span class="number">100</span></span><br><span class="line">    lock=Lock()</span><br><span class="line">    threads=[]</span><br><span class="line">    start_time=time.time()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        t=Thread(target=task)</span><br><span class="line">        threads.append(t)</span><br><span class="line">        t.start()</span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> threads:</span><br><span class="line">        t.join()</span><br><span class="line"></span><br><span class="line">    stop_time=time.time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»:%s n:%s&#x27;</span> %(stop_time-start_time,n))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Thread-1 is running</span></span><br><span class="line"><span class="string">Thread-2 is running</span></span><br><span class="line"><span class="string">......</span></span><br><span class="line"><span class="string">Thread-100 is running</span></span><br><span class="line"><span class="string">ä¸»:0.5216062068939209 n:99</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸åŠ é”:æœªåŠ é”éƒ¨åˆ†å¹¶å‘æ‰§è¡Œ,åŠ é”éƒ¨åˆ†ä¸²è¡Œæ‰§è¡Œ,é€Ÿåº¦æ…¢,æ•°æ®å®‰å…¨</span></span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> current_thread,Thread,Lock</span><br><span class="line"><span class="keyword">import</span> os,time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task</span>():</span></span><br><span class="line">    <span class="comment">#æœªåŠ é”çš„ä»£ç å¹¶å‘è¿è¡Œ</span></span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s start to run&#x27;</span> %current_thread().getName())</span><br><span class="line">    <span class="keyword">global</span> n</span><br><span class="line">    <span class="comment">#åŠ é”çš„ä»£ç ä¸²è¡Œè¿è¡Œ</span></span><br><span class="line">    lock.acquire()</span><br><span class="line">    temp=n</span><br><span class="line">    time.sleep(<span class="number">0.5</span>)</span><br><span class="line">    n=temp-<span class="number">1</span></span><br><span class="line">    lock.release()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    n=<span class="number">100</span></span><br><span class="line">    lock=Lock()</span><br><span class="line">    threads=[]</span><br><span class="line">    start_time=time.time()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        t=Thread(target=task)</span><br><span class="line">        threads.append(t)</span><br><span class="line">        t.start()</span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> threads:</span><br><span class="line">        t.join()</span><br><span class="line">    stop_time=time.time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»:%s n:%s&#x27;</span> %(stop_time-start_time,n))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Thread-1 is running</span></span><br><span class="line"><span class="string">Thread-2 is running</span></span><br><span class="line"><span class="string">......</span></span><br><span class="line"><span class="string">Thread-100 is running</span></span><br><span class="line"><span class="string">ä¸»:53.294203758239746 n:0</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æœ‰çš„åŒå­¦å¯èƒ½æœ‰ç–‘é—®:æ—¢ç„¶åŠ é”ä¼šè®©è¿è¡Œå˜æˆä¸²è¡Œ,é‚£ä¹ˆæˆ‘åœ¨startä¹‹åç«‹å³ä½¿ç”¨join,å°±ä¸ç”¨åŠ é”äº†å•Š,ä¹Ÿæ˜¯ä¸²è¡Œçš„æ•ˆæœå•Š</span></span><br><span class="line"><span class="comment">#æ²¡é”™:åœ¨startä¹‹åç«‹åˆ»ä½¿ç”¨jion,è‚¯å®šä¼šå°†100ä¸ªä»»åŠ¡çš„æ‰§è¡Œå˜æˆä¸²è¡Œ,æ¯«æ— ç–‘é—®,æœ€ç»ˆnçš„ç»“æœä¹Ÿè‚¯å®šæ˜¯0,æ˜¯å®‰å…¨çš„,ä½†é—®é¢˜æ˜¯</span></span><br><span class="line"><span class="comment">#startåç«‹å³join:ä»»åŠ¡å†…çš„æ‰€æœ‰ä»£ç éƒ½æ˜¯ä¸²è¡Œæ‰§è¡Œçš„,è€ŒåŠ é”,åªæ˜¯åŠ é”çš„éƒ¨åˆ†å³ä¿®æ”¹å…±äº«æ•°æ®çš„éƒ¨åˆ†æ˜¯ä¸²è¡Œçš„</span></span><br><span class="line"><span class="comment">#å•ä»ä¿è¯æ•°æ®å®‰å…¨æ–¹é¢,äºŒè€…éƒ½å¯ä»¥å®ç°,ä½†å¾ˆæ˜æ˜¾æ˜¯åŠ é”çš„æ•ˆç‡æ›´é«˜.</span></span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> current_thread,Thread,Lock</span><br><span class="line"><span class="keyword">import</span> os,time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task</span>():</span></span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s start to run&#x27;</span> %current_thread().getName())</span><br><span class="line">    <span class="keyword">global</span> n</span><br><span class="line">    temp=n</span><br><span class="line">    time.sleep(<span class="number">0.5</span>)</span><br><span class="line">    n=temp-<span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    n=<span class="number">100</span></span><br><span class="line">    lock=Lock()</span><br><span class="line">    start_time=time.time()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">        t=Thread(target=task)</span><br><span class="line">        t.start()</span><br><span class="line">        t.join()</span><br><span class="line">    stop_time=time.time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ä¸»:%s n:%s&#x27;</span> %(stop_time-start_time,n))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Thread-1 start to run</span></span><br><span class="line"><span class="string">Thread-2 start to run</span></span><br><span class="line"><span class="string">......</span></span><br><span class="line"><span class="string">Thread-100 start to run</span></span><br><span class="line"><span class="string">ä¸»:350.6937336921692 n:0 #è€—æ—¶æ˜¯å¤šä¹ˆçš„ææ€–</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¹-æ­»é”ç°è±¡ä¸é€’å½’é”"><a href="#ä¹-æ­»é”ç°è±¡ä¸é€’å½’é”" class="headerlink" title="ä¹ æ­»é”ç°è±¡ä¸é€’å½’é”"></a>ä¹ æ­»é”ç°è±¡ä¸é€’å½’é”</h3><p>è¿›ç¨‹ä¹Ÿæœ‰æ­»é”ä¸é€’å½’é”ï¼Œåœ¨è¿›ç¨‹é‚£é‡Œå¿˜è®°è¯´äº†ï¼Œæ”¾åˆ°è¿™é‡Œä¸€åˆ‡è¯´äº†é¢</p>
<p>æ‰€è°“æ­»é”ï¼š æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹æˆ–çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚æ­¤æ—¶ç§°ç³»ç»Ÿå¤„äºæ­»é”çŠ¶æ€æˆ–ç³»ç»Ÿäº§ç”Ÿäº†æ­»é”ï¼Œè¿™äº›æ°¸è¿œåœ¨äº’ç›¸ç­‰å¾…çš„è¿›ç¨‹ç§°ä¸ºæ­»é”è¿›ç¨‹ï¼Œå¦‚ä¸‹å°±æ˜¯æ­»é”</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread,Lock</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">mutexA=Lock()</span><br><span class="line">mutexB=Lock()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span>(<span class="params">Thread</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.func1()</span><br><span class="line">        self.func2()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func1</span>(<span class="params">self</span>):</span></span><br><span class="line">        mutexA.acquire()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[41m%s æ‹¿åˆ°Aé”\033[0m&#x27;</span> %self.name)</span><br><span class="line"></span><br><span class="line">        mutexB.acquire()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[42m%s æ‹¿åˆ°Bé”\033[0m&#x27;</span> %self.name)</span><br><span class="line">        mutexB.release()</span><br><span class="line"></span><br><span class="line">        mutexA.release()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func2</span>(<span class="params">self</span>):</span></span><br><span class="line">        mutexB.acquire()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[43m%s æ‹¿åˆ°Bé”\033[0m&#x27;</span> %self.name)</span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">        mutexA.acquire()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\033[44m%s æ‹¿åˆ°Aé”\033[0m&#x27;</span> %self.name)</span><br><span class="line">        mutexA.release()</span><br><span class="line"></span><br><span class="line">        mutexB.release()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        t=MyThread()</span><br><span class="line">        t.start()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">Thread-1 æ‹¿åˆ°Aé”</span></span><br><span class="line"><span class="string">Thread-1 æ‹¿åˆ°Bé”</span></span><br><span class="line"><span class="string">Thread-1 æ‹¿åˆ°Bé”</span></span><br><span class="line"><span class="string">Thread-2 æ‹¿åˆ°Aé”</span></span><br><span class="line"><span class="string">ç„¶åå°±å¡ä½ï¼Œæ­»é”äº†</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ³•ï¼Œé€’å½’é”ï¼Œåœ¨Pythonä¸­ä¸ºäº†æ”¯æŒåœ¨åŒä¸€çº¿ç¨‹ä¸­å¤šæ¬¡è¯·æ±‚åŒä¸€èµ„æºï¼Œpythonæä¾›äº†å¯é‡å…¥é”RLockã€‚</p>
<p>è¿™ä¸ªRLockå†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ªLockå’Œä¸€ä¸ªcounterå˜é‡ï¼Œcounterè®°å½•äº†acquireçš„æ¬¡æ•°ï¼Œä»è€Œä½¿å¾—èµ„æºå¯ä»¥è¢«å¤šæ¬¡requireã€‚ç›´åˆ°ä¸€ä¸ªçº¿ç¨‹æ‰€æœ‰çš„acquireéƒ½è¢«releaseï¼Œå…¶ä»–çš„çº¿ç¨‹æ‰èƒ½è·å¾—èµ„æºã€‚ä¸Šé¢çš„ä¾‹å­å¦‚æœä½¿ç”¨RLockä»£æ›¿Lockï¼Œåˆ™ä¸ä¼šå‘ç”Ÿæ­»é”ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mutexA=mutexB=threading.RLock() <span class="comment">#ä¸€ä¸ªçº¿ç¨‹æ‹¿åˆ°é”ï¼ŒcounteråŠ 1,è¯¥çº¿ç¨‹å†…åˆç¢°åˆ°åŠ é”çš„æƒ…å†µï¼Œåˆ™counterç»§ç»­åŠ 1ï¼Œè¿™æœŸé—´æ‰€æœ‰å…¶ä»–çº¿ç¨‹éƒ½åªèƒ½ç­‰å¾…ï¼Œç­‰å¾…è¯¥çº¿ç¨‹é‡Šæ”¾æ‰€æœ‰é”ï¼Œå³counteré€’å‡åˆ°0ä¸ºæ­¢</span></span><br></pre></td></tr></table></figure>

<h3 id="å-ä¿¡å·é‡Semaphore"><a href="#å-ä¿¡å·é‡Semaphore" class="headerlink" title="å ä¿¡å·é‡Semaphore"></a>å ä¿¡å·é‡Semaphore</h3><p>åŒè¿›ç¨‹çš„ä¸€æ ·</p>
<p>Semaphoreç®¡ç†ä¸€ä¸ªå†…ç½®çš„è®¡æ•°å™¨ï¼Œ æ¯å½“è°ƒç”¨acquire()æ—¶å†…ç½®è®¡æ•°å™¨-1ï¼› è°ƒç”¨release() æ—¶å†…ç½®è®¡æ•°å™¨+1ï¼› è®¡æ•°å™¨ä¸èƒ½å°äº0ï¼›å½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œacquire()å°†é˜»å¡çº¿ç¨‹ç›´åˆ°å…¶ä»–çº¿ç¨‹è°ƒç”¨release()ã€‚</p>
<p>å®ä¾‹ï¼š(åŒæ—¶åªæœ‰5ä¸ªçº¿ç¨‹å¯ä»¥è·å¾—semaphore,å³å¯ä»¥é™åˆ¶æœ€å¤§è¿æ¥æ•°ä¸º5)ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread,Semaphore</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># def func():</span></span><br><span class="line"><span class="comment">#     if sm.acquire():</span></span><br><span class="line"><span class="comment">#         print (threading.currentThread().getName() + &#x27; get semaphore&#x27;)</span></span><br><span class="line"><span class="comment">#         time.sleep(2)</span></span><br><span class="line"><span class="comment">#         sm.release()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>():</span></span><br><span class="line">    sm.acquire()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s get sm&#x27;</span> %threading.current_thread().getName())</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    sm.release()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    sm=Semaphore(<span class="number">5</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">23</span>):</span><br><span class="line">        t=Thread(target=func)</span><br><span class="line">        t.start()</span><br></pre></td></tr></table></figure>

<p><strong>ä¸è¿›ç¨‹æ± æ˜¯å®Œå…¨ä¸åŒçš„æ¦‚å¿µï¼Œè¿›ç¨‹æ± Pool(4)ï¼Œæœ€å¤§åªèƒ½äº§ç”Ÿ4ä¸ªè¿›ç¨‹ï¼Œè€Œä¸”ä»å¤´åˆ°å°¾éƒ½åªæ˜¯è¿™å››ä¸ªè¿›ç¨‹ï¼Œä¸ä¼šäº§ç”Ÿæ–°çš„ï¼Œè€Œä¿¡å·é‡æ˜¯äº§ç”Ÿä¸€å †çº¿ç¨‹&#x2F;è¿›ç¨‹</strong></p>
<p><a href="https://link.zhihu.com/?target=http://url.cn/5DMsS9r">äº’æ–¥é”ä¸ä¿¡å·é‡æ¨èåšå®¢ï¼šhttp://url.cn/5DMsS9r</a></p>
<h3 id="åä¸€-Event"><a href="#åä¸€-Event" class="headerlink" title="åä¸€ Event"></a>åä¸€ Event</h3><p>åŒè¿›ç¨‹çš„ä¸€æ ·</p>
<p>çº¿ç¨‹çš„ä¸€ä¸ªå…³é”®ç‰¹æ€§æ˜¯æ¯ä¸ªçº¿ç¨‹éƒ½æ˜¯ç‹¬ç«‹è¿è¡Œä¸”çŠ¶æ€ä¸å¯é¢„æµ‹ã€‚å¦‚æœç¨‹åºä¸­çš„å…¶ ä»–çº¿ç¨‹éœ€è¦é€šè¿‡åˆ¤æ–­æŸä¸ªçº¿ç¨‹çš„çŠ¶æ€æ¥ç¡®å®šè‡ªå·±ä¸‹ä¸€æ­¥çš„æ“ä½œ,è¿™æ—¶çº¿ç¨‹åŒæ­¥é—®é¢˜å°±ä¼šå˜å¾—éå¸¸æ£˜æ‰‹ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜,æˆ‘ä»¬éœ€è¦ä½¿ç”¨threadingåº“ä¸­çš„Eventå¯¹è±¡ã€‚ å¯¹è±¡åŒ…å«ä¸€ä¸ªå¯ç”±çº¿ç¨‹è®¾ç½®çš„ä¿¡å·æ ‡å¿—,å®ƒå…è®¸çº¿ç¨‹ç­‰å¾…æŸäº›äº‹ä»¶çš„å‘ç”Ÿã€‚åœ¨ åˆå§‹æƒ…å†µä¸‹,Eventå¯¹è±¡ä¸­çš„ä¿¡å·æ ‡å¿—è¢«è®¾ç½®ä¸ºå‡ã€‚å¦‚æœæœ‰çº¿ç¨‹ç­‰å¾…ä¸€ä¸ªEventå¯¹è±¡, è€Œè¿™ä¸ªEventå¯¹è±¡çš„æ ‡å¿—ä¸ºå‡,é‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°†ä¼šè¢«ä¸€ç›´é˜»å¡ç›´è‡³è¯¥æ ‡å¿—ä¸ºçœŸã€‚ä¸€ä¸ªçº¿ç¨‹å¦‚æœå°†ä¸€ä¸ªEventå¯¹è±¡çš„ä¿¡å·æ ‡å¿—è®¾ç½®ä¸ºçœŸ,å®ƒå°†å”¤é†’æ‰€æœ‰ç­‰å¾…è¿™ä¸ªEventå¯¹è±¡çš„çº¿ç¨‹ã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹ç­‰å¾…ä¸€ä¸ªå·²ç»è¢«è®¾ç½®ä¸ºçœŸçš„Eventå¯¹è±¡,é‚£ä¹ˆå®ƒå°†å¿½ç•¥è¿™ä¸ªäº‹ä»¶, ç»§ç»­æ‰§è¡Œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">event.isSet()ï¼šè¿”å›eventçš„çŠ¶æ€å€¼ï¼›</span><br><span class="line"></span><br><span class="line">event.wait()ï¼šå¦‚æœ event.isSet()==<span class="literal">False</span>å°†é˜»å¡çº¿ç¨‹ï¼›</span><br><span class="line"></span><br><span class="line">event.<span class="built_in">set</span>()ï¼š è®¾ç½®eventçš„çŠ¶æ€å€¼ä¸º<span class="literal">True</span>ï¼Œæ‰€æœ‰é˜»å¡æ± çš„çº¿ç¨‹æ¿€æ´»è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œ ç­‰å¾…æ“ä½œç³»ç»Ÿè°ƒåº¦ï¼›</span><br><span class="line"></span><br><span class="line">event.clear()ï¼šæ¢å¤eventçš„çŠ¶æ€å€¼ä¸º<span class="literal">False</span>ã€‚</span><br></pre></td></tr></table></figure>



<p><img src="https://pic4.zhimg.com/80/v2-9da62d0885d8f90d6d2959bd720feddb_720w.jpg" alt="img"></p>
<p>ä¾‹å¦‚ï¼Œæœ‰å¤šä¸ªå·¥ä½œçº¿ç¨‹å°è¯•é“¾æ¥MySQLï¼Œæˆ‘ä»¬æƒ³è¦åœ¨é“¾æ¥å‰ç¡®ä¿MySQLæœåŠ¡æ­£å¸¸æ‰è®©é‚£äº›å·¥ä½œçº¿ç¨‹å»è¿æ¥MySQLæœåŠ¡å™¨ï¼Œå¦‚æœè¿æ¥ä¸æˆåŠŸï¼Œéƒ½ä¼šå»å°è¯•é‡æ–°è¿æ¥ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨threading.Eventæœºåˆ¶æ¥åè°ƒå„ä¸ªå·¥ä½œçº¿ç¨‹çš„è¿æ¥æ“ä½œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread,Event</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time,random</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conn_mysql</span>():</span></span><br><span class="line">    count=<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">not</span> event.is_set():</span><br><span class="line">        <span class="keyword">if</span> count &gt; <span class="number">3</span>:</span><br><span class="line">            <span class="keyword">raise</span> TimeoutError(<span class="string">&#x27;é“¾æ¥è¶…æ—¶&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;&lt;%s&gt;ç¬¬%sæ¬¡å°è¯•é“¾æ¥&#x27;</span> % (threading.current_thread().getName(), count))</span><br><span class="line">        event.wait(<span class="number">0.5</span>)</span><br><span class="line">        count+=<span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&lt;%s&gt;é“¾æ¥æˆåŠŸ&#x27;</span> %threading.current_thread().getName())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_mysql</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;\033[45m[%s]æ­£åœ¨æ£€æŸ¥mysql\033[0m&#x27;</span> % threading.current_thread().getName())</span><br><span class="line">    time.sleep(random.randint(<span class="number">2</span>,<span class="number">4</span>))</span><br><span class="line">    event.<span class="built_in">set</span>()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    event=Event()</span><br><span class="line">    conn1=Thread(target=conn_mysql)</span><br><span class="line">    conn2=Thread(target=conn_mysql)</span><br><span class="line">    check=Thread(target=check_mysql)</span><br><span class="line"></span><br><span class="line">    conn1.start()</span><br><span class="line">    conn2.start()</span><br><span class="line">    check.start()</span><br></pre></td></tr></table></figure>

<h3 id="åäºŒ-æ¡ä»¶Conditionï¼ˆäº†è§£ï¼‰"><a href="#åäºŒ-æ¡ä»¶Conditionï¼ˆäº†è§£ï¼‰" class="headerlink" title="åäºŒ æ¡ä»¶Conditionï¼ˆäº†è§£ï¼‰"></a>åäºŒ æ¡ä»¶Conditionï¼ˆäº†è§£ï¼‰</h3><p>ä½¿å¾—çº¿ç¨‹ç­‰å¾…ï¼Œåªæœ‰æ»¡è¶³æŸæ¡ä»¶æ—¶ï¼Œæ‰é‡Šæ”¾nä¸ªçº¿ç¨‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">n</span>):</span></span><br><span class="line">    con.acquire()</span><br><span class="line">    con.wait()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;run the thread: %s&quot;</span> %n)</span><br><span class="line">    con.release()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    con = threading.Condition()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        t = threading.Thread(target=run, args=(i,))</span><br><span class="line">        t.start()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        inp = <span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;&gt;&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> inp == <span class="string">&#x27;q&#x27;</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        con.acquire()</span><br><span class="line">        con.notify(<span class="built_in">int</span>(inp))</span><br><span class="line">        con.release()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">condition_func</span>():</span></span><br><span class="line"></span><br><span class="line">    ret = <span class="literal">False</span></span><br><span class="line">    inp = <span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;&gt;&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> inp == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">        ret = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ret</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span>(<span class="params">n</span>):</span></span><br><span class="line">    con.acquire()</span><br><span class="line">    con.wait_for(condition_func)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;run the thread: %s&quot;</span> %n)</span><br><span class="line">    con.release()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    con = threading.Condition()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        t = threading.Thread(target=run, args=(i,))</span><br><span class="line">        t.start()</span><br></pre></td></tr></table></figure>

<h3 id="åä¸‰-å®šæ—¶å™¨"><a href="#åä¸‰-å®šæ—¶å™¨" class="headerlink" title="åä¸‰ å®šæ—¶å™¨"></a>åä¸‰ å®šæ—¶å™¨</h3><p><strong>å®šæ—¶å™¨ï¼ŒæŒ‡å®šnç§’åæ‰§è¡ŒæŸæ“ä½œ</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Timer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;hello, world&quot;</span>)</span><br><span class="line"></span><br><span class="line">t = Timer(<span class="number">1</span>, hello)</span><br><span class="line">t.start()  <span class="comment"># after 1 seconds, &quot;hello, world&quot; will be printed</span></span><br></pre></td></tr></table></figure>

<p>éªŒè¯ç å®šæ—¶å™¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Timer</span><br><span class="line"><span class="keyword">import</span> random,time</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Code</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.make_cache()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">make_cache</span>(<span class="params">self,interval=<span class="number">5</span></span>):</span></span><br><span class="line">        self.cache=self.make_code()</span><br><span class="line">        <span class="built_in">print</span>(self.cache)</span><br><span class="line">        self.t=Timer(interval,self.make_cache)</span><br><span class="line">        self.t.start()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">make_code</span>(<span class="params">self,n=<span class="number">4</span></span>):</span></span><br><span class="line">        res=<span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            s1=<span class="built_in">str</span>(random.randint(<span class="number">0</span>,<span class="number">9</span>))</span><br><span class="line">            s2=<span class="built_in">chr</span>(random.randint(<span class="number">65</span>,<span class="number">90</span>))</span><br><span class="line">            res+=random.choice([s1,s2])</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">check</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            inp=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">            <span class="keyword">if</span> inp.upper() ==  self.cache:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;éªŒè¯æˆåŠŸ&#x27;</span>,end=<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">                self.t.cancel()</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    obj=Code()</span><br><span class="line">    obj.check()</span><br></pre></td></tr></table></figure>

<h3 id="åå››-çº¿ç¨‹queue"><a href="#åå››-çº¿ç¨‹queue" class="headerlink" title="åå›› çº¿ç¨‹queue"></a>åå›› çº¿ç¨‹queue</h3><p>queueé˜Ÿåˆ— ï¼šä½¿ç”¨import queueï¼Œç”¨æ³•ä¸è¿›ç¨‹Queueä¸€æ ·</p>
<p>queue is especially useful in threaded programming when information must be exchanged safely between multiple threads.</p>
<ul>
<li>*<strong>class* <code>queue.``Queue</code>(*maxsize&#x3D;0*) #å…ˆè¿›å…ˆå‡º</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"></span><br><span class="line">q=queue.Queue()</span><br><span class="line">q.put(<span class="string">&#x27;first&#x27;</span>)</span><br><span class="line">q.put(<span class="string">&#x27;second&#x27;</span>)</span><br><span class="line">q.put(<span class="string">&#x27;third&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(q.get())</span><br><span class="line"><span class="built_in">print</span>(q.get())</span><br><span class="line"><span class="built_in">print</span>(q.get())</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">ç»“æœ(å…ˆè¿›å…ˆå‡º):</span></span><br><span class="line"><span class="string">first</span></span><br><span class="line"><span class="string">second</span></span><br><span class="line"><span class="string">third</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>*<strong>class* <code>queue.``LifoQueue</code>(*maxsize&#x3D;0*) #last in fisrt out</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"></span><br><span class="line">q=queue.LifoQueue()</span><br><span class="line">q.put(<span class="string">&#x27;first&#x27;</span>)</span><br><span class="line">q.put(<span class="string">&#x27;second&#x27;</span>)</span><br><span class="line">q.put(<span class="string">&#x27;third&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(q.get())</span><br><span class="line"><span class="built_in">print</span>(q.get())</span><br><span class="line"><span class="built_in">print</span>(q.get())</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">ç»“æœ(åè¿›å…ˆå‡º):</span></span><br><span class="line"><span class="string">third</span></span><br><span class="line"><span class="string">second</span></span><br><span class="line"><span class="string">first</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>*<strong>class* <code>queue.``PriorityQueue</code>(*maxsize&#x3D;0*) #å­˜å‚¨æ•°æ®æ—¶å¯è®¾ç½®ä¼˜å…ˆçº§çš„é˜Ÿåˆ—</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"></span><br><span class="line">q=queue.PriorityQueue()</span><br><span class="line"><span class="comment">#putè¿›å…¥ä¸€ä¸ªå…ƒç»„,å…ƒç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ä¼˜å…ˆçº§(é€šå¸¸æ˜¯æ•°å­—,ä¹Ÿå¯ä»¥æ˜¯éæ•°å­—ä¹‹é—´çš„æ¯”è¾ƒ),æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</span></span><br><span class="line">q.put((<span class="number">20</span>,<span class="string">&#x27;a&#x27;</span>))</span><br><span class="line">q.put((<span class="number">10</span>,<span class="string">&#x27;b&#x27;</span>))</span><br><span class="line">q.put((<span class="number">30</span>,<span class="string">&#x27;c&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(q.get())</span><br><span class="line"><span class="built_in">print</span>(q.get())</span><br><span class="line"><span class="built_in">print</span>(q.get())</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">ç»“æœ(æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜,ä¼˜å…ˆçº§é«˜çš„ä¼˜å…ˆå‡ºé˜Ÿ):</span></span><br><span class="line"><span class="string">(10, &#x27;b&#x27;)</span></span><br><span class="line"><span class="string">(20, &#x27;a&#x27;)</span></span><br><span class="line"><span class="string">(30, &#x27;c&#x27;)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong><code>å…¶ä»–</code></strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Constructor <span class="keyword">for</span> a priority queue. maxsize <span class="keyword">is</span> an integer that sets the upperbound limit on the number of items that can be placed <span class="keyword">in</span> the queue. Insertion will block once this size has been reached, until queue items are consumed. If maxsize <span class="keyword">is</span> less than <span class="keyword">or</span> equal to zero, the queue size <span class="keyword">is</span> infinite.</span><br><span class="line"></span><br><span class="line">The lowest valued entries are retrieved first (the lowest valued entry <span class="keyword">is</span> the one returned by <span class="built_in">sorted</span>(<span class="built_in">list</span>(entries))[<span class="number">0</span>]). A typical pattern <span class="keyword">for</span> entries <span class="keyword">is</span> a <span class="built_in">tuple</span> <span class="keyword">in</span> the form: (priority_number, data).</span><br><span class="line"></span><br><span class="line">exception queue.Empty</span><br><span class="line">Exception raised when non-blocking get() (<span class="keyword">or</span> get_nowait()) <span class="keyword">is</span> called on a Queue <span class="built_in">object</span> which <span class="keyword">is</span> empty.</span><br><span class="line"></span><br><span class="line">exception queue.Full</span><br><span class="line">Exception raised when non-blocking put() (<span class="keyword">or</span> put_nowait()) <span class="keyword">is</span> called on a Queue <span class="built_in">object</span> which <span class="keyword">is</span> full.</span><br><span class="line"></span><br><span class="line">Queue.qsize()</span><br><span class="line">Queue.empty() <span class="comment">#return True if empty  </span></span><br><span class="line">Queue.full() <span class="comment"># return True if full </span></span><br><span class="line">Queue.put(item, block=<span class="literal">True</span>, timeout=<span class="literal">None</span>)</span><br><span class="line">Put item into the queue. If optional args block <span class="keyword">is</span> true <span class="keyword">and</span> timeout <span class="keyword">is</span> <span class="literal">None</span> (the default), block <span class="keyword">if</span> necessary until a free slot <span class="keyword">is</span> available. If timeout <span class="keyword">is</span> a positive number, it blocks at most timeout seconds <span class="keyword">and</span> raises the Full exception <span class="keyword">if</span> no free slot was available within that time. Otherwise (block <span class="keyword">is</span> false), put an item on the queue <span class="keyword">if</span> a free slot <span class="keyword">is</span> immediately available, <span class="keyword">else</span> <span class="keyword">raise</span> the Full exception (timeout <span class="keyword">is</span> ignored <span class="keyword">in</span> that case).</span><br><span class="line"></span><br><span class="line">Queue.put_nowait(item)</span><br><span class="line">Equivalent to put(item, <span class="literal">False</span>).</span><br><span class="line"></span><br><span class="line">Queue.get(block=<span class="literal">True</span>, timeout=<span class="literal">None</span>)</span><br><span class="line">Remove <span class="keyword">and</span> <span class="keyword">return</span> an item <span class="keyword">from</span> the queue. If optional args block <span class="keyword">is</span> true <span class="keyword">and</span> timeout <span class="keyword">is</span> <span class="literal">None</span> (the default), block <span class="keyword">if</span> necessary until an item <span class="keyword">is</span> available. If timeout <span class="keyword">is</span> a positive number, it blocks at most timeout seconds <span class="keyword">and</span> raises the Empty exception <span class="keyword">if</span> no item was available within that time. Otherwise (block <span class="keyword">is</span> false), <span class="keyword">return</span> an item <span class="keyword">if</span> one <span class="keyword">is</span> immediately available, <span class="keyword">else</span> <span class="keyword">raise</span> the Empty exception (timeout <span class="keyword">is</span> ignored <span class="keyword">in</span> that case).</span><br><span class="line"></span><br><span class="line">Queue.get_nowait()</span><br><span class="line">Equivalent to get(<span class="literal">False</span>).</span><br><span class="line"></span><br><span class="line">Two methods are offered to support tracking whether enqueued tasks have been fully processed by daemon consumer threads.</span><br><span class="line"></span><br><span class="line">Queue.task_done()</span><br><span class="line">Indicate that a formerly enqueued task <span class="keyword">is</span> complete. Used by queue consumer threads. For each get() used to fetch a task, a subsequent call to task_done() tells the queue that the processing on the task <span class="keyword">is</span> complete.</span><br><span class="line"></span><br><span class="line">If a join() <span class="keyword">is</span> currently blocking, it will resume when <span class="built_in">all</span> items have been processed (meaning that a task_done() call was received <span class="keyword">for</span> every item that had been put() into the queue).</span><br><span class="line"></span><br><span class="line">Raises a ValueError <span class="keyword">if</span> called more times than there were items placed <span class="keyword">in</span> the queue.</span><br><span class="line"></span><br><span class="line">Queue.join() blockç›´åˆ°queueè¢«æ¶ˆè´¹å®Œæ¯•</span><br></pre></td></tr></table></figure>

<h3 id="åäº”-Pythonæ ‡å‡†æ¨¡å—â€“concurrent-futures"><a href="#åäº”-Pythonæ ‡å‡†æ¨¡å—â€“concurrent-futures" class="headerlink" title="åäº” Pythonæ ‡å‡†æ¨¡å—â€“concurrent.futures"></a>åäº” Pythonæ ‡å‡†æ¨¡å—â€“concurrent.futures</h3><p><strong><a href="https://link.zhihu.com/?target=https://docs.python.org/dev/library/concurrent.futures.html">https://docs.python.org/dev/library/concurrent.futures.html</a></strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1 ä»‹ç»</span></span><br><span class="line">concurrent.futuresæ¨¡å—æä¾›äº†é«˜åº¦å°è£…çš„å¼‚æ­¥è°ƒç”¨æ¥å£</span><br><span class="line">ThreadPoolExecutorï¼šçº¿ç¨‹æ± ï¼Œæä¾›å¼‚æ­¥è°ƒç”¨</span><br><span class="line">ProcessPoolExecutor: è¿›ç¨‹æ± ï¼Œæä¾›å¼‚æ­¥è°ƒç”¨</span><br><span class="line">Both implement the same interface, which <span class="keyword">is</span> defined by the abstract Executor <span class="keyword">class</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">#2 åŸºæœ¬æ–¹æ³•</span></span><br><span class="line"><span class="comment">#submit(fn, *args, **kwargs)</span></span><br><span class="line">å¼‚æ­¥æäº¤ä»»åŠ¡</span><br><span class="line"></span><br><span class="line"><span class="comment">#map(func, *iterables, timeout=None, chunksize=1) </span></span><br><span class="line">å–ä»£<span class="keyword">for</span>å¾ªç¯submitçš„æ“ä½œ</span><br><span class="line"></span><br><span class="line"><span class="comment">#shutdown(wait=True) </span></span><br><span class="line">ç›¸å½“äºè¿›ç¨‹æ± çš„pool.close()+pool.join()æ“ä½œ</span><br><span class="line">wait=<span class="literal">True</span>ï¼Œç­‰å¾…æ± å†…æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•å›æ”¶å®Œèµ„æºåæ‰ç»§ç»­</span><br><span class="line">wait=<span class="literal">False</span>ï¼Œç«‹å³è¿”å›ï¼Œå¹¶ä¸ä¼šç­‰å¾…æ± å†…çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•</span><br><span class="line">ä½†ä¸ç®¡waitå‚æ•°ä¸ºä½•å€¼ï¼Œæ•´ä¸ªç¨‹åºéƒ½ä¼šç­‰åˆ°æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•</span><br><span class="line">submitå’Œ<span class="built_in">map</span>å¿…é¡»åœ¨shutdownä¹‹å‰</span><br><span class="line"></span><br><span class="line"><span class="comment">#result(timeout=None)</span></span><br><span class="line">å–å¾—ç»“æœ</span><br><span class="line"></span><br><span class="line"><span class="comment">#add_done_callback(fn)</span></span><br><span class="line">å›è°ƒå‡½æ•°</span><br></pre></td></tr></table></figure>

<p>ProcessPoolExecutor</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä»‹ç»</span></span><br><span class="line">The ProcessPoolExecutor <span class="class"><span class="keyword">class</span> <span class="title">is</span> <span class="title">an</span> <span class="title">Executor</span> <span class="title">subclass</span> <span class="title">that</span> <span class="title">uses</span> <span class="title">a</span> <span class="title">pool</span> <span class="title">of</span> <span class="title">processes</span> <span class="title">to</span> <span class="title">execute</span> <span class="title">calls</span> <span class="title">asynchronously</span>. <span class="title">ProcessPoolExecutor</span> <span class="title">uses</span> <span class="title">the</span> <span class="title">multiprocessing</span> <span class="title">module</span>, <span class="title">which</span> <span class="title">allows</span> <span class="title">it</span> <span class="title">to</span> <span class="title">side</span>-<span class="title">step</span> <span class="title">the</span> <span class="title">Global</span> <span class="title">Interpreter</span> <span class="title">Lock</span> <span class="title">but</span> <span class="title">also</span> <span class="title">means</span> <span class="title">that</span> <span class="title">only</span> <span class="title">picklable</span> <span class="title">objects</span> <span class="title">can</span> <span class="title">be</span> <span class="title">executed</span> <span class="title">and</span> <span class="title">returned</span>.</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">concurrent</span>.<span class="title">futures</span>.<span class="title">ProcessPoolExecutor</span>(<span class="params">max_workers=<span class="literal">None</span>, mp_context=<span class="literal">None</span></span>)</span></span><br><span class="line"><span class="class"><span class="title">An</span> <span class="title">Executor</span> <span class="title">subclass</span> <span class="title">that</span> <span class="title">executes</span> <span class="title">calls</span> <span class="title">asynchronously</span> <span class="title">using</span> <span class="title">a</span> <span class="title">pool</span> <span class="title">of</span> <span class="title">at</span> <span class="title">most</span> <span class="title">max_workers</span> <span class="title">processes</span>. <span class="title">If</span> <span class="title">max_workers</span> <span class="title">is</span> <span class="title">None</span> <span class="title">or</span> <span class="title">not</span> <span class="title">given</span>, <span class="title">it</span> <span class="title">will</span> <span class="title">default</span> <span class="title">to</span> <span class="title">the</span> <span class="title">number</span> <span class="title">of</span> <span class="title">processors</span> <span class="title">on</span> <span class="title">the</span> <span class="title">machine</span>. <span class="title">If</span> <span class="title">max_workers</span> <span class="title">is</span> <span class="title">lower</span> <span class="title">or</span> <span class="title">equal</span> <span class="title">to</span> 0, <span class="title">then</span> <span class="title">a</span> <span class="title">ValueError</span> <span class="title">will</span> <span class="title">be</span> <span class="title">raised</span>.</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">#ç”¨æ³•</span></span><br><span class="line"><span class="class"><span class="title">from</span> <span class="title">concurrent</span>.<span class="title">futures</span> <span class="title">import</span> <span class="title">ThreadPoolExecutor</span>,<span class="title">ProcessPoolExecutor</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">import</span> <span class="title">os</span>,<span class="title">time</span>,<span class="title">random</span></span></span><br><span class="line"><span class="class"><span class="title">def</span> <span class="title">task</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s is runing&#x27;</span> %os.getpid())</span><br><span class="line">    time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">    <span class="keyword">return</span> n**<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    executor=ProcessPoolExecutor(max_workers=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">    futures=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">11</span>):</span><br><span class="line">        future=executor.submit(task,i)</span><br><span class="line">        futures.append(future)</span><br><span class="line">    executor.shutdown(<span class="literal">True</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;+++&gt;&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> future <span class="keyword">in</span> futures:</span><br><span class="line">        <span class="built_in">print</span>(future.result())</span><br></pre></td></tr></table></figure>

<p>ThreadPoolExecutor</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä»‹ç»</span></span><br><span class="line">ThreadPoolExecutor <span class="keyword">is</span> an Executor subclass that uses a pool of threads to execute calls asynchronously.</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">concurrent</span>.<span class="title">futures</span>.<span class="title">ThreadPoolExecutor</span>(<span class="params">max_workers=<span class="literal">None</span>, thread_name_prefix=<span class="string">&#x27;&#x27;</span></span>)</span></span><br><span class="line"><span class="class"><span class="title">An</span> <span class="title">Executor</span> <span class="title">subclass</span> <span class="title">that</span> <span class="title">uses</span> <span class="title">a</span> <span class="title">pool</span> <span class="title">of</span> <span class="title">at</span> <span class="title">most</span> <span class="title">max_workers</span> <span class="title">threads</span> <span class="title">to</span> <span class="title">execute</span> <span class="title">calls</span> <span class="title">asynchronously</span>.</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">Changed</span> <span class="title">in</span> <span class="title">version</span> 3.5:</span> If max_workers <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">or</span> <span class="keyword">not</span> given, it will default to the number of processors on the machine, multiplied by <span class="number">5</span>, assuming that ThreadPoolExecutor <span class="keyword">is</span> often used to overlap I/O instead of CPU work <span class="keyword">and</span> the number of workers should be higher than the number of workers <span class="keyword">for</span> ProcessPoolExecutor.</span><br><span class="line"></span><br><span class="line">New <span class="keyword">in</span> version <span class="number">3.6</span>: The thread_name_prefix argument was added to allow users to control the threading.Thread names <span class="keyword">for</span> worker threads created by the pool <span class="keyword">for</span> easier debugging.</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç”¨æ³•</span></span><br><span class="line">ä¸ProcessPoolExecutorç›¸åŒ</span><br></pre></td></tr></table></figure>

<p>mapçš„ç”¨æ³•</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor,ProcessPoolExecutor</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os,time,random</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s is runing&#x27;</span> %os.getpid())</span><br><span class="line">    time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">    <span class="keyword">return</span> n**<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    executor=ThreadPoolExecutor(max_workers=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># for i in range(11):</span></span><br><span class="line">    <span class="comment">#     future=executor.submit(task,i)</span></span><br><span class="line"></span><br><span class="line">    executor.<span class="built_in">map</span>(task,<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">12</span>)) <span class="comment">#mapå–ä»£äº†for+submit</span></span><br></pre></td></tr></table></figure>

<p>å›è°ƒå‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor,ProcessPoolExecutor</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_page</span>(<span class="params">url</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&lt;è¿›ç¨‹%s&gt; get %s&#x27;</span> %(os.getpid(),url))</span><br><span class="line">    respone=requests.get(url)</span><br><span class="line">    <span class="keyword">if</span> respone.status_code == <span class="number">200</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">&#x27;url&#x27;</span>:url,<span class="string">&#x27;text&#x27;</span>:respone.text&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_page</span>(<span class="params">res</span>):</span></span><br><span class="line">    res=res.result()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&lt;è¿›ç¨‹%s&gt; parse %s&#x27;</span> %(os.getpid(),res[<span class="string">&#x27;url&#x27;</span>]))</span><br><span class="line">    parse_res=<span class="string">&#x27;url:&lt;%s&gt; size:[%s]\n&#x27;</span> %(res[<span class="string">&#x27;url&#x27;</span>],<span class="built_in">len</span>(res[<span class="string">&#x27;text&#x27;</span>]))</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;db.txt&#x27;</span>,<span class="string">&#x27;a&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(parse_res)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    urls=[</span><br><span class="line">        <span class="string">&#x27;https://www.baidu.com&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://www.python.org&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://www.openstack.org&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;https://help.github.com/&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;http://www.sina.com.cn/&#x27;</span></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># p=Pool(3)</span></span><br><span class="line">    <span class="comment"># for url in urls:</span></span><br><span class="line">    <span class="comment">#     p.apply_async(get_page,args=(url,),callback=pasrse_page)</span></span><br><span class="line">    <span class="comment"># p.close()</span></span><br><span class="line">    <span class="comment"># p.join()</span></span><br><span class="line"></span><br><span class="line">    p=ProcessPoolExecutor(<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">        p.submit(get_page,url).add_done_callback(parse_page) <span class="comment">#parse_pageæ‹¿åˆ°çš„æ˜¯ä¸€ä¸ªfutureå¯¹è±¡objï¼Œéœ€è¦ç”¨obj.result()æ‹¿åˆ°ç»“æœ</span></span><br></pre></td></tr></table></figure>

<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=142">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=142<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>39-æ•°æ®åº“ï¼ˆä¸€ï¼‰</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/39_%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    <content><![CDATA[<h3 id="ä¸€-æ•°æ®åº“ç®¡ç†è½¯ä»¶çš„ç”±æ¥"><a href="#ä¸€-æ•°æ®åº“ç®¡ç†è½¯ä»¶çš„ç”±æ¥" class="headerlink" title="ä¸€ æ•°æ®åº“ç®¡ç†è½¯ä»¶çš„ç”±æ¥"></a>ä¸€ æ•°æ®åº“ç®¡ç†è½¯ä»¶çš„ç”±æ¥</h3><p>åŸºäºæˆ‘ä»¬ä¹‹å‰æ‰€å­¦ï¼Œæ•°æ®è¦æƒ³æ°¸ä¹…ä¿å­˜ï¼Œéƒ½æ˜¯ä¿å­˜äºæ–‡ä»¶ä¸­ï¼Œæ¯«æ— ç–‘é—®ï¼Œä¸€ä¸ªæ–‡ä»¶ä»…ä»…åªèƒ½å­˜åœ¨äºæŸä¸€å°æœºå™¨ä¸Šã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æš‚ä¸”å¿½ç•¥ç›´æ¥åŸºäºæ–‡ä»¶æ¥å­˜å–æ•°æ®çš„æ•ˆç‡é—®é¢˜ï¼Œå¹¶ä¸”å‡è®¾ç¨‹åºæ‰€æœ‰çš„ç»„ä»¶éƒ½è¿è¡Œåœ¨ä¸€å°æœºå™¨ä¸Šï¼Œé‚£ä¹ˆç”¨æ–‡ä»¶å­˜å–æ•°æ®ï¼Œå¹¶æ²¡æœ‰é—®é¢˜ã€‚</p>
<p>å¾ˆä¸å¹¸ï¼Œè¿™äº›å‡è®¾éƒ½æ˜¯ä½ è‡ªå·±æ„æ·«å‡ºæ¥çš„ï¼Œä¸Šè¿°å‡è®¾å­˜åœ¨ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p>
<p><strong>1ã€ç¨‹åºæ‰€æœ‰çš„ç»„ä»¶å°±ä¸å¯èƒ½è¿è¡Œåœ¨ä¸€å°æœºå™¨ä¸Š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å› ä¸ºè¿™å°æœºå™¨ä¸€æ—¦æŒ‚æ‰åˆ™æ„å‘³ç€æ•´ä¸ªè½¯ä»¶çš„å´©æºƒï¼Œå¹¶ä¸”ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ä¾èµ–äºæ‰¿è½½å®ƒçš„ç¡¬ä»¶ï¼Œè€Œä¸€å°æœºå™¨æœºå™¨çš„æ€§èƒ½æ€»å½’æ˜¯æœ‰é™çš„ï¼Œå—é™äºç›®å‰çš„ç¡¬ä»¶æ°´å¹³ï¼Œå°±ä¸€å°æœºå™¨çš„æ€§èƒ½å‚ç›´è¿›è¡Œæ‰©å±•æ˜¯æœ‰æé™çš„ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#äºæ˜¯æˆ‘ä»¬åªèƒ½é€šè¿‡æ°´å¹³æ‰©å±•æ¥å¢å¼ºæˆ‘ä»¬ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬å°†ç¨‹åºçš„å„ä¸ªç»„ä»¶åˆ†å¸ƒäºå¤šå°æœºå™¨å»æ‰§è¡Œã€‚</span></span><br></pre></td></tr></table></figure>

<p><strong>2ã€æ•°æ®å®‰å…¨é—®é¢˜</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ ¹æ®1çš„æè¿°ï¼Œæˆ‘ä»¬å°†ç¨‹åºçš„å„ä¸ªç»„ä»¶åˆ†å¸ƒåˆ°å„å°æœºå™¨ï¼Œä½†éœ€çŸ¥å„ç»„ä»¶ä»ç„¶æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œè¨€å¤–ä¹‹æ„ï¼Œæ‰€æœ‰ç»„ä»¶çš„æ•°æ®è¿˜æ˜¯è¦å…±äº«çš„ã€‚ä½†æ¯å°æœºå™¨ä¸Šçš„ç»„ä»¶éƒ½åªèƒ½æ“ä½œæœ¬æœºçš„æ–‡ä»¶ï¼Œè¿™å°±å¯¼è‡´äº†æ•°æ®å¿…ç„¶ä¸ä¸€è‡´ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#äºæ˜¯æˆ‘ä»¬æƒ³åˆ°äº†å°†æ•°æ®ä¸åº”ç”¨ç¨‹åºåˆ†ç¦»ï¼šæŠŠæ–‡ä»¶å­˜æ”¾äºä¸€å°æœºå™¨ï¼Œç„¶åå°†å¤šå°æœºå™¨é€šè¿‡ç½‘ç»œå»è®¿é—®è¿™å°æœºå™¨ä¸Šçš„æ–‡ä»¶ï¼ˆç”¨socketå®ç°ï¼‰ï¼Œå³å…±äº«è¿™å°æœºå™¨ä¸Šçš„æ–‡ä»¶,å…±äº«åˆ™æ„å‘³ç€ç«äº‰ï¼Œä¼šå‘ç”Ÿæ•°æ®ä¸å®‰å…¨ï¼Œéœ€è¦åŠ é”å¤„ç†ã€‚ã€‚ã€‚ã€‚</span></span><br></pre></td></tr></table></figure>

<p><strong>3ã€å¹¶å‘</strong></p>
<p>æ ¹æ®2çš„æè¿°ï¼Œæˆ‘ä»¬å¿…é¡»å†™ä¸€ä¸ªsocketæœåŠ¡ç«¯æ¥ç®¡ç†è¿™å°æœºå™¨ï¼ˆæ•°æ®åº“æœåŠ¡å™¨ï¼‰ä¸Šçš„æ–‡ä»¶ï¼Œç„¶åå†™ä¸€ä¸ªsocketå®¢æˆ·ç«¯ï¼Œå®Œæˆå¦‚ä¸‹åŠŸèƒ½ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1.è¿œç¨‹è¿æ¥ï¼ˆæ”¯æŒå¹¶å‘ï¼‰</span></span><br><span class="line"><span class="comment">#2.æ‰“å¼€æ–‡ä»¶</span></span><br><span class="line"><span class="comment">#3.è¯»å†™ï¼ˆåŠ é”ï¼‰</span></span><br><span class="line"><span class="comment">#4.å…³é—­æ–‡ä»¶</span></span><br></pre></td></tr></table></figure>

<p><strong>æ€»ç»“ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æˆ‘ä»¬åœ¨ç¼–å†™ä»»ä½•ç¨‹åºä¹‹å‰ï¼Œéƒ½éœ€è¦äº‹å…ˆå†™å¥½åŸºäºç½‘ç»œæ“ä½œä¸€å°ä¸»æœºä¸Šæ–‡ä»¶çš„ç¨‹åºï¼ˆsocketæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ç¨‹åºï¼‰ï¼Œäºæ˜¯æœ‰äººå°†æ­¤ç±»ç¨‹åºå†™æˆä¸€ä¸ªä¸“é—¨çš„å¤„ç†è½¯ä»¶ï¼Œè¿™å°±æ˜¯mysqlç­‰æ•°æ®åº“ç®¡ç†è½¯ä»¶çš„ç”±æ¥ï¼Œä½†mysqlè§£å†³çš„ä¸ä»…ä»…æ˜¯æ•°æ®å…±äº«çš„é—®é¢˜ï¼Œè¿˜æœ‰æŸ¥è¯¢æ•ˆç‡ï¼Œå®‰å…¨æ€§ç­‰ä¸€ç³»åˆ—é—®é¢˜ï¼Œæ€»ä¹‹ï¼ŒæŠŠç¨‹åºå‘˜ä»æ•°æ®ç®¡ç†ä¸­è§£è„±å‡ºæ¥ï¼Œä¸“æ³¨äºè‡ªå·±çš„ç¨‹åºé€»è¾‘çš„ç¼–å†™ã€‚</span></span><br></pre></td></tr></table></figure>

<h3 id="äºŒ-æ•°æ®åº“æ¦‚è¿°"><a href="#äºŒ-æ•°æ®åº“æ¦‚è¿°" class="headerlink" title="äºŒ æ•°æ®åº“æ¦‚è¿°"></a>äºŒ æ•°æ®åº“æ¦‚è¿°</h3><p><strong>1 ä»€ä¹ˆæ˜¯æ•°æ®ï¼ˆDataï¼‰</strong></p>
<p><em>æè¿°äº‹ç‰©çš„ç¬¦å·è®°å½•ç§°ä¸ºæ•°æ®ï¼Œæè¿°äº‹ç‰©çš„ç¬¦å·æ—¢å¯ä»¥æ˜¯æ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡å­—ã€å›¾ç‰‡ï¼Œå›¾åƒã€å£°éŸ³ã€è¯­è¨€ç­‰ï¼Œæ•°æ®ç”±å¤šç§è¡¨ç°å½¢å¼ï¼Œå®ƒä»¬éƒ½å¯ä»¥ç»è¿‡æ•°å­—åŒ–åå­˜å…¥è®¡ç®—æœº</em></p>
<p><em>åœ¨è®¡ç®—æœºä¸­æè¿°ä¸€ä¸ªäº‹ç‰©ï¼Œå°±éœ€è¦æŠ½å–è¿™ä¸€äº‹ç‰©çš„å…¸å‹ç‰¹å¾ï¼Œç»„æˆä¸€æ¡è®°å½•ï¼Œå°±ç›¸å½“äºæ–‡ä»¶é‡Œçš„ä¸€è¡Œå†…å®¹ï¼Œå¦‚ï¼š</em></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> egon,male,<span class="number">18</span>,<span class="number">1999</span>,å±±ä¸œ,è®¡ç®—æœºç³»,<span class="number">2017</span>,oldboy</span><br></pre></td></tr></table></figure>

<p><em>å•çº¯çš„ä¸€æ¡è®°å½•å¹¶æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œå¦‚æœæˆ‘ä»¬æŒ‰é€—å·ä½œä¸ºåˆ†éš”ï¼Œä¾æ¬¡å®šä¹‰å„ä¸ªå­—æ®µçš„æ„æ€ï¼Œç›¸å½“äºå®šä¹‰è¡¨çš„æ ‡é¢˜</em></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> name,sex,age,birth,born_addr,major,entrance_time,school <span class="comment">#å­—æ®µ</span></span><br><span class="line"><span class="number">2</span> egon,male,<span class="number">18</span>,<span class="number">1999</span>,å±±ä¸œ,è®¡ç®—æœºç³»,<span class="number">2017</span>,oldboy <span class="comment">#è®°å½•</span></span><br></pre></td></tr></table></figure>

<p><em>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥äº†è§£egonï¼Œæ€§åˆ«ä¸ºç”·ï¼Œå¹´é¾„18å²ï¼Œå‡ºç”Ÿäº1999å¹´ï¼Œå‡ºç”Ÿåœ°ä¸ºå±±ä¸œï¼Œ2017å¹´è€ƒå…¥è€ç”·å­©è®¡ç®—æœºç³»</em></p>
<p><strong>2 ä»€ä¹ˆæ˜¯æ•°æ®åº“ï¼ˆDataBaseï¼Œç®€ç§°DBï¼‰</strong></p>
<p><em>æ•°æ®åº“å³å­˜æ”¾æ•°æ®çš„ä»“åº“ï¼Œåªä¸è¿‡è¿™ä¸ªä»“åº“æ˜¯åœ¨è®¡ç®—æœºå­˜å‚¨è®¾å¤‡ä¸Šï¼Œè€Œä¸”æ•°æ®æ˜¯æŒ‰ä¸€å®šçš„æ ¼å¼å­˜æ”¾çš„</em></p>
<p><em>è¿‡å»äººä»¬å°†æ•°æ®å­˜æ”¾åœ¨æ–‡ä»¶æŸœé‡Œï¼Œç°åœ¨æ•°æ®é‡åºå¤§ï¼Œå·²ç»ä¸å†é€‚ç”¨</em></p>
<p><em>æ•°æ®åº“æ˜¯é•¿æœŸå­˜æ”¾åœ¨è®¡ç®—æœºå†…ã€æœ‰ç»„ç»‡ã€å¯å…±äº«çš„æ•°æ®å³å¯ã€‚</em></p>
<p><em>æ•°æ®åº“ä¸­çš„æ•°æ®æŒ‰ä¸€å®šçš„æ•°æ®æ¨¡å‹ç»„ç»‡ã€æè¿°å’Œå‚¨å­˜ï¼Œå…·æœ‰è¾ƒå°çš„å†—ä½™åº¦ã€è¾ƒé«˜çš„æ•°æ®ç‹¬ç«‹æ€§å’Œæ˜“æ‰©å±•æ€§ï¼Œå¹¶å¯ä¸ºå„ç§ ç”¨æˆ·å…±äº«</em></p>
<p><strong>3 ä»€ä¹ˆæ˜¯æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDataBase Management System ç®€ç§°DBMSï¼‰</strong></p>
<p><em>åœ¨äº†è§£äº†Dataä¸DBçš„æ¦‚å¿µåï¼Œå¦‚ä½•ç§‘å­¦åœ°ç»„ç»‡å’Œå­˜å‚¨æ•°æ®ï¼Œå¦‚ä½•é«˜æ•ˆè·å–å’Œç»´æŠ¤æ•°æ®æˆäº†å…³é”®</em></p>
<p><em>è¿™å°±ç”¨åˆ°äº†ä¸€ä¸ªç³»ç»Ÿè½¯ä»¶â€”æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</em></p>
<p><em>å¦‚MySQLã€Oracleã€SQLiteã€Accessã€MS SQL Server</em></p>
<p><em>mysqlä¸»è¦ç”¨äºå¤§å‹é—¨æˆ·ï¼Œä¾‹å¦‚æœç‹—ã€æ–°æµªç­‰ï¼Œå®ƒä¸»è¦çš„ä¼˜åŠ¿å°±æ˜¯å¼€æ”¾æºä»£ç ï¼Œå› ä¸ºå¼€æ”¾æºä»£ç è¿™ä¸ªæ•°æ®åº“æ˜¯å…è´¹çš„ï¼Œä»–ç°åœ¨æ˜¯ç”²éª¨æ–‡å…¬å¸çš„äº§å“ã€‚</em> <em>oracleä¸»è¦ç”¨äºé“¶è¡Œã€é“è·¯ã€é£æœºåœºç­‰ã€‚è¯¥æ•°æ®åº“åŠŸèƒ½å¼ºå¤§ï¼Œè½¯ä»¶è´¹ç”¨é«˜ã€‚ä¹Ÿæ˜¯ç”²éª¨æ–‡å…¬å¸çš„äº§å“ã€‚</em> <em>sql serveræ˜¯å¾®è½¯å…¬å¸çš„äº§å“ï¼Œä¸»è¦åº”ç”¨äºå¤§ä¸­å‹ä¼ä¸šï¼Œå¦‚è”æƒ³ã€æ–¹æ­£ç­‰ã€‚</em></p>
<p><strong>4 æ•°æ®åº“æœåŠ¡å™¨ã€æ•°æ®ç®¡ç†ç³»ç»Ÿã€æ•°æ®åº“ã€è¡¨ä¸è®°å½•çš„å…³ç³»ï¼ˆé‡ç‚¹ç†è§£ï¼ï¼ï¼ï¼‰</strong></p>
<p><strong>è®°å½•ï¼š1 åˆ˜æµ·é¾™ 324245234 22ï¼ˆå¤šä¸ªå­—æ®µçš„ä¿¡æ¯ç»„æˆä¸€æ¡è®°å½•ï¼Œå³æ–‡ä»¶ä¸­çš„ä¸€è¡Œå†…å®¹ï¼‰</strong></p>
<p><strong>è¡¨ï¼šstudent,scholl,class_listï¼ˆå³æ–‡ä»¶ï¼‰</strong></p>
<p><strong>æ•°æ®åº“ï¼šoldboy_stuï¼ˆå³æ–‡ä»¶å¤¹ï¼‰</strong></p>
<p><strong>æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼šå¦‚mysqlï¼ˆæ˜¯ä¸€ä¸ªè½¯ä»¶ï¼‰</strong></p>
<p><strong>æ•°æ®åº“æœåŠ¡å™¨ï¼šä¸€å°è®¡ç®—æœºï¼ˆå¯¹å†…å­˜è¦æ±‚æ¯”è¾ƒé«˜ï¼‰</strong></p>
<p><strong>æ€»ç»“ï¼š</strong></p>
<p><strong>æ•°æ®åº“æœåŠ¡å™¨-ï¼šè¿è¡Œæ•°æ®åº“ç®¡ç†è½¯ä»¶</strong></p>
<p><strong>æ•°æ®åº“ç®¡ç†è½¯ä»¶ï¼šç®¡ç†-æ•°æ®åº“</strong></p>
<p><strong>æ•°æ®åº“ï¼šå³æ–‡ä»¶å¤¹ï¼Œç”¨æ¥ç»„ç»‡æ–‡ä»¶&#x2F;è¡¨</strong></p>
<p><strong>è¡¨ï¼šå³æ–‡ä»¶ï¼Œç”¨æ¥å­˜æ”¾å¤šè¡Œå†…å®¹&#x2F;å¤šæ¡è®°å½•</strong></p>
<p><img src="https://pic3.zhimg.com/80/v2-bfdd92b482a8d0c473a92e1d2651f3aa_720w.jpg" alt="img"></p>
<p><strong>5 æ•°æ®åº“ç®¡ç†æŠ€æœ¯çš„å‘å±•å†ç¨‹(äº†è§£)</strong></p>
<p><strong>ä¸€ äººå·¥ç®¡ç†é˜¶æ®µ</strong></p>
<p><em>20ä¸–çºª50å¹´ä»£ä¸­æœŸä»¥å‰ï¼Œè®¡ç®—æœºä¸»è¦ç”¨äºç§‘å­¦è®¡ç®—ã€‚</em></p>
<p><em>å½“æ—¶çš„ç¡¬ä»¶æ°´å¹³ï¼šå¤–å­˜åªæœ‰çº¸å¸¦ã€å¡ç‰‡ã€ç£å¸¦ï¼Œæ²¡æœ‰ç£ç›˜ç­‰ç›´æ¥å­˜å–çš„å­˜å‚¨è®¾å¤‡</em></p>
<p><em>å½“æ—¶çš„è½¯ä»¶çŠ¶å†µï¼šæ²¡æœ‰æ“ä½œç³»ç»Ÿï¼Œæ²¡æœ‰ç®¡ç†æ•°æ®çš„è½¯ä»¶ï¼Œæ•°æ®çš„å¤„ç†æ–¹å¼æ˜¯æ‰¹å¤„ç†ã€‚</em></p>
<p><em>äººå·¥ç®¡ç†æ•°æ®å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</em></p>
<p><em>1 æ•°æ®ä¸ä¿å­˜ï¼šè®¡ç®—æœºä¸»è¦ç”¨äºç§‘å­¦è®¡ç®—ï¼Œæ•°æ®ä¸´æ—¶ç”¨ï¼Œä¸´æ—¶è¾“å…¥ï¼Œä¸ä¿å­˜</em></p>
<p><em>2 åº”ç”¨ç¨‹åºç®¡ç†æ•°æ®ï¼šæ•°æ®è¦æœ‰åº”ç”¨ç¨‹åºè‡ªå·±ç®¡ç†ï¼Œåº”ç”¨ç¨‹åºéœ€è¦å¤„ç†æ•°æ®çš„é€»è¾‘+ç‰©ç†ç»“æ„ï¼Œå¼€å‘è´Ÿæ‹…å¾ˆé‡</em></p>
<p><em>3 æ•°æ®ä¸å…±äº«ï¼šä¸€ç»„æ•°æ®åªå¯¹åº”ä¸€ä¸ªç¨‹åºï¼Œå¤šä¸ªç¨‹åºä¹‹é—´æ¶‰åŠç›¸åŒæ•°æ®æ—¶ï¼Œå¿…é¡»å„è‡ªå®šä¹‰ï¼Œé€ æˆæ•°æ®å¤§é‡å†—ä½™</em></p>
<p><em>4 æ•°æ®ä¸å…·æœ‰ç‹¬ç«‹æ€§ï¼šæ•°æ®çš„é€»è¾‘ç»“æ„æˆ–ç‰©ç†ç»“æ„å‘ç”Ÿå˜åŒ–åï¼Œå¿…é¡»å¯¹åº”ç”¨ç¨‹åºåšå‡ºç›¸åº”çš„ä¿®æ”¹ï¼Œå¼€å‘è´Ÿæ‹…è¿›ä¸€æ­¥åŠ å¤§</em></p>
<p><img src="https://pic3.zhimg.com/80/v2-c07e6699996fb0ba13b5a12452fa3e7a_720w.jpg" alt="img"></p>
<p><strong>äºŒ æ–‡ä»¶ç³»ç»Ÿé˜¶æ®µ</strong></p>
<p><em>20ä¸–çºª50å¹´ä»£åæœŸåˆ°60å¹´ä»£ä¸­æœŸ</em></p>
<p><em>ç¡¬ä»¶æ°´å¹³ï¼šæœ‰äº†ç£ç›˜ã€ç£é¼“ç­‰å¯ç›´æ¥å­˜å–çš„å­˜å‚¨è®¾å¤‡</em></p>
<p><em>è½¯ä»¶æ°´å¹³ï¼šæœ‰äº†æ“ä½œç³»ç»Ÿï¼Œå¹¶ä¸”æ“ä½œç³»ç»Ÿä¸­å·²ç»æœ‰äº†ä¸“é—¨çš„æ•°æ®ç®¡ç†è½¯ä»¶ï¼Œå³æ–‡ä»¶ç³»ç»Ÿï¼›å¤„ç†æ–¹å¼ä¸Šä¸ä»…æœ‰äº†æ‰¹å¤„ç†ï¼Œè€Œä¸”èƒ½å¤Ÿè”æœºå®æ—¶å¤„ç†</em></p>
<p><em>æ–‡ä»¶ç³»ç»Ÿç®¡ç†æ•°æ®å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹:</em></p>
<p><em>1 æ•°æ®å¯ä»¥é•¿æœŸä¿å­˜ï¼šè®¡ç®—æœºå¤§é‡ç”¨äºæ•°æ®å¤„ç†ï¼Œå› è€Œæ•°æ®éœ€è¦é•¿æœŸä¿å­˜ï¼Œè¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œ</em></p>
<p><em>2 ç”±æ–‡ä»¶ç³»ç»Ÿç®¡ç†æ•°æ®ï¼šæ–‡ä»¶ç³»ç»Ÿè¿™ä¸ªè½¯ä»¶ï¼ŒæŠŠæ•°æ®ç»„ç»‡æˆç›¸å¯¹ç‹¬ç«‹çš„æ•°æ®æ–‡ä»¶ï¼Œåˆ©ç”¨æŒ‰æ–‡ä»¶åï¼ŒæŒ‰è®°å½•è¿›è¡Œå­˜å–ã€‚å®ç°äº†è®°å½•å†…çš„ç»“æ„æ€§ï¼Œä½†æ•´ä½“æ— ç»“æ„ã€‚å¹¶ä¸”ç¨‹åºä¸æ•°æ®ä¹‹é—´ç”±æ–‡ä»¶ç³»ç»Ÿæä¾›å­˜å–æ–¹æ³•è¿›è¡Œè½¬æ¢ï¼Œæ˜¯åº”ç”¨ç¨‹åºä¸æ•°æ®ä¹‹é—´æœ‰äº†ä¸€å®šçš„ç‹¬ç«‹æ€§ï¼Œç¨‹åºå‘˜å¯ä»¥ä¸å¿…è¿‡å¤šè€ƒè™‘ç‰©ç†ç»†èŠ‚ã€‚</em></p>
<p><em>æ–‡ä»¶ç³»ç»Ÿç®¡ç†æ•°æ®å…·æœ‰ä»¥ä¸‹ç¼ºç‚¹ï¼š</em></p>
<p><em>1 æ•°æ®å…±äº«æ€§å·®ï¼Œå†—ä½™åº¦å¤§ï¼šä¸€ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä¸åŒåº”ç”¨æœ‰ç›¸åŒæ•°æ®æ—¶ï¼Œä¹Ÿå¿…é¡»å»ºç«‹å„è‡ªçš„æ–‡ä»¶ï¼Œä¸èƒ½å…±äº«ç›¸åŒçš„æ•°æ®ï¼Œé€ æˆæ•°æ®å†—ä½™ï¼Œæµªè´¹ç©ºé—´ï¼Œä¸”ç›¸åŒçš„æ•°æ®é‡å¤å­˜å‚¨ï¼Œå„è‡ªç®¡ç†ï¼Œå®¹æ˜“é€ æˆæ•°æ®ä¸ä¸€è‡´æ€§</em></p>
<p><em>2 æ•°æ®ç‹¬ç«‹æ€§å·®ï¼šä¸€æ—¦æ•°æ®çš„é€»è¾‘ç»“æ„æ”¹å˜ï¼Œå¿…é¡»ä¿®æ”¹åº”ç”¨ç¨‹åºï¼Œä¿®æ”¹æ–‡ä»¶ç»“æ„çš„å®šä¹‰ã€‚åº”ç”¨ç¨‹åºçš„æ”¹å˜ï¼Œä¹Ÿå°†å¼•èµ·æ–‡ä»¶çš„æ•°æ®ç»“æ„çš„æ”¹å˜ã€‚å› æ­¤æ•°æ®ä¸ç¨‹åºä¹‹é—´ç¼ºä¹ç‹¬ç«‹æ€§ã€‚å¯è§ï¼Œæ–‡ä»¶ç³»ç»Ÿä»ç„¶æ˜¯ä¸€ä¸ªä¸å…·æœ‰å¼¹æ€§çš„æ— ç»“æ„çš„æ•°æ®é›†åˆï¼Œå³æ–‡ä»¶ä¹‹é—´æ˜¯å­¤ç«‹çš„ï¼Œä¸èƒ½åæ˜ ç°å®ä¸–ç•Œäº‹ç‰©ä¹‹é—´çš„å†…å­˜è”ç³»ã€‚</em></p>
<p><img src="https://pic1.zhimg.com/80/v2-9a7bb3db950d69b1fbfc0346392adf54_720w.jpg" alt="img"></p>
<p><strong>ä¸‰ æ•°æ®ç³»ç»Ÿé˜¶æ®µ</strong></p>
<p><em>20ä¸–çºª60å¹´ä»£åæœŸä»¥æ¥ï¼Œè®¡ç®—æœºç”¨äºç®¡ç†çš„è§„æ¨¡è¶Šæ¥è¶Šå¤§ï¼Œåº”ç”¨è¶Šæ¥è¶Šå¹¿æ³›ï¼Œæ•°æ®é‡æ€¥å‰§å¢é•¿ï¼ŒåŒæ—¶å¤šç§åº”ç”¨ï¼Œå¤šç§è¯­è¨€äº’ç›¸è¦†ç›–åœ°å…±äº«æ•°æ®ç»“åˆè¦æ±‚è¶Šæ¥è¶Šå¼ºçƒˆ</em></p>
<p><em>ç¡¬ä»¶æ°´å¹³ï¼šæœ‰äº†å¤§å®¹é‡ç£ç›˜ï¼Œç¡¬ä»¶æ¶æ„ä¸‹é™</em></p>
<p><em>è½¯ä»¶æ°´å¹³ï¼šè½¯ä»¶ä»·æ ¼ä¸Šå‡ï¼ˆå¼€å‘æ•ˆç‡å¿…é¡»æå‡ï¼Œå¿…é¡»å°†ç¨‹åºå‘˜ä»æ•°æ®ç®¡ç†ä¸­è§£æ”¾å‡ºæ¥ï¼‰ï¼Œåˆ†å¸ƒå¼çš„æ¦‚å¿µç››è¡Œã€‚</em></p>
<p><em>æ•°æ®åº“ç³»ç»Ÿçš„ç‰¹ç‚¹ï¼š</em></p>
<p><em>1 æ•°æ®ç»“æ„åŒ–ï¼ˆå¦‚ä¸Šå›¾odboy_stuï¼‰</em></p>
<p><em>2 æ•°æ®å…±äº«ï¼Œå†—ä½™åº¦ä½ï¼Œæ˜“æ‰©å……</em></p>
<p><em>3 æ•°æ®ç‹¬ç«‹æ€§é«˜</em></p>
<p><em>4 æ•°æ®ç”±DBMSç»Ÿä¸€ç®¡ç†å’Œæ§åˆ¶</em></p>
<p><em>aï¼šæ•°æ®çš„å®‰å…¨æ€§ä¿æŠ¤</em></p>
<p><em>bï¼šæ•°æ®çš„å®Œæ•´æ€§æ£€æŸ¥</em></p>
<p><em>cï¼šå¹¶å‘æ§åˆ¶</em></p>
<p><em>dï¼šæ•°æ®åº“æ¢å¤</em></p>
<h3 id="ä¸‰-mysqlä»‹ç»"><a href="#ä¸‰-mysqlä»‹ç»" class="headerlink" title="ä¸‰ mysqlä»‹ç»"></a>ä¸‰ mysqlä»‹ç»</h3><p>MySQLæ˜¯ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œç”±ç‘å…¸MySQL AB å…¬å¸å¼€å‘ï¼Œç›®å‰å±äº Oracle æ——ä¸‹å…¬å¸ã€‚MySQL æœ€æµè¡Œçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œåœ¨ WEB åº”ç”¨æ–¹é¢MySQLæ˜¯æœ€å¥½çš„ RDBMS (Relational Database Management Systemï¼Œå…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ) åº”ç”¨è½¯ä»¶ä¹‹ä¸€ã€‚</p>
<p><strong>mysqlæ˜¯ä»€ä¹ˆ</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#mysqlå°±æ˜¯ä¸€ä¸ªåŸºäºsocketç¼–å†™çš„C/Sæ¶æ„çš„è½¯ä»¶</span></span><br><span class="line"><span class="comment">#å®¢æˆ·ç«¯è½¯ä»¶</span></span><br><span class="line">ã€€ã€€mysqlè‡ªå¸¦ï¼šå¦‚mysqlå‘½ä»¤ï¼Œmysqldumpå‘½ä»¤ç­‰</span><br><span class="line">ã€€ã€€pythonæ¨¡å—ï¼šå¦‚pymysql</span><br></pre></td></tr></table></figure>

<p><strong>æ•°æ®åº“ç®¡ç†è½¯ä»¶åˆ†ç±»</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åˆ†ä¸¤å¤§ç±»ï¼š</span></span><br><span class="line">ã€€ã€€å…³ç³»å‹ï¼šå¦‚sqlliteï¼Œdb2ï¼Œoracleï¼Œaccessï¼Œsql serverï¼ŒMySQLï¼Œæ³¨æ„ï¼šsqlè¯­å¥é€šç”¨</span><br><span class="line">ã€€ã€€éå…³ç³»å‹ï¼šmongodbï¼Œredisï¼Œmemcache</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼š</span></span><br><span class="line">    å…³ç³»å‹æ•°æ®åº“éœ€è¦æœ‰è¡¨ç»“æ„</span><br><span class="line">    éå…³ç³»å‹æ•°æ®åº“æ˜¯key-valueå­˜å‚¨çš„ï¼Œæ²¡æœ‰è¡¨ç»“æ„</span><br></pre></td></tr></table></figure>

<h3 id="å››-ä¸‹è½½å®‰è£…"><a href="#å››-ä¸‹è½½å®‰è£…" class="headerlink" title="å›› ä¸‹è½½å®‰è£…"></a>å›› ä¸‹è½½å®‰è£…</h3><p><strong>Linuxç‰ˆæœ¬</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#äºŒè¿›åˆ¶rpmåŒ…å®‰è£…</span></span><br><span class="line">yum -y install mysql-server mysql</span><br></pre></td></tr></table></figure>

<p>æºç å®‰è£…mysql</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>è§£å‹taråŒ…</span><br><span class="line">cd /software</span><br><span class="line">tar -xzvf mysql-<span class="number">5.6</span><span class="number">.21</span>-linux-glibc2<span class="number">.5</span>-x86_64.tar.gz</span><br><span class="line">mv mysql-<span class="number">5.6</span><span class="number">.21</span>-linux-glibc2<span class="number">.5</span>-x86_64 mysql-<span class="number">5.6</span><span class="number">.21</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>æ·»åŠ ç”¨æˆ·ä¸ç»„</span><br><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql mysql</span><br><span class="line">chown -R mysql:mysql mysql-<span class="number">5.6</span><span class="number">.21</span></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>å®‰è£…æ•°æ®åº“</span><br><span class="line">su mysql</span><br><span class="line">cd mysql-<span class="number">5.6</span><span class="number">.21</span>/scripts</span><br><span class="line">./mysql_install_db --user=mysql --basedir=/software/mysql-<span class="number">5.6</span><span class="number">.21</span> --datadir=/software/mysql-<span class="number">5.6</span><span class="number">.21</span>/data</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>é…ç½®æ–‡ä»¶</span><br><span class="line">cd /software/mysql-<span class="number">5.6</span><span class="number">.21</span>/support-files</span><br><span class="line">cp my-default.cnf /etc/my.cnf</span><br><span class="line">cp mysql.server /etc/init.d/mysql</span><br><span class="line">vim /etc/init.d/mysql   <span class="comment">#è‹¥mysqlçš„å®‰è£…ç›®å½•æ˜¯/usr/local/mysql,åˆ™å¯çœç•¥æ­¤æ­¥</span></span><br><span class="line">ä¿®æ”¹æ–‡ä»¶ä¸­çš„ä¸¤ä¸ªå˜æ›´å€¼</span><br><span class="line">basedir=/software/mysql-<span class="number">5.6</span><span class="number">.21</span></span><br><span class="line">datadir=/software/mysql-<span class="number">5.6</span><span class="number">.21</span>/data</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>é…ç½®ç¯å¢ƒå˜é‡</span><br><span class="line">vim /etc/profile</span><br><span class="line">export MYSQL_HOME=<span class="string">&quot;/software/mysql-5.6.21&quot;</span></span><br><span class="line">export PATH=<span class="string">&quot;$PATH:$MYSQL_HOME/bin&quot;</span></span><br><span class="line">source /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>æ·»åŠ è‡ªå¯åŠ¨æœåŠ¡</span><br><span class="line">chkconfig --add mysql</span><br><span class="line">chkconfig mysql on</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span>å¯åŠ¨mysql</span><br><span class="line">service mysql start</span><br><span class="line"></span><br><span class="line"><span class="number">8.</span>ç™»å½•mysqlåŠæ”¹å¯†ç ä¸é…ç½®è¿œç¨‹è®¿é—®</span><br><span class="line">mysqladmin -u root password <span class="string">&#x27;your_password&#x27;</span>     <span class="comment">#ä¿®æ”¹rootç”¨æˆ·å¯†ç </span></span><br><span class="line">mysql -u root -p     <span class="comment">#ç™»å½•mysql,éœ€è¦è¾“å…¥å¯†ç </span></span><br><span class="line">mysql&gt;GRANT ALL PRIVILEGES ON *.* TO <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;your_password&#x27;</span> WITH GRANT OPTION;     <span class="comment">#å…è®¸rootç”¨æˆ·è¿œç¨‹è®¿é—®</span></span><br><span class="line">mysql&gt;FLUSH PRIVILEGES;     <span class="comment">#åˆ·æ–°æƒé™</span></span><br></pre></td></tr></table></figure>

<p>æºç å®‰è£…mariadb</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> è§£å‹</span><br><span class="line">tar zxvf  mariadb-<span class="number">5.5</span><span class="number">.31</span>-linux-x86_64.tar.gz   </span><br><span class="line">mv mariadb-<span class="number">5.5</span><span class="number">.31</span>-linux-x86_64 /usr/local/mysql //å¿…éœ€è¿™æ ·ï¼Œå¾ˆå¤šè„šæœ¬æˆ–å¯æ‰§è¡Œç¨‹åºéƒ½ä¼šç›´æ¥è®¿é—®è¿™ä¸ªç›®å½•</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> æƒé™</span><br><span class="line">groupadd mysql             //å¢åŠ  mysql å±ç»„ </span><br><span class="line">useradd -g mysql mysql     //å¢åŠ  mysql ç”¨æˆ· å¹¶å½’äºmysql å±ç»„ </span><br><span class="line">chown mysql:mysql -Rf  /usr/local/mysql    // è®¾ç½® mysql ç›®å½•çš„ç”¨æˆ·åŠç”¨æˆ·ç»„å½’å±ã€‚ </span><br><span class="line">chmod +x -Rf /usr/local/mysql    //èµäºˆå¯æ‰§è¡Œæƒé™ </span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> æ‹·è´é…ç½®æ–‡ä»¶</span><br><span class="line">cp /usr/local/mysql/support-files/my-medium.cnf /etc/my.cnf     //å¤åˆ¶é»˜è®¤mysqlé…ç½® æ–‡ä»¶åˆ°/etcç›®å½• </span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> åˆå§‹åŒ–</span><br><span class="line">/usr/local/mysql/scripts/mysql_install_db --user=mysql          //åˆå§‹åŒ–æ•°æ®åº“ </span><br><span class="line">cp  /usr/local/mysql/support-files/mysql.server    /etc/init.d/mysql    //å¤åˆ¶mysqlæœåŠ¡ç¨‹åº åˆ°ç³»ç»Ÿç›®å½• </span><br><span class="line">chkconfig  mysql on     //æ·»åŠ mysql è‡³ç³»ç»ŸæœåŠ¡å¹¶è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨ </span><br><span class="line">service  mysql  start  //å¯åŠ¨mysql</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span> ç¯å¢ƒå˜é‡é…ç½®</span><br><span class="line">vim /etc/profile   //ç¼–è¾‘profile,å°†mysqlçš„å¯æ‰§è¡Œè·¯å¾„åŠ å…¥ç³»ç»ŸPATH</span><br><span class="line">export PATH=/usr/local/mysql/<span class="built_in">bin</span>:$PATH </span><br><span class="line">source /etc/profile  //ä½¿PATHç”Ÿæ•ˆã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">6.</span> è´¦å·å¯†ç </span><br><span class="line">mysqladmin -u root password <span class="string">&#x27;yourpassword&#x27;</span> //è®¾å®šrootè´¦å·åŠå¯†ç </span><br><span class="line">mysql -u root -p  //ä½¿ç”¨rootç”¨æˆ·ç™»å½•mysql</span><br><span class="line">use mysql  //åˆ‡æ¢è‡³mysqlæ•°æ®åº“ã€‚</span><br><span class="line">select user,host,password <span class="keyword">from</span> user; //æŸ¥çœ‹ç³»ç»Ÿæƒé™</span><br><span class="line">drop user <span class="string">&#x27;&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>; //åˆ é™¤ä¸å®‰å…¨çš„è´¦æˆ·</span><br><span class="line">drop user root@<span class="string">&#x27;::1&#x27;</span>;</span><br><span class="line">drop user root@<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>;</span><br><span class="line">select user,host,password <span class="keyword">from</span> user; //å†æ¬¡æŸ¥çœ‹ç³»ç»Ÿæƒé™ï¼Œç¡®ä¿ä¸å®‰å…¨çš„è´¦æˆ·å‡è¢«åˆ é™¤ã€‚</span><br><span class="line">flush privileges;  //åˆ·æ–°æƒé™</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span> ä¸€äº›å¿…è¦çš„åˆå§‹é…ç½®</span><br><span class="line"><span class="number">1</span>ï¼‰ä¿®æ”¹å­—ç¬¦é›†ä¸ºUTF8</span><br><span class="line">vi /etc/my.cnf</span><br><span class="line">åœ¨[client]ä¸‹é¢æ·»åŠ  default-character-<span class="built_in">set</span> = utf8</span><br><span class="line">åœ¨[mysqld]ä¸‹é¢æ·»åŠ  character_set_server = utf8</span><br><span class="line"><span class="number">2</span>ï¼‰å¢åŠ é”™è¯¯æ—¥å¿—</span><br><span class="line">vi /etc/my.cnf</span><br><span class="line">åœ¨[mysqld]ä¸‹é¢æ·»åŠ ï¼š</span><br><span class="line">log-error = /usr/local/mysql/log/error.log</span><br><span class="line">general-log-file = /usr/local/mysql/log/mysql.log</span><br><span class="line"><span class="number">3</span>) è®¾ç½®ä¸ºä¸åŒºåˆ†å¤§å°å†™ï¼Œlinuxä¸‹é»˜è®¤ä¼šåŒºåˆ†å¤§å°å†™ã€‚</span><br><span class="line">vi /etc/my.cnf</span><br><span class="line">åœ¨[mysqld]ä¸‹é¢æ·»åŠ ï¼š</span><br><span class="line">lower_case_table_name=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">ä¿®æ”¹å®Œé‡å¯ï¼š<span class="comment">#service  mysql  restart</span></span><br></pre></td></tr></table></figure>

<p><strong>Windowç‰ˆæœ¬</strong></p>
<p>å®‰è£…</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€ä¸‹è½½ï¼šMySQL Community Server 5.7.16</span></span><br><span class="line">http://dev.mysql.com/downloads/mysql/</span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€è§£å‹</span></span><br><span class="line">å¦‚æœæƒ³è¦è®©MySQLå®‰è£…åœ¨æŒ‡å®šç›®å½•ï¼Œé‚£ä¹ˆå°±å°†è§£å‹åçš„æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°æŒ‡å®šç›®å½•ï¼Œå¦‚ï¼šC:\mysql-<span class="number">5.7</span><span class="number">.16</span>-winx64</span><br><span class="line"></span><br><span class="line"><span class="comment">#3ã€æ·»åŠ ç¯å¢ƒå˜é‡</span></span><br><span class="line">ã€å³é”®è®¡ç®—æœºã€‘--ã€‹ã€å±æ€§ã€‘--ã€‹ã€é«˜çº§ç³»ç»Ÿè®¾ç½®ã€‘--ã€‹ã€é«˜çº§ã€‘--ã€‹ã€ç¯å¢ƒå˜é‡ã€‘--ã€‹ã€åœ¨ç¬¬äºŒä¸ªå†…å®¹æ¡†ä¸­æ‰¾åˆ° å˜é‡åä¸ºPath çš„ä¸€è¡Œï¼ŒåŒå‡»ã€‘ --&gt; ã€å°†MySQLçš„<span class="built_in">bin</span>ç›®å½•è·¯å¾„è¿½åŠ åˆ°å˜å€¼å€¼ä¸­ï¼Œç”¨ ï¼› åˆ†å‰²ã€‘</span><br><span class="line"></span><br><span class="line"><span class="comment">#4ã€åˆå§‹åŒ–</span></span><br><span class="line">mysqld --initialize-insecure</span><br><span class="line"></span><br><span class="line"><span class="comment">#5ã€å¯åŠ¨MySQLæœåŠ¡</span></span><br><span class="line">mysqld <span class="comment"># å¯åŠ¨MySQLæœåŠ¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#6ã€å¯åŠ¨MySQLå®¢æˆ·ç«¯å¹¶è¿æ¥MySQLæœåŠ¡</span></span><br><span class="line">mysql -u root -p <span class="comment"># è¿æ¥MySQLæœåŠ¡å™¨</span></span><br></pre></td></tr></table></figure>

<p>å°†MySQLæœåŠ¡åˆ¶ä½œæˆwindowsæœåŠ¡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ä¸Šä¸€æ­¥è§£å†³äº†ä¸€äº›é—®é¢˜ï¼Œä½†ä¸å¤Ÿå½»åº•ï¼Œå› ä¸ºåœ¨æ‰§è¡Œã€mysqdã€‘å¯åŠ¨MySQLæœåŠ¡å™¨æ—¶ï¼Œå½“å‰ç»ˆç«¯ä¼šè¢«hangä½ï¼Œé‚£ä¹ˆåšä¸€ä¸‹è®¾ç½®å³å¯è§£å†³æ­¤é—®é¢˜ï¼š</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ³¨æ„ï¼š--installå‰ï¼Œå¿…é¡»ç”¨mysqlå¯åŠ¨å‘½ä»¤çš„ç»å¯¹è·¯å¾„</span><br><span class="line"><span class="comment"># åˆ¶ä½œMySQLçš„WindowsæœåŠ¡ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œæ­¤å‘½ä»¤ï¼š</span></span><br><span class="line"><span class="string">&quot;c:\mysql-5.7.16-winx64\bin\mysqld&quot;</span> --install</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç§»é™¤MySQLçš„WindowsæœåŠ¡ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œæ­¤å‘½ä»¤ï¼š</span></span><br><span class="line"><span class="string">&quot;c:\mysql-5.7.16-winx64\bin\mysqld&quot;</span> --remove</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ³¨å†ŒæˆæœåŠ¡ä¹‹åï¼Œä»¥åå†å¯åŠ¨å’Œå…³é—­MySQLæœåŠ¡æ—¶ï¼Œä»…éœ€æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</span><br><span class="line"><span class="comment"># å¯åŠ¨MySQLæœåŠ¡</span></span><br><span class="line">net start mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­MySQLæœåŠ¡</span></span><br><span class="line">net stop mysql</span><br></pre></td></tr></table></figure>

<h3 id="äº”-mysqlè½¯ä»¶åŸºæœ¬ç®¡ç†"><a href="#äº”-mysqlè½¯ä»¶åŸºæœ¬ç®¡ç†" class="headerlink" title="äº” mysqlè½¯ä»¶åŸºæœ¬ç®¡ç†"></a>äº” mysqlè½¯ä»¶åŸºæœ¬ç®¡ç†</h3><p><strong>1. å¯åŠ¨æŸ¥çœ‹</strong></p>
<p>linuxå¹³å°ä¸‹æŸ¥çœ‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[root@egon ~]<span class="comment"># systemctl start mariadb #å¯åŠ¨</span></span><br><span class="line">[root@egon ~]<span class="comment"># systemctl enable mariadb #è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</span></span><br><span class="line">Created symlink <span class="keyword">from</span> /etc/systemd/system/multi-user.target.wants/mariadb.service to /usr/lib/systemd/system/mariadb.service.</span><br><span class="line">[root@egon ~]<span class="comment"># ps aux |grep mysqld |grep -v grep #æŸ¥çœ‹è¿›ç¨‹ï¼Œmysqld_safeä¸ºå¯åŠ¨mysqlçš„è„šæœ¬æ–‡ä»¶ï¼Œå†…éƒ¨è°ƒç”¨mysqldå‘½ä»¤</span></span><br><span class="line">mysql     <span class="number">3329</span>  <span class="number">0.0</span>  <span class="number">0.0</span> <span class="number">113252</span>  <span class="number">1592</span> ?        Ss   <span class="number">16</span>:<span class="number">19</span>   <span class="number">0</span>:<span class="number">00</span> /<span class="built_in">bin</span>/sh /usr/<span class="built_in">bin</span>/mysqld_safe --basedir=/usr</span><br><span class="line">mysql     <span class="number">3488</span>  <span class="number">0.0</span>  <span class="number">2.3</span> <span class="number">839276</span> <span class="number">90380</span> ?        Sl   <span class="number">16</span>:<span class="number">19</span>   <span class="number">0</span>:<span class="number">00</span> /usr/libexec/mysqld --basedir=/usr --datadir=/var/lib/mysql --plugin-<span class="built_in">dir</span>=/usr/lib64/mysql/plugin --log-error=/var/log/mariadb/mariadb.log --pid-file=/var/run/mariadb/mariadb.pid --socket=/var/lib/mysql/mysql.sock</span><br><span class="line">[root@egon ~]<span class="comment"># netstat -an |grep 3306 #æŸ¥çœ‹ç«¯å£</span></span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">3306</span>            <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:*               LISTEN  </span><br><span class="line">[root@egon ~]<span class="comment"># ll -d /var/lib/mysql #æƒé™ä¸å¯¹ï¼Œå¯åŠ¨ä¸æˆåŠŸï¼Œæ³¨æ„userå’Œgroup</span></span><br><span class="line">drwxr-xr-x <span class="number">5</span> mysql mysql <span class="number">4096</span> Jul <span class="number">20</span> <span class="number">16</span>:<span class="number">28</span> /var/lib/mysql</span><br></pre></td></tr></table></figure>

<p>You must reset your password using ALTER USER statement before executing this statement.</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">å®‰è£…å®Œmysql ä¹‹åï¼Œç™»é™†ä»¥åï¼Œä¸ç®¡è¿è¡Œä»»ä½•å‘½ä»¤ï¼Œæ€»æ˜¯æç¤ºè¿™ä¸ª</span><br><span class="line">mac mysql error You must reset your password using ALTER USER statement before executing this statement.</span><br><span class="line">è§£å†³æ–¹æ³•ï¼š</span><br><span class="line">step <span class="number">1</span>: SET PASSWORD = PASSWORD(<span class="string">&#x27;your new password&#x27;</span>);</span><br><span class="line">step <span class="number">2</span>: ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> PASSWORD EXPIRE NEVER;</span><br><span class="line">step <span class="number">3</span>: flush privileges;</span><br></pre></td></tr></table></figure>

<p><strong>2. ç™»å½•ï¼Œè®¾ç½®å¯†ç </strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">åˆå§‹çŠ¶æ€ä¸‹ï¼Œç®¡ç†å‘˜rootï¼Œå¯†ç ä¸ºç©ºï¼Œé»˜è®¤åªå…è®¸ä»æœ¬æœºç™»å½•localhost</span><br><span class="line">è®¾ç½®å¯†ç </span><br><span class="line">[root@egon ~]<span class="comment"># mysqladmin -uroot password &quot;123&quot;        è®¾ç½®åˆå§‹å¯†ç  ç”±äºåŸå¯†ç ä¸ºç©ºï¼Œå› æ­¤-på¯ä»¥ä¸ç”¨</span></span><br><span class="line">[root@egon ~]<span class="comment"># mysqladmin -uroot -p&quot;123&quot; password &quot;456&quot;        ä¿®æ”¹mysqlå¯†ç ,å› ä¸ºå·²ç»æœ‰å¯†ç äº†ï¼Œæ‰€ä»¥å¿…é¡»è¾“å…¥åŸå¯†ç æ‰èƒ½è®¾ç½®æ–°å¯†ç </span></span><br><span class="line"></span><br><span class="line">å‘½ä»¤æ ¼å¼:</span><br><span class="line">[root@egon ~]<span class="comment"># mysql -h172.31.0.2 -uroot -p456</span></span><br><span class="line">[root@egon ~]<span class="comment"># mysql -uroot -p</span></span><br><span class="line">[root@egon ~]<span class="comment"># mysql                    ä»¥rootç”¨æˆ·ç™»å½•æœ¬æœºï¼Œå¯†ç ä¸ºç©º</span></span><br></pre></td></tr></table></figure>

<p><strong>3. å¿˜è®°å¯†ç </strong></p>
<p><strong>linuxå¹³å°ä¸‹ï¼Œç ´è§£å¯†ç çš„ä¸¤ç§æ–¹å¼</strong></p>
<p>æ–¹æ³•ä¸€ï¼šåˆ é™¤æˆæƒåº“mysqlï¼Œé‡æ–°åˆå§‹åŒ–</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[root@egon ~]<span class="comment"># rm -rf /var/lib/mysql/mysql #æ‰€æœ‰æˆæƒä¿¡æ¯å…¨éƒ¨ä¸¢å¤±ï¼ï¼ï¼</span></span><br><span class="line">[root@egon ~]<span class="comment"># systemctl restart mariadb</span></span><br><span class="line">[root@egon ~]<span class="comment"># mysql</span></span><br></pre></td></tr></table></figure>

<p>æ–¹æ³•äºŒï¼šå¯åŠ¨æ—¶ï¼Œè·³è¿‡æˆæƒåº“</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[root@egon ~]<span class="comment"># vim /etc/my.cnf    #mysqlä¸»é…ç½®æ–‡ä»¶</span></span><br><span class="line">[mysqld]</span><br><span class="line">skip-grant-table</span><br><span class="line">[root@egon ~]<span class="comment"># systemctl restart mariadb</span></span><br><span class="line">[root@egon ~]<span class="comment"># mysql</span></span><br><span class="line">MariaDB [(none)]&gt; update mysql.user <span class="built_in">set</span> password=password(<span class="string">&quot;123&quot;</span>) where user=<span class="string">&quot;root&quot;</span> <span class="keyword">and</span> host=<span class="string">&quot;localhost&quot;</span>;</span><br><span class="line">MariaDB [(none)]&gt; flush privileges;</span><br><span class="line">MariaDB [(none)]&gt; \q</span><br><span class="line">[root@egon ~]<span class="comment"># #æ‰“å¼€/etc/my.cnfå»æ‰skip-grant-table,ç„¶åé‡å¯</span></span><br><span class="line">[root@egon ~]<span class="comment"># systemctl restart mariadb</span></span><br><span class="line">[root@egon ~]<span class="comment"># mysql -u root -p123 #ä»¥æ–°å¯†ç ç™»å½•</span></span><br></pre></td></tr></table></figure>

<p><strong>windowså¹³å°ä¸‹ï¼Œ5.7ç‰ˆæœ¬mysqlï¼Œç ´è§£å¯†ç çš„ä¸¤ç§æ–¹å¼ï¼š</strong></p>
<p>æ–¹å¼ä¸€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1 å…³é—­mysql</span></span><br><span class="line"><span class="comment">#2 åœ¨cmdä¸­æ‰§è¡Œï¼šmysqld --skip-grant-tables</span></span><br><span class="line"><span class="comment">#3 åœ¨cmdä¸­æ‰§è¡Œï¼šmysql</span></span><br><span class="line"><span class="comment">#4 æ‰§è¡Œå¦‚ä¸‹sqlï¼š</span></span><br><span class="line">update mysql.user <span class="built_in">set</span> authentication_string=password(<span class="string">&#x27;&#x27;</span>) where user = <span class="string">&#x27;root&#x27;</span>;</span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line"><span class="comment">#5 tskill mysqld #æˆ–taskkill -f /PID 7832</span></span><br><span class="line"><span class="comment">#6 é‡æ–°å¯åŠ¨mysql</span></span><br></pre></td></tr></table></figure>

<p>æ–¹å¼äºŒ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. å…³é—­mysqlï¼Œå¯ä»¥ç”¨tskill mysqldå°†å…¶æ€æ­»</span></span><br><span class="line"><span class="comment">#2. åœ¨è§£å‹ç›®å½•ä¸‹ï¼Œæ–°å»ºmysqlé…ç½®æ–‡ä»¶my.ini</span></span><br><span class="line"><span class="comment">#3. my.iniå†…å®¹,æŒ‡å®š</span></span><br><span class="line">[mysqld]</span><br><span class="line">skip-grant-tables</span><br><span class="line"></span><br><span class="line"><span class="comment">#4.å¯åŠ¨mysqld</span></span><br><span class="line"><span class="comment">#5.åœ¨cmdé‡Œç›´æ¥è¾“å…¥mysqlç™»å½•ï¼Œç„¶åæ“ä½œ</span></span><br><span class="line">update mysql.user <span class="built_in">set</span> authentication_string=password(<span class="string">&#x27;&#x27;</span>) where user=<span class="string">&#x27;root and host=&#x27;</span>localhost<span class="string">&#x27;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">flush privileges;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#6.æ³¨é‡Šmy.iniä¸­çš„skip-grant-tablesï¼Œç„¶åå¯åŠ¨myqsldï¼Œç„¶åå°±å¯ä»¥ä»¥æ–°å¯†ç ç™»å½•äº†</span></span><br></pre></td></tr></table></figure>

<p><strong>4. åœ¨windowsä¸‹ï¼Œä¸ºmysqlæœåŠ¡æŒ‡å®šé…ç½®æ–‡ä»¶</strong></p>
<p><strong>å¼ºè°ƒï¼šé…ç½®æ–‡ä»¶ä¸­çš„æ³¨é‡Šå¯ä»¥æœ‰ä¸­æ–‡ï¼Œä½†æ˜¯é…ç½®é¡¹ä¸­ä¸èƒ½å‡ºç°ä¸­æ–‡</strong></p>
<p>my.ini</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åœ¨mysqlçš„è§£å‹ç›®å½•ä¸‹ï¼Œæ–°å»ºmy.ini,ç„¶åé…ç½®</span></span><br><span class="line"><span class="comment">#1. åœ¨æ‰§è¡Œmysqldå‘½ä»¤æ—¶ï¼Œä¸‹åˆ—é…ç½®ä¼šç”Ÿæ•ˆï¼Œå³mysqlæœåŠ¡å¯åŠ¨æ—¶ç”Ÿæ•ˆ</span></span><br><span class="line">[mysqld]</span><br><span class="line">;skip-grant-tables</span><br><span class="line">port=<span class="number">3306</span></span><br><span class="line">character_set_server=utf8</span><br><span class="line">default-storage-engine=innodb</span><br><span class="line">innodb_file_per_table=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è§£å‹çš„ç›®å½•</span></span><br><span class="line">basedir=E:\mysql-<span class="number">5.7</span><span class="number">.19</span>-winx64</span><br><span class="line"><span class="comment">#dataç›®å½•</span></span><br><span class="line">datadir=E:\my_data <span class="comment">#åœ¨mysqld --initializeæ—¶ï¼Œå°±ä¼šå°†åˆå§‹æ•°æ®å­˜å…¥æ­¤å¤„æŒ‡å®šçš„ç›®å½•ï¼Œåœ¨åˆå§‹åŒ–ä¹‹åï¼Œå¯åŠ¨mysqlæ—¶ï¼Œå°±ä¼šå»è¿™ä¸ªç›®å½•é‡Œæ‰¾æ•°æ®</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#2. é’ˆå¯¹å®¢æˆ·ç«¯å‘½ä»¤çš„å…¨å±€é…ç½®ï¼Œå½“mysqlå®¢æˆ·ç«¯å‘½ä»¤æ‰§è¡Œæ—¶ï¼Œä¸‹åˆ—é…ç½®ç”Ÿæ•ˆ</span></span><br><span class="line">[client]</span><br><span class="line">port=<span class="number">3306</span></span><br><span class="line">default-character-<span class="built_in">set</span>=utf8</span><br><span class="line">user=root</span><br><span class="line">password=<span class="number">123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3. åªé’ˆå¯¹mysqlè¿™ä¸ªå®¢æˆ·ç«¯çš„é…ç½®ï¼Œ2ä¸­çš„æ˜¯å…¨å±€é…ç½®ï¼Œè€Œæ­¤å¤„çš„åˆ™æ˜¯åªé’ˆå¯¹mysqlè¿™ä¸ªå‘½ä»¤çš„å±€éƒ¨é…ç½®</span></span><br><span class="line">[mysql]</span><br><span class="line">;port=<span class="number">3306</span></span><br><span class="line">;default-character-<span class="built_in">set</span>=utf8</span><br><span class="line">user=egon</span><br><span class="line">password=<span class="number">4573</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ï¼ï¼ï¼å¦‚æœæ²¡æœ‰[mysql],åˆ™ç”¨æˆ·åœ¨æ‰§è¡Œmysqlå‘½ä»¤æ—¶çš„é…ç½®ä»¥[client]ä¸ºå‡†</span></span><br></pre></td></tr></table></figure>

<p><strong>5. ç»Ÿä¸€å­—ç¬¦ç¼–ç </strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">[mysqld]</span><br><span class="line">default-character-<span class="built_in">set</span>=utf8 </span><br><span class="line">[client]</span><br><span class="line">default-character-<span class="built_in">set</span>=utf8 </span><br><span class="line">[mysql]</span><br><span class="line">default-character-<span class="built_in">set</span>=utf8</span><br><span class="line"></span><br><span class="line"><span class="comment">#mysql5.5ä»¥ä¸Šï¼šä¿®æ”¹æ–¹å¼æœ‰æ‰€æ”¹åŠ¨</span></span><br><span class="line">[mysqld]</span><br><span class="line">character-<span class="built_in">set</span>-server=utf8</span><br><span class="line">collation-server=utf8_general_ci</span><br><span class="line">[client]</span><br><span class="line">default-character-<span class="built_in">set</span>=utf8</span><br><span class="line">[mysql]</span><br><span class="line">default-character-<span class="built_in">set</span>=utf8</span><br><span class="line"></span><br><span class="line"><span class="comment">#2. é‡å¯æœåŠ¡</span></span><br><span class="line"><span class="comment">#3. æŸ¥çœ‹ä¿®æ”¹ç»“æœï¼š</span></span><br><span class="line">\s</span><br><span class="line">show variables like <span class="string">&#x27;%char%&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="å…­-åˆè¯†sqlè¯­å¥"><a href="#å…­-åˆè¯†sqlè¯­å¥" class="headerlink" title="å…­ åˆè¯†sqlè¯­å¥"></a>å…­ åˆè¯†sqlè¯­å¥</h3><p>æœ‰äº†mysqlè¿™ä¸ªæ•°æ®åº“è½¯ä»¶ï¼Œå°±å¯ä»¥å°†ç¨‹åºå‘˜ä»å¯¹æ•°æ®çš„ç®¡ç†ä¸­è§£è„±å‡ºæ¥ï¼Œä¸“æ³¨äºå¯¹ç¨‹åºé€»è¾‘çš„ç¼–å†™</p>
<p>mysqlæœåŠ¡ç«¯è½¯ä»¶å³mysqldå¸®æˆ‘ä»¬ç®¡ç†å¥½æ–‡ä»¶å¤¹ä»¥åŠæ–‡ä»¶ï¼Œå‰ææ˜¯ä½œä¸ºä½¿ç”¨è€…çš„æˆ‘ä»¬ï¼Œéœ€è¦ä¸‹è½½mysqlçš„å®¢æˆ·ç«¯ï¼Œæˆ–è€…å…¶ä»–æ¨¡å—æ¥è¿æ¥åˆ°mysqldï¼Œç„¶åä½¿ç”¨mysqlè½¯ä»¶è§„å®šçš„è¯­æ³•æ ¼å¼å»æäº¤è‡ªå·±å‘½ä»¤ï¼Œå®ç°å¯¹æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶çš„ç®¡ç†ã€‚è¯¥è¯­æ³•å³sqlï¼ˆStructured Query Language å³ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">SQLè¯­è¨€ä¸»è¦ç”¨äºå­˜å–æ•°æ®ã€æŸ¥è¯¢æ•°æ®ã€æ›´æ–°æ•°æ®å’Œç®¡ç†å…³ç³»æ•°æ®åº“ç³»ç»Ÿ,SQLè¯­è¨€ç”±IBMå¼€å‘ã€‚SQLè¯­è¨€åˆ†ä¸º<span class="number">3</span>ç§ç±»å‹ï¼š</span><br><span class="line"><span class="comment">#1ã€DDLè¯­å¥    æ•°æ®åº“å®šä¹‰è¯­è¨€ï¼š æ•°æ®åº“ã€è¡¨ã€è§†å›¾ã€ç´¢å¼•ã€å­˜å‚¨è¿‡ç¨‹ï¼Œä¾‹å¦‚CREATE DROP ALTER</span></span><br><span class="line"><span class="comment">#2ã€DMLè¯­å¥    æ•°æ®åº“æ“çºµè¯­è¨€ï¼š æ’å…¥æ•°æ®INSERTã€åˆ é™¤æ•°æ®DELETEã€æ›´æ–°æ•°æ®UPDATEã€æŸ¥è¯¢æ•°æ®SELECT</span></span><br><span class="line"><span class="comment">#3ã€DCLè¯­å¥    æ•°æ®åº“æ§åˆ¶è¯­è¨€ï¼š ä¾‹å¦‚æ§åˆ¶ç”¨æˆ·çš„è®¿é—®æƒé™GRANTã€REVOKE</span></span><br><span class="line"><span class="comment">#1. æ“ä½œæ–‡ä»¶å¤¹</span></span><br><span class="line">        å¢ï¼šcreate database db1 charset utf8;</span><br><span class="line">        æŸ¥ï¼šshow databases;</span><br><span class="line">        æ”¹ï¼šalter database db1 charset latin1;</span><br><span class="line">        åˆ é™¤: drop database db1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#2. æ“ä½œæ–‡ä»¶</span></span><br><span class="line">    å…ˆåˆ‡æ¢åˆ°æ–‡ä»¶å¤¹ä¸‹ï¼šuse db1</span><br><span class="line">        å¢ï¼šcreate table t1(<span class="built_in">id</span> <span class="built_in">int</span>,name char);</span><br><span class="line">        æŸ¥ï¼šshow tables</span><br><span class="line">        æ”¹ï¼šalter table t1 modify name char(<span class="number">3</span>);</span><br><span class="line">              alter table t1 change name name1 char(<span class="number">2</span>);</span><br><span class="line">        åˆ ï¼šdrop table t1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#3. æ“ä½œæ–‡ä»¶ä¸­çš„å†…å®¹/è®°å½•</span></span><br><span class="line">        å¢ï¼šinsert into t1 values(<span class="number">1</span>,<span class="string">&#x27;egon1&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;egon2&#x27;</span>),(<span class="number">3</span>,<span class="string">&#x27;egon3&#x27;</span>);</span><br><span class="line">        æŸ¥ï¼šselect * <span class="keyword">from</span> t1;</span><br><span class="line">        æ”¹ï¼šupdate t1 <span class="built_in">set</span> name=<span class="string">&#x27;sb&#x27;</span> where <span class="built_in">id</span>=<span class="number">2</span>;</span><br><span class="line">        åˆ ï¼šdelete <span class="keyword">from</span> t1 where <span class="built_in">id</span>=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        æ¸…ç©ºè¡¨ï¼š</span><br><span class="line">            delete <span class="keyword">from</span> t1; <span class="comment">#å¦‚æœæœ‰è‡ªå¢idï¼Œæ–°å¢çš„æ•°æ®ï¼Œä»ç„¶æ˜¯ä»¥åˆ é™¤å‰çš„æœ€åä¸€æ ·ä½œä¸ºèµ·å§‹ã€‚</span></span><br><span class="line">            truncate table t1;æ•°æ®é‡å¤§ï¼Œåˆ é™¤é€Ÿåº¦æ¯”ä¸Šä¸€æ¡å¿«ï¼Œä¸”ç›´æ¥ä»é›¶å¼€å§‹ï¼Œ</span><br><span class="line"></span><br><span class="line">            auto_increment è¡¨ç¤ºï¼šè‡ªå¢</span><br><span class="line">            primary key è¡¨ç¤ºï¼šçº¦æŸï¼ˆä¸èƒ½é‡å¤ä¸”ä¸èƒ½ä¸ºç©ºï¼‰ï¼›åŠ é€ŸæŸ¥æ‰¾</span><br></pre></td></tr></table></figure>

<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2>]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>37-å¹¶å‘ç¼–ç¨‹ï¼ˆå…­ï¼‰</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/37_python%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%8D%8F%E7%A8%8B/</url>
    <content><![CDATA[<h3 id="ä¸€-å¼•å­"><a href="#ä¸€-å¼•å­" class="headerlink" title="ä¸€ å¼•å­"></a>ä¸€ å¼•å­</h3><p>æœ¬èŠ‚çš„ä¸»é¢˜æ˜¯åŸºäºå•çº¿ç¨‹æ¥å®ç°å¹¶å‘ï¼Œå³åªç”¨ä¸€ä¸ªä¸»çº¿ç¨‹ï¼ˆå¾ˆæ˜æ˜¾å¯åˆ©ç”¨çš„cpuåªæœ‰ä¸€ä¸ªï¼‰æƒ…å†µä¸‹å®ç°å¹¶å‘ï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦å…ˆå›é¡¾ä¸‹å¹¶å‘çš„æœ¬è´¨ï¼šåˆ‡æ¢+ä¿å­˜çŠ¶æ€</p>
<p>cpuæ­£åœ¨è¿è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œä¼šåœ¨ä¸¤ç§æƒ…å†µä¸‹åˆ‡èµ°å»æ‰§è¡Œå…¶ä»–çš„ä»»åŠ¡ï¼ˆåˆ‡æ¢ç”±æ“ä½œç³»ç»Ÿå¼ºåˆ¶æ§åˆ¶ï¼‰ï¼Œä¸€ç§æƒ…å†µæ˜¯è¯¥ä»»åŠ¡å‘ç”Ÿäº†é˜»å¡ï¼Œå¦å¤–ä¸€ç§æƒ…å†µæ˜¯è¯¥ä»»åŠ¡è®¡ç®—çš„æ—¶é—´è¿‡é•¿æˆ–æœ‰ä¸€ä¸ªä¼˜å…ˆçº§æ›´é«˜çš„ç¨‹åºæ›¿ä»£äº†å®ƒ</p>
<p><img src="https://pic1.zhimg.com/80/v2-1b816bea5d7900ca5faad9abdee1cec4_720w.jpg" alt="img"></p>
<p>psï¼šåœ¨ä»‹ç»è¿›ç¨‹ç†è®ºæ—¶ï¼ŒæåŠè¿›ç¨‹çš„ä¸‰ç§æ‰§è¡ŒçŠ¶æ€ï¼Œè€Œçº¿ç¨‹æ‰æ˜¯æ‰§è¡Œå•ä½ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥å°†ä¸Šå›¾ç†è§£ä¸ºçº¿ç¨‹çš„ä¸‰ç§çŠ¶æ€</p>
<p>ä¸€ï¼šå…¶ä¸­ç¬¬äºŒç§æƒ…å†µå¹¶ä¸èƒ½æå‡æ•ˆç‡ï¼Œåªæ˜¯ä¸ºäº†è®©cpuèƒ½å¤Ÿé›¨éœ²å‡æ²¾ï¼Œå®ç°çœ‹èµ·æ¥æ‰€æœ‰ä»»åŠ¡éƒ½è¢«â€œåŒæ—¶â€æ‰§è¡Œçš„æ•ˆæœï¼Œå¦‚æœå¤šä¸ªä»»åŠ¡éƒ½æ˜¯çº¯è®¡ç®—çš„ï¼Œè¿™ç§åˆ‡æ¢åè€Œä¼šé™ä½æ•ˆç‡ã€‚ä¸ºæ­¤æˆ‘ä»¬å¯ä»¥åŸºäºyieldæ¥éªŒè¯ã€‚yieldæœ¬èº«å°±æ˜¯ä¸€ç§åœ¨å•çº¿ç¨‹ä¸‹å¯ä»¥ä¿å­˜ä»»åŠ¡è¿è¡ŒçŠ¶æ€çš„æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥ç®€å•å¤ä¹ ä¸€ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1 yiledå¯ä»¥ä¿å­˜çŠ¶æ€ï¼Œyieldçš„çŠ¶æ€ä¿å­˜ä¸æ“ä½œç³»ç»Ÿçš„ä¿å­˜çº¿ç¨‹çŠ¶æ€å¾ˆåƒï¼Œä½†æ˜¯yieldæ˜¯ä»£ç çº§åˆ«æ§åˆ¶çš„ï¼Œæ›´è½»é‡çº§</span></span><br><span class="line"><span class="comment">#2 sendå¯ä»¥æŠŠä¸€ä¸ªå‡½æ•°çš„ç»“æœä¼ ç»™å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œä»¥æ­¤å®ç°å•çº¿ç¨‹å†…ç¨‹åºä¹‹é—´çš„åˆ‡æ¢</span></span><br></pre></td></tr></table></figure>

<p>å•çº¯åœ°åˆ‡æ¢åè€Œä¼šé™ä½è¿è¡Œæ•ˆç‡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">1ã€åç¨‹ï¼š</span></span><br><span class="line"><span class="string">    å•çº¿ç¨‹å®ç°å¹¶å‘</span></span><br><span class="line"><span class="string">    åœ¨åº”ç”¨ç¨‹åºé‡Œæ§åˆ¶å¤šä¸ªä»»åŠ¡çš„åˆ‡æ¢+ä¿å­˜çŠ¶æ€</span></span><br><span class="line"><span class="string">    ä¼˜ç‚¹ï¼š</span></span><br><span class="line"><span class="string">        åº”ç”¨ç¨‹åºçº§åˆ«é€Ÿåº¦è¦è¿œè¿œé«˜äºæ“ä½œç³»ç»Ÿçš„åˆ‡æ¢</span></span><br><span class="line"><span class="string">    ç¼ºç‚¹ï¼š</span></span><br><span class="line"><span class="string">        å¤šä¸ªä»»åŠ¡ä¸€æ—¦æœ‰ä¸€ä¸ªé˜»å¡æ²¡æœ‰åˆ‡ï¼Œæ•´ä¸ªçº¿ç¨‹éƒ½é˜»å¡åœ¨åŸåœ°</span></span><br><span class="line"><span class="string">        è¯¥çº¿ç¨‹å†…çš„å…¶ä»–çš„ä»»åŠ¡éƒ½ä¸èƒ½æ‰§è¡Œäº†</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        ä¸€æ—¦å¼•å…¥åç¨‹ï¼Œå°±éœ€è¦æ£€æµ‹å•çº¿ç¨‹ä¸‹æ‰€æœ‰çš„IOè¡Œä¸º,</span></span><br><span class="line"><span class="string">        å®ç°é‡åˆ°IOå°±åˆ‡æ¢,å°‘ä¸€ä¸ªéƒ½ä¸è¡Œï¼Œä»¥ä¸ºä¸€æ—¦ä¸€ä¸ªä»»åŠ¡é˜»å¡äº†ï¼Œæ•´ä¸ªçº¿ç¨‹å°±é˜»å¡äº†ï¼Œ</span></span><br><span class="line"><span class="string">        å…¶ä»–çš„ä»»åŠ¡å³ä¾¿æ˜¯å¯ä»¥è®¡ç®—ï¼Œä½†æ˜¯ä¹Ÿæ— æ³•è¿è¡Œäº†</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2ã€åç¨‹åºçš„ç›®çš„ï¼š</span></span><br><span class="line"><span class="string">    æƒ³è¦åœ¨å•çº¿ç¨‹ä¸‹å®ç°å¹¶å‘</span></span><br><span class="line"><span class="string">    å¹¶å‘æŒ‡çš„æ˜¯å¤šä¸ªä»»åŠ¡çœ‹èµ·æ¥æ˜¯åŒæ—¶è¿è¡Œçš„</span></span><br><span class="line"><span class="string">    å¹¶å‘=åˆ‡æ¢+ä¿å­˜çŠ¶æ€</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸²è¡Œæ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func1</span>():</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000000</span>):</span><br><span class="line">        i+<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func2</span>():</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000000</span>):</span><br><span class="line">        i+<span class="number">1</span></span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line">func1()</span><br><span class="line">func2()</span><br><span class="line">stop = time.time()</span><br><span class="line"><span class="built_in">print</span>(stop - start)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#åŸºäºyieldå¹¶å‘æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func1</span>():</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">yield</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func2</span>():</span></span><br><span class="line">    g=func1()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000000</span>):</span><br><span class="line">        i+<span class="number">1</span></span><br><span class="line">        <span class="built_in">next</span>(g)</span><br><span class="line"></span><br><span class="line">start=time.time()</span><br><span class="line">func2()</span><br><span class="line">stop=time.time()</span><br><span class="line"><span class="built_in">print</span>(stop-start)</span><br></pre></td></tr></table></figure>

<p>äºŒï¼šç¬¬ä¸€ç§æƒ…å†µçš„åˆ‡æ¢ã€‚åœ¨ä»»åŠ¡ä¸€é‡åˆ°ioæƒ…å†µä¸‹ï¼Œåˆ‡åˆ°ä»»åŠ¡äºŒå»æ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥åˆ©ç”¨ä»»åŠ¡ä¸€é˜»å¡çš„æ—¶é—´å®Œæˆä»»åŠ¡äºŒçš„è®¡ç®—ï¼Œæ•ˆç‡çš„æå‡å°±åœ¨äºæ­¤ã€‚</p>
<p>yieldä¸èƒ½æ£€æµ‹IOï¼Œå®ç°é‡åˆ°IOè‡ªåŠ¨åˆ‡æ¢</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func1</span>():</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;func1&#x27;</span>)</span><br><span class="line">        <span class="keyword">yield</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func2</span>():</span></span><br><span class="line">    g=func1()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000000</span>):</span><br><span class="line">        i+<span class="number">1</span></span><br><span class="line">        <span class="built_in">next</span>(g)</span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;func2&#x27;</span>)</span><br><span class="line">start=time.time()</span><br><span class="line">func2()</span><br><span class="line">stop=time.time()</span><br><span class="line"><span class="built_in">print</span>(stop-start)</span><br></pre></td></tr></table></figure>

<p><strong>å¯¹äºå•çº¿ç¨‹ä¸‹ï¼Œæˆ‘ä»¬ä¸å¯é¿å…ç¨‹åºä¸­å‡ºç°ioæ“ä½œï¼Œä½†å¦‚æœæˆ‘ä»¬èƒ½åœ¨è‡ªå·±çš„ç¨‹åºä¸­ï¼ˆå³ç”¨æˆ·ç¨‹åºçº§åˆ«ï¼Œè€Œéæ“ä½œç³»ç»Ÿçº§åˆ«ï¼‰æ§åˆ¶å•çº¿ç¨‹ä¸‹çš„å¤šä¸ªä»»åŠ¡èƒ½åœ¨ä¸€ä¸ªä»»åŠ¡é‡åˆ°ioé˜»å¡æ—¶å°±åˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ªä»»åŠ¡å»è®¡ç®—ï¼Œè¿™æ ·å°±ä¿è¯äº†è¯¥çº¿ç¨‹èƒ½å¤Ÿæœ€å¤§é™åº¦åœ°å¤„äºå°±ç»ªæ€ï¼Œå³éšæ—¶éƒ½å¯ä»¥è¢«cpuæ‰§è¡Œçš„çŠ¶æ€ï¼Œç›¸å½“äºæˆ‘ä»¬åœ¨ç”¨æˆ·ç¨‹åºçº§åˆ«å°†è‡ªå·±çš„ioæ“ä½œæœ€å¤§é™åº¦åœ°éšè—èµ·æ¥ï¼Œä»è€Œå¯ä»¥è¿·æƒ‘æ“ä½œç³»ç»Ÿï¼Œè®©å…¶çœ‹åˆ°ï¼šè¯¥çº¿ç¨‹å¥½åƒæ˜¯ä¸€ç›´åœ¨è®¡ç®—ï¼Œioæ¯”è¾ƒå°‘ï¼Œä»è€Œæ›´å¤šçš„å°†cpuçš„æ‰§è¡Œæƒé™åˆ†é…ç»™æˆ‘ä»¬çš„çº¿ç¨‹ã€‚</strong></p>
<p>åç¨‹çš„æœ¬è´¨å°±æ˜¯åœ¨å•çº¿ç¨‹ä¸‹ï¼Œç”±ç”¨æˆ·è‡ªå·±æ§åˆ¶ä¸€ä¸ªä»»åŠ¡é‡åˆ°ioé˜»å¡äº†å°±åˆ‡æ¢å¦å¤–ä¸€ä¸ªä»»åŠ¡å»æ‰§è¡Œï¼Œä»¥æ­¤æ¥æå‡æ•ˆç‡ã€‚ä¸ºäº†å®ç°å®ƒï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å¯»ä¸€ç§å¯ä»¥åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. å¯ä»¥æ§åˆ¶å¤šä¸ªä»»åŠ¡ä¹‹é—´çš„åˆ‡æ¢ï¼Œåˆ‡æ¢ä¹‹å‰å°†ä»»åŠ¡çš„çŠ¶æ€ä¿å­˜ä¸‹æ¥ï¼Œä»¥ä¾¿é‡æ–°è¿è¡Œæ—¶ï¼Œå¯ä»¥åŸºäºæš‚åœçš„ä½ç½®ç»§ç»­æ‰§è¡Œã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2. ä½œä¸º1çš„è¡¥å……ï¼šå¯ä»¥æ£€æµ‹ioæ“ä½œï¼Œåœ¨é‡åˆ°ioæ“ä½œçš„æƒ…å†µä¸‹æ‰å‘ç”Ÿåˆ‡æ¢</span></span><br></pre></td></tr></table></figure>

<h3 id="äºŒ-åç¨‹ä»‹ç»"><a href="#äºŒ-åç¨‹ä»‹ç»" class="headerlink" title="äºŒ åç¨‹ä»‹ç»"></a>äºŒ åç¨‹ä»‹ç»</h3><p>åç¨‹ï¼šæ˜¯å•çº¿ç¨‹ä¸‹çš„å¹¶å‘ï¼Œåˆç§°å¾®çº¿ç¨‹ï¼Œçº¤ç¨‹ã€‚è‹±æ–‡åCoroutineã€‚ä¸€å¥è¯è¯´æ˜ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼š<strong>åç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œå³åç¨‹æ˜¯ç”±ç”¨æˆ·ç¨‹åºè‡ªå·±æ§åˆ¶è°ƒåº¦çš„ã€‚ã€</strong></p>
<p>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. pythonçš„çº¿ç¨‹å±äºå†…æ ¸çº§åˆ«çš„ï¼Œå³ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶è°ƒåº¦ï¼ˆå¦‚å•çº¿ç¨‹é‡åˆ°ioæˆ–æ‰§è¡Œæ—¶é—´è¿‡é•¿å°±ä¼šè¢«è¿«äº¤å‡ºcpuæ‰§è¡Œæƒé™ï¼Œåˆ‡æ¢å…¶ä»–çº¿ç¨‹è¿è¡Œï¼‰</span></span><br><span class="line"><span class="comment">#2. å•çº¿ç¨‹å†…å¼€å¯åç¨‹ï¼Œä¸€æ—¦é‡åˆ°ioï¼Œå°±ä¼šä»åº”ç”¨ç¨‹åºçº§åˆ«ï¼ˆè€Œéæ“ä½œç³»ç»Ÿï¼‰æ§åˆ¶åˆ‡æ¢ï¼Œä»¥æ­¤æ¥æå‡æ•ˆç‡ï¼ˆï¼ï¼ï¼éioæ“ä½œçš„åˆ‡æ¢ä¸æ•ˆç‡æ— å…³ï¼‰</span></span><br></pre></td></tr></table></figure>

<p>å¯¹æ¯”æ“ä½œç³»ç»Ÿæ§åˆ¶çº¿ç¨‹çš„åˆ‡æ¢ï¼Œç”¨æˆ·åœ¨å•çº¿ç¨‹å†…æ§åˆ¶åç¨‹çš„åˆ‡æ¢</p>
<p>ä¼˜ç‚¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. åç¨‹çš„åˆ‡æ¢å¼€é”€æ›´å°ï¼Œå±äºç¨‹åºçº§åˆ«çš„åˆ‡æ¢ï¼Œæ“ä½œç³»ç»Ÿå®Œå…¨æ„ŸçŸ¥ä¸åˆ°ï¼Œå› è€Œæ›´åŠ è½»é‡çº§</span></span><br><span class="line"><span class="comment">#2. å•çº¿ç¨‹å†…å°±å¯ä»¥å®ç°å¹¶å‘çš„æ•ˆæœï¼Œæœ€å¤§é™åº¦åœ°åˆ©ç”¨cpu</span></span><br></pre></td></tr></table></figure>

<p>ç¼ºç‚¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. åç¨‹çš„æœ¬è´¨æ˜¯å•çº¿ç¨‹ä¸‹ï¼Œæ— æ³•åˆ©ç”¨å¤šæ ¸ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªç¨‹åºå¼€å¯å¤šä¸ªè¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹å†…å¼€å¯å¤šä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å†…å¼€å¯åç¨‹</span></span><br><span class="line"><span class="comment">#2. åç¨‹æŒ‡çš„æ˜¯å•ä¸ªçº¿ç¨‹ï¼Œå› è€Œä¸€æ—¦åç¨‹å‡ºç°é˜»å¡ï¼Œå°†ä¼šé˜»å¡æ•´ä¸ªçº¿ç¨‹</span></span><br></pre></td></tr></table></figure>

<p>æ€»ç»“åç¨‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>å¿…é¡»åœ¨åªæœ‰ä¸€ä¸ªå•çº¿ç¨‹é‡Œå®ç°å¹¶å‘</strong></li>
<li><strong>ä¿®æ”¹å…±äº«æ•°æ®ä¸éœ€åŠ é”</strong></li>
<li><strong>ç”¨æˆ·ç¨‹åºé‡Œè‡ªå·±ä¿å­˜å¤šä¸ªæ§åˆ¶æµçš„ä¸Šä¸‹æ–‡æ ˆ</strong></li>
<li><strong>é™„åŠ ï¼šä¸€ä¸ªåç¨‹é‡åˆ°IOæ“ä½œè‡ªåŠ¨åˆ‡æ¢åˆ°å…¶å®ƒåç¨‹ï¼ˆå¦‚ä½•å®ç°æ£€æµ‹IOï¼Œyieldã€greenletéƒ½æ— æ³•å®ç°ï¼Œå°±ç”¨åˆ°äº†geventæ¨¡å—ï¼ˆselectæœºåˆ¶ï¼‰ï¼‰</strong></li>
</ol>
<h3 id="ä¸‰-Greenlet"><a href="#ä¸‰-Greenlet" class="headerlink" title="ä¸‰ Greenlet"></a>ä¸‰ Greenlet</h3><p>å¦‚æœæˆ‘ä»¬åœ¨å•ä¸ªçº¿ç¨‹å†…æœ‰20ä¸ªä»»åŠ¡ï¼Œè¦æƒ³å®ç°åœ¨å¤šä¸ªä»»åŠ¡ä¹‹é—´åˆ‡æ¢ï¼Œä½¿ç”¨yieldç”Ÿæˆå™¨çš„æ–¹å¼è¿‡äºéº»çƒ¦ï¼ˆéœ€è¦å…ˆå¾—åˆ°åˆå§‹åŒ–ä¸€æ¬¡çš„ç”Ÿæˆå™¨ï¼Œç„¶åå†è°ƒç”¨sendã€‚ã€‚ã€‚éå¸¸éº»çƒ¦ï¼‰ï¼Œè€Œä½¿ç”¨greenletæ¨¡å—å¯ä»¥éå¸¸ç®€å•åœ°å®ç°è¿™20ä¸ªä»»åŠ¡ç›´æ¥çš„åˆ‡æ¢</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…</span></span><br><span class="line">pip3 install greenlet</span><br><span class="line"><span class="keyword">from</span> greenlet <span class="keyword">import</span> greenlet</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">eat</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s eat 1&#x27;</span> %name)</span><br><span class="line">    g2.switch(<span class="string">&#x27;egon&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s eat 2&#x27;</span> %name)</span><br><span class="line">    g2.switch()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">play</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s play 1&#x27;</span> %name)</span><br><span class="line">    g1.switch()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s play 2&#x27;</span> %name)</span><br><span class="line"></span><br><span class="line">g1=greenlet(eat)</span><br><span class="line">g2=greenlet(play)</span><br><span class="line"></span><br><span class="line">g1.switch(<span class="string">&#x27;egon&#x27;</span>)<span class="comment">#å¯ä»¥åœ¨ç¬¬ä¸€æ¬¡switchæ—¶ä¼ å…¥å‚æ•°ï¼Œä»¥åéƒ½ä¸éœ€è¦</span></span><br></pre></td></tr></table></figure>

<p>å•çº¯çš„åˆ‡æ¢ï¼ˆåœ¨æ²¡æœ‰ioçš„æƒ…å†µä¸‹æˆ–è€…æ²¡æœ‰é‡å¤å¼€è¾Ÿå†…å­˜ç©ºé—´çš„æ“ä½œï¼‰ï¼Œåè€Œä¼šé™ä½ç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#é¡ºåºæ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span>():</span></span><br><span class="line">    res=<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100000000</span>):</span><br><span class="line">        res+=i</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span>():</span></span><br><span class="line">    res=<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100000000</span>):</span><br><span class="line">        res*=i</span><br><span class="line"></span><br><span class="line">start=time.time()</span><br><span class="line">f1()</span><br><span class="line">f2()</span><br><span class="line">stop=time.time()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;run time is %s&#x27;</span> %(stop-start)) <span class="comment">#10.985628366470337</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ‡æ¢</span></span><br><span class="line"><span class="keyword">from</span> greenlet <span class="keyword">import</span> greenlet</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span>():</span></span><br><span class="line">    res=<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100000000</span>):</span><br><span class="line">        res+=i</span><br><span class="line">        g2.switch()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span>():</span></span><br><span class="line">    res=<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100000000</span>):</span><br><span class="line">        res*=i</span><br><span class="line">        g1.switch()</span><br><span class="line"></span><br><span class="line">start=time.time()</span><br><span class="line">g1=greenlet(f1)</span><br><span class="line">g2=greenlet(f2)</span><br><span class="line">g1.switch()</span><br><span class="line">stop=time.time()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;run time is %s&#x27;</span> %(stop-start)) <span class="comment"># 52.763017892837524</span></span><br></pre></td></tr></table></figure>

<p>greenletåªæ˜¯æä¾›äº†ä¸€ç§æ¯”generatoræ›´åŠ ä¾¿æ·çš„åˆ‡æ¢æ–¹å¼ï¼Œå½“åˆ‡åˆ°ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶å¦‚æœé‡åˆ°ioï¼Œé‚£å°±åŸåœ°é˜»å¡ï¼Œä»ç„¶æ˜¯æ²¡æœ‰è§£å†³é‡åˆ°IOè‡ªåŠ¨åˆ‡æ¢æ¥æå‡æ•ˆç‡çš„é—®é¢˜ã€‚</p>
<p>å•çº¿ç¨‹é‡Œçš„è¿™20ä¸ªä»»åŠ¡çš„ä»£ç é€šå¸¸ä¼šæ—¢æœ‰è®¡ç®—æ“ä½œåˆæœ‰é˜»å¡æ“ä½œï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨æ‰§è¡Œä»»åŠ¡1æ—¶é‡åˆ°é˜»å¡ï¼Œå°±åˆ©ç”¨é˜»å¡çš„æ—¶é—´å»æ‰§è¡Œä»»åŠ¡2ã€‚ã€‚ã€‚ã€‚å¦‚æ­¤ï¼Œæ‰èƒ½æé«˜æ•ˆç‡ï¼Œè¿™å°±ç”¨åˆ°äº†Geventæ¨¡å—ã€‚</p>
<h3 id="å››-Geventä»‹ç»"><a href="#å››-Geventä»‹ç»" class="headerlink" title="å›› Geventä»‹ç»"></a>å›› Geventä»‹ç»</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…</span></span><br><span class="line">pip3 install gevent</span><br></pre></td></tr></table></figure>

<p>Gevent æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œå¯ä»¥è½»æ¾é€šè¿‡geventå®ç°å¹¶å‘åŒæ­¥æˆ–å¼‚æ­¥ç¼–ç¨‹ï¼Œåœ¨geventä¸­ç”¨åˆ°çš„ä¸»è¦æ¨¡å¼æ˜¯<strong>Greenlet</strong>, å®ƒæ˜¯ä»¥Cæ‰©å±•æ¨¡å—å½¢å¼æ¥å…¥Pythonçš„è½»é‡çº§åç¨‹ã€‚ Greenletå…¨éƒ¨è¿è¡Œåœ¨ä¸»ç¨‹åºæ“ä½œç³»ç»Ÿè¿›ç¨‹çš„å†…éƒ¨ï¼Œä½†å®ƒä»¬è¢«åä½œå¼åœ°è°ƒåº¦ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç”¨æ³•</span></span><br><span class="line">g1=gevent.spawn(func,<span class="number">1</span>,,<span class="number">2</span>,<span class="number">3</span>,x=<span class="number">4</span>,y=<span class="number">5</span>)åˆ›å»ºä¸€ä¸ªåç¨‹å¯¹è±¡g1ï¼Œspawnæ‹¬å·å†…ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°åï¼Œå¦‚eatï¼Œåé¢å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ï¼Œå¯ä»¥æ˜¯ä½ç½®å®å‚æˆ–å…³é”®å­—å®å‚ï¼Œéƒ½æ˜¯ä¼ ç»™å‡½æ•°eatçš„</span><br><span class="line"></span><br><span class="line">g2=gevent.spawn(func2)</span><br><span class="line"></span><br><span class="line">g1.join() <span class="comment">#ç­‰å¾…g1ç»“æŸ</span></span><br><span class="line"></span><br><span class="line">g2.join() <span class="comment">#ç­‰å¾…g2ç»“æŸ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆ–è€…ä¸Šè¿°ä¸¤æ­¥åˆä½œä¸€æ­¥ï¼šgevent.joinall([g1,g2])</span></span><br><span class="line"></span><br><span class="line">g1.value<span class="comment">#æ‹¿åˆ°func1çš„è¿”å›å€¼</span></span><br></pre></td></tr></table></figure>

<p><strong>é‡åˆ°IOé˜»å¡æ—¶ä¼šè‡ªåŠ¨åˆ‡æ¢ä»»åŠ¡</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gevent</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">eat</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s eat 1&#x27;</span> %name)</span><br><span class="line">    gevent.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s eat 2&#x27;</span> %name)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">play</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s play 1&#x27;</span> %name)</span><br><span class="line">    gevent.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;%s play 2&#x27;</span> %name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">g1=gevent.spawn(eat,<span class="string">&#x27;egon&#x27;</span>)</span><br><span class="line">g2=gevent.spawn(play,name=<span class="string">&#x27;egon&#x27;</span>)</span><br><span class="line">g1.join()</span><br><span class="line">g2.join()</span><br><span class="line"><span class="comment">#æˆ–è€…gevent.joinall([g1,g2])</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ä¸»&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>ä¸Šä¾‹gevent.sleep(2)æ¨¡æ‹Ÿçš„æ˜¯geventå¯ä»¥è¯†åˆ«çš„ioé˜»å¡,</strong></p>
<p><strong>è€Œtime.sleep(2)æˆ–å…¶ä»–çš„é˜»å¡,geventæ˜¯ä¸èƒ½ç›´æ¥è¯†åˆ«çš„éœ€è¦ç”¨ä¸‹é¢ä¸€è¡Œä»£ç ,æ‰“è¡¥ä¸,å°±å¯ä»¥è¯†åˆ«äº†</strong></p>
<p><strong>from gevent import monkey;monkey.patch_all()å¿…é¡»æ”¾åˆ°è¢«æ‰“è¡¥ä¸è€…çš„å‰é¢ï¼Œå¦‚timeï¼Œsocketæ¨¡å—ä¹‹å‰</strong></p>
<p><strong>æˆ–è€…æˆ‘ä»¬å¹²è„†è®°å¿†æˆï¼šè¦ç”¨geventï¼Œéœ€è¦å°†from gevent import monkey;monkey.patch_all()æ”¾åˆ°æ–‡ä»¶çš„å¼€å¤´</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> gevent <span class="keyword">import</span> monkey;monkey.patch_all()</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> gevent</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">eat</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;eat food 1&#x27;</span>)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;eat food 2&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">play</span>():</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;play 1&#x27;</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;play 2&#x27;</span>)</span><br><span class="line"></span><br><span class="line">g1=gevent.spawn(eat)</span><br><span class="line">g2=gevent.spawn(play_phone)</span><br><span class="line">gevent.joinall([g1,g2])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ä¸»&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥ç”¨threading.current_thread().getName()æ¥æŸ¥çœ‹æ¯ä¸ªg1å’Œg2ï¼ŒæŸ¥çœ‹çš„ç»“æœä¸ºDummyThread-nï¼Œå³å‡çº¿ç¨‹</p>
<h3 id="äº”-Geventä¹‹åŒæ­¥ä¸å¼‚æ­¥"><a href="#äº”-Geventä¹‹åŒæ­¥ä¸å¼‚æ­¥" class="headerlink" title="äº” Geventä¹‹åŒæ­¥ä¸å¼‚æ­¥"></a>äº” Geventä¹‹åŒæ­¥ä¸å¼‚æ­¥</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> gevent <span class="keyword">import</span> spawn,joinall,monkey;monkey.patch_all()</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">task</span>(<span class="params">pid</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Some non-deterministic task</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    time.sleep(<span class="number">0.5</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Task %s done&#x27;</span> % pid)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">synchronous</span>():</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        task(i)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">asynchronous</span>():</span></span><br><span class="line">    g_l=[spawn(task,i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>)]</span><br><span class="line">    joinall(g_l)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Synchronous:&#x27;</span>)</span><br><span class="line">    synchronous()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Asynchronous:&#x27;</span>)</span><br><span class="line">    asynchronous()</span><br><span class="line"><span class="comment">#ä¸Šé¢ç¨‹åºçš„é‡è¦éƒ¨åˆ†æ˜¯å°†taskå‡½æ•°å°è£…åˆ°Greenletå†…éƒ¨çº¿ç¨‹çš„gevent.spawnã€‚ åˆå§‹åŒ–çš„greenletåˆ—è¡¨å­˜æ”¾åœ¨æ•°ç»„threadsä¸­ï¼Œæ­¤æ•°ç»„è¢«ä¼ ç»™gevent.joinall å‡½æ•°ï¼Œåè€…é˜»å¡å½“å‰æµç¨‹ï¼Œå¹¶æ‰§è¡Œæ‰€æœ‰ç»™å®šçš„greenletã€‚æ‰§è¡Œæµç¨‹åªä¼šåœ¨ æ‰€æœ‰greenletæ‰§è¡Œå®Œåæ‰ä¼šç»§ç»­å‘ä¸‹èµ°ã€‚</span></span><br></pre></td></tr></table></figure>

<h3 id="å…­-Geventä¹‹åº”ç”¨ä¸¾ä¾‹ä¸€"><a href="#å…­-Geventä¹‹åº”ç”¨ä¸¾ä¾‹ä¸€" class="headerlink" title="å…­ Geventä¹‹åº”ç”¨ä¸¾ä¾‹ä¸€"></a>å…­ Geventä¹‹åº”ç”¨ä¸¾ä¾‹ä¸€</h3><p>åç¨‹åº”ç”¨ï¼šçˆ¬è™«</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> gevent <span class="keyword">import</span> monkey;monkey.patch_all()</span><br><span class="line"><span class="keyword">import</span> gevent</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_page</span>(<span class="params">url</span>):</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;GET: %s&#x27;</span> %url)</span><br><span class="line">    response=requests.get(url)</span><br><span class="line">    <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%d bytes received from %s&#x27;</span> %(<span class="built_in">len</span>(response.text),url))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start_time=time.time()</span><br><span class="line">gevent.joinall([</span><br><span class="line">    gevent.spawn(get_page,<span class="string">&#x27;https://www.python.org/&#x27;</span>),</span><br><span class="line">    gevent.spawn(get_page,<span class="string">&#x27;https://www.yahoo.com/&#x27;</span>),</span><br><span class="line">    gevent.spawn(get_page,<span class="string">&#x27;https://github.com/&#x27;</span>),</span><br><span class="line">])</span><br><span class="line">stop_time=time.time()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;run time is %s&#x27;</span> %(stop_time-start_time))</span><br></pre></td></tr></table></figure>

<h3 id="ä¸ƒ-Geventä¹‹åº”ç”¨ä¸¾ä¾‹äºŒ"><a href="#ä¸ƒ-Geventä¹‹åº”ç”¨ä¸¾ä¾‹äºŒ" class="headerlink" title="ä¸ƒ Geventä¹‹åº”ç”¨ä¸¾ä¾‹äºŒ"></a>ä¸ƒ Geventä¹‹åº”ç”¨ä¸¾ä¾‹äºŒ</h3><p>é€šè¿‡geventå®ç°å•çº¿ç¨‹ä¸‹çš„socketå¹¶å‘ï¼ˆfrom gevent import monkey;monkey.patch_all()ä¸€å®šè¦æ”¾åˆ°å¯¼å…¥socketæ¨¡å—ä¹‹å‰ï¼Œå¦åˆ™geventæ— æ³•è¯†åˆ«socketçš„é˜»å¡ï¼‰</p>
<p>æœåŠ¡ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> gevent <span class="keyword">import</span> monkey;monkey.patch_all()</span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> gevent</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦‚æœä¸æƒ³ç”¨money.patch_all()æ‰“è¡¥ä¸,å¯ä»¥ç”¨geventè‡ªå¸¦çš„socket</span></span><br><span class="line"><span class="comment"># from gevent import socket</span></span><br><span class="line"><span class="comment"># s=socket.socket()</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">server</span>(<span class="params">server_ip,port</span>):</span></span><br><span class="line">    s=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">    s.setsockopt(SOL_SOCKET,SO_REUSEADDR,<span class="number">1</span>)</span><br><span class="line">    s.bind((server_ip,port))</span><br><span class="line">    s.listen(<span class="number">5</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        conn,addr=s.accept()</span><br><span class="line">        gevent.spawn(talk,conn,addr)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">talk</span>(<span class="params">conn,addr</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            res=conn.recv(<span class="number">1024</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;client %s:%s msg: %s&#x27;</span> %(addr[<span class="number">0</span>],addr[<span class="number">1</span>],res))</span><br><span class="line">            conn.send(res.upper())</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(e)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    server(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>)</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">__author__ = <span class="string">&#x27;Linhaifeng&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">client=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> msg:<span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">    client.send(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    msg=client.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="built_in">print</span>(msg.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>å¤šçº¿ç¨‹å¹¶å‘å¤šä¸ªå®¢æˆ·ç«¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">client</span>(<span class="params">server_ip,port</span>):</span></span><br><span class="line">    c=socket(AF_INET,SOCK_STREAM) <span class="comment">#å¥—æ¥å­—å¯¹è±¡ä¸€å®šè¦åŠ åˆ°å‡½æ•°å†…ï¼Œå³å±€éƒ¨åç§°ç©ºé—´å†…ï¼Œæ”¾åœ¨å‡½æ•°å¤–åˆ™è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«ï¼Œåˆ™å¤§å®¶å…¬ç”¨ä¸€ä¸ªå¥—æ¥å­—å¯¹è±¡ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯ç«¯å£æ°¸è¿œä¸€æ ·äº†</span></span><br><span class="line">    c.connect((server_ip,port))</span><br><span class="line"></span><br><span class="line">    count=<span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        c.send((<span class="string">&#x27;%s say hello %s&#x27;</span> %(threading.current_thread().getName(),count)).encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">        msg=c.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="built_in">print</span>(msg.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">        count+=<span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">500</span>):</span><br><span class="line">        t=Thread(target=client,args=(<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8080</span>))</span><br><span class="line">        t.start()</span><br></pre></td></tr></table></figure>

<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=156">pythonå¿«é€Ÿå…¥é—¨ï¼ˆä¸€ï¼‰_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av73342471?p=156<img src="https://pic4.zhimg.com/v2-c64ada0dd06d0c57ed905be65d17acb7_180x120.jpg" alt="img"></a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>38-å¹¶å‘ç¼–ç¨‹ï¼ˆä¸ƒï¼‰</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/38_python%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8BIO%E6%A8%A1%E5%9E%8B/</url>
    <content><![CDATA[<h3 id="ä¸€-IOæ¨¡å‹ä»‹ç»"><a href="#ä¸€-IOæ¨¡å‹ä»‹ç»" class="headerlink" title="ä¸€ IOæ¨¡å‹ä»‹ç»"></a>ä¸€ IOæ¨¡å‹ä»‹ç»</h3><p><a href="https://link.zhihu.com/?target=http://www.cnblogs.com/linhaifeng/articles/7430066.html%23_label4">ä¸ºäº†æ›´å¥½åœ°äº†è§£IOæ¨¡å‹ï¼Œæˆ‘ä»¬éœ€è¦äº‹å…ˆå›é¡¾ä¸‹ï¼šåŒæ­¥ã€å¼‚æ­¥ã€é˜»å¡ã€éé˜»å¡</a></p>
<p>åŒæ­¥ï¼ˆsynchronousï¼‰ IOå’Œå¼‚æ­¥ï¼ˆasynchronousï¼‰ IOï¼Œé˜»å¡ï¼ˆblockingï¼‰ IOå’Œéé˜»å¡ï¼ˆnon-blockingï¼‰IOåˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Œåˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿè¿™ä¸ªé—®é¢˜å…¶å®ä¸åŒçš„äººç»™å‡ºçš„ç­”æ¡ˆéƒ½å¯èƒ½ä¸åŒï¼Œæ¯”å¦‚wikiï¼Œå°±è®¤ä¸ºasynchronous IOå’Œnon-blocking IOæ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚è¿™å…¶å®æ˜¯å› ä¸ºä¸åŒçš„äººçš„çŸ¥è¯†èƒŒæ™¯ä¸åŒï¼Œå¹¶ä¸”åœ¨è®¨è®ºè¿™ä¸ªé—®é¢˜çš„æ—¶å€™ä¸Šä¸‹æ–‡(context)ä¹Ÿä¸ç›¸åŒã€‚æ‰€ä»¥ï¼Œä¸ºäº†æ›´å¥½çš„å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å…ˆé™å®šä¸€ä¸‹æœ¬æ–‡çš„ä¸Šä¸‹æ–‡ã€‚</p>
<p>æœ¬æ–‡è®¨è®ºçš„èƒŒæ™¯æ˜¯Linuxç¯å¢ƒä¸‹çš„network IOã€‚æœ¬æ–‡æœ€é‡è¦çš„å‚è€ƒæ–‡çŒ®æ˜¯Richard Stevensçš„â€œUNIXÂ® Network Programming Volume 1, Third Edition: The Sockets Networking â€ï¼Œ6.2èŠ‚â€œI&#x2F;O Models â€ï¼ŒStevensåœ¨è¿™èŠ‚ä¸­è¯¦ç»†è¯´æ˜äº†å„ç§IOçš„ç‰¹ç‚¹å’ŒåŒºåˆ«ï¼Œå¦‚æœè‹±æ–‡å¤Ÿå¥½çš„è¯ï¼Œæ¨èç›´æ¥é˜…è¯»ã€‚Stevensçš„æ–‡é£æ˜¯æœ‰åçš„æ·±å…¥æµ…å‡ºï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ã€‚æœ¬æ–‡ä¸­çš„æµç¨‹å›¾ä¹Ÿæ˜¯æˆªå–è‡ªå‚è€ƒæ–‡çŒ®ã€‚</p>
<p>Stevensåœ¨æ–‡ç« ä¸­ä¸€å…±æ¯”è¾ƒäº†äº”ç§IO Modelï¼š * blocking IO * nonblocking IO * IO multiplexing * signal driven IO * asynchronous IO ç”±signal driven IOï¼ˆä¿¡å·é©±åŠ¨IOï¼‰åœ¨å®é™…ä¸­å¹¶ä¸å¸¸ç”¨ï¼Œæ‰€ä»¥ä¸»è¦ä»‹ç»å…¶ä½™å››ç§IO Modelã€‚</p>
<p>å†è¯´ä¸€ä¸‹IOå‘ç”Ÿæ—¶æ¶‰åŠçš„å¯¹è±¡å’Œæ­¥éª¤ã€‚å¯¹äºä¸€ä¸ªnetwork IO (è¿™é‡Œæˆ‘ä»¬ä»¥readä¸¾ä¾‹)ï¼Œå®ƒä¼šæ¶‰åŠåˆ°ä¸¤ä¸ªç³»ç»Ÿå¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯è°ƒç”¨è¿™ä¸ªIOçš„process (or thread)ï¼Œå¦ä¸€ä¸ªå°±æ˜¯ç³»ç»Ÿå†…æ ¸(kernel)ã€‚å½“ä¸€ä¸ªreadæ“ä½œå‘ç”Ÿæ—¶ï¼Œè¯¥æ“ä½œä¼šç»å†ä¸¤ä¸ªé˜¶æ®µï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ï¼‰ç­‰å¾…æ•°æ®å‡†å¤‡ (Waiting for the data to be ready)</span></span><br><span class="line"><span class="comment">#2ï¼‰å°†æ•°æ®ä»å†…æ ¸æ‹·è´åˆ°è¿›ç¨‹ä¸­(Copying the data from the kernel to the process)</span></span><br></pre></td></tr></table></figure>

<p>è®°ä½è¿™ä¸¤ç‚¹å¾ˆé‡è¦ï¼Œå› ä¸ºè¿™äº›IOæ¨¡å‹çš„åŒºåˆ«å°±æ˜¯åœ¨ä¸¤ä¸ªé˜¶æ®µä¸Šå„æœ‰ä¸åŒçš„æƒ…å†µã€‚</p>
<p>è¡¥å……ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€è¾“å…¥æ“ä½œï¼šreadã€readvã€recvã€recvfromã€recvmsgå…±5ä¸ªå‡½æ•°ï¼Œå¦‚æœä¼šé˜»å¡çŠ¶æ€ï¼Œåˆ™ä¼šç»ç†wait dataå’Œcopy dataä¸¤ä¸ªé˜¶æ®µï¼Œå¦‚æœè®¾ç½®ä¸ºéé˜»å¡åˆ™åœ¨wait ä¸åˆ°dataæ—¶æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€è¾“å‡ºæ“ä½œï¼šwriteã€writevã€sendã€sendtoã€sendmsgå…±5ä¸ªå‡½æ•°ï¼Œåœ¨å‘é€ç¼“å†²åŒºæ»¡äº†ä¼šé˜»å¡åœ¨åŸåœ°ï¼Œå¦‚æœè®¾ç½®ä¸ºéé˜»å¡ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3ã€æ¥æ”¶å¤–æ¥é“¾æ¥ï¼šacceptï¼Œä¸è¾“å…¥æ“ä½œç±»ä¼¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#4ã€å‘èµ·å¤–å‡ºé“¾æ¥ï¼šconnectï¼Œä¸è¾“å‡ºæ“ä½œç±»ä¼¼</span></span><br></pre></td></tr></table></figure>

<h3 id="äºŒ-é˜»å¡IO-blocking-IO"><a href="#äºŒ-é˜»å¡IO-blocking-IO" class="headerlink" title="äºŒ é˜»å¡IO(blocking IO)"></a>äºŒ é˜»å¡IO(blocking IO)</h3><p>åœ¨linuxä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„socketéƒ½æ˜¯blockingï¼Œä¸€ä¸ªå…¸å‹çš„è¯»æ“ä½œæµç¨‹å¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p>
<p><img src="https://pic2.zhimg.com/80/v2-57c6feedfeb28710a17b925dd35066a1_720w.jpg" alt="img"></p>
<p>å½“ç”¨æˆ·è¿›ç¨‹è°ƒç”¨äº†recvfromè¿™ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œkernelå°±å¼€å§‹äº†IOçš„ç¬¬ä¸€ä¸ªé˜¶æ®µï¼šå‡†å¤‡æ•°æ®ã€‚å¯¹äºnetwork ioæ¥è¯´ï¼Œå¾ˆå¤šæ—¶å€™æ•°æ®åœ¨ä¸€å¼€å§‹è¿˜æ²¡æœ‰åˆ°è¾¾ï¼ˆæ¯”å¦‚ï¼Œè¿˜æ²¡æœ‰æ”¶åˆ°ä¸€ä¸ªå®Œæ•´çš„UDPåŒ…ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™kernelå°±è¦ç­‰å¾…è¶³å¤Ÿçš„æ•°æ®åˆ°æ¥ã€‚</p>
<p>è€Œåœ¨ç”¨æˆ·è¿›ç¨‹è¿™è¾¹ï¼Œæ•´ä¸ªè¿›ç¨‹ä¼šè¢«é˜»å¡ã€‚å½“kernelä¸€ç›´ç­‰åˆ°æ•°æ®å‡†å¤‡å¥½äº†ï¼Œå®ƒå°±ä¼šå°†æ•°æ®ä»kernelä¸­æ‹·è´åˆ°ç”¨æˆ·å†…å­˜ï¼Œç„¶åkernelè¿”å›ç»“æœï¼Œç”¨æˆ·è¿›ç¨‹æ‰è§£é™¤blockçš„çŠ¶æ€ï¼Œé‡æ–°è¿è¡Œèµ·æ¥ã€‚ <strong>æ‰€ä»¥ï¼Œblocking IOçš„ç‰¹ç‚¹å°±æ˜¯åœ¨IOæ‰§è¡Œçš„ä¸¤ä¸ªé˜¶æ®µï¼ˆç­‰å¾…æ•°æ®å’Œæ‹·è´æ•°æ®ä¸¤ä¸ªé˜¶æ®µï¼‰éƒ½è¢«blockäº†ã€‚</strong></p>
<p>å‡ ä¹æ‰€æœ‰çš„ç¨‹åºå‘˜ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°çš„ç½‘ç»œç¼–ç¨‹éƒ½æ˜¯ä»listen()ã€send()ã€recv() ç­‰æ¥å£å¼€å§‹çš„ï¼Œä½¿ç”¨è¿™äº›æ¥å£å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ„å»ºæœåŠ¡å™¨&#x2F;å®¢æˆ·æœºçš„æ¨¡å‹ã€‚ç„¶è€Œå¤§éƒ¨åˆ†çš„socketæ¥å£éƒ½æ˜¯é˜»å¡å‹çš„ã€‚å¦‚ä¸‹å›¾</p>
<p>psï¼šæ‰€è°“é˜»å¡å‹æ¥å£æ˜¯æŒ‡ç³»ç»Ÿè°ƒç”¨ï¼ˆä¸€èˆ¬æ˜¯IOæ¥å£ï¼‰ä¸è¿”å›è°ƒç”¨ç»“æœå¹¶è®©å½“å‰çº¿ç¨‹ä¸€ç›´é˜»å¡ï¼Œåªæœ‰å½“è¯¥ç³»ç»Ÿè°ƒç”¨è·å¾—ç»“æœæˆ–è€…è¶…æ—¶å‡ºé”™æ—¶æ‰è¿”å›ã€‚</p>
<p><img src="https://pic2.zhimg.com/80/v2-b349f2082980d93cf9e4682d56452071_720w.jpg" alt="img"></p>
<p>å®é™…ä¸Šï¼Œé™¤éç‰¹åˆ«æŒ‡å®šï¼Œå‡ ä¹æ‰€æœ‰çš„IOæ¥å£ ( åŒ…æ‹¬socketæ¥å£ ) éƒ½æ˜¯é˜»å¡å‹çš„ã€‚è¿™ç»™ç½‘ç»œç¼–ç¨‹å¸¦æ¥äº†ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œå¦‚åœ¨è°ƒç”¨recv(1024)çš„åŒæ—¶ï¼Œçº¿ç¨‹å°†è¢«é˜»å¡ï¼Œåœ¨æ­¤æœŸé—´ï¼Œçº¿ç¨‹å°†æ— æ³•æ‰§è¡Œä»»ä½•è¿ç®—æˆ–å“åº”ä»»ä½•çš„ç½‘ç»œè¯·æ±‚ã€‚</p>
<p>ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨å¤šçº¿ç¨‹ï¼ˆæˆ–å¤šè¿›ç¨‹ï¼‰ã€‚å¤šçº¿ç¨‹ï¼ˆæˆ–å¤šè¿›ç¨‹ï¼‰çš„ç›®çš„æ˜¯è®©æ¯ä¸ªè¿æ¥éƒ½æ‹¥æœ‰ç‹¬ç«‹çš„çº¿ç¨‹ï¼ˆæˆ–è¿›ç¨‹ï¼‰ï¼Œè¿™æ ·ä»»ä½•ä¸€ä¸ªè¿æ¥çš„é˜»å¡éƒ½ä¸ä¼šå½±å“å…¶ä»–çš„è¿æ¥ã€‚</span></span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ¡ˆçš„é—®é¢˜æ˜¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¼€å¯å¤šè¿›ç¨‹æˆ–éƒ½çº¿ç¨‹çš„æ–¹å¼ï¼Œåœ¨é‡åˆ°è¦åŒæ—¶å“åº”æˆç™¾ä¸Šåƒè·¯çš„è¿æ¥è¯·æ±‚ï¼Œåˆ™æ— è®ºå¤šçº¿ç¨‹è¿˜æ˜¯å¤šè¿›ç¨‹éƒ½ä¼šä¸¥é‡å æ®ç³»ç»Ÿèµ„æºï¼Œé™ä½ç³»ç»Ÿå¯¹å¤–ç•Œå“åº”æ•ˆç‡ï¼Œè€Œä¸”çº¿ç¨‹ä¸è¿›ç¨‹æœ¬èº«ä¹Ÿæ›´å®¹æ˜“è¿›å…¥å‡æ­»çŠ¶æ€ã€‚</span></span><br></pre></td></tr></table></figure>

<p>æ”¹è¿›æ–¹æ¡ˆï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¾ˆå¤šç¨‹åºå‘˜å¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨â€œçº¿ç¨‹æ± â€æˆ–â€œè¿æ¥æ± â€ã€‚â€œçº¿ç¨‹æ± â€æ—¨åœ¨å‡å°‘åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„é¢‘ç‡ï¼Œå…¶ç»´æŒä¸€å®šåˆç†æ•°é‡çš„çº¿ç¨‹ï¼Œå¹¶è®©ç©ºé—²çš„çº¿ç¨‹é‡æ–°æ‰¿æ‹…æ–°çš„æ‰§è¡Œä»»åŠ¡ã€‚â€œè¿æ¥æ± â€ç»´æŒè¿æ¥çš„ç¼“å­˜æ± ï¼Œå°½é‡é‡ç”¨å·²æœ‰çš„è¿æ¥ã€å‡å°‘åˆ›å»ºå’Œå…³é—­è¿æ¥çš„é¢‘ç‡ã€‚è¿™ä¸¤ç§æŠ€æœ¯éƒ½å¯ä»¥å¾ˆå¥½çš„é™ä½ç³»ç»Ÿå¼€é”€ï¼Œéƒ½è¢«å¹¿æ³›åº”ç”¨å¾ˆå¤šå¤§å‹ç³»ç»Ÿï¼Œå¦‚websphereã€tomcatå’Œå„ç§æ•°æ®åº“ç­‰ã€‚</span></span><br></pre></td></tr></table></figure>

<p>æ”¹è¿›åæ–¹æ¡ˆå…¶å®ä¹Ÿå­˜åœ¨ç€é—®é¢˜ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#â€œçº¿ç¨‹æ± â€å’Œâ€œè¿æ¥æ± â€æŠ€æœ¯ä¹Ÿåªæ˜¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£äº†é¢‘ç¹è°ƒç”¨IOæ¥å£å¸¦æ¥çš„èµ„æºå ç”¨ã€‚è€Œä¸”ï¼Œæ‰€è°“â€œæ± â€å§‹ç»ˆæœ‰å…¶ä¸Šé™ï¼Œå½“è¯·æ±‚å¤§å¤§è¶…è¿‡ä¸Šé™æ—¶ï¼Œâ€œæ± â€æ„æˆçš„ç³»ç»Ÿå¯¹å¤–ç•Œçš„å“åº”å¹¶ä¸æ¯”æ²¡æœ‰æ± çš„æ—¶å€™æ•ˆæœå¥½å¤šå°‘ã€‚æ‰€ä»¥ä½¿ç”¨â€œæ± â€å¿…é¡»è€ƒè™‘å…¶é¢ä¸´çš„å“åº”è§„æ¨¡ï¼Œå¹¶æ ¹æ®å“åº”è§„æ¨¡è°ƒæ•´â€œæ± â€çš„å¤§å°ã€‚</span></span><br></pre></td></tr></table></figure>

<p><strong>å¯¹åº”ä¸Šä¾‹ä¸­çš„æ‰€é¢ä¸´çš„å¯èƒ½åŒæ—¶å‡ºç°çš„ä¸Šåƒç”šè‡³ä¸Šä¸‡æ¬¡çš„å®¢æˆ·ç«¯è¯·æ±‚ï¼Œâ€œçº¿ç¨‹æ± â€æˆ–â€œè¿æ¥æ± â€æˆ–è®¸å¯ä»¥ç¼“è§£éƒ¨åˆ†å‹åŠ›ï¼Œä½†æ˜¯ä¸èƒ½è§£å†³æ‰€æœ‰é—®é¢˜ã€‚æ€»ä¹‹ï¼Œå¤šçº¿ç¨‹æ¨¡å‹å¯ä»¥æ–¹ä¾¿é«˜æ•ˆçš„è§£å†³å°è§„æ¨¡çš„æœåŠ¡è¯·æ±‚ï¼Œä½†é¢å¯¹å¤§è§„æ¨¡çš„æœåŠ¡è¯·æ±‚ï¼Œå¤šçº¿ç¨‹æ¨¡å‹ä¹Ÿä¼šé‡åˆ°ç“¶é¢ˆï¼Œå¯ä»¥ç”¨éé˜»å¡æ¥å£æ¥å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</strong></p>
<h3 id="ä¸‰-éé˜»å¡IO-non-blocking-IO"><a href="#ä¸‰-éé˜»å¡IO-non-blocking-IO" class="headerlink" title="ä¸‰ éé˜»å¡IO(non-blocking IO)"></a>ä¸‰ éé˜»å¡IO(non-blocking IO)</h3><p>Linuxä¸‹ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®socketä½¿å…¶å˜ä¸ºnon-blockingã€‚å½“å¯¹ä¸€ä¸ªnon-blocking socketæ‰§è¡Œè¯»æ“ä½œæ—¶ï¼Œæµç¨‹æ˜¯è¿™ä¸ªæ ·å­ï¼š</p>
<p><img src="https://pic2.zhimg.com/80/v2-de6969a3184e17de058a61ab1f3f67cd_720w.jpg" alt="img"></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå½“ç”¨æˆ·è¿›ç¨‹å‘å‡ºreadæ“ä½œæ—¶ï¼Œå¦‚æœkernelä¸­çš„æ•°æ®è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œé‚£ä¹ˆå®ƒå¹¶ä¸ä¼šblockç”¨æˆ·è¿›ç¨‹ï¼Œè€Œæ˜¯ç«‹åˆ»è¿”å›ä¸€ä¸ªerrorã€‚ä»ç”¨æˆ·è¿›ç¨‹è§’åº¦è®² ï¼Œå®ƒå‘èµ·ä¸€ä¸ªreadæ“ä½œåï¼Œå¹¶ä¸éœ€è¦ç­‰å¾…ï¼Œè€Œæ˜¯é©¬ä¸Šå°±å¾—åˆ°äº†ä¸€ä¸ªç»“æœã€‚ç”¨æˆ·è¿›ç¨‹åˆ¤æ–­ç»“æœæ˜¯ä¸€ä¸ªerroræ—¶ï¼Œå®ƒå°±çŸ¥é“æ•°æ®è¿˜æ²¡æœ‰å‡†å¤‡å¥½ï¼Œäºæ˜¯ç”¨æˆ·å°±å¯ä»¥åœ¨æœ¬æ¬¡åˆ°ä¸‹æ¬¡å†å‘èµ·readè¯¢é—®çš„æ—¶é—´é—´éš”å†…åšå…¶ä»–äº‹æƒ…ï¼Œæˆ–è€…ç›´æ¥å†æ¬¡å‘é€readæ“ä½œã€‚ä¸€æ—¦kernelä¸­çš„æ•°æ®å‡†å¤‡å¥½äº†ï¼Œå¹¶ä¸”åˆå†æ¬¡æ”¶åˆ°äº†ç”¨æˆ·è¿›ç¨‹çš„system callï¼Œé‚£ä¹ˆå®ƒé©¬ä¸Šå°±å°†æ•°æ®æ‹·è´åˆ°äº†ç”¨æˆ·å†…å­˜ï¼ˆè¿™ä¸€é˜¶æ®µä»ç„¶æ˜¯é˜»å¡çš„ï¼‰ï¼Œç„¶åè¿”å›ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´éé˜»å¡çš„recvformç³»ç»Ÿè°ƒç”¨è°ƒç”¨ä¹‹åï¼Œè¿›ç¨‹å¹¶æ²¡æœ‰è¢«é˜»å¡ï¼Œå†…æ ¸é©¬ä¸Šè¿”å›ç»™è¿›ç¨‹ï¼Œå¦‚æœæ•°æ®è¿˜æ²¡å‡†å¤‡å¥½ï¼Œæ­¤æ—¶ä¼šè¿”å›ä¸€ä¸ªerrorã€‚è¿›ç¨‹åœ¨è¿”å›ä¹‹åï¼Œå¯ä»¥å¹²ç‚¹åˆ«çš„äº‹æƒ…ï¼Œç„¶åå†å‘èµ·recvformç³»ç»Ÿè°ƒç”¨ã€‚é‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼Œå¾ªç¯å¾€å¤çš„è¿›è¡Œrecvformç³»ç»Ÿè°ƒç”¨ã€‚è¿™ä¸ªè¿‡ç¨‹é€šå¸¸è¢«ç§°ä¹‹ä¸ºè½®è¯¢ã€‚è½®è¯¢æ£€æŸ¥å†…æ ¸æ•°æ®ï¼Œç›´åˆ°æ•°æ®å‡†å¤‡å¥½ï¼Œå†æ‹·è´æ•°æ®åˆ°è¿›ç¨‹ï¼Œè¿›è¡Œæ•°æ®å¤„ç†ã€‚éœ€è¦æ³¨æ„ï¼Œæ‹·è´æ•°æ®æ•´ä¸ªè¿‡ç¨‹ï¼Œè¿›ç¨‹ä»ç„¶æ˜¯å±äºé˜»å¡çš„çŠ¶æ€ã€‚</p>
<p><strong>æ‰€ä»¥ï¼Œåœ¨éé˜»å¡å¼IOä¸­ï¼Œç”¨æˆ·è¿›ç¨‹å…¶å®æ˜¯éœ€è¦ä¸æ–­çš„ä¸»åŠ¨è¯¢é—®kernelæ•°æ®å‡†å¤‡å¥½äº†æ²¡æœ‰ã€‚</strong></p>
<p>éé˜»å¡IOç¤ºä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æœåŠ¡ç«¯</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">server=socket.socket()</span><br><span class="line">server.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,<span class="number">1</span>)</span><br><span class="line">server.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8083</span>))</span><br><span class="line">server.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">server.setblocking(<span class="literal">False</span>)</span><br><span class="line">r_list=[]</span><br><span class="line">w_list=&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        conn,addr=server.accept()</span><br><span class="line">        r_list.append(conn)</span><br><span class="line">    <span class="keyword">except</span> BlockingIOError:</span><br><span class="line">        <span class="comment"># å¼ºè°ƒå¼ºè°ƒå¼ºè°ƒï¼šï¼ï¼ï¼éé˜»å¡IOçš„ç²¾é«“åœ¨äºå®Œå…¨æ²¡æœ‰é˜»å¡ï¼ï¼ï¼</span></span><br><span class="line">        <span class="comment"># time.sleep(0.5) # æ‰“å¼€è¯¥è¡Œæ³¨é‡Šçº¯å±ä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹æ•ˆæœ</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;åœ¨åšå…¶ä»–çš„äº‹æƒ…&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;rlist: &#x27;</span>,<span class="built_in">len</span>(r_list))</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;wlist: &#x27;</span>,<span class="built_in">len</span>(w_list))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># éå†è¯»åˆ—è¡¨ï¼Œä¾æ¬¡å–å‡ºå¥—æ¥å­—è¯»å–å†…å®¹</span></span><br><span class="line">        del_rlist=[]</span><br><span class="line">        <span class="keyword">for</span> conn <span class="keyword">in</span> r_list:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                data=conn.recv(<span class="number">1024</span>)</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">                    conn.close()</span><br><span class="line">                    del_rlist.append(conn)</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                w_list[conn]=data.upper()</span><br><span class="line">            <span class="keyword">except</span> BlockingIOError: <span class="comment"># æ²¡æœ‰æ”¶æˆåŠŸï¼Œåˆ™ç»§ç»­æ£€ç´¢ä¸‹ä¸€ä¸ªå¥—æ¥å­—çš„æ¥æ”¶</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">except</span> ConnectionResetError: <span class="comment"># å½“å‰å¥—æ¥å­—å‡ºå¼‚å¸¸ï¼Œåˆ™å…³é—­ï¼Œç„¶ååŠ å…¥åˆ é™¤åˆ—è¡¨ï¼Œç­‰å¾…è¢«æ¸…é™¤</span></span><br><span class="line">                conn.close()</span><br><span class="line">                del_rlist.append(conn)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># éå†å†™åˆ—è¡¨ï¼Œä¾æ¬¡å–å‡ºå¥—æ¥å­—å‘é€å†…å®¹</span></span><br><span class="line">        del_wlist=[]</span><br><span class="line">        <span class="keyword">for</span> conn,data <span class="keyword">in</span> w_list.items():</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                conn.send(data)</span><br><span class="line">                del_wlist.append(conn)</span><br><span class="line">            <span class="keyword">except</span> BlockingIOError:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ¸…ç†æ— ç”¨çš„å¥—æ¥å­—,æ— éœ€å†ç›‘å¬å®ƒä»¬çš„IOæ“ä½œ</span></span><br><span class="line">        <span class="keyword">for</span> conn <span class="keyword">in</span> del_rlist:</span><br><span class="line">            r_list.remove(conn)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> conn <span class="keyword">in</span> del_wlist:</span><br><span class="line">            w_list.pop(conn)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">client=socket.socket()</span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8083</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    res=(<span class="string">&#x27;%s hello&#x27;</span> %os.getpid()).encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    client.send(res)</span><br><span class="line">    data=client.recv(<span class="number">1024</span>)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(data.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p><strong>ä½†æ˜¯éé˜»å¡IOæ¨¡å‹ç»ä¸è¢«æ¨èã€‚</strong></p>
<p>æˆ‘ä»¬ä¸èƒ½å¦åˆ™å…¶ä¼˜ç‚¹ï¼šèƒ½å¤Ÿåœ¨ç­‰å¾…ä»»åŠ¡å®Œæˆçš„æ—¶é—´é‡Œå¹²å…¶ä»–æ´»äº†ï¼ˆåŒ…æ‹¬æäº¤å…¶ä»–ä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯ â€œåå°â€ å¯ä»¥æœ‰å¤šä¸ªä»»åŠ¡åœ¨â€œâ€åŒæ—¶â€œâ€æ‰§è¡Œï¼‰ã€‚</p>
<p>ä½†æ˜¯ä¹Ÿéš¾æ©å…¶ç¼ºç‚¹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. å¾ªç¯è°ƒç”¨recv()å°†å¤§å¹…åº¦æ¨é«˜CPUå ç”¨ç‡ï¼›è¿™ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨ä»£ç ä¸­ç•™ä¸€å¥time.sleep(2)çš„åŸå› ,å¦åˆ™åœ¨ä½é…ä¸»æœºä¸‹æå®¹æ˜“å‡ºç°å¡æœºæƒ…å†µ</span></span><br><span class="line"><span class="comment">#2. ä»»åŠ¡å®Œæˆçš„å“åº”å»¶è¿Ÿå¢å¤§äº†ï¼Œå› ä¸ºæ¯è¿‡ä¸€æ®µæ—¶é—´æ‰å»è½®è¯¢ä¸€æ¬¡readæ“ä½œï¼Œè€Œä»»åŠ¡å¯èƒ½åœ¨ä¸¤æ¬¡è½®è¯¢ä¹‹é—´çš„ä»»æ„æ—¶é—´å®Œæˆã€‚è¿™ä¼šå¯¼è‡´æ•´ä½“æ•°æ®ååé‡çš„é™ä½ã€‚</span></span><br></pre></td></tr></table></figure>

<p><em><strong>*æ­¤å¤–ï¼Œåœ¨è¿™ä¸ªæ–¹æ¡ˆä¸­recv()æ›´å¤šçš„æ˜¯èµ·åˆ°æ£€æµ‹â€œæ“ä½œæ˜¯å¦å®Œæˆâ€çš„ä½œç”¨ï¼Œå®é™…æ“ä½œç³»ç»Ÿæä¾›äº†æ›´ä¸ºé«˜æ•ˆçš„æ£€æµ‹â€œæ“ä½œæ˜¯å¦å®Œæˆâ€œä½œç”¨çš„æ¥å£ï¼Œä¾‹å¦‚select()å¤šè·¯å¤ç”¨æ¨¡å¼ï¼Œå¯ä»¥ä¸€æ¬¡æ£€æµ‹å¤šä¸ªè¿æ¥æ˜¯å¦æ´»è·ƒã€‚*</strong></em></p>
<h3 id="å››-å¤šè·¯å¤ç”¨IO-IO-multiplexing"><a href="#å››-å¤šè·¯å¤ç”¨IO-IO-multiplexing" class="headerlink" title="å›› å¤šè·¯å¤ç”¨IO(IO multiplexing)"></a>å›› å¤šè·¯å¤ç”¨IO(IO multiplexing)</h3><p>IO multiplexingè¿™ä¸ªè¯å¯èƒ½æœ‰ç‚¹é™Œç”Ÿï¼Œä½†æ˜¯å¦‚æœæˆ‘è¯´select&#x2F;epollï¼Œå¤§æ¦‚å°±éƒ½èƒ½æ˜ç™½äº†ã€‚æœ‰äº›åœ°æ–¹ä¹Ÿç§°è¿™ç§IOæ–¹å¼ä¸º<strong>äº‹ä»¶é©±åŠ¨IO</strong>(event driven IO)ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œselect&#x2F;epollçš„å¥½å¤„å°±åœ¨äºå•ä¸ªprocesså°±å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªç½‘ç»œè¿æ¥çš„IOã€‚å®ƒçš„åŸºæœ¬åŸç†å°±æ˜¯select&#x2F;epollè¿™ä¸ªfunctionä¼šä¸æ–­çš„è½®è¯¢æ‰€è´Ÿè´£çš„æ‰€æœ‰socketï¼Œå½“æŸä¸ªsocketæœ‰æ•°æ®åˆ°è¾¾äº†ï¼Œå°±é€šçŸ¥ç”¨æˆ·è¿›ç¨‹ã€‚å®ƒçš„æµç¨‹å¦‚å›¾ï¼š</p>
<p><img src="https://pic2.zhimg.com/80/v2-2a460241583789b2d961f5f48b325779_720w.jpg" alt="img"></p>
<p>å½“ç”¨æˆ·è¿›ç¨‹è°ƒç”¨äº†selectï¼Œé‚£ä¹ˆæ•´ä¸ªè¿›ç¨‹ä¼šè¢«blockï¼Œè€ŒåŒæ—¶ï¼Œkernelä¼šâ€œç›‘è§†â€æ‰€æœ‰selectè´Ÿè´£çš„socketï¼Œå½“ä»»ä½•ä¸€ä¸ªsocketä¸­çš„æ•°æ®å‡†å¤‡å¥½äº†ï¼Œselectå°±ä¼šè¿”å›ã€‚è¿™ä¸ªæ—¶å€™ç”¨æˆ·è¿›ç¨‹å†è°ƒç”¨readæ“ä½œï¼Œå°†æ•°æ®ä»kernelæ‹·è´åˆ°ç”¨æˆ·è¿›ç¨‹ã€‚ è¿™ä¸ªå›¾å’Œblocking IOçš„å›¾å…¶å®å¹¶æ²¡æœ‰å¤ªå¤§çš„ä¸åŒï¼Œäº‹å®ä¸Šè¿˜æ›´å·®ä¸€äº›ã€‚å› ä¸ºè¿™é‡Œéœ€è¦ä½¿ç”¨ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨(selectå’Œrecvfrom)ï¼Œè€Œblocking IOåªè°ƒç”¨äº†ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨(recvfrom)ã€‚ä½†æ˜¯ï¼Œç”¨selectçš„ä¼˜åŠ¿åœ¨äºå®ƒå¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªconnectionã€‚</p>
<p><strong>å¼ºè°ƒï¼š</strong></p>
<p><strong>1. å¦‚æœå¤„ç†çš„è¿æ¥æ•°ä¸æ˜¯å¾ˆé«˜çš„è¯ï¼Œä½¿ç”¨select&#x2F;epollçš„web serverä¸ä¸€å®šæ¯”ä½¿ç”¨multi-threading + blocking IOçš„web serveræ€§èƒ½æ›´å¥½ï¼Œå¯èƒ½å»¶è¿Ÿè¿˜æ›´å¤§ã€‚select&#x2F;epollçš„ä¼˜åŠ¿å¹¶ä¸æ˜¯å¯¹äºå•ä¸ªè¿æ¥èƒ½å¤„ç†å¾—æ›´å¿«ï¼Œè€Œæ˜¯åœ¨äºèƒ½å¤„ç†æ›´å¤šçš„è¿æ¥ã€‚</strong></p>
<p><strong>2. åœ¨å¤šè·¯å¤ç”¨æ¨¡å‹ä¸­ï¼Œå¯¹äºæ¯ä¸€ä¸ªsocketï¼Œä¸€èˆ¬éƒ½è®¾ç½®æˆä¸ºnon-blockingï¼Œä½†æ˜¯ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ•´ä¸ªç”¨æˆ·çš„processå…¶å®æ˜¯ä¸€ç›´è¢«blockçš„ã€‚åªä¸è¿‡processæ˜¯è¢«selectè¿™ä¸ªå‡½æ•°blockï¼Œè€Œä¸æ˜¯è¢«socket IOç»™blockã€‚</strong></p>
<p><strong>ç»“è®º: selectçš„ä¼˜åŠ¿åœ¨äºå¯ä»¥å¤„ç†å¤šä¸ªè¿æ¥ï¼Œä¸é€‚ç”¨äºå•ä¸ªè¿æ¥</strong></p>
<p>selectç½‘ç»œIOæ¨¡å‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æœåŠ¡ç«¯</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> select</span><br><span class="line">server = socket(AF_INET, SOCK_STREAM)</span><br><span class="line">server.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8093</span>))</span><br><span class="line">server.listen(<span class="number">5</span>)</span><br><span class="line">server.setblocking(<span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;starting...&#x27;</span>)</span><br><span class="line"></span><br><span class="line">rlist=[server,]</span><br><span class="line">wlist=[]</span><br><span class="line">wdata=&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    rl,wl,xl=select.select(rlist,wlist,[],<span class="number">0.5</span>)</span><br><span class="line">    <span class="built_in">print</span>(wl)</span><br><span class="line">    <span class="keyword">for</span> sock <span class="keyword">in</span> rl:</span><br><span class="line">        <span class="keyword">if</span> sock == server:</span><br><span class="line">            conn,addr=sock.accept()</span><br><span class="line">            rlist.append(conn)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                data=sock.recv(<span class="number">1024</span>)</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">                    sock.close()</span><br><span class="line">                    rlist.remove(sock)</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                wlist.append(sock)</span><br><span class="line">                wdata[sock]=data.upper()</span><br><span class="line">            <span class="keyword">except</span> Exception:</span><br><span class="line">                sock.close()</span><br><span class="line">                rlist.remove(sock)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> sock <span class="keyword">in</span> wl:</span><br><span class="line">        sock.send(wdata[sock])</span><br><span class="line">        wlist.remove(sock)</span><br><span class="line">        wdata.pop(sock)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">client=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">client.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8093</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> msg:<span class="keyword">continue</span></span><br><span class="line">    client.send(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    data=client.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="built_in">print</span>(data.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"></span><br><span class="line">client.close()</span><br></pre></td></tr></table></figure>

<p><strong>selectç›‘å¬fdå˜åŒ–çš„è¿‡ç¨‹åˆ†æï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç”¨æˆ·è¿›ç¨‹åˆ›å»ºsocketå¯¹è±¡ï¼Œæ‹·è´ç›‘å¬çš„fdåˆ°å†…æ ¸ç©ºé—´ï¼Œæ¯ä¸€ä¸ªfdä¼šå¯¹åº”ä¸€å¼ ç³»ç»Ÿæ–‡ä»¶è¡¨ï¼Œå†…æ ¸ç©ºé—´çš„fdå“åº”åˆ°æ•°æ®åï¼Œå°±ä¼šå‘é€ä¿¡å·ç»™ç”¨æˆ·è¿›ç¨‹æ•°æ®å·²åˆ°ï¼›</span></span><br><span class="line"><span class="comment">#ç”¨æˆ·è¿›ç¨‹å†å‘é€ç³»ç»Ÿè°ƒç”¨ï¼Œæ¯”å¦‚ï¼ˆacceptï¼‰å°†å†…æ ¸ç©ºé—´çš„æ•°æ®copyåˆ°ç”¨æˆ·ç©ºé—´ï¼ŒåŒæ—¶ä½œä¸ºæ¥å—æ•°æ®ç«¯å†…æ ¸ç©ºé—´çš„æ•°æ®æ¸…é™¤ï¼Œè¿™æ ·é‡æ–°ç›‘å¬æ—¶fdå†æœ‰æ–°çš„æ•°æ®åˆå¯ä»¥å“åº”åˆ°äº†ï¼ˆå‘é€ç«¯å› ä¸ºåŸºäºTCPåè®®æ‰€ä»¥éœ€è¦æ”¶åˆ°åº”ç­”åæ‰ä¼šæ¸…é™¤ï¼‰ã€‚</span></span><br></pre></td></tr></table></figure>

<p><strong>è¯¥æ¨¡å‹çš„ä¼˜ç‚¹ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç›¸æ¯”å…¶ä»–æ¨¡å‹ï¼Œä½¿ç”¨select() çš„äº‹ä»¶é©±åŠ¨æ¨¡å‹åªç”¨å•çº¿ç¨‹ï¼ˆè¿›ç¨‹ï¼‰æ‰§è¡Œï¼Œå ç”¨èµ„æºå°‘ï¼Œä¸æ¶ˆè€—å¤ªå¤š CPUï¼ŒåŒæ—¶èƒ½å¤Ÿä¸ºå¤šå®¢æˆ·ç«¯æä¾›æœåŠ¡ã€‚å¦‚æœè¯•å›¾å»ºç«‹ä¸€ä¸ªç®€å•çš„äº‹ä»¶é©±åŠ¨çš„æœåŠ¡å™¨ç¨‹åºï¼Œè¿™ä¸ªæ¨¡å‹æœ‰ä¸€å®šçš„å‚è€ƒä»·å€¼ã€‚</span></span><br></pre></td></tr></table></figure>

<p><strong>è¯¥æ¨¡å‹çš„ç¼ºç‚¹ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#é¦–å…ˆselect()æ¥å£å¹¶ä¸æ˜¯å®ç°â€œäº‹ä»¶é©±åŠ¨â€çš„æœ€å¥½é€‰æ‹©ã€‚å› ä¸ºå½“éœ€è¦æ¢æµ‹çš„å¥æŸ„å€¼è¾ƒå¤§æ—¶ï¼Œselect()æ¥å£æœ¬èº«éœ€è¦æ¶ˆè€—å¤§é‡æ—¶é—´å»è½®è¯¢å„ä¸ªå¥æŸ„ã€‚å¾ˆå¤šæ“ä½œç³»ç»Ÿæä¾›äº†æ›´ä¸ºé«˜æ•ˆçš„æ¥å£ï¼Œå¦‚linuxæä¾›äº†epollï¼ŒBSDæä¾›äº†kqueueï¼ŒSolarisæä¾›äº†/dev/pollï¼Œâ€¦ã€‚å¦‚æœéœ€è¦å®ç°æ›´é«˜æ•ˆçš„æœåŠ¡å™¨ç¨‹åºï¼Œç±»ä¼¼epollè¿™æ ·çš„æ¥å£æ›´è¢«æ¨èã€‚é—æ†¾çš„æ˜¯ä¸åŒçš„æ“ä½œç³»ç»Ÿç‰¹ä¾›çš„epollæ¥å£æœ‰å¾ˆå¤§å·®å¼‚ï¼Œæ‰€ä»¥ä½¿ç”¨ç±»ä¼¼äºepollçš„æ¥å£å®ç°å…·æœ‰è¾ƒå¥½è·¨å¹³å°èƒ½åŠ›çš„æœåŠ¡å™¨ä¼šæ¯”è¾ƒå›°éš¾ã€‚</span></span><br><span class="line"><span class="comment">#å…¶æ¬¡ï¼Œè¯¥æ¨¡å‹å°†äº‹ä»¶æ¢æµ‹å’Œäº‹ä»¶å“åº”å¤¹æ‚åœ¨ä¸€èµ·ï¼Œä¸€æ—¦äº‹ä»¶å“åº”çš„æ‰§è¡Œä½“åºå¤§ï¼Œåˆ™å¯¹æ•´ä¸ªæ¨¡å‹æ˜¯ç¾éš¾æ€§çš„ã€‚</span></span><br></pre></td></tr></table></figure>

<h3 id="äº”-å¼‚æ­¥IO-Asynchronous-I-x2F-O"><a href="#äº”-å¼‚æ­¥IO-Asynchronous-I-x2F-O" class="headerlink" title="äº” å¼‚æ­¥IO(Asynchronous I&#x2F;O)"></a>äº” å¼‚æ­¥IO(Asynchronous I&#x2F;O)</h3><p>Linuxä¸‹çš„asynchronous IOå…¶å®ç”¨å¾—ä¸å¤šï¼Œä»å†…æ ¸2.6ç‰ˆæœ¬æ‰å¼€å§‹å¼•å…¥ã€‚å…ˆçœ‹ä¸€ä¸‹å®ƒçš„æµç¨‹ï¼š</p>
<p><img src="https://pic2.zhimg.com/80/v2-ede97f17d1ca1e7f23bd62aae2548c55_720w.jpg" alt="img"></p>
<p>ç”¨æˆ·è¿›ç¨‹å‘èµ·readæ“ä½œä¹‹åï¼Œç«‹åˆ»å°±å¯ä»¥å¼€å§‹å»åšå…¶å®ƒçš„äº‹ã€‚è€Œå¦ä¸€æ–¹é¢ï¼Œä»kernelçš„è§’åº¦ï¼Œå½“å®ƒå—åˆ°ä¸€ä¸ªasynchronous readä¹‹åï¼Œé¦–å…ˆå®ƒä¼šç«‹åˆ»è¿”å›ï¼Œæ‰€ä»¥ä¸ä¼šå¯¹ç”¨æˆ·è¿›ç¨‹äº§ç”Ÿä»»ä½•blockã€‚ç„¶åï¼Œkernelä¼šç­‰å¾…æ•°æ®å‡†å¤‡å®Œæˆï¼Œç„¶åå°†æ•°æ®æ‹·è´åˆ°ç”¨æˆ·å†…å­˜ï¼Œå½“è¿™ä¸€åˆ‡éƒ½å®Œæˆä¹‹åï¼Œkernelä¼šç»™ç”¨æˆ·è¿›ç¨‹å‘é€ä¸€ä¸ªsignalï¼Œå‘Šè¯‰å®ƒreadæ“ä½œå®Œæˆäº†ã€‚</p>
<h3 id="å…­-IOæ¨¡å‹æ¯”è¾ƒåˆ†æ"><a href="#å…­-IOæ¨¡å‹æ¯”è¾ƒåˆ†æ" class="headerlink" title="å…­ IOæ¨¡å‹æ¯”è¾ƒåˆ†æ"></a>å…­ IOæ¨¡å‹æ¯”è¾ƒåˆ†æ</h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå·²ç»å°†å››ä¸ªIO Modeléƒ½ä»‹ç»å®Œäº†ã€‚ç°åœ¨å›è¿‡å¤´æ¥å›ç­”æœ€åˆçš„é‚£å‡ ä¸ªé—®é¢˜ï¼šblockingå’Œnon-blockingçš„åŒºåˆ«åœ¨å“ªï¼Œsynchronous IOå’Œasynchronous IOçš„åŒºåˆ«åœ¨å“ªã€‚ å…ˆå›ç­”æœ€ç®€å•çš„è¿™ä¸ªï¼šblocking vs non-blockingã€‚å‰é¢çš„ä»‹ç»ä¸­å…¶å®å·²ç»å¾ˆæ˜ç¡®çš„è¯´æ˜äº†è¿™ä¸¤è€…çš„åŒºåˆ«ã€‚è°ƒç”¨blocking IOä¼šä¸€ç›´blockä½å¯¹åº”çš„è¿›ç¨‹ç›´åˆ°æ“ä½œå®Œæˆï¼Œè€Œnon-blocking IOåœ¨kernelè¿˜å‡†å¤‡æ•°æ®çš„æƒ…å†µä¸‹ä¼šç«‹åˆ»è¿”å›ã€‚</p>
<p>å†è¯´æ˜synchronous IOå’Œasynchronous IOçš„åŒºåˆ«ä¹‹å‰ï¼Œéœ€è¦å…ˆç»™å‡ºä¸¤è€…çš„å®šä¹‰ã€‚Stevensç»™å‡ºçš„å®šä¹‰ï¼ˆå…¶å®æ˜¯POSIXçš„å®šä¹‰ï¼‰æ˜¯è¿™æ ·å­çš„ï¼š A synchronous I&#x2F;O operation causes the requesting process to be blocked until that I&#x2F;O operationcompletes; An asynchronous I&#x2F;O operation does not cause the requesting process to be blocked; ä¸¤è€…çš„åŒºåˆ«å°±åœ¨äºsynchronous IOåšâ€IO operationâ€çš„æ—¶å€™ä¼šå°†processé˜»å¡ã€‚æŒ‰ç…§è¿™ä¸ªå®šä¹‰ï¼Œå››ä¸ªIOæ¨¡å‹å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œä¹‹å‰æ‰€è¿°çš„blocking IOï¼Œnon-blocking IOï¼ŒIO multiplexingéƒ½å±äºsynchronous IOè¿™ä¸€ç±»ï¼Œè€Œ asynchronous I&#x2F;Oåä¸€ç±» ã€‚</p>
<p>æœ‰äººå¯èƒ½ä¼šè¯´ï¼Œnon-blocking IOå¹¶æ²¡æœ‰è¢«blockå•Šã€‚è¿™é‡Œæœ‰ä¸ªéå¸¸â€œç‹¡çŒ¾â€çš„åœ°æ–¹ï¼Œå®šä¹‰ä¸­æ‰€æŒ‡çš„â€IO operationâ€æ˜¯æŒ‡çœŸå®çš„IOæ“ä½œï¼Œå°±æ˜¯ä¾‹å­ä¸­çš„recvfromè¿™ä¸ªsystem callã€‚non-blocking IOåœ¨æ‰§è¡Œrecvfromè¿™ä¸ªsystem callçš„æ—¶å€™ï¼Œå¦‚æœkernelçš„æ•°æ®æ²¡æœ‰å‡†å¤‡å¥½ï¼Œè¿™æ—¶å€™ä¸ä¼šblockè¿›ç¨‹ã€‚ä½†æ˜¯ï¼Œå½“kernelä¸­æ•°æ®å‡†å¤‡å¥½çš„æ—¶å€™ï¼Œrecvfromä¼šå°†æ•°æ®ä»kernelæ‹·è´åˆ°ç”¨æˆ·å†…å­˜ä¸­ï¼Œè¿™ä¸ªæ—¶å€™è¿›ç¨‹æ˜¯è¢«blockäº†ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…ï¼Œè¿›ç¨‹æ˜¯è¢«blockçš„ã€‚è€Œasynchronous IOåˆ™ä¸ä¸€æ ·ï¼Œå½“è¿›ç¨‹å‘èµ·IO æ“ä½œä¹‹åï¼Œå°±ç›´æ¥è¿”å›å†ä¹Ÿä¸ç†ç¬äº†ï¼Œç›´åˆ°kernelå‘é€ä¸€ä¸ªä¿¡å·ï¼Œå‘Šè¯‰è¿›ç¨‹è¯´IOå®Œæˆã€‚åœ¨è¿™æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œè¿›ç¨‹å®Œå…¨æ²¡æœ‰è¢«blockã€‚</p>
<p>å„ä¸ªIO Modelçš„æ¯”è¾ƒå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://pic1.zhimg.com/80/v2-627ffa49acfdc032a65dbe350b0ac444_720w.jpg" alt="img"></p>
<p>ç»è¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œä¼šå‘ç°non-blocking IOå’Œasynchronous IOçš„åŒºåˆ«è¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚åœ¨non-blocking IOä¸­ï¼Œè™½ç„¶è¿›ç¨‹å¤§éƒ¨åˆ†æ—¶é—´éƒ½ä¸ä¼šè¢«blockï¼Œä½†æ˜¯å®ƒä»ç„¶è¦æ±‚è¿›ç¨‹å»ä¸»åŠ¨çš„checkï¼Œå¹¶ä¸”å½“æ•°æ®å‡†å¤‡å®Œæˆä»¥åï¼Œä¹Ÿéœ€è¦è¿›ç¨‹ä¸»åŠ¨çš„å†æ¬¡è°ƒç”¨recvfromæ¥å°†æ•°æ®æ‹·è´åˆ°ç”¨æˆ·å†…å­˜ã€‚è€Œasynchronous IOåˆ™å®Œå…¨ä¸åŒã€‚å®ƒå°±åƒæ˜¯ç”¨æˆ·è¿›ç¨‹å°†æ•´ä¸ªIOæ“ä½œäº¤ç»™äº†ä»–äººï¼ˆkernelï¼‰å®Œæˆï¼Œç„¶åä»–äººåšå®Œåå‘ä¿¡å·é€šçŸ¥ã€‚åœ¨æ­¤æœŸé—´ï¼Œç”¨æˆ·è¿›ç¨‹ä¸éœ€è¦å»æ£€æŸ¥IOæ“ä½œçš„çŠ¶æ€ï¼Œä¹Ÿä¸éœ€è¦ä¸»åŠ¨çš„å»æ‹·è´æ•°æ®ã€‚</p>
<h3 id="ä¸ƒ-selectorsæ¨¡å—"><a href="#ä¸ƒ-selectorsæ¨¡å—" class="headerlink" title="ä¸ƒ selectorsæ¨¡å—"></a>ä¸ƒ selectorsæ¨¡å—</h3><p>select,poll,epoll</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">IOå¤ç”¨ï¼šä¸ºäº†è§£é‡Šè¿™ä¸ªåè¯ï¼Œé¦–å…ˆæ¥ç†è§£ä¸‹å¤ç”¨è¿™ä¸ªæ¦‚å¿µï¼Œå¤ç”¨ä¹Ÿå°±æ˜¯å…±ç”¨çš„æ„æ€ï¼Œè¿™æ ·ç†è§£è¿˜æ˜¯æœ‰äº›æŠ½è±¡ï¼Œä¸ºæ­¤ï¼Œå’±ä»¬æ¥ç†è§£ä¸‹å¤ç”¨åœ¨é€šä¿¡é¢†åŸŸçš„ä½¿ç”¨ï¼Œåœ¨é€šä¿¡é¢†åŸŸä¸­ä¸ºäº†å……åˆ†åˆ©ç”¨ç½‘ç»œè¿æ¥çš„ç‰©ç†ä»‹è´¨ï¼Œå¾€å¾€åœ¨åŒä¸€æ¡ç½‘ç»œé“¾è·¯ä¸Šé‡‡ç”¨æ—¶åˆ†å¤ç”¨æˆ–é¢‘åˆ†å¤ç”¨çš„æŠ€æœ¯ä½¿å…¶åœ¨åŒä¸€é“¾è·¯ä¸Šä¼ è¾“å¤šè·¯ä¿¡å·ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬å°±åŸºæœ¬ä¸Šç†è§£äº†å¤ç”¨çš„å«ä¹‰ï¼Œå³å…¬ç”¨æŸä¸ªâ€œä»‹è´¨â€æ¥å°½å¯èƒ½å¤šçš„åšåŒä¸€ç±»(æ€§è´¨)çš„äº‹ï¼Œé‚£IOå¤ç”¨çš„â€œä»‹è´¨â€æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸ºæ­¤æˆ‘ä»¬é¦–å…ˆæ¥çœ‹çœ‹æœåŠ¡å™¨ç¼–ç¨‹çš„æ¨¡å‹ï¼Œå®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚æœåŠ¡ç«¯ä¼šäº§ç”Ÿä¸€ä¸ªè¿›ç¨‹æ¥å¯¹å…¶è¿›è¡ŒæœåŠ¡ï¼Œæ¯å½“æ¥ä¸€ä¸ªå®¢æˆ·è¯·æ±‚å°±äº§ç”Ÿä¸€ä¸ªè¿›ç¨‹æ¥æœåŠ¡ï¼Œç„¶è€Œè¿›ç¨‹ä¸å¯èƒ½æ— é™åˆ¶çš„äº§ç”Ÿï¼Œå› æ­¤ä¸ºäº†è§£å†³å¤§é‡å®¢æˆ·ç«¯è®¿é—®çš„é—®é¢˜ï¼Œå¼•å…¥äº†IOå¤ç”¨æŠ€æœ¯ï¼Œå³ï¼šä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶å¯¹å¤šä¸ªå®¢æˆ·è¯·æ±‚è¿›è¡ŒæœåŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´IOå¤ç”¨çš„â€œä»‹è´¨â€æ˜¯è¿›ç¨‹(å‡†ç¡®çš„è¯´å¤ç”¨çš„æ˜¯selectå’Œpollï¼Œå› ä¸ºè¿›ç¨‹ä¹Ÿæ˜¯é è°ƒç”¨selectå’Œpollæ¥å®ç°çš„)ï¼Œå¤ç”¨ä¸€ä¸ªè¿›ç¨‹(selectå’Œpoll)æ¥å¯¹å¤šä¸ªIOè¿›è¡ŒæœåŠ¡ï¼Œè™½ç„¶å®¢æˆ·ç«¯å‘æ¥çš„IOæ˜¯å¹¶å‘çš„ä½†æ˜¯IOæ‰€éœ€çš„è¯»å†™æ•°æ®å¤šæ•°æƒ…å†µä¸‹æ˜¯æ²¡æœ‰å‡†å¤‡å¥½çš„ï¼Œå› æ­¤å°±å¯ä»¥åˆ©ç”¨ä¸€ä¸ªå‡½æ•°(selectå’Œpoll)æ¥ç›‘å¬IOæ‰€éœ€çš„è¿™äº›æ•°æ®çš„çŠ¶æ€ï¼Œä¸€æ—¦IOæœ‰æ•°æ®å¯ä»¥è¿›è¡Œè¯»å†™äº†ï¼Œè¿›ç¨‹å°±æ¥å¯¹è¿™æ ·çš„IOè¿›è¡ŒæœåŠ¡ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç†è§£å®ŒIOå¤ç”¨åï¼Œæˆ‘ä»¬åœ¨æ¥çœ‹ä¸‹å®ç°IOå¤ç”¨ä¸­çš„ä¸‰ä¸ªAPI(selectã€pollå’Œepoll)çš„åŒºåˆ«å’Œè”ç³»</span><br><span class="line"></span><br><span class="line">selectï¼Œpollï¼Œepolléƒ½æ˜¯IOå¤šè·¯å¤ç”¨çš„æœºåˆ¶ï¼ŒI/Oå¤šè·¯å¤ç”¨å°±æ˜¯é€šè¿‡ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥ç›‘è§†å¤šä¸ªæè¿°ç¬¦ï¼Œä¸€æ—¦æŸä¸ªæè¿°ç¬¦å°±ç»ªï¼ˆä¸€èˆ¬æ˜¯è¯»å°±ç»ªæˆ–è€…å†™å°±ç»ªï¼‰ï¼Œèƒ½å¤Ÿé€šçŸ¥åº”ç”¨ç¨‹åºè¿›è¡Œç›¸åº”çš„è¯»å†™æ“ä½œã€‚ä½†selectï¼Œpollï¼Œepollæœ¬è´¨ä¸Šéƒ½æ˜¯åŒæ­¥I/Oï¼Œå› ä¸ºä»–ä»¬éƒ½éœ€è¦åœ¨è¯»å†™äº‹ä»¶å°±ç»ªåè‡ªå·±è´Ÿè´£è¿›è¡Œè¯»å†™ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªè¯»å†™è¿‡ç¨‹æ˜¯é˜»å¡çš„ï¼Œè€Œå¼‚æ­¥I/Oåˆ™æ— éœ€è‡ªå·±è´Ÿè´£è¿›è¡Œè¯»å†™ï¼Œå¼‚æ­¥I/Oçš„å®ç°ä¼šè´Ÿè´£æŠŠæ•°æ®ä»å†…æ ¸æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ã€‚ä¸‰è€…çš„åŸå‹å¦‚ä¸‹æ‰€ç¤ºï¼š</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> select(<span class="built_in">int</span> nfds, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, struct timeval *timeout);</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> poll(struct pollfd *fds, nfds_t nfds, <span class="built_in">int</span> timeout);</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> epoll_wait(<span class="built_in">int</span> epfd, struct epoll_event *events, <span class="built_in">int</span> maxevents, <span class="built_in">int</span> timeout);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="number">1.</span>selectçš„ç¬¬ä¸€ä¸ªå‚æ•°nfdsä¸ºfdseté›†åˆä¸­æœ€å¤§æè¿°ç¬¦å€¼åŠ <span class="number">1</span>ï¼Œfdsetæ˜¯ä¸€ä¸ªä½æ•°ç»„ï¼Œå…¶å¤§å°é™åˆ¶ä¸º__FD_SETSIZEï¼ˆ<span class="number">1024</span>ï¼‰ï¼Œä½æ•°ç»„çš„æ¯ä¸€ä½ä»£è¡¨å…¶å¯¹åº”çš„æè¿°ç¬¦æ˜¯å¦éœ€è¦è¢«æ£€æŸ¥ã€‚ç¬¬äºŒä¸‰å››å‚æ•°è¡¨ç¤ºéœ€è¦å…³æ³¨è¯»ã€å†™ã€é”™è¯¯äº‹ä»¶çš„æ–‡ä»¶æè¿°ç¬¦ä½æ•°ç»„ï¼Œè¿™äº›å‚æ•°æ—¢æ˜¯è¾“å…¥å‚æ•°ä¹Ÿæ˜¯è¾“å‡ºå‚æ•°ï¼Œå¯èƒ½ä¼šè¢«å†…æ ¸ä¿®æ”¹ç”¨äºæ ‡ç¤ºå“ªäº›æè¿°ç¬¦ä¸Šå‘ç”Ÿäº†å…³æ³¨çš„äº‹ä»¶ï¼Œæ‰€ä»¥æ¯æ¬¡è°ƒç”¨selectå‰éƒ½éœ€è¦é‡æ–°åˆå§‹åŒ–fdsetã€‚timeoutå‚æ•°ä¸ºè¶…æ—¶æ—¶é—´ï¼Œè¯¥ç»“æ„ä¼šè¢«å†…æ ¸ä¿®æ”¹ï¼Œå…¶å€¼ä¸ºè¶…æ—¶å‰©ä½™çš„æ—¶é—´ã€‚</span><br><span class="line"></span><br><span class="line"> selectçš„è°ƒç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">ï¼ˆ<span class="number">1</span>ï¼‰ä½¿ç”¨copy_from_userä»ç”¨æˆ·ç©ºé—´æ‹·è´fdsetåˆ°å†…æ ¸ç©ºé—´</span><br><span class="line"></span><br><span class="line">ï¼ˆ<span class="number">2</span>ï¼‰æ³¨å†Œå›è°ƒå‡½æ•°__pollwait</span><br><span class="line"></span><br><span class="line">ï¼ˆ<span class="number">3</span>ï¼‰éå†æ‰€æœ‰fdï¼Œè°ƒç”¨å…¶å¯¹åº”çš„pollæ–¹æ³•ï¼ˆå¯¹äºsocketï¼Œè¿™ä¸ªpollæ–¹æ³•æ˜¯sock_pollï¼Œsock_pollæ ¹æ®æƒ…å†µä¼šè°ƒç”¨åˆ°tcp_poll,udp_pollæˆ–è€…datagram_pollï¼‰</span><br><span class="line"></span><br><span class="line">ï¼ˆ<span class="number">4</span>ï¼‰ä»¥tcp_pollä¸ºä¾‹ï¼Œå…¶æ ¸å¿ƒå®ç°å°±æ˜¯__pollwaitï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æ³¨å†Œçš„å›è°ƒå‡½æ•°ã€‚</span><br><span class="line"></span><br><span class="line">ï¼ˆ<span class="number">5</span>ï¼‰__pollwaitçš„ä¸»è¦å·¥ä½œå°±æ˜¯æŠŠcurrentï¼ˆå½“å‰è¿›ç¨‹ï¼‰æŒ‚åˆ°è®¾å¤‡çš„ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œä¸åŒçš„è®¾å¤‡æœ‰ä¸åŒçš„ç­‰å¾…é˜Ÿåˆ—ï¼Œå¯¹äºtcp_poll æ¥è¯´ï¼Œå…¶ç­‰å¾…é˜Ÿåˆ—æ˜¯sk-&gt;sk_sleepï¼ˆæ³¨æ„æŠŠè¿›ç¨‹æŒ‚åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­å¹¶ä¸ä»£è¡¨è¿›ç¨‹å·²ç»ç¡çœ äº†ï¼‰ã€‚åœ¨è®¾å¤‡æ”¶åˆ°ä¸€æ¡æ¶ˆæ¯ï¼ˆç½‘ç»œè®¾å¤‡ï¼‰æˆ–å¡«å†™å®Œæ–‡ä»¶æ•° æ®ï¼ˆç£ç›˜è®¾å¤‡ï¼‰åï¼Œä¼šå”¤é†’è®¾å¤‡ç­‰å¾…é˜Ÿåˆ—ä¸Šç¡çœ çš„è¿›ç¨‹ï¼Œè¿™æ—¶currentä¾¿è¢«å”¤é†’äº†ã€‚</span><br><span class="line"></span><br><span class="line">ï¼ˆ<span class="number">6</span>ï¼‰pollæ–¹æ³•è¿”å›æ—¶ä¼šè¿”å›ä¸€ä¸ªæè¿°è¯»å†™æ“ä½œæ˜¯å¦å°±ç»ªçš„maskæ©ç ï¼Œæ ¹æ®è¿™ä¸ªmaskæ©ç ç»™fd_setèµ‹å€¼ã€‚</span><br><span class="line"></span><br><span class="line">ï¼ˆ<span class="number">7</span>ï¼‰å¦‚æœéå†å®Œæ‰€æœ‰çš„fdï¼Œè¿˜æ²¡æœ‰è¿”å›ä¸€ä¸ªå¯è¯»å†™çš„maskæ©ç ï¼Œåˆ™ä¼šè°ƒç”¨schedule_timeoutæ˜¯è°ƒç”¨selectçš„è¿›ç¨‹ï¼ˆä¹Ÿå°±æ˜¯ currentï¼‰è¿›å…¥ç¡çœ ã€‚å½“è®¾å¤‡é©±åŠ¨å‘ç”Ÿè‡ªèº«èµ„æºå¯è¯»å†™åï¼Œä¼šå”¤é†’å…¶ç­‰å¾…é˜Ÿåˆ—ä¸Šç¡çœ çš„è¿›ç¨‹ã€‚å¦‚æœè¶…è¿‡ä¸€å®šçš„è¶…æ—¶æ—¶é—´ï¼ˆschedule_timeout æŒ‡å®šï¼‰ï¼Œè¿˜æ˜¯æ²¡äººå”¤é†’ï¼Œåˆ™è°ƒç”¨selectçš„è¿›ç¨‹ä¼šé‡æ–°è¢«å”¤é†’è·å¾—CPUï¼Œè¿›è€Œé‡æ–°éå†fdï¼Œåˆ¤æ–­æœ‰æ²¡æœ‰å°±ç»ªçš„fdã€‚</span><br><span class="line"></span><br><span class="line">ï¼ˆ<span class="number">8</span>ï¼‰æŠŠfd_setä»å†…æ ¸ç©ºé—´æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ã€‚</span><br><span class="line"></span><br><span class="line">æ€»ç»“ä¸‹selectçš„å‡ å¤§ç¼ºç‚¹ï¼š</span><br><span class="line"></span><br><span class="line">ï¼ˆ<span class="number">1</span>ï¼‰æ¯æ¬¡è°ƒç”¨selectï¼Œéƒ½éœ€è¦æŠŠfdé›†åˆä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€ï¼Œè¿™ä¸ªå¼€é”€åœ¨fdå¾ˆå¤šæ—¶ä¼šå¾ˆå¤§</span><br><span class="line"></span><br><span class="line">ï¼ˆ<span class="number">2</span>ï¼‰åŒæ—¶æ¯æ¬¡è°ƒç”¨selectéƒ½éœ€è¦åœ¨å†…æ ¸éå†ä¼ é€’è¿›æ¥çš„æ‰€æœ‰fdï¼Œè¿™ä¸ªå¼€é”€åœ¨fdå¾ˆå¤šæ—¶ä¹Ÿå¾ˆå¤§</span><br><span class="line"></span><br><span class="line">ï¼ˆ<span class="number">3</span>ï¼‰selectæ”¯æŒçš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡å¤ªå°äº†ï¼Œé»˜è®¤æ˜¯<span class="number">1024</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>ï¼  pollä¸selectä¸åŒï¼Œé€šè¿‡ä¸€ä¸ªpollfdæ•°ç»„å‘å†…æ ¸ä¼ é€’éœ€è¦å…³æ³¨çš„äº‹ä»¶ï¼Œæ•…æ²¡æœ‰æè¿°ç¬¦ä¸ªæ•°çš„é™åˆ¶ï¼Œpollfdä¸­çš„eventså­—æ®µå’Œreventsåˆ†åˆ«ç”¨äºæ ‡ç¤ºå…³æ³¨çš„äº‹ä»¶å’Œå‘ç”Ÿçš„äº‹ä»¶ï¼Œæ•…pollfdæ•°ç»„åªéœ€è¦è¢«åˆå§‹åŒ–ä¸€æ¬¡ã€‚</span><br><span class="line"></span><br><span class="line"> pollçš„å®ç°æœºåˆ¶ä¸selectç±»ä¼¼ï¼Œå…¶å¯¹åº”å†…æ ¸ä¸­çš„sys_pollï¼Œåªä¸è¿‡pollå‘å†…æ ¸ä¼ é€’pollfdæ•°ç»„ï¼Œç„¶åå¯¹pollfdä¸­çš„æ¯ä¸ªæè¿°ç¬¦è¿›è¡Œpollï¼Œç›¸æ¯”å¤„ç†fdsetæ¥è¯´ï¼Œpollæ•ˆç‡æ›´é«˜ã€‚pollè¿”å›åï¼Œéœ€è¦å¯¹pollfdä¸­çš„æ¯ä¸ªå…ƒç´ æ£€æŸ¥å…¶reventså€¼ï¼Œæ¥å¾—æŒ‡äº‹ä»¶æ˜¯å¦å‘ç”Ÿã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>ï¼ç›´åˆ°Linux2<span class="number">.6</span>æ‰å‡ºç°äº†ç”±å†…æ ¸ç›´æ¥æ”¯æŒçš„å®ç°æ–¹æ³•ï¼Œé‚£å°±æ˜¯epollï¼Œè¢«å…¬è®¤ä¸ºLinux2<span class="number">.6</span>ä¸‹æ€§èƒ½æœ€å¥½çš„å¤šè·¯I/Oå°±ç»ªé€šçŸ¥æ–¹æ³•ã€‚epollå¯ä»¥åŒæ—¶æ”¯æŒæ°´å¹³è§¦å‘å’Œè¾¹ç¼˜è§¦å‘ï¼ˆEdge Triggeredï¼Œåªå‘Šè¯‰è¿›ç¨‹å“ªäº›æ–‡ä»¶æè¿°ç¬¦åˆšåˆšå˜ä¸ºå°±ç»ªçŠ¶æ€ï¼Œå®ƒåªè¯´ä¸€éï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰é‡‡å–è¡ŒåŠ¨ï¼Œé‚£ä¹ˆå®ƒå°†ä¸ä¼šå†æ¬¡å‘ŠçŸ¥ï¼Œè¿™ç§æ–¹å¼ç§°ä¸ºè¾¹ç¼˜è§¦å‘ï¼‰ï¼Œç†è®ºä¸Šè¾¹ç¼˜è§¦å‘çš„æ€§èƒ½è¦æ›´é«˜ä¸€äº›ï¼Œä½†æ˜¯ä»£ç å®ç°ç›¸å½“å¤æ‚ã€‚epollåŒæ ·åªå‘ŠçŸ¥é‚£äº›å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œä¸”å½“æˆ‘ä»¬è°ƒç”¨epoll_wait()è·å¾—å°±ç»ªæ–‡ä»¶æè¿°ç¬¦æ—¶ï¼Œè¿”å›çš„ä¸æ˜¯å®é™…çš„æè¿°ç¬¦ï¼Œè€Œæ˜¯ä¸€ä¸ªä»£è¡¨å°±ç»ªæè¿°ç¬¦æ•°é‡çš„å€¼ï¼Œä½ åªéœ€è¦å»epollæŒ‡å®šçš„ä¸€ä¸ªæ•°ç»„ä¸­ä¾æ¬¡å–å¾—ç›¸åº”æ•°é‡çš„æ–‡ä»¶æè¿°ç¬¦å³å¯ï¼Œè¿™é‡Œä¹Ÿä½¿ç”¨äº†å†…å­˜æ˜ å°„ï¼ˆmmapï¼‰æŠ€æœ¯ï¼Œè¿™æ ·ä¾¿å½»åº•çœæ‰äº†è¿™äº›æ–‡ä»¶æè¿°ç¬¦åœ¨ç³»ç»Ÿè°ƒç”¨æ—¶å¤åˆ¶çš„å¼€é”€ã€‚å¦ä¸€ä¸ªæœ¬è´¨çš„æ”¹è¿›åœ¨äºepollé‡‡ç”¨åŸºäºäº‹ä»¶çš„å°±ç»ªé€šçŸ¥æ–¹å¼ã€‚åœ¨select/pollä¸­ï¼Œè¿›ç¨‹åªæœ‰åœ¨è°ƒç”¨ä¸€å®šçš„æ–¹æ³•åï¼Œå†…æ ¸æ‰å¯¹æ‰€æœ‰ç›‘è§†çš„æ–‡ä»¶æè¿°ç¬¦è¿›è¡Œæ‰«æï¼Œè€Œepolläº‹å…ˆé€šè¿‡epoll_ctl()æ¥æ³¨å†Œä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä¸€æ—¦åŸºäºæŸä¸ªæ–‡ä»¶æè¿°ç¬¦å°±ç»ªæ—¶ï¼Œå†…æ ¸ä¼šé‡‡ç”¨ç±»ä¼¼callbackçš„å›è°ƒæœºåˆ¶ï¼Œè¿…é€Ÿæ¿€æ´»è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œå½“è¿›ç¨‹è°ƒç”¨epoll_wait()æ—¶ä¾¿å¾—åˆ°é€šçŸ¥ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">epollæ—¢ç„¶æ˜¯å¯¹selectå’Œpollçš„æ”¹è¿›ï¼Œå°±åº”è¯¥èƒ½é¿å…ä¸Šè¿°çš„ä¸‰ä¸ªç¼ºç‚¹ã€‚é‚£epolléƒ½æ˜¯æ€ä¹ˆè§£å†³çš„å‘¢ï¼Ÿåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹epoll å’Œselectå’Œpollçš„è°ƒç”¨æ¥å£ä¸Šçš„ä¸åŒï¼Œselectå’Œpolléƒ½åªæä¾›äº†ä¸€ä¸ªå‡½æ•°â€”â€”selectæˆ–è€…pollå‡½æ•°ã€‚è€Œepollæä¾›äº†ä¸‰ä¸ªå‡½ æ•°ï¼Œepoll_create,epoll_ctlå’Œepoll_waitï¼Œepoll_createæ˜¯åˆ›å»ºä¸€ä¸ªepollå¥æŸ„ï¼›epoll_ctlæ˜¯æ³¨ å†Œè¦ç›‘å¬çš„äº‹ä»¶ç±»å‹ï¼›epoll_waitåˆ™æ˜¯ç­‰å¾…äº‹ä»¶çš„äº§ç”Ÿã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€å¯¹äºç¬¬ä¸€ä¸ªç¼ºç‚¹ï¼Œepollçš„è§£å†³æ–¹æ¡ˆåœ¨epoll_ctlå‡½æ•°ä¸­ã€‚æ¯æ¬¡æ³¨å†Œæ–°çš„äº‹ä»¶åˆ°epollå¥æŸ„ä¸­æ—¶ï¼ˆåœ¨epoll_ctlä¸­æŒ‡å®š EPOLL_CTL_ADDï¼‰ï¼Œä¼šæŠŠæ‰€æœ‰çš„fdæ‹·è´è¿›å†…æ ¸ï¼Œè€Œä¸æ˜¯åœ¨epoll_waitçš„æ—¶å€™é‡å¤æ‹·è´ã€‚epollä¿è¯äº†æ¯ä¸ªfdåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­åªä¼šæ‹·è´ ä¸€æ¬¡ã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€å¯¹äºç¬¬äºŒä¸ªç¼ºç‚¹ï¼Œepollçš„è§£å†³æ–¹æ¡ˆä¸åƒselectæˆ–pollä¸€æ ·æ¯æ¬¡éƒ½æŠŠcurrentè½®æµåŠ å…¥fdå¯¹åº”çš„è®¾å¤‡ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œè€Œåªåœ¨ epoll_ctlæ—¶æŠŠcurrentæŒ‚ä¸€éï¼ˆè¿™ä¸€éå¿…ä¸å¯å°‘ï¼‰å¹¶ä¸ºæ¯ä¸ªfdæŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“è®¾å¤‡å°±ç»ªï¼Œå”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸Šçš„ç­‰å¾…è€…æ—¶ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªå›è°ƒ å‡½æ•°ï¼Œè€Œè¿™ä¸ªå›è°ƒå‡½æ•°ä¼šæŠŠå°±ç»ªçš„fdåŠ å…¥ä¸€ä¸ªå°±ç»ªé“¾è¡¨ï¼‰ã€‚epoll_waitçš„å·¥ä½œå®é™…ä¸Šå°±æ˜¯åœ¨è¿™ä¸ªå°±ç»ªé“¾è¡¨ä¸­æŸ¥çœ‹æœ‰æ²¡æœ‰å°±ç»ªçš„fdï¼ˆåˆ©ç”¨ schedule_timeout()å®ç°ç¡ä¸€ä¼šï¼Œåˆ¤æ–­ä¸€ä¼šçš„æ•ˆæœï¼Œå’Œselectå®ç°ä¸­çš„ç¬¬<span class="number">7</span>æ­¥æ˜¯ç±»ä¼¼çš„ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€å¯¹äºç¬¬ä¸‰ä¸ªç¼ºç‚¹ï¼Œepollæ²¡æœ‰è¿™ä¸ªé™åˆ¶ï¼Œå®ƒæ‰€æ”¯æŒçš„FDä¸Šé™æ˜¯æœ€å¤§å¯ä»¥æ‰“å¼€æ–‡ä»¶çš„æ•°ç›®ï¼Œè¿™ä¸ªæ•°å­—ä¸€èˆ¬è¿œå¤§äº<span class="number">2048</span>,ä¸¾ä¸ªä¾‹å­, åœ¨1GBå†…å­˜çš„æœºå™¨ä¸Šå¤§çº¦æ˜¯<span class="number">10</span>ä¸‡å·¦å³ï¼Œå…·ä½“æ•°ç›®å¯ä»¥cat /proc/sys/fs/file-<span class="built_in">max</span>å¯Ÿçœ‹,ä¸€èˆ¬æ¥è¯´è¿™ä¸ªæ•°ç›®å’Œç³»ç»Ÿå†…å­˜å…³ç³»å¾ˆå¤§ã€‚</span><br><span class="line"></span><br><span class="line">æ€»ç»“ï¼š</span><br><span class="line"></span><br><span class="line">ï¼ˆ<span class="number">1</span>ï¼‰selectï¼Œpollå®ç°éœ€è¦è‡ªå·±ä¸æ–­è½®è¯¢æ‰€æœ‰fdé›†åˆï¼Œç›´åˆ°è®¾å¤‡å°±ç»ªï¼ŒæœŸé—´å¯èƒ½è¦ç¡çœ å’Œå”¤é†’å¤šæ¬¡äº¤æ›¿ã€‚è€Œepollå…¶å®ä¹Ÿéœ€è¦è°ƒç”¨ epoll_waitä¸æ–­è½®è¯¢å°±ç»ªé“¾è¡¨ï¼ŒæœŸé—´ä¹Ÿå¯èƒ½å¤šæ¬¡ç¡çœ å’Œå”¤é†’äº¤æ›¿ï¼Œä½†æ˜¯å®ƒæ˜¯è®¾å¤‡å°±ç»ªæ—¶ï¼Œè°ƒç”¨å›è°ƒå‡½æ•°ï¼ŒæŠŠå°±ç»ªfdæ”¾å…¥å°±ç»ªé“¾è¡¨ä¸­ï¼Œå¹¶å”¤é†’åœ¨ epoll_waitä¸­è¿›å…¥ç¡çœ çš„è¿›ç¨‹ã€‚è™½ç„¶éƒ½è¦ç¡çœ å’Œäº¤æ›¿ï¼Œä½†æ˜¯selectå’Œpollåœ¨â€œé†’ç€â€çš„æ—¶å€™è¦éå†æ•´ä¸ªfdé›†åˆï¼Œè€Œepollåœ¨â€œé†’ç€â€çš„ æ—¶å€™åªè¦åˆ¤æ–­ä¸€ä¸‹å°±ç»ªé“¾è¡¨æ˜¯å¦ä¸ºç©ºå°±è¡Œäº†ï¼Œè¿™èŠ‚çœäº†å¤§é‡çš„CPUæ—¶é—´ï¼Œè¿™å°±æ˜¯å›è°ƒæœºåˆ¶å¸¦æ¥çš„æ€§èƒ½æå‡ã€‚</span><br><span class="line"></span><br><span class="line">ï¼ˆ<span class="number">2</span>ï¼‰selectï¼Œpollæ¯æ¬¡è°ƒç”¨éƒ½è¦æŠŠfdé›†åˆä»ç”¨æˆ·æ€å¾€å†…æ ¸æ€æ‹·è´ä¸€æ¬¡ï¼Œå¹¶ä¸”è¦æŠŠcurrentå¾€è®¾å¤‡ç­‰å¾…é˜Ÿåˆ—ä¸­æŒ‚ä¸€æ¬¡ï¼Œè€Œepollåªè¦ ä¸€æ¬¡æ‹·è´ï¼Œè€Œä¸”æŠŠcurrentå¾€ç­‰å¾…é˜Ÿåˆ—ä¸ŠæŒ‚ä¹ŸåªæŒ‚ä¸€æ¬¡ï¼ˆåœ¨epoll_waitçš„å¼€å§‹ï¼Œæ³¨æ„è¿™é‡Œçš„ç­‰å¾…é˜Ÿåˆ—å¹¶ä¸æ˜¯è®¾å¤‡ç­‰å¾…é˜Ÿåˆ—ï¼Œåªæ˜¯ä¸€ä¸ªepollå†… éƒ¨å®šä¹‰çš„ç­‰å¾…é˜Ÿåˆ—ï¼‰ï¼Œè¿™ä¹Ÿèƒ½èŠ‚çœä¸å°‘çš„å¼€é”€ã€‚</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸‰ç§IOå¤šè·¯å¤ç”¨æ¨¡å‹åœ¨ä¸åŒçš„å¹³å°æœ‰ç€ä¸åŒçš„æ”¯æŒï¼Œè€Œepollåœ¨windowsä¸‹å°±ä¸æ”¯æŒï¼Œå¥½åœ¨æˆ‘ä»¬æœ‰selectorsæ¨¡å—ï¼Œå¸®æˆ‘ä»¬é»˜è®¤é€‰æ‹©å½“å‰å¹³å°ä¸‹æœ€åˆé€‚çš„</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æœåŠ¡ç«¯</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> selectors</span><br><span class="line"></span><br><span class="line">sel=selectors.DefaultSelector()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">accept</span>(<span class="params">server_fileobj,mask</span>):</span></span><br><span class="line">    conn,addr=server_fileobj.accept()</span><br><span class="line">    sel.register(conn,selectors.EVENT_READ,read)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read</span>(<span class="params">conn,mask</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        data=conn.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;closing&#x27;</span>,conn)</span><br><span class="line">            sel.unregister(conn)</span><br><span class="line">            conn.close()</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        conn.send(data.upper()+<span class="string">b&#x27;_SB&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;closing&#x27;</span>, conn)</span><br><span class="line">        sel.unregister(conn)</span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server_fileobj=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">server_fileobj.setsockopt(SOL_SOCKET,SO_REUSEADDR,<span class="number">1</span>)</span><br><span class="line">server_fileobj.bind((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8088</span>))</span><br><span class="line">server_fileobj.listen(<span class="number">5</span>)</span><br><span class="line">server_fileobj.setblocking(<span class="literal">False</span>) <span class="comment">#è®¾ç½®socketçš„æ¥å£ä¸ºéé˜»å¡</span></span><br><span class="line">sel.register(server_fileobj,selectors.EVENT_READ,accept) <span class="comment">#ç›¸å½“äºç½‘selectçš„è¯»åˆ—è¡¨é‡Œappendäº†ä¸€ä¸ªæ–‡ä»¶å¥æŸ„server_fileobj,å¹¶ä¸”ç»‘å®šäº†ä¸€ä¸ªå›è°ƒå‡½æ•°accept</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    events=sel.select() <span class="comment">#æ£€æµ‹æ‰€æœ‰çš„fileobjï¼Œæ˜¯å¦æœ‰å®Œæˆwait dataçš„</span></span><br><span class="line">    <span class="keyword">for</span> sel_obj,mask <span class="keyword">in</span> events:</span><br><span class="line">        callback=sel_obj.data <span class="comment">#callback=accpet</span></span><br><span class="line">        callback(sel_obj.fileobj,mask) <span class="comment">#accpet(server_fileobj,1)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line">c=socket(AF_INET,SOCK_STREAM)</span><br><span class="line">c.connect((<span class="string">&#x27;127.0.0.1&#x27;</span>,<span class="number">8088</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg=<span class="built_in">input</span>(<span class="string">&#x27;&gt;&gt;: &#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> msg:<span class="keyword">continue</span></span><br><span class="line">    c.send(msg.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    data=c.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="built_in">print</span>(data.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>ä½œä¸š:åŸºäºselectorsæ¨¡å—å®ç°å¹¶å‘çš„FTP</p>
<p><a href="https://link.zhihu.com/?target=https://pan.baidu.com/s/1qYPrHCg">å‚è€ƒ:é“¾æ¥: https://pan.baidu.com/s/1qYPrHCg å¯†ç : 9is4</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>40-æ•°æ®åº“ï¼ˆäºŒï¼‰</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/40_%E5%BA%93%E7%9B%B8%E5%85%B3/</url>
    <content><![CDATA[<h3 id="ä¸€-ç³»ç»Ÿæ•°æ®åº“"><a href="#ä¸€-ç³»ç»Ÿæ•°æ®åº“" class="headerlink" title="ä¸€ ç³»ç»Ÿæ•°æ®åº“"></a>ä¸€ ç³»ç»Ÿæ•°æ®åº“</h3><p>information_schemaï¼š è™šæ‹Ÿåº“ï¼Œä¸å ç”¨ç£ç›˜ç©ºé—´ï¼Œå­˜å‚¨çš„æ˜¯æ•°æ®åº“å¯åŠ¨åçš„ä¸€äº›å‚æ•°ï¼Œå¦‚ç”¨æˆ·è¡¨ä¿¡æ¯ã€åˆ—ä¿¡æ¯ã€æƒé™ä¿¡æ¯ã€å­—ç¬¦ä¿¡æ¯ç­‰ performance_schemaï¼š MySQL 5.5å¼€å§‹æ–°å¢ä¸€ä¸ªæ•°æ®åº“ï¼šä¸»è¦ç”¨äºæ”¶é›†æ•°æ®åº“æœåŠ¡å™¨æ€§èƒ½å‚æ•°ï¼Œè®°å½•å¤„ç†æŸ¥è¯¢è¯·æ±‚æ—¶å‘ç”Ÿçš„å„ç§äº‹ä»¶ã€é”ç­‰ç°è±¡ mysqlï¼š æˆæƒåº“ï¼Œä¸»è¦å­˜å‚¨ç³»ç»Ÿç”¨æˆ·çš„æƒé™ä¿¡æ¯ testï¼š MySQLæ•°æ®åº“ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºçš„æµ‹è¯•æ•°æ®åº“</p>
<h3 id="äºŒ-åˆ›å»ºæ•°æ®åº“"><a href="#äºŒ-åˆ›å»ºæ•°æ®åº“" class="headerlink" title="äºŒ åˆ›å»ºæ•°æ®åº“"></a>äºŒ åˆ›å»ºæ•°æ®åº“</h3><p>1 è¯­æ³•(help create database)</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE æ•°æ®åº“å charset utf8;</span><br></pre></td></tr></table></figure>

<p>2 æ•°æ®åº“å‘½åè§„åˆ™ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">å¯ä»¥ç”±å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€ï¼ ã€ï¼ƒã€ï¼„</span><br><span class="line">åŒºåˆ†å¤§å°å†™</span><br><span class="line">å”¯ä¸€æ€§</span><br><span class="line">ä¸èƒ½ä½¿ç”¨å…³é”®å­—å¦‚ create select</span><br><span class="line">ä¸èƒ½å•ç‹¬ä½¿ç”¨æ•°å­—</span><br><span class="line">æœ€é•¿<span class="number">128</span>ä½</span><br></pre></td></tr></table></figure>

<h3 id="ä¸‰-æ•°æ®åº“ç›¸å…³æ“ä½œ"><a href="#ä¸‰-æ•°æ®åº“ç›¸å…³æ“ä½œ" class="headerlink" title="ä¸‰ æ•°æ®åº“ç›¸å…³æ“ä½œ"></a>ä¸‰ æ•°æ®åº“ç›¸å…³æ“ä½œ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> æŸ¥çœ‹æ•°æ®åº“</span><br><span class="line">show databases;</span><br><span class="line">show create database db1;</span><br><span class="line">select database();</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> é€‰æ‹©æ•°æ®åº“</span><br><span class="line">USE æ•°æ®åº“å</span><br><span class="line"></span><br><span class="line"><span class="number">3</span> åˆ é™¤æ•°æ®åº“</span><br><span class="line">DROP DATABASE æ•°æ®åº“å;</span><br><span class="line"></span><br><span class="line"><span class="number">4</span> ä¿®æ”¹æ•°æ®åº“</span><br><span class="line">alter database db1 charset utf8;</span><br></pre></td></tr></table></figure>

<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73342471?p=163">
  </a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>41-æ•°æ®åº“ï¼ˆä¸‰ï¼‰</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/41_%E8%A1%A8%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<h2 id="ä¸€-å­˜å‚¨å¼•æ“ä»‹ç»"><a href="#ä¸€-å­˜å‚¨å¼•æ“ä»‹ç»" class="headerlink" title="ä¸€ å­˜å‚¨å¼•æ“ä»‹ç»"></a>ä¸€ å­˜å‚¨å¼•æ“ä»‹ç»</h2><p>å­˜å‚¨å¼•æ“å³è¡¨ç±»å‹ï¼Œmysqlæ ¹æ®ä¸åŒçš„è¡¨ç±»å‹ä¼šæœ‰ä¸åŒçš„å¤„ç†æœºåˆ¶</p>
<p><a href="https://link.zhihu.com/?target=http://www.cnblogs.com/linhaifeng/articles/7213670.html">è¯¦è§ï¼šhttp://www.cnblogs.com/linhaifeng/articles/7213670.html</a></p>
<h2 id="äºŒ-è¡¨ä»‹ç»"><a href="#äºŒ-è¡¨ä»‹ç»" class="headerlink" title="äºŒ è¡¨ä»‹ç»"></a>äºŒ è¡¨ä»‹ç»</h2><p>è¡¨ç›¸å½“äºæ–‡ä»¶ï¼Œè¡¨ä¸­çš„ä¸€æ¡è®°å½•å°±ç›¸å½“äºæ–‡ä»¶çš„ä¸€è¡Œå†…å®¹ï¼Œä¸åŒçš„æ˜¯ï¼Œè¡¨ä¸­çš„ä¸€æ¡è®°å½•æœ‰å¯¹åº”çš„æ ‡é¢˜ï¼Œç§°ä¸ºè¡¨çš„å­—æ®µ</p>
<p><img src="https://pic4.zhimg.com/80/v2-ca13535894233b7bc6a55484b9965ea3_720w.jpg" alt="img"></p>
<p>idï¼Œnameï¼Œqqï¼Œageç§°ä¸ºå­—æ®µï¼Œå…¶ä½™çš„ï¼Œä¸€è¡Œå†…å®¹ç§°ä¸ºä¸€æ¡è®°å½•</p>
<h2 id="ä¸‰-åˆ›å»ºè¡¨"><a href="#ä¸‰-åˆ›å»ºè¡¨" class="headerlink" title="ä¸‰ åˆ›å»ºè¡¨"></a>ä¸‰ åˆ›å»ºè¡¨</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•ï¼š</span></span><br><span class="line">create table è¡¨å(</span><br><span class="line">å­—æ®µå<span class="number">1</span> ç±»å‹[(å®½åº¦) çº¦æŸæ¡ä»¶],</span><br><span class="line">å­—æ®µå<span class="number">2</span> ç±»å‹[(å®½åº¦) çº¦æŸæ¡ä»¶],</span><br><span class="line">å­—æ®µå<span class="number">3</span> ç±»å‹[(å®½åº¦) çº¦æŸæ¡ä»¶]</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ³¨æ„ï¼š</span></span><br><span class="line"><span class="number">1.</span> åœ¨åŒä¸€å¼ è¡¨ä¸­ï¼Œå­—æ®µåæ˜¯ä¸èƒ½ç›¸åŒ</span><br><span class="line"><span class="number">2.</span> å®½åº¦å’Œçº¦æŸæ¡ä»¶å¯é€‰</span><br><span class="line"><span class="number">3.</span> å­—æ®µåå’Œç±»å‹æ˜¯å¿…é¡»çš„</span><br><span class="line">MariaDB [(none)]&gt; create database db1 charset utf8;</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; use db1;</span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; create table t1(  </span><br><span class="line">    -&gt; <span class="built_in">id</span> <span class="built_in">int</span>, </span><br><span class="line">    -&gt; name varchar(<span class="number">50</span>),</span><br><span class="line">    -&gt; sex enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>),</span><br><span class="line">    -&gt; age <span class="built_in">int</span>(<span class="number">3</span>)</span><br><span class="line">    -&gt; );</span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; show tables; <span class="comment">#æŸ¥çœ‹db1åº“ä¸‹æ‰€æœ‰è¡¨å</span></span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; desc t1;</span><br><span class="line">+-------+-----------------------+------+-----+---------+-------+</span><br><span class="line">| Field | <span class="type">Type</span>                  | Null | Key | Default | Extra |</span><br><span class="line">+-------+-----------------------+------+-----+---------+-------+</span><br><span class="line">| <span class="built_in">id</span>    | <span class="built_in">int</span>(<span class="number">11</span>)               | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(<span class="number">50</span>)           | YES  |     | NULL    |       |</span><br><span class="line">| sex   | enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>) | YES  |     | NULL    |       |</span><br><span class="line">| age   | <span class="built_in">int</span>(<span class="number">3</span>)                | YES  |     | NULL    |       |</span><br><span class="line">+-------+-----------------------+------+-----+---------+-------+</span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; select <span class="built_in">id</span>,name,sex,age <span class="keyword">from</span> t1;</span><br><span class="line">Empty <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t1;</span><br><span class="line">Empty <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; select <span class="built_in">id</span>,name <span class="keyword">from</span> t1;</span><br><span class="line">Empty <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>å¾€è¡¨ä¸­æ’å…¥æ•°æ®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">MariaDB [db1]&gt; insert into t1 values</span><br><span class="line">    -&gt; (<span class="number">1</span>,<span class="string">&#x27;egon&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;male&#x27;</span>),</span><br><span class="line">    -&gt; (<span class="number">2</span>,<span class="string">&#x27;alex&#x27;</span>,<span class="number">81</span>,<span class="string">&#x27;female&#x27;</span>)</span><br><span class="line">    -&gt; ;</span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t1;</span><br><span class="line">+------+------+------+--------+</span><br><span class="line">| <span class="built_in">id</span>   | name | age  | sex    |</span><br><span class="line">+------+------+------+--------+</span><br><span class="line">|    <span class="number">1</span> | egon |   <span class="number">18</span> | male   |</span><br><span class="line">|    <span class="number">2</span> | alex |   <span class="number">81</span> | female |</span><br><span class="line">+------+------+------+--------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; insert into t1(<span class="built_in">id</span>) values </span><br><span class="line">    -&gt; (<span class="number">3</span>),</span><br><span class="line">    -&gt; (<span class="number">4</span>);</span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t1;</span><br><span class="line">+------+------+------+--------+</span><br><span class="line">| <span class="built_in">id</span>   | name | age  | sex    |</span><br><span class="line">+------+------+------+--------+</span><br><span class="line">|    <span class="number">1</span> | egon |   <span class="number">18</span> | male   |</span><br><span class="line">|    <span class="number">2</span> | alex |   <span class="number">81</span> | female |</span><br><span class="line">|    <span class="number">3</span> | NULL | NULL | NULL   |</span><br><span class="line">|    <span class="number">4</span> | NULL | NULL | NULL   |</span><br><span class="line">+------+------+------+--------+</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„æ³¨æ„æ³¨æ„ï¼šè¡¨ä¸­çš„æœ€åä¸€ä¸ªå­—æ®µä¸è¦åŠ é€—å·</p>
<h2 id="å››-æŸ¥çœ‹è¡¨ç»“æ„"><a href="#å››-æŸ¥çœ‹è¡¨ç»“æ„" class="headerlink" title="å›› æŸ¥çœ‹è¡¨ç»“æ„"></a>å›› æŸ¥çœ‹è¡¨ç»“æ„</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">MariaDB [db1]&gt; describe t1; <span class="comment">#æŸ¥çœ‹è¡¨ç»“æ„ï¼Œå¯ç®€å†™ä¸ºdesc è¡¨å</span></span><br><span class="line">+-------+-----------------------+------+-----+---------+-------+</span><br><span class="line">| Field | <span class="type">Type</span>                  | Null | Key | Default | Extra |</span><br><span class="line">+-------+-----------------------+------+-----+---------+-------+</span><br><span class="line">| <span class="built_in">id</span>    | <span class="built_in">int</span>(<span class="number">11</span>)               | YES  |     | NULL    |       |</span><br><span class="line">| name  | varchar(<span class="number">50</span>)           | YES  |     | NULL    |       |</span><br><span class="line">| sex   | enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>) | YES  |     | NULL    |       |</span><br><span class="line">| age   | <span class="built_in">int</span>(<span class="number">3</span>)                | YES  |     | NULL    |       |</span><br><span class="line">+-------+-----------------------+------+-----+---------+-------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; show create table t1\G; <span class="comment">#æŸ¥çœ‹è¡¨è¯¦ç»†ç»“æ„ï¼Œå¯åŠ \G</span></span><br></pre></td></tr></table></figure>

<h2 id="äº”-æ•°æ®ç±»å‹"><a href="#äº”-æ•°æ®ç±»å‹" class="headerlink" title="äº” æ•°æ®ç±»å‹"></a>äº” æ•°æ®ç±»å‹</h2><h3 id="ä¸€-ä»‹ç»"><a href="#ä¸€-ä»‹ç»" class="headerlink" title="ä¸€ ä»‹ç»"></a>ä¸€ ä»‹ç»</h3><p>å­˜å‚¨å¼•æ“å†³å®šäº†è¡¨çš„ç±»å‹ï¼Œè€Œè¡¨å†…å­˜æ”¾çš„æ•°æ®ä¹Ÿè¦æœ‰ä¸åŒçš„ç±»å‹ï¼Œæ¯ç§æ•°æ®ç±»å‹éƒ½æœ‰è‡ªå·±çš„å®½åº¦ï¼Œä½†å®½åº¦æ˜¯å¯é€‰çš„</p>
<p>è¯¦ç»†å‚è€ƒï¼š</p>
<ul>
<li><a href="https://link.zhihu.com/?target=http://www.runoob.com/mysql/mysql-data-types.html">http://www.runoob.com/mysql/mysql-data-types.html</a></li>
<li><a href="https://link.zhihu.com/?target=http://dev.mysql.com/doc/refman/5.7/en/data-type-overview.html">http://dev.mysql.com/doc/refman/5.7/en/data-type-overview.html</a></li>
</ul>
<p>mysqlå¸¸ç”¨æ•°æ®ç±»å‹æ¦‚è§ˆ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. æ•°å­—ï¼š</span></span><br><span class="line">    æ•´å‹ï¼štinyinit  <span class="built_in">int</span>  bigint</span><br><span class="line">    å°æ•°ï¼š</span><br><span class="line">        <span class="built_in">float</span> ï¼šåœ¨ä½æ•°æ¯”è¾ƒçŸ­çš„æƒ…å†µä¸‹ä¸ç²¾å‡†</span><br><span class="line">        double ï¼šåœ¨ä½æ•°æ¯”è¾ƒé•¿çš„æƒ…å†µä¸‹ä¸ç²¾å‡†</span><br><span class="line">            <span class="number">0.000001230123123123</span></span><br><span class="line">            å­˜æˆï¼š<span class="number">0.000001230000</span></span><br><span class="line"></span><br><span class="line">        decimalï¼šï¼ˆå¦‚æœç”¨å°æ•°ï¼Œåˆ™ç”¨æ¨èä½¿ç”¨decimalï¼‰</span><br><span class="line">            ç²¾å‡†</span><br><span class="line">            å†…éƒ¨åŸç†æ˜¯ä»¥å­—ç¬¦ä¸²å½¢å¼å»å­˜</span><br><span class="line"></span><br><span class="line"><span class="comment">#2. å­—ç¬¦ä¸²ï¼š</span></span><br><span class="line">    charï¼ˆ<span class="number">10</span>ï¼‰ï¼šç®€å•ç²—æš´ï¼Œæµªè´¹ç©ºé—´ï¼Œå­˜å–é€Ÿåº¦å¿«</span><br><span class="line">        rootå­˜æˆroot000000</span><br><span class="line">    varcharï¼šç²¾å‡†ï¼ŒèŠ‚çœç©ºé—´ï¼Œå­˜å–é€Ÿåº¦æ…¢</span><br><span class="line"></span><br><span class="line">    sqlä¼˜åŒ–ï¼šåˆ›å»ºè¡¨æ—¶ï¼Œå®šé•¿çš„ç±»å‹å¾€å‰æ”¾ï¼Œå˜é•¿çš„å¾€åæ”¾</span><br><span class="line">                    æ¯”å¦‚æ€§åˆ«           æ¯”å¦‚åœ°å€æˆ–æè¿°ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">    &gt;<span class="number">255</span>ä¸ªå­—ç¬¦ï¼Œè¶…äº†å°±æŠŠæ–‡ä»¶è·¯å¾„å­˜æ”¾åˆ°æ•°æ®åº“ä¸­ã€‚</span><br><span class="line">            æ¯”å¦‚å›¾ç‰‡ï¼Œè§†é¢‘ç­‰æ‰¾ä¸€ä¸ªæ–‡ä»¶æœåŠ¡å™¨ï¼Œæ•°æ®åº“ä¸­åªå­˜è·¯å¾„æˆ–urlã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#3. æ—¶é—´ç±»å‹ï¼š</span></span><br><span class="line">    æœ€å¸¸ç”¨ï¼šdatetime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#4. æšä¸¾ç±»å‹ä¸é›†åˆç±»å‹</span></span><br></pre></td></tr></table></figure>

<h3 id="äºŒ-æ•°å€¼ç±»å‹"><a href="#äºŒ-æ•°å€¼ç±»å‹" class="headerlink" title="äºŒ æ•°å€¼ç±»å‹"></a>äºŒ æ•°å€¼ç±»å‹</h3><p><strong>1ã€æ•´æ•°ç±»å‹</strong></p>
<p>æ•´æ•°ç±»å‹ï¼šTINYINT SMALLINT MEDIUMINT INT BIGINT</p>
<p>ä½œç”¨ï¼šå­˜å‚¨å¹´é¾„ï¼Œç­‰çº§ï¼Œidï¼Œå„ç§å·ç ç­‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">========================================</span><br><span class="line">        tinyint[(m)] [unsigned] [zerofill]</span><br><span class="line"></span><br><span class="line">            å°æ•´æ•°ï¼Œæ•°æ®ç±»å‹ç”¨äºä¿å­˜ä¸€äº›èŒƒå›´çš„æ•´æ•°æ•°å€¼èŒƒå›´ï¼š</span><br><span class="line">            æœ‰ç¬¦å·ï¼š</span><br><span class="line">                -<span class="number">128</span> ï½ <span class="number">127</span></span><br><span class="line">            æ— ç¬¦å·ï¼š</span><br><span class="line">                <span class="number">0</span> ï½ <span class="number">255</span></span><br><span class="line"></span><br><span class="line">            PSï¼š MySQLä¸­æ— å¸ƒå°”å€¼ï¼Œä½¿ç”¨tinyint(<span class="number">1</span>)æ„é€ ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">========================================</span><br><span class="line">        <span class="built_in">int</span>[(m)][unsigned][zerofill]</span><br><span class="line"></span><br><span class="line">            æ•´æ•°ï¼Œæ•°æ®ç±»å‹ç”¨äºä¿å­˜ä¸€äº›èŒƒå›´çš„æ•´æ•°æ•°å€¼èŒƒå›´ï¼š</span><br><span class="line">            æœ‰ç¬¦å·ï¼š</span><br><span class="line">                    -<span class="number">2147483648</span> ï½ <span class="number">2147483647</span></span><br><span class="line">            æ— ç¬¦å·ï¼š</span><br><span class="line">                    <span class="number">0</span> ï½ <span class="number">4294967295</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">========================================</span><br><span class="line">        bigint[(m)][unsigned][zerofill]</span><br><span class="line">            å¤§æ•´æ•°ï¼Œæ•°æ®ç±»å‹ç”¨äºä¿å­˜ä¸€äº›èŒƒå›´çš„æ•´æ•°æ•°å€¼èŒƒå›´ï¼š</span><br><span class="line">            æœ‰ç¬¦å·ï¼š</span><br><span class="line">                    -<span class="number">9223372036854775808</span> ï½ <span class="number">9223372036854775807</span></span><br><span class="line">            æ— ç¬¦å·ï¼š</span><br><span class="line">                    <span class="number">0</span>  ï½  <span class="number">18446744073709551615</span></span><br></pre></td></tr></table></figure>

<p>éªŒè¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">=========æœ‰ç¬¦å·å’Œæ— ç¬¦å·tinyint==========</span><br><span class="line"><span class="comment">#tinyinté»˜è®¤ä¸ºæœ‰ç¬¦å·</span></span><br><span class="line">MariaDB [db1]&gt; create table t1(x tinyint); <span class="comment">#é»˜è®¤ä¸ºæœ‰ç¬¦å·ï¼Œå³æ•°å­—å‰æœ‰æ­£è´Ÿå·</span></span><br><span class="line">MariaDB [db1]&gt; desc t1;</span><br><span class="line">MariaDB [db1]&gt; insert into t1 values</span><br><span class="line">    -&gt; (-<span class="number">129</span>),</span><br><span class="line">    -&gt; (-<span class="number">128</span>),</span><br><span class="line">    -&gt; (<span class="number">127</span>),</span><br><span class="line">    -&gt; (<span class="number">128</span>);</span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t1;</span><br><span class="line">+------+</span><br><span class="line">| x    |</span><br><span class="line">+------+</span><br><span class="line">| -<span class="number">128</span> | <span class="comment">#-129å­˜æˆäº†-128</span></span><br><span class="line">| -<span class="number">128</span> | <span class="comment">#æœ‰ç¬¦å·ï¼Œæœ€å°å€¼ä¸º-128</span></span><br><span class="line">|  <span class="number">127</span> | <span class="comment">#æœ‰ç¬¦å·ï¼Œæœ€å¤§å€¼127</span></span><br><span class="line">|  <span class="number">127</span> | <span class="comment">#128å­˜æˆäº†127</span></span><br><span class="line">+------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®æ— ç¬¦å·tinyint</span></span><br><span class="line">MariaDB [db1]&gt; create table t2(x tinyint unsigned);</span><br><span class="line">MariaDB [db1]&gt; insert into t2 values</span><br><span class="line">    -&gt; (-<span class="number">1</span>),</span><br><span class="line">    -&gt; (<span class="number">0</span>),</span><br><span class="line">    -&gt; (<span class="number">255</span>),</span><br><span class="line">    -&gt; (<span class="number">256</span>);</span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t2;</span><br><span class="line">+------+</span><br><span class="line">| x    |</span><br><span class="line">+------+</span><br><span class="line">|    <span class="number">0</span> | -<span class="number">1</span>å­˜æˆäº†<span class="number">0</span></span><br><span class="line">|    <span class="number">0</span> | <span class="comment">#æ— ç¬¦å·ï¼Œæœ€å°å€¼ä¸º0</span></span><br><span class="line">|  <span class="number">255</span> | <span class="comment">#æ— ç¬¦å·ï¼Œæœ€å¤§å€¼ä¸º255</span></span><br><span class="line">|  <span class="number">255</span> | <span class="comment">#256å­˜æˆäº†255</span></span><br><span class="line">+------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">============æœ‰ç¬¦å·å’Œæ— ç¬¦å·<span class="built_in">int</span>=============</span><br><span class="line"><span class="comment">#inté»˜è®¤ä¸ºæœ‰ç¬¦å·</span></span><br><span class="line">MariaDB [db1]&gt; create table t3(x <span class="built_in">int</span>); <span class="comment">#é»˜è®¤ä¸ºæœ‰ç¬¦å·æ•´æ•°</span></span><br><span class="line">MariaDB [db1]&gt; insert into t3 values</span><br><span class="line">    -&gt; (-<span class="number">2147483649</span>),</span><br><span class="line">    -&gt; (-<span class="number">2147483648</span>),</span><br><span class="line">    -&gt; (<span class="number">2147483647</span>),</span><br><span class="line">    -&gt; (<span class="number">2147483648</span>);</span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t3;</span><br><span class="line">+-------------+</span><br><span class="line">| x           |</span><br><span class="line">+-------------+</span><br><span class="line">| -<span class="number">2147483648</span> | <span class="comment">#-2147483649å­˜æˆäº†-2147483648</span></span><br><span class="line">| -<span class="number">2147483648</span> | <span class="comment">#æœ‰ç¬¦å·ï¼Œæœ€å°å€¼ä¸º-2147483648</span></span><br><span class="line">|  <span class="number">2147483647</span> | <span class="comment">#æœ‰ç¬¦å·ï¼Œæœ€å¤§å€¼ä¸º2147483647</span></span><br><span class="line">|  <span class="number">2147483647</span> | <span class="comment">#2147483648å­˜æˆäº†2147483647</span></span><br><span class="line">+-------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®æ— ç¬¦å·int</span></span><br><span class="line">MariaDB [db1]&gt; create table t4(x <span class="built_in">int</span> unsigned);</span><br><span class="line">MariaDB [db1]&gt; insert into t4 values</span><br><span class="line">    -&gt; (-<span class="number">1</span>),</span><br><span class="line">    -&gt; (<span class="number">0</span>),</span><br><span class="line">    -&gt; (<span class="number">4294967295</span>),</span><br><span class="line">    -&gt; (<span class="number">4294967296</span>);</span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t4;</span><br><span class="line">+------------+</span><br><span class="line">| x          |</span><br><span class="line">+------------+</span><br><span class="line">|          <span class="number">0</span> | <span class="comment">#-1å­˜æˆäº†0</span></span><br><span class="line">|          <span class="number">0</span> | <span class="comment">#æ— ç¬¦å·ï¼Œæœ€å°å€¼ä¸º0</span></span><br><span class="line">| <span class="number">4294967295</span> | <span class="comment">#æ— ç¬¦å·ï¼Œæœ€å¤§å€¼ä¸º4294967295</span></span><br><span class="line">| <span class="number">4294967295</span> | <span class="comment">#4294967296å­˜æˆäº†4294967295</span></span><br><span class="line">+------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">==============æœ‰ç¬¦å·å’Œæ— ç¬¦å·bigint=============</span><br><span class="line">MariaDB [db1]&gt; create table t6(x bigint);</span><br><span class="line">MariaDB [db1]&gt; insert into t5 values  </span><br><span class="line">    -&gt; (-<span class="number">9223372036854775809</span>),</span><br><span class="line">    -&gt; (-<span class="number">9223372036854775808</span>),</span><br><span class="line">    -&gt; (<span class="number">9223372036854775807</span>),</span><br><span class="line">    -&gt; (<span class="number">9223372036854775808</span>);</span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t5;</span><br><span class="line">+----------------------+</span><br><span class="line">| x                    |</span><br><span class="line">+----------------------+</span><br><span class="line">| -<span class="number">9223372036854775808</span> |</span><br><span class="line">| -<span class="number">9223372036854775808</span> |</span><br><span class="line">|  <span class="number">9223372036854775807</span> |</span><br><span class="line">|  <span class="number">9223372036854775807</span> |</span><br><span class="line">+----------------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; create table t6(x bigint unsigned);</span><br><span class="line">MariaDB [db1]&gt; insert into t6 values  </span><br><span class="line">    -&gt; (-<span class="number">1</span>),</span><br><span class="line">    -&gt; (<span class="number">0</span>),</span><br><span class="line">    -&gt; (<span class="number">18446744073709551615</span>),</span><br><span class="line">    -&gt; (<span class="number">18446744073709551616</span>);</span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t6;</span><br><span class="line">+----------------------+</span><br><span class="line">| x                    |</span><br><span class="line">+----------------------+</span><br><span class="line">|                    <span class="number">0</span> |</span><br><span class="line">|                    <span class="number">0</span> |</span><br><span class="line">| <span class="number">18446744073709551615</span> |</span><br><span class="line">| <span class="number">18446744073709551615</span> |</span><br><span class="line">+----------------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">======ç”¨zerofillæµ‹è¯•æ•´æ•°ç±»å‹çš„æ˜¾ç¤ºå®½åº¦=============</span><br><span class="line">MariaDB [db1]&gt; create table t7(x <span class="built_in">int</span>(<span class="number">3</span>) zerofill);</span><br><span class="line">MariaDB [db1]&gt; insert into t7 values</span><br><span class="line">    -&gt; (<span class="number">1</span>),</span><br><span class="line">    -&gt; (<span class="number">11</span>),</span><br><span class="line">    -&gt; (<span class="number">111</span>),</span><br><span class="line">    -&gt; (<span class="number">1111</span>);</span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t7;</span><br><span class="line">+------+</span><br><span class="line">| x    |</span><br><span class="line">+------+</span><br><span class="line">|  001 |</span><br><span class="line">|  011 |</span><br><span class="line">|  <span class="number">111</span> |</span><br><span class="line">| <span class="number">1111</span> | <span class="comment">#è¶…è¿‡å®½åº¦é™åˆ¶ä»ç„¶å¯ä»¥å­˜</span></span><br><span class="line">+------+</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šä¸ºè¯¥ç±»å‹æŒ‡å®šå®½åº¦æ—¶ï¼Œä»…ä»…åªæ˜¯æŒ‡å®šæŸ¥è¯¢ç»“æœçš„æ˜¾ç¤ºå®½åº¦ï¼Œä¸å­˜å‚¨èŒƒå›´æ— å…³ï¼Œå­˜å‚¨èŒƒå›´å¦‚ä¸‹</p>
<p>å…¶å®æˆ‘ä»¬å®Œå…¨æ²¡å¿…è¦ä¸ºæ•´æ•°ç±»å‹æŒ‡å®šæ˜¾ç¤ºå®½åº¦ï¼Œä½¿ç”¨é»˜è®¤çš„å°±å¯ä»¥äº†</p>
<p>é»˜è®¤çš„æ˜¾ç¤ºå®½åº¦ï¼Œéƒ½æ˜¯åœ¨æœ€å¤§å€¼çš„åŸºç¡€ä¸ŠåŠ 1</p>
<p><img src="https://pic3.zhimg.com/80/v2-0d56854dc192d867ef52fddece40f7da_720w.jpg" alt="img"></p>
<p>intçš„å­˜å‚¨å®½åº¦æ˜¯4ä¸ªBytesï¼Œå³32ä¸ªbitï¼Œå³2**32</p>
<p>æ— ç¬¦å·æœ€å¤§å€¼ä¸ºï¼š4294967296-1</p>
<p>æœ‰ç¬¦å·æœ€å¤§å€¼ï¼š2147483648-1</p>
<p>æœ‰ç¬¦å·å’Œæ— ç¬¦å·çš„æœ€å¤§æ•°å­—éœ€è¦çš„æ˜¾ç¤ºå®½åº¦å‡ä¸º10ï¼Œè€Œé’ˆå¯¹æœ‰ç¬¦å·çš„æœ€å°å€¼åˆ™éœ€è¦11ä½æ‰èƒ½æ˜¾ç¤ºå®Œå…¨ï¼Œæ‰€ä»¥intç±»å‹é»˜è®¤çš„æ˜¾ç¤ºå®½åº¦ä¸º11æ˜¯éå¸¸åˆç†çš„</p>
<p>æœ€åï¼šæ•´å½¢ç±»å‹ï¼Œå…¶å®æ²¡æœ‰å¿…è¦æŒ‡å®šæ˜¾ç¤ºå®½åº¦ï¼Œä½¿ç”¨é»˜è®¤çš„å°±ok</p>
<p><strong>2ã€æµ®ç‚¹å‹</strong></p>
<p>å®šç‚¹æ•°ç±»å‹ DECç­‰åŒäºDECIMALã€€ã€€</p>
<p>æµ®ç‚¹ç±»å‹ï¼šFLOAT DOUBLE</p>
<p>ä½œç”¨ï¼šå­˜å‚¨è–ªèµ„ã€èº«é«˜ã€ä½“é‡ã€ä½“è´¨å‚æ•°ç­‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">======================================</span><br><span class="line"><span class="comment">#FLOAT[(M,D)] [UNSIGNED] [ZEROFILL]</span></span><br><span class="line"></span><br><span class="line">å®šä¹‰ï¼š</span><br><span class="line">        å•ç²¾åº¦æµ®ç‚¹æ•°ï¼ˆéå‡†ç¡®å°æ•°å€¼ï¼‰ï¼Œmæ˜¯æ•°å­—æ€»ä¸ªæ•°ï¼Œdæ˜¯å°æ•°ç‚¹åä¸ªæ•°ã€‚mæœ€å¤§å€¼ä¸º<span class="number">255</span>ï¼Œdæœ€å¤§å€¼ä¸º<span class="number">30</span></span><br><span class="line"></span><br><span class="line">æœ‰ç¬¦å·ï¼š</span><br><span class="line">           -<span class="number">3.402823466E+38</span> to -<span class="number">1.175494351E-38</span>,</span><br><span class="line">           <span class="number">1.175494351E-38</span> to <span class="number">3.402823466E+38</span></span><br><span class="line">æ— ç¬¦å·ï¼š</span><br><span class="line">           <span class="number">1.175494351E-38</span> to <span class="number">3.402823466E+38</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç²¾ç¡®åº¦ï¼š </span><br><span class="line">           **** éšç€å°æ•°çš„å¢å¤šï¼Œç²¾åº¦å˜å¾—ä¸å‡†ç¡® ****</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">======================================</span><br><span class="line"><span class="comment">#DOUBLE[(M,D)] [UNSIGNED] [ZEROFILL]</span></span><br><span class="line"></span><br><span class="line">å®šä¹‰ï¼š</span><br><span class="line">           åŒç²¾åº¦æµ®ç‚¹æ•°ï¼ˆéå‡†ç¡®å°æ•°å€¼ï¼‰ï¼Œmæ˜¯æ•°å­—æ€»ä¸ªæ•°ï¼Œdæ˜¯å°æ•°ç‚¹åä¸ªæ•°ã€‚mæœ€å¤§å€¼ä¸º<span class="number">255</span>ï¼Œdæœ€å¤§å€¼ä¸º<span class="number">30</span></span><br><span class="line"></span><br><span class="line">æœ‰ç¬¦å·ï¼š</span><br><span class="line">           -<span class="number">1.7976931348623157E+308</span> to -<span class="number">2.2250738585072014E-308</span></span><br><span class="line">           <span class="number">2.2250738585072014E-308</span> to <span class="number">1.7976931348623157E+308</span></span><br><span class="line"></span><br><span class="line">æ— ç¬¦å·ï¼š</span><br><span class="line">           <span class="number">2.2250738585072014E-308</span> to <span class="number">1.7976931348623157E+308</span></span><br><span class="line"></span><br><span class="line">ç²¾ç¡®åº¦ï¼š</span><br><span class="line">           ****éšç€å°æ•°çš„å¢å¤šï¼Œç²¾åº¦æ¯”<span class="built_in">float</span>è¦é«˜ï¼Œä½†ä¹Ÿä¼šå˜å¾—ä¸å‡†ç¡® ****</span><br><span class="line"></span><br><span class="line">======================================</span><br><span class="line">decimal[(m[,d])] [unsigned] [zerofill]</span><br><span class="line"></span><br><span class="line">å®šä¹‰ï¼š</span><br><span class="line">          å‡†ç¡®çš„å°æ•°å€¼ï¼Œmæ˜¯æ•°å­—æ€»ä¸ªæ•°ï¼ˆè´Ÿå·ä¸ç®—ï¼‰ï¼Œdæ˜¯å°æ•°ç‚¹åä¸ªæ•°ã€‚ mæœ€å¤§å€¼ä¸º<span class="number">65</span>ï¼Œdæœ€å¤§å€¼ä¸º<span class="number">30</span>ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç²¾ç¡®åº¦ï¼š</span><br><span class="line">           **** éšç€å°æ•°çš„å¢å¤šï¼Œç²¾åº¦å§‹ç»ˆå‡†ç¡® ****</span><br><span class="line">           å¯¹äºç²¾ç¡®æ•°å€¼è®¡ç®—æ—¶éœ€è¦ç”¨æ­¤ç±»å‹</span><br><span class="line">           decaimalèƒ½å¤Ÿå­˜å‚¨ç²¾ç¡®å€¼çš„åŸå› åœ¨äºå…¶å†…éƒ¨æŒ‰ç…§å­—ç¬¦ä¸²å­˜å‚¨ã€‚</span><br></pre></td></tr></table></figure>

<p>éªŒè¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mysql&gt; create table t1(x <span class="built_in">float</span>(<span class="number">256</span>,<span class="number">31</span>));</span><br><span class="line">ERROR <span class="number">1425</span> (<span class="number">42000</span>): Too big scale <span class="number">31</span> specified <span class="keyword">for</span> column <span class="string">&#x27;x&#x27;</span>. Maximum <span class="keyword">is</span> <span class="number">30.</span></span><br><span class="line">mysql&gt; create table t1(x <span class="built_in">float</span>(<span class="number">256</span>,<span class="number">30</span>));</span><br><span class="line">ERROR <span class="number">1439</span> (<span class="number">42000</span>): Display width out of <span class="built_in">range</span> <span class="keyword">for</span> column <span class="string">&#x27;x&#x27;</span> (<span class="built_in">max</span> = <span class="number">255</span>)</span><br><span class="line">mysql&gt; create table t1(x <span class="built_in">float</span>(<span class="number">255</span>,<span class="number">30</span>)); <span class="comment">#å»ºè¡¨æˆåŠŸ</span></span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create table t2(x double(<span class="number">255</span>,<span class="number">30</span>)); <span class="comment">#å»ºè¡¨æˆåŠŸ</span></span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create table t3(x decimal(<span class="number">66</span>,<span class="number">31</span>));</span><br><span class="line">ERROR <span class="number">1425</span> (<span class="number">42000</span>): Too big scale <span class="number">31</span> specified <span class="keyword">for</span> column <span class="string">&#x27;x&#x27;</span>. Maximum <span class="keyword">is</span> <span class="number">30.</span></span><br><span class="line">mysql&gt; create table t3(x decimal(<span class="number">66</span>,<span class="number">30</span>));</span><br><span class="line">ERROR <span class="number">1426</span> (<span class="number">42000</span>): Too-big precision <span class="number">66</span> specified <span class="keyword">for</span> <span class="string">&#x27;x&#x27;</span>. Maximum <span class="keyword">is</span> <span class="number">65.</span></span><br><span class="line">mysql&gt; create table t3(x decimal(<span class="number">65</span>,<span class="number">30</span>)); <span class="comment">#å»ºè¡¨æˆåŠŸ</span></span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+---------------+</span><br><span class="line">| Tables_in_db1 |</span><br><span class="line">+---------------+</span><br><span class="line">| t1            |</span><br><span class="line">| t2            |</span><br><span class="line">| t3            |</span><br><span class="line">+---------------+</span><br><span class="line"><span class="number">3</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t1 values(<span class="number">1.1111111111111111111111111111111</span>); <span class="comment">#å°æ•°ç‚¹å31ä¸ª1</span></span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t2 values(<span class="number">1.1111111111111111111111111111111</span>);</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t3 values(<span class="number">1.1111111111111111111111111111111</span>);</span><br><span class="line">Query OK, <span class="number">1</span> row affected, <span class="number">1</span> warning (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> t1; <span class="comment">#éšç€å°æ•°çš„å¢å¤šï¼Œç²¾åº¦å¼€å§‹ä¸å‡†ç¡®</span></span><br><span class="line">+----------------------------------+</span><br><span class="line">| x                                |</span><br><span class="line">+----------------------------------+</span><br><span class="line">| <span class="number">1.111111164093017600000000000000</span> |</span><br><span class="line">+----------------------------------+</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> t2; <span class="comment">#ç²¾åº¦æ¯”floatè¦å‡†ç¡®ç‚¹ï¼Œä½†éšç€å°æ•°çš„å¢å¤šï¼ŒåŒæ ·å˜å¾—ä¸å‡†ç¡®</span></span><br><span class="line">+----------------------------------+</span><br><span class="line">| x                                |</span><br><span class="line">+----------------------------------+</span><br><span class="line">| <span class="number">1.111111111111111200000000000000</span> |</span><br><span class="line">+----------------------------------+</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> t3; <span class="comment">#ç²¾åº¦å§‹ç»ˆå‡†ç¡®,dä¸º30ï¼Œäºæ˜¯åªç•™äº†30ä½å°æ•°</span></span><br><span class="line">+----------------------------------+</span><br><span class="line">| x                                |</span><br><span class="line">+----------------------------------+</span><br><span class="line">| <span class="number">1.111111111111111111111111111111</span> |</span><br><span class="line">+----------------------------------+</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p><strong>3ã€ä½ç±»å‹ï¼ˆäº†è§£ï¼‰</strong></p>
<p>BIT(M)å¯ä»¥ç”¨æ¥å­˜æ”¾å¤šä½äºŒè¿›åˆ¶æ•°ï¼ŒMèŒƒå›´ä»1~64ï¼Œå¦‚æœä¸å†™é»˜è®¤ä¸º1ä½ã€‚ æ³¨æ„ï¼šå¯¹äºä½å­—æ®µéœ€è¦ä½¿ç”¨å‡½æ•°è¯»å– bin()æ˜¾ç¤ºä¸ºäºŒè¿›åˆ¶ hex()æ˜¾ç¤ºä¸ºåå…­è¿›åˆ¶</p>
<p>éªŒè¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">MariaDB [db1]&gt; create table t9(<span class="built_in">id</span> bit);</span><br><span class="line">MariaDB [db1]&gt; desc t9; <span class="comment">#bité»˜è®¤å®½åº¦ä¸º1</span></span><br><span class="line">+-------+--------+------+-----+---------+-------+</span><br><span class="line">| Field | <span class="type">Type</span>   | Null | Key | Default | Extra |</span><br><span class="line">+-------+--------+------+-----+---------+-------+</span><br><span class="line">| <span class="built_in">id</span>    | bit(<span class="number">1</span>) | YES  |     | NULL    |       |</span><br><span class="line">+-------+--------+------+-----+---------+-------+</span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; insert into t9 values(<span class="number">8</span>);</span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t9; <span class="comment">#ç›´æ¥æŸ¥çœ‹æ˜¯æ— æ³•æ˜¾ç¤ºäºŒè¿›åˆ¶ä½çš„</span></span><br><span class="line">+------+</span><br><span class="line">| <span class="built_in">id</span>   |</span><br><span class="line">+------+</span><br><span class="line">|     |</span><br><span class="line">+------+</span><br><span class="line">MariaDB [db1]&gt; select <span class="built_in">bin</span>(<span class="built_in">id</span>),<span class="built_in">hex</span>(<span class="built_in">id</span>) <span class="keyword">from</span> t9; <span class="comment">#éœ€è¦è½¬æ¢æ‰èƒ½çœ‹åˆ°</span></span><br><span class="line">+---------+---------+</span><br><span class="line">| <span class="built_in">bin</span>(<span class="built_in">id</span>) | <span class="built_in">hex</span>(<span class="built_in">id</span>) |</span><br><span class="line">+---------+---------+</span><br><span class="line">| <span class="number">1</span>       | <span class="number">1</span>       |</span><br><span class="line">+---------+---------+</span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; alter table t9 modify <span class="built_in">id</span> bit(<span class="number">5</span>);</span><br><span class="line">MariaDB [db1]&gt; insert into t9 values(<span class="number">8</span>);</span><br><span class="line">MariaDB [db1]&gt; select <span class="built_in">bin</span>(<span class="built_in">id</span>),<span class="built_in">hex</span>(<span class="built_in">id</span>) <span class="keyword">from</span> t9;</span><br><span class="line">+---------+---------+</span><br><span class="line">| <span class="built_in">bin</span>(<span class="built_in">id</span>) | <span class="built_in">hex</span>(<span class="built_in">id</span>) |</span><br><span class="line">+---------+---------+</span><br><span class="line">| <span class="number">1</span>       | <span class="number">1</span>       |</span><br><span class="line">| <span class="number">1000</span>    | <span class="number">8</span>       |</span><br><span class="line">+---------+---------+</span><br></pre></td></tr></table></figure>

<h3 id="ä¸‰-æ—¥æœŸç±»å‹"><a href="#ä¸‰-æ—¥æœŸç±»å‹" class="headerlink" title="ä¸‰ æ—¥æœŸç±»å‹"></a>ä¸‰ æ—¥æœŸç±»å‹</h3><p>DATE TIME DATETIME TIMESTAMP YEAR</p>
<p>ä½œç”¨ï¼šå­˜å‚¨ç”¨æˆ·æ³¨å†Œæ—¶é—´ï¼Œæ–‡ç« å‘å¸ƒæ—¶é—´ï¼Œå‘˜å·¥å…¥èŒæ—¶é—´ï¼Œå‡ºç”Ÿæ—¶é—´ï¼Œè¿‡æœŸæ—¶é—´ç­‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">YEAR</span><br><span class="line">            YYYYï¼ˆ<span class="number">1901</span>/<span class="number">2155</span>ï¼‰</span><br><span class="line"></span><br><span class="line">        DATE</span><br><span class="line">            YYYY-MM-DDï¼ˆ<span class="number">1000</span>-01-01/<span class="number">9999</span>-<span class="number">12</span>-<span class="number">31</span>ï¼‰</span><br><span class="line"></span><br><span class="line">        TIME</span><br><span class="line">            HH:MM:SSï¼ˆ<span class="string">&#x27;-838:59:59&#x27;</span>/<span class="string">&#x27;838:59:59&#x27;</span>ï¼‰</span><br><span class="line"></span><br><span class="line">        DATETIME</span><br><span class="line"></span><br><span class="line">            YYYY-MM-DD HH:MM:SSï¼ˆ<span class="number">1000</span>-01-01 <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>/<span class="number">9999</span>-<span class="number">12</span>-<span class="number">31</span> <span class="number">23</span>:<span class="number">59</span>:<span class="number">59</span>    Yï¼‰</span><br><span class="line"></span><br><span class="line">        TIMESTAMP</span><br><span class="line"></span><br><span class="line">            YYYYMMDD HHMMSSï¼ˆ<span class="number">1970</span>-01-01 <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>/<span class="number">2037</span> å¹´æŸæ—¶ï¼‰</span><br></pre></td></tr></table></figure>

<p>éªŒè¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">============year===========</span><br><span class="line">MariaDB [db1]&gt; create table t10(born_year year); <span class="comment">#æ— è®ºyearæŒ‡å®šä½•ç§å®½åº¦ï¼Œæœ€åéƒ½é»˜è®¤æ˜¯year(4)</span></span><br><span class="line">MariaDB [db1]&gt; insert into t10 values  </span><br><span class="line">    -&gt; (<span class="number">1900</span>),</span><br><span class="line">    -&gt; (<span class="number">1901</span>),</span><br><span class="line">    -&gt; (<span class="number">2155</span>),</span><br><span class="line">    -&gt; (<span class="number">2156</span>);</span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t10;</span><br><span class="line">+-----------+</span><br><span class="line">| born_year |</span><br><span class="line">+-----------+</span><br><span class="line">|      <span class="number">0000</span> |</span><br><span class="line">|      <span class="number">1901</span> |</span><br><span class="line">|      <span class="number">2155</span> |</span><br><span class="line">|      <span class="number">0000</span> |</span><br><span class="line">+-----------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">============date,time,datetime===========</span><br><span class="line">MariaDB [db1]&gt; create table t11(d date,t time,dt datetime);</span><br><span class="line">MariaDB [db1]&gt; desc t11;</span><br><span class="line">+-------+----------+------+-----+---------+-------+</span><br><span class="line">| Field | <span class="type">Type</span>     | Null | Key | Default | Extra |</span><br><span class="line">+-------+----------+------+-----+---------+-------+</span><br><span class="line">| d     | date     | YES  |     | NULL    |       |</span><br><span class="line">| t     | time     | YES  |     | NULL    |       |</span><br><span class="line">| dt    | datetime | YES  |     | NULL    |       |</span><br><span class="line">+-------+----------+------+-----+---------+-------+</span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; insert into t11 values(now(),now(),now());</span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t11;</span><br><span class="line">+------------+----------+---------------------+</span><br><span class="line">| d          | t        | dt                  |</span><br><span class="line">+------------+----------+---------------------+</span><br><span class="line">| <span class="number">2017</span>-07-<span class="number">25</span> | <span class="number">16</span>:<span class="number">26</span>:<span class="number">54</span> | <span class="number">2017</span>-07-<span class="number">25</span> <span class="number">16</span>:<span class="number">26</span>:<span class="number">54</span> |</span><br><span class="line">+------------+----------+---------------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">============timestamp===========</span><br><span class="line">MariaDB [db1]&gt; create table t12(time timestamp);</span><br><span class="line">MariaDB [db1]&gt; insert into t12 values();</span><br><span class="line">MariaDB [db1]&gt; insert into t12 values(null);</span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t12;</span><br><span class="line">+---------------------+</span><br><span class="line">| time                |</span><br><span class="line">+---------------------+</span><br><span class="line">| <span class="number">2017</span>-07-<span class="number">25</span> <span class="number">16</span>:<span class="number">29</span>:<span class="number">17</span> |</span><br><span class="line">| <span class="number">2017</span>-07-<span class="number">25</span> <span class="number">16</span>:<span class="number">30</span>:01 |</span><br><span class="line">+---------------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">============æ³¨æ„å•¦ï¼Œæ³¨æ„å•¦ï¼Œæ³¨æ„å•¦===========</span><br><span class="line"><span class="number">1.</span> å•ç‹¬æ’å…¥æ—¶é—´æ—¶ï¼Œéœ€è¦ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ï¼ŒæŒ‰ç…§å¯¹åº”çš„æ ¼å¼æ’å…¥</span><br><span class="line"><span class="number">2.</span> æ’å…¥å¹´ä»½æ—¶ï¼Œå°½é‡ä½¿ç”¨<span class="number">4</span>ä½å€¼</span><br><span class="line"><span class="number">3.</span> æ’å…¥ä¸¤ä½å¹´ä»½æ—¶ï¼Œ&lt;=<span class="number">69</span>ï¼Œä»¥<span class="number">20</span>å¼€å¤´ï¼Œæ¯”å¦‚<span class="number">50</span>,  ç»“æœ<span class="number">2050</span>      </span><br><span class="line">                &gt;=<span class="number">70</span>ï¼Œä»¥<span class="number">19</span>å¼€å¤´ï¼Œæ¯”å¦‚<span class="number">71</span>ï¼Œç»“æœ<span class="number">1971</span></span><br><span class="line">MariaDB [db1]&gt; create table t12(y year);</span><br><span class="line">MariaDB [db1]&gt; insert into t12 values  </span><br><span class="line">    -&gt; (<span class="number">50</span>),</span><br><span class="line">    -&gt; (<span class="number">71</span>);</span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> t12;</span><br><span class="line">+------+</span><br><span class="line">| y    |</span><br><span class="line">+------+</span><br><span class="line">| <span class="number">2050</span> |</span><br><span class="line">| <span class="number">1971</span> |</span><br><span class="line">+------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">============ç»¼åˆç»ƒä¹ ===========</span><br><span class="line">MariaDB [db1]&gt; create table student(</span><br><span class="line">    -&gt; <span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">    -&gt; name varchar(<span class="number">20</span>),</span><br><span class="line">    -&gt; born_year year,</span><br><span class="line">    -&gt; birth date,</span><br><span class="line">    -&gt; class_time time,</span><br><span class="line">    -&gt; reg_time datetime);</span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; insert into student values</span><br><span class="line">    -&gt; (<span class="number">1</span>,<span class="string">&#x27;alex&#x27;</span>,<span class="string">&quot;1995&quot;</span>,<span class="string">&quot;1995-11-11&quot;</span>,<span class="string">&quot;11:11:11&quot;</span>,<span class="string">&quot;2017-11-11 11:11:11&quot;</span>),</span><br><span class="line">    -&gt; (<span class="number">2</span>,<span class="string">&#x27;egon&#x27;</span>,<span class="string">&quot;1997&quot;</span>,<span class="string">&quot;1997-12-12&quot;</span>,<span class="string">&quot;12:12:12&quot;</span>,<span class="string">&quot;2017-12-12 12:12:12&quot;</span>),</span><br><span class="line">    -&gt; (<span class="number">3</span>,<span class="string">&#x27;wsb&#x27;</span>,<span class="string">&quot;1998&quot;</span>,<span class="string">&quot;1998-01-01&quot;</span>,<span class="string">&quot;13:13:13&quot;</span>,<span class="string">&quot;2017-01-01 13:13:13&quot;</span>);</span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> student;</span><br><span class="line">+------+------+-----------+------------+------------+---------------------+</span><br><span class="line">| <span class="built_in">id</span>   | name | born_year | birth      | class_time | reg_time            |</span><br><span class="line">+------+------+-----------+------------+------------+---------------------+</span><br><span class="line">|    <span class="number">1</span> | alex |      <span class="number">1995</span> | <span class="number">1995</span>-<span class="number">11</span>-<span class="number">11</span> | <span class="number">11</span>:<span class="number">11</span>:<span class="number">11</span>   | <span class="number">2017</span>-<span class="number">11</span>-<span class="number">11</span> <span class="number">11</span>:<span class="number">11</span>:<span class="number">11</span> |</span><br><span class="line">|    <span class="number">2</span> | egon |      <span class="number">1997</span> | <span class="number">1997</span>-<span class="number">12</span>-<span class="number">12</span> | <span class="number">12</span>:<span class="number">12</span>:<span class="number">12</span>   | <span class="number">2017</span>-<span class="number">12</span>-<span class="number">12</span> <span class="number">12</span>:<span class="number">12</span>:<span class="number">12</span> |</span><br><span class="line">|    <span class="number">3</span> | wsb  |      <span class="number">1998</span> | <span class="number">1998</span>-01-01 | <span class="number">13</span>:<span class="number">13</span>:<span class="number">13</span>   | <span class="number">2017</span>-01-01 <span class="number">13</span>:<span class="number">13</span>:<span class="number">13</span> |</span><br><span class="line">+------+------+-----------+------------+------------+---------------------+</span><br></pre></td></tr></table></figure>

<p>datetimeä¸timestampçš„åŒºåˆ«</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">åœ¨å®é™…åº”ç”¨çš„å¾ˆå¤šåœºæ™¯ä¸­ï¼ŒMySQLçš„è¿™ä¸¤ç§æ—¥æœŸç±»å‹éƒ½èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„éœ€è¦ï¼Œå­˜å‚¨ç²¾åº¦éƒ½ä¸ºç§’ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¼šå±•ç°å‡ºä»–ä»¬å„è‡ªçš„ä¼˜åŠ£ã€‚ä¸‹é¢å°±æ¥æ€»ç»“ä¸€ä¸‹ä¸¤ç§æ—¥æœŸç±»å‹çš„åŒºåˆ«ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>DATETIMEçš„æ—¥æœŸèŒƒå›´æ˜¯<span class="number">1001</span>â€”â€”<span class="number">9999</span>å¹´ï¼ŒTIMESTAMPçš„æ—¶é—´èŒƒå›´æ˜¯<span class="number">1970</span>â€”â€”<span class="number">2038</span>å¹´ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>DATETIMEå­˜å‚¨æ—¶é—´ä¸æ—¶åŒºæ— å…³ï¼ŒTIMESTAMPå­˜å‚¨æ—¶é—´ä¸æ—¶åŒºæœ‰å…³ï¼Œæ˜¾ç¤ºçš„å€¼ä¹Ÿä¾èµ–äºæ—¶åŒºã€‚åœ¨mysqlæœåŠ¡å™¨ï¼Œæ“ä½œç³»ç»Ÿä»¥åŠå®¢æˆ·ç«¯è¿æ¥éƒ½æœ‰æ—¶åŒºçš„è®¾ç½®ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>DATETIMEä½¿ç”¨<span class="number">8</span>å­—èŠ‚çš„å­˜å‚¨ç©ºé—´ï¼ŒTIMESTAMPçš„å­˜å‚¨ç©ºé—´ä¸º<span class="number">4</span>å­—èŠ‚ã€‚å› æ­¤ï¼ŒTIMESTAMPæ¯”DATETIMEçš„ç©ºé—´åˆ©ç”¨ç‡æ›´é«˜ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>DATETIMEçš„é»˜è®¤å€¼ä¸ºnullï¼›TIMESTAMPçš„å­—æ®µé»˜è®¤ä¸ä¸ºç©ºï¼ˆ<span class="keyword">not</span> nullï¼‰,é»˜è®¤å€¼ä¸ºå½“å‰æ—¶é—´ï¼ˆCURRENT_TIMESTAMPï¼‰ï¼Œå¦‚æœä¸åšç‰¹æ®Šå¤„ç†ï¼Œå¹¶ä¸”updateè¯­å¥ä¸­æ²¡æœ‰æŒ‡å®šè¯¥åˆ—çš„æ›´æ–°å€¼ï¼Œåˆ™é»˜è®¤æ›´æ–°ä¸ºå½“å‰æ—¶é—´ã€‚</span><br><span class="line">mysql&gt; create table t1(x datetime <span class="keyword">not</span> null default now()); <span class="comment"># éœ€è¦æŒ‡å®šä¼ å…¥ç©ºå€¼æ—¶é»˜è®¤å–å½“å‰æ—¶é—´</span></span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create table t2(x timestamp); <span class="comment"># æ— éœ€ä»»ä½•è®¾ç½®ï¼Œåœ¨ä¼ ç©ºå€¼çš„æƒ…å†µä¸‹è‡ªåŠ¨ä¼ å…¥å½“å‰æ—¶é—´</span></span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t1 values();</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t2 values();</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> t1;</span><br><span class="line">+---------------------+</span><br><span class="line">| x                   |</span><br><span class="line">+---------------------+</span><br><span class="line">| <span class="number">2018</span>-07-07 01:<span class="number">26</span>:<span class="number">14</span> |</span><br><span class="line">+---------------------+</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> t2;</span><br><span class="line">+---------------------+</span><br><span class="line">| x                   |</span><br><span class="line">+---------------------+</span><br><span class="line">| <span class="number">2018</span>-07-07 01:<span class="number">26</span>:<span class="number">17</span> |</span><br><span class="line">+---------------------+</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="å››-å­—ç¬¦ä¸²ç±»å‹"><a href="#å››-å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="å›› å­—ç¬¦ä¸²ç±»å‹"></a>å›› å­—ç¬¦ä¸²ç±»å‹</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å®˜ç½‘ï¼šhttps://dev.mysql.com/doc/refman/5.7/en/char.html</span></span><br><span class="line"><span class="comment">#æ³¨æ„ï¼šcharå’Œvarcharæ‹¬å·å†…çš„å‚æ•°æŒ‡çš„éƒ½æ˜¯å­—ç¬¦çš„é•¿åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#charç±»å‹ï¼šå®šé•¿ï¼Œç®€å•ç²—æš´ï¼Œæµªè´¹ç©ºé—´ï¼Œå­˜å–é€Ÿåº¦å¿«</span></span><br><span class="line">    å­—ç¬¦é•¿åº¦èŒƒå›´ï¼š<span class="number">0</span>-<span class="number">255</span>ï¼ˆä¸€ä¸ªä¸­æ–‡æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œæ˜¯utf8ç¼–ç çš„<span class="number">3</span>ä¸ªå­—èŠ‚ï¼‰</span><br><span class="line">    å­˜å‚¨ï¼š</span><br><span class="line">        å­˜å‚¨charç±»å‹çš„å€¼æ—¶ï¼Œä¼šå¾€å³å¡«å……ç©ºæ ¼æ¥æ»¡è¶³é•¿åº¦</span><br><span class="line">        ä¾‹å¦‚ï¼šæŒ‡å®šé•¿åº¦ä¸º<span class="number">10</span>ï¼Œå­˜&gt;<span class="number">10</span>ä¸ªå­—ç¬¦åˆ™æŠ¥é”™ï¼Œå­˜&lt;<span class="number">10</span>ä¸ªå­—ç¬¦åˆ™ç”¨ç©ºæ ¼å¡«å……ç›´åˆ°å‡‘å¤Ÿ<span class="number">10</span>ä¸ªå­—ç¬¦å­˜å‚¨</span><br><span class="line"></span><br><span class="line">    æ£€ç´¢ï¼š</span><br><span class="line">        åœ¨æ£€ç´¢æˆ–è€…è¯´æŸ¥è¯¢æ—¶ï¼ŒæŸ¥å‡ºçš„ç»“æœä¼šè‡ªåŠ¨åˆ é™¤å°¾éƒ¨çš„ç©ºæ ¼ï¼Œé™¤éæˆ‘ä»¬æ‰“å¼€pad_char_to_full_length SQLæ¨¡å¼ï¼ˆSET sql_mode = <span class="string">&#x27;PAD_CHAR_TO_FULL_LENGTH&#x27;</span>;ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="comment">#varcharç±»å‹ï¼šå˜é•¿ï¼Œç²¾å‡†ï¼ŒèŠ‚çœç©ºé—´ï¼Œå­˜å–é€Ÿåº¦æ…¢</span></span><br><span class="line">    å­—ç¬¦é•¿åº¦èŒƒå›´ï¼š<span class="number">0</span>-<span class="number">65535</span>ï¼ˆå¦‚æœå¤§äº<span class="number">21845</span>ä¼šæç¤ºç”¨å…¶ä»–ç±»å‹ ã€‚mysqlè¡Œæœ€å¤§é™åˆ¶ä¸º<span class="number">65535</span>å­—èŠ‚ï¼Œå­—ç¬¦ç¼–ç ä¸ºutf-<span class="number">8</span>ï¼šhttps://dev.mysql.com/doc/refman/<span class="number">5.7</span>/en/column-count-limit.htmlï¼‰</span><br><span class="line">    å­˜å‚¨ï¼š</span><br><span class="line">        varcharç±»å‹å­˜å‚¨æ•°æ®çš„çœŸå®å†…å®¹ï¼Œä¸ä¼šç”¨ç©ºæ ¼å¡«å……ï¼Œå¦‚æœ<span class="string">&#x27;ab  &#x27;</span>,å°¾éƒ¨çš„ç©ºæ ¼ä¹Ÿä¼šè¢«å­˜èµ·æ¥</span><br><span class="line">        å¼ºè°ƒï¼švarcharç±»å‹ä¼šåœ¨çœŸå®æ•°æ®å‰åŠ <span class="number">1</span>-2Bytesçš„å‰ç¼€ï¼Œè¯¥å‰ç¼€ç”¨æ¥è¡¨ç¤ºçœŸå®æ•°æ®çš„<span class="built_in">bytes</span>å­—èŠ‚æ•°ï¼ˆ<span class="number">1</span>-2Bytesæœ€å¤§è¡¨ç¤º<span class="number">65535</span>ä¸ªæ•°å­—ï¼Œæ­£å¥½ç¬¦åˆmysqlå¯¹rowçš„æœ€å¤§å­—èŠ‚é™åˆ¶ï¼Œå³å·²ç»è¶³å¤Ÿä½¿ç”¨ï¼‰</span><br><span class="line">        å¦‚æœçœŸå®çš„æ•°æ®&lt;255<span class="built_in">bytes</span>åˆ™éœ€è¦1Bytesçš„å‰ç¼€ï¼ˆ1Bytes=8bit <span class="number">2</span>**<span class="number">8</span>æœ€å¤§è¡¨ç¤ºçš„æ•°å­—ä¸º<span class="number">255</span>ï¼‰</span><br><span class="line">        å¦‚æœçœŸå®çš„æ•°æ®&gt;255<span class="built_in">bytes</span>åˆ™éœ€è¦2Bytesçš„å‰ç¼€ï¼ˆ2Bytes=16bit <span class="number">2</span>**<span class="number">16</span>æœ€å¤§è¡¨ç¤ºçš„æ•°å­—ä¸º<span class="number">65535</span>ï¼‰</span><br><span class="line"></span><br><span class="line">    æ£€ç´¢ï¼š</span><br><span class="line">        å°¾éƒ¨æœ‰ç©ºæ ¼ä¼šä¿å­˜ä¸‹æ¥ï¼Œåœ¨æ£€ç´¢æˆ–è€…è¯´æŸ¥è¯¢æ—¶ï¼Œä¹Ÿä¼šæ­£å¸¸æ˜¾ç¤ºåŒ…å«ç©ºæ ¼åœ¨å†…çš„å†…å®¹</span><br></pre></td></tr></table></figure>

<p>å®˜ç½‘è¯¦è§£</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å®˜ç½‘ï¼šhttps://dev.mysql.com/doc/refman/5.7/en/char.html</span></span><br><span class="line">CHAR å’Œ VARCHAR æ˜¯æœ€å¸¸ä½¿ç”¨çš„ä¸¤ç§å­—ç¬¦ä¸²ç±»å‹ã€‚</span><br><span class="line">ä¸€èˆ¬æ¥è¯´</span><br><span class="line">CHAR(N)ç”¨æ¥ä¿å­˜å›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œå¯¹äº CHAR ç±»å‹,N çš„èŒƒå›´ ä¸º <span class="number">0</span> ~ <span class="number">255</span></span><br><span class="line">VARCHAR(N)ç”¨æ¥ä¿å­˜å˜é•¿å­—ç¬¦ç±»å‹ï¼Œå¯¹äº VARCHAR ç±»å‹,N çš„èŒƒå›´ä¸º <span class="number">0</span> ~ <span class="number">65</span> <span class="number">535</span></span><br><span class="line">CHAR(N)å’Œ VARCHAR(N) ä¸­çš„ N éƒ½ä»£è¡¨å­—ç¬¦é•¿åº¦,è€Œéå­—èŠ‚é•¿åº¦ã€‚</span><br><span class="line">psï¼šå¯¹äº MySQL <span class="number">4.1</span> ä¹‹å‰çš„ç‰ˆæœ¬,å¦‚ MySQL <span class="number">3.23</span> å’Œ MySQL <span class="number">4.0</span>,CHAR(N)å’Œ VARCHAR (N)ä¸­çš„ N ä»£è¡¨å­—èŠ‚é•¿åº¦ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment">#CHARç±»å‹</span></span><br><span class="line">å¯¹äº CHAR ç±»å‹çš„å­—ç¬¦ä¸²,MySQL æ•°æ®åº“ä¼šè‡ªåŠ¨å¯¹å­˜å‚¨åˆ—çš„å³è¾¹è¿›è¡Œå¡«å……(Right Padded)æ“ä½œ,ç›´åˆ°å­—ç¬¦ä¸²è¾¾åˆ°æŒ‡å®šçš„é•¿åº¦ Nã€‚è€Œåœ¨è¯»å–è¯¥åˆ—æ—¶,MySQL æ•°æ®åº“ä¼šè‡ªåŠ¨å°† å¡«å……çš„å­—ç¬¦åˆ é™¤ã€‚æœ‰ä¸€ç§æƒ…å†µä¾‹å¤–,é‚£å°±æ˜¯æ˜¾å¼åœ°å°† SQL_MODE è®¾ç½®ä¸º PAD_CHAR_TO_ FULL_LENGTH,ä¾‹å¦‚:</span><br><span class="line">mysql&gt; CREATE TABLE t ( a CHAR(<span class="number">10</span>));</span><br><span class="line">      Query OK, <span class="number">0</span> rows affected (<span class="number">0.03</span> sec)</span><br><span class="line">mysql&gt; INSERT INTO t SELECT <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line">      Query OK, <span class="number">1</span> row affected (<span class="number">0.03</span> sec)</span><br><span class="line">      Records: <span class="number">1</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line">mysql&gt; SELECT a,HEX(a),LENGTH(a) FROM t\G;</span><br><span class="line">      *************************** <span class="number">1.</span> row ***************************</span><br><span class="line">              a: abc</span><br><span class="line">         HEX(a): <span class="number">616263</span></span><br><span class="line">      LENGTH (a): <span class="number">3</span></span><br><span class="line">      <span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">      mysql&gt; SET SQL_MODE=<span class="string">&#x27;PAD_CHAR_TO_FULL_LENGTH&#x27;</span>;</span><br><span class="line">      Query OK, <span class="number">0</span> rows affected (<span class="number">0.00</span> sec)</span><br><span class="line">mysql&gt; SELECT a,HEX(a),LENGTH(a) FROM t\G;</span><br><span class="line">      *************************** <span class="number">1.</span> row ***************************</span><br><span class="line">              a: abc</span><br><span class="line">         HEX(a): <span class="number">61626320202020202020</span></span><br><span class="line">      LENGTH (a): <span class="number">10</span></span><br><span class="line">      <span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">åœ¨ä¸Šè¿°è¿™ä¸ªä¾‹å­ä¸­,å…ˆåˆ›å»ºäº†ä¸€å¼ è¡¨ t,a åˆ—çš„ç±»å‹ä¸º CHAR(<span class="number">10</span>)ã€‚ç„¶åé€šè¿‡ INSERTè¯­å¥æ’å…¥å€¼â€œabcâ€,å› ä¸º a åˆ—çš„ç±»å‹ä¸º CHAR å‹,æ‰€ä»¥ä¼šè‡ªåŠ¨åœ¨åé¢å¡«å……ç©ºå­—ç¬¦ä¸²,ä½¿å…¶é•¿ åº¦ä¸º <span class="number">10</span>ã€‚æ¥ä¸‹æ¥åœ¨é€šè¿‡ SELECT è¯­å¥å–å‡ºæ•°æ®æ—¶ä¼šå°† a åˆ—å³å¡«å……çš„ç©ºå­—ç¬¦ç§»é™¤,ä»è€Œå¾—åˆ° å€¼â€œabcâ€ã€‚é€šè¿‡ LENGTH å‡½æ•°çœ‹åˆ° a åˆ—çš„å­—ç¬¦é•¿åº¦ä¸º <span class="number">3</span> è€Œé <span class="number">10</span>ã€‚</span><br><span class="line">æ¥ç€æˆ‘ä»¬å°† SQL_MODE æ˜¾å¼åœ°è®¾ç½®ä¸º PAD_CHAR_TO_FULL_LENGTHã€‚è¿™æ—¶å†é€šè¿‡ SELECT è¯­å¥è¿›è¡ŒæŸ¥è¯¢æ—¶,å¾—åˆ°çš„ç»“æœæ˜¯â€œabc â€,abc å³è¾¹æœ‰ <span class="number">7</span> ä¸ªå¡«å……å­—ç¬¦ <span class="number">0x20</span>,å¹¶é€š è¿‡ HEX å‡½æ•°å¾—åˆ°äº†éªŒè¯ã€‚è¿™æ¬¡ LENGTH å‡½æ•°è¿”å›çš„é•¿åº¦ä¸º <span class="number">10</span>ã€‚éœ€è¦æ³¨æ„çš„æ˜¯,LENGTH å‡½æ•°è¿”å›çš„æ˜¯å­—èŠ‚é•¿åº¦,è€Œä¸æ˜¯å­—ç¬¦é•¿åº¦ã€‚å¯¹äºå¤šå­—èŠ‚å­—ç¬¦é›†,CHAR(N)é•¿åº¦çš„åˆ—æœ€å¤š å¯å ç”¨çš„å­—èŠ‚æ•°ä¸ºè¯¥å­—ç¬¦é›†å•å­—ç¬¦æœ€å¤§å ç”¨å­—èŠ‚æ•° *Nã€‚ä¾‹å¦‚,å¯¹äº utf8 ä¸‹,CHAR(<span class="number">10</span>)æœ€ å¤šå¯èƒ½å ç”¨ <span class="number">30</span> ä¸ªå­—èŠ‚ã€‚é€šè¿‡å¯¹å¤šå­—èŠ‚å­—ç¬¦ä¸²ä½¿ç”¨ CHAR_LENGTH å‡½æ•°å’Œ LENGTH å‡½æ•°, å¯ä»¥å‘ç°ä¸¤è€…çš„ä¸åŒ,ç¤ºä¾‹å¦‚ä¸‹:</span><br><span class="line">mysql&gt; SET NAMES gbk;</span><br><span class="line">     Query OK, <span class="number">0</span> rows affected (<span class="number">0.03</span> sec)</span><br><span class="line">mysql&gt; SELECT @a:=<span class="string">&#x27;MySQL æŠ€æœ¯å†…å¹• &#x27;</span>; Query OK, <span class="number">0</span> rows affected (<span class="number">0.03</span> sec)</span><br><span class="line">mysql&gt; SELECT @a,HEX(@a),LENGTH(@a),CHAR_LENGTH(@a)\G; ***************************** <span class="number">1.</span> row **************************** a: MySQL æŠ€æœ¯å†…å¹•</span><br><span class="line">HEX(a): 4D7953514CBCBCCAF5C4DAC4BB</span><br><span class="line">LENGTH (a): <span class="number">13</span></span><br><span class="line">CHAR_LENGTH(a): <span class="number">9</span></span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">å˜ é‡ @ a æ˜¯ g b k å­— ç¬¦ é›† çš„ å­— ç¬¦ ä¸² ç±» å‹ , å€¼ ä¸º â€œ M y S Q L æŠ€ æœ¯ å†… å¹• â€, å å…­ è¿› åˆ¶ ä¸º <span class="number">0x4D7953514CBCBCCAF5C4DAC4BB</span>,LENGTH å‡½æ•°è¿”å› <span class="number">13</span>,å³è¯¥å­—ç¬¦ä¸²å ç”¨ <span class="number">13</span> å­—èŠ‚, å› ä¸º gbk å­—ç¬¦é›†ä¸­çš„ä¸­æ–‡å­—ç¬¦å ç”¨ä¸¤ä¸ªå­—èŠ‚,å› æ­¤ä¸€å…±å ç”¨ <span class="number">13</span> å­—èŠ‚ã€‚CHAR_LENGTH å‡½æ•° è¿”å› <span class="number">9</span>,å¾ˆæ˜¾ç„¶è¯¥å­—ç¬¦é•¿åº¦ä¸º <span class="number">9</span>ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#VARCHARç±»å‹</span></span><br><span class="line">VARCHAR ç±»å‹å­˜å‚¨å˜é•¿å­—æ®µçš„å­—ç¬¦ç±»å‹,ä¸ CHAR ç±»å‹ä¸åŒçš„æ˜¯,å…¶å­˜å‚¨æ—¶éœ€è¦åœ¨ å‰ç¼€é•¿åº¦åˆ—è¡¨åŠ ä¸Šå®é™…å­˜å‚¨çš„å­—ç¬¦,è¯¥å­—ç¬¦å ç”¨ <span class="number">1</span> ~ <span class="number">2</span> å­—èŠ‚çš„ç©ºé—´ã€‚å½“å­˜å‚¨çš„å­—ç¬¦ä¸²é•¿åº¦å° äº <span class="number">255</span> å­—èŠ‚æ—¶,å…¶éœ€è¦ <span class="number">1</span> å­—èŠ‚çš„ç©ºé—´,å½“å¤§äº <span class="number">255</span> å­—èŠ‚æ—¶,éœ€è¦ <span class="number">2</span> å­—èŠ‚çš„ç©ºé—´ã€‚æ‰€ä»¥,å¯¹ äºå•å­—èŠ‚çš„ latin1 æ¥è¯´,CHAR(<span class="number">10</span>)å’Œ VARCHAR(<span class="number">10</span>)æœ€å¤§å ç”¨çš„å­˜å‚¨ç©ºé—´æ˜¯ä¸åŒçš„, CHAR(<span class="number">10</span>)å ç”¨ <span class="number">10</span> ä¸ªå­—èŠ‚è¿™æ˜¯æ¯«æ— ç–‘é—®çš„,è€Œ VARCHAR(<span class="number">10</span>)çš„æœ€å¤§å ç”¨ç©ºé—´æ•°æ˜¯ <span class="number">11</span> å­—èŠ‚,å› ä¸ºå…¶éœ€è¦ <span class="number">1</span> å­—èŠ‚æ¥å­˜æ”¾å­—ç¬¦é•¿åº¦ã€‚</span><br><span class="line">-------------------------------------------------</span><br><span class="line">æ³¨æ„ å¯¹äºæœ‰äº›å¤šå­—èŠ‚çš„å­—ç¬¦é›†ç±»å‹,å…¶ CHAR å’Œ VARCHAR åœ¨å­˜å‚¨æ–¹æ³•ä¸Šæ˜¯ä¸€æ ·çš„,åŒæ · éœ€è¦ä¸ºé•¿åº¦åˆ—è¡¨åŠ ä¸Šå­—ç¬¦ä¸²çš„å€¼ã€‚å¯¹äº GBK å’Œ UTF-<span class="number">8</span> è¿™äº›å­—ç¬¦ç±»å‹,å…¶æœ‰äº›å­—ç¬¦æ˜¯ä»¥ <span class="number">1</span> å­—èŠ‚ å­˜æ”¾çš„,æœ‰äº›å­—ç¬¦æ˜¯æŒ‰ <span class="number">2</span> æˆ– <span class="number">3</span> å­—èŠ‚å­˜æ”¾çš„,å› æ­¤åŒæ ·éœ€è¦ <span class="number">1</span> ~ <span class="number">2</span> å­—èŠ‚çš„ç©ºé—´æ¥å­˜å‚¨å­—ç¬¦çš„é•¿ åº¦ã€‚</span><br><span class="line">-------------------------------------------------</span><br><span class="line">è™½ç„¶ CHAR å’Œ VARCHAR çš„å­˜å‚¨æ–¹å¼ä¸å¤ªç›¸åŒ,ä½†æ˜¯å¯¹äºä¸¤ä¸ªå­—ç¬¦ä¸²çš„æ¯”è¾ƒ,éƒ½åªæ¯” è¾ƒå…¶å€¼,å¿½ç•¥ CHAR å€¼å­˜åœ¨çš„å³å¡«å……,å³ä½¿å°† SQL _MODE è®¾ç½®ä¸º PAD_CHAR_TO_FULL_ LENGTH ä¹Ÿä¸€æ ·,ä¾‹å¦‚:</span><br><span class="line">mysql&gt; CREATE TABLE t ( a CHAR(<span class="number">10</span>), b VARCHAR(<span class="number">10</span>));</span><br><span class="line">    Query OK, <span class="number">0</span> rows affected (<span class="number">0.01</span> sec)</span><br><span class="line">mysql&gt; INSERT INTO t SELECT <span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">    Query OK, <span class="number">1</span> row affected (<span class="number">0.00</span> sec)</span><br><span class="line">    Records: <span class="number">1</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line">mysql&gt; SELECT a=b FROM t\G;</span><br><span class="line">    *************************** <span class="number">1.</span> row ***************************</span><br><span class="line">    a=b: <span class="number">1</span></span><br><span class="line">    <span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">    mysql&gt; SET SQL_MODE=<span class="string">&#x27;PAD_CHAR_TO_FULL_LENGTH&#x27;</span>;</span><br><span class="line">    Query OK, <span class="number">0</span> rows affected (<span class="number">0.00</span> sec)</span><br><span class="line">mysql&gt; SELECT a=b FROM t\G;</span><br><span class="line">    *************************** <span class="number">1.</span> row ***************************</span><br><span class="line">    a=b: <span class="number">1</span></span><br><span class="line">    <span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>| Value | <code>CHAR(4)</code> | Storage Required | <code>VARCHAR(4)</code> | Storage Required | | â€”â€”â€”â€” | â€”â€”â€” | â€”â€”â€”â€”â€”- | â€”â€”â€”â€” | â€”â€”â€”â€”â€”- | | <code>&#39;&#39;</code> | <code>&#39; &#39;</code> | 4 bytes | <code>&#39;&#39;</code> | 1 byte | | <code>&#39;ab&#39;</code> | <code>&#39;ab &#39;</code> | 4 bytes | <code>&#39;ab&#39;</code> | 3 bytes | | <code>&#39;abcd&#39;</code> | <code>&#39;abcd&#39;</code> | 4 bytes | <code>&#39;abcd&#39;</code> | 5 bytes | | <code>&#39;abcdefgh&#39;</code> | <code>&#39;abcd&#39;</code> | 4 bytes | <code>&#39;abcd&#39;</code> | 5 bytes |</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æµ‹è¯•å‰äº†è§£ä¸¤ä¸ªå‡½æ•°</span><br><span class="line">lengthï¼šæŸ¥çœ‹å­—èŠ‚æ•°</span><br><span class="line">char_length:æŸ¥çœ‹å­—ç¬¦æ•°</span><br></pre></td></tr></table></figure>

<ol>
<li>charå¡«å……ç©ºæ ¼æ¥æ»¡è¶³å›ºå®šé•¿åº¦ï¼Œä½†æ˜¯åœ¨æŸ¥è¯¢æ—¶å´ä¼šå¾ˆä¸è¦è„¸åœ°åˆ é™¤å°¾éƒ¨çš„ç©ºæ ¼ï¼ˆè£…ä½œè‡ªå·±å¥½åƒæ²¡æœ‰æµªè´¹è¿‡ç©ºé—´ä¸€æ ·ï¼‰ï¼Œç„¶åä¿®æ”¹sql_modeè®©å…¶ç°å‡ºåŸå½¢</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">table</span> t1(x <span class="type">char</span>(<span class="number">5</span>),y <span class="type">varchar</span>(<span class="number">5</span>));</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.26</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="type">char</span>å­˜<span class="number">5</span>ä¸ªå­—ç¬¦ï¼Œè€Œ<span class="type">varchar</span>å­˜<span class="number">4</span>ä¸ªå­—ç¬¦</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> t1 <span class="keyword">values</span>(<span class="string">&#x27;ä½ ç…å•¥ &#x27;</span>,<span class="string">&#x27;ä½ ç…å•¥ &#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.05</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SET</span> sql_mode<span class="operator">=</span><span class="string">&#x27;&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected, <span class="number">1</span> warning (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#åœ¨æ£€ç´¢æ—¶<span class="type">char</span>å¾ˆä¸è¦è„¸åœ°å°†è‡ªå·±æµªè´¹çš„<span class="number">2</span>ä¸ªå­—ç¬¦ç»™åˆ æ‰äº†ï¼Œè£…çš„å¥½åƒè‡ªå·±æ²¡æµªè´¹è¿‡ç©ºé—´ä¸€æ ·ï¼Œè€Œ<span class="type">varchar</span>å¾ˆè€å®ï¼Œå­˜äº†å¤šå°‘ï¼Œå°±æ˜¾ç¤ºå¤šå°‘</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> x,<span class="keyword">char_length</span>(x),y,<span class="keyword">char_length</span>(y) <span class="keyword">from</span> t1; </span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+----------------+------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> x         <span class="operator">|</span> <span class="keyword">char_length</span>(x) <span class="operator">|</span> y          <span class="operator">|</span> <span class="keyword">char_length</span>(y) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+----------------+------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> ä½ ç…å•¥    <span class="operator">|</span>              <span class="number">3</span> <span class="operator">|</span> ä½ ç…å•¥     <span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+----------------+------------+----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#ç•¥æ–½å°è®¡ï¼Œè®©<span class="type">char</span>ç°å‡ºåŸå½¢</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SET</span> sql_mode <span class="operator">=</span> <span class="string">&#x27;PAD_CHAR_TO_FULL_LENGTH&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#è¿™ä¸‹å­<span class="type">char</span>åŸå½¢æ¯•éœ²äº†......</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> x,<span class="keyword">char_length</span>(x),y,<span class="keyword">char_length</span>(y) <span class="keyword">from</span> t1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+----------------+------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> x           <span class="operator">|</span> <span class="keyword">char_length</span>(x) <span class="operator">|</span> y          <span class="operator">|</span> <span class="keyword">char_length</span>(y) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+----------------+------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> ä½ ç…å•¥      <span class="operator">|</span>              <span class="number">5</span> <span class="operator">|</span> ä½ ç…å•¥     <span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+----------------+------------+----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="type">char</span>ç±»å‹ï¼š<span class="number">3</span>ä¸ªä¸­æ–‡å­—ç¬¦<span class="operator">+</span><span class="number">2</span>ä¸ªç©ºæ ¼<span class="operator">=</span><span class="number">11</span>Bytes</span><br><span class="line">#<span class="type">varchar</span>ç±»å‹:<span class="number">3</span>ä¸ªä¸­æ–‡å­—ç¬¦<span class="operator">+</span><span class="number">1</span>ä¸ªç©ºæ ¼<span class="operator">=</span><span class="number">10</span>Bytes</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> x,length(x),y,length(y) <span class="keyword">from</span> t1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------+------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> x           <span class="operator">|</span> length(x) <span class="operator">|</span> y          <span class="operator">|</span> length(y) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------+------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> ä½ ç…å•¥      <span class="operator">|</span>        <span class="number">11</span> <span class="operator">|</span> ä½ ç…å•¥     <span class="operator">|</span>        <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+-----------+------------+-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>äº†è§£concat</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> concat(<span class="string">&#x27;æ•°æ®: &#x27;</span>,x,<span class="string">&#x27;é•¿åº¦: &#x27;</span>,<span class="keyword">char_length</span>(x)),concat(y,<span class="keyword">char_length</span>(y)</span><br><span class="line">) <span class="keyword">from</span> t1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------------------------+--------------------------+</span></span><br><span class="line"><span class="operator">|</span> concat(<span class="string">&#x27;æ•°æ®: &#x27;</span>,x,<span class="string">&#x27;é•¿åº¦: &#x27;</span>,<span class="keyword">char_length</span>(x))     <span class="operator">|</span> concat(y,<span class="keyword">char_length</span>(y)) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------------------------+--------------------------+</span></span><br><span class="line"><span class="operator">|</span> æ•°æ®: ä½ ç…å•¥  é•¿åº¦: <span class="number">5</span>                          <span class="operator">|</span> ä½ ç…å•¥ <span class="number">4</span>                 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------------------------+--------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong><a href="https://link.zhihu.com/?target=http://www.cnblogs.com/linhaifeng/articles/8495101.html">ç‚¹å‡»æŸ¥çœ‹å…³äºsql_modeçš„è¯¦ç»†ä»‹ç»</a></strong></p>
</blockquote>
<ol>
<li>è™½ç„¶ CHAR å’Œ VARCHAR çš„å­˜å‚¨æ–¹å¼ä¸å¤ªç›¸åŒ,ä½†æ˜¯å¯¹äºä¸¤ä¸ªå­—ç¬¦ä¸²çš„æ¯”è¾ƒ,éƒ½åªæ¯” è¾ƒå…¶å€¼,å¿½ç•¥ CHAR å€¼å­˜åœ¨çš„å³å¡«å……,å³ä½¿å°† SQL <em>MODE è®¾ç½®ä¸º PAD_CHAR_TO_FULL</em> LENGTH ä¹Ÿä¸€æ ·,,ä½†è¿™ä¸é€‚ç”¨äºlike</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Values <span class="keyword">in</span> CHAR <span class="keyword">and</span> VARCHAR columns are <span class="built_in">sorted</span> <span class="keyword">and</span> compared according to the character <span class="built_in">set</span> collation assigned to the column.</span><br><span class="line"></span><br><span class="line">All MySQL collations are of <span class="built_in">type</span> PAD SPACE. This means that <span class="built_in">all</span> CHAR, VARCHAR, <span class="keyword">and</span> TEXT values are compared without regard to <span class="built_in">any</span> trailing spaces. â€œComparisonâ€ <span class="keyword">in</span> this context does <span class="keyword">not</span> include the LIKE pattern-matching operator, <span class="keyword">for</span> which trailing spaces are significant. For example:</span><br><span class="line"></span><br><span class="line">mysql&gt; CREATE TABLE names (myname CHAR(<span class="number">10</span>));</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; INSERT INTO names VALUES (<span class="string">&#x27;Monty&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT myname = <span class="string">&#x27;Monty&#x27;</span>, myname = <span class="string">&#x27;Monty  &#x27;</span> FROM names;</span><br><span class="line">+------------------+--------------------+</span><br><span class="line">| myname = <span class="string">&#x27;Monty&#x27;</span> | myname = <span class="string">&#x27;Monty  &#x27;</span> |</span><br><span class="line">+------------------+--------------------+</span><br><span class="line">|                <span class="number">1</span> |                  <span class="number">1</span> |</span><br><span class="line">+------------------+--------------------+</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT myname LIKE <span class="string">&#x27;Monty&#x27;</span>, myname LIKE <span class="string">&#x27;Monty  &#x27;</span> FROM names;</span><br><span class="line">+---------------------+-----------------------+</span><br><span class="line">| myname LIKE <span class="string">&#x27;Monty&#x27;</span> | myname LIKE <span class="string">&#x27;Monty  &#x27;</span> |</span><br><span class="line">+---------------------+-----------------------+</span><br><span class="line">|                   <span class="number">1</span> |                     <span class="number">0</span> |</span><br><span class="line">+---------------------+-----------------------+</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<ol>
<li>æ€»ç»“</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#InnoDBå­˜å‚¨å¼•æ“ï¼šå»ºè®®ä½¿ç”¨<span class="type">VARCHAR</span>ç±»å‹</span><br><span class="line">å•ä»æ•°æ®ç±»å‹çš„å®ç°æœºåˆ¶å»è€ƒè™‘ï¼Œ<span class="type">char</span>æ•°æ®ç±»å‹çš„å¤„ç†é€Ÿåº¦æ›´å¿«ï¼Œæœ‰æ—¶ç”šè‡³å¯ä»¥è¶…å‡º<span class="type">varchar</span>å¤„ç†é€Ÿåº¦çš„<span class="number">50</span><span class="operator">%</span>ã€‚</span><br><span class="line"></span><br><span class="line">ä½†å¯¹äºInnoDBæ•°æ®è¡¨ï¼Œå†…éƒ¨çš„è¡Œå­˜å‚¨æ ¼å¼æ²¡æœ‰åŒºåˆ†å›ºå®šé•¿åº¦å’Œå¯å˜é•¿åº¦åˆ—ï¼ˆæ‰€æœ‰æ•°æ®è¡Œéƒ½ä½¿ç”¨æŒ‡å‘æ•°æ®åˆ—å€¼çš„å¤´æŒ‡é’ˆï¼‰ï¼Œå› æ­¤åœ¨æœ¬è´¨ä¸Šï¼Œä½¿ç”¨å›ºå®šé•¿åº¦çš„<span class="type">CHAR</span>åˆ—ä¸ä¸€å®šæ¯”ä½¿ç”¨å¯å˜é•¿åº¦<span class="type">VARCHAR</span>åˆ—æ€§èƒ½è¦å¥½ã€‚å› è€Œï¼Œä¸»è¦çš„æ€§èƒ½å› ç´ æ˜¯æ•°æ®è¡Œä½¿ç”¨çš„å­˜å‚¨æ€»é‡ã€‚ç”±äº<span class="type">CHAR</span>å¹³å‡å ç”¨çš„ç©ºé—´å¤šäº<span class="type">VARCHAR</span>ï¼Œå› æ­¤ä½¿ç”¨<span class="type">VARCHAR</span>æ¥æœ€å°åŒ–éœ€è¦å¤„ç†çš„æ•°æ®è¡Œçš„å­˜å‚¨æ€»é‡å’Œç£ç›˜I<span class="operator">/</span>Oæ˜¯æ¯”è¾ƒå¥½çš„ã€‚</span><br><span class="line"></span><br><span class="line">#å…¶ä»–å­—ç¬¦ä¸²ç³»åˆ—ï¼ˆæ•ˆç‡ï¼š<span class="type">char</span><span class="operator">&gt;</span><span class="type">varchar</span><span class="operator">&gt;</span>textï¼‰</span><br><span class="line">TEXTç³»åˆ— TINYTEXT TEXT MEDIUMTEXT LONGTEXT</span><br><span class="line"><span class="type">BLOB</span> ç³»åˆ—    TINYBLOB <span class="type">BLOB</span> MEDIUMBLOB LONGBLOB </span><br><span class="line"><span class="type">BINARY</span>ç³»åˆ— <span class="type">BINARY</span> <span class="type">VARBINARY</span></span><br><span class="line"></span><br><span class="line">textï¼štextæ•°æ®ç±»å‹ç”¨äºä¿å­˜å˜é•¿çš„å¤§å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç»„å¤šåˆ°<span class="number">65535</span> (<span class="number">2</span><span class="operator">*</span><span class="operator">*</span><span class="number">16</span> âˆ’ <span class="number">1</span>)ä¸ªå­—ç¬¦ã€‚</span><br><span class="line">mediumtextï¼šA TEXT <span class="keyword">column</span> <span class="keyword">with</span> a maximum length <span class="keyword">of</span> <span class="number">16</span>,<span class="number">777</span>,<span class="number">215</span> (<span class="number">2</span><span class="operator">*</span><span class="operator">*</span><span class="number">24</span> âˆ’ <span class="number">1</span>) characters.</span><br><span class="line">longtextï¼šA TEXT <span class="keyword">column</span> <span class="keyword">with</span> a maximum length <span class="keyword">of</span> <span class="number">4</span>,<span class="number">294</span>,<span class="number">967</span>,<span class="number">295</span> <span class="keyword">or</span> <span class="number">4</span>GB (<span class="number">2</span><span class="operator">*</span><span class="operator">*</span><span class="number">32</span> âˆ’ <span class="number">1</span>) characters.</span><br></pre></td></tr></table></figure>

<h3 id="äº”-æšä¸¾ç±»å‹ä¸é›†åˆç±»å‹"><a href="#äº”-æšä¸¾ç±»å‹ä¸é›†åˆç±»å‹" class="headerlink" title="äº” æšä¸¾ç±»å‹ä¸é›†åˆç±»å‹"></a>äº” æšä¸¾ç±»å‹ä¸é›†åˆç±»å‹</h3><p>å­—æ®µçš„å€¼åªèƒ½åœ¨ç»™å®šèŒƒå›´ä¸­é€‰æ‹©ï¼Œå¦‚å•é€‰æ¡†ï¼Œå¤šé€‰æ¡† enum å•é€‰ åªèƒ½åœ¨ç»™å®šçš„èŒƒå›´å†…é€‰ä¸€ä¸ªå€¼ï¼Œå¦‚æ€§åˆ« sex ç”·male&#x2F;å¥³female set å¤šé€‰ åœ¨ç»™å®šçš„èŒƒå›´å†…å¯ä»¥é€‰æ‹©ä¸€ä¸ªæˆ–ä¸€ä¸ªä»¥ä¸Šçš„å€¼ï¼ˆçˆ±å¥½1,çˆ±å¥½2,çˆ±å¥½3â€¦ï¼‰</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">æšä¸¾ç±»å‹ï¼ˆenumï¼‰</span><br><span class="line">            An ENUM column can have a maximum of <span class="number">65</span>,<span class="number">535</span> distinct elements. (The practical limit <span class="keyword">is</span> less than <span class="number">3000.</span>)</span><br><span class="line">            ç¤ºä¾‹ï¼š</span><br><span class="line">                CREATE TABLE shirts (</span><br><span class="line">                    name VARCHAR(<span class="number">40</span>),</span><br><span class="line">                    size ENUM(<span class="string">&#x27;x-small&#x27;</span>, <span class="string">&#x27;small&#x27;</span>, <span class="string">&#x27;medium&#x27;</span>, <span class="string">&#x27;large&#x27;</span>, <span class="string">&#x27;x-large&#x27;</span>)</span><br><span class="line">                );</span><br><span class="line">                INSERT INTO shirts (name, size) VALUES (<span class="string">&#x27;dress shirt&#x27;</span>,<span class="string">&#x27;large&#x27;</span>), (<span class="string">&#x27;t-shirt&#x27;</span>,<span class="string">&#x27;medium&#x27;</span>),(<span class="string">&#x27;polo shirt&#x27;</span>,<span class="string">&#x27;small&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            é›†åˆç±»å‹ï¼ˆ<span class="built_in">set</span>ï¼‰</span><br><span class="line">            A SET column can have a maximum of <span class="number">64</span> distinct members.</span><br><span class="line">            ç¤ºä¾‹ï¼š</span><br><span class="line">                CREATE TABLE myset (col SET(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>));</span><br><span class="line">                INSERT INTO myset (col) VALUES (<span class="string">&#x27;a,d&#x27;</span>), (<span class="string">&#x27;d,a&#x27;</span>), (<span class="string">&#x27;a,d,a&#x27;</span>), (<span class="string">&#x27;a,d,d&#x27;</span>), (<span class="string">&#x27;d,a,d&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>éªŒè¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">MariaDB [db1]&gt; create table consumer( </span><br><span class="line">    -&gt; name varchar(<span class="number">50</span>),</span><br><span class="line">    -&gt; sex enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>),</span><br><span class="line">    -&gt; level enum(<span class="string">&#x27;vip1&#x27;</span>,<span class="string">&#x27;vip2&#x27;</span>,<span class="string">&#x27;vip3&#x27;</span>,<span class="string">&#x27;vip4&#x27;</span>,<span class="string">&#x27;vip5&#x27;</span>), <span class="comment">#åœ¨æŒ‡å®šèŒƒå›´å†…ï¼Œå¤šé€‰ä¸€</span></span><br><span class="line">    -&gt; hobby <span class="built_in">set</span>(<span class="string">&#x27;play&#x27;</span>,<span class="string">&#x27;music&#x27;</span>,<span class="string">&#x27;read&#x27;</span>,<span class="string">&#x27;study&#x27;</span>) <span class="comment">#åœ¨æŒ‡å®šèŒƒå›´å†…ï¼Œå¤šé€‰å¤š</span></span><br><span class="line">    -&gt; );</span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; insert into consumer values  </span><br><span class="line">    -&gt; (<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;vip5&#x27;</span>,<span class="string">&#x27;read,study&#x27;</span>),</span><br><span class="line">    -&gt; (<span class="string">&#x27;alex&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="string">&#x27;vip1&#x27;</span>,<span class="string">&#x27;girl&#x27;</span>);</span><br><span class="line"></span><br><span class="line">MariaDB [db1]&gt; select * <span class="keyword">from</span> consumer;</span><br><span class="line">+------+--------+-------+------------+</span><br><span class="line">| name | sex    | level | hobby      |</span><br><span class="line">+------+--------+-------+------------+</span><br><span class="line">| egon | male   | vip5  | read,study |</span><br><span class="line">| alex | female | vip1  |            |</span><br><span class="line">+------+--------+-------+------------+</span><br></pre></td></tr></table></figure>

<h2 id="å…­-è¡¨å®Œæ•´æ€§çº¦æŸ"><a href="#å…­-è¡¨å®Œæ•´æ€§çº¦æŸ" class="headerlink" title="å…­ è¡¨å®Œæ•´æ€§çº¦æŸ"></a>å…­ è¡¨å®Œæ•´æ€§çº¦æŸ</h2><h3 id="ä¸€-ä»‹ç»-1"><a href="#ä¸€-ä»‹ç»-1" class="headerlink" title="ä¸€ ä»‹ç»"></a>ä¸€ ä»‹ç»</h3><p>çº¦æŸæ¡ä»¶ä¸æ•°æ®ç±»å‹çš„å®½åº¦ä¸€æ ·ï¼Œéƒ½æ˜¯å¯é€‰å‚æ•°</p>
<p>ä½œç”¨ï¼šç”¨äºä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ ä¸»è¦åˆ†ä¸ºï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">PRIMARY</span> KEY (PK)    æ ‡è¯†è¯¥å­—æ®µä¸ºè¯¥è¡¨çš„ä¸»é”®ï¼Œå¯ä»¥å”¯ä¸€çš„æ ‡è¯†è®°å½•</span><br><span class="line"><span class="keyword">FOREIGN</span> KEY (FK)    æ ‡è¯†è¯¥å­—æ®µä¸ºè¯¥è¡¨çš„å¤–é”®</span><br><span class="line"><span class="keyword">NOT</span> <span class="keyword">NULL</span>    æ ‡è¯†è¯¥å­—æ®µä¸èƒ½ä¸ºç©º</span><br><span class="line"><span class="keyword">UNIQUE</span> KEY (UK)    æ ‡è¯†è¯¥å­—æ®µçš„å€¼æ˜¯å”¯ä¸€çš„</span><br><span class="line">AUTO_INCREMENT    æ ‡è¯†è¯¥å­—æ®µçš„å€¼è‡ªåŠ¨å¢é•¿ï¼ˆæ•´æ•°ç±»å‹ï¼Œè€Œä¸”ä¸ºä¸»é”®ï¼‰</span><br><span class="line"><span class="keyword">DEFAULT</span>    ä¸ºè¯¥å­—æ®µè®¾ç½®é»˜è®¤å€¼</span><br><span class="line"></span><br><span class="line">UNSIGNED æ— ç¬¦å·</span><br><span class="line">ZEROFILL ä½¿ç”¨<span class="number">0</span>å¡«å……</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> æ˜¯å¦å…è®¸ä¸ºç©ºï¼Œé»˜è®¤<span class="keyword">NULL</span>ï¼Œå¯è®¾ç½®<span class="keyword">NOT</span> <span class="keyword">NULL</span>ï¼Œå­—æ®µä¸å…è®¸ä¸ºç©ºï¼Œå¿…é¡»èµ‹å€¼</span><br><span class="line"><span class="number">2.</span> å­—æ®µæ˜¯å¦æœ‰é»˜è®¤å€¼ï¼Œç¼ºçœçš„é»˜è®¤å€¼æ˜¯<span class="keyword">NULL</span>ï¼Œå¦‚æœæ’å…¥è®°å½•æ—¶ä¸ç»™å­—æ®µèµ‹å€¼ï¼Œæ­¤å­—æ®µä½¿ç”¨é»˜è®¤å€¼</span><br><span class="line">sex enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;male&#x27;</span></span><br><span class="line">age <span class="type">int</span> unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">default</span> <span class="number">20</span> å¿…é¡»ä¸ºæ­£å€¼ï¼ˆæ— ç¬¦å·ï¼‰ ä¸å…è®¸ä¸ºç©º é»˜è®¤æ˜¯<span class="number">20</span></span><br><span class="line"><span class="number">3.</span> æ˜¯å¦æ˜¯key</span><br><span class="line">ä¸»é”® <span class="keyword">primary</span> key</span><br><span class="line">å¤–é”® <span class="keyword">foreign</span> key</span><br><span class="line">ç´¢å¼• (index,unique...)</span><br></pre></td></tr></table></figure>

<h3 id="äºŒ-not-nullä¸default"><a href="#äºŒ-not-nullä¸default" class="headerlink" title="äºŒ not nullä¸default"></a>äºŒ not nullä¸default</h3><p>æ˜¯å¦å¯ç©ºï¼Œnullè¡¨ç¤ºç©ºï¼Œéå­—ç¬¦ä¸² not null - ä¸å¯ç©º null - å¯ç©º</p>
<p>é»˜è®¤å€¼ï¼Œåˆ›å»ºåˆ—æ—¶å¯ä»¥æŒ‡å®šé»˜è®¤å€¼ï¼Œå½“æ’å…¥æ•°æ®æ—¶å¦‚æœæœªä¸»åŠ¨è®¾ç½®ï¼Œåˆ™è‡ªåŠ¨æ·»åŠ é»˜è®¤å€¼ create table tb1( nid int not null defalut 2, num int not null )</p>
<p>éªŒè¯</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">==================<span class="keyword">not</span> null====================</span><br><span class="line">mysql&gt; create table t1(<span class="built_in">id</span> <span class="built_in">int</span>); <span class="comment">#idå­—æ®µé»˜è®¤å¯ä»¥æ’å…¥ç©º</span></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| Field | <span class="type">Type</span>    | Null | Key | Default | Extra |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| <span class="built_in">id</span>    | <span class="built_in">int</span>(<span class="number">11</span>) | YES  |     | NULL    |       |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">mysql&gt; insert into t1 values(); <span class="comment">#å¯ä»¥æ’å…¥ç©º</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; create table t2(<span class="built_in">id</span> <span class="built_in">int</span> <span class="keyword">not</span> null); <span class="comment">#è®¾ç½®å­—æ®µidä¸ä¸ºç©º</span></span><br><span class="line">mysql&gt; desc t2;</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| Field | <span class="type">Type</span>    | Null | Key | Default | Extra |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| <span class="built_in">id</span>    | <span class="built_in">int</span>(<span class="number">11</span>) | NO   |     | NULL    |       |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">mysql&gt; insert into t2 values(); <span class="comment">#ä¸èƒ½æ’å…¥ç©º</span></span><br><span class="line">ERROR <span class="number">1364</span> (HY000): Field <span class="string">&#x27;id&#x27;</span> doesn<span class="string">&#x27;t have a default value</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">==================default====================</span></span><br><span class="line"><span class="string">#è®¾ç½®idå­—æ®µæœ‰é»˜è®¤å€¼åï¼Œåˆ™æ— è®ºidå­—æ®µæ˜¯nullè¿˜æ˜¯not nullï¼Œéƒ½å¯ä»¥æ’å…¥ç©ºï¼Œæ’å…¥ç©ºé»˜è®¤å¡«å…¥defaultæŒ‡å®šçš„é»˜è®¤å€¼</span></span><br><span class="line"><span class="string">mysql&gt; create table t3(id int default 1);</span></span><br><span class="line"><span class="string">mysql&gt; alter table t3 modify id int not null default 1;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">==================ç»¼åˆç»ƒä¹ ====================</span></span><br><span class="line"><span class="string">mysql&gt; create table student(</span></span><br><span class="line"><span class="string">    -&gt; name varchar(20) not null,</span></span><br><span class="line"><span class="string">    -&gt; age int(3) unsigned not null default 18,</span></span><br><span class="line"><span class="string">    -&gt; sex enum(&#x27;</span>male<span class="string">&#x27;,&#x27;</span>female<span class="string">&#x27;) default &#x27;</span>male<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">    -&gt; hobby set(&#x27;</span>play<span class="string">&#x27;,&#x27;</span>study<span class="string">&#x27;,&#x27;</span>read<span class="string">&#x27;,&#x27;</span>music<span class="string">&#x27;) default &#x27;</span>play,music<span class="string">&#x27;</span></span><br><span class="line"><span class="string">    -&gt; );</span></span><br><span class="line"><span class="string">mysql&gt; desc student;</span></span><br><span class="line"><span class="string">+-------+------------------------------------+------+-----+------------+-------+</span></span><br><span class="line"><span class="string">| Field | Type                               | Null | Key | Default    | Extra |</span></span><br><span class="line"><span class="string">+-------+------------------------------------+------+-----+------------+-------+</span></span><br><span class="line"><span class="string">| name  | varchar(20)                        | NO   |     | NULL       |       |</span></span><br><span class="line"><span class="string">| age   | int(3) unsigned                    | NO   |     | 18         |       |</span></span><br><span class="line"><span class="string">| sex   | enum(&#x27;</span>male<span class="string">&#x27;,&#x27;</span>female<span class="string">&#x27;)              | YES  |     | male       |       |</span></span><br><span class="line"><span class="string">| hobby | set(&#x27;</span>play<span class="string">&#x27;,&#x27;</span>study<span class="string">&#x27;,&#x27;</span>read<span class="string">&#x27;,&#x27;</span>music<span class="string">&#x27;) | YES  |     | play,music |       |</span></span><br><span class="line"><span class="string">+-------+------------------------------------+------+-----+------------+-------+</span></span><br><span class="line"><span class="string">mysql&gt; insert into student(name) values(&#x27;</span>egon<span class="string">&#x27;);</span></span><br><span class="line"><span class="string">mysql&gt; select * from student;</span></span><br><span class="line"><span class="string">+------+-----+------+------------+</span></span><br><span class="line"><span class="string">| name | age | sex  | hobby      |</span></span><br><span class="line"><span class="string">+------+-----+------+------------+</span></span><br><span class="line"><span class="string">| egon |  18 | male | play,music |</span></span><br><span class="line"><span class="string">+------+-----+------+------------+</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¸‰-unique"><a href="#ä¸‰-unique" class="headerlink" title="ä¸‰ unique"></a>ä¸‰ unique</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">============è®¾ç½®å”¯ä¸€çº¦æŸ UNIQUE===============</span><br><span class="line">æ–¹æ³•ä¸€ï¼š</span><br><span class="line">create table department1(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">name varchar(<span class="number">20</span>) unique,</span><br><span class="line">comment varchar(<span class="number">100</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ–¹æ³•äºŒï¼š</span><br><span class="line">create table department2(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">name varchar(<span class="number">20</span>),</span><br><span class="line">comment varchar(<span class="number">100</span>),</span><br><span class="line">constraint uk_name unique(name)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; insert into department1 values(<span class="number">1</span>,<span class="string">&#x27;IT&#x27;</span>,<span class="string">&#x27;æŠ€æœ¯&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.00</span> sec)</span><br><span class="line">mysql&gt; insert into department1 values(<span class="number">1</span>,<span class="string">&#x27;IT&#x27;</span>,<span class="string">&#x27;æŠ€æœ¯&#x27;</span>);</span><br><span class="line">ERROR <span class="number">1062</span> (<span class="number">23000</span>): Duplicate entry <span class="string">&#x27;IT&#x27;</span> <span class="keyword">for</span> key <span class="string">&#x27;name&#x27;</span></span><br></pre></td></tr></table></figure>

<p>not null+uniqueçš„åŒ–å­¦ååº”</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">mysql&gt; create table t1(<span class="built_in">id</span> <span class="built_in">int</span> <span class="keyword">not</span> null unique);</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t1;</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| Field | <span class="type">Type</span>    | Null | Key | Default | Extra |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| <span class="built_in">id</span>    | <span class="built_in">int</span>(<span class="number">11</span>) | NO   | PRI | NULL    |       |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>è”åˆå”¯ä¸€</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">create table service(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">name varchar(<span class="number">20</span>),</span><br><span class="line">host varchar(<span class="number">15</span>) <span class="keyword">not</span> null,</span><br><span class="line">port <span class="built_in">int</span> <span class="keyword">not</span> null,</span><br><span class="line">unique(host,port) <span class="comment">#è”åˆå”¯ä¸€</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into service values</span><br><span class="line">    -&gt; (<span class="number">1</span>,<span class="string">&#x27;nginx&#x27;</span>,<span class="string">&#x27;192.168.0.10&#x27;</span>,<span class="number">80</span>),</span><br><span class="line">    -&gt; (<span class="number">2</span>,<span class="string">&#x27;haproxy&#x27;</span>,<span class="string">&#x27;192.168.0.20&#x27;</span>,<span class="number">80</span>),</span><br><span class="line">    -&gt; (<span class="number">3</span>,<span class="string">&#x27;mysql&#x27;</span>,<span class="string">&#x27;192.168.0.30&#x27;</span>,<span class="number">3306</span>)</span><br><span class="line">    -&gt; ;</span><br><span class="line">Query OK, <span class="number">3</span> rows affected (<span class="number">0.01</span> sec)</span><br><span class="line">Records: <span class="number">3</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql&gt; insert into service(name,host,port) values(<span class="string">&#x27;nginx&#x27;</span>,<span class="string">&#x27;192.168.0.10&#x27;</span>,<span class="number">80</span>);</span><br><span class="line">ERROR <span class="number">1062</span> (<span class="number">23000</span>): Duplicate entry <span class="string">&#x27;192.168.0.10-80&#x27;</span> <span class="keyword">for</span> key <span class="string">&#x27;host&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="å››-primary-key"><a href="#å››-primary-key" class="headerlink" title="å›› primary key"></a>å›› primary key</h3><p>ä»çº¦æŸè§’åº¦çœ‹primary keyå­—æ®µçš„å€¼ä¸ä¸ºç©ºä¸”å”¯ä¸€ï¼Œé‚£æˆ‘ä»¬ç›´æ¥ä½¿ç”¨not null+uniqueä¸å°±å¯ä»¥äº†å—ï¼Œè¦å®ƒå¹²ä»€ä¹ˆï¼Ÿ</p>
<p>ä¸»é”®primary keyæ˜¯innodbå­˜å‚¨å¼•æ“ç»„ç»‡æ•°æ®çš„ä¾æ®ï¼Œinnodbç§°ä¹‹ä¸ºç´¢å¼•ç»„ç»‡è¡¨ï¼Œä¸€å¼ è¡¨ä¸­å¿…é¡»æœ‰ä¸”åªæœ‰ä¸€ä¸ªä¸»é”®ã€‚</p>
<p>ä¸€ä¸ªè¡¨ä¸­å¯ä»¥ï¼š</p>
<p>å•åˆ—åšä¸»é”® å¤šåˆ—åšä¸»é”®ï¼ˆå¤åˆä¸»é”®ï¼‰</p>
<p>å•åˆ—ä¸»é”®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">============å•åˆ—åšä¸»é”®===============</span><br><span class="line"><span class="comment">#æ–¹æ³•ä¸€ï¼šnot null+unique</span></span><br><span class="line">create table department1(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> <span class="keyword">not</span> null unique, <span class="comment">#ä¸»é”®</span></span><br><span class="line">name varchar(<span class="number">20</span>) <span class="keyword">not</span> null unique,</span><br><span class="line">comment varchar(<span class="number">100</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; desc department1;</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field   | <span class="type">Type</span>         | Null | Key | Default | Extra |</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">| <span class="built_in">id</span>      | <span class="built_in">int</span>(<span class="number">11</span>)      | NO   | PRI | NULL    |       |</span><br><span class="line">| name    | varchar(<span class="number">20</span>)  | NO   | UNI | NULL    |       |</span><br><span class="line">| comment | varchar(<span class="number">100</span>) | YES  |     | NULL    |       |</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–¹æ³•äºŒï¼šåœ¨æŸä¸€ä¸ªå­—æ®µåç”¨primary key</span></span><br><span class="line">create table department2(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> primary key, <span class="comment">#ä¸»é”®</span></span><br><span class="line">name varchar(<span class="number">20</span>),</span><br><span class="line">comment varchar(<span class="number">100</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; desc department2;</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field   | <span class="type">Type</span>         | Null | Key | Default | Extra |</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">| <span class="built_in">id</span>      | <span class="built_in">int</span>(<span class="number">11</span>)      | NO   | PRI | NULL    |       |</span><br><span class="line">| name    | varchar(<span class="number">20</span>)  | YES  |     | NULL    |       |</span><br><span class="line">| comment | varchar(<span class="number">100</span>) | YES  |     | NULL    |       |</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–¹æ³•ä¸‰ï¼šåœ¨æ‰€æœ‰å­—æ®µåå•ç‹¬å®šä¹‰primary key</span></span><br><span class="line">create table department3(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">name varchar(<span class="number">20</span>),</span><br><span class="line">comment varchar(<span class="number">100</span>),</span><br><span class="line">constraint pk_name primary key(<span class="built_in">id</span>); <span class="comment">#åˆ›å»ºä¸»é”®å¹¶ä¸ºå…¶å‘½åpk_name</span></span><br><span class="line"></span><br><span class="line">mysql&gt; desc department3;</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field   | <span class="type">Type</span>         | Null | Key | Default | Extra |</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">| <span class="built_in">id</span>      | <span class="built_in">int</span>(<span class="number">11</span>)      | NO   | PRI | NULL    |       |</span><br><span class="line">| name    | varchar(<span class="number">20</span>)  | YES  |     | NULL    |       |</span><br><span class="line">| comment | varchar(<span class="number">100</span>) | YES  |     | NULL    |       |</span><br><span class="line">+---------+--------------+------+-----+---------+-------+</span><br><span class="line">rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>

<p>å¤šåˆ—ä¸»é”®</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">==================å¤šåˆ—åšä¸»é”®================</span><br><span class="line">create table service(</span><br><span class="line">ip varchar(<span class="number">15</span>),</span><br><span class="line">port char(<span class="number">5</span>),</span><br><span class="line">service_name varchar(<span class="number">10</span>) <span class="keyword">not</span> null,</span><br><span class="line">primary key(ip,port)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; desc service;</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field        | <span class="type">Type</span>        | Null | Key | Default | Extra |</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line">| ip           | varchar(<span class="number">15</span>) | NO   | PRI | NULL    |       |</span><br><span class="line">| port         | char(<span class="number">5</span>)     | NO   | PRI | NULL    |       |</span><br><span class="line">| service_name | varchar(<span class="number">10</span>) | NO   |     | NULL    |       |</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line"><span class="number">3</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into service values</span><br><span class="line">    -&gt; (<span class="string">&#x27;172.16.45.10&#x27;</span>,<span class="string">&#x27;3306&#x27;</span>,<span class="string">&#x27;mysqld&#x27;</span>),</span><br><span class="line">    -&gt; (<span class="string">&#x27;172.16.45.11&#x27;</span>,<span class="string">&#x27;3306&#x27;</span>,<span class="string">&#x27;mariadb&#x27;</span>)</span><br><span class="line">    -&gt; ;</span><br><span class="line">Query OK, <span class="number">2</span> rows affected (<span class="number">0.00</span> sec)</span><br><span class="line">Records: <span class="number">2</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql&gt; insert into service values (<span class="string">&#x27;172.16.45.10&#x27;</span>,<span class="string">&#x27;3306&#x27;</span>,<span class="string">&#x27;nginx&#x27;</span>);</span><br><span class="line">ERROR <span class="number">1062</span> (<span class="number">23000</span>): Duplicate entry <span class="string">&#x27;172.16.45.10-3306&#x27;</span> <span class="keyword">for</span> key <span class="string">&#x27;PRIMARY&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="äº”-auto-increment"><a href="#äº”-auto-increment" class="headerlink" title="äº” auto_increment"></a>äº” auto_increment</h3><p>çº¦æŸå­—æ®µä¸ºè‡ªåŠ¨å¢é•¿ï¼Œè¢«çº¦æŸçš„å­—æ®µå¿…é¡»åŒæ—¶è¢«keyçº¦æŸ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¸æŒ‡å®šidï¼Œåˆ™è‡ªåŠ¨å¢é•¿</span></span><br><span class="line">create table student(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">name varchar(<span class="number">20</span>),</span><br><span class="line">sex enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>) default <span class="string">&#x27;male&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; desc student;</span><br><span class="line">+-------+-----------------------+------+-----+---------+----------------+</span><br><span class="line">| Field | <span class="type">Type</span>                  | Null | Key | Default | Extra          |</span><br><span class="line">+-------+-----------------------+------+-----+---------+----------------+</span><br><span class="line">| <span class="built_in">id</span>    | <span class="built_in">int</span>(<span class="number">11</span>)               | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| name  | varchar(<span class="number">20</span>)           | YES  |     | NULL    |                |</span><br><span class="line">| sex   | enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>) | YES  |     | male    |                |</span><br><span class="line">+-------+-----------------------+------+-----+---------+----------------+</span><br><span class="line">mysql&gt; insert into student(name) values</span><br><span class="line">    -&gt; (<span class="string">&#x27;egon&#x27;</span>),</span><br><span class="line">    -&gt; (<span class="string">&#x27;alex&#x27;</span>)</span><br><span class="line">    -&gt; ;</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> student;</span><br><span class="line">+----+------+------+</span><br><span class="line">| <span class="built_in">id</span> | name | sex  |</span><br><span class="line">+----+------+------+</span><br><span class="line">|  <span class="number">1</span> | egon | male |</span><br><span class="line">|  <span class="number">2</span> | alex | male |</span><br><span class="line">+----+------+------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¹Ÿå¯ä»¥æŒ‡å®šid</span></span><br><span class="line">mysql&gt; insert into student values(<span class="number">4</span>,<span class="string">&#x27;asb&#x27;</span>,<span class="string">&#x27;female&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into student values(<span class="number">7</span>,<span class="string">&#x27;wsb&#x27;</span>,<span class="string">&#x27;female&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> student;</span><br><span class="line">+----+------+--------+</span><br><span class="line">| <span class="built_in">id</span> | name | sex    |</span><br><span class="line">+----+------+--------+</span><br><span class="line">|  <span class="number">1</span> | egon | male   |</span><br><span class="line">|  <span class="number">2</span> | alex | male   |</span><br><span class="line">|  <span class="number">4</span> | asb  | female |</span><br><span class="line">|  <span class="number">7</span> | wsb  | female |</span><br><span class="line">+----+------+--------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¯¹äºè‡ªå¢çš„å­—æ®µï¼Œåœ¨ç”¨deleteåˆ é™¤åï¼Œå†æ’å…¥å€¼ï¼Œè¯¥å­—æ®µä»æŒ‰ç…§åˆ é™¤å‰çš„ä½ç½®ç»§ç»­å¢é•¿</span></span><br><span class="line">mysql&gt; delete <span class="keyword">from</span> student;</span><br><span class="line">Query OK, <span class="number">4</span> rows affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> student;</span><br><span class="line">Empty <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into student(name) values(<span class="string">&#x27;ysb&#x27;</span>);</span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> student;</span><br><span class="line">+----+------+------+</span><br><span class="line">| <span class="built_in">id</span> | name | sex  |</span><br><span class="line">+----+------+------+</span><br><span class="line">|  <span class="number">8</span> | ysb  | male |</span><br><span class="line">+----+------+------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#åº”è¯¥ç”¨truncateæ¸…ç©ºè¡¨ï¼Œæ¯”èµ·deleteä¸€æ¡ä¸€æ¡åœ°åˆ é™¤è®°å½•ï¼Œtruncateæ˜¯ç›´æ¥æ¸…ç©ºè¡¨ï¼Œåœ¨åˆ é™¤å¤§è¡¨æ—¶ç”¨å®ƒ</span></span><br><span class="line">mysql&gt; truncate student;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into student(name) values(<span class="string">&#x27;egon&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> student;</span><br><span class="line">+----+------+------+</span><br><span class="line">| <span class="built_in">id</span> | name | sex  |</span><br><span class="line">+----+------+------+</span><br><span class="line">|  <span class="number">1</span> | egon | male |</span><br><span class="line">+----+------+------+</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>äº†è§£çŸ¥è¯†</p>
<p>æ­¥é•¿:auto_increment_increment,èµ·å§‹åç§»é‡:auto_increment_offset</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åœ¨åˆ›å»ºå®Œè¡¨åï¼Œä¿®æ”¹è‡ªå¢å­—æ®µçš„èµ·å§‹å€¼</span></span><br><span class="line">mysql&gt; create table student(</span><br><span class="line">    -&gt; <span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    -&gt; name varchar(<span class="number">20</span>),</span><br><span class="line">    -&gt; sex enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>) default <span class="string">&#x27;male&#x27;</span></span><br><span class="line">    -&gt; );</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table student auto_increment=<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table student;</span><br><span class="line">.......</span><br><span class="line">ENGINE=InnoDB AUTO_INCREMENT=<span class="number">3</span> DEFAULT CHARSET=utf8</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into student(name) values(<span class="string">&#x27;egon&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> student;</span><br><span class="line">+----+------+------+</span><br><span class="line">| <span class="built_in">id</span> | name | sex  |</span><br><span class="line">+----+------+------+</span><br><span class="line">|  <span class="number">3</span> | egon | male |</span><br><span class="line">+----+------+------+</span><br><span class="line">row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show create table student;</span><br><span class="line">.......</span><br><span class="line">ENGINE=InnoDB AUTO_INCREMENT=<span class="number">4</span> DEFAULT CHARSET=utf8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¹Ÿå¯ä»¥åˆ›å»ºè¡¨æ—¶æŒ‡å®šauto_incrementçš„åˆå§‹å€¼ï¼Œæ³¨æ„åˆå§‹å€¼çš„è®¾ç½®ä¸ºè¡¨é€‰é¡¹ï¼Œåº”è¯¥æ”¾åˆ°æ‹¬å·å¤–</span></span><br><span class="line">create table student(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">name varchar(<span class="number">20</span>),</span><br><span class="line">sex enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>) default <span class="string">&#x27;male&#x27;</span></span><br><span class="line">)auto_increment=<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®æ­¥é•¿</span></span><br><span class="line">sqlserverï¼šè‡ªå¢æ­¥é•¿</span><br><span class="line">    åŸºäºè¡¨çº§åˆ«</span><br><span class="line">    create table t1ï¼ˆ</span><br><span class="line">        <span class="built_in">id</span> <span class="built_in">int</span>ã€‚ã€‚ã€‚</span><br><span class="line">    ï¼‰engine=innodb,auto_increment=<span class="number">2</span> æ­¥é•¿=<span class="number">2</span> default charset=utf8</span><br><span class="line"></span><br><span class="line">mysqlè‡ªå¢çš„æ­¥é•¿ï¼š</span><br><span class="line">    show session variables like <span class="string">&#x27;auto_inc%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#åŸºäºä¼šè¯çº§åˆ«</span></span><br><span class="line">    <span class="built_in">set</span> session auth_increment_increment=<span class="number">2</span> <span class="comment">#ä¿®æ”¹ä¼šè¯çº§åˆ«çš„æ­¥é•¿</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#åŸºäºå…¨å±€çº§åˆ«çš„</span></span><br><span class="line">    <span class="built_in">set</span> <span class="keyword">global</span> auth_increment_increment=<span class="number">2</span> <span class="comment">#ä¿®æ”¹å…¨å±€çº§åˆ«çš„æ­¥é•¿ï¼ˆæ‰€æœ‰ä¼šè¯éƒ½ç”Ÿæ•ˆï¼‰</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ï¼ï¼ï¼æ³¨æ„äº†æ³¨æ„äº†æ³¨æ„äº†ï¼ï¼ï¼</span></span><br><span class="line">If the value of auto_increment_offset <span class="keyword">is</span> greater than that of auto_increment_increment, the value of auto_increment_offset <span class="keyword">is</span> ignored. </span><br><span class="line">ç¿»è¯‘ï¼šå¦‚æœauto_increment_offsetçš„å€¼å¤§äºauto_increment_incrementçš„å€¼ï¼Œåˆ™auto_increment_offsetçš„å€¼ä¼šè¢«å¿½ç•¥ ï¼Œè¿™ç›¸å½“äºç¬¬ä¸€æ­¥æ­¥å­å°±è¿ˆå¤§äº†ï¼Œæ‰¯ç€äº†è›‹</span><br><span class="line">æ¯”å¦‚ï¼šè®¾ç½®auto_increment_offset=<span class="number">3</span>ï¼Œauto_increment_increment=<span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="built_in">set</span> <span class="keyword">global</span> auto_increment_increment=<span class="number">5</span>;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="built_in">set</span> <span class="keyword">global</span> auto_increment_offset=<span class="number">3</span>;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like <span class="string">&#x27;auto_incre%&#x27;</span>; <span class="comment">#éœ€è¦é€€å‡ºé‡æ–°ç™»å½•</span></span><br><span class="line">+--------------------------+-------+</span><br><span class="line">| Variable_name            | Value |</span><br><span class="line">+--------------------------+-------+</span><br><span class="line">| auto_increment_increment | <span class="number">1</span>     |</span><br><span class="line">| auto_increment_offset    | <span class="number">1</span>     |</span><br><span class="line">+--------------------------+-------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">create table student(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">name varchar(<span class="number">20</span>),</span><br><span class="line">sex enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>) default <span class="string">&#x27;male&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into student(name) values(<span class="string">&#x27;egon1&#x27;</span>),(<span class="string">&#x27;egon2&#x27;</span>),(<span class="string">&#x27;egon3&#x27;</span>);</span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> student;</span><br><span class="line">+----+-------+------+</span><br><span class="line">| <span class="built_in">id</span> | name  | sex  |</span><br><span class="line">+----+-------+------+</span><br><span class="line">|  <span class="number">3</span> | egon1 | male |</span><br><span class="line">|  <span class="number">8</span> | egon2 | male |</span><br><span class="line">| <span class="number">13</span> | egon3 | male |</span><br><span class="line">+----+-------+------+</span><br></pre></td></tr></table></figure>

<h3 id="å…­-foreign-key"><a href="#å…­-foreign-key" class="headerlink" title="å…­ foreign key"></a>å…­ foreign key</h3><p><strong>ä¸€ å¿«é€Ÿç†è§£foreign key</strong></p>
<p>å‘˜å·¥ä¿¡æ¯è¡¨æœ‰ä¸‰ä¸ªå­—æ®µï¼šå·¥å· å§“å éƒ¨é—¨</p>
<p>å…¬å¸æœ‰3ä¸ªéƒ¨é—¨ï¼Œä½†æ˜¯æœ‰1ä¸ªäº¿çš„å‘˜å·¥ï¼Œé‚£æ„å‘³ç€éƒ¨é—¨è¿™ä¸ªå­—æ®µéœ€è¦é‡å¤å­˜å‚¨ï¼Œéƒ¨é—¨åå­—è¶Šé•¿ï¼Œè¶Šæµªè´¹</p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<p>æˆ‘ä»¬å®Œå…¨å¯ä»¥å®šä¹‰ä¸€ä¸ªéƒ¨é—¨è¡¨</p>
<p>ç„¶åè®©å‘˜å·¥ä¿¡æ¯è¡¨å…³è”è¯¥è¡¨ï¼Œå¦‚ä½•å…³è”ï¼Œå³foreign key</p>
<p>ç¤ºèŒƒ</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#è¡¨ç±»å‹å¿…é¡»æ˜¯innodbå­˜å‚¨å¼•æ“ï¼Œä¸”è¢«å…³è”çš„å­—æ®µï¼Œå³<span class="keyword">references</span>æŒ‡å®šçš„å¦å¤–ä¸€ä¸ªè¡¨çš„å­—æ®µï¼Œå¿…é¡»ä¿è¯å”¯ä¸€</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> department(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">)engine<span class="operator">=</span>innodb;</span><br><span class="line"></span><br><span class="line">#dpt_idå¤–é”®ï¼Œå…³è”çˆ¶è¡¨ï¼ˆdepartmentä¸»é”®idï¼‰ï¼ŒåŒæ­¥æ›´æ–°ï¼ŒåŒæ­¥åˆ é™¤</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> employee(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key,</span><br><span class="line">name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">dpt_id <span class="type">int</span>,</span><br><span class="line"><span class="keyword">constraint</span> fk_name <span class="keyword">foreign</span> key(dpt_id)</span><br><span class="line"><span class="keyword">references</span> department(id)</span><br><span class="line"><span class="keyword">on</span> <span class="keyword">delete</span> cascade</span><br><span class="line"><span class="keyword">on</span> update cascade </span><br><span class="line">)engine<span class="operator">=</span>innodb;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#å…ˆå¾€çˆ¶è¡¨departmentä¸­æ’å…¥è®°å½•</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> department <span class="keyword">values</span></span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;æ¬§å¾·åšçˆ±æŠ€æœ¯æœ‰é™äº‹ä¸šéƒ¨&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;è‰¾åˆ©å…‹æ–¯äººåŠ›èµ„æºéƒ¨&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;é”€å”®éƒ¨&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#å†å¾€å­è¡¨employeeä¸­æ’å…¥è®°å½•</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> employee <span class="keyword">values</span></span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;egon&#x27;</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;alex1&#x27;</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;alex2&#x27;</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="number">4</span>,<span class="string">&#x27;alex3&#x27;</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="number">5</span>,<span class="string">&#x27;æå¦å…‹&#x27;</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="number">6</span>,<span class="string">&#x27;åˆ˜é£æœº&#x27;</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="number">7</span>,<span class="string">&#x27;å¼ ç«ç®­&#x27;</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="number">8</span>,<span class="string">&#x27;æ—å­å¼¹&#x27;</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="number">9</span>,<span class="string">&#x27;åŠ ç‰¹æ—&#x27;</span>,<span class="number">3</span>)</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#åˆ çˆ¶è¡¨departmentï¼Œå­è¡¨employeeä¸­å¯¹åº”çš„è®°å½•è·Ÿç€åˆ </span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">delete</span> <span class="keyword">from</span> department <span class="keyword">where</span> id<span class="operator">=</span><span class="number">3</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+--------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name  <span class="operator">|</span> dpt_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> egon  <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> alex1 <span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> alex2 <span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> alex3 <span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+--------+</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#æ›´æ–°çˆ¶è¡¨departmentï¼Œå­è¡¨employeeä¸­å¯¹åº”çš„è®°å½•è·Ÿç€æ”¹</span><br><span class="line">mysql<span class="operator">&gt;</span> update department <span class="keyword">set</span> id<span class="operator">=</span><span class="number">22222</span> <span class="keyword">where</span> id<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+--------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name  <span class="operator">|</span> dpt_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> egon  <span class="operator">|</span>      <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> alex2 <span class="operator">|</span>  <span class="number">22222</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">4</span> <span class="operator">|</span> alex3 <span class="operator">|</span>  <span class="number">22222</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">5</span> <span class="operator">|</span> alex1 <span class="operator">|</span>  <span class="number">22222</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+-------+--------+</span></span><br></pre></td></tr></table></figure>

<p><strong>äºŒ å¦‚ä½•æ‰¾å‡ºä¸¤å¼ è¡¨ä¹‹é—´çš„å…³ç³»</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">åˆ†ææ­¥éª¤ï¼š</span><br><span class="line">#<span class="number">1</span>ã€å…ˆç«™åœ¨å·¦è¡¨çš„è§’åº¦å»æ‰¾</span><br><span class="line">æ˜¯å¦å·¦è¡¨çš„å¤šæ¡è®°å½•å¯ä»¥å¯¹åº”å³è¡¨çš„ä¸€æ¡è®°å½•ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¯æ˜å·¦è¡¨çš„ä¸€ä¸ªå­—æ®µ<span class="keyword">foreign</span> key å³è¡¨ä¸€ä¸ªå­—æ®µï¼ˆé€šå¸¸æ˜¯idï¼‰</span><br><span class="line"></span><br><span class="line">#<span class="number">2</span>ã€å†ç«™åœ¨å³è¡¨çš„è§’åº¦å»æ‰¾</span><br><span class="line">æ˜¯å¦å³è¡¨çš„å¤šæ¡è®°å½•å¯ä»¥å¯¹åº”å·¦è¡¨çš„ä¸€æ¡è®°å½•ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¯æ˜å³è¡¨çš„ä¸€ä¸ªå­—æ®µ<span class="keyword">foreign</span> key å·¦è¡¨ä¸€ä¸ªå­—æ®µï¼ˆé€šå¸¸æ˜¯idï¼‰</span><br><span class="line"></span><br><span class="line">#<span class="number">3</span>ã€æ€»ç»“ï¼š</span><br><span class="line">#å¤šå¯¹ä¸€ï¼š</span><br><span class="line">å¦‚æœåªæœ‰æ­¥éª¤<span class="number">1</span>æˆç«‹ï¼Œåˆ™æ˜¯å·¦è¡¨å¤šå¯¹ä¸€å³è¡¨</span><br><span class="line">å¦‚æœåªæœ‰æ­¥éª¤<span class="number">2</span>æˆç«‹ï¼Œåˆ™æ˜¯å³è¡¨å¤šå¯¹ä¸€å·¦è¡¨</span><br><span class="line"></span><br><span class="line">#å¤šå¯¹å¤š</span><br><span class="line">å¦‚æœæ­¥éª¤<span class="number">1</span>å’Œ<span class="number">2</span>åŒæ—¶æˆç«‹ï¼Œåˆ™è¯æ˜è¿™ä¸¤å¼ è¡¨æ—¶ä¸€ä¸ªåŒå‘çš„å¤šå¯¹ä¸€ï¼Œå³å¤šå¯¹å¤š,éœ€è¦å®šä¹‰ä¸€ä¸ªè¿™ä¸¤å¼ è¡¨çš„å…³ç³»è¡¨æ¥ä¸“é—¨å­˜æ”¾äºŒè€…çš„å…³ç³»</span><br><span class="line"></span><br><span class="line">#ä¸€å¯¹ä¸€:</span><br><span class="line">å¦‚æœ<span class="number">1</span>å’Œ<span class="number">2</span>éƒ½ä¸æˆç«‹ï¼Œè€Œæ˜¯å·¦è¡¨çš„ä¸€æ¡è®°å½•å”¯ä¸€å¯¹åº”å³è¡¨çš„ä¸€æ¡è®°å½•ï¼Œåä¹‹äº¦ç„¶ã€‚è¿™ç§æƒ…å†µå¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨å·¦è¡¨<span class="keyword">foreign</span> keyå³è¡¨çš„åŸºç¡€ä¸Šï¼Œå°†å·¦è¡¨çš„å¤–é”®å­—æ®µè®¾ç½®æˆ<span class="keyword">unique</span>å³å¯</span><br></pre></td></tr></table></figure>

<p><strong>ä¸‰ å»ºç«‹è¡¨ä¹‹é—´çš„å…³ç³»</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¸€å¯¹å¤šæˆ–ç§°ä¸ºå¤šå¯¹ä¸€</span></span><br><span class="line">ä¸‰å¼ è¡¨ï¼šå‡ºç‰ˆç¤¾ï¼Œä½œè€…ä¿¡æ¯ï¼Œä¹¦</span><br><span class="line"></span><br><span class="line">ä¸€å¯¹å¤šï¼ˆæˆ–å¤šå¯¹ä¸€ï¼‰ï¼šä¸€ä¸ªå‡ºç‰ˆç¤¾å¯ä»¥å‡ºç‰ˆå¤šæœ¬ä¹¦</span><br><span class="line"></span><br><span class="line">å…³è”æ–¹å¼ï¼šforeign key</span><br><span class="line">=====================å¤šå¯¹ä¸€=====================</span><br><span class="line">create table press(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">name varchar(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table book(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">name varchar(<span class="number">20</span>),</span><br><span class="line">press_id <span class="built_in">int</span> <span class="keyword">not</span> null,</span><br><span class="line">foreign key(press_id) references press(<span class="built_in">id</span>)</span><br><span class="line">on delete cascade</span><br><span class="line">on update cascade</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">insert into press(name) values</span><br><span class="line">(<span class="string">&#x27;åŒ—äº¬å·¥ä¸šåœ°é›·å‡ºç‰ˆç¤¾&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;äººæ°‘éŸ³ä¹ä¸å¥½å¬å‡ºç‰ˆç¤¾&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;çŸ¥è¯†äº§æƒæ²¡æœ‰ç”¨å‡ºç‰ˆç¤¾&#x27;</span>)</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">insert into book(name,press_id) values</span><br><span class="line">(<span class="string">&#x27;ä¹é˜³ç¥åŠŸ&#x27;</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="string">&#x27;ä¹é˜´çœŸç»&#x27;</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">&#x27;ä¹é˜´ç™½éª¨çˆª&#x27;</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">&#x27;ç‹¬å­¤ä¹å‰‘&#x27;</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="string">&#x27;é™é¾™åå·´æŒ&#x27;</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">&#x27;è‘µèŠ±å®å…¸&#x27;</span>,<span class="number">3</span>)</span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<p>å…¶ä»–ä¾‹å­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ä¸€å¤«å¤šå¦»åˆ¶</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦»å­è¡¨çš„ä¸ˆå¤«idå¤–é”®åˆ°ä¸ˆå¤«è¡¨çš„id</span></span><br><span class="line"><span class="comment">#å¤šå¯¹å¤š</span></span><br><span class="line">ä¸‰å¼ è¡¨ï¼šå‡ºç‰ˆç¤¾ï¼Œä½œè€…ä¿¡æ¯ï¼Œä¹¦</span><br><span class="line"></span><br><span class="line">å¤šå¯¹å¤šï¼šä¸€ä¸ªä½œè€…å¯ä»¥å†™å¤šæœ¬ä¹¦ï¼Œä¸€æœ¬ä¹¦ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªä½œè€…ï¼ŒåŒå‘çš„ä¸€å¯¹å¤šï¼Œå³å¤šå¯¹å¤š</span><br><span class="line">ã€€ã€€</span><br><span class="line">å…³è”æ–¹å¼ï¼šforeign key+ä¸€å¼ æ–°çš„è¡¨</span><br><span class="line">=====================å¤šå¯¹å¤š=====================</span><br><span class="line">create table author(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">name varchar(<span class="number">20</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿™å¼ è¡¨å°±å­˜æ”¾ä½œè€…è¡¨ä¸ä¹¦è¡¨çš„å…³ç³»ï¼Œå³æŸ¥è¯¢äºŒè€…çš„å…³ç³»æŸ¥è¿™è¡¨å°±å¯ä»¥äº†</span></span><br><span class="line">create table author2book(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> <span class="keyword">not</span> null unique auto_increment,</span><br><span class="line">author_id <span class="built_in">int</span> <span class="keyword">not</span> null,</span><br><span class="line">book_id <span class="built_in">int</span> <span class="keyword">not</span> null,</span><br><span class="line">constraint fk_author foreign key(author_id) references author(<span class="built_in">id</span>)</span><br><span class="line">on delete cascade</span><br><span class="line">on update cascade,</span><br><span class="line">constraint fk_book foreign key(book_id) references book(<span class="built_in">id</span>)</span><br><span class="line">on delete cascade</span><br><span class="line">on update cascade,</span><br><span class="line">primary key(author_id,book_id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ’å…¥å››ä¸ªä½œè€…ï¼Œidä¾æ¬¡æ’å¼€</span></span><br><span class="line">insert into author(name) values(<span class="string">&#x27;egon&#x27;</span>),(<span class="string">&#x27;alex&#x27;</span>),(<span class="string">&#x27;yuanhao&#x27;</span>),(<span class="string">&#x27;wpq&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¯ä¸ªä½œè€…ä¸è‡ªå·±çš„ä»£è¡¨ä½œå¦‚ä¸‹</span></span><br><span class="line"><span class="number">1</span> egon: </span><br><span class="line">      <span class="number">1</span> ä¹é˜³ç¥åŠŸ</span><br><span class="line">      <span class="number">2</span> ä¹é˜´çœŸç»</span><br><span class="line">      <span class="number">3</span> ä¹é˜´ç™½éª¨çˆª</span><br><span class="line">      <span class="number">4</span> ç‹¬å­¤ä¹å‰‘</span><br><span class="line">      <span class="number">5</span> é™é¾™åå·´æŒ</span><br><span class="line">      <span class="number">6</span> è‘µèŠ±å®å…¸</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2</span> alex: </span><br><span class="line">      <span class="number">1</span> ä¹é˜³ç¥åŠŸ</span><br><span class="line">      <span class="number">6</span> è‘µèŠ±å®å…¸</span><br><span class="line"></span><br><span class="line"><span class="number">3</span> yuanhao:</span><br><span class="line">      <span class="number">4</span> ç‹¬å­¤ä¹å‰‘</span><br><span class="line">      <span class="number">5</span> é™é¾™åå·´æŒ</span><br><span class="line">      <span class="number">6</span> è‘µèŠ±å®å…¸</span><br><span class="line"></span><br><span class="line"><span class="number">4</span> wpq:</span><br><span class="line">      <span class="number">1</span> ä¹é˜³ç¥åŠŸ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">insert into author2book(author_id,book_id) values</span><br><span class="line">(<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">1</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="number">1</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="number">1</span>,<span class="number">4</span>),</span><br><span class="line">(<span class="number">1</span>,<span class="number">5</span>),</span><br><span class="line">(<span class="number">1</span>,<span class="number">6</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="number">6</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="number">4</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="number">5</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="number">6</span>),</span><br><span class="line">(<span class="number">4</span>,<span class="number">1</span>)</span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<p>å…¶ä»–ä¾‹å­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">å•å¼ è¡¨ï¼šç”¨æˆ·è¡¨+ç›¸äº²å…³ç³»è¡¨ï¼Œç›¸å½“äºï¼šç”¨æˆ·è¡¨+ç›¸äº²å…³ç³»è¡¨+ç”¨æˆ·è¡¨</span><br><span class="line">å¤šå¼ è¡¨ï¼šç”¨æˆ·è¡¨+ç”¨æˆ·ä¸ä¸»æœºå…³ç³»è¡¨+ä¸»æœºè¡¨</span><br><span class="line"></span><br><span class="line">ä¸­é—´é‚£ä¸€å¼ å­˜æ”¾å…³ç³»çš„è¡¨ï¼Œå¯¹å¤–å…³è”çš„å­—æ®µå¯ä»¥è”åˆå”¯ä¸€</span><br><span class="line"><span class="comment">#ä¸€å¯¹ä¸€</span></span><br><span class="line">ä¸¤å¼ è¡¨ï¼šå­¦ç”Ÿè¡¨å’Œå®¢æˆ·è¡¨</span><br><span class="line"></span><br><span class="line">ä¸€å¯¹ä¸€ï¼šä¸€ä¸ªå­¦ç”Ÿæ˜¯ä¸€ä¸ªå®¢æˆ·ï¼Œä¸€ä¸ªå®¢æˆ·æœ‰å¯èƒ½å˜æˆä¸€ä¸ªå­¦æ ¡ï¼Œå³ä¸€å¯¹ä¸€çš„å…³ç³»</span><br><span class="line"></span><br><span class="line">å…³è”æ–¹å¼ï¼šforeign key+unique</span><br><span class="line"><span class="comment">#ä¸€å®šæ˜¯studentæ¥foreign keyè¡¨customerï¼Œè¿™æ ·å°±ä¿è¯äº†ï¼š</span></span><br><span class="line"><span class="comment">#1 å­¦ç”Ÿä¸€å®šæ˜¯ä¸€ä¸ªå®¢æˆ·ï¼Œ</span></span><br><span class="line"><span class="comment">#2 å®¢æˆ·ä¸ä¸€å®šæ˜¯å­¦ç”Ÿï¼Œä½†æœ‰å¯èƒ½æˆä¸ºä¸€ä¸ªå­¦ç”Ÿ</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">create table customer(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">name varchar(<span class="number">20</span>) <span class="keyword">not</span> null,</span><br><span class="line">qq varchar(<span class="number">10</span>) <span class="keyword">not</span> null,</span><br><span class="line">phone char(<span class="number">16</span>) <span class="keyword">not</span> null</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">create table student(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">class_name varchar(<span class="number">20</span>) <span class="keyword">not</span> null,</span><br><span class="line">customer_id <span class="built_in">int</span> unique, <span class="comment">#è¯¥å­—æ®µä¸€å®šè¦æ˜¯å”¯ä¸€çš„</span></span><br><span class="line">foreign key(customer_id) references customer(<span class="built_in">id</span>) <span class="comment">#å¤–é”®çš„å­—æ®µä¸€å®šè¦ä¿è¯unique</span></span><br><span class="line">on delete cascade</span><br><span class="line">on update cascade</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¢åŠ å®¢æˆ·</span></span><br><span class="line">insert into customer(name,qq,phone) values</span><br><span class="line">(<span class="string">&#x27;æé£æœº&#x27;</span>,<span class="string">&#x27;31811231&#x27;</span>,<span class="number">13811341220</span>),</span><br><span class="line">(<span class="string">&#x27;ç‹å¤§ç‚®&#x27;</span>,<span class="string">&#x27;123123123&#x27;</span>,<span class="number">15213146809</span>),</span><br><span class="line">(<span class="string">&#x27;å®ˆæ¦´å¼¹&#x27;</span>,<span class="string">&#x27;283818181&#x27;</span>,<span class="number">1867141331</span>),</span><br><span class="line">(<span class="string">&#x27;å´å¦å…‹&#x27;</span>,<span class="string">&#x27;283818181&#x27;</span>,<span class="number">1851143312</span>),</span><br><span class="line">(<span class="string">&#x27;èµ¢ç«ç®­&#x27;</span>,<span class="string">&#x27;888818181&#x27;</span>,<span class="number">1861243314</span>),</span><br><span class="line">(<span class="string">&#x27;æˆ˜åœ°é›·&#x27;</span>,<span class="string">&#x27;112312312&#x27;</span>,<span class="number">18811431230</span>)</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¢åŠ å­¦ç”Ÿ</span></span><br><span class="line">insert into student(class_name,customer_id) values</span><br><span class="line">(<span class="string">&#x27;è„±äº§3ç­&#x27;</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="string">&#x27;å‘¨æœ«19æœŸ&#x27;</span>,<span class="number">4</span>),</span><br><span class="line">(<span class="string">&#x27;å‘¨æœ«19æœŸ&#x27;</span>,<span class="number">5</span>)</span><br><span class="line">;</span><br></pre></td></tr></table></figure>

<p>å…¶ä»–ä¾‹å­</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ä¾‹ä¸€ï¼šä¸€ä¸ªç”¨æˆ·åªæœ‰ä¸€ä¸ªåšå®¢</span><br><span class="line"></span><br><span class="line">    ç”¨æˆ·è¡¨ï¼š</span><br><span class="line">    <span class="built_in">id</span>  name</span><br><span class="line">    <span class="number">1</span>    egon</span><br><span class="line">    <span class="number">2</span>    alex</span><br><span class="line">    <span class="number">3</span>    wupeiqi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    åšå®¢è¡¨   </span><br><span class="line">           fk+unique</span><br><span class="line">    <span class="built_in">id</span> url name_id</span><br><span class="line">    <span class="number">1</span>  xxxx   <span class="number">1</span></span><br><span class="line">    <span class="number">2</span>  yyyy   <span class="number">3</span></span><br><span class="line">    <span class="number">3</span>  zzz    <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä¾‹äºŒï¼šä¸€ä¸ªç®¡ç†å‘˜å”¯ä¸€å¯¹åº”ä¸€ä¸ªç”¨æˆ·</span><br><span class="line">    ç”¨æˆ·è¡¨ï¼š</span><br><span class="line">    <span class="built_in">id</span> user  password</span><br><span class="line">    <span class="number">1</span>  egon    xxxx</span><br><span class="line">    <span class="number">2</span>  alex    yyyy</span><br><span class="line"></span><br><span class="line">    ç®¡ç†å‘˜è¡¨ï¼š</span><br><span class="line">       fk+unique</span><br><span class="line">    <span class="built_in">id</span> user_id password</span><br><span class="line">    <span class="number">1</span>   <span class="number">1</span>      xxxxx</span><br><span class="line">    <span class="number">2</span>   <span class="number">2</span>      yyyyy</span><br></pre></td></tr></table></figure>

<h3 id="ä¸ƒ-ä½œä¸š"><a href="#ä¸ƒ-ä½œä¸š" class="headerlink" title="ä¸ƒ ä½œä¸š"></a>ä¸ƒ ä½œä¸š</h3><p>ç»ƒä¹ ï¼šè´¦å·ä¿¡æ¯è¡¨ï¼Œç”¨æˆ·ç»„ï¼Œä¸»æœºè¡¨ï¼Œä¸»æœºç»„</p>
<p>`&#96;&#96;sql</p>
<h2 id="ç”¨æˆ·è¡¨"><a href="#ç”¨æˆ·è¡¨" class="headerlink" title="ç”¨æˆ·è¡¨"></a>ç”¨æˆ·è¡¨</h2><p>create table user( id int not null unique auto_increment, username varchar(20) not null, password varchar(50) not null, primary key(username,password) );</p>
<p>insert into user(username,password) values (â€˜rootâ€™,â€™123â€™), (â€˜egonâ€™,â€™456â€™), (â€˜alexâ€™,â€™alex3714â€™) ;</p>
<h2 id="ç”¨æˆ·ç»„è¡¨"><a href="#ç”¨æˆ·ç»„è¡¨" class="headerlink" title="ç”¨æˆ·ç»„è¡¨"></a>ç”¨æˆ·ç»„è¡¨</h2><p>create table usergroup( id int primary key auto_increment, groupname varchar(20) not null unique );</p>
<p>insert into usergroup(groupname) values (â€˜ITâ€™), (â€˜Saleâ€™), (â€˜Financeâ€™), (â€˜bossâ€™) ;</p>
<h2 id="ä¸»æœºè¡¨"><a href="#ä¸»æœºè¡¨" class="headerlink" title="ä¸»æœºè¡¨"></a>ä¸»æœºè¡¨</h2><p>create table host( id int primary key auto_increment, ip char(15) not null unique default â€˜127.0.0.1â€™ );</p>
<p>insert into host(ip) values (â€˜172.16.45.2â€™), (â€˜172.16.31.10â€™), (â€˜172.16.45.3â€™), (â€˜172.16.31.11â€™), (â€˜172.10.45.3â€™), (â€˜172.10.45.4â€™), (â€˜172.10.45.5â€™), (â€˜192.168.1.20â€™), (â€˜192.168.1.21â€™), (â€˜192.168.1.22â€™), (â€˜192.168.2.23â€™), (â€˜192.168.2.223â€™), (â€˜192.168.2.24â€™), (â€˜192.168.3.22â€™), (â€˜192.168.3.23â€™), (â€˜192.168.3.24â€™) ;</p>
<h2 id="ä¸šåŠ¡çº¿è¡¨"><a href="#ä¸šåŠ¡çº¿è¡¨" class="headerlink" title="ä¸šåŠ¡çº¿è¡¨"></a>ä¸šåŠ¡çº¿è¡¨</h2><p>create table business( id int primary key auto_increment, business varchar(20) not null unique ); insert into business(business) values (â€˜è½»æ¾è´·â€™), (â€˜éšä¾¿èŠ±â€™), (â€˜å¤§å¯Œç¿â€™), (â€˜ç©·ä¸€ç”Ÿâ€™) ;</p>
<h2 id="å»ºå…³ç³»ï¼šuserä¸usergroup"><a href="#å»ºå…³ç³»ï¼šuserä¸usergroup" class="headerlink" title="å»ºå…³ç³»ï¼šuserä¸usergroup"></a>å»ºå…³ç³»ï¼šuserä¸usergroup</h2><p>create table user2usergroup( id int not null unique auto_increment, user_id int not null, group_id int not null, primary key(user_id,group_id), foreign key(user_id) references user(id), foreign key(group_id) references usergroup(id) );</p>
<p>insert into user2usergroup(user_id,group_id) values (1,1), (1,2), (1,3), (1,4), (2,3), (2,4), (3,4) ;</p>
<h2 id="å»ºå…³ç³»ï¼šhostä¸business"><a href="#å»ºå…³ç³»ï¼šhostä¸business" class="headerlink" title="å»ºå…³ç³»ï¼šhostä¸business"></a>å»ºå…³ç³»ï¼šhostä¸business</h2><p>create table host2business( id int not null unique auto_increment, host_id int not null, business_id int not null, primary key(host_id,business_id), foreign key(host_id) references host(id), foreign key(business_id) references business(id) );</p>
<p>insert into host2business(host_id,business_id) values (1,1), (1,2), (1,3), (2,2), (2,3), (3,4) ;</p>
<h2 id="å»ºå…³ç³»ï¼šuserä¸host"><a href="#å»ºå…³ç³»ï¼šuserä¸host" class="headerlink" title="å»ºå…³ç³»ï¼šuserä¸host"></a>å»ºå…³ç³»ï¼šuserä¸host</h2><p>create table user2host( id int not null unique auto_increment, user_id int not null, host_id int not null, primary key(user_id,host_id), foreign key(user_id) references user(id), foreign key(host_id) references host(id) );</p>
<p>insert into user2host(user_id,host_id) values (1,1), (1,2), (1,3), (1,4), (1,5), (1,6), (1,7), (1,8), (1,9), (1,10), (1,11), (1,12), (1,13), (1,14), (1,15), (1,16), (2,2), (2,3), (2,4), (2,5), (3,10), (3,11), (3,12) ; &#96;&#96;&#96;</p>
<p>ä½œä¸šï¼š</p>
<p><img src="https://pic2.zhimg.com/80/v2-2d0503bf35edfd78af1ec5f7b7d4669d_720w.jpg" alt="img"></p>
<h2 id="ä¸ƒ-ä¿®æ”¹è¡¨ALTER-TABLE"><a href="#ä¸ƒ-ä¿®æ”¹è¡¨ALTER-TABLE" class="headerlink" title="ä¸ƒ ä¿®æ”¹è¡¨ALTER TABLE"></a>ä¸ƒ ä¿®æ”¹è¡¨ALTER TABLE</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">è¯­æ³•ï¼š</span><br><span class="line"><span class="number">1.</span> ä¿®æ”¹è¡¨å</span><br><span class="line">      <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å </span><br><span class="line">                          RENAME æ–°è¡¨å;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> å¢åŠ å­—æ®µ</span><br><span class="line">      <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å</span><br><span class="line">                          <span class="keyword">ADD</span> å­—æ®µå  æ•°æ®ç±»å‹ [å®Œæ•´æ€§çº¦æŸæ¡ä»¶â€¦],</span><br><span class="line">                          <span class="keyword">ADD</span> å­—æ®µå  æ•°æ®ç±»å‹ [å®Œæ•´æ€§çº¦æŸæ¡ä»¶â€¦];</span><br><span class="line">      <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å</span><br><span class="line">                          <span class="keyword">ADD</span> å­—æ®µå  æ•°æ®ç±»å‹ [å®Œæ•´æ€§çº¦æŸæ¡ä»¶â€¦]  <span class="keyword">FIRST</span>;</span><br><span class="line">      <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å</span><br><span class="line">                          <span class="keyword">ADD</span> å­—æ®µå  æ•°æ®ç±»å‹ [å®Œæ•´æ€§çº¦æŸæ¡ä»¶â€¦]  AFTER å­—æ®µå;</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> åˆ é™¤å­—æ®µ</span><br><span class="line">      <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å </span><br><span class="line">                          <span class="keyword">DROP</span> å­—æ®µå;</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> ä¿®æ”¹å­—æ®µ</span><br><span class="line">      <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å </span><br><span class="line">                          MODIFY  å­—æ®µå æ•°æ®ç±»å‹ [å®Œæ•´æ€§çº¦æŸæ¡ä»¶â€¦];</span><br><span class="line">      <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å </span><br><span class="line">                          CHANGE æ—§å­—æ®µå æ–°å­—æ®µå æ—§æ•°æ®ç±»å‹ [å®Œæ•´æ€§çº¦æŸæ¡ä»¶â€¦];</span><br><span class="line">      <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> è¡¨å </span><br><span class="line">                          CHANGE æ—§å­—æ®µå æ–°å­—æ®µå æ–°æ•°æ®ç±»å‹ [å®Œæ•´æ€§çº¦æŸæ¡ä»¶â€¦];</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line"><span class="number">1.</span> ä¿®æ”¹å­˜å‚¨å¼•æ“</span><br><span class="line">mysql&gt; alter table service </span><br><span class="line">    -&gt; engine=innodb;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> æ·»åŠ å­—æ®µ</span><br><span class="line">mysql&gt; alter table student10</span><br><span class="line">    -&gt; add name varchar(<span class="number">20</span>) <span class="keyword">not</span> null,</span><br><span class="line">    -&gt; add age <span class="built_in">int</span>(<span class="number">3</span>) <span class="keyword">not</span> null default <span class="number">22</span>;</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table student10</span><br><span class="line">    -&gt; add stu_num varchar(<span class="number">10</span>) <span class="keyword">not</span> null after name;                //æ·»åŠ nameå­—æ®µä¹‹å</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table student10                        </span><br><span class="line">    -&gt; add sex enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>) default <span class="string">&#x27;male&#x27;</span> first;          //æ·»åŠ åˆ°æœ€å‰é¢</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> åˆ é™¤å­—æ®µ</span><br><span class="line">mysql&gt; alter table student10</span><br><span class="line">    -&gt; drop sex;</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table service</span><br><span class="line">    -&gt; drop mac;</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> ä¿®æ”¹å­—æ®µç±»å‹modify</span><br><span class="line">mysql&gt; alter table student10</span><br><span class="line">    -&gt; modify age <span class="built_in">int</span>(<span class="number">3</span>);</span><br><span class="line">mysql&gt; alter table student10</span><br><span class="line">    -&gt; modify <span class="built_in">id</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">not</span> null primary key auto_increment;    //ä¿®æ”¹ä¸ºä¸»é”®</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span> å¢åŠ çº¦æŸï¼ˆé’ˆå¯¹å·²æœ‰çš„ä¸»é”®å¢åŠ auto_incrementï¼‰</span><br><span class="line">mysql&gt; alter table student10 modify <span class="built_in">id</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">not</span> null primary key auto_increment;</span><br><span class="line">ERROR <span class="number">1068</span> (<span class="number">42000</span>): Multiple primary key defined</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table student10 modify <span class="built_in">id</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">not</span> null auto_increment;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.01</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="number">6.</span> å¯¹å·²ç»å­˜åœ¨çš„è¡¨å¢åŠ å¤åˆä¸»é”®</span><br><span class="line">mysql&gt; alter table service2</span><br><span class="line">    -&gt; add primary key(host_ip,port);        </span><br><span class="line"></span><br><span class="line"><span class="number">7.</span> å¢åŠ ä¸»é”®</span><br><span class="line">mysql&gt; alter table student1</span><br><span class="line">    -&gt; modify name varchar(<span class="number">10</span>) <span class="keyword">not</span> null primary key;</span><br><span class="line"></span><br><span class="line"><span class="number">8.</span> å¢åŠ ä¸»é”®å’Œè‡ªåŠ¨å¢é•¿</span><br><span class="line">mysql&gt; alter table student1</span><br><span class="line">    -&gt; modify <span class="built_in">id</span> <span class="built_in">int</span> <span class="keyword">not</span> null primary key auto_increment;</span><br><span class="line"></span><br><span class="line"><span class="number">9.</span> åˆ é™¤ä¸»é”®</span><br><span class="line">a. åˆ é™¤è‡ªå¢çº¦æŸ</span><br><span class="line">mysql&gt; alter table student10 modify <span class="built_in">id</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">not</span> null; </span><br><span class="line"></span><br><span class="line">b. åˆ é™¤ä¸»é”®</span><br><span class="line">mysql&gt; alter table student10                                 </span><br><span class="line">    -&gt; drop primary key;</span><br></pre></td></tr></table></figure>

<h2 id="å…«-å¤åˆ¶è¡¨"><a href="#å…«-å¤åˆ¶è¡¨" class="headerlink" title="å…« å¤åˆ¶è¡¨"></a>å…« å¤åˆ¶è¡¨</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">å¤åˆ¶è¡¨ç»“æ„ï¼‹è®°å½• ï¼ˆkeyä¸ä¼šå¤åˆ¶: ä¸»é”®ã€å¤–é”®å’Œç´¢å¼•ï¼‰</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">table</span> new_service <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> service;</span><br><span class="line"></span><br><span class="line">åªå¤åˆ¶è¡¨ç»“æ„</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> service <span class="keyword">where</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span>;        <span class="operator">/</span><span class="operator">/</span>æ¡ä»¶ä¸ºå‡ï¼ŒæŸ¥ä¸åˆ°ä»»ä½•è®°å½•</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">table</span> new1_service <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> service <span class="keyword">where</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span>;  </span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">table</span> t4 <span class="keyword">like</span> employees;</span><br></pre></td></tr></table></figure>

<h2 id="ä¹-åˆ é™¤è¡¨"><a href="#ä¹-åˆ é™¤è¡¨" class="headerlink" title="ä¹ åˆ é™¤è¡¨"></a>ä¹ åˆ é™¤è¡¨</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> è¡¨å;</span><br></pre></td></tr></table></figure>

<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av73346821?p=7">https://ww</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>43-æ•°æ®åº“ï¼ˆäº”ï¼‰</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/43_%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E3%80%81pymysql%E6%A8%A1%E5%9D%97/</url>
    <content><![CDATA[<h3 id="ä¸€-IDEå·¥å…·ä»‹ç»"><a href="#ä¸€-IDEå·¥å…·ä»‹ç»" class="headerlink" title="ä¸€ IDEå·¥å…·ä»‹ç»"></a>ä¸€ IDEå·¥å…·ä»‹ç»</h3><p>ç”Ÿäº§ç¯å¢ƒè¿˜æ˜¯æ¨èä½¿ç”¨mysqlå‘½ä»¤è¡Œï¼Œä½†ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æµ‹è¯•ï¼Œå¯ä»¥ä½¿ç”¨IDEå·¥å…·</p>
<p><a href="https://link.zhihu.com/?target=https://pan.baidu.com/s/1bpo5mqj">ä¸‹è½½é“¾æ¥ï¼šhttps://pan.baidu.com/s/1bpo5mqj</a></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">æŒæ¡ï¼š</span><br><span class="line"><span class="comment">#1. æµ‹è¯•+é“¾æ¥æ•°æ®åº“</span></span><br><span class="line"><span class="comment">#2. æ–°å»ºåº“</span></span><br><span class="line"><span class="comment">#3. æ–°å»ºè¡¨ï¼Œæ–°å¢å­—æ®µ+ç±»å‹+çº¦æŸ</span></span><br><span class="line"><span class="comment">#4. è®¾è®¡è¡¨ï¼šå¤–é”®</span></span><br><span class="line"><span class="comment">#5. æ–°å»ºæŸ¥è¯¢</span></span><br><span class="line"><span class="comment">#6. å¤‡ä»½åº“/è¡¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ³¨æ„ï¼š</span></span><br><span class="line">æ‰¹é‡åŠ æ³¨é‡Šï¼šctrl+ï¼Ÿé”®</span><br><span class="line">æ‰¹é‡å»æ³¨é‡Šï¼šctrl+shift+ï¼Ÿé”®</span><br></pre></td></tr></table></figure>

<h3 id="äºŒ-MySQLæ•°æ®å¤‡ä»½"><a href="#äºŒ-MySQLæ•°æ®å¤‡ä»½" class="headerlink" title="äºŒ MySQLæ•°æ®å¤‡ä»½"></a>äºŒ MySQLæ•°æ®å¤‡ä»½</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. ç‰©ç†å¤‡ä»½ï¼š ç›´æ¥å¤åˆ¶æ•°æ®åº“æ–‡ä»¶ï¼Œé€‚ç”¨äºå¤§å‹æ•°æ®åº“ç¯å¢ƒã€‚ä½†ä¸èƒ½æ¢å¤åˆ°å¼‚æ„ç³»ç»Ÿä¸­å¦‚Windowsã€‚</span></span><br><span class="line"><span class="comment">#2. é€»è¾‘å¤‡ä»½ï¼š å¤‡ä»½çš„æ˜¯å»ºè¡¨ã€å»ºåº“ã€æ’å…¥ç­‰æ“ä½œæ‰€æ‰§è¡ŒSQLè¯­å¥ï¼Œé€‚ç”¨äºä¸­å°å‹æ•°æ®åº“ï¼Œæ•ˆç‡ç›¸å¯¹è¾ƒä½ã€‚</span></span><br><span class="line"><span class="comment">#3. å¯¼å‡ºè¡¨ï¼š å°†è¡¨å¯¼å…¥åˆ°æ–‡æœ¬æ–‡ä»¶ä¸­ã€‚</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¸€ã€ä½¿ç”¨mysqldumpå®ç°é€»è¾‘å¤‡ä»½</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•ï¼š</span></span><br><span class="line"><span class="comment"># mysqldump -h æœåŠ¡å™¨ -uç”¨æˆ·å -på¯†ç  æ•°æ®åº“å &gt; å¤‡ä»½æ–‡ä»¶.sql</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¤ºä¾‹ï¼š</span></span><br><span class="line"><span class="comment">#å•åº“å¤‡ä»½</span></span><br><span class="line">mysqldump -uroot -p123 db1 &gt; db1.sql</span><br><span class="line">mysqldump -uroot -p123 db1 table1 table2 &gt; db1-table1-table2.sql</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¤šåº“å¤‡ä»½</span></span><br><span class="line">mysqldump -uroot -p123 --databases db1 db2 mysql db3 &gt; db1_db2_mysql_db3.sql</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¤‡ä»½æ‰€æœ‰åº“</span></span><br><span class="line">mysqldump -uroot -p123 --<span class="built_in">all</span>-databases &gt; <span class="built_in">all</span>.sql</span><br></pre></td></tr></table></figure>

<p><em><strong>*äºŒã€æ¢å¤é€»è¾‘å¤‡ä»½*</strong></em></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ–¹æ³•ä¸€ï¼š</span></span><br><span class="line">[root@egon backup]<span class="comment"># mysql -uroot -p123 &lt; /backup/all.sql</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–¹æ³•äºŒï¼š</span></span><br><span class="line">mysql&gt; use db1;</span><br><span class="line">mysql&gt; SET SQL_LOG_BIN=<span class="number">0</span>;</span><br><span class="line">mysql&gt; source /root/db1.sql</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ³¨ï¼šå¦‚æœå¤‡ä»½/æ¢å¤å•ä¸ªåº“æ—¶ï¼Œå¯ä»¥ä¿®æ”¹sqlæ–‡ä»¶</span></span><br><span class="line">DROP database <span class="keyword">if</span> exists school;</span><br><span class="line">create database school;</span><br><span class="line">use school;</span><br></pre></td></tr></table></figure>

<p><strong>ä¸‰ã€å¤‡ä»½&#x2F;æ¢å¤æ¡ˆä¾‹</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ•°æ®åº“å¤‡ä»½/æ¢å¤å®éªŒä¸€ï¼šæ•°æ®åº“æŸå</span></span><br><span class="line">å¤‡ä»½ï¼š</span><br><span class="line"><span class="number">1.</span> <span class="comment"># mysqldump -uroot -p123 --all-databases &gt; /backup/`date +%F`_all.sql</span></span><br><span class="line"><span class="number">2.</span> <span class="comment"># mysql -uroot -p123 -e &#x27;flush logs&#x27; //æˆªæ–­å¹¶äº§ç”Ÿæ–°çš„binlog</span></span><br><span class="line"><span class="number">3.</span> æ’å…¥æ•°æ® //æ¨¡æ‹ŸæœåŠ¡å™¨æ­£å¸¸è¿è¡Œ</span><br><span class="line"><span class="number">4.</span> mysql&gt; <span class="built_in">set</span> sql_log_bin=<span class="number">0</span>; //æ¨¡æ‹ŸæœåŠ¡å™¨æŸå</span><br><span class="line">mysql&gt; drop database db;</span><br><span class="line"></span><br><span class="line">æ¢å¤ï¼š</span><br><span class="line"><span class="number">1.</span> <span class="comment"># mysqlbinlog æœ€åä¸€ä¸ªbinlog &gt; /backup/last_bin.log</span></span><br><span class="line"><span class="number">2.</span> mysql&gt; <span class="built_in">set</span> sql_log_bin=<span class="number">0</span>; </span><br><span class="line">mysql&gt; source /backup/<span class="number">2014</span>-02-13_<span class="built_in">all</span>.sql //æ¢å¤æœ€è¿‘ä¸€æ¬¡å®Œå…¨å¤‡ä»½ </span><br><span class="line">mysql&gt; source /backup/last_bin.log //æ¢å¤æœ€åä¸ªbinlogæ–‡ä»¶</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ•°æ®åº“å¤‡ä»½/æ¢å¤å®éªŒäºŒï¼šå¦‚æœæœ‰è¯¯åˆ é™¤</span></span><br><span class="line">å¤‡ä»½ï¼š</span><br><span class="line"><span class="number">1.</span> mysqldump -uroot -p123 --<span class="built_in">all</span>-databases &gt; /backup/`date +%F`_<span class="built_in">all</span>.sql</span><br><span class="line"><span class="number">2.</span> mysql -uroot -p123 -e <span class="string">&#x27;flush logs&#x27;</span> //æˆªæ–­å¹¶äº§ç”Ÿæ–°çš„binlog</span><br><span class="line"><span class="number">3.</span> æ’å…¥æ•°æ® //æ¨¡æ‹ŸæœåŠ¡å™¨æ­£å¸¸è¿è¡Œ</span><br><span class="line"><span class="number">4.</span> drop table db1.t1 //æ¨¡æ‹Ÿè¯¯åˆ é™¤</span><br><span class="line"><span class="number">5.</span> æ’å…¥æ•°æ® //æ¨¡æ‹ŸæœåŠ¡å™¨æ­£å¸¸è¿è¡Œ</span><br><span class="line"></span><br><span class="line">æ¢å¤ï¼š</span><br><span class="line"><span class="number">1.</span> <span class="comment"># mysqlbinlog æœ€åä¸€ä¸ªbinlog --stop-position=260 &gt; /tmp/1.sql </span></span><br><span class="line"><span class="comment"># mysqlbinlog æœ€åä¸€ä¸ªbinlog --start-position=900 &gt; /tmp/2.sql </span></span><br><span class="line"><span class="number">2.</span> mysql&gt; <span class="built_in">set</span> sql_log_bin=<span class="number">0</span>; </span><br><span class="line">mysql&gt; source /backup/<span class="number">2014</span>-02-13_<span class="built_in">all</span>.sql //æ¢å¤æœ€è¿‘ä¸€æ¬¡å®Œå…¨å¤‡ä»½</span><br><span class="line">mysql&gt; source /tmp/<span class="number">1.</span>log //æ¢å¤æœ€åä¸ªbinlogæ–‡ä»¶</span><br><span class="line">mysql&gt; source /tmp/<span class="number">2.</span>log //æ¢å¤æœ€åä¸ªbinlogæ–‡ä»¶</span><br><span class="line"></span><br><span class="line">æ³¨æ„äº‹é¡¹ï¼š</span><br><span class="line"><span class="number">1.</span> å®Œå…¨æ¢å¤åˆ°ä¸€ä¸ªå¹²å‡€çš„ç¯å¢ƒï¼ˆä¾‹å¦‚æ–°çš„æ•°æ®åº“æˆ–åˆ é™¤åŸæœ‰çš„æ•°æ®åº“ï¼‰</span><br><span class="line"><span class="number">2.</span> æ¢å¤æœŸé—´æ‰€æœ‰SQLè¯­å¥ä¸åº”è¯¥è®°å½•åˆ°binlogä¸­</span><br></pre></td></tr></table></figure>

<p><em><strong>*å››ã€å®ç°è‡ªåŠ¨åŒ–å¤‡ä»½*</strong></em></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">å¤‡ä»½è®¡åˆ’ï¼š</span><br><span class="line"><span class="number">1.</span> ä»€ä¹ˆæ—¶é—´ <span class="number">2</span>:<span class="number">00</span></span><br><span class="line"><span class="number">2.</span> å¯¹å“ªäº›æ•°æ®åº“å¤‡ä»½</span><br><span class="line"><span class="number">3.</span> å¤‡ä»½æ–‡ä»¶æ”¾çš„ä½ç½®</span><br><span class="line"></span><br><span class="line">å¤‡ä»½è„šæœ¬ï¼š</span><br><span class="line">[root@egon ~]<span class="comment"># vim /mysql_back.sql</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">back_dir=/backup</span><br><span class="line">back_file=`date +%F`_<span class="built_in">all</span>.sql</span><br><span class="line">user=root</span><br><span class="line"><span class="keyword">pass</span>=<span class="number">123</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -d /backup ];then</span><br><span class="line">mkdir -p /backup</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤‡ä»½å¹¶æˆªæ–­æ—¥å¿—</span></span><br><span class="line">mysqldump -u$&#123;user&#125; -p$&#123;<span class="keyword">pass</span>&#125; --events --<span class="built_in">all</span>-databases &gt; $&#123;back_dir&#125;/$&#123;back_file&#125;</span><br><span class="line">mysql -u$&#123;user&#125; -p$&#123;<span class="keyword">pass</span>&#125; -e <span class="string">&#x27;flush logs&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åªä¿ç•™æœ€è¿‘ä¸€å‘¨çš„å¤‡ä»½</span></span><br><span class="line">cd $back_dir</span><br><span class="line">find . -mtime +<span class="number">7</span> -<span class="built_in">exec</span> rm -rf &#123;&#125; \;</span><br><span class="line"></span><br><span class="line">æ‰‹åŠ¨æµ‹è¯•ï¼š</span><br><span class="line">[root@egon ~]<span class="comment"># chmod a+x /mysql_back.sql </span></span><br><span class="line">[root@egon ~]<span class="comment"># chattr +i /mysql_back.sql</span></span><br><span class="line">[root@egon ~]<span class="comment"># /mysql_back.sql</span></span><br><span class="line"></span><br><span class="line">é…ç½®cronï¼š</span><br><span class="line">[root@egon ~]<span class="comment"># crontab -l</span></span><br><span class="line"><span class="number">2</span> * * * /mysql_back.sql</span><br></pre></td></tr></table></figure>

<p><strong>äº”ã€è¡¨çš„å¯¼å‡ºå’Œå¯¼å…¥</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">SELECT... INTO OUTFILE å¯¼å‡ºæ–‡æœ¬æ–‡ä»¶</span><br><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line">mysql&gt; SELECT * FROM school.student1</span><br><span class="line">INTO OUTFILE <span class="string">&#x27;student1.txt&#x27;</span></span><br><span class="line">FIELDS TERMINATED BY <span class="string">&#x27;,&#x27;</span> //å®šä¹‰å­—æ®µåˆ†éš”ç¬¦</span><br><span class="line">OPTIONALLY ENCLOSED BY <span class="string">&#x27;â€&#x27;</span> //å®šä¹‰å­—ç¬¦ä¸²ä½¿ç”¨ä»€ä¹ˆç¬¦å·æ‹¬èµ·æ¥</span><br><span class="line">LINES TERMINATED BY <span class="string">&#x27;\n&#x27;</span> ; //å®šä¹‰æ¢è¡Œç¬¦</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql å‘½ä»¤å¯¼å‡ºæ–‡æœ¬æ–‡ä»¶</span><br><span class="line">ç¤ºä¾‹:</span><br><span class="line"><span class="comment"># mysql -u root -p123 -e &#x27;select * from student1.school&#x27; &gt; /tmp/student1.txt</span></span><br><span class="line"><span class="comment"># mysql -u root -p123 --xml -e &#x27;select * from student1.school&#x27; &gt; /tmp/student1.xml</span></span><br><span class="line"><span class="comment"># mysql -u root -p123 --html -e &#x27;select * from student1.school&#x27; &gt; /tmp/student1.html</span></span><br><span class="line"></span><br><span class="line">LOAD DATA INFILE å¯¼å…¥æ–‡æœ¬æ–‡ä»¶</span><br><span class="line">mysql&gt; DELETE FROM student1;</span><br><span class="line">mysql&gt; LOAD DATA INFILE <span class="string">&#x27;/tmp/student1.txt&#x27;</span></span><br><span class="line">INTO TABLE school.student1</span><br><span class="line">FIELDS TERMINATED BY <span class="string">&#x27;,&#x27;</span></span><br><span class="line">OPTIONALLY ENCLOSED BY <span class="string">&#x27;â€&#x27;</span></span><br><span class="line">LINES TERMINATED BY <span class="string">&#x27;\n&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>æŠ¥é”™ï¼šVariable â€˜secure_file_privâ€™ is a read only</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¯èƒ½ä¼šæŠ¥é”™</span></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> db1.emp into outfile <span class="string">&#x27;C:\\db1.emp.txt&#x27;</span> fields terminated by <span class="string">&#x27;,&#x27;</span> lines terminated by <span class="string">&#x27;\r\n&#x27;</span>;</span><br><span class="line">ERROR <span class="number">1238</span> (HY000): Variable <span class="string">&#x27;secure_file_priv&#x27;</span> <span class="keyword">is</span> a read only variable</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ•°æ®åº“æœ€å…³é”®çš„æ˜¯æ•°æ®ï¼Œä¸€æ—¦æ•°æ®åº“æƒé™æ³„éœ²ï¼Œé‚£ä¹ˆé€šè¿‡ä¸Šè¿°è¯­å¥å°±å¯ä»¥è½»æ¾å°†æ•°æ®å¯¼å‡ºåˆ°æ–‡ä»¶ä¸­ç„¶åä¸‹è½½æ‹¿èµ°ï¼Œå› è€Œmysqlå¯¹æ­¤ä½œäº†é™åˆ¶ï¼Œåªèƒ½å°†æ–‡ä»¶å¯¼å‡ºåˆ°æŒ‡å®šç›®å½•</span></span><br><span class="line">åœ¨é…ç½®æ–‡ä»¶ä¸­</span><br><span class="line">[mysqld]</span><br><span class="line">secure_file_priv=<span class="string">&#x27;C:\\&#x27;</span> <span class="comment">#åªèƒ½å°†æ•°æ®å¯¼å‡ºåˆ°C:\\ä¸‹</span></span><br><span class="line"></span><br><span class="line">é‡å¯mysql</span><br><span class="line">é‡æ–°æ‰§è¡Œä¸Šè¿°è¯­å¥</span><br></pre></td></tr></table></figure>

<p><em><strong>*å…­ã€æ•°æ®åº“è¿ç§»*</strong></em></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">åŠ¡å¿…ä¿è¯åœ¨ç›¸åŒç‰ˆæœ¬ä¹‹é—´è¿ç§»</span><br><span class="line"><span class="comment"># mysqldump -h æºIP -uroot -p123 --databases db1 | mysql -h ç›®æ ‡IP -uroot -p456</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¸‰-pymysqlæ¨¡å—"><a href="#ä¸‰-pymysqlæ¨¡å—" class="headerlink" title="ä¸‰ pymysqlæ¨¡å—"></a>ä¸‰ pymysqlæ¨¡å—</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…</span></span><br><span class="line">pip3 install pymysql</span><br></pre></td></tr></table></figure>

<p><strong>ä¸€ é“¾æ¥ã€æ‰§è¡Œsqlã€å…³é—­ï¼ˆæ¸¸æ ‡ï¼‰</strong></p>
<p><img src="https://pic3.zhimg.com/80/v2-0ecad411fee44008a38d8ad74af349de_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line">user=<span class="built_in">input</span>(<span class="string">&#x27;ç”¨æˆ·å: &#x27;</span>).strip()</span><br><span class="line">pwd=<span class="built_in">input</span>(<span class="string">&#x27;å¯†ç : &#x27;</span>).strip()</span><br><span class="line"></span><br><span class="line"><span class="comment">#é“¾æ¥</span></span><br><span class="line">conn=pymysql.connect(host=<span class="string">&#x27;localhost&#x27;</span>,user=<span class="string">&#x27;root&#x27;</span>,password=<span class="string">&#x27;123&#x27;</span>,database=<span class="string">&#x27;egon&#x27;</span>,charset=<span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line"><span class="comment">#æ¸¸æ ‡</span></span><br><span class="line">cursor=conn.cursor() <span class="comment">#æ‰§è¡Œå®Œæ¯•è¿”å›çš„ç»“æœé›†é»˜è®¤ä»¥å…ƒç»„æ˜¾ç¤º</span></span><br><span class="line"><span class="comment">#cursor=conn.cursor(cursor=pymysql.cursors.DictCursor)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰§è¡Œsqlè¯­å¥</span></span><br><span class="line">sql=<span class="string">&#x27;select * from userinfo where name=&quot;%s&quot; and password=&quot;%s&quot;&#x27;</span> %(user,pwd) <span class="comment">#æ³¨æ„%séœ€è¦åŠ å¼•å·</span></span><br><span class="line"><span class="built_in">print</span>(sql)</span><br><span class="line">res=cursor.execute(sql) <span class="comment">#æ‰§è¡Œsqlè¯­å¥ï¼Œè¿”å›sqlæŸ¥è¯¢æˆåŠŸçš„è®°å½•æ•°ç›®</span></span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> res:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ç™»å½•æˆåŠŸ&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ç™»å½•å¤±è´¥&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>äºŒ execute()ä¹‹sqlæ³¨å…¥</strong></p>
<p>æ³¨æ„ï¼šç¬¦å·â€“ä¼šæ³¨é‡Šæ‰å®ƒä¹‹åçš„sqlï¼Œæ­£ç¡®çš„è¯­æ³•ï¼šâ€“åè‡³å°‘æœ‰ä¸€ä¸ªä»»æ„å­—ç¬¦</p>
<p>æ ¹æœ¬åŸç†ï¼šå°±æ ¹æ®ç¨‹åºçš„å­—ç¬¦ä¸²æ‹¼æ¥name&#x3D;â€™%sâ€™ï¼Œæˆ‘ä»¬è¾“å…¥ä¸€ä¸ª*<strong>xxxâ€™ â€“ haha*</strong>,ç”¨æˆ‘ä»¬è¾“å…¥çš„xxxåŠ â€™åœ¨ç¨‹åºä¸­æ‹¼æ¥æˆä¸€ä¸ªåˆ¤æ–­æ¡ä»¶name&#x3D;â€™*<strong>xxxâ€™ â€“ haha*</strong>â€˜</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">æœ€åé‚£ä¸€ä¸ªç©ºæ ¼ï¼Œåœ¨ä¸€æ¡sqlè¯­å¥ä¸­å¦‚æœé‡åˆ°select * <span class="keyword">from</span> t1 where <span class="built_in">id</span> &gt; <span class="number">3</span> -- <span class="keyword">and</span> name=<span class="string">&#x27;egon&#x27;</span>;åˆ™--ä¹‹åçš„æ¡ä»¶è¢«æ³¨é‡Šæ‰äº†</span><br><span class="line"></span><br><span class="line"><span class="comment">#1ã€sqlæ³¨å…¥ä¹‹ï¼šç”¨æˆ·å­˜åœ¨ï¼Œç»•è¿‡å¯†ç </span></span><br><span class="line">egon<span class="string">&#x27; -- ä»»æ„å­—ç¬¦</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#2ã€sqlæ³¨å…¥ä¹‹ï¼šç”¨æˆ·ä¸å­˜åœ¨ï¼Œç»•è¿‡ç”¨æˆ·ä¸å¯†ç </span></span><br><span class="line"><span class="string">xxx&#x27;</span> <span class="keyword">or</span> <span class="number">1</span>=<span class="number">1</span> -- ä»»æ„å­—ç¬¦</span><br></pre></td></tr></table></figure>



<p><img src="https://pic2.zhimg.com/80/v2-7e693bfec8853740ed3d344102723171_720w.jpg" alt="img"></p>
<p><img src="https://pic3.zhimg.com/80/v2-d96619bb2e13f970947766a8fa76d586_720w.jpg" alt="img"></p>
<p><img src="https://pic3.zhimg.com/80/v2-f75e7408e0af88013f9b8f550957a512_720w.jpg" alt="img"></p>
<p>è§£å†³æ–¹æ³•ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åŸæ¥æ˜¯æˆ‘ä»¬å¯¹sqlè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥</span></span><br><span class="line"><span class="comment"># sql=&quot;select * from userinfo where name=&#x27;%s&#x27; and password=&#x27;%s&#x27;&quot; %(user,pwd)</span></span><br><span class="line"><span class="comment"># print(sql)</span></span><br><span class="line"><span class="comment"># res=cursor.execute(sql)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ”¹å†™ä¸ºï¼ˆexecuteå¸®æˆ‘ä»¬åšå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œæˆ‘ä»¬æ— éœ€ä¸”ä¸€å®šä¸èƒ½å†ä¸º%såŠ å¼•å·äº†ï¼‰</span></span><br><span class="line">sql=<span class="string">&quot;select * from userinfo where name=%s and password=%s&quot;</span> <span class="comment">#ï¼ï¼ï¼æ³¨æ„%séœ€è¦å»æ‰å¼•å·ï¼Œå› ä¸ºpymysqlä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åŠ ä¸Š</span></span><br><span class="line">res=cursor.execute(sql,[user,pwd]) <span class="comment">#pymysqlæ¨¡å—è‡ªåŠ¨å¸®æˆ‘ä»¬è§£å†³sqlæ³¨å…¥çš„é—®é¢˜ï¼Œåªè¦æˆ‘ä»¬æŒ‰ç…§pymysqlçš„è§„çŸ©æ¥ã€‚</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¸‰ å¢ã€åˆ ã€æ”¹ï¼šconn.commit()</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="comment">#é“¾æ¥</span></span><br><span class="line">conn=pymysql.connect(host=<span class="string">&#x27;localhost&#x27;</span>,user=<span class="string">&#x27;root&#x27;</span>,password=<span class="string">&#x27;123&#x27;</span>,database=<span class="string">&#x27;egon&#x27;</span>)</span><br><span class="line"><span class="comment">#æ¸¸æ ‡</span></span><br><span class="line">cursor=conn.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰§è¡Œsqlè¯­å¥</span></span><br><span class="line"><span class="comment">#part1</span></span><br><span class="line"><span class="comment"># sql=&#x27;insert into userinfo(name,password) values(&quot;root&quot;,&quot;123456&quot;);&#x27;</span></span><br><span class="line"><span class="comment"># res=cursor.execute(sql) #æ‰§è¡Œsqlè¯­å¥ï¼Œè¿”å›sqlå½±å“æˆåŠŸçš„è¡Œæ•°</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#part2</span></span><br><span class="line"><span class="comment"># sql=&#x27;insert into userinfo(name,password) values(%s,%s);&#x27;</span></span><br><span class="line"><span class="comment"># res=cursor.execute(sql,(&quot;root&quot;,&quot;123456&quot;)) #æ‰§è¡Œsqlè¯­å¥ï¼Œè¿”å›sqlå½±å“æˆåŠŸçš„è¡Œæ•°</span></span><br><span class="line"><span class="comment"># print(res)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#part3</span></span><br><span class="line">sql=<span class="string">&#x27;insert into userinfo(name,password) values(%s,%s);&#x27;</span></span><br><span class="line">res=cursor.executemany(sql,[(<span class="string">&quot;root&quot;</span>,<span class="string">&quot;123456&quot;</span>),(<span class="string">&quot;lhf&quot;</span>,<span class="string">&quot;12356&quot;</span>),(<span class="string">&quot;eee&quot;</span>,<span class="string">&quot;156&quot;</span>)]) <span class="comment">#æ‰§è¡Œsqlè¯­å¥ï¼Œè¿”å›sqlå½±å“æˆåŠŸçš„è¡Œæ•°</span></span><br><span class="line"><span class="built_in">print</span>(res)</span><br><span class="line"></span><br><span class="line">conn.commit() <span class="comment">#æäº¤åæ‰å‘ç°è¡¨ä¸­æ’å…¥è®°å½•æˆåŠŸ</span></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<p><strong>å›› æŸ¥ï¼šfetchoneï¼Œfetchmanyï¼Œfetchall</strong></p>
<p><img src="https://pic4.zhimg.com/80/v2-8094f598df5a07af99a762144606f5a3_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="comment">#é“¾æ¥</span></span><br><span class="line">conn=pymysql.connect(host=<span class="string">&#x27;localhost&#x27;</span>,user=<span class="string">&#x27;root&#x27;</span>,password=<span class="string">&#x27;123&#x27;</span>,database=<span class="string">&#x27;egon&#x27;</span>)</span><br><span class="line"><span class="comment">#æ¸¸æ ‡</span></span><br><span class="line">cursor=conn.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰§è¡Œsqlè¯­å¥</span></span><br><span class="line">sql=<span class="string">&#x27;select * from userinfo;&#x27;</span></span><br><span class="line">rows=cursor.execute(sql) <span class="comment">#æ‰§è¡Œsqlè¯­å¥ï¼Œè¿”å›sqlå½±å“æˆåŠŸçš„è¡Œæ•°rows,å°†ç»“æœæ”¾å…¥ä¸€ä¸ªé›†åˆï¼Œç­‰å¾…è¢«æŸ¥è¯¢</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cursor.scroll(3,mode=&#x27;absolute&#x27;) # ç›¸å¯¹ç»å¯¹ä½ç½®ç§»åŠ¨</span></span><br><span class="line"><span class="comment"># cursor.scroll(3,mode=&#x27;relative&#x27;) # ç›¸å¯¹å½“å‰ä½ç½®ç§»åŠ¨</span></span><br><span class="line">res1=cursor.fetchone()</span><br><span class="line">res2=cursor.fetchone()</span><br><span class="line">res3=cursor.fetchone()</span><br><span class="line">res4=cursor.fetchmany(<span class="number">2</span>)</span><br><span class="line">res5=cursor.fetchall()</span><br><span class="line"><span class="built_in">print</span>(res1)</span><br><span class="line"><span class="built_in">print</span>(res2)</span><br><span class="line"><span class="built_in">print</span>(res3)</span><br><span class="line"><span class="built_in">print</span>(res4)</span><br><span class="line"><span class="built_in">print</span>(res5)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;%s rows in set (0.00 sec)&#x27;</span> %rows)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">conn.commit() <span class="comment">#æäº¤åæ‰å‘ç°è¡¨ä¸­æ’å…¥è®°å½•æˆåŠŸ</span></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">(1, &#x27;root&#x27;, &#x27;123456&#x27;)</span></span><br><span class="line"><span class="string">(2, &#x27;root&#x27;, &#x27;123456&#x27;)</span></span><br><span class="line"><span class="string">(3, &#x27;root&#x27;, &#x27;123456&#x27;)</span></span><br><span class="line"><span class="string">((4, &#x27;root&#x27;, &#x27;123456&#x27;), (5, &#x27;root&#x27;, &#x27;123456&#x27;))</span></span><br><span class="line"><span class="string">((6, &#x27;root&#x27;, &#x27;123456&#x27;), (7, &#x27;lhf&#x27;, &#x27;12356&#x27;), (8, &#x27;eee&#x27;, &#x27;156&#x27;))</span></span><br><span class="line"><span class="string">rows in set (0.00 sec)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>äº” è·å–æ’å…¥çš„æœ€åä¸€æ¡æ•°æ®çš„è‡ªå¢ID</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line">conn=pymysql.connect(host=<span class="string">&#x27;localhost&#x27;</span>,user=<span class="string">&#x27;root&#x27;</span>,password=<span class="string">&#x27;123&#x27;</span>,database=<span class="string">&#x27;egon&#x27;</span>)</span><br><span class="line">cursor=conn.cursor()</span><br><span class="line"></span><br><span class="line">sql=<span class="string">&#x27;insert into userinfo(name,password) values(&quot;xxx&quot;,&quot;123&quot;);&#x27;</span></span><br><span class="line">rows=cursor.execute(sql)</span><br><span class="line"><span class="built_in">print</span>(cursor.lastrowid) <span class="comment">#åœ¨æ’å…¥è¯­å¥åæŸ¥çœ‹</span></span><br><span class="line"></span><br><span class="line">conn.commit()</span><br><span class="line"></span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2>]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>42-æ•°æ®åº“ï¼ˆå››ï¼‰</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/42_%E8%AE%B0%E5%BD%95%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<h3 id="ä¸€-ä»‹ç»"><a href="#ä¸€-ä»‹ç»" class="headerlink" title="ä¸€ ä»‹ç»"></a>ä¸€ ä»‹ç»</h3><p>MySQLæ•°æ®æ“ä½œï¼š DML</p>
<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<p>åœ¨MySQLç®¡ç†è½¯ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡SQLè¯­å¥ä¸­çš„DMLè¯­è¨€æ¥å®ç°æ•°æ®çš„æ“ä½œï¼ŒåŒ…æ‹¬</p>
<ol>
<li><em>ä½¿ç”¨INSERTå®ç°æ•°æ®çš„æ’å…¥</em></li>
<li><em>UPDATEå®ç°æ•°æ®çš„æ›´æ–°</em></li>
<li><em>ä½¿ç”¨DELETEå®ç°æ•°æ®çš„åˆ é™¤</em></li>
<li><em>ä½¿ç”¨SELECTæŸ¥è¯¢æ•°æ®ä»¥åŠã€‚</em></li>
</ol>
<p><em>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</em></p>
<p>æœ¬èŠ‚å†…å®¹åŒ…æ‹¬ï¼š</p>
<p>æ’å…¥æ•°æ® æ›´æ–°æ•°æ® åˆ é™¤æ•°æ® æŸ¥è¯¢æ•°æ®</p>
<h3 id="äºŒ-æ’å…¥æ•°æ®INSERT"><a href="#äºŒ-æ’å…¥æ•°æ®INSERT" class="headerlink" title="äºŒ æ’å…¥æ•°æ®INSERT"></a>äºŒ æ’å…¥æ•°æ®INSERT</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> æ’å…¥å®Œæ•´æ•°æ®ï¼ˆé¡ºåºæ’å…¥ï¼‰</span><br><span class="line">    è¯­æ³•ä¸€ï¼š</span><br><span class="line">    INSERT INTO è¡¨å(å­—æ®µ<span class="number">1</span>,å­—æ®µ<span class="number">2</span>,å­—æ®µ<span class="number">3</span>â€¦å­—æ®µn) VALUES(å€¼<span class="number">1</span>,å€¼<span class="number">2</span>,å€¼<span class="number">3</span>â€¦å€¼n);</span><br><span class="line"></span><br><span class="line">    è¯­æ³•äºŒï¼š</span><br><span class="line">    INSERT INTO è¡¨å VALUES (å€¼<span class="number">1</span>,å€¼<span class="number">2</span>,å€¼<span class="number">3</span>â€¦å€¼n);</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> æŒ‡å®šå­—æ®µæ’å…¥æ•°æ®</span><br><span class="line">    è¯­æ³•ï¼š</span><br><span class="line">    INSERT INTO è¡¨å(å­—æ®µ<span class="number">1</span>,å­—æ®µ<span class="number">2</span>,å­—æ®µ<span class="number">3</span>â€¦) VALUES (å€¼<span class="number">1</span>,å€¼<span class="number">2</span>,å€¼<span class="number">3</span>â€¦);</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> æ’å…¥å¤šæ¡è®°å½•</span><br><span class="line">    è¯­æ³•ï¼š</span><br><span class="line">    INSERT INTO è¡¨å VALUES</span><br><span class="line">        (å€¼<span class="number">1</span>,å€¼<span class="number">2</span>,å€¼<span class="number">3</span>â€¦å€¼n),</span><br><span class="line">        (å€¼<span class="number">1</span>,å€¼<span class="number">2</span>,å€¼<span class="number">3</span>â€¦å€¼n),</span><br><span class="line">        (å€¼<span class="number">1</span>,å€¼<span class="number">2</span>,å€¼<span class="number">3</span>â€¦å€¼n);</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> æ’å…¥æŸ¥è¯¢ç»“æœ</span><br><span class="line">    è¯­æ³•ï¼š</span><br><span class="line">    INSERT INTO è¡¨å(å­—æ®µ<span class="number">1</span>,å­—æ®µ<span class="number">2</span>,å­—æ®µ<span class="number">3</span>â€¦å­—æ®µn) </span><br><span class="line">                    SELECT (å­—æ®µ<span class="number">1</span>,å­—æ®µ<span class="number">2</span>,å­—æ®µ<span class="number">3</span>â€¦å­—æ®µn) FROM è¡¨<span class="number">2</span></span><br><span class="line">                    WHERE â€¦;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸‰-æ›´æ–°æ•°æ®UPDATE"><a href="#ä¸‰-æ›´æ–°æ•°æ®UPDATE" class="headerlink" title="ä¸‰ æ›´æ–°æ•°æ®UPDATE"></a>ä¸‰ æ›´æ–°æ•°æ®UPDATE</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">è¯­æ³•ï¼š</span><br><span class="line">    UPDATE è¡¨å SET</span><br><span class="line">        å­—æ®µ<span class="number">1</span>=å€¼<span class="number">1</span>,</span><br><span class="line">        å­—æ®µ<span class="number">2</span>=å€¼<span class="number">2</span>,</span><br><span class="line">        WHERE CONDITION;</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line">    UPDATE mysql.user SET password=password(â€˜<span class="number">123</span>â€™) </span><br><span class="line">        where user=â€™rootâ€™ <span class="keyword">and</span> host=â€™localhostâ€™;</span><br></pre></td></tr></table></figure>

<h3 id="å››-åˆ é™¤æ•°æ®DELETE"><a href="#å››-åˆ é™¤æ•°æ®DELETE" class="headerlink" title="å›› åˆ é™¤æ•°æ®DELETE"></a>å›› åˆ é™¤æ•°æ®DELETE</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">è¯­æ³•ï¼š</span><br><span class="line">    DELETE FROM è¡¨å </span><br><span class="line">        WHERE CONITION;</span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line">    DELETE FROM mysql.user </span><br><span class="line">        WHERE password=â€™â€™;</span><br><span class="line"></span><br><span class="line">ç»ƒä¹ ï¼š</span><br><span class="line">    æ›´æ–°MySQL rootç”¨æˆ·å¯†ç ä¸ºmysql123</span><br><span class="line">    åˆ é™¤é™¤ä»æœ¬åœ°ç™»å½•çš„rootç”¨æˆ·ä»¥å¤–çš„æ‰€æœ‰ç”¨æˆ·</span><br></pre></td></tr></table></figure>

<h3 id="äº”-æŸ¥è¯¢æ•°æ®SELECT"><a href="#äº”-æŸ¥è¯¢æ•°æ®SELECT" class="headerlink" title="äº” æŸ¥è¯¢æ•°æ®SELECT"></a>äº” æŸ¥è¯¢æ•°æ®SELECT</h3><p><strong><a href="https://link.zhihu.com/?target=http://www.cnblogs.com/linhaifeng/articles/7267592.html">å•è¡¨æŸ¥è¯¢ï¼šhttp://www.cnblogs.com/linhaifeng/articles/7267592.html</a></strong></p>
<p><strong><a href="https://link.zhihu.com/?target=http://www.cnblogs.com/linhaifeng/articles/7267596.html">å¤šè¡¨æŸ¥è¯¢ï¼šhttp://www.cnblogs.com/linhaifeng/articles/7267596.html</a></strong></p>
<h3 id="å…­-æƒé™ç®¡ç†"><a href="#å…­-æƒé™ç®¡ç†" class="headerlink" title="å…­ æƒé™ç®¡ç†"></a>å…­ æƒé™ç®¡ç†</h3><p><img src="https://pic4.zhimg.com/80/v2-be7593dce6e8e3a6f5cbf7c2b9c305db_720w.jpg" alt="img"></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æˆæƒè¡¨</span></span><br><span class="line">user <span class="comment">#è¯¥è¡¨æ”¾è¡Œçš„æƒé™ï¼Œé’ˆå¯¹ï¼šæ‰€æœ‰æ•°æ®ï¼Œæ‰€æœ‰åº“ä¸‹æ‰€æœ‰è¡¨ï¼Œä»¥åŠè¡¨ä¸‹çš„æ‰€æœ‰å­—æ®µ</span></span><br><span class="line">db <span class="comment">#è¯¥è¡¨æ”¾è¡Œçš„æƒé™ï¼Œé’ˆå¯¹ï¼šæŸä¸€æ•°æ®åº“ï¼Œè¯¥æ•°æ®åº“ä¸‹çš„æ‰€æœ‰è¡¨ï¼Œä»¥åŠè¡¨ä¸‹çš„æ‰€æœ‰å­—æ®µ</span></span><br><span class="line">tables_priv <span class="comment">#è¯¥è¡¨æ”¾è¡Œçš„æƒé™ã€‚é’ˆå¯¹ï¼šæŸä¸€å¼ è¡¨ï¼Œä»¥åŠè¯¥è¡¨ä¸‹çš„æ‰€æœ‰å­—æ®µ</span></span><br><span class="line">columns_priv <span class="comment">#è¯¥è¡¨æ”¾è¡Œçš„æƒé™ï¼Œé’ˆå¯¹ï¼šæŸä¸€ä¸ªå­—æ®µ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŒ‰å›¾è§£é‡Šï¼š</span></span><br><span class="line">userï¼šæ”¾è¡Œdb1ï¼Œdb2åŠå…¶åŒ…å«çš„æ‰€æœ‰</span><br><span class="line">dbï¼šæ”¾è¡Œdb1ï¼ŒåŠå…¶db1åŒ…å«çš„æ‰€æœ‰</span><br><span class="line">tables_priv:æ”¾è¡Œdb1.table1ï¼ŒåŠå…¶è¯¥è¡¨åŒ…å«çš„æ‰€æœ‰</span><br><span class="line">columns_prive:æ”¾è¡Œdb1.table1.column1ï¼Œåªæ”¾è¡Œè¯¥å­—æ®µ</span><br></pre></td></tr></table></figure>

<p>æƒé™ç›¸å…³æ“ä½œ</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºç”¨æˆ·</span></span><br><span class="line">create user <span class="string">&#x27;egon&#x27;</span>@<span class="string">&#x27;1.1.1.1&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line">create user <span class="string">&#x27;egon&#x27;</span>@<span class="string">&#x27;192.168.1.%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line">create user <span class="string">&#x27;egon&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆæƒï¼šå¯¹æ–‡ä»¶å¤¹ï¼Œå¯¹æ–‡ä»¶ï¼Œå¯¹æ–‡ä»¶æŸä¸€å­—æ®µçš„æƒé™</span></span><br><span class="line">æŸ¥çœ‹å¸®åŠ©ï¼š<span class="built_in">help</span> grant</span><br><span class="line">å¸¸ç”¨æƒé™æœ‰ï¼šselect,update,alter,delete</span><br><span class="line"><span class="built_in">all</span>å¯ä»¥ä»£è¡¨é™¤äº†grantä¹‹å¤–çš„æ‰€æœ‰æƒé™</span><br><span class="line"></span><br><span class="line"><span class="comment">#é’ˆå¯¹æ‰€æœ‰åº“çš„æˆæƒ:*.*</span></span><br><span class="line">grant select on *.* to <span class="string">&#x27;egon1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>; <span class="comment">#åªåœ¨userè¡¨ä¸­å¯ä»¥æŸ¥åˆ°egon1ç”¨æˆ·çš„selectæƒé™è¢«è®¾ç½®ä¸ºY</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é’ˆå¯¹æŸä¸€æ•°æ®åº“ï¼šdb1.*</span></span><br><span class="line">grant select on db1.* to <span class="string">&#x27;egon2&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>; <span class="comment">#åªåœ¨dbè¡¨ä¸­å¯ä»¥æŸ¥åˆ°egon2ç”¨æˆ·çš„selectæƒé™è¢«è®¾ç½®ä¸ºY</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é’ˆå¯¹æŸä¸€ä¸ªè¡¨ï¼šdb1.t1</span></span><br><span class="line">grant select on db1.t1 to <span class="string">&#x27;egon3&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>;  <span class="comment">#åªåœ¨tables_privè¡¨ä¸­å¯ä»¥æŸ¥åˆ°egon3ç”¨æˆ·çš„selectæƒé™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é’ˆå¯¹æŸä¸€ä¸ªå­—æ®µï¼š</span></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> t3;</span><br><span class="line">+------+-------+------+</span><br><span class="line">| <span class="built_in">id</span>   | name  | age  |</span><br><span class="line">+------+-------+------+</span><br><span class="line">|    <span class="number">1</span> | egon1 |   <span class="number">18</span> |</span><br><span class="line">|    <span class="number">2</span> | egon2 |   <span class="number">19</span> |</span><br><span class="line">|    <span class="number">3</span> | egon3 |   <span class="number">29</span> |</span><br><span class="line">+------+-------+------+</span><br><span class="line"></span><br><span class="line">grant select (<span class="built_in">id</span>,name),update (age) on db1.t3 to <span class="string">&#x27;egon4&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;123&#x27;</span>; </span><br><span class="line"><span class="comment">#å¯ä»¥åœ¨tables_privå’Œcolumns_privä¸­çœ‹åˆ°ç›¸åº”çš„æƒé™</span></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> tables_priv where user=<span class="string">&#x27;egon4&#x27;</span>\G</span><br><span class="line">*************************** <span class="number">1.</span> row ***************************</span><br><span class="line">       Host: localhost</span><br><span class="line">         Db: db1</span><br><span class="line">       User: egon4</span><br><span class="line"> Table_name: t3</span><br><span class="line">    Grantor: root@localhost</span><br><span class="line">  Timestamp: <span class="number">0000</span>-<span class="number">00</span>-<span class="number">00</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line"> Table_priv:</span><br><span class="line">Column_priv: Select,Update</span><br><span class="line">row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> columns_priv where user=<span class="string">&#x27;egon4&#x27;</span>\G</span><br><span class="line">*************************** <span class="number">1.</span> row ***************************</span><br><span class="line">       Host: localhost</span><br><span class="line">         Db: db1</span><br><span class="line">       User: egon4</span><br><span class="line"> Table_name: t3</span><br><span class="line">Column_name: <span class="built_in">id</span></span><br><span class="line">  Timestamp: <span class="number">0000</span>-<span class="number">00</span>-<span class="number">00</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">Column_priv: Select</span><br><span class="line">*************************** <span class="number">2.</span> row ***************************</span><br><span class="line">       Host: localhost</span><br><span class="line">         Db: db1</span><br><span class="line">       User: egon4</span><br><span class="line"> Table_name: t3</span><br><span class="line">Column_name: name</span><br><span class="line">  Timestamp: <span class="number">0000</span>-<span class="number">00</span>-<span class="number">00</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">Column_priv: Select</span><br><span class="line">*************************** <span class="number">3.</span> row ***************************</span><br><span class="line">       Host: localhost</span><br><span class="line">         Db: db1</span><br><span class="line">       User: egon4</span><br><span class="line"> Table_name: t3</span><br><span class="line">Column_name: age</span><br><span class="line">  Timestamp: <span class="number">0000</span>-<span class="number">00</span>-<span class="number">00</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">Column_priv: Update</span><br><span class="line">rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ é™¤æƒé™</span></span><br><span class="line">revoke select on db1.* <span class="keyword">from</span> <span class="string">&#x27;egon&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;ji</span><br></pre></td></tr></table></figure>

<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av76534734?p=1">https://www.bilibili.com/video/av76534734?p=1www.bilibili.com/video/av76534734?p=1</a></p>
<p>ï¼ˆbç«™è§†é¢‘é“¾æ¥p1-p12ï¼‰</p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>44-æ•°æ®åº“ï¼ˆå…­ï¼‰</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/44_%E8%A7%86%E5%9B%BE%E3%80%81%E8%A7%A6%E5%8F%91%E5%99%A8%E3%80%81%E4%BA%8B%E5%8A%A1%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E3%80%81%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<h3 id="ä¸€-è§†å›¾"><a href="#ä¸€-è§†å›¾" class="headerlink" title="ä¸€ è§†å›¾"></a>ä¸€ è§†å›¾</h3><p>è§†å›¾æ˜¯ä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼ˆéçœŸå®å­˜åœ¨ï¼‰ï¼Œå…¶æœ¬è´¨æ˜¯ã€æ ¹æ®SQLè¯­å¥è·å–åŠ¨æ€çš„æ•°æ®é›†ï¼Œå¹¶ä¸ºå…¶å‘½åã€‘ï¼Œç”¨æˆ·ä½¿ç”¨æ—¶åªéœ€ä½¿ç”¨ã€åç§°ã€‘å³å¯è·å–ç»“æœé›†ï¼Œå¯ä»¥å°†è¯¥ç»“æœé›†å½“åšè¡¨æ¥ä½¿ç”¨ã€‚</p>
<p>ä½¿ç”¨è§†å›¾æˆ‘ä»¬å¯ä»¥æŠŠæŸ¥è¯¢è¿‡ç¨‹ä¸­çš„ä¸´æ—¶è¡¨æ‘˜å‡ºæ¥ï¼Œç”¨è§†å›¾å»å®ç°ï¼Œè¿™æ ·ä»¥åå†æƒ³æ“ä½œè¯¥ä¸´æ—¶è¡¨çš„æ•°æ®æ—¶å°±æ— éœ€é‡å†™å¤æ‚çš„sqläº†ï¼Œç›´æ¥å»è§†å›¾ä¸­æŸ¥æ‰¾å³å¯ï¼Œä½†è§†å›¾æœ‰æ˜æ˜¾åœ°æ•ˆç‡é—®é¢˜ï¼Œå¹¶ä¸”è§†å›¾æ˜¯å­˜æ”¾åœ¨æ•°æ®åº“ä¸­çš„ï¼Œå¦‚æœæˆ‘ä»¬ç¨‹åºä¸­ä½¿ç”¨çš„sqlè¿‡åˆ†ä¾èµ–æ•°æ®åº“ä¸­çš„è§†å›¾ï¼Œå³å¼ºè€¦åˆï¼Œé‚£å°±æ„å‘³ç€æ‰©å±•sqlæä¸ºä¸ä¾¿ï¼Œå› æ­¤å¹¶ä¸æ¨èä½¿ç”¨</p>
<p>ä¸´æ—¶è¡¨åº”ç”¨ä¸¾ä¾‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¸¤å¼ æœ‰å…³ç³»çš„è¡¨</span></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> course;</span><br><span class="line">+-----+--------+------------+</span><br><span class="line">| cid | cname  | teacher_id |</span><br><span class="line">+-----+--------+------------+</span><br><span class="line">|   <span class="number">1</span> | ç”Ÿç‰©   |          <span class="number">1</span> |</span><br><span class="line">|   <span class="number">2</span> | ç‰©ç†   |          <span class="number">2</span> |</span><br><span class="line">|   <span class="number">3</span> | ä½“è‚²   |          <span class="number">3</span> |</span><br><span class="line">|   <span class="number">4</span> | ç¾æœ¯   |          <span class="number">2</span> |</span><br><span class="line">+-----+--------+------------+</span><br><span class="line"><span class="number">4</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> teacher;</span><br><span class="line">+-----+-----------------+</span><br><span class="line">| tid | tname           |</span><br><span class="line">+-----+-----------------+</span><br><span class="line">|   <span class="number">1</span> | å¼ ç£Šè€å¸ˆ        |</span><br><span class="line">|   <span class="number">2</span> | æå¹³è€å¸ˆ        |</span><br><span class="line">|   <span class="number">3</span> | åˆ˜æµ·ç‡•è€å¸ˆ      |</span><br><span class="line">|   <span class="number">4</span> | æœ±äº‘æµ·è€å¸ˆ      |</span><br><span class="line">|   <span class="number">5</span> | ææ°è€å¸ˆ        |</span><br><span class="line">+-----+-----------------+</span><br><span class="line"><span class="number">5</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥è¯¢æå¹³è€å¸ˆæ•™æˆçš„è¯¾ç¨‹å</span></span><br><span class="line">mysql&gt; select cname <span class="keyword">from</span> course where teacher_id = (select tid <span class="keyword">from</span> teacher where tname=<span class="string">&#x27;æå¹³è€å¸ˆ&#x27;</span>);</span><br><span class="line">+--------+</span><br><span class="line">| cname  |</span><br><span class="line">+--------+</span><br><span class="line">| ç‰©ç†   |</span><br><span class="line">| ç¾æœ¯   |</span><br><span class="line">+--------+</span><br><span class="line"><span class="number">2</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å­æŸ¥è¯¢å‡ºä¸´æ—¶è¡¨ï¼Œä½œä¸ºteacher_idç­‰åˆ¤æ–­ä¾æ®</span></span><br><span class="line">select tid <span class="keyword">from</span> teacher where tname=<span class="string">&#x27;æå¹³è€å¸ˆ&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¸€ åˆ›å»ºè§†å›¾</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è¯­æ³•ï¼šCREATE VIEW è§†å›¾åç§° AS  SQLè¯­å¥</span></span><br><span class="line">create view teacher_view <span class="keyword">as</span> select tid <span class="keyword">from</span> teacher where tname=<span class="string">&#x27;æå¹³è€å¸ˆ&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#äºæ˜¯æŸ¥è¯¢æå¹³è€å¸ˆæ•™æˆçš„è¯¾ç¨‹åçš„sqlå¯ä»¥æ”¹å†™ä¸º</span></span><br><span class="line">mysql&gt; select cname <span class="keyword">from</span> course where teacher_id = (select tid <span class="keyword">from</span> teacher_view);</span><br><span class="line">+--------+</span><br><span class="line">| cname  |</span><br><span class="line">+--------+</span><br><span class="line">| ç‰©ç†   |</span><br><span class="line">| ç¾æœ¯   |</span><br><span class="line">+--------+</span><br><span class="line"><span class="number">2</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ï¼ï¼ï¼æ³¨æ„æ³¨æ„æ³¨æ„ï¼š</span></span><br><span class="line"><span class="comment">#1. ä½¿ç”¨è§†å›¾ä»¥åå°±æ— éœ€æ¯æ¬¡éƒ½é‡å†™å­æŸ¥è¯¢çš„sqlï¼Œä½†æ˜¯è¿™ä¹ˆæ•ˆç‡å¹¶ä¸é«˜ï¼Œè¿˜ä¸å¦‚æˆ‘ä»¬å†™å­æŸ¥è¯¢çš„æ•ˆç‡é«˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2. è€Œä¸”æœ‰ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜ï¼šè§†å›¾æ˜¯å­˜æ”¾åˆ°æ•°æ®åº“é‡Œçš„ï¼Œå¦‚æœæˆ‘ä»¬ç¨‹åºä¸­çš„sqlè¿‡åˆ†ä¾èµ–äºæ•°æ®åº“ä¸­å­˜æ”¾çš„è§†å›¾ï¼Œé‚£ä¹ˆæ„å‘³ç€ï¼Œä¸€æ—¦sqléœ€è¦ä¿®æ”¹ä¸”æ¶‰åŠåˆ°è§†å›¾çš„éƒ¨åˆ†ï¼Œåˆ™å¿…é¡»å»æ•°æ®åº“ä¸­è¿›è¡Œä¿®æ”¹ï¼Œè€Œé€šå¸¸åœ¨å…¬å¸ä¸­æ•°æ®åº“æœ‰ä¸“é—¨çš„DBAè´Ÿè´£ï¼Œä½ è¦æƒ³å®Œæˆä¿®æ”¹ï¼Œå¿…é¡»ä»˜å‡ºå¤§é‡çš„æ²Ÿé€šæˆæœ¬DBAå¯èƒ½æ‰ä¼šå¸®ä½ å®Œæˆä¿®æ”¹ï¼Œæå…¶åœ°ä¸æ–¹ä¾¿</span></span><br></pre></td></tr></table></figure>

<p><strong>äºŒ ä½¿ç”¨è§†å›¾</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¿®æ”¹è§†å›¾ï¼ŒåŸå§‹è¡¨ä¹Ÿè·Ÿç€æ”¹</span></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> course;</span><br><span class="line">+-----+--------+------------+</span><br><span class="line">| cid | cname  | teacher_id |</span><br><span class="line">+-----+--------+------------+</span><br><span class="line">|   <span class="number">1</span> | ç”Ÿç‰©   |          <span class="number">1</span> |</span><br><span class="line">|   <span class="number">2</span> | ç‰©ç†   |          <span class="number">2</span> |</span><br><span class="line">|   <span class="number">3</span> | ä½“è‚²   |          <span class="number">3</span> |</span><br><span class="line">|   <span class="number">4</span> | ç¾æœ¯   |          <span class="number">2</span> |</span><br><span class="line">+-----+--------+------------+</span><br><span class="line"><span class="number">4</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; create view course_view <span class="keyword">as</span> select * <span class="keyword">from</span> course; <span class="comment">#åˆ›å»ºè¡¨courseçš„è§†å›¾</span></span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.52</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> course_view;</span><br><span class="line">+-----+--------+------------+</span><br><span class="line">| cid | cname  | teacher_id |</span><br><span class="line">+-----+--------+------------+</span><br><span class="line">|   <span class="number">1</span> | ç”Ÿç‰©   |          <span class="number">1</span> |</span><br><span class="line">|   <span class="number">2</span> | ç‰©ç†   |          <span class="number">2</span> |</span><br><span class="line">|   <span class="number">3</span> | ä½“è‚²   |          <span class="number">3</span> |</span><br><span class="line">|   <span class="number">4</span> | ç¾æœ¯   |          <span class="number">2</span> |</span><br><span class="line">+-----+--------+------------+</span><br><span class="line"><span class="number">4</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; update course_view <span class="built_in">set</span> cname=<span class="string">&#x27;xxx&#x27;</span>; <span class="comment">#æ›´æ–°è§†å›¾ä¸­çš„æ•°æ®</span></span><br><span class="line">Query OK, <span class="number">4</span> rows affected (<span class="number">0.04</span> sec)</span><br><span class="line">Rows matched: <span class="number">4</span>  Changed: <span class="number">4</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql&gt; insert into course_view values(<span class="number">5</span>,<span class="string">&#x27;yyy&#x27;</span>,<span class="number">2</span>); <span class="comment">#å¾€è§†å›¾ä¸­æ’å…¥æ•°æ®</span></span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> course; <span class="comment">#å‘ç°åŸå§‹è¡¨çš„è®°å½•ä¹Ÿè·Ÿç€ä¿®æ”¹äº†</span></span><br><span class="line">+-----+-------+------------+</span><br><span class="line">| cid | cname | teacher_id |</span><br><span class="line">+-----+-------+------------+</span><br><span class="line">|   <span class="number">1</span> | xxx   |          <span class="number">1</span> |</span><br><span class="line">|   <span class="number">2</span> | xxx   |          <span class="number">2</span> |</span><br><span class="line">|   <span class="number">3</span> | xxx   |          <span class="number">3</span> |</span><br><span class="line">|   <span class="number">4</span> | xxx   |          <span class="number">2</span> |</span><br><span class="line">|   <span class="number">5</span> | yyy   |          <span class="number">2</span> |</span><br><span class="line">+-----+-------+------------+</span><br><span class="line"><span class="number">5</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¸åº”è¯¥ä¿®æ”¹è§†å›¾ä¸­çš„è®°å½•ï¼Œè€Œä¸”åœ¨æ¶‰åŠå¤šä¸ªè¡¨çš„æƒ…å†µä¸‹æ˜¯æ ¹æœ¬æ— æ³•ä¿®æ”¹è§†å›¾ä¸­çš„è®°å½•çš„ï¼Œå¦‚ä¸‹å›¾</p>
<p><img src="https://pic4.zhimg.com/80/v2-fa5be8e9a1447a73fee8484d77811c9f_720w.jpg" alt="img"></p>
<p><strong>ä¸‰ ä¿®æ”¹è§†å›¾</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">è¯­æ³•ï¼šALTER VIEW è§†å›¾åç§° AS SQLè¯­å¥</span><br><span class="line">mysql&gt; alter view teacher_view <span class="keyword">as</span> select * <span class="keyword">from</span> course where cid&gt;<span class="number">3</span>;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> teacher_view;</span><br><span class="line">+-----+-------+------------+</span><br><span class="line">| cid | cname | teacher_id |</span><br><span class="line">+-----+-------+------------+</span><br><span class="line">|   <span class="number">4</span> | xxx   |          <span class="number">2</span> |</span><br><span class="line">|   <span class="number">5</span> | yyy   |          <span class="number">2</span> |</span><br><span class="line">+-----+-------+------------+</span><br><span class="line"><span class="number">2</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p><strong>å›› åˆ é™¤è§†å›¾</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">è¯­æ³•ï¼šDROP VIEW è§†å›¾åç§°</span><br><span class="line"></span><br><span class="line">DROP VIEW teacher_view</span><br></pre></td></tr></table></figure>

<h3 id="äºŒ-è§¦å‘å™¨"><a href="#äºŒ-è§¦å‘å™¨" class="headerlink" title="äºŒ è§¦å‘å™¨"></a>äºŒ è§¦å‘å™¨</h3><p>ä½¿ç”¨è§¦å‘å™¨å¯ä»¥å®šåˆ¶ç”¨æˆ·å¯¹è¡¨è¿›è¡Œã€å¢ã€åˆ ã€æ”¹ã€‘æ“ä½œæ—¶å‰åçš„è¡Œä¸ºï¼Œæ³¨æ„ï¼šæ²¡æœ‰æŸ¥è¯¢</p>
<p><strong>ä¸€ åˆ›å»ºè§¦å‘å™¨</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ’å…¥å‰</span></span><br><span class="line">CREATE TRIGGER tri_before_insert_tb1 BEFORE INSERT ON tb1 FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    ...</span><br><span class="line">END</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å…¥å</span></span><br><span class="line">CREATE TRIGGER tri_after_insert_tb1 AFTER INSERT ON tb1 FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    ...</span><br><span class="line">END</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤å‰</span></span><br><span class="line">CREATE TRIGGER tri_before_delete_tb1 BEFORE DELETE ON tb1 FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    ...</span><br><span class="line">END</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤å</span></span><br><span class="line">CREATE TRIGGER tri_after_delete_tb1 AFTER DELETE ON tb1 FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    ...</span><br><span class="line">END</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°å‰</span></span><br><span class="line">CREATE TRIGGER tri_before_update_tb1 BEFORE UPDATE ON tb1 FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    ...</span><br><span class="line">END</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°å</span></span><br><span class="line">CREATE TRIGGER tri_after_update_tb1 AFTER UPDATE ON tb1 FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    ...</span><br><span class="line">END</span><br></pre></td></tr></table></figure>

<p>æ’å…¥åè§¦å‘è§¦å‘å™¨</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å‡†å¤‡è¡¨</span></span><br><span class="line">CREATE TABLE cmd (</span><br><span class="line">    <span class="built_in">id</span> INT PRIMARY KEY auto_increment,</span><br><span class="line">    USER CHAR (<span class="number">32</span>),</span><br><span class="line">    priv CHAR (<span class="number">10</span>),</span><br><span class="line">    cmd CHAR (<span class="number">64</span>),</span><br><span class="line">    sub_time datetime, <span class="comment">#æäº¤æ—¶é—´</span></span><br><span class="line">    success enum (<span class="string">&#x27;yes&#x27;</span>, <span class="string">&#x27;no&#x27;</span>) <span class="comment">#0ä»£è¡¨æ‰§è¡Œå¤±è´¥</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE errlog (</span><br><span class="line">    <span class="built_in">id</span> INT PRIMARY KEY auto_increment,</span><br><span class="line">    err_cmd CHAR (<span class="number">64</span>),</span><br><span class="line">    err_time datetime</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºè§¦å‘å™¨</span></span><br><span class="line">delimiter //</span><br><span class="line">CREATE TRIGGER tri_after_insert_cmd AFTER INSERT ON cmd FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    IF NEW.success = <span class="string">&#x27;no&#x27;</span> THEN <span class="comment">#ç­‰å€¼åˆ¤æ–­åªæœ‰ä¸€ä¸ªç­‰å·</span></span><br><span class="line">            INSERT INTO errlog(err_cmd, err_time) VALUES(NEW.cmd, NEW.sub_time) ; <span class="comment">#å¿…é¡»åŠ åˆ†å·</span></span><br><span class="line">      END IF ; <span class="comment">#å¿…é¡»åŠ åˆ†å·</span></span><br><span class="line">END//</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¾€è¡¨cmdä¸­æ’å…¥è®°å½•ï¼Œè§¦å‘è§¦å‘å™¨ï¼Œæ ¹æ®IFçš„æ¡ä»¶å†³å®šæ˜¯å¦æ’å…¥é”™è¯¯æ—¥å¿—</span></span><br><span class="line">INSERT INTO cmd (</span><br><span class="line">    USER,</span><br><span class="line">    priv,</span><br><span class="line">    cmd,</span><br><span class="line">    sub_time,</span><br><span class="line">    success</span><br><span class="line">)</span><br><span class="line">VALUES</span><br><span class="line">    (<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;0755&#x27;</span>,<span class="string">&#x27;ls -l /etc&#x27;</span>,NOW(),<span class="string">&#x27;yes&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;0755&#x27;</span>,<span class="string">&#x27;cat /etc/passwd&#x27;</span>,NOW(),<span class="string">&#x27;no&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;0755&#x27;</span>,<span class="string">&#x27;useradd xxx&#x27;</span>,NOW(),<span class="string">&#x27;no&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;0755&#x27;</span>,<span class="string">&#x27;ps aux&#x27;</span>,NOW(),<span class="string">&#x27;yes&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥è¯¢é”™è¯¯æ—¥å¿—ï¼Œå‘ç°æœ‰ä¸¤æ¡</span></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> errlog;</span><br><span class="line">+----+-----------------+---------------------+</span><br><span class="line">| <span class="built_in">id</span> | err_cmd         | err_time            |</span><br><span class="line">+----+-----------------+---------------------+</span><br><span class="line">|  <span class="number">1</span> | cat /etc/passwd | <span class="number">2017</span>-09-<span class="number">14</span> <span class="number">22</span>:<span class="number">18</span>:<span class="number">48</span> |</span><br><span class="line">|  <span class="number">2</span> | useradd xxx     | <span class="number">2017</span>-09-<span class="number">14</span> <span class="number">22</span>:<span class="number">18</span>:<span class="number">48</span> |</span><br><span class="line">+----+-----------------+---------------------+</span><br><span class="line"><span class="number">2</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p><strong>ç‰¹åˆ«çš„ï¼šNEWè¡¨ç¤ºå³å°†æ’å…¥çš„æ•°æ®è¡Œï¼ŒOLDè¡¨ç¤ºå³å°†åˆ é™¤çš„æ•°æ®è¡Œã€‚</strong></p>
<p><strong>äºŒ ä½¿ç”¨è§¦å‘å™¨</strong></p>
<p>è§¦å‘å™¨æ— æ³•ç”±ç”¨æˆ·ç›´æ¥è°ƒç”¨ï¼Œè€ŒçŸ¥ç”±äºå¯¹è¡¨çš„ã€å¢&#x2F;åˆ &#x2F;æ”¹ã€‘æ“ä½œè¢«åŠ¨å¼•å‘çš„ã€‚</p>
<p><strong>ä¸‰ åˆ é™¤è§¦å‘å™¨</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">drop trigger tri_after_insert_cmd;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸‰-äº‹åŠ¡"><a href="#ä¸‰-äº‹åŠ¡" class="headerlink" title="ä¸‰ äº‹åŠ¡"></a>ä¸‰ äº‹åŠ¡</h3><p>äº‹åŠ¡ç”¨äºå°†æŸäº›æ“ä½œçš„å¤šä¸ªSQLä½œä¸ºåŸå­æ€§æ“ä½œï¼Œä¸€æ—¦æœ‰æŸä¸€ä¸ªå‡ºç°é”™è¯¯ï¼Œå³å¯å›æ»šåˆ°åŸæ¥çš„çŠ¶æ€ï¼Œä»è€Œä¿è¯æ•°æ®åº“æ•°æ®å®Œæ•´æ€§ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">create table user(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">name char(<span class="number">32</span>),</span><br><span class="line">balance <span class="built_in">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">insert into user(name,balance)</span><br><span class="line">values</span><br><span class="line">(<span class="string">&#x27;wsb&#x27;</span>,<span class="number">1000</span>),</span><br><span class="line">(<span class="string">&#x27;egon&#x27;</span>,<span class="number">1000</span>),</span><br><span class="line">(<span class="string">&#x27;ysb&#x27;</span>,<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#åŸå­æ“ä½œ</span></span><br><span class="line">start transaction;</span><br><span class="line">update user <span class="built_in">set</span> balance=<span class="number">900</span> where name=<span class="string">&#x27;wsb&#x27;</span>; <span class="comment">#ä¹°æ”¯ä»˜100å…ƒ</span></span><br><span class="line">update user <span class="built_in">set</span> balance=<span class="number">1010</span> where name=<span class="string">&#x27;egon&#x27;</span>; <span class="comment">#ä¸­ä»‹æ‹¿èµ°10å…ƒ</span></span><br><span class="line">update user <span class="built_in">set</span> balance=<span class="number">1090</span> where name=<span class="string">&#x27;ysb&#x27;</span>; <span class="comment">#å–å®¶æ‹¿åˆ°90å…ƒ</span></span><br><span class="line">commit;</span><br><span class="line"></span><br><span class="line"><span class="comment">#å‡ºç°å¼‚å¸¸ï¼Œå›æ»šåˆ°åˆå§‹çŠ¶æ€</span></span><br><span class="line">start transaction;</span><br><span class="line">update user <span class="built_in">set</span> balance=<span class="number">900</span> where name=<span class="string">&#x27;wsb&#x27;</span>; <span class="comment">#ä¹°æ”¯ä»˜100å…ƒ</span></span><br><span class="line">update user <span class="built_in">set</span> balance=<span class="number">1010</span> where name=<span class="string">&#x27;egon&#x27;</span>; <span class="comment">#ä¸­ä»‹æ‹¿èµ°10å…ƒ</span></span><br><span class="line">uppdate user <span class="built_in">set</span> balance=<span class="number">1090</span> where name=<span class="string">&#x27;ysb&#x27;</span>; <span class="comment">#å–å®¶æ‹¿åˆ°90å…ƒ,å‡ºç°å¼‚å¸¸æ²¡æœ‰æ‹¿åˆ°</span></span><br><span class="line">rollback;</span><br><span class="line">commit;</span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> user;</span><br><span class="line">+----+------+---------+</span><br><span class="line">| <span class="built_in">id</span> | name | balance |</span><br><span class="line">+----+------+---------+</span><br><span class="line">|  <span class="number">1</span> | wsb  |    <span class="number">1000</span> |</span><br><span class="line">|  <span class="number">2</span> | egon |    <span class="number">1000</span> |</span><br><span class="line">|  <span class="number">3</span> | ysb  |    <span class="number">1000</span> |</span><br><span class="line">+----+------+---------+</span><br><span class="line"><span class="number">3</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="å››-å­˜å‚¨è¿‡ç¨‹"><a href="#å››-å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="å›› å­˜å‚¨è¿‡ç¨‹"></a>å›› å­˜å‚¨è¿‡ç¨‹</h3><p><strong>ä¸€ ä»‹ç»</strong></p>
<p>å­˜å‚¨è¿‡ç¨‹åŒ…å«äº†ä¸€ç³»åˆ—å¯æ‰§è¡Œçš„sqlè¯­å¥ï¼Œå­˜å‚¨è¿‡ç¨‹å­˜æ”¾äºMySQLä¸­ï¼Œé€šè¿‡è°ƒç”¨å®ƒçš„åå­—å¯ä»¥æ‰§è¡Œå…¶å†…éƒ¨çš„ä¸€å †sql</p>
<p>ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹çš„ä¼˜ç‚¹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. ç”¨äºæ›¿ä»£ç¨‹åºå†™çš„SQLè¯­å¥ï¼Œå®ç°ç¨‹åºä¸sqlè§£è€¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2. åŸºäºç½‘ç»œä¼ è¾“ï¼Œä¼ åˆ«åçš„æ•°æ®é‡å°ï¼Œè€Œç›´æ¥ä¼ sqlæ•°æ®é‡å¤§</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹çš„ç¼ºç‚¹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1. ç¨‹åºå‘˜æ‰©å±•åŠŸèƒ½ä¸æ–¹ä¾¿</span></span><br></pre></td></tr></table></figure>

<p><strong>è¡¥å……ï¼šç¨‹åºä¸æ•°æ®åº“ç»“åˆä½¿ç”¨çš„ä¸‰ç§æ–¹å¼</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ–¹å¼ä¸€ï¼š</span></span><br><span class="line">    MySQLï¼šå­˜å‚¨è¿‡ç¨‹</span><br><span class="line">    ç¨‹åºï¼šè°ƒç”¨å­˜å‚¨è¿‡ç¨‹</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–¹å¼äºŒï¼š</span></span><br><span class="line">    MySQLï¼š</span><br><span class="line">    ç¨‹åºï¼šçº¯SQLè¯­å¥</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–¹å¼ä¸‰ï¼š</span></span><br><span class="line">    MySQL:</span><br><span class="line">    ç¨‹åºï¼šç±»å’Œå¯¹è±¡ï¼Œå³ORMï¼ˆæœ¬è´¨è¿˜æ˜¯çº¯SQLè¯­å¥ï¼‰</span><br></pre></td></tr></table></figure>

<p><strong>äºŒ åˆ›å»ºç®€å•å­˜å‚¨è¿‡ç¨‹ï¼ˆæ— å‚ï¼‰</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">delimiter //</span><br><span class="line">create procedure p1()</span><br><span class="line">BEGIN</span><br><span class="line">    select * <span class="keyword">from</span> blog;</span><br><span class="line">    INSERT into blog(name,sub_time) values(<span class="string">&quot;xxx&quot;</span>,now());</span><br><span class="line">END //</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨mysqlä¸­è°ƒç”¨</span></span><br><span class="line">call p1() </span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨pythonä¸­åŸºäºpymysqlè°ƒç”¨</span></span><br><span class="line">cursor.callproc(<span class="string">&#x27;p1&#x27;</span>) </span><br><span class="line"><span class="built_in">print</span>(cursor.fetchall())</span><br></pre></td></tr></table></figure>

<p><strong>ä¸‰ åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼ˆæœ‰å‚ï¼‰</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">å¯¹äºå­˜å‚¨è¿‡ç¨‹ï¼Œå¯ä»¥æ¥æ”¶å‚æ•°ï¼Œå…¶å‚æ•°æœ‰ä¸‰ç±»ï¼š</span><br><span class="line"></span><br><span class="line"><span class="comment">#in          ä»…ç”¨äºä¼ å…¥å‚æ•°ç”¨</span></span><br><span class="line"><span class="comment">#out        ä»…ç”¨äºè¿”å›å€¼ç”¨</span></span><br><span class="line"><span class="comment">#inout     æ—¢å¯ä»¥ä¼ å…¥åˆå¯ä»¥å½“ä½œè¿”å›å€¼</span></span><br></pre></td></tr></table></figure>

<p>in:ä¼ å…¥å‚æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">delimiter //</span><br><span class="line">create procedure p2(</span><br><span class="line">    <span class="keyword">in</span> n1 <span class="built_in">int</span>,</span><br><span class="line">    <span class="keyword">in</span> n2 <span class="built_in">int</span></span><br><span class="line">)</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">    select * <span class="keyword">from</span> blog where <span class="built_in">id</span> &gt; n1;</span><br><span class="line">END //</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨mysqlä¸­è°ƒç”¨</span></span><br><span class="line">call p2(<span class="number">3</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨pythonä¸­åŸºäºpymysqlè°ƒç”¨</span></span><br><span class="line">cursor.callproc(<span class="string">&#x27;p2&#x27;</span>,(<span class="number">3</span>,<span class="number">2</span>))</span><br><span class="line"><span class="built_in">print</span>(cursor.fetchall())</span><br></pre></td></tr></table></figure>

<p>outï¼šè¿”å›å€¼</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">delimiter //</span><br><span class="line">create procedure p3(</span><br><span class="line">    <span class="keyword">in</span> n1 <span class="built_in">int</span>,</span><br><span class="line">    out res <span class="built_in">int</span></span><br><span class="line">)</span><br><span class="line">BEGIN</span><br><span class="line">    select * <span class="keyword">from</span> blog where <span class="built_in">id</span> &gt; n1;</span><br><span class="line">    <span class="built_in">set</span> res = <span class="number">1</span>;</span><br><span class="line">END //</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨mysqlä¸­è°ƒç”¨</span></span><br><span class="line"><span class="built_in">set</span> @res=<span class="number">0</span>; <span class="comment">#0ä»£è¡¨å‡ï¼ˆæ‰§è¡Œå¤±è´¥ï¼‰ï¼Œ1ä»£è¡¨çœŸï¼ˆæ‰§è¡ŒæˆåŠŸï¼‰</span></span><br><span class="line">call p3(<span class="number">3</span>,@res);</span><br><span class="line">select @res;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨pythonä¸­åŸºäºpymysqlè°ƒç”¨</span></span><br><span class="line">cursor.callproc(<span class="string">&#x27;p3&#x27;</span>,(<span class="number">3</span>,<span class="number">0</span>)) <span class="comment">#0ç›¸å½“äºset @res=0</span></span><br><span class="line"><span class="built_in">print</span>(cursor.fetchall()) <span class="comment">#æŸ¥è¯¢selectçš„æŸ¥è¯¢ç»“æœ</span></span><br><span class="line"></span><br><span class="line">cursor.execute(<span class="string">&#x27;select @_p3_0,@_p3_1;&#x27;</span>) <span class="comment">#@p3_0ä»£è¡¨ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ@p3_1ä»£è¡¨ç¬¬äºŒä¸ªå‚æ•°ï¼Œå³è¿”å›å€¼</span></span><br><span class="line"><span class="built_in">print</span>(cursor.fetchall())</span><br></pre></td></tr></table></figure>

<p>inout:æ—¢å¯ä»¥ä¼ å…¥åˆå¯ä»¥è¿”å›</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">delimiter //</span><br><span class="line">create procedure p4(</span><br><span class="line">    inout n1 <span class="built_in">int</span></span><br><span class="line">)</span><br><span class="line">BEGIN</span><br><span class="line">    select * <span class="keyword">from</span> blog where <span class="built_in">id</span> &gt; n1;</span><br><span class="line">    <span class="built_in">set</span> n1 = <span class="number">1</span>;</span><br><span class="line">END //</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨mysqlä¸­è°ƒç”¨</span></span><br><span class="line"><span class="built_in">set</span> @x=<span class="number">3</span>;</span><br><span class="line">call p4(@x);</span><br><span class="line">select @x;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨pythonä¸­åŸºäºpymysqlè°ƒç”¨</span></span><br><span class="line">cursor.callproc(<span class="string">&#x27;p4&#x27;</span>,(<span class="number">3</span>,))</span><br><span class="line"><span class="built_in">print</span>(cursor.fetchall()) <span class="comment">#æŸ¥è¯¢selectçš„æŸ¥è¯¢ç»“æœ</span></span><br><span class="line"></span><br><span class="line">cursor.execute(<span class="string">&#x27;select @_p4_0;&#x27;</span>) </span><br><span class="line"><span class="built_in">print</span>(cursor.fetchall())</span><br></pre></td></tr></table></figure>

<p>äº‹åŠ¡</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä»‹ç»</span></span><br><span class="line">delimiter //</span><br><span class="line">            create procedure p4(</span><br><span class="line">                out status <span class="built_in">int</span></span><br><span class="line">            )</span><br><span class="line">            BEGIN</span><br><span class="line">                <span class="number">1.</span> å£°æ˜å¦‚æœå‡ºç°å¼‚å¸¸åˆ™æ‰§è¡Œ&#123;</span><br><span class="line">                    <span class="built_in">set</span> status = <span class="number">1</span>;</span><br><span class="line">                    rollback;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                å¼€å§‹äº‹åŠ¡</span><br><span class="line">                    -- ç”±ç§¦å…µè´¦æˆ·å‡å»<span class="number">100</span></span><br><span class="line">                    -- æ–¹å°‘ä¼Ÿè´¦æˆ·åŠ <span class="number">90</span></span><br><span class="line">                    -- å¼ æ ¹è´¦æˆ·åŠ <span class="number">10</span></span><br><span class="line">                    commit;</span><br><span class="line">                ç»“æŸ</span><br><span class="line"></span><br><span class="line">                <span class="built_in">set</span> status = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            END //</span><br><span class="line">            delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®ç°</span></span><br><span class="line">delimiter //</span><br><span class="line">create PROCEDURE p5(</span><br><span class="line">    OUT p_return_code tinyint</span><br><span class="line">)</span><br><span class="line">BEGIN </span><br><span class="line">    DECLARE exit handler <span class="keyword">for</span> sqlexception </span><br><span class="line">    BEGIN </span><br><span class="line">        -- ERROR </span><br><span class="line">        <span class="built_in">set</span> p_return_code = <span class="number">1</span>; </span><br><span class="line">        rollback; </span><br><span class="line">    END; </span><br><span class="line"></span><br><span class="line">    DECLARE exit handler <span class="keyword">for</span> sqlwarning </span><br><span class="line">    BEGIN </span><br><span class="line">        -- WARNING </span><br><span class="line">        <span class="built_in">set</span> p_return_code = <span class="number">2</span>; </span><br><span class="line">        rollback; </span><br><span class="line">    END; </span><br><span class="line"></span><br><span class="line">    START TRANSACTION; </span><br><span class="line">        DELETE <span class="keyword">from</span> tb1; <span class="comment">#æ‰§è¡Œå¤±è´¥</span></span><br><span class="line">        insert into blog(name,sub_time) values(<span class="string">&#x27;yyy&#x27;</span>,now());</span><br><span class="line">    COMMIT; </span><br><span class="line"></span><br><span class="line">    -- SUCCESS </span><br><span class="line">    <span class="built_in">set</span> p_return_code = <span class="number">0</span>; <span class="comment">#0ä»£è¡¨æ‰§è¡ŒæˆåŠŸ</span></span><br><span class="line"></span><br><span class="line">END //</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨mysqlä¸­è°ƒç”¨å­˜å‚¨è¿‡ç¨‹</span></span><br><span class="line"><span class="built_in">set</span> @res=<span class="number">123</span>;</span><br><span class="line">call p5(@res);</span><br><span class="line">select @res;</span><br><span class="line"></span><br><span class="line"><span class="comment">#åœ¨pythonä¸­åŸºäºpymysqlè°ƒç”¨å­˜å‚¨è¿‡ç¨‹</span></span><br><span class="line">cursor.callproc(<span class="string">&#x27;p5&#x27;</span>,(<span class="number">123</span>,))</span><br><span class="line"><span class="built_in">print</span>(cursor.fetchall()) <span class="comment">#æŸ¥è¯¢selectçš„æŸ¥è¯¢ç»“æœ</span></span><br><span class="line"></span><br><span class="line">cursor.execute(<span class="string">&#x27;select @_p5_0;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(cursor.fetchall())</span><br></pre></td></tr></table></figure>

<p><strong>å›› æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹</strong></p>
<p>åœ¨MySQLä¸­æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">-- æ— å‚æ•°</span><br><span class="line">call proc_name()</span><br><span class="line"></span><br><span class="line">-- æœ‰å‚æ•°ï¼Œå…¨<span class="keyword">in</span></span><br><span class="line">call proc_name(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">-- æœ‰å‚æ•°ï¼Œæœ‰<span class="keyword">in</span>ï¼Œoutï¼Œinout</span><br><span class="line"><span class="built_in">set</span> @t1=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">set</span> @t2=<span class="number">3</span>;</span><br><span class="line">call proc_name(<span class="number">1</span>,<span class="number">2</span>,@t1,@t2)</span><br><span class="line"></span><br><span class="line">æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹</span><br></pre></td></tr></table></figure>

<p>åœ¨pythonä¸­åŸºäºpymysqlæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line">conn = pymysql.connect(host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="number">3306</span>, user=<span class="string">&#x27;root&#x27;</span>, passwd=<span class="string">&#x27;123&#x27;</span>, db=<span class="string">&#x27;t1&#x27;</span>)</span><br><span class="line">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)</span><br><span class="line"><span class="comment"># æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹</span></span><br><span class="line">cursor.callproc(<span class="string">&#x27;p1&#x27;</span>, args=(<span class="number">1</span>, <span class="number">22</span>, <span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line"><span class="comment"># è·å–æ‰§è¡Œå®Œå­˜å‚¨çš„å‚æ•°</span></span><br><span class="line">cursor.execute(<span class="string">&quot;select @_p1_0,@_p1_1,@_p1_2,@_p1_3&quot;</span>)</span><br><span class="line">result = cursor.fetchall()</span><br><span class="line"></span><br><span class="line">conn.commit()</span><br><span class="line">cursor.close()</span><br><span class="line">conn.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(result)</span><br></pre></td></tr></table></figure>

<p><strong>äº” åˆ é™¤å­˜å‚¨è¿‡ç¨‹</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">drop procedure proc_name;</span><br></pre></td></tr></table></figure>

<h3 id="äº”-å‡½æ•°"><a href="#äº”-å‡½æ•°" class="headerlink" title="äº” å‡½æ•°"></a>äº” å‡½æ•°</h3><p>MySQLä¸­æä¾›äº†è®¸å¤šå†…ç½®å‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ä¸€ã€æ•°å­¦å‡½æ•°</span><br><span class="line">    ROUND(x,y)</span><br><span class="line">        è¿”å›å‚æ•°xçš„å››èˆäº”å…¥çš„æœ‰yä½å°æ•°çš„å€¼</span><br><span class="line"></span><br><span class="line">    RAND()</span><br><span class="line">        è¿”å›ï¼åˆ°ï¼‘å†…çš„éšæœºå€¼,å¯ä»¥é€šè¿‡æä¾›ä¸€ä¸ªå‚æ•°(ç§å­)ä½¿RAND()éšæœºæ•°ç”Ÿæˆå™¨ç”Ÿæˆä¸€ä¸ªæŒ‡å®šçš„å€¼ã€‚</span><br><span class="line"></span><br><span class="line">äºŒã€èšåˆå‡½æ•°(å¸¸ç”¨äºGROUP BYä»å¥çš„SELECTæŸ¥è¯¢ä¸­)</span><br><span class="line">    AVG(col)è¿”å›æŒ‡å®šåˆ—çš„å¹³å‡å€¼</span><br><span class="line">    COUNT(col)è¿”å›æŒ‡å®šåˆ—ä¸­éNULLå€¼çš„ä¸ªæ•°</span><br><span class="line">    MIN(col)è¿”å›æŒ‡å®šåˆ—çš„æœ€å°å€¼</span><br><span class="line">    MAX(col)è¿”å›æŒ‡å®šåˆ—çš„æœ€å¤§å€¼</span><br><span class="line">    SUM(col)è¿”å›æŒ‡å®šåˆ—çš„æ‰€æœ‰å€¼ä¹‹å’Œ</span><br><span class="line">    GROUP_CONCAT(col) è¿”å›ç”±å±äºä¸€ç»„çš„åˆ—å€¼è¿æ¥ç»„åˆè€Œæˆçš„ç»“æœ    </span><br><span class="line"></span><br><span class="line">ä¸‰ã€å­—ç¬¦ä¸²å‡½æ•°</span><br><span class="line"></span><br><span class="line">    CHAR_LENGTH(<span class="built_in">str</span>)</span><br><span class="line">        è¿”å›å€¼ä¸ºå­—ç¬¦ä¸²<span class="built_in">str</span> çš„é•¿åº¦ï¼Œé•¿åº¦çš„å•ä½ä¸ºå­—ç¬¦ã€‚ä¸€ä¸ªå¤šå­—èŠ‚å­—ç¬¦ç®—ä½œä¸€ä¸ªå•å­—ç¬¦ã€‚</span><br><span class="line">    CONCAT(str1,str2,...)</span><br><span class="line">        å­—ç¬¦ä¸²æ‹¼æ¥</span><br><span class="line">        å¦‚æœ‰ä»»ä½•ä¸€ä¸ªå‚æ•°ä¸ºNULL ï¼Œåˆ™è¿”å›å€¼ä¸º NULLã€‚</span><br><span class="line">    CONCAT_WS(separator,str1,str2,...)</span><br><span class="line">        å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆè‡ªå®šä¹‰è¿æ¥ç¬¦ï¼‰</span><br><span class="line">        CONCAT_WS()ä¸ä¼šå¿½ç•¥ä»»ä½•ç©ºå­—ç¬¦ä¸²ã€‚ (ç„¶è€Œä¼šå¿½ç•¥æ‰€æœ‰çš„ NULLï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">    CONV(N,from_base,to_base)</span><br><span class="line">        è¿›åˆ¶è½¬æ¢</span><br><span class="line">        ä¾‹å¦‚ï¼š</span><br><span class="line">            SELECT CONV(<span class="string">&#x27;a&#x27;</span>,<span class="number">16</span>,<span class="number">2</span>); è¡¨ç¤ºå°† a ç”±<span class="number">16</span>è¿›åˆ¶è½¬æ¢ä¸º<span class="number">2</span>è¿›åˆ¶å­—ç¬¦ä¸²è¡¨ç¤º</span><br><span class="line"></span><br><span class="line">    FORMAT(X,D)</span><br><span class="line">        å°†æ•°å­—X çš„æ ¼å¼å†™ä¸º<span class="string">&#x27;#,###,###.##&#x27;</span>,ä»¥å››èˆäº”å…¥çš„æ–¹å¼ä¿ç•™å°æ•°ç‚¹å D ä½ï¼Œ å¹¶å°†ç»“æœä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ã€‚è‹¥  D ä¸º <span class="number">0</span>, åˆ™è¿”å›ç»“æœä¸å¸¦æœ‰å°æ•°ç‚¹ï¼Œæˆ–ä¸å«å°æ•°éƒ¨åˆ†ã€‚</span><br><span class="line">        ä¾‹å¦‚ï¼š</span><br><span class="line">            SELECT FORMAT(<span class="number">12332.1</span>,<span class="number">4</span>); ç»“æœä¸ºï¼š <span class="string">&#x27;12,332.1000&#x27;</span></span><br><span class="line">    INSERT(<span class="built_in">str</span>,pos,<span class="built_in">len</span>,newstr)</span><br><span class="line">        åœ¨<span class="built_in">str</span>çš„æŒ‡å®šä½ç½®æ’å…¥å­—ç¬¦ä¸²</span><br><span class="line">            posï¼šè¦æ›¿æ¢ä½ç½®å…¶å®ä½ç½®</span><br><span class="line">            <span class="built_in">len</span>ï¼šæ›¿æ¢çš„é•¿åº¦</span><br><span class="line">            newstrï¼šæ–°å­—ç¬¦ä¸²</span><br><span class="line">        ç‰¹åˆ«çš„ï¼š</span><br><span class="line">            å¦‚æœposè¶…è¿‡åŸå­—ç¬¦ä¸²é•¿åº¦ï¼Œåˆ™è¿”å›åŸå­—ç¬¦ä¸²</span><br><span class="line">            å¦‚æœ<span class="built_in">len</span>è¶…è¿‡åŸå­—ç¬¦ä¸²é•¿åº¦ï¼Œåˆ™ç”±æ–°å­—ç¬¦ä¸²å®Œå…¨æ›¿æ¢</span><br><span class="line">    INSTR(<span class="built_in">str</span>,substr)</span><br><span class="line">        è¿”å›å­—ç¬¦ä¸² <span class="built_in">str</span> ä¸­å­å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå‡ºç°ä½ç½®ã€‚</span><br><span class="line"></span><br><span class="line">    LEFT(<span class="built_in">str</span>,<span class="built_in">len</span>)</span><br><span class="line">        è¿”å›å­—ç¬¦ä¸²<span class="built_in">str</span> ä»å¼€å§‹çš„<span class="built_in">len</span>ä½ç½®çš„å­åºåˆ—å­—ç¬¦ã€‚</span><br><span class="line"></span><br><span class="line">    LOWER(<span class="built_in">str</span>)</span><br><span class="line">        å˜å°å†™</span><br><span class="line"></span><br><span class="line">    UPPER(<span class="built_in">str</span>)</span><br><span class="line">        å˜å¤§å†™</span><br><span class="line"></span><br><span class="line">    REVERSE(<span class="built_in">str</span>)</span><br><span class="line">        è¿”å›å­—ç¬¦ä¸² <span class="built_in">str</span> ï¼Œé¡ºåºå’Œå­—ç¬¦é¡ºåºç›¸åã€‚</span><br><span class="line"></span><br><span class="line">    SUBSTRING(<span class="built_in">str</span>,pos) , SUBSTRING(<span class="built_in">str</span> FROM pos) SUBSTRING(<span class="built_in">str</span>,pos,<span class="built_in">len</span>) , SUBSTRING(<span class="built_in">str</span> FROM pos FOR <span class="built_in">len</span>)</span><br><span class="line">        ä¸å¸¦æœ‰<span class="built_in">len</span> å‚æ•°çš„æ ¼å¼ä»å­—ç¬¦ä¸²<span class="built_in">str</span>è¿”å›ä¸€ä¸ªå­å­—ç¬¦ä¸²ï¼Œèµ·å§‹äºä½ç½® posã€‚å¸¦æœ‰<span class="built_in">len</span>å‚æ•°çš„æ ¼å¼ä»å­—ç¬¦ä¸²<span class="built_in">str</span>è¿”å›ä¸€ä¸ªé•¿åº¦åŒ<span class="built_in">len</span>å­—ç¬¦ç›¸åŒçš„å­å­—ç¬¦ä¸²ï¼Œèµ·å§‹äºä½ç½® posã€‚ ä½¿ç”¨ FROMçš„æ ¼å¼ä¸ºæ ‡å‡† SQL è¯­æ³•ã€‚ä¹Ÿå¯èƒ½å¯¹posä½¿ç”¨ä¸€ä¸ªè´Ÿå€¼ã€‚å‡è‹¥è¿™æ ·ï¼Œåˆ™å­å­—ç¬¦ä¸²çš„ä½ç½®èµ·å§‹äºå­—ç¬¦ä¸²ç»“å°¾çš„pos å­—ç¬¦ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²çš„å¼€å¤´ä½ç½®ã€‚åœ¨ä»¥ä¸‹æ ¼å¼çš„å‡½æ•°ä¸­å¯ä»¥å¯¹pos ä½¿ç”¨ä¸€ä¸ªè´Ÿå€¼ã€‚</span><br><span class="line"></span><br><span class="line">        mysql&gt; SELECT SUBSTRING(<span class="string">&#x27;Quadratically&#x27;</span>,<span class="number">5</span>);</span><br><span class="line">            -&gt; <span class="string">&#x27;ratically&#x27;</span></span><br><span class="line"></span><br><span class="line">        mysql&gt; SELECT SUBSTRING(<span class="string">&#x27;foobarbar&#x27;</span> FROM <span class="number">4</span>);</span><br><span class="line">            -&gt; <span class="string">&#x27;barbar&#x27;</span></span><br><span class="line"></span><br><span class="line">        mysql&gt; SELECT SUBSTRING(<span class="string">&#x27;Quadratically&#x27;</span>,<span class="number">5</span>,<span class="number">6</span>);</span><br><span class="line">            -&gt; <span class="string">&#x27;ratica&#x27;</span></span><br><span class="line"></span><br><span class="line">        mysql&gt; SELECT SUBSTRING(<span class="string">&#x27;Sakila&#x27;</span>, -<span class="number">3</span>);</span><br><span class="line">            -&gt; <span class="string">&#x27;ila&#x27;</span></span><br><span class="line"></span><br><span class="line">        mysql&gt; SELECT SUBSTRING(<span class="string">&#x27;Sakila&#x27;</span>, -<span class="number">5</span>, <span class="number">3</span>);</span><br><span class="line">            -&gt; <span class="string">&#x27;aki&#x27;</span></span><br><span class="line"></span><br><span class="line">        mysql&gt; SELECT SUBSTRING(<span class="string">&#x27;Sakila&#x27;</span> FROM -<span class="number">4</span> FOR <span class="number">2</span>);</span><br><span class="line">            -&gt; <span class="string">&#x27;ki&#x27;</span></span><br><span class="line"></span><br><span class="line">å››ã€æ—¥æœŸå’Œæ—¶é—´å‡½æ•°</span><br><span class="line">    CURDATE()æˆ–CURRENT_DATE() è¿”å›å½“å‰çš„æ—¥æœŸ</span><br><span class="line">    CURTIME()æˆ–CURRENT_TIME() è¿”å›å½“å‰çš„æ—¶é—´</span><br><span class="line">    DAYOFWEEK(date)   è¿”å›dateæ‰€ä»£è¡¨çš„ä¸€æ˜ŸæœŸä¸­çš„ç¬¬å‡ å¤©(<span class="number">1</span>~<span class="number">7</span>)</span><br><span class="line">    DAYOFMONTH(date)  è¿”å›dateæ˜¯ä¸€ä¸ªæœˆçš„ç¬¬å‡ å¤©(<span class="number">1</span>~<span class="number">31</span>)</span><br><span class="line">    DAYOFYEAR(date)   è¿”å›dateæ˜¯ä¸€å¹´çš„ç¬¬å‡ å¤©(<span class="number">1</span>~<span class="number">366</span>)</span><br><span class="line">    DAYNAME(date)   è¿”å›dateçš„æ˜ŸæœŸåï¼Œå¦‚ï¼šSELECT DAYNAME(CURRENT_DATE);</span><br><span class="line">    FROM_UNIXTIME(ts,fmt)  æ ¹æ®æŒ‡å®šçš„fmtæ ¼å¼ï¼Œæ ¼å¼åŒ–UNIXæ—¶é—´æˆ³ts</span><br><span class="line">    HOUR(time)   è¿”å›timeçš„å°æ—¶å€¼(<span class="number">0</span>~<span class="number">23</span>)</span><br><span class="line">    MINUTE(time)   è¿”å›timeçš„åˆ†é’Ÿå€¼(<span class="number">0</span>~<span class="number">59</span>)</span><br><span class="line">    MONTH(date)   è¿”å›dateçš„æœˆä»½å€¼(<span class="number">1</span>~<span class="number">12</span>)</span><br><span class="line">    MONTHNAME(date)   è¿”å›dateçš„æœˆä»½åï¼Œå¦‚ï¼šSELECT MONTHNAME(CURRENT_DATE);</span><br><span class="line">    NOW()    è¿”å›å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´</span><br><span class="line">    QUARTER(date)   è¿”å›dateåœ¨ä¸€å¹´ä¸­çš„å­£åº¦(<span class="number">1</span>~<span class="number">4</span>)ï¼Œå¦‚SELECT QUARTER(CURRENT_DATE);</span><br><span class="line">    WEEK(date)   è¿”å›æ—¥æœŸdateä¸ºä¸€å¹´ä¸­ç¬¬å‡ å‘¨(<span class="number">0</span>~<span class="number">53</span>)</span><br><span class="line">    YEAR(date)   è¿”å›æ—¥æœŸdateçš„å¹´ä»½(<span class="number">1000</span>~<span class="number">9999</span>)</span><br><span class="line"></span><br><span class="line">    é‡ç‚¹:</span><br><span class="line">    DATE_FORMAT(date,<span class="built_in">format</span>) æ ¹æ®<span class="built_in">format</span>å­—ç¬¦ä¸²æ ¼å¼åŒ–dateå€¼</span><br><span class="line"></span><br><span class="line">       mysql&gt; SELECT DATE_FORMAT(<span class="string">&#x27;2009-10-04 22:23:00&#x27;</span>, <span class="string">&#x27;%W %M %Y&#x27;</span>);</span><br><span class="line">        -&gt; <span class="string">&#x27;Sunday October 2009&#x27;</span></span><br><span class="line">       mysql&gt; SELECT DATE_FORMAT(<span class="string">&#x27;2007-10-04 22:23:00&#x27;</span>, <span class="string">&#x27;%H:%i:%s&#x27;</span>);</span><br><span class="line">        -&gt; <span class="string">&#x27;22:23:00&#x27;</span></span><br><span class="line">       mysql&gt; SELECT DATE_FORMAT(<span class="string">&#x27;1900-10-04 22:23:00&#x27;</span>,</span><br><span class="line">        -&gt;                 <span class="string">&#x27;%D %y %a %d %m %b %j&#x27;</span>);</span><br><span class="line">        -&gt; <span class="string">&#x27;4th 00 Thu 04 10 Oct 277&#x27;</span></span><br><span class="line">       mysql&gt; SELECT DATE_FORMAT(<span class="string">&#x27;1997-10-04 22:23:00&#x27;</span>,</span><br><span class="line">        -&gt;                 <span class="string">&#x27;%H %k %I %r %T %S %w&#x27;</span>);</span><br><span class="line">        -&gt; <span class="string">&#x27;22 22 10 10:23:00 PM 22:23:00 00 6&#x27;</span></span><br><span class="line">       mysql&gt; SELECT DATE_FORMAT(<span class="string">&#x27;1999-01-01&#x27;</span>, <span class="string">&#x27;%X %V&#x27;</span>);</span><br><span class="line">        -&gt; <span class="string">&#x27;1998 52&#x27;</span></span><br><span class="line">       mysql&gt; SELECT DATE_FORMAT(<span class="string">&#x27;2006-06-00&#x27;</span>, <span class="string">&#x27;%d&#x27;</span>);</span><br><span class="line">        -&gt; <span class="string">&#x27;00&#x27;</span></span><br><span class="line"></span><br><span class="line">äº”ã€åŠ å¯†å‡½æ•°</span><br><span class="line">    MD5()    </span><br><span class="line">        è®¡ç®—å­—ç¬¦ä¸²<span class="built_in">str</span>çš„MD5æ ¡éªŒå’Œ</span><br><span class="line">    PASSWORD(<span class="built_in">str</span>)   </span><br><span class="line">        è¿”å›å­—ç¬¦ä¸²<span class="built_in">str</span>çš„åŠ å¯†ç‰ˆæœ¬ï¼Œè¿™ä¸ªåŠ å¯†è¿‡ç¨‹æ˜¯ä¸å¯é€†è½¬çš„ï¼Œå’ŒUNIXå¯†ç åŠ å¯†è¿‡ç¨‹ä½¿ç”¨ä¸åŒçš„ç®—æ³•ã€‚</span><br><span class="line"></span><br><span class="line">å…­ã€æ§åˆ¶æµå‡½æ•°            </span><br><span class="line">    CASE WHEN[test1] THEN [result1]...ELSE [default] END</span><br><span class="line">        å¦‚æœtestNæ˜¯çœŸï¼Œåˆ™è¿”å›resultNï¼Œå¦åˆ™è¿”å›default</span><br><span class="line">    CASE [test] WHEN[val1] THEN [result]...ELSE [default]END  </span><br><span class="line">        å¦‚æœtestå’ŒvalNç›¸ç­‰ï¼Œåˆ™è¿”å›resultNï¼Œå¦åˆ™è¿”å›default</span><br><span class="line"></span><br><span class="line">    IF(test,t,f)   </span><br><span class="line">        å¦‚æœtestæ˜¯çœŸï¼Œè¿”å›tï¼›å¦åˆ™è¿”å›f</span><br><span class="line"></span><br><span class="line">    IFNULL(arg1,arg2) </span><br><span class="line">        å¦‚æœarg1ä¸æ˜¯ç©ºï¼Œè¿”å›arg1ï¼Œå¦åˆ™è¿”å›arg2</span><br><span class="line"></span><br><span class="line">    NULLIF(arg1,arg2) </span><br><span class="line">        å¦‚æœarg1=arg2è¿”å›NULLï¼›å¦åˆ™è¿”å›arg1        </span><br><span class="line"></span><br><span class="line">ä¸ƒã€æ§åˆ¶æµå‡½æ•°å°ç»ƒä¹ </span><br><span class="line"><span class="comment">#7.1ã€å‡†å¤‡è¡¨</span></span><br><span class="line">/*</span><br><span class="line">Navicat MySQL Data Transfer</span><br><span class="line"></span><br><span class="line">Source Server         : localhost_3306</span><br><span class="line">Source Server Version : <span class="number">50720</span></span><br><span class="line">Source Host           : localhost:<span class="number">3306</span></span><br><span class="line">Source Database       : student</span><br><span class="line"></span><br><span class="line">Target Server <span class="type">Type</span>    : MYSQL</span><br><span class="line">Target Server Version : <span class="number">50720</span></span><br><span class="line">File Encoding         : <span class="number">65001</span></span><br><span class="line"></span><br><span class="line">Date: <span class="number">2018</span>-01-02 <span class="number">12</span>:05:<span class="number">30</span></span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">SET FOREIGN_KEY_CHECKS=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure <span class="keyword">for</span> course</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `course`;</span><br><span class="line">CREATE TABLE `course` (</span><br><span class="line">  `c_id` <span class="built_in">int</span>(<span class="number">11</span>) NOT NULL,</span><br><span class="line">  `c_name` varchar(<span class="number">255</span>) DEFAULT NULL,</span><br><span class="line">  `t_id` <span class="built_in">int</span>(<span class="number">11</span>) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`c_id`),</span><br><span class="line">  KEY `t_id` (`t_id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of course</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `course` VALUES (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">INSERT INTO `course` VALUES (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;java&#x27;</span>, <span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">INSERT INTO `course` VALUES (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;linux&#x27;</span>, <span class="string">&#x27;3&#x27;</span>);</span><br><span class="line">INSERT INTO `course` VALUES (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;web&#x27;</span>, <span class="string">&#x27;2&#x27;</span>);</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure <span class="keyword">for</span> score</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `score`;</span><br><span class="line">CREATE TABLE `score` (</span><br><span class="line">  `<span class="built_in">id</span>` <span class="built_in">int</span>(<span class="number">11</span>) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `s_id` <span class="built_in">int</span>(<span class="number">10</span>) DEFAULT NULL,</span><br><span class="line">  `c_id` <span class="built_in">int</span>(<span class="number">11</span>) DEFAULT NULL,</span><br><span class="line">  `num` double DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`<span class="built_in">id</span>`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=<span class="number">12</span> DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of score</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `score` VALUES (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;79&#x27;</span>);</span><br><span class="line">INSERT INTO `score` VALUES (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;78&#x27;</span>);</span><br><span class="line">INSERT INTO `score` VALUES (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;35&#x27;</span>);</span><br><span class="line">INSERT INTO `score` VALUES (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;32&#x27;</span>);</span><br><span class="line">INSERT INTO `score` VALUES (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;66&#x27;</span>);</span><br><span class="line">INSERT INTO `score` VALUES (<span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;77&#x27;</span>);</span><br><span class="line">INSERT INTO `score` VALUES (<span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;68&#x27;</span>);</span><br><span class="line">INSERT INTO `score` VALUES (<span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;66&#x27;</span>);</span><br><span class="line">INSERT INTO `score` VALUES (<span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;69&#x27;</span>);</span><br><span class="line">INSERT INTO `score` VALUES (<span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;75&#x27;</span>);</span><br><span class="line">INSERT INTO `score` VALUES (<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;66.7&#x27;</span>);</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure <span class="keyword">for</span> student</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `student`;</span><br><span class="line">CREATE TABLE `student` (</span><br><span class="line">  `s_id` varchar(<span class="number">20</span>) NOT NULL,</span><br><span class="line">  `s_name` varchar(<span class="number">255</span>) DEFAULT NULL,</span><br><span class="line">  `s_age` <span class="built_in">int</span>(<span class="number">10</span>) DEFAULT NULL,</span><br><span class="line">  `s_sex` char(<span class="number">1</span>) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`s_id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of student</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `student` VALUES (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;é²ç­&#x27;</span>, <span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span>);</span><br><span class="line">INSERT INTO `student` VALUES (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;è²‚è‰&#x27;</span>, <span class="string">&#x27;20&#x27;</span>, <span class="string">&#x27;å¥³&#x27;</span>);</span><br><span class="line">INSERT INTO `student` VALUES (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;åˆ˜å¤‡&#x27;</span>, <span class="string">&#x27;35&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span>);</span><br><span class="line">INSERT INTO `student` VALUES (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;å…³ç¾½&#x27;</span>, <span class="string">&#x27;34&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span>);</span><br><span class="line">INSERT INTO `student` VALUES (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;å¼ é£&#x27;</span>, <span class="string">&#x27;33&#x27;</span>, <span class="string">&#x27;å¥³&#x27;</span>);</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure <span class="keyword">for</span> teacher</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `teacher`;</span><br><span class="line">CREATE TABLE `teacher` (</span><br><span class="line">  `t_id` <span class="built_in">int</span>(<span class="number">10</span>) NOT NULL,</span><br><span class="line">  `t_name` varchar(<span class="number">50</span>) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`t_id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of teacher</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `teacher` VALUES (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;å¤§ç‹&#x27;</span>);</span><br><span class="line">INSERT INTO `teacher` VALUES (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;alex&#x27;</span>);</span><br><span class="line">INSERT INTO `teacher` VALUES (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;egon&#x27;</span>);</span><br><span class="line">INSERT INTO `teacher` VALUES (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;peiqi&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#7.2ã€ç»Ÿè®¡å„ç§‘å„åˆ†æ•°æ®µäººæ•°.æ˜¾ç¤ºæ ¼å¼:è¯¾ç¨‹ID,è¯¾ç¨‹åç§°,[100-85],[85-70],[70-60],[ &lt;60]</span></span><br><span class="line"></span><br><span class="line">select  score.c_id,</span><br><span class="line">          course.c_name, </span><br><span class="line">      <span class="built_in">sum</span>(CASE WHEN num BETWEEN <span class="number">85</span> <span class="keyword">and</span> <span class="number">100</span> THEN <span class="number">1</span> ELSE <span class="number">0</span> END) <span class="keyword">as</span> <span class="string">&#x27;[100-85]&#x27;</span>,</span><br><span class="line">      <span class="built_in">sum</span>(CASE WHEN num BETWEEN <span class="number">70</span> <span class="keyword">and</span> <span class="number">85</span> THEN <span class="number">1</span> ELSE <span class="number">0</span> END) <span class="keyword">as</span> <span class="string">&#x27;[85-70]&#x27;</span>,</span><br><span class="line">      <span class="built_in">sum</span>(CASE WHEN num BETWEEN <span class="number">60</span> <span class="keyword">and</span> <span class="number">70</span> THEN <span class="number">1</span> ELSE <span class="number">0</span> END) <span class="keyword">as</span> <span class="string">&#x27;[70-60]&#x27;</span>,</span><br><span class="line">      <span class="built_in">sum</span>(CASE WHEN num &lt; <span class="number">60</span> THEN <span class="number">1</span> ELSE <span class="number">0</span> END) <span class="keyword">as</span> <span class="string">&#x27;[ &lt;60]&#x27;</span></span><br><span class="line"><span class="keyword">from</span> score,course where score.c_id=course.c_id GROUP BY score.c_id;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æŒæ¡å‡½æ•°ï¼šdate_format</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1 åŸºæœ¬ä½¿ç”¨</span></span><br><span class="line">mysql&gt; SELECT DATE_FORMAT(<span class="string">&#x27;2009-10-04 22:23:00&#x27;</span>, <span class="string">&#x27;%W %M %Y&#x27;</span>);</span><br><span class="line">        -&gt; <span class="string">&#x27;Sunday October 2009&#x27;</span></span><br><span class="line">mysql&gt; SELECT DATE_FORMAT(<span class="string">&#x27;2007-10-04 22:23:00&#x27;</span>, <span class="string">&#x27;%H:%i:%s&#x27;</span>);</span><br><span class="line">        -&gt; <span class="string">&#x27;22:23:00&#x27;</span></span><br><span class="line">mysql&gt; SELECT DATE_FORMAT(<span class="string">&#x27;1900-10-04 22:23:00&#x27;</span>,</span><br><span class="line">    -&gt;                 <span class="string">&#x27;%D %y %a %d %m %b %j&#x27;</span>);</span><br><span class="line">        -&gt; <span class="string">&#x27;4th 00 Thu 04 10 Oct 277&#x27;</span></span><br><span class="line">mysql&gt; SELECT DATE_FORMAT(<span class="string">&#x27;1997-10-04 22:23:00&#x27;</span>,</span><br><span class="line">    -&gt;                 <span class="string">&#x27;%H %k %I %r %T %S %w&#x27;</span>);</span><br><span class="line">        -&gt; <span class="string">&#x27;22 22 10 10:23:00 PM 22:23:00 00 6&#x27;</span></span><br><span class="line">mysql&gt; SELECT DATE_FORMAT(<span class="string">&#x27;1999-01-01&#x27;</span>, <span class="string">&#x27;%X %V&#x27;</span>);</span><br><span class="line">        -&gt; <span class="string">&#x27;1998 52&#x27;</span></span><br><span class="line">mysql&gt; SELECT DATE_FORMAT(<span class="string">&#x27;2006-06-00&#x27;</span>, <span class="string">&#x27;%d&#x27;</span>);</span><br><span class="line">        -&gt; <span class="string">&#x27;00&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#2 å‡†å¤‡è¡¨å’Œè®°å½•</span></span><br><span class="line">CREATE TABLE blog (</span><br><span class="line">    <span class="built_in">id</span> INT PRIMARY KEY auto_increment,</span><br><span class="line">    NAME CHAR (<span class="number">32</span>),</span><br><span class="line">    sub_time datetime</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO blog (NAME, sub_time)</span><br><span class="line">VALUES</span><br><span class="line">    (<span class="string">&#x27;ç¬¬1ç¯‡&#x27;</span>,<span class="string">&#x27;2015-03-01 11:31:21&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ç¬¬2ç¯‡&#x27;</span>,<span class="string">&#x27;2015-03-11 16:31:21&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ç¬¬3ç¯‡&#x27;</span>,<span class="string">&#x27;2016-07-01 10:21:31&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ç¬¬4ç¯‡&#x27;</span>,<span class="string">&#x27;2016-07-22 09:23:21&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ç¬¬5ç¯‡&#x27;</span>,<span class="string">&#x27;2016-07-23 10:11:11&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ç¬¬6ç¯‡&#x27;</span>,<span class="string">&#x27;2016-07-25 11:21:31&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ç¬¬7ç¯‡&#x27;</span>,<span class="string">&#x27;2017-03-01 15:33:21&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ç¬¬8ç¯‡&#x27;</span>,<span class="string">&#x27;2017-03-01 17:32:21&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ç¬¬9ç¯‡&#x27;</span>,<span class="string">&#x27;2017-03-01 18:31:21&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#3. æå–sub_timeå­—æ®µçš„å€¼ï¼ŒæŒ‰ç…§æ ¼å¼åçš„ç»“æœå³&quot;å¹´æœˆ&quot;æ¥åˆ†ç»„</span></span><br><span class="line">SELECT DATE_FORMAT(sub_time,<span class="string">&#x27;%Y-%m&#x27;</span>),COUNT(<span class="number">1</span>) FROM blog GROUP BY DATE_FORMAT(sub_time,<span class="string">&#x27;%Y-%m&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç»“æœ</span></span><br><span class="line">+-------------------------------+----------+</span><br><span class="line">| DATE_FORMAT(sub_time,<span class="string">&#x27;%Y-%m&#x27;</span>) | COUNT(<span class="number">1</span>) |</span><br><span class="line">+-------------------------------+----------+</span><br><span class="line">| <span class="number">2015</span>-03                       |        <span class="number">2</span> |</span><br><span class="line">| <span class="number">2016</span>-07                       |        <span class="number">4</span> |</span><br><span class="line">| <span class="number">2017</span>-03                       |        <span class="number">3</span> |</span><br><span class="line">+-------------------------------+----------+</span><br><span class="line"><span class="number">3</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>æ›´å¤šå‡½æ•°ï¼š<a href="https://link.zhihu.com/?target=http://doc.mysql.cn/mysql5/refman-5.1-zh.html-chapter/functions.html%23encryption-functions">ä¸­æ–‡çŒ›å‡»è¿™é‡Œ</a> OR <a href="https://link.zhihu.com/?target=https://dev.mysql.com/doc/refman/5.7/en/functions.html">å®˜æ–¹çŒ›å‡»è¿™é‡Œ</a></p>
<p><strong>ä¸€ è‡ªå®šä¹‰å‡½æ•°</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ï¼ï¼ï¼æ³¨æ„ï¼ï¼ï¼</span></span><br><span class="line"><span class="comment">#å‡½æ•°ä¸­ä¸è¦å†™sqlè¯­å¥ï¼ˆå¦åˆ™ä¼šæŠ¥é”™ï¼‰ï¼Œå‡½æ•°ä»…ä»…åªæ˜¯ä¸€ä¸ªåŠŸèƒ½ï¼Œæ˜¯ä¸€ä¸ªåœ¨sqlä¸­è¢«åº”ç”¨çš„åŠŸèƒ½</span></span><br><span class="line"><span class="comment">#è‹¥è¦æƒ³åœ¨begin...end...ä¸­å†™sqlï¼Œè¯·ç”¨å­˜å‚¨è¿‡ç¨‹</span></span><br><span class="line">delimiter //</span><br><span class="line">create function f1(</span><br><span class="line">    i1 <span class="built_in">int</span>,</span><br><span class="line">    i2 <span class="built_in">int</span>)</span><br><span class="line">returns <span class="built_in">int</span></span><br><span class="line">BEGIN</span><br><span class="line">    declare num <span class="built_in">int</span>;</span><br><span class="line">    <span class="built_in">set</span> num = i1 + i2;</span><br><span class="line">    <span class="keyword">return</span>(num);</span><br><span class="line">END //</span><br><span class="line">delimiter ;</span><br><span class="line">delimiter //</span><br><span class="line">create function f5(</span><br><span class="line">    i <span class="built_in">int</span></span><br><span class="line">)</span><br><span class="line">returns <span class="built_in">int</span></span><br><span class="line">begin</span><br><span class="line">    declare res <span class="built_in">int</span> default <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> i = <span class="number">10</span> then</span><br><span class="line">        <span class="built_in">set</span> res=<span class="number">100</span>;</span><br><span class="line">    elseif i = <span class="number">20</span> then</span><br><span class="line">        <span class="built_in">set</span> res=<span class="number">200</span>;</span><br><span class="line">    elseif i = <span class="number">30</span> then</span><br><span class="line">        <span class="built_in">set</span> res=<span class="number">300</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">set</span> res=<span class="number">400</span>;</span><br><span class="line">    end <span class="keyword">if</span>;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">end //</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<p><strong>äºŒ åˆ é™¤å‡½æ•°</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">drop function func_name;</span><br></pre></td></tr></table></figure>

<p><strong>ä¸‰ æ‰§è¡Œå‡½æ•°</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è·å–è¿”å›å€¼</span></span><br><span class="line">select UPPER(<span class="string">&#x27;egon&#x27;</span>) into @res;</span><br><span class="line">SELECT @res;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨</span></span><br><span class="line">select f1(<span class="number">11</span>,nid) ,name <span class="keyword">from</span> tb2;</span><br></pre></td></tr></table></figure>

<h3 id="å…­-æµç¨‹æ§åˆ¶"><a href="#å…­-æµç¨‹æ§åˆ¶" class="headerlink" title="å…­ æµç¨‹æ§åˆ¶"></a>å…­ æµç¨‹æ§åˆ¶</h3><p><strong>ä¸€ æ¡ä»¶è¯­å¥</strong></p>
<p>ifæ¡ä»¶è¯­å¥</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">delimiter //</span><br><span class="line">CREATE PROCEDURE proc_if ()</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">    declare i <span class="built_in">int</span> default <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> i = <span class="number">1</span> THEN</span><br><span class="line">        SELECT <span class="number">1</span>;</span><br><span class="line">    ELSEIF i = <span class="number">2</span> THEN</span><br><span class="line">        SELECT <span class="number">2</span>;</span><br><span class="line">    ELSE</span><br><span class="line">        SELECT <span class="number">7</span>;</span><br><span class="line">    END IF;</span><br><span class="line"></span><br><span class="line">END //</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<p><strong>äºŒ å¾ªç¯è¯­å¥</strong></p>
<p>whileå¾ªç¯</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_while ()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">DECLARE</span> num <span class="type">INT</span> ;</span><br><span class="line">    <span class="keyword">SET</span> num <span class="operator">=</span> <span class="number">0</span> ;</span><br><span class="line">    WHILE num <span class="operator">&lt;</span> <span class="number">10</span> DO</span><br><span class="line">        <span class="keyword">SELECT</span></span><br><span class="line">            num ;</span><br><span class="line">        <span class="keyword">SET</span> num <span class="operator">=</span> num <span class="operator">+</span> <span class="number">1</span> ;</span><br><span class="line">    <span class="keyword">END</span> WHILE ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span> <span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_repeat ()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">DECLARE</span> i <span class="type">INT</span> ;</span><br><span class="line">    <span class="keyword">SET</span> i <span class="operator">=</span> <span class="number">0</span> ;</span><br><span class="line">    repeat</span><br><span class="line">        <span class="keyword">select</span> i;</span><br><span class="line">        <span class="keyword">set</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">        until i <span class="operator">&gt;=</span> <span class="number">5</span></span><br><span class="line">    <span class="keyword">end</span> repeat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span> <span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<p>loop</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">declare</span> i <span class="type">int</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line">    loop_label: loop</span><br><span class="line"></span><br><span class="line">        <span class="keyword">set</span> i<span class="operator">=</span>i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">        if i<span class="operator">&lt;</span><span class="number">8</span> <span class="keyword">then</span></span><br><span class="line">            iterate loop_label;</span><br><span class="line">        <span class="keyword">end</span> if;</span><br><span class="line">        if i<span class="operator">&gt;=</span><span class="number">10</span> <span class="keyword">then</span></span><br><span class="line">            leave loop_label;</span><br><span class="line">        <span class="keyword">end</span> if;</span><br><span class="line">        <span class="keyword">select</span> i;</span><br><span class="line">    <span class="keyword">end</span> loop loop_label;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>

<h2 id="è§†é¢‘é“¾æ¥ï¼š"><a href="#è§†é¢‘é“¾æ¥ï¼š" class="headerlink" title="è§†é¢‘é“¾æ¥ï¼š"></a>è§†é¢‘é“¾æ¥ï¼š</h2><p><a href="https://link.zhihu.com/?target=https://www.bilibili.com/video/av76534734?p=17">mysqlæ•°æ®åº“_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibiliwww.bilibili.com/video/av76534734?p=17<img src="https://pic2.zhimg.com/v2-ff5ea9d7a1a90eefeb918c9be2ba7c99_180x120.jpg" alt="img"></a></p>
<p>bç«™è§†é¢‘p17-p22</p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>46-é™„å½•ä¸€ï¼šPEPBè§„èŒƒ</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/46_%E9%99%84%E5%BD%95%E4%B8%80%EF%BC%9APEP8%E8%A7%84%E8%8C%83/</url>
    <content><![CDATA[<h2 id="ä¸€-PEP8è§„èŒƒæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€-PEP8è§„èŒƒæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ PEP8è§„èŒƒæ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>ä¸€ PEP8è§„èŒƒæ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2><p> PEPæ˜¯Python Enhancement Proposalçš„ç¼©å†™ï¼Œé€šå¸¸ç¿»è¯‘ä¸ºâ€œPythonå¢å¼ºææ¡ˆâ€ã€‚</p>
<p> æ¯ä¸ªPEPéƒ½æ˜¯ä¸€ä»½ä¸ºPythonç¤¾åŒºæä¾›çš„æŒ‡å¯¼Pythonå¾€æ›´å¥½çš„æ–¹å‘å‘å±•çš„æŠ€æœ¯æ–‡æ¡£ï¼Œå…¶ä¸­çš„ç¬¬8å·å¢å¼ºææ¡ˆï¼ˆPEP 8ï¼‰æ˜¯é’ˆå¯¹Pythonè¯­è¨€ç¼–è®¢çš„ä»£ç é£æ ¼æŒ‡å—ã€‚</p>
<p> å°½ç®¡æˆ‘ä»¬å¯ä»¥åœ¨ä¿è¯è¯­æ³•æ²¡æœ‰é—®é¢˜çš„å‰æä¸‹éšæ„ä¹¦å†™Pythonä»£ç ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ï¼Œé‡‡ç”¨ä¸€è‡´çš„é£æ ¼ä¹¦å†™å‡ºå¯è¯»æ€§å¼ºçš„ä»£ç æ˜¯æ¯ä¸ªä¸“ä¸šçš„ç¨‹åºå‘˜åº”è¯¥åšåˆ°çš„äº‹æƒ…ï¼Œä¹Ÿæ˜¯æ¯ä¸ªå…¬å¸çš„ç¼–ç¨‹è§„èŒƒä¸­ä¼šæå‡ºçš„è¦æ±‚ï¼Œè¿™äº›åœ¨å¤šäººåä½œå¼€å‘ä¸€ä¸ªé¡¹ç›®ï¼ˆå›¢é˜Ÿå¼€å‘ï¼‰çš„æ—¶å€™æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚</p>
<h2 id="äºŒ-PEP8è§„èŒƒç›¸å…³å†…å®¹"><a href="#äºŒ-PEP8è§„èŒƒç›¸å…³å†…å®¹" class="headerlink" title="äºŒ PEP8è§„èŒƒç›¸å…³å†…å®¹"></a><strong>äºŒ PEP8è§„èŒƒç›¸å…³å†…å®¹</strong></h2><p> æˆ‘ä»¬å¯ä»¥ä»Pythonå®˜æ–¹ç½‘ç«™çš„**<a href="https://link.zhihu.com/?target=https://www.python.org/dev/peps/pep-0008/">PEP 8é“¾æ¥</a>**ä¸­æ‰¾åˆ°è¯¥æ–‡æ¡£ï¼Œä¸‹é¢æˆ‘ä»¬å¯¹è¯¥æ–‡æ¡£çš„å…³é”®éƒ¨åˆ†åšä¸€ä¸ªç®€å•çš„æ€»ç»“ã€‚</p>
<h3 id="2-1-ç©ºæ ¼çš„ä½¿ç”¨"><a href="#2-1-ç©ºæ ¼çš„ä½¿ç”¨" class="headerlink" title="2.1 ç©ºæ ¼çš„ä½¿ç”¨"></a><strong>2.1 ç©ºæ ¼çš„ä½¿ç”¨</strong></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#1ã€ä½¿ç”¨ç©ºæ ¼æ¥è¡¨ç¤ºç¼©è¿›è€Œä¸è¦ç”¨åˆ¶è¡¨ç¬¦ï¼ˆTabï¼‰ã€‚è¿™ä¸€ç‚¹å¯¹ä¹ æƒ¯äº†å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„äººæ¥è¯´ç®€ç›´è§‰å¾—ä¸å¯ç†å–»ï¼Œå› ä¸ºç»å¤§å¤šæ•°çš„ç¨‹åºå‘˜éƒ½ä¼šç”¨Tabæ¥è¡¨ç¤ºç¼©è¿›ï¼Œä½†æ˜¯è¦çŸ¥é“Pythonå¹¶æ²¡æœ‰åƒC/C++æˆ–Javaé‚£æ ·çš„ç”¨èŠ±æ‹¬å·æ¥æ„é€ ä¸€ä¸ªä»£ç å—çš„è¯­æ³•ï¼Œåœ¨Pythonä¸­åˆ†æ”¯å’Œå¾ªç¯ç»“æ„éƒ½ä½¿ç”¨ç¼©è¿›æ¥è¡¨ç¤ºå“ªäº›ä»£ç å±äºåŒä¸€ä¸ªçº§åˆ«ï¼Œé‰´äºæ­¤Pythonä»£ç å¯¹ç¼©è¿›ä»¥åŠç¼©è¿›å®½åº¦çš„ä¾èµ–æ¯”å…¶ä»–å¾ˆå¤šè¯­è¨€éƒ½å¼ºå¾—å¤šã€‚åœ¨ä¸åŒçš„ç¼–è¾‘å™¨ä¸­ï¼ŒTabçš„å®½åº¦å¯èƒ½æ˜¯2ã€4æˆ–8ä¸ªå­—ç¬¦ï¼Œç”šè‡³æ˜¯å…¶ä»–æ›´ç¦»è°±çš„å€¼ï¼Œç”¨Tabæ¥è¡¨ç¤ºç¼©è¿›å¯¹Pythonä»£ç æ¥è¯´å¯èƒ½æ˜¯ä¸€åœºç¾éš¾ã€‚</span><br><span class="line"></span><br><span class="line">#2ã€å’Œè¯­æ³•ç›¸å…³çš„æ¯ä¸€å±‚ç¼©è¿›éƒ½ç”¨4ä¸ªç©ºæ ¼æ¥è¡¨ç¤ºã€‚</span><br><span class="line"></span><br><span class="line">#3ã€æ¯è¡Œçš„å­—ç¬¦æ•°ä¸è¦è¶…è¿‡79ä¸ªå­—ç¬¦ï¼Œå¦‚æœè¡¨è¾¾å¼å› å¤ªé•¿è€Œå æ®äº†å¤šè¡Œï¼Œé™¤äº†é¦–è¡Œä¹‹å¤–çš„å…¶ä½™å„è¡Œéƒ½åº”è¯¥åœ¨æ­£å¸¸çš„ç¼©è¿›å®½åº¦ä¸Šå†åŠ ä¸Š4ä¸ªç©ºæ ¼ã€‚</span><br><span class="line"></span><br><span class="line">#4ã€å‡½æ•°å’Œç±»çš„å®šä¹‰ï¼Œä»£ç å‰åéƒ½è¦ç”¨ä¸¤ä¸ªç©ºè¡Œè¿›è¡Œåˆ†éš”ã€‚</span><br><span class="line"></span><br><span class="line">#5ã€åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œå„ä¸ªæ–¹æ³•ä¹‹é—´åº”è¯¥ç”¨ä¸€ä¸ªç©ºè¡Œè¿›è¡Œåˆ†éš”ã€‚</span><br><span class="line"></span><br><span class="line">#6ã€äºŒå…ƒè¿ç®—ç¬¦çš„å·¦å³ä¸¤ä¾§åº”è¯¥ä¿ç•™ä¸€ä¸ªç©ºæ ¼ï¼Œè€Œä¸”åªè¦ä¸€ä¸ªç©ºæ ¼å°±å¥½ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="2-2-æ ‡è¯†ç¬¦å‘½å"><a href="#2-2-æ ‡è¯†ç¬¦å‘½å" class="headerlink" title="2.2 æ ‡è¯†ç¬¦å‘½å"></a><strong>2.2 æ ‡è¯†ç¬¦å‘½å</strong></h3><p> PEP 8å€¡å¯¼ç”¨ä¸åŒçš„å‘½åé£æ ¼æ¥å‘½åPythonä¸­ä¸åŒçš„æ ‡è¯†ç¬¦ï¼Œä»¥ä¾¿åœ¨é˜…è¯»ä»£ç æ—¶èƒ½å¤Ÿé€šè¿‡æ ‡è¯†ç¬¦çš„åç§°æ¥ç¡®å®šè¯¥æ ‡è¯†ç¬¦åœ¨Pythonä¸­æ‰®æ¼”äº†æ€æ ·çš„è§’è‰²ï¼ˆåœ¨è¿™ä¸€ç‚¹ä¸Šï¼ŒPythonè‡ªå·±çš„å†…ç½®æ¨¡å—ä»¥åŠæŸäº›ç¬¬ä¸‰æ–¹æ¨¡å—éƒ½åšå¾—å¹¶ä¸æ˜¯å¾ˆå¥½ï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#1ã€å˜é‡ã€å‡½æ•°å’Œå±æ€§åº”è¯¥ä½¿ç”¨å°å†™å­—æ¯æ¥æ‹¼å†™ï¼Œå¦‚æœæœ‰å¤šä¸ªå•è¯å°±ä½¿ç”¨ä¸‹åˆ’çº¿è¿›è¡Œè¿æ¥ã€‚</span><br><span class="line"></span><br><span class="line">#2ã€ç±»ä¸­å—ä¿æŠ¤çš„å®ä¾‹å±æ€§ï¼Œåº”è¯¥ä»¥ä¸€ä¸ªä¸‹åˆ’çº¿å¼€å¤´ã€‚</span><br><span class="line"></span><br><span class="line">#3ã€ç±»ä¸­ç§æœ‰çš„å®ä¾‹å±æ€§ï¼Œåº”è¯¥ä»¥ä¸¤ä¸ªä¸‹åˆ’çº¿å¼€å¤´ã€‚</span><br><span class="line"></span><br><span class="line">#4ã€ç±»å’Œå¼‚å¸¸çš„å‘½åï¼Œåº”è¯¥æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ã€‚</span><br><span class="line"></span><br><span class="line">#5ã€æ¨¡å—çº§åˆ«çš„å¸¸é‡ï¼Œåº”è¯¥é‡‡ç”¨å…¨å¤§å†™å­—æ¯ï¼Œå¦‚æœæœ‰å¤šä¸ªå•è¯å°±ç”¨ä¸‹åˆ’çº¿è¿›è¡Œè¿æ¥ã€‚</span><br><span class="line"></span><br><span class="line">#6ã€ç±»çš„å®ä¾‹æ–¹æ³•ï¼Œåº”è¯¥æŠŠç¬¬ä¸€ä¸ªå‚æ•°å‘½åä¸ºselfä»¥è¡¨ç¤ºå¯¹è±¡è‡ªèº«ã€‚</span><br><span class="line"></span><br><span class="line">#7ã€ç±»çš„ç±»æ–¹æ³•ï¼Œåº”è¯¥æŠŠç¬¬ä¸€ä¸ªå‚æ•°å‘½åä¸ºclsä»¥è¡¨ç¤ºè¯¥ç±»è‡ªèº«ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="2-3-è¡¨è¾¾å¼å’Œè¯­å¥"><a href="#2-3-è¡¨è¾¾å¼å’Œè¯­å¥" class="headerlink" title="2.3 è¡¨è¾¾å¼å’Œè¯­å¥"></a><strong>2.3 è¡¨è¾¾å¼å’Œè¯­å¥</strong></h3><p> åœ¨Pythonä¹‹ç¦…ï¼ˆå¯ä»¥ä½¿ç”¨import thisæŸ¥çœ‹ï¼‰ä¸­æœ‰è¿™ä¹ˆä¸€å¥åè¨€ï¼šâ€œThere should be oneâ€“ and preferably only one â€“obvious way to do it.â€ï¼Œç¿»è¯‘æˆä¸­æ–‡æ˜¯â€œåšä¸€ä»¶äº‹åº”è¯¥æœ‰è€Œä¸”æœ€å¥½åªæœ‰ä¸€ç§ç¡®åˆ‡çš„åšæ³•â€ï¼Œè¿™å¥è¯ä¼ è¾¾çš„æ€æƒ³åœ¨PEP 8ä¸­ä¹Ÿæ˜¯æ— å¤„ä¸åœ¨çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#1ã€é‡‡ç”¨å†…è”å½¢å¼çš„å¦å®šè¯ï¼Œè€Œä¸è¦æŠŠå¦å®šè¯æ”¾åœ¨æ•´ä¸ªè¡¨è¾¾å¼çš„å‰é¢ã€‚ä¾‹å¦‚if a is not bå°±æ¯”if not a is bæ›´å®¹æ˜“è®©äººç†è§£ã€‚</span><br><span class="line"></span><br><span class="line">#2ã€ä¸è¦ç”¨æ£€æŸ¥é•¿åº¦çš„æ–¹å¼æ¥åˆ¤æ–­å­—ç¬¦ä¸²ã€åˆ—è¡¨ç­‰æ˜¯å¦ä¸ºNoneæˆ–è€…æ²¡æœ‰å…ƒç´ ï¼Œåº”è¯¥ç”¨if not xè¿™æ ·çš„å†™æ³•æ¥æ£€æŸ¥å®ƒã€‚</span><br><span class="line"></span><br><span class="line">#3ã€å°±ç®—ifåˆ†æ”¯ã€forå¾ªç¯ã€exceptå¼‚å¸¸æ•è·ç­‰ä¸­åªæœ‰ä¸€è¡Œä»£ç ï¼Œä¹Ÿä¸è¦å°†ä»£ç å’Œifã€forã€exceptç­‰å†™åœ¨ä¸€èµ·ï¼Œåˆ†å¼€å†™æ‰ä¼šè®©ä»£ç æ›´æ¸…æ™°ã€‚</span><br><span class="line"></span><br><span class="line">#4ã€importè¯­å¥æ€»æ˜¯æ”¾åœ¨æ–‡ä»¶å¼€å¤´çš„åœ°æ–¹ã€‚</span><br><span class="line"></span><br><span class="line">#5ã€å¼•å…¥æ¨¡å—çš„æ—¶å€™ï¼Œfrom math import sqrtæ¯”import mathæ›´å¥½ã€‚</span><br><span class="line"></span><br><span class="line">#6ã€å¦‚æœæœ‰å¤šä¸ªimportè¯­å¥ï¼Œåº”è¯¥å°†å…¶åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œä»ä¸Šåˆ°ä¸‹åˆ†åˆ«æ˜¯Pythonæ ‡å‡†æ¨¡å—ã€ç¬¬ä¸‰æ–¹æ¨¡å—å’Œè‡ªå®šä¹‰æ¨¡å—ï¼Œæ¯ä¸ªéƒ¨åˆ†å†…éƒ¨åº”è¯¥</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>45-ORMæ¡†æ¶</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/45_ORM%E6%A1%86%E6%9E%B6SQLAlchemy/</url>
    <content><![CDATA[<h2 id="ä¸€-ä»‹ç»"><a href="#ä¸€-ä»‹ç»" class="headerlink" title="ä¸€ ä»‹ç»"></a>ä¸€ ä»‹ç»</h2><p>SQLAlchemyæ˜¯Pythonç¼–ç¨‹è¯­è¨€ä¸‹çš„ä¸€æ¬¾ORMæ¡†æ¶ï¼Œè¯¥æ¡†æ¶å»ºç«‹åœ¨æ•°æ®åº“APIä¹‹ä¸Šï¼Œä½¿ç”¨å…³ç³»å¯¹è±¡æ˜ å°„è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œç®€è¨€ä¹‹ä¾¿æ˜¯ï¼šå°†å¯¹è±¡è½¬æ¢æˆSQLï¼Œç„¶åä½¿ç”¨æ•°æ®APIæ‰§è¡ŒSQLå¹¶è·å–æ‰§è¡Œç»“æœã€‚</p>
<p><strong>1ã€å®‰è£…</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip3 install sqlalchemy</span><br></pre></td></tr></table></figure>

<p><strong>2ã€æ¶æ„ä¸æµç¨‹</strong></p>
<p><strong><img src="https://pic2.zhimg.com/80/v2-3958cd0e7235308eb6cd19f9e2e8d1ad_720w.jpg" alt="img"></strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€ä½¿ç”¨è€…é€šè¿‡ORMå¯¹è±¡æäº¤å‘½ä»¤</span></span><br><span class="line"><span class="comment">#2ã€å°†å‘½ä»¤äº¤ç»™SQLAlchemy Coreï¼ˆSchema/Types  SQL Expression Languageï¼‰è½¬æ¢æˆSQL</span></span><br><span class="line"><span class="comment">#3ã€ä½¿ç”¨ Engine/ConnectionPooling/Dialect è¿›è¡Œæ•°æ®åº“æ“ä½œ</span></span><br><span class="line"><span class="comment">#3.1ã€åŒ¹é…ä½¿ç”¨è€…äº‹å…ˆé…ç½®å¥½çš„egine</span></span><br><span class="line"><span class="comment">#3.2ã€egineä»è¿æ¥æ± ä¸­å–å‡ºä¸€ä¸ªé“¾æ¥</span></span><br><span class="line"><span class="comment">#3.3ã€åŸºäºè¯¥é“¾æ¥é€šè¿‡Dialectè°ƒç”¨DB APIï¼Œå°†SQLè½¬äº¤ç»™å®ƒå»æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure>

<p><strong>ï¼ï¼ï¼ä¸Šè¿°æµç¨‹åˆ†æï¼Œå¯ä»¥å¤§è‡´åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼ï¼ï¼ï¼š</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç¬¬ä¸€ä¸ªé˜¶æ®µï¼ˆæµç¨‹1-2ï¼‰ï¼šå°†SQLAlchemyçš„å¯¹è±¡æ¢æˆå¯æ‰§è¡Œçš„sqlè¯­å¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¬¬äºŒä¸ªé˜¶æ®µï¼ˆæµç¨‹3ï¼‰ï¼šå°†sqlè¯­å¥äº¤ç»™æ•°æ®åº“æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure>

<p><strong>å¦‚æœæˆ‘ä»¬ä¸ä¾èµ–äºSQLAlchemyçš„è½¬æ¢è€Œè‡ªå·±å†™å¥½sqlè¯­å¥ï¼Œé‚£æ˜¯ä¸æ˜¯æ„å‘³ç€å¯ä»¥ç›´æ¥ä»ç¬¬äºŒä¸ªé˜¶æ®µå¼€å§‹æ‰§è¡Œäº†ï¼Œäº‹å®ä¸Šæ­£æ˜¯å¦‚æ­¤ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥åªç”¨SQLAlchemyæ‰§è¡Œçº¯sqlè¯­å¥ï¼Œå¦‚ä¸‹</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"></span><br><span class="line"><span class="comment">#1 å‡†å¤‡</span></span><br><span class="line"><span class="comment"># éœ€è¦äº‹å…ˆå®‰è£…å¥½pymysql</span></span><br><span class="line"><span class="comment"># éœ€è¦äº‹å…ˆåˆ›å»ºå¥½æ•°æ®åº“:create database db1 charset utf8;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2 åˆ›å»ºå¼•æ“</span></span><br><span class="line">egine=create_engine(<span class="string">&#x27;mysql+pymysql://root@127.0.0.1/db1?charset=utf8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#3 æ‰§è¡Œsql</span></span><br><span class="line"><span class="comment"># egine.execute(&#x27;create table if not EXISTS t1(id int PRIMARY KEY auto_increment,name char(32));&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cur=egine.execute(&#x27;insert into t1 values(%s,%s);&#x27;,[(1,&quot;egon1&quot;),(2,&quot;egon2&quot;),(3,&quot;egon3&quot;)]) #æŒ‰ä½ç½®ä¼ å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># cur=egine.execute(&#x27;insert into t1 values(%(id)s,%(name)s);&#x27;,name=&#x27;egon4&#x27;,id=4) #æŒ‰å…³é”®å­—ä¼ å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#4 æ–°æ’å…¥è¡Œçš„è‡ªå¢id</span></span><br><span class="line"><span class="comment"># print(cur.lastrowid)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#5 æŸ¥è¯¢</span></span><br><span class="line">cur=egine.execute(<span class="string">&#x27;select * from t1&#x27;</span>)</span><br><span class="line"></span><br><span class="line">cur.fetchone() <span class="comment">#è·å–ä¸€è¡Œ</span></span><br><span class="line">cur.fetchmany(<span class="number">2</span>) <span class="comment">#è·å–å¤šè¡Œ</span></span><br><span class="line">cur.fetchall() <span class="comment">#è·å–æ‰€æœ‰è¡Œ</span></span><br></pre></td></tr></table></figure>

<p><strong>3ã€DB API</strong></p>
<p>SQLAlchemyæœ¬èº«æ— æ³•æ“ä½œæ•°æ®åº“ï¼Œå…¶å¿…é¡»ä»¥æ¥pymsqlç­‰ç¬¬ä¸‰æ–¹æ’ä»¶ï¼ŒDialectç”¨äºå’Œæ•°æ®APIè¿›è¡Œäº¤æµï¼Œæ ¹æ®é…ç½®æ–‡ä»¶çš„ä¸åŒè°ƒç”¨ä¸åŒçš„æ•°æ®åº“APIï¼Œä»è€Œå®ç°å¯¹æ•°æ®åº“çš„æ“ä½œï¼Œå¦‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#1ã€MySQL-Python</span></span><br><span class="line">    mysql+mysqldb://&lt;user&gt;:&lt;password&gt;@&lt;host&gt;[:&lt;port&gt;]/&lt;dbname&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#2ã€pymysql</span></span><br><span class="line">    mysql+pymysql://&lt;username&gt;:&lt;password&gt;@&lt;host&gt;/&lt;dbname&gt;[?&lt;options&gt;]</span><br><span class="line"></span><br><span class="line"><span class="comment">#3ã€MySQL-Connector</span></span><br><span class="line">    mysql+mysqlconnector://&lt;user&gt;:&lt;password&gt;@&lt;host&gt;[:&lt;port&gt;]/&lt;dbname&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#4ã€cx_Oracle</span></span><br><span class="line">    oracle+cx_oracle://user:<span class="keyword">pass</span>@host:port/dbname[?key=value&amp;key=value...]</span><br></pre></td></tr></table></figure>

<p><strong><a href="https://link.zhihu.com/?target=http://docs.sqlalchemy.org/en/latest/dialects/index.html">æ›´å¤šè¯¦è§ï¼šhttp://docs.sqlalchemy.org/en/latest/dialects/index.html</a></strong></p>
<h3 id="äºŒ-åˆ›å»ºè¡¨"><a href="#äºŒ-åˆ›å»ºè¡¨" class="headerlink" title="äºŒ åˆ›å»ºè¡¨"></a>äºŒ åˆ›å»ºè¡¨</h3><p>ORMä¸­ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç±»===&gt;è¡¨</span></span><br><span class="line"><span class="comment">#å¯¹è±¡==&gt;è¡¨ä¸­çš„ä¸€è¡Œè®°å½•</span></span><br></pre></td></tr></table></figure>

<p>å››å¼ è¡¨:ä¸šåŠ¡çº¿,æœåŠ¡,ç”¨æˆ·,è§’è‰²ï¼Œåˆ©ç”¨ORMåˆ›å»ºå‡ºå®ƒä»¬ï¼Œå¹¶å»ºç«‹å¥½å®ƒä»¬ç›´æ¥çš„å…³ç³»</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column,Integer,String,DateTime,Enum,ForeignKey,UniqueConstraint,ForeignKeyConstraint,Index</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker</span><br><span class="line"></span><br><span class="line">egine=create_engine(<span class="string">&#x27;mysql+pymysql://root@127.0.0.1:3306/db1?charset=utf8&#x27;</span>,max_overflow=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">Base=declarative_base()</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ›å»ºå•è¡¨:ä¸šåŠ¡çº¿</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Business</span>(<span class="params">Base</span>):</span></span><br><span class="line">    __tablename__=<span class="string">&#x27;business&#x27;</span></span><br><span class="line">    <span class="built_in">id</span>=Column(Integer,primary_key=<span class="literal">True</span>,autoincrement=<span class="literal">True</span>)</span><br><span class="line">    bname=Column(String(<span class="number">32</span>),nullable=<span class="literal">False</span>,index=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¤šå¯¹ä¸€:å¤šä¸ªæœåŠ¡å¯ä»¥å±äºä¸€ä¸ªä¸šåŠ¡çº¿,å¤šä¸ªä¸šåŠ¡çº¿ä¸èƒ½åŒ…å«åŒä¸€ä¸ªæœåŠ¡</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Service</span>(<span class="params">Base</span>):</span></span><br><span class="line">    __tablename__=<span class="string">&#x27;service&#x27;</span></span><br><span class="line">    <span class="built_in">id</span>=Column(Integer,primary_key=<span class="literal">True</span>,autoincrement=<span class="literal">True</span>)</span><br><span class="line">    sname=Column(String(<span class="number">32</span>),nullable=<span class="literal">False</span>,index=<span class="literal">True</span>)</span><br><span class="line">    ip=Column(String(<span class="number">15</span>),nullable=<span class="literal">False</span>)</span><br><span class="line">    port=Column(Integer,nullable=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    business_id=Column(Integer,ForeignKey(<span class="string">&#x27;business.id&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    __table_args__=(</span><br><span class="line">        UniqueConstraint(ip,port,name=<span class="string">&#x27;uix_ip_port&#x27;</span>),</span><br><span class="line">        Index(<span class="string">&#x27;ix_id_sname&#x27;</span>,<span class="built_in">id</span>,sname)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸€å¯¹ä¸€:ä¸€ç§è§’è‰²åªèƒ½ç®¡ç†ä¸€æ¡ä¸šåŠ¡çº¿,ä¸€æ¡ä¸šåŠ¡çº¿åªèƒ½è¢«ä¸€ç§è§’è‰²ç®¡ç†</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Role</span>(<span class="params">Base</span>):</span></span><br><span class="line">    __tablename__=<span class="string">&#x27;role&#x27;</span></span><br><span class="line">    <span class="built_in">id</span>=Column(Integer,primary_key=<span class="literal">True</span>,autoincrement=<span class="literal">True</span>)</span><br><span class="line">    rname=Column(String(<span class="number">32</span>),nullable=<span class="literal">False</span>,index=<span class="literal">True</span>)</span><br><span class="line">    priv=Column(String(<span class="number">64</span>),nullable=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    business_id=Column(Integer,ForeignKey(<span class="string">&#x27;business.id&#x27;</span>),unique=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¤šå¯¹å¤š:å¤šä¸ªç”¨æˆ·å¯ä»¥æ˜¯åŒä¸€ä¸ªrole,å¤šä¸ªroleå¯ä»¥åŒ…å«åŒä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Users</span>(<span class="params">Base</span>):</span></span><br><span class="line">    __tablename__=<span class="string">&#x27;users&#x27;</span></span><br><span class="line">    <span class="built_in">id</span>=Column(Integer,primary_key=<span class="literal">True</span>,autoincrement=<span class="literal">True</span>)</span><br><span class="line">    uname=Column(String(<span class="number">32</span>),nullable=<span class="literal">False</span>,index=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Users2Role</span>(<span class="params">Base</span>):</span></span><br><span class="line">    __tablename__=<span class="string">&#x27;users2role&#x27;</span></span><br><span class="line">    <span class="built_in">id</span>=Column(Integer,primary_key=<span class="literal">True</span>,autoincrement=<span class="literal">True</span>)</span><br><span class="line">    uid=Column(Integer,ForeignKey(<span class="string">&#x27;users.id&#x27;</span>))</span><br><span class="line">    rid=Column(Integer,ForeignKey(<span class="string">&#x27;role.id&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    __table_args__=(</span><br><span class="line">        UniqueConstraint(uid,rid,name=<span class="string">&#x27;uix_uid_rid&#x27;</span>),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init_db</span>():</span></span><br><span class="line">    Base.metadata.create_all(egine)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drop_db</span>():</span></span><br><span class="line">    Base.metadata.drop_all(egine)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    init_db()</span><br></pre></td></tr></table></figure>

<p>æ³¨ï¼šè®¾ç½®å¤–é”®çš„å¦ä¸€ç§æ–¹å¼ ForeignKeyConstraint([â€˜other_idâ€™], [â€˜othertable.other_idâ€™])</p>
<h3 id="ä¸‰-å¢åˆ æ”¹æŸ¥"><a href="#ä¸‰-å¢åˆ æ”¹æŸ¥" class="headerlink" title="ä¸‰ å¢åˆ æ”¹æŸ¥"></a>ä¸‰ å¢åˆ æ”¹æŸ¥</h3><p><strong>è¡¨ç»“æ„</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column,Integer,String,ForeignKey</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker</span><br><span class="line"></span><br><span class="line">egine=create_engine(<span class="string">&#x27;mysql+pymysql://root@127.0.0.1:3306/db1?charset=utf8&#x27;</span>,max_overflow=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">Base=declarative_base()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¤šå¯¹ä¸€:å‡è®¾å¤šä¸ªå‘˜å·¥å¯ä»¥å±äºä¸€ä¸ªéƒ¨é—¨,è€Œå¤šä¸ªéƒ¨é—¨ä¸èƒ½æœ‰åŒä¸€ä¸ªå‘˜å·¥(åªæœ‰åˆ›å»ºå…¬å¸æ‰æŠŠå‘˜å·¥å½“éª†é©¼ç”¨,ä¸€ä¸ªå‘˜å·¥èº«å…¼æ•°èŒ)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dep</span>(<span class="params">Base</span>):</span></span><br><span class="line">    __tablename__=<span class="string">&#x27;dep&#x27;</span></span><br><span class="line">    <span class="built_in">id</span>=Column(Integer,primary_key=<span class="literal">True</span>,autoincrement=<span class="literal">True</span>)</span><br><span class="line">    dname=Column(String(<span class="number">64</span>),nullable=<span class="literal">False</span>,index=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Emp</span>(<span class="params">Base</span>):</span></span><br><span class="line">    __tablename__=<span class="string">&#x27;emp&#x27;</span></span><br><span class="line">    <span class="built_in">id</span>=Column(Integer,primary_key=<span class="literal">True</span>,autoincrement=<span class="literal">True</span>)</span><br><span class="line">    ename=Column(String(<span class="number">32</span>),nullable=<span class="literal">False</span>,index=<span class="literal">True</span>)</span><br><span class="line">    dep_id=Column(Integer,ForeignKey(<span class="string">&#x27;dep.id&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init_db</span>():</span></span><br><span class="line">    Base.metadata.create_all(egine)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drop_db</span>():</span></span><br><span class="line">    Base.metadata.drop_all(egine)</span><br><span class="line"></span><br><span class="line">drop_db()</span><br><span class="line">init_db()</span><br><span class="line">Session=sessionmaker(bind=egine)</span><br><span class="line">session=Session()</span><br></pre></td></tr></table></figure>

<p><strong>å¢</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¢</span></span><br><span class="line">row_obj=Dep(dname=<span class="string">&#x27;é”€å”®&#x27;</span>) <span class="comment">#æŒ‰å…³é”®å­—ä¼ å‚,æ— éœ€æŒ‡å®šid,å› å…¶æ˜¯è‡ªå¢é•¿çš„</span></span><br><span class="line">session.add(row_obj)</span><br><span class="line">session.add_all([</span><br><span class="line">    Dep(dname=<span class="string">&#x27;æŠ€æœ¯&#x27;</span>),</span><br><span class="line">    Dep(dname=<span class="string">&#x27;è¿è¥&#x27;</span>),</span><br><span class="line">    Dep(dname=<span class="string">&#x27;äººäº‹&#x27;</span>),</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">session.commit()</span><br></pre></td></tr></table></figure>

<p><strong>åˆ </strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åˆ </span></span><br><span class="line">session.query(Dep).<span class="built_in">filter</span>(Dep.<span class="built_in">id</span> &gt; <span class="number">3</span>).delete()</span><br><span class="line">session.commit()</span><br></pre></td></tr></table></figure>

<p><strong>æ”¹</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ”¹</span></span><br><span class="line">session.query(Dep).<span class="built_in">filter</span>(Dep.<span class="built_in">id</span> &gt; <span class="number">0</span>).update(&#123;<span class="string">&#x27;dname&#x27;</span>:<span class="string">&#x27;å“‡å“ˆå“ˆ&#x27;</span>&#125;)</span><br><span class="line">session.query(Dep).<span class="built_in">filter</span>(Dep.<span class="built_in">id</span> &gt; <span class="number">0</span>).update(&#123;<span class="string">&#x27;dname&#x27;</span>:Dep.dname+<span class="string">&#x27;_SB&#x27;</span>&#125;,synchronize_session=<span class="literal">False</span>)</span><br><span class="line">session.query(Dep).<span class="built_in">filter</span>(Dep.<span class="built_in">id</span> &gt; <span class="number">0</span>).update(&#123;<span class="string">&#x27;id&#x27;</span>:Dep.<span class="built_in">id</span>*<span class="number">100</span>&#125;,synchronize_session=<span class="string">&#x27;evaluate&#x27;</span>)</span><br><span class="line"></span><br><span class="line">session.commit()</span><br></pre></td></tr></table></figure>

<p><strong>æŸ¥</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æŸ¥æ‰€æœ‰,å–æ‰€æœ‰å­—æ®µ</span></span><br><span class="line">res=session.query(Dep).<span class="built_in">all</span>() <span class="comment">#for row in res:print(row.id,row.dname)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥æ‰€æœ‰,å–æŒ‡å®šå­—æ®µ</span></span><br><span class="line">res=session.query(Dep.dname).order_by(Dep.<span class="built_in">id</span>).<span class="built_in">all</span>() <span class="comment">#for row in res:print(row.dname)</span></span><br><span class="line"></span><br><span class="line">res=session.query(Dep.dname).first()</span><br><span class="line"><span class="built_in">print</span>(res) <span class="comment"># (&#x27;å“‡å“ˆå“ˆ_SB&#x27;,)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿‡æ»¤æŸ¥</span></span><br><span class="line">res=session.query(Dep).<span class="built_in">filter</span>(Dep.<span class="built_in">id</span> &gt; <span class="number">1</span>,Dep.<span class="built_in">id</span> &lt;<span class="number">1000</span>) <span class="comment">#é€—å·åˆ†éš”,é»˜è®¤ä¸ºand</span></span><br><span class="line"><span class="built_in">print</span>([(row.<span class="built_in">id</span>,row.dname) <span class="keyword">for</span> row <span class="keyword">in</span> res])</span><br></pre></td></tr></table></figure>

<h3 id="å››-å…¶ä»–æŸ¥è¯¢ç›¸å…³"><a href="#å››-å…¶ä»–æŸ¥è¯¢ç›¸å…³" class="headerlink" title="å›› å…¶ä»–æŸ¥è¯¢ç›¸å…³"></a>å›› å…¶ä»–æŸ¥è¯¢ç›¸å…³</h3><p><strong>ä¸€ å‡†å¤‡è¡¨å’Œæ•°æ®</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column,Integer,String,ForeignKey</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker</span><br><span class="line"></span><br><span class="line">egine=create_engine(<span class="string">&#x27;mysql+pymysql://root@127.0.0.1:3306/db1?charset=utf8&#x27;</span>,max_overflow=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">Base=declarative_base()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¤šå¯¹ä¸€:å‡è®¾å¤šä¸ªå‘˜å·¥å¯ä»¥å±äºä¸€ä¸ªéƒ¨é—¨,è€Œå¤šä¸ªéƒ¨é—¨ä¸èƒ½æœ‰åŒä¸€ä¸ªå‘˜å·¥(åªæœ‰åˆ›å»ºå…¬å¸æ‰æŠŠå‘˜å·¥å½“éª†é©¼ç”¨,ä¸€ä¸ªå‘˜å·¥èº«å…¼æ•°èŒ)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dep</span>(<span class="params">Base</span>):</span></span><br><span class="line">    __tablename__=<span class="string">&#x27;dep&#x27;</span></span><br><span class="line">    <span class="built_in">id</span>=Column(Integer,primary_key=<span class="literal">True</span>,autoincrement=<span class="literal">True</span>)</span><br><span class="line">    dname=Column(String(<span class="number">64</span>),nullable=<span class="literal">False</span>,index=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Emp</span>(<span class="params">Base</span>):</span></span><br><span class="line">    __tablename__=<span class="string">&#x27;emp&#x27;</span></span><br><span class="line">    <span class="built_in">id</span>=Column(Integer,primary_key=<span class="literal">True</span>,autoincrement=<span class="literal">True</span>)</span><br><span class="line">    ename=Column(String(<span class="number">32</span>),nullable=<span class="literal">False</span>,index=<span class="literal">True</span>)</span><br><span class="line">    dep_id=Column(Integer,ForeignKey(<span class="string">&#x27;dep.id&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init_db</span>():</span></span><br><span class="line">    Base.metadata.create_all(egine)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drop_db</span>():</span></span><br><span class="line">    Base.metadata.drop_all(egine)</span><br><span class="line"></span><br><span class="line">drop_db()</span><br><span class="line">init_db()</span><br><span class="line">Session=sessionmaker(bind=egine)</span><br><span class="line">session=Session()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡†å¤‡æ•°æ®</span></span><br><span class="line">session.add_all([</span><br><span class="line">    Dep(dname=<span class="string">&#x27;æŠ€æœ¯&#x27;</span>),</span><br><span class="line">    Dep(dname=<span class="string">&#x27;é”€å”®&#x27;</span>),</span><br><span class="line">    Dep(dname=<span class="string">&#x27;è¿è¥&#x27;</span>),</span><br><span class="line">    Dep(dname=<span class="string">&#x27;äººäº‹&#x27;</span>),</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">session.add_all([</span><br><span class="line">    Emp(ename=<span class="string">&#x27;æ—æµ·å³°&#x27;</span>,dep_id=<span class="number">1</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;ææ°&#x27;</span>,dep_id=<span class="number">1</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;æ­¦é…é½&#x27;</span>,dep_id=<span class="number">1</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;å…ƒæ˜Š&#x27;</span>,dep_id=<span class="number">2</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;æé’¢å¼¹&#x27;</span>,dep_id=<span class="number">3</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;å¼ äºŒä¸«&#x27;</span>,dep_id=<span class="number">4</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;æå¦å…‹&#x27;</span>,dep_id=<span class="number">2</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;ç‹å¤§ç‚®&#x27;</span>,dep_id=<span class="number">4</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;ç‰›æ¦´å¼¹&#x27;</span>,dep_id=<span class="number">3</span>)</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">session.commit()</span><br></pre></td></tr></table></figure>

<p><strong>äºŒ æ¡ä»¶ã€é€šé…ç¬¦ã€limitã€æ’åºã€åˆ†ç»„ã€è¿è¡¨ã€ç»„åˆ</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¸€ã€æ¡ä»¶</span></span><br><span class="line">sql=session.query(Emp).filter_by(ename=<span class="string">&#x27;æ—æµ·å³°&#x27;</span>) <span class="comment">#filter_byåªèƒ½ä¼ å‚æ•°:ä»€ä¹ˆç­‰äºä»€ä¹ˆ</span></span><br><span class="line">res=sql.<span class="built_in">all</span>() <span class="comment">#sqlè¯­å¥çš„æ‰§è¡Œç»“æœ</span></span><br><span class="line"></span><br><span class="line">res=session.query(Emp).<span class="built_in">filter</span>(Emp.<span class="built_in">id</span>&gt;<span class="number">0</span>,Emp.ename == <span class="string">&#x27;æ—æµ·å³°&#x27;</span>).<span class="built_in">all</span>() <span class="comment">#filterå†…ä¼ çš„æ˜¯è¡¨è¾¾å¼,é€—å·åˆ†éš”,é»˜è®¤ä¸ºand,</span></span><br><span class="line">res=session.query(Emp).<span class="built_in">filter</span>(Emp.<span class="built_in">id</span>.between(<span class="number">1</span>,<span class="number">3</span>),Emp.ename == <span class="string">&#x27;æ—æµ·å³°&#x27;</span>).<span class="built_in">all</span>()</span><br><span class="line">res=session.query(Emp).<span class="built_in">filter</span>(Emp.<span class="built_in">id</span>.in_([<span class="number">1</span>,<span class="number">3</span>,<span class="number">99</span>,<span class="number">101</span>]),Emp.ename == <span class="string">&#x27;æ—æµ·å³°&#x27;</span>).<span class="built_in">all</span>()</span><br><span class="line">res=session.query(Emp).<span class="built_in">filter</span>(~Emp.<span class="built_in">id</span>.in_([<span class="number">1</span>,<span class="number">3</span>,<span class="number">99</span>,<span class="number">101</span>]),Emp.ename == <span class="string">&#x27;æ—æµ·å³°&#x27;</span>) <span class="comment">#~ä»£è¡¨å–å,è½¬æ¢æˆsqlå°±æ˜¯å…³é”®å­—not</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> and_,or_</span><br><span class="line">res=session.query(Emp).<span class="built_in">filter</span>(and_(Emp.<span class="built_in">id</span> &gt; <span class="number">0</span>,Emp.ename==<span class="string">&#x27;æ—æµ·å³°&#x27;</span>)).<span class="built_in">all</span>()</span><br><span class="line">res=session.query(Emp).<span class="built_in">filter</span>(or_(Emp.<span class="built_in">id</span> &lt; <span class="number">2</span>,Emp.ename==<span class="string">&#x27;åŠŸå¤«ç†ŠçŒ«&#x27;</span>)).<span class="built_in">all</span>()</span><br><span class="line">res=session.query(Emp).<span class="built_in">filter</span>(</span><br><span class="line">    or_(</span><br><span class="line">        Emp.dep_id == <span class="number">3</span>,</span><br><span class="line">        and_(Emp.<span class="built_in">id</span> &gt; <span class="number">1</span>,Emp.ename==<span class="string">&#x27;åŠŸå¤«ç†ŠçŒ«&#x27;</span>),</span><br><span class="line">        Emp.ename != <span class="string">&#x27;&#x27;</span></span><br><span class="line">    )</span><br><span class="line">).<span class="built_in">all</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#äºŒã€é€šé…ç¬¦</span></span><br><span class="line">res=session.query(Emp).<span class="built_in">filter</span>(Emp.ename.like(<span class="string">&#x27;%æµ·_%&#x27;</span>)).<span class="built_in">all</span>()</span><br><span class="line">res=session.query(Emp).<span class="built_in">filter</span>(~Emp.ename.like(<span class="string">&#x27;%æµ·_%&#x27;</span>)).<span class="built_in">all</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸‰ã€limit</span></span><br><span class="line">res=session.query(Emp)[<span class="number">0</span>:<span class="number">5</span>:<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#å››ã€æ’åº</span></span><br><span class="line">res=session.query(Emp).order_by(Emp.dep_id.desc()).<span class="built_in">all</span>()</span><br><span class="line">res=session.query(Emp).order_by(Emp.dep_id.desc(),Emp.<span class="built_in">id</span>.asc()).<span class="built_in">all</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">#äº”ã€åˆ†ç»„</span></span><br><span class="line"><span class="keyword">from</span> sqlalchemy.sql <span class="keyword">import</span> func</span><br><span class="line"></span><br><span class="line">res=session.query(Emp.dep_id).group_by(Emp.dep_id).<span class="built_in">all</span>()</span><br><span class="line">res=session.query(</span><br><span class="line">    func.<span class="built_in">max</span>(Emp.dep_id),</span><br><span class="line">    func.<span class="built_in">min</span>(Emp.dep_id),</span><br><span class="line">    func.<span class="built_in">sum</span>(Emp.dep_id),</span><br><span class="line">    func.avg(Emp.dep_id),</span><br><span class="line">    func.count(Emp.dep_id),</span><br><span class="line">).group_by(Emp.dep_id).<span class="built_in">all</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">res=session.query(</span><br><span class="line">    Emp.dep_id,</span><br><span class="line">    func.count(<span class="number">1</span>),</span><br><span class="line">).group_by(Emp.dep_id).having(func.count(<span class="number">1</span>) &gt; <span class="number">2</span>).<span class="built_in">all</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#å…­ã€è¿è¡¨</span></span><br><span class="line"><span class="comment">#ç¬›å¡å°”ç§¯</span></span><br><span class="line">res=session.query(Emp,Dep).<span class="built_in">all</span>() <span class="comment">#select * from emp,dep;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#whereæ¡ä»¶</span></span><br><span class="line">res=session.query(Emp,Dep).<span class="built_in">filter</span>(Emp.dep_id==Dep.<span class="built_in">id</span>).<span class="built_in">all</span>()</span><br><span class="line"><span class="comment"># for row in res:</span></span><br><span class="line"><span class="comment">#     emp_tb=row[0]</span></span><br><span class="line"><span class="comment">#     dep_tb=row[1]</span></span><br><span class="line"><span class="comment">#     print(emp_tb.id,emp_tb.ename,dep_tb.id,dep_tb.dname)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å†…è¿æ¥</span></span><br><span class="line">res=session.query(Emp).join(Dep)</span><br><span class="line"><span class="comment">#joiné»˜è®¤ä¸ºå†…è¿æ¥,SQLAlchemyä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬é€šè¿‡foreign keyå­—æ®µå»æ‰¾å…³è”å…³ç³»</span></span><br><span class="line"><span class="comment">#ä½†æ˜¯ä¸Šè¿°æŸ¥è¯¢çš„ç»“æœå‡ä¸ºEmpè¡¨çš„å­—æ®µ,è¿™æ ·é“¾è¡¨è¿˜æœ‰æ¯›çº¿æ„ä¹‰,äºæ˜¯æˆ‘ä»¬ä¿®æ”¹ä¸º</span></span><br><span class="line">res=session.query(Emp.<span class="built_in">id</span>,Emp.ename,Emp.dep_id,Dep.dname).join(Dep).<span class="built_in">all</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">#å·¦è¿æ¥:isouter=True</span></span><br><span class="line">res=session.query(Emp.<span class="built_in">id</span>,Emp.ename,Emp.dep_id,Dep.dname).join(Dep,isouter=<span class="literal">True</span>).<span class="built_in">all</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">#å³è¿æ¥:åŒå·¦è¿æ¥,åªæ˜¯æŠŠä¸¤ä¸ªè¡¨çš„ä½ç½®æ¢ä¸€ä¸‹</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¸ƒã€ç»„åˆ</span></span><br><span class="line">q1=session.query(Emp.<span class="built_in">id</span>,Emp.ename).<span class="built_in">filter</span>(Emp.<span class="built_in">id</span> &gt; <span class="number">0</span>,Emp.<span class="built_in">id</span> &lt; <span class="number">5</span>)</span><br><span class="line">q2=session.query(Emp.<span class="built_in">id</span>,Emp.ename).<span class="built_in">filter</span>(</span><br><span class="line">    or_(</span><br><span class="line">        Emp.ename.like(<span class="string">&#x27;%æµ·%&#x27;</span>),</span><br><span class="line">        Emp.ename.like(<span class="string">&#x27;%æ˜Š%&#x27;</span>),</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line">res1=q1.union(q2) <span class="comment">#ç»„åˆ+å»é‡</span></span><br><span class="line">res2=q1.union_all(q2) <span class="comment">#ç»„åˆ,ä¸å»é‡</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>([i.ename <span class="keyword">for</span> i <span class="keyword">in</span> q1.<span class="built_in">all</span>()]) <span class="comment">#[&#x27;æ—æµ·å³°&#x27;, &#x27;ææ°&#x27;, &#x27;æ­¦é…é½&#x27;, &#x27;å…ƒæ˜Š&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>([i.ename <span class="keyword">for</span> i <span class="keyword">in</span> q2.<span class="built_in">all</span>()]) <span class="comment">#[&#x27;æ—æµ·å³°&#x27;, &#x27;å…ƒæ˜Š&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>([i.ename <span class="keyword">for</span> i <span class="keyword">in</span> res1.<span class="built_in">all</span>()]) <span class="comment">#[&#x27;æ—æµ·å³°&#x27;, &#x27;ææ°&#x27;, &#x27;æ­¦é…é½&#x27;, &#x27;å…ƒæ˜Š&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>([i.ename <span class="keyword">for</span> i <span class="keyword">in</span> res2.<span class="built_in">all</span>()]) <span class="comment">#[&#x27;æ—æµ·å³°&#x27;, &#x27;ææ°&#x27;, &#x27;æ­¦é…é½&#x27;, &#x27;å…ƒæ˜Š&#x27;, &#x27;å…ƒæ˜Š&#x27;, &#x27;æ—æµ·å³°&#x27;]</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¸‰ å­æŸ¥è¯¢</strong></p>
<p><strong>æœ‰ä¸‰ç§å½¢å¼çš„å­æŸ¥è¯¢ï¼Œæ³¨æ„ï¼šå­æŸ¥è¯¢çš„sqlå¿…é¡»ç”¨æ‹¬å·åŒ…èµ·æ¥,å°¤å…¶åœ¨å½¢å¼ä¸‰ä¸­éœ€è¦æ³¨æ„è¿™ä¸€ç‚¹</strong></p>
<p>å½¢å¼ä¸€:å­æŸ¥è¯¢å½“åšä¸€å¼ è¡¨æ¥ç”¨,è°ƒç”¨subquery()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç¤ºä¾‹:æŸ¥å‡ºidå¤§äº2çš„å‘˜å·¥,å½“åšå­æŸ¥è¯¢çš„è¡¨ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åŸç”ŸSQL:</span></span><br><span class="line"><span class="comment"># select * from (select * from emp where id &gt; 2);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ORM:</span></span><br><span class="line">res=session.query(</span><br><span class="line">    session.query(Emp).<span class="built_in">filter</span>(Emp.<span class="built_in">id</span> &gt; <span class="number">8</span>).subquery()</span><br><span class="line">).<span class="built_in">all</span>()</span><br></pre></td></tr></table></figure>

<p>å½¢å¼äºŒ:å­æŸ¥è¯¢å½“åšinçš„èŒƒå›´ç”¨,è°ƒç”¨in_</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç¤ºä¾‹:#æŸ¥å‡ºé”€å”®éƒ¨é—¨çš„å‘˜å·¥å§“å</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åŸç”ŸSQL:</span></span><br><span class="line"><span class="comment"># select ename from emp where dep_id in (select id from dep where dname=&#x27;é”€å”®&#x27;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ORM:</span></span><br><span class="line">res=session.query(Emp.ename).<span class="built_in">filter</span>(Emp.dep_id.in_(</span><br><span class="line">    session.query(Dep.<span class="built_in">id</span>).filter_by(dname=<span class="string">&#x27;é”€å”®&#x27;</span>), <span class="comment">#ä¼ çš„æ˜¯å‚æ•°</span></span><br><span class="line">    <span class="comment"># session.query(Dep.id).filter(Dep.dname==&#x27;é”€å”®&#x27;) #ä¼ çš„æ˜¯è¡¨è¾¾å¼</span></span><br><span class="line">)).<span class="built_in">all</span>()</span><br></pre></td></tr></table></figure>

<p>å½¢å¼ä¸‰:å­æŸ¥è¯¢å½“åšselectåçš„å­—æ®µ,è°ƒç”¨as_scalar()</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç¤ºä¾‹:æŸ¥è¯¢æ‰€æœ‰çš„å‘˜å·¥å§“åä¸éƒ¨é—¨å</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åŸç”ŸSQL:</span></span><br><span class="line"><span class="comment"># select ename as å‘˜å·¥å§“å,(select dname from dep where id = emp.dep_id) as éƒ¨é—¨å from emp;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ORM:</span></span><br><span class="line">sub_sql=session.query(Dep.dname).<span class="built_in">filter</span>(Dep.<span class="built_in">id</span>==Emp.dep_id) <span class="comment">#SELECT dep.dname FROM dep, emp WHERE dep.id = emp.dep_id</span></span><br><span class="line">sub_sql.as_scalar() <span class="comment">#as_scalarçš„åŠŸèƒ½å°±æ˜¯æŠŠä¸Šé¢çš„sub_sqlåŠ ä¸Šäº†æ‹¬å·</span></span><br><span class="line"></span><br><span class="line">res=session.query(Emp.ename,sub_sql.as_scalar()).<span class="built_in">all</span>()</span><br></pre></td></tr></table></figure>

<h3 id="äº”-æ­£æŸ¥ã€åæŸ¥"><a href="#äº”-æ­£æŸ¥ã€åæŸ¥" class="headerlink" title="äº” æ­£æŸ¥ã€åæŸ¥"></a>äº” æ­£æŸ¥ã€åæŸ¥</h3><p><strong>ä¸€ è¡¨ä¿®æ”¹</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column,Integer,String,ForeignKey</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker,relationship</span><br><span class="line"></span><br><span class="line">egine=create_engine(<span class="string">&#x27;mysql+pymysql://root@127.0.0.1:3306/db1?charset=utf8&#x27;</span>,max_overflow=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">Base=declarative_base()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dep</span>(<span class="params">Base</span>):</span></span><br><span class="line">    __tablename__=<span class="string">&#x27;dep&#x27;</span></span><br><span class="line">    <span class="built_in">id</span>=Column(Integer,primary_key=<span class="literal">True</span>,autoincrement=<span class="literal">True</span>)</span><br><span class="line">    dname=Column(String(<span class="number">64</span>),nullable=<span class="literal">False</span>,index=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Emp</span>(<span class="params">Base</span>):</span></span><br><span class="line">    __tablename__=<span class="string">&#x27;emp&#x27;</span></span><br><span class="line">    <span class="built_in">id</span>=Column(Integer,primary_key=<span class="literal">True</span>,autoincrement=<span class="literal">True</span>)</span><br><span class="line">    ename=Column(String(<span class="number">32</span>),nullable=<span class="literal">False</span>,index=<span class="literal">True</span>)</span><br><span class="line">    dep_id=Column(Integer,ForeignKey(<span class="string">&#x27;dep.id&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#åœ¨ForeignKeyæ‰€åœ¨çš„ç±»å†…æ·»åŠ relationshipçš„å­—æ®µ,æ³¨æ„:</span></span><br><span class="line">    <span class="comment">#1:Depæ˜¯ç±»å</span></span><br><span class="line">    <span class="comment">#2:departå­—æ®µä¸ä¼šå†æ•°æ®åº“è¡¨ä¸­ç”Ÿæˆå­—æ®µ</span></span><br><span class="line">    <span class="comment">#3:departç”¨äºEmpè¡¨æŸ¥è¯¢Depè¡¨(æ­£å‘æŸ¥è¯¢),è€Œxxooç”¨äºDepè¡¨æŸ¥è¯¢Empè¡¨(åå‘æŸ¥è¯¢),</span></span><br><span class="line">    depart=relationship(<span class="string">&#x27;Dep&#x27;</span>,backref=<span class="string">&#x27;xxoo&#x27;</span>) </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init_db</span>():</span></span><br><span class="line">    Base.metadata.create_all(egine)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drop_db</span>():</span></span><br><span class="line">    Base.metadata.drop_all(egine)</span><br><span class="line"></span><br><span class="line">drop_db()</span><br><span class="line">init_db()</span><br><span class="line">Session=sessionmaker(bind=egine)</span><br><span class="line">session=Session()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡†å¤‡æ•°æ®</span></span><br><span class="line">session.add_all([</span><br><span class="line">    Dep(dname=<span class="string">&#x27;æŠ€æœ¯&#x27;</span>),</span><br><span class="line">    Dep(dname=<span class="string">&#x27;é”€å”®&#x27;</span>),</span><br><span class="line">    Dep(dname=<span class="string">&#x27;è¿è¥&#x27;</span>),</span><br><span class="line">    Dep(dname=<span class="string">&#x27;äººäº‹&#x27;</span>),</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">session.add_all([</span><br><span class="line">    Emp(ename=<span class="string">&#x27;æ—æµ·å³°&#x27;</span>,dep_id=<span class="number">1</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;ææ°&#x27;</span>,dep_id=<span class="number">1</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;æ­¦é…é½&#x27;</span>,dep_id=<span class="number">1</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;å…ƒæ˜Š&#x27;</span>,dep_id=<span class="number">2</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;æé’¢å¼¹&#x27;</span>,dep_id=<span class="number">3</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;å¼ äºŒä¸«&#x27;</span>,dep_id=<span class="number">4</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;æå¦å…‹&#x27;</span>,dep_id=<span class="number">2</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;ç‹å¤§ç‚®&#x27;</span>,dep_id=<span class="number">4</span>),</span><br><span class="line">    Emp(ename=<span class="string">&#x27;ç‰›æ¦´å¼¹&#x27;</span>,dep_id=<span class="number">3</span>)</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">session.commit()</span><br></pre></td></tr></table></figure>

<p><strong>äºŒ æ ‡å‡†è¿è¡¨æŸ¥è¯¢</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹:æŸ¥è¯¢å‘˜å·¥åä¸å…¶éƒ¨é—¨å</span></span><br><span class="line">res=session.query(Emp.ename,Dep.dname).join(Dep) <span class="comment">#è¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> res:</span><br><span class="line">    <span class="built_in">print</span>(row[<span class="number">0</span>],row[<span class="number">1</span>]) <span class="comment">#ç­‰åŒäºprint(row.ename,row.dname)</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¸‰ åŸºäºrelationshipçš„æ­£æŸ¥ã€åæŸ¥</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#SQLAlchemyçš„relationshipåœ¨å†…éƒ¨å¸®æˆ‘ä»¬åšå¥½è¡¨çš„é“¾æ¥</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥è¯¢å‘˜å·¥åä¸å…¶éƒ¨é—¨å(æ­£å‘æŸ¥)</span></span><br><span class="line">res=session.query(Emp)</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> res:</span><br><span class="line">    <span class="built_in">print</span>(row.ename,row.<span class="built_in">id</span>,row.depart.dname)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥è¯¢éƒ¨é—¨åä»¥åŠè¯¥éƒ¨é—¨ä¸‹çš„å‘˜å·¥(åå‘æŸ¥)</span></span><br><span class="line">res=session.query(Dep)</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> res:</span><br><span class="line">    <span class="comment"># print(row.dname,row.xxoo)</span></span><br><span class="line">    <span class="built_in">print</span>(row.dname,[r.ename <span class="keyword">for</span> r <span class="keyword">in</span> row.xxoo])</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>50-é™„å½•äº”ï¼šæ€§èƒ½æµ‹è¯•ä¹‹timeit</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/50_%E9%99%84%E5%BD%95%E4%BA%94%EF%BC%9A%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E4%B9%8Btimeit/</url>
    <content><![CDATA[<h2 id="ä¸€ã€timeitæ¨¡å—çš„ä½¿ç”¨"><a href="#ä¸€ã€timeitæ¨¡å—çš„ä½¿ç”¨" class="headerlink" title="ä¸€ã€timeitæ¨¡å—çš„ä½¿ç”¨"></a><strong>ä¸€ã€timeitæ¨¡å—çš„ä½¿ç”¨</strong></h2><p>timeitæ¨¡å—ä¸‹ä¸»è¦æœ‰ä¸¤ä¸ªå‡½æ•°ååˆ†æœ‰ç”¨ï¼Œåˆ†åˆ«ä¸ºtimeit.timeitã€timeit.repeat</p>
<h3 id="1-1-timeit-timeitçš„ä½¿ç”¨"><a href="#1-1-timeit-timeitçš„ä½¿ç”¨" class="headerlink" title="1.1 timeit.timeitçš„ä½¿ç”¨"></a><strong>1.1 timeit.timeitçš„ä½¿ç”¨</strong></h3><p> timeit.timeitå‚æ•°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># stmt</span><br><span class="line">æŒ‡å®šè¦æ‰§è¡Œçš„è¯­å¥/statement,å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²å½¢å¼çš„è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå˜é‡çš„å½¢å¼ã€‚</span><br><span class="line"></span><br><span class="line"># number</span><br><span class="line">æŒ‡å®šstmtè¯­å¥æ‰§è¡Œçš„æ¬¡æ•°ï¼Œé»˜è®¤å€¼ä¸ºä¸€ç™¾ä¸‡æ¬¡</span><br><span class="line"></span><br><span class="line"># setup</span><br><span class="line">è¿™ä¸ªå‚æ•°å¯ä»¥å°†stmtçš„ç¯å¢ƒä¼ è¿›å»ã€‚æ¯”å¦‚å„ç§importä»¥åŠå‚æ•°ã€‚å¤šä¸ªå€¼ç”¨åˆ†å·ï¼›åˆ†éš”å¼€</span><br><span class="line"></span><br><span class="line"># timer </span><br><span class="line">æŒ‡å®šè®¡æ•°å™¨å‡½æ•°ï¼Œä½¿ç”¨é»˜è®¤time.perf_counterå°±å¥½ï¼Œè¯¦è§ä¸‹ä¸€å°èŠ‚</span><br></pre></td></tr></table></figure>

<p> stmtå‚æ•°ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from timeit import timeit, repeat</span><br><span class="line"></span><br><span class="line"># 1ã€stmtå€¼ä¸ºå­—ç¬¦ä¸²è¡¨è¾¾å¼</span><br><span class="line">res1 = timeit(stmt=&quot;[i for i in range(1000)]&quot;, number=100)</span><br><span class="line"></span><br><span class="line">#2ã€stmtå€¼ä¸ºä¸€ä¸ªå˜é‡</span><br><span class="line">statement = &quot;&quot;&quot;</span><br><span class="line">l = []</span><br><span class="line">for i in range(1000):</span><br><span class="line">    l.append(i)</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">res2 = timeit(stmt=statement, number=100)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3ã€stmtå€¼ä¸ºä¸€ä¸ªå‡½æ•°</span><br><span class="line">def foo():</span><br><span class="line">    l = []</span><br><span class="line">    for i in range(1000):</span><br><span class="line">        l.append(i)</span><br><span class="line"></span><br><span class="line">res3 = timeit(stmt=foo, number=100)</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">æ³¨æ„ï¼šå¦‚æœstmt=&quot;foo()&quot;ï¼Œé‚£ä¹ˆå¿…é¡»é€šè¿‡setupoæ¥å¯¼å…¥from __main__ import fooå¦‚ä¸‹</span><br><span class="line">res3=timeit(stmt=&quot;foo()&quot;,setup=&#x27;from __main__ import foo&#x27;,number=10)</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(res1)  # 0.003296864000731148</span><br><span class="line">print(res2)  # 0.008153499999025371</span><br><span class="line">print(res3)  # 0.008153499999025371</span><br></pre></td></tr></table></figure>

<p> setupå‚æ•°ä½¿ç”¨ç¤ºä¾‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from timeit import timeit</span><br><span class="line"></span><br><span class="line">res=timeit(stmt=&quot;json.loads(json_data)&quot;,number=1000,</span><br><span class="line">           setup=&quot;import json;data=&#123;&#x27;name&#x27;:&#x27;egon&#x27;,&#x27;age&#x27;:18&#125;;json_data=json.dumps(data)&quot;</span><br><span class="line">           )</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>

<p>###1.2 timeit.repeat</p>
<p> å…¶å®repeatå°±æ¯”timeitå¤šäº†ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°åä¸å‡½æ•°åä¸€è‡´ï¼Œä¹Ÿå«repeatï¼Œç”¨æ¥æŒ‡å®šé‡å¤çš„æ¬¡æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from timeit import timeit, repeat</span><br><span class="line"></span><br><span class="line">res = repeat(stmt=&quot;[i for i in range(1000)]&quot;, number=100,repeat=3)</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line"># repeat=3ï¼Œæ‰€ä»¥è¿”å›çš„åˆ—è¡¨ä¸­åŒ…å«ä¸‰ä¸ªå…ƒç´ ï¼Œæ‰€ä»£è¡¨çš„å«ä¹‰ä¾æ¬¡ä¸ºï¼š</span><br><span class="line"># 1ã€ç¬¬ä¸€ä¸ª100æ¬¡æ‰§è¡ŒæŒ‡å®šè¯­å¥æ‰€è€—è´¹æ—¶é—´</span><br><span class="line"># 2ã€ç¬¬äºŒä¸ª100æ¬¡æ‰§è¡ŒæŒ‡å®šè¯­å¥æ‰€è€—è´¹æ—¶é—´</span><br><span class="line"># 3ã€ç¬¬ä¸‰ä¸ª100æ¬¡æ‰§è¡ŒæŒ‡å®šè¯­å¥æ‰€è€—è´¹æ—¶é—´</span><br><span class="line">[0.0033898779984156135, 0.003476719997706823, 0.00342772699877969]</span><br></pre></td></tr></table></figure>

<p>##äºŒã€ç¼–å†™é€šç”¨è®¡æ—¶è£…é¥°å™¨</p>
<p> python2å’Œpython3é‡Œé¢çš„è®¡æ—¶å‡½æ•°æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æ¨èå»ºè®®ä½¿ç”¨timeitæ¨¡å—ä¸­çš„timeit.default_timer()ï¼Œå®ƒä¼šæ ¹æ®å¹³å°ä¸åŒé€‰å–åˆé€‚çš„è®¡æ—¶å‡½æ•°ï¼Œè¯¦è§£å¦‚ä¸‹</p>
<p> ç”±timeit.default_timer()çš„å®˜æ–¹æ–‡æ¡£å¯çŸ¥ï¼Œè®¡æ—¶æ—¶é—´ç²¾åº¦å’Œå¹³å°ä»¥åŠä½¿ç”¨çš„å‡½æ•°æœ‰å…³ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;Define a default timer, in a platform-specific manner. On Windows, time.clock() has microsecond granularity, but time.time()â€™s granularity is 1/60th of a second. On Unix, time.clock() has 1/100th of a second granularity, and time.time() is much more precise. On either platform, default_timer() measures wall clock time, not the CPU time. This means that other processes running on the same computer may interfere with the timing.&quot;</span><br><span class="line"></span><br><span class="line">ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼š</span><br><span class="line">â€œå®šä¹‰åœ¨é»˜è®¤çš„è®¡æ—¶å™¨ä¸­ï¼Œé’ˆå¯¹ä¸åŒå¹³å°é‡‡ç”¨ä¸åŒæ–¹å¼ã€‚åœ¨Windowsä¸Šï¼Œtime.clock()å…·æœ‰å¾®ç§’ç²¾åº¦ï¼Œä½†æ˜¯time.time()ç²¾åº¦æ˜¯1/60sã€‚åœ¨Unixä¸Šï¼Œtime.clock()æœ‰1/100sç²¾åº¦ï¼Œè€Œä¸”time.time()ç²¾åº¦è¿œè¿œæ›´é«˜ã€‚åœ¨å¦å¤–çš„å¹³å°ä¸Šï¼Œdefault_timer()æµ‹é‡çš„æ˜¯å¢™ä¸Šæ—¶é’Ÿæ—¶é—´ï¼Œä¸æ˜¯CPUæ—¶é—´ã€‚è¿™æ„å‘³ç€åŒä¸€è®¡ç®—æœºçš„å…¶ä»–è¿›ç¨‹å¯èƒ½å½±å“è®¡æ—¶ã€‚â€</span><br></pre></td></tr></table></figure>

<p> å…·ä½“åŒºåˆ«å¯ä»¥æŸ¥çœ‹python2å’Œ3ä¸­timeitçš„å®ç°</p>
<p> åœ¨python2ä¸­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if sys.platform == &quot;win32&quot;:</span><br><span class="line">    # On Windows, the best timer is time.clock()</span><br><span class="line">    default_timer = time.clock</span><br><span class="line">else:</span><br><span class="line">    # On most other platforms the best timer is time.time()</span><br><span class="line">    default_timer = time.time</span><br></pre></td></tr></table></figure>

<p>åœ¨python3ä¸­ï¼šdefault_timer &#x3D; time.perf_counter</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç”±time.clock()çš„å®˜æ–¹æ–‡æ¡£å¯ä»¥çœ‹å‡ºï¼š</span><br><span class="line"></span><br><span class="line">&quot;Deprecated since version 3.3: The behaviour of this function depends on the platform: use perf_counter() or process_time() instead, depending on your requirements, to have a well defined behaviour.&quot;</span><br><span class="line"></span><br><span class="line">ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼š</span><br><span class="line">â€œpython3.3ç‰ˆæœ¬åtime.clock()å°±è¿‡æ—¶äº†ï¼šè¿™ä¸ªå‡½æ•°çš„è¡Œä¸ºå—å¹³å°å½±å“ï¼Œç”¨time.perf_counter()â€æˆ–è€…time.process_time()ä»£æ›¿æ¥å¾—åˆ°ä¸€ä¸ªå®šä¹‰æ›´å¥½çš„è¡Œä¸ºï¼Œå…·ä½“å–å†³äºä½ çš„éœ€æ±‚ã€‚â€</span><br></pre></td></tr></table></figure>

<p> æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·çœ‹å®˜æ–¹æ–‡æ¡£ä¸­çš„time.get_clock_info()</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://docs.python.org/3/library/time.html#time.get_clock_info</span><br></pre></td></tr></table></figure>

<p> ç»¼ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å®šä¸€ä¸ªåŒæ—¶é€‚ç”¨äºPython2å’ŒPython3è§£é‡Šå™¨çš„é€šç”¨è®¡æ—¶è£…é¥°å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import timeit</span><br><span class="line"></span><br><span class="line">def clock(func):</span><br><span class="line">    def clocked(*args, **kwargs):</span><br><span class="line">        start = timeit.default_timer()</span><br><span class="line">        res = func(*args, **kwargs)</span><br><span class="line">        run_time = timeit.default_timer() - start</span><br><span class="line">        func_name = func.__name__</span><br><span class="line">        arg_str = &#x27;, &#x27;.join(repr(arg) for arg in args)</span><br><span class="line">        print(&#x27;è°ƒç”¨&gt;&gt;&gt;%s(%s)   è¿”å›å€¼&gt;&gt;&gt;%r   è€—æ—¶&gt;&gt;&gt;%0.8fs&#x27; % (func_name, arg_str, res, run_time))</span><br><span class="line">        return res</span><br><span class="line"></span><br><span class="line">    return clocked</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@clock</span><br><span class="line">def func(n):</span><br><span class="line">    &quot;&quot;&quot;ç´¯è®¡åŠ 1&quot;&quot;&quot;</span><br><span class="line">    res=0</span><br><span class="line">    for i in range(n):</span><br><span class="line">        res+=1</span><br><span class="line">    return res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    func(10000000)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>48-é™„å½•ä¸‰ï¼šPythonæ˜¯è§£é‡Šå‹çš„å¼ºç±»å‹åŠ¨æ€è¯­è¨€</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/48_%E9%99%84%E5%BD%95%E4%B8%89%EF%BC%9APython%E6%98%AF%E8%A7%A3%E9%87%8A%E5%9E%8B%E7%9A%84%E5%BC%BA%E7%B1%BB%E5%9E%8B%E5%8A%A8%E6%80%81%E8%AF%AD%E8%A8%80/</url>
    <content><![CDATA[<h2 id="ä¸€ã€-ç¼–è¯‘å‹orè§£é‡Šå‹"><a href="#ä¸€ã€-ç¼–è¯‘å‹orè§£é‡Šå‹" class="headerlink" title="ä¸€ã€ ç¼–è¯‘å‹orè§£é‡Šå‹"></a><strong>ä¸€ã€ ç¼–è¯‘å‹orè§£é‡Šå‹</strong></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#1.1 ç¼–è¯‘å‹</span><br><span class="line">ç•¥</span><br><span class="line"></span><br><span class="line">#1.2 è§£é‡Šå‹ï¼ˆpythonå±äºè§£é‡Šå‹ï¼‰</span><br><span class="line">ç•¥</span><br></pre></td></tr></table></figure>

<h2 id="äºŒã€å¼ºç±»å‹orå¼±ç±»å‹"><a href="#äºŒã€å¼ºç±»å‹orå¼±ç±»å‹" class="headerlink" title="äºŒã€å¼ºç±»å‹orå¼±ç±»å‹"></a><strong>äºŒã€å¼ºç±»å‹orå¼±ç±»å‹</strong></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#2.1 å¼ºç±»å‹è¯­è¨€ï¼ˆpythonå±äºå¼ºç±»å‹ï¼‰ </span><br><span class="line">  æ•°æ®ç±»å‹ä¸å¯ä»¥è¢«å¿½ç•¥çš„è¯­è¨€ å³å˜é‡çš„æ•°æ®ç±»å‹ä¸€æ—¦è¢«å®šä¹‰ï¼Œé‚£å°±ä¸ä¼šå†æ”¹å˜ï¼Œé™¤éè¿›è¡Œå¼ºè½¬ã€‚ åœ¨pythonä¸­ï¼Œä¾‹å¦‚ï¼šname = &#x27;egon&#x27;ï¼Œè¿™ä¸ªå˜é‡nameåœ¨è¢«èµ‹å€¼çš„é‚£ä¸€åˆ»ï¼Œæ•°æ®ç±»å‹å°±è¢«ç¡®å®šæ­»äº†ï¼Œæ˜¯å­—ç¬¦å‹ï¼Œå€¼ä¸º&#x27;egon&#x27;ã€‚ </span><br><span class="line"></span><br><span class="line">#2.2 å¼±ç±»å‹è¯­è¨€ï¼š</span><br><span class="line">  æ•°æ®ç±»å‹å¯ä»¥è¢«å¿½ç•¥çš„è¯­è¨€ æ¯”å¦‚linuxä¸­çš„shellä¸­å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œæ˜¯éšç€è°ƒç”¨æ–¹å¼çš„ä¸åŒï¼Œæ•°æ®ç±»å‹å¯éšæ„åˆ‡æ¢çš„é‚£ç§ã€‚  </span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€åŠ¨æ€å‹oré™æ€å‹"><a href="#ä¸‰ã€åŠ¨æ€å‹oré™æ€å‹" class="headerlink" title="ä¸‰ã€åŠ¨æ€å‹oré™æ€å‹"></a><strong>ä¸‰ã€åŠ¨æ€å‹oré™æ€å‹</strong></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#3.1 åŠ¨æ€è¯­è¨€ï¼ˆpythonå±äºåŠ¨æ€è¯­è¨€ï¼‰</span><br><span class="line">  è¿è¡Œæ—¶æ‰è¿›è¡Œæ•°æ®ç±»å‹æ£€æŸ¥ å³åœ¨å˜é‡èµ‹å€¼æ—¶ï¼Œå°±ç¡®å®šäº†å˜é‡çš„æ•°æ®ç±»å‹ï¼Œä¸ç”¨äº‹å…ˆç»™å˜é‡æŒ‡å®šæ•°æ®ç±»å‹  </span><br><span class="line"></span><br><span class="line">#3.2 é™æ€è¯­è¨€</span><br><span class="line">  éœ€è¦äº‹å…ˆç»™å˜é‡è¿›è¡Œæ•°æ®ç±»å‹å®šä¹‰  </span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥ç»¼ä¸Šæ‰€è¿°ï¼ŒPythonæ˜¯ä¸€é—¨è§£é‡Šå‹çš„å¼ºç±»å‹åŠ¨æ€è¯­è¨€</p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>49-é™„å½•å››ï¼šPythonæ ¼å¼åŒ–å­—ç¬¦ä¸²çš„4ç§æ–¹å¼</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/49_%E9%99%84%E5%BD%95%E5%9B%9B%EF%BC%9APython%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%844%E4%B8%AD%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<h2 id="Pythonæ ¼å¼åŒ–å­—ç¬¦ä¸²çš„4ä¸­æ–¹å¼"><a href="#Pythonæ ¼å¼åŒ–å­—ç¬¦ä¸²çš„4ä¸­æ–¹å¼" class="headerlink" title="Pythonæ ¼å¼åŒ–å­—ç¬¦ä¸²çš„4ä¸­æ–¹å¼"></a><strong>Pythonæ ¼å¼åŒ–å­—ç¬¦ä¸²çš„4ä¸­æ–¹å¼</strong></h2><h2 id="ä¸€ï¼š-å·"><a href="#ä¸€ï¼š-å·" class="headerlink" title="ä¸€ï¼š%å·"></a><strong>ä¸€ï¼š%å·</strong></h2><p> %å·æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ–¹å¼ä»Pythonè¯ç”Ÿä¹‹åˆå°±å·²ç»å­˜åœ¨ï¼Œæ—¶è‡³ä»Šæ—¥ï¼Œpythonå®˜æ–¹ä¹Ÿå¹¶æœªå¼ƒç”¨%å·ï¼Œä½†ä¹Ÿå¹¶ä¸æ¨èè¿™ç§æ ¼å¼åŒ–æ–¹å¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 1ã€æ ¼å¼çš„å­—ç¬¦ä¸²ï¼ˆå³%sï¼‰ä¸è¢«æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼ˆå³ä¼ å…¥çš„å€¼ï¼‰å¿…é¡»æŒ‰ç…§ä½ç½®ä¸€ä¸€å¯¹åº”</span><br><span class="line"># psï¼šå½“éœ€æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²è¿‡å¤šæ—¶ï¼Œä½ç½®æå®¹æ˜“ææ··</span><br><span class="line">print(&#x27;%s asked %s to do something&#x27; % (&#x27;egon&#x27;, &#x27;lili&#x27;))  # egon asked lili to do something</span><br><span class="line">print(&#x27;%s asked %s to do something&#x27; % (&#x27;lili&#x27;, &#x27;egon&#x27;))  # lili asked egon to do something</span><br><span class="line"></span><br><span class="line"># 2ã€å¯ä»¥é€šè¿‡å­—å…¸æ–¹å¼æ ¼å¼åŒ–ï¼Œæ‰“ç ´äº†ä½ç½®å¸¦æ¥çš„é™åˆ¶ä¸å›°æ‰°</span><br><span class="line">print(&#x27;æˆ‘çš„åå­—æ˜¯ %(name)s, æˆ‘çš„å¹´é¾„æ˜¯ %(age)s.&#x27; % &#123;&#x27;name&#x27;: &#x27;egon&#x27;, &#x27;age&#x27;: 18&#125;)</span><br><span class="line"></span><br><span class="line">kwargs=&#123;&#x27;name&#x27;: &#x27;egon&#x27;, &#x27;age&#x27;: 18&#125;</span><br><span class="line">print(&#x27;æˆ‘çš„åå­—æ˜¯ %(name)s, æˆ‘çš„å¹´é¾„æ˜¯ %(age)s.&#x27; % kwargs)</span><br></pre></td></tr></table></figure>

<h2 id="äºŒï¼šstr-format"><a href="#äºŒï¼šstr-format" class="headerlink" title="äºŒï¼šstr.format"></a><strong>äºŒï¼šstr.format</strong></h2><p> è¯¥<code>format</code>æ–¹æ³•æ˜¯åœ¨Python 2.6ä¸­å¼•å…¥çš„ï¼Œæ˜¯å­—ç¬¦ä¸²ç±»å‹çš„å†…ç½®æ–¹æ³•ã€‚å› ä¸ºstr.formatçš„æ–¹å¼åœ¨æ€§èƒ½å’Œä½¿ç”¨çš„çµæ´»æ€§ä¸Šéƒ½æ¯”%å·æ›´èƒœä¸€ç­¹ï¼Œæ‰€ä»¥æ¨èä½¿ç”¨</p>
<p><em>2.1 ä½¿ç”¨ä½ç½®å‚æ•°</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># æŒ‰ç…§ä½ç½®ä¸€ä¸€å¯¹åº”</span><br><span class="line">print(&#x27;&#123;&#125; asked &#123;&#125; to do something&#x27;.format(&#x27;egon&#x27;, &#x27;lili&#x27;))  # egon asked lili to do something</span><br><span class="line">print(&#x27;&#123;&#125; asked &#123;&#125; to do something&#x27;.format(&#x27;lili&#x27;, &#x27;egon&#x27;))  # lili asked egon to do something</span><br></pre></td></tr></table></figure>

<p><em>2.2 ä½¿ç”¨ç´¢å¼•</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ä½¿ç”¨ç´¢å¼•å–å¯¹åº”ä½ç½®çš„å€¼</span><br><span class="line">print(&#x27;&#123;0&#125;&#123;0&#125;&#123;1&#125;&#123;0&#125;&#x27;.format(&#x27;x&#x27;,&#x27;y&#x27;)) # xxyx</span><br></pre></td></tr></table></figure>

<p><em>2.3 ä½¿ç”¨å…³é”®å­—å‚æ•°orå­—å…¸</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># å¯ä»¥é€šè¿‡å…³é”®å­—orå­—å…¸æ–¹å¼çš„æ–¹å¼æ ¼å¼åŒ–ï¼Œæ‰“ç ´äº†ä½ç½®å¸¦æ¥çš„é™åˆ¶ä¸å›°æ‰°</span><br><span class="line">print(&#x27;æˆ‘çš„åå­—æ˜¯ &#123;name&#125;, æˆ‘çš„å¹´é¾„æ˜¯ &#123;age&#125;.&#x27;.format(age=18, name=&#x27;egon&#x27;))</span><br><span class="line"></span><br><span class="line">kwargs = &#123;&#x27;name&#x27;: &#x27;egon&#x27;, &#x27;age&#x27;: 18&#125;</span><br><span class="line">print(&#x27;æˆ‘çš„åå­—æ˜¯ &#123;name&#125;, æˆ‘çš„å¹´é¾„æ˜¯ &#123;age&#125;.&#x27;.format(**kwargs)) # ä½¿ç”¨**è¿›è¡Œè§£åŒ…æ“ä½œ</span><br></pre></td></tr></table></figure>

<p><em>2.4 å¡«å……ä¸æ ¼å¼åŒ–</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># å…ˆå–åˆ°å€¼,ç„¶ååœ¨å†’å·åè®¾å®šå¡«å……æ ¼å¼ï¼š[å¡«å……å­—ç¬¦][å¯¹é½æ–¹å¼][å®½åº¦]</span><br><span class="line"></span><br><span class="line"># *&lt;10ï¼šå·¦å¯¹é½ï¼Œæ€»å…±10ä¸ªå­—ç¬¦ï¼Œä¸å¤Ÿçš„ç”¨*å·å¡«å……</span><br><span class="line">print(&#x27;&#123;0:*&lt;10&#125;&#x27;.format(&#x27;å¼€å§‹æ‰§è¡Œ&#x27;)) # å¼€å§‹æ‰§è¡Œ******</span><br><span class="line"></span><br><span class="line"># *&gt;10ï¼šå³å¯¹é½ï¼Œæ€»å…±10ä¸ªå­—ç¬¦ï¼Œä¸å¤Ÿçš„ç”¨*å·å¡«å……</span><br><span class="line">print(&#x27;&#123;0:*&gt;10&#125;&#x27;.format(&#x27;å¼€å§‹æ‰§è¡Œ&#x27;)) # ******å¼€å§‹æ‰§è¡Œ</span><br><span class="line"></span><br><span class="line"># *^10ï¼šå±…ä¸­æ˜¾ç¤ºï¼Œæ€»å…±10ä¸ªå­—ç¬¦ï¼Œä¸å¤Ÿçš„ç”¨*å·å¡«å……</span><br><span class="line">print(&#x27;&#123;0:*^10&#125;&#x27;.format(&#x27;å¼€å§‹æ‰§è¡Œ&#x27;)) # ***å¼€å§‹æ‰§è¡Œ***</span><br></pre></td></tr></table></figure>

<p><em>2.5 ç²¾åº¦ä¸è¿›åˆ¶</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">print(&#x27;&#123;salary:.3f&#125;&#x27;.format(salary=1232132.12351))  #ç²¾ç¡®åˆ°å°æ•°ç‚¹å3ä½ï¼Œå››èˆäº”å…¥ï¼Œç»“æœä¸ºï¼š1232132.124</span><br><span class="line">print(&#x27;&#123;0:b&#125;&#x27;.format(123))  # è½¬æˆäºŒè¿›åˆ¶ï¼Œç»“æœä¸ºï¼š1111011</span><br><span class="line">print(&#x27;&#123;0:o&#125;&#x27;.format(9))  # è½¬æˆå…«è¿›åˆ¶ï¼Œç»“æœä¸ºï¼š11</span><br><span class="line">print(&#x27;&#123;0:x&#125;&#x27;.format(15))  # è½¬æˆåå…­è¿›åˆ¶ï¼Œç»“æœä¸ºï¼šf</span><br><span class="line">print(&#x27;&#123;0:,&#125;&#x27;.format(99812939393931))  # åƒåˆ†ä½æ ¼å¼åŒ–ï¼Œç»“æœä¸ºï¼š99,812,939,393,931</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ï¼šf-Strings"><a href="#ä¸‰ï¼šf-Strings" class="headerlink" title="ä¸‰ï¼šf-Strings"></a><strong>ä¸‰ï¼šf-Strings</strong></h2><p>str.format() æ¯” %æ ¼å¼åŒ–é«˜çº§äº†ä¸€äº›ï¼Œä½†æ˜¯å®ƒè¿˜æ˜¯æœ‰è‡ªå·±çš„ç¼ºé™·ã€‚å½“éœ€è¦ä¼ å…¥çš„å­—ç¬¦ä¸²è¿‡å¤šæ—¶ï¼Œä»ç„¶ä¼šæ˜¾å¾—éå¸¸å†—é•¿ã€‚ä¸åœ¨Python 3.6ä¸­å¼•å…¥ äº†f-stringsï¼Œä¸ä»…æ¯”str.formatæ›´ç®€æ´ï¼Œæ€§èƒ½ä¸Šä¹Ÿæ›´èƒœä¸€ç­¹</p>
<p> f<code>-</code>stringæ˜¯ä»¥fæˆ–Få¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œ æ ¸å¿ƒåœ¨äºå­—ç¬¦ä¸²ä¸­ç¬¦å·{}çš„ä½¿ç”¨</p>
<p><em>3.1 {}ä¸­å¯ä»¥æ˜¯å˜é‡å</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">name = &#x27;egon&#x27;</span><br><span class="line">age = 18</span><br><span class="line">print(f&#x27;&#123;name&#125; &#123;age&#125;&#x27;)  # egon 18</span><br><span class="line">print(F&#x27;&#123;age&#125; &#123;name&#125;&#x27;)  # 18 egon</span><br></pre></td></tr></table></figure>

<p><em>3.2 {}ä¸­å¯ä»¥æ˜¯è¡¨è¾¾å¼</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># å¯ä»¥åœ¨&#123;&#125;ä¸­æ”¾ç½®ä»»æ„åˆæ³•çš„Pythonè¡¨è¾¾å¼ï¼Œä¼šåœ¨è¿è¡Œæ—¶è®¡ç®—</span><br><span class="line"># æ¯”å¦‚ï¼šæ•°å­¦è¡¨è¾¾å¼</span><br><span class="line">print(f&#x27;&#123;3*3/2&#125;&#x27;) # 4.5</span><br><span class="line"></span><br><span class="line"># æ¯”å¦‚ï¼šå‡½æ•°çš„è°ƒç”¨</span><br><span class="line">def foo(n):</span><br><span class="line">    print(&#x27;foo say hello&#x27;)</span><br><span class="line">    return n</span><br><span class="line"></span><br><span class="line">print(f&#x27;&#123;foo(10)&#125;&#x27;) # ä¼šè°ƒç”¨foo(10),ç„¶åæ‰“å°å…¶è¿”å›å€¼</span><br><span class="line"></span><br><span class="line"># æ¯”å¦‚ï¼šè°ƒç”¨å¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">name=&#x27;EGON&#x27;</span><br><span class="line">print(f&#x27;&#123;name.lower()&#125;&#x27;) # egon</span><br></pre></td></tr></table></figure>

<p><em>3.3 åœ¨ç±»ä¸­çš„ä½¿ç”¨</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; class Person(object):</span><br><span class="line">...     def __init__(self, name, age):</span><br><span class="line">...         self.name = name</span><br><span class="line">...         self.age = age</span><br><span class="line">...     def __str__(self):</span><br><span class="line">...         return f&#x27;&#123;self.name&#125;:&#123;self.age&#125;&#x27;</span><br><span class="line">...     def __repr__(self):</span><br><span class="line">...         return f&#x27;===&gt;&#123;self.name&#125;:&#123;self.age&#125;&lt;===&#x27;</span><br><span class="line">... </span><br><span class="line">&gt;&gt;&gt; </span><br><span class="line">&gt;&gt;&gt; obj=Person(&#x27;egon&#x27;,18)</span><br><span class="line">&gt;&gt;&gt; print(obj) # è§¦å‘__str__</span><br><span class="line">egon:18</span><br><span class="line">&gt;&gt;&gt; obj        # è§¦å‘__repr__</span><br><span class="line">===&gt;egon:18&lt;===</span><br><span class="line">&gt;&gt;&gt; </span><br><span class="line">&gt;&gt;&gt; </span><br><span class="line">&gt;&gt;&gt; </span><br><span class="line">&gt;&gt;&gt; # åœ¨f-Stringsä¸­çš„ä½¿ç”¨</span><br><span class="line">&gt;&gt;&gt; f&#x27;&#123;obj&#125;&#x27;   # è§¦å‘__str__</span><br><span class="line">&#x27;egon:18&#x27;</span><br><span class="line">&gt;&gt;&gt; f&#x27;&#123;obj!r&#125;&#x27; # è§¦å‘__repr__</span><br><span class="line">&#x27;===&gt;egon:18&lt;===&#x27;  </span><br></pre></td></tr></table></figure>

<p><em>3.3 å¤šè¡Œf-Stings</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># å½“æ ¼å¼åŒ–å­—ç¬¦ä¸²è¿‡é•¿æ—¶ï¼Œå¦‚ä¸‹åˆ—è¡¨info</span><br><span class="line">name = &#x27;Egon&#x27;</span><br><span class="line">age = 18</span><br><span class="line">gender = &#x27;male&#x27;</span><br><span class="line">hobbie1=&#x27;play&#x27;</span><br><span class="line">hobbie2=&#x27;music&#x27;</span><br><span class="line">hobbie3=&#x27;read&#x27;</span><br><span class="line">info = [f&#x27;åå­—ï¼š&#123;name&#125;å¹´é¾„ï¼š&#123;age&#125;æ€§åˆ«ï¼š&#123;gender&#125;&#x27;,f&#x27;ç¬¬ä¸€ä¸ªçˆ±å¥½ï¼š&#123;hobbie1&#125;ç¬¬äºŒä¸ªçˆ±å¥½ï¼š&#123;hobbie2&#125;ç¬¬ä¸‰ä¸ªçˆ±å¥½ï¼š&#123;hobbie3&#125;&#x27;] </span><br><span class="line"></span><br><span class="line"># æˆ‘ä»¬å¯ä»¥å›è½¦åˆ†éš”åˆ°å¤šè¡Œï¼Œæ³¨æ„æ¯è¡Œå‰éƒ½æœ‰ä¸€ä¸ªf</span><br><span class="line">info = [</span><br><span class="line">    # ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="line">    f&#x27;åå­—ï¼š&#123;name&#125;&#x27;</span><br><span class="line">    f&#x27;å¹´é¾„ï¼š&#123;age&#125;&#x27;</span><br><span class="line">    f&#x27;æ€§åˆ«ï¼š&#123;gender&#125;&#x27;,</span><br><span class="line"></span><br><span class="line">    # ç¬¬äºŒä¸ªå…ƒç´ </span><br><span class="line">    f&#x27;ç¬¬ä¸€ä¸ªçˆ±å¥½ï¼š&#123;hobbie1&#125;&#x27;</span><br><span class="line">    f&#x27;ç¬¬äºŒä¸ªçˆ±å¥½ï¼š&#123;hobbie2&#125;&#x27;</span><br><span class="line">    f&#x27;ç¬¬ä¸‰ä¸ªçˆ±å¥½ï¼š&#123;hobbie3&#125;&#x27;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">print(info)</span><br><span class="line"># [&#x27;åå­—ï¼šEgonå¹´é¾„ï¼š18æ€§åˆ«ï¼šmale&#x27;, &#x27;ç¬¬ä¸€ä¸ªçˆ±å¥½ï¼šplayç¬¬äºŒä¸ªçˆ±å¥½ï¼šmusicç¬¬ä¸‰ä¸ªçˆ±å¥½ï¼šread&#x27;]</span><br></pre></td></tr></table></figure>

<p><em>3.4 å¼•å·çš„åµŒå¥—</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># å½“å­—ç¬¦ä¸²åµŒå¥—å‘é€å†²çªæ—¶ï¼Œä¸æ­£å¸¸çš„å­—ç¬¦ä¸²å¤„ç†æ–¹å¼æ˜¯ä¸€æ ·çš„</span><br><span class="line"># 1ã€å¤–å±‚ä¸ºå•å¼•å·ï¼Œå†…å±‚åµŒå¥—ä¹Ÿä¸ºå•å¼•å·ï¼Œå¹¶ä¸”æƒ³è¦è¾“å…¥çš„å†…å®¹ä¹Ÿä¸ºå•å¼•å·ï¼Œé‚£ä¹ˆå¤–å±‚éœ€è¦æ”¹ç”¨åŒå¼•å·</span><br><span class="line">print(&quot;my name is &#x27;egon&#x27;&quot;)</span><br><span class="line"></span><br><span class="line"># 2ã€å¤–å±‚ä¸ºå•å¼•å·ï¼Œå†…å±‚åµŒå¥—ä¹Ÿä¸ºå•å¼•å·ï¼Œå¹¶ä¸”æƒ³è¦è¾“å…¥çš„å†…å®¹ä¹Ÿä¸ºå•å¼•å·ï¼Œéœ€è¦ç”¨åˆ°è½¬ä¹‰</span><br><span class="line">print(&#x27;my name is \&#x27;egon\&#x27;&#x27;)</span><br></pre></td></tr></table></figure>

<p><em>3.5æ³¨æ„</em></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#1ã€åæ–œæ å¯ä»¥ç”¨æ¥è¿›è¡Œå­—ç¬¦è½¬ä¹‰ï¼Œä½†ä¸èƒ½ç”¨åœ¨&#123;&#125;çš„è¡¨è¾¾å¼ä¸­</span><br><span class="line">f&#x27;&#123;1\2&#125;&#x27; # è¯­æ³•é”™è¯¯</span><br><span class="line"></span><br><span class="line">#2ã€æ³¨é‡Š#å·ä¹Ÿä¸èƒ½å‡ºç°åœ¨&#123;&#125;çš„è¡¨è¾¾å¼ä¸­</span><br><span class="line">f&#x27;&#123;x#&#125;&#x27; # è¯­æ³•é”™è¯¯</span><br></pre></td></tr></table></figure>

<p><em>3.6 æ‹¬å·çš„å¤„ç†</em></p>
<p>åŸºäº3.5æˆ‘ä»¬å¾—çŸ¥ï¼Œä¸èƒ½åœ¨{}å†…å‡ºç°åæ–œæ \ï¼Œæ‰€ä»¥ï¼Œå½“æˆ‘ä»¬çš„è¾“å‡ºçš„ç»“æœä¸­éœ€è¦åŒ…å«{}æ—¶ï¼Œä¸‹é¢çš„åšæ³•å°±æ˜¯é”™è¯¯çš„</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">print(f&#x27;\&#123;å¤©ç‹ç›–åœ°è™\&#125;&#x27;)</span><br></pre></td></tr></table></figure>

<p>ç±»ä¼¼äºè¾“å‡º%å·çš„åšæ³•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; print(&#x27;%s%%&#x27; %30)</span><br><span class="line">30%</span><br></pre></td></tr></table></figure>

<p>è‹¥æƒ³è¾“å‡º{},é‚£ä¹ˆéœ€è¦åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šå†å¥—ä¸€å±‚ï¼Œå¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">print(f&#x27;&#123;&#123;å¤©ç‹ç›–åœ°è™&#125;&#125;&#x27;) # &#123;å¤©ç‹ç›–åœ°è™&#125;</span><br><span class="line"></span><br><span class="line">print(f&#x27;&#123;&#123;&#123;&#123;å¤©ç‹ç›–åœ°è™&#125;&#125;&#125;&#125;&#x27;) # &#123;&#123;å¤©ç‹ç›–åœ°è™&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>æ€§èƒ½å¯¹æ¯”&#x3D;&gt;f_Stingsæ€§èƒ½æœ€é«˜</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from timeit import timeit</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def test_s():</span><br><span class="line">    name = &#x27;Egon&#x27;</span><br><span class="line">    age = 18</span><br><span class="line">    return &#x27;%s:%s.&#x27; % (name, age)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def test_format():</span><br><span class="line">    name = &#x27;Egon&#x27;</span><br><span class="line">    age = 18</span><br><span class="line">    return &#x27;&#123;&#125;:&#123;&#125;.&#x27;.format(name, age)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def test_f_strings():</span><br><span class="line">    name = &#x27;Egon&#x27;</span><br><span class="line">    age = 18</span><br><span class="line">    return f&#x27;&#123;name&#125;:&#123;age&#125;.&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">res1 = timeit(test_s, number=1000000)</span><br><span class="line">res2 = timeit(test_format, number=1000000)</span><br><span class="line">res3 = timeit(test_f_strings, number=1000000)</span><br><span class="line">print(res1) # 0.3709844550030539</span><br><span class="line">print(res2) # 0.47834375899401493</span><br><span class="line">print(res3) # 0.3111891380031011, æœ€å¿«</span><br></pre></td></tr></table></figure>

<p>##å››ï¼šæ ‡å‡†åº“æ¨¡æ¿</p>
<p> ä»Python 2.4èµ·ï¼ŒPythonæ ‡å‡†åº“stringå¼•å…¥äº†Templateä¹Ÿå¯ä»¥ç”¨æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥è¯´ï¼Œä¸å‰ä¸‰ç§æ–¹å¼çš„ä¸€ä¸ªæ˜¾è‘—åŒºåˆ«å°±æ˜¯ï¼šTemplateå¹¶å±äºpythonè¯­è¨€çš„æ ¸å¿ƒè¯­æ³•ç‰¹å¾ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from string import Template</span><br><span class="line"></span><br><span class="line">name=&#x27;EGON&#x27;</span><br><span class="line">t = Template(&#x27;Hello $name!&#x27;)</span><br><span class="line">res=t.substitute(name=name)</span><br><span class="line"></span><br><span class="line">print(res)  # Hello EGON!</span><br></pre></td></tr></table></figure>

<p>å¦å¤–ä¸€ä¸ªä¸åŒçš„åœ°æ–¹æ˜¯è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ä¸æ”¯æŒç±»ä¼¼str.formaté‚£æ ·çš„è¿›åˆ¶è½¬æ¢ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å¤„ç†</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from string import Template</span><br><span class="line"></span><br><span class="line">name=&#x27;EGON&#x27;</span><br><span class="line">templ_string = &#x27;Hello $name, there is a $error error!!!&#x27;</span><br><span class="line">res=Template(templ_string).substitute(name=name, error=hex(12345))</span><br><span class="line"></span><br><span class="line">print(res) # Hello EGON, there is a 0x3039 error!!!</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²Templateçš„æœ€ä½³çš„æ—¶æœºå°±æ˜¯å½“ä½ çš„ç¨‹åºéœ€è¦å¤„ç†ç”±ç”¨æˆ·æä¾›çš„è¾“å…¥å†…å®¹æ—¶ã€‚æ¨¡æ¿å­—ç¬¦ä¸²æ˜¯æœ€ä¿é™©çš„é€‰æ‹©ï¼Œå› ä¸ºå¯ä»¥é™ä½å¤æ‚æ€§ã€‚</p>
<p>å…¶ä»–ä¸€äº›å¤æ‚çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–æŠ€å·§çš„å¯èƒ½ä¼šç»™ä½ çš„ç¨‹åºå¸¦æ¥å®‰å…¨æ¼æ´</p>
<h2 id="äº”ï¼šæ€»ç»“å››ç§æ–¹å¼çš„åº”ç”¨åœºæ™¯"><a href="#äº”ï¼šæ€»ç»“å››ç§æ–¹å¼çš„åº”ç”¨åœºæ™¯" class="headerlink" title="äº”ï¼šæ€»ç»“å››ç§æ–¹å¼çš„åº”ç”¨åœºæ™¯"></a><strong>äº”ï¼šæ€»ç»“å››ç§æ–¹å¼çš„åº”ç”¨åœºæ™¯</strong></h2><p>1ã€å¦‚æœæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²æ˜¯ç”±ç”¨æˆ·è¾“å…¥çš„ï¼Œé‚£ä¹ˆåŸºäºå®‰å…¨æ€§è€ƒè™‘ï¼Œæ¨èä½¿ç”¨Template</p>
<p>2ã€å¦‚æœä½¿ç”¨çš„python3.6+ç‰ˆæœ¬çš„è§£é‡Šå™¨ï¼Œæ¨èä½¿ç”¨f-Stings</p>
<p>3ã€å¦‚æœè¦å…¼å®¹python2.xç‰ˆæœ¬çš„pythonè§£é‡Šå™¨ï¼Œæ¨èä½¿ç”¨str.format</p>
<p>4ã€å¦‚æœä¸æ˜¯æµ‹è¯•çš„ä»£ç ï¼Œä¸æ¨èä½¿ç”¨%</p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>47-é™„å½•äºŒï¼šGILæ–°è§£</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/47_%E9%99%84%E5%BD%95%E4%BA%8C%EF%BC%9AGIL%E6%96%B0%E8%A7%A3/</url>
    <content><![CDATA[<h2 id="ä¸€ï¼šcpuå’ŒGILå¿…é¡»éƒ½å…·å¤‡æ‰å¯ä»¥æ‰§è¡Œä»£ç ï¼›"><a href="#ä¸€ï¼šcpuå’ŒGILå¿…é¡»éƒ½å…·å¤‡æ‰å¯ä»¥æ‰§è¡Œä»£ç ï¼›" class="headerlink" title="ä¸€ï¼šcpuå’ŒGILå¿…é¡»éƒ½å…·å¤‡æ‰å¯ä»¥æ‰§è¡Œä»£ç ï¼›"></a><strong>ä¸€ï¼šcpuå’ŒGILå¿…é¡»éƒ½å…·å¤‡æ‰å¯ä»¥æ‰§è¡Œä»£ç ï¼›</strong></h2><p> æ‹¿åˆ°cpuæƒé™-ã€‹æ‹¿åˆ°GILè§£é‡Šå™¨é”-ã€‹æ‰§è¡Œä»£ç </p>
<p> åœ¨python3.2ä¹‹åGILæœ‰äº†æ–°çš„å®ç°ï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³that GIL thrashingé—®é¢˜ï¼Œè¿™æ˜¯Antoine Pitrouçš„åŠŸåŠ³</p>
<h2 id="äºŒï¼šGILè§£é‡Šå™¨é”ä¼šåœ¨ä¸¤ç§æƒ…å†µä¸‹é‡Šæ”¾"><a href="#äºŒï¼šGILè§£é‡Šå™¨é”ä¼šåœ¨ä¸¤ç§æƒ…å†µä¸‹é‡Šæ”¾" class="headerlink" title="äºŒï¼šGILè§£é‡Šå™¨é”ä¼šåœ¨ä¸¤ç§æƒ…å†µä¸‹é‡Šæ”¾"></a><strong>äºŒï¼šGILè§£é‡Šå™¨é”ä¼šåœ¨ä¸¤ç§æƒ…å†µä¸‹é‡Šæ”¾</strong></h2><h3 id="2-1ã€ä¸»åŠ¨é‡Šæ”¾ï¼šè‡ªå·±ä¸»åŠ¨äº¤å‡ºæ¥"><a href="#2-1ã€ä¸»åŠ¨é‡Šæ”¾ï¼šè‡ªå·±ä¸»åŠ¨äº¤å‡ºæ¥" class="headerlink" title="2.1ã€ä¸»åŠ¨é‡Šæ”¾ï¼šè‡ªå·±ä¸»åŠ¨äº¤å‡ºæ¥"></a><strong>2.1ã€ä¸»åŠ¨é‡Šæ”¾ï¼šè‡ªå·±ä¸»åŠ¨äº¤å‡ºæ¥</strong></h3><p>é‡åˆ°IOæ“ä½œæˆ–è€…åˆ†é…çš„cpuæ—¶é—´ç‰‡åˆ°æ—¶é—´äº†</p>
<p>æ³¨æ„ï¼ŒGILå­˜åœ¨çš„æ„ä¹‰åœ¨äºç»´æŠ¤çº¿ç¨‹å®‰å…¨ï¼Œx&#x3D;10æ¶‰åŠåˆ°ioæ“ä½œï¼Œå¦‚æœä¹Ÿè¢«å½“æˆæ™®é€šçš„ioæ“ä½œï¼Œä¸»åŠ¨äº¤å‡ºGILï¼Œé‚£ä¹ˆä¸€å®šä¼šå‡ºç°æ•°æ®ä¸å®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥x&#x3D;10ä¸€å®šæ˜¯è¢«åŒºåˆ†å¯¹å¾…äº†</p>
<p>è‡³äºx&#x3D;10å¦‚ä½•å®ç°çš„è¢«åŒºåˆ†å¯¹å¾…ï¼Œè¿™å…¶å®å¾ˆå¥½ç†è§£ï¼Œä»»ä½•çš„ioæ“ä½œéƒ½æ˜¯å‘æ“ä½œç³»ç»Ÿå‘é€ç³»ç»Ÿè°ƒç”¨ï¼Œå³è°ƒç”¨æ“ä½œç³»ç»Ÿçš„æŸä¸€æ¥å£å®ç°çš„ï¼Œæ¯”å¦‚å˜é‡èµ‹å€¼æ“ä½œè‚¯å®šæ˜¯è°ƒç”¨äº†ä¸€ç§æ¥å£ï¼Œæ–‡ä»¶è¯»å†™æ“ä½œè‚¯å®šä¹Ÿæ˜¯è°ƒç”¨äº†ä¸€ç§æ¥å£ï¼Œç½‘ç»œioä¹Ÿæ˜¯è°ƒç”¨äº†æŸä¸€ç§æ¥å£ï¼Œè¿™å°±ç»™åŒºåˆ†å¯¹å¾…æä¾›äº†å®ç°çš„ä¾æ®ï¼Œå³å˜é‡èµ‹å€¼æ“ä½œå¹¶ä¸å±äºä¸»åŠ¨é‡Šæ”¾çš„èŒƒç•´ï¼Œè¿™æ ·GILåœ¨çº¿ç¨‹å®‰å…¨æ–¹é¢æ‰ä¼šæœ‰æ‰€ä½œä¸º</p>
<h3 id="2-2ã€è¢«åŠ¨é‡Šæ”¾"><a href="#2-2ã€è¢«åŠ¨é‡Šæ”¾" class="headerlink" title="2.2ã€è¢«åŠ¨é‡Šæ”¾"></a><strong>2.2ã€è¢«åŠ¨é‡Šæ”¾</strong></h3><p>python3.2ä¹‹åå®šä¹‰äº†ä¸€ä¸ªå…¨å±€å˜é‡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/* Python/ceval.c */</span><br><span class="line">...</span><br><span class="line">static volatile int gil_drop_request = 0;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„å½“åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šä¸€ç›´è¿è¡Œï¼Œä¸ä¼šé‡Šæ”¾GILï¼Œå½“æœ‰å¤šä¸ªçº¿ç¨‹æ—¶</p>
<p>ä¾‹å¦‚thead1ï¼Œthread2</p>
<p>å¦‚æœthread1ä¸€ç›´æ²¡æœ‰ä¸»åŠ¨é‡Šæ”¾æ‰GILï¼Œé‚£è‚¯å®šä¸ä¼šè®©ä»–ä¸€ç›´è¿è¡Œä¸‹å»å•Š</p>
<p>å®é™…ä¸Šåœ¨thread1è¿è¡Œçš„è¿‡ç¨‹æ—¶ï¼Œthread2å°±ä¼šæ‰§è¡Œä¸€ä¸ªcv_wait(gil,TIMEOUT)çš„å‡½æ•°</p>
<p>ï¼ˆé»˜è®¤TIMEOUTå€¼ä¸º5millisecondsï¼Œä½†æ˜¯å¯ä»¥ä¿®æ”¹ï¼‰ï¼Œä¸€æ—¦åˆ°äº†æ—¶é—´ï¼Œå°±ä¼šå°†å…¨å±€å˜é‡</p>
<p>gil_drop_request &#x3D; 1;ï¼Œçº¿ç¨‹thread1å°±ä¼šè¢«å¼ºåˆ¶é‡Šæ”¾GILï¼Œç„¶åçº¿ç¨‹thread2å¼€å§‹è¿è¡Œå¹¶</p>
<p>è¿”å›ä¸€ä¸ªackç»™çº¿ç¨‹thread1ï¼Œçº¿ç¨‹thread1å¼€å§‹è°ƒç”¨cv_wait(gil,TIMEOUT)</p>
<h2 id="ä¸‰ï¼šè¯¦è§å›¾è§£"><a href="#ä¸‰ï¼šè¯¦è§å›¾è§£" class="headerlink" title="ä¸‰ï¼šè¯¦è§å›¾è§£"></a><strong>ä¸‰ï¼šè¯¦è§å›¾è§£</strong></h2><p>è§Part4</p>
<p><strong><a href="https://link.zhihu.com/?target=http://www.dabeaz.com/python/UnderstandingGIL.pdf">http://www.dabeaz.com/python/Under</a></strong></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>51-é™„å½•å…­ï¼šè½»æ¾æå®šä½è¿ç®—</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/51_%E9%99%84%E5%BD%95%E5%85%AD%EF%BC%9A%E8%BD%BB%E6%9D%BE%E6%90%9E%E5%AE%9A%E4%BD%8D%E8%BF%90%E7%AE%97/</url>
    <content><![CDATA[<h2 id="ä¸€-å‰è¨€"><a href="#ä¸€-å‰è¨€" class="headerlink" title="ä¸€ å‰è¨€"></a><strong>ä¸€ å‰è¨€</strong></h2><p> ä½è¿ç®—ï¼Œä¸€ä¸ªæå®¹æ˜“è¢«ä½ç«¯ç å†œå¿½è§†çš„åœ°å¸¦ï¼Œå› ä¸ºå®ƒç•¥å¾®éœ€è¦ç”¨ä¸€ä¸¢ä¸¢æ™ºå•†ï¼ŒçœŸçš„åªæœ‰é‚£ä¹ˆä¸€ä¸¢ä¸¢ï¼Œä½†é«˜æ‰‹ä¸lowæ‰‹çš„å·®è·å¾€å¾€å°±æ˜¯é•¿è¿™ä¹ˆä¸€ä¸¢ä¸¢ï¼Œèƒ½è¾¾åˆ°çš„æ·±åº¦å°±æˆªç„¶ä¸åŒäº†ï¼Œä»Šå¤©egonå°±æ¥ç»™å¤§å®¶èŠä¸€èŠä½è¿ç®—é‚£äº›é£éªšä¸”é«˜çº§çš„æ“ä½œï¼Œä½†è¦ç†è§£ä½è¿ç®—ï¼Œå¾—ä»æœºå™¨æ•°ä¸çœŸå€¼è¯´èµ·ï¼Œè¯·çœ‹å¤§å±å¹•</p>
<h2 id="äºŒ-çœŸå€¼ã€æœºå™¨æ•°-åŸç ã€åç ã€è¡¥ç "><a href="#äºŒ-çœŸå€¼ã€æœºå™¨æ•°-åŸç ã€åç ã€è¡¥ç " class="headerlink" title="äºŒ çœŸå€¼ã€æœºå™¨æ•°(åŸç ã€åç ã€è¡¥ç )"></a><strong>äºŒ çœŸå€¼ã€æœºå™¨æ•°(åŸç ã€åç ã€è¡¥ç )</strong></h2><p> â€œçœŸå€¼â€æŒ‡çš„å°±æ˜¯æ•°æœ¬èº«ï¼Œä¾‹å¦‚-10ï¼ŒçœŸå€¼å°±æ˜¯-10</p>
<p> ä¸€ä¸ªæ•°åœ¨è®¡ç®—æœºä¸­çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ï¼Œå«åšè¿™ä¸ªæ•°çš„æœºå™¨æ•°</p>
<p> åœ¨è®¡ç®—æœºä¸­ï¼Œç”¨æ¥è¡¨ç¤ºæœ‰ç¬¦å·æ•°çš„æœºå™¨æ•°æœ‰ä¸‰ç§ï¼Œå³åŸç ã€åç ã€è¡¥ç </p>
<p> ä¸‰ç§è¡¨ç¤ºæ–¹æ³•å‡æœ‰â€œç¬¦å·ä½â€å’Œâ€œæ•°å€¼ä½â€ä¸¤éƒ¨åˆ†</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1ã€ç¬¦å·ä½éƒ½æ˜¯å æ®æœ€é«˜ä½ï¼Œç”¨0è¡¨ç¤ºâ€œæ­£æ•°â€ï¼Œç”¨1è¡¨ç¤ºâ€œè´Ÿæ•°â€</span><br><span class="line">2ã€æ•°å€¼ä½ï¼Œä¸‰ç§è¡¨ç¤ºæ–¹æ³•å„ä¸ç›¸åŒ</span><br></pre></td></tr></table></figure>

<p> æ•´å‹æ•°å­—æœ‰8ä½ã€16ä½ã€32ä½ã€64ä½å‡ ç§ï¼Œç¯‡å¹…é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆå•ä»¥8ä½æ•´å‹ä¸ºä¾‹æ¥ä»‹ç»</p>
<p> åœ¨ä»‹ç»ä¹‹å‰ï¼Œegonå…ˆæ¥å…ˆæ‰«ä¸€ä¸‹ç›²ï¼Œä¼°è®¡ä¼šæ‰«æ­»99%çš„äºº</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">é—®ï¼š8ä½äºŒè¿›åˆ¶æ•°å¯ä»¥è¡¨ç¤ºçš„æ•°å€¼èŒƒå›´æ˜¯å¤šå°‘ï¼Œ99%çš„äººå¼ å£å°±æ¥ï¼š-128~127</span><br><span class="line"></span><br><span class="line">okï¼Œ8ä½äºŒè¿›åˆ¶æ•°ï¼Œæœ€é«˜ä½éœ€è¦ç”¨æ¥è¡¨ç¤ºç¬¦å·ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„7ä½ç”¨æ¥è¡¨ç¤ºæ•°å€¼</span><br><span class="line"></span><br><span class="line">äºæ˜¯ï¼Œæœ€å¤§æ•°ä¸º1111 1111=&gt;+127ï¼Œæœ€å°0111 1111=&gt;-127ï¼Œå§æ§½ï¼Œå¾—å‡ºçš„ç»“è®ºæ˜¯8ä½äºŒè¿›åˆ¶æ•°å¯ä»¥è¡¨ç¤ºçš„æ•°å€¼èŒƒå›´æ˜¯-127åˆ°+127ï¼Œå‚»é€¼äº†å§ä½ ï¼Œå“ˆå“ˆå“ˆ</span><br><span class="line"></span><br><span class="line">çµé­‚æ‹·é—®ï¼š-128åˆ°åº•æ€ä¹ˆæ¥çš„ï¼Ÿï¼Ÿï¼Ÿ</span><br><span class="line"></span><br><span class="line"> çœŸç›¸æ˜¯è¿™æ ·çš„ï¼š</span><br><span class="line">  8ä½äºŒè¿›åˆ¶æ•°ç”¨7ä½è¡¨ç¤ºæ•°å€¼ï¼Œé‚£ä¹ˆ7ä½2è¿›åˆ¶æ•°000 0000çš„å€¼ä¸º0</span><br><span class="line">  é‚£ä¹ˆ,å®ƒå‰é¢åŠ ä¸Šç¬¦å·ä½0,è¿˜è¡¨ç¤º0å§?</span><br><span class="line">  é‚£å¥½,å¦‚æœå®ƒå‰é¢åŠ ä¸Š1å‘¢,ä»ç„¶è¡¨ç¤º0?è¿™ä¸æ˜¯é‡å¤äº†ä¹ˆ?</span><br><span class="line">  ä¸€ä¸ª0,æ€ä¹ˆç”¨ä¸¤ä¸ªå€¼æ¥è¡¨ç¤ºå‘¢ï¼ï¼ï¼</span><br><span class="line">  æ‰€ä»¥1000 0000å°±è¡¨ç¤º-128å•¦ï¼Œ</span><br></pre></td></tr></table></figure>

<p> okï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±åœ¨8ä½äºŒè¿›åˆ¶æ•°ï¼Œå³-128~127çš„èŒƒå›´å†…å–å€¼æ¥ä»‹ç»å®ƒçš„åŸç ã€åç ã€è¡¥ç </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1ã€æ­£æ•°ï¼šåŸç ã€åç ã€è¡¥ç éƒ½ä¸€æ ·</span><br><span class="line">   çœŸå€¼ï¼š3</span><br><span class="line">   åŸç ï¼š0000 0011   æœ€é«˜ä½ä¸º0ï¼Œè¡¨ç¤ºæ­£æ•°</span><br><span class="line">   åç ï¼š0000 0011</span><br><span class="line">   è¡¥ç ï¼š0000 0011</span><br><span class="line"></span><br><span class="line">2ã€è´Ÿæ•°ï¼šåŸç ã€åç ã€è¡¥ç ä¸åŒ</span><br><span class="line">   çœŸå€¼ï¼š-3</span><br><span class="line">   åŸç ï¼š1000 0011   æœ€é«˜ä½ä¸º1ï¼Œè¡¨ç¤ºè´Ÿæ•°</span><br><span class="line">   åç ï¼š1111 1100   ç”±åŸç æ¼”å˜è€Œæ¥ï¼ŒåŸç çš„ç¬¦å·ä½ä¸å˜ï¼Œæ•°å€¼ä½å…¨éƒ¨å–å</span><br><span class="line">   è¡¥ç ï¼š1111 1101   åœ¨åç çš„åŸºç¡€ä¸Š+1</span><br></pre></td></tr></table></figure>

<p> ä¸ºäº†å¤§å®¶èƒ½å¤Ÿæ¸…æ™°åœ°çœ‹åˆ°â€çœŸå€¼â€œä¸â€è¡¥ç â€œä¹‹é—´çš„ç›¸äº’è½¬æ¢ï¼Œegonç”»äº†å¦‚ä¸‹ä¸¤å¹…å›¾</p>
<p><img src="https://pic4.zhimg.com/80/v2-d9ef172e92108c6f76749ae4cf4b49d7_720w.jpg" alt="img"></p>
<p> åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œæ•°å€¼ä¸€å¾‹ç”¨è¡¥ç æ¥å­˜å‚¨ ï¼ï¼ï¼  ä¸»è¦åŸå› ï¼šä½¿ç”¨è¡¥ç ï¼Œå¯ä»¥å°†ç¬¦å·ä½å’Œå…¶å®ƒä½ç»Ÿä¸€å¤„ç†ï¼›åŒæ—¶ï¼Œå‡æ³•ä¹Ÿå¯æŒ‰åŠ æ³•æ¥å¤„ç†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ä¸¤ä¸ªç”¨ è¡¥ç è¡¨ç¤ºçš„æ•°ç›¸åŠ æ—¶ï¼Œå¦‚æœæœ€é«˜ä½ï¼ˆç¬¦å·ä½ï¼‰æœ‰è¿›ä½ï¼Œåˆ™è¿›ä½è¢«èˆå¼ƒï¼Œå¤„ç†å®Œåæˆ‘ä»¬å¦‚ä¸Šå›¾æ‰€ç¤ºç”¨è¡¥ç åæ¨å‡ºçœŸå€¼å³å¯ï¼Œä¾‹å¦‚è®¡ç®—æœºåœ¨è®¡ç®—8-3çš„æ—¶å€™ï¼Œä¼šè¿™ä¹ˆåš8+ï¼ˆ-3ï¼‰ï¼Œå…·ä½“å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€æ­¥ï¼šçœŸå€¼-&gt;åŸç -&gt;åç -&gt;è¡¥ç </span><br><span class="line">    çœŸå€¼ï¼š8</span><br><span class="line">    åŸç ï¼š0000 1000  </span><br><span class="line">    åç ï¼š0000 1000</span><br><span class="line">    è¡¥ç ï¼š0000 1000</span><br><span class="line"></span><br><span class="line">    çœŸå€¼ï¼š-3</span><br><span class="line">    åŸç ï¼š1000 0011  </span><br><span class="line">    åç ï¼š1111 1100</span><br><span class="line">    è¡¥ç ï¼š1111 1101</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒæ­¥ï¼šè¡¥ç ä¹‹é—´çš„è¿ç®—ï¼Œæ­¤å¤„ä¸ºç›¸åŠ </span><br><span class="line">    8çš„è¡¥ç ï¼š0000 1000</span><br><span class="line">   -3çš„è¡¥ç ï¼š1111 1101</span><br><span class="line">  ç›¸åŠ å¾—è¡¥ç ï¼š0000 0101 # è¡¥ç ç›¸åŠ ï¼Œé«˜ä½æœ‰è¿›ä½ä¼šè¢«èˆå¼ƒ</span><br><span class="line">    </span><br><span class="line">ç¬¬ä¸‰æ­¥ï¼šè¡¥ç -&gt;åç -&gt;åŸç -&gt;çœŸå€¼</span><br><span class="line">    ä¸Šä¸€æ­¥å¾—åˆ°çš„è¡¥ç ç»“æœï¼š0000 0101</span><br><span class="line">    ç¬¦å·ä½æ˜¯0ï¼Œä¸ºæ­£æ•°ï¼Œé‚£ä¹ˆå°±ç®€å•äº†ï¼Œæ­£æ•°çš„åŸã€åã€è¡¥ç éƒ½ä¸€æ ·ï¼Œæ‰€ä»¥ä¸€æ­¥åˆ°ä½</span><br><span class="line">    è¡¥ç -&gt;åç -&gt;åŸç ï¼š0000 0101</span><br><span class="line">    </span><br><span class="line">    åŸç -&gt;çœŸå€¼ï¼š5</span><br></pre></td></tr></table></figure>

<p>ç»ƒä¹ ï¼š8+ï¼ˆ-9ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€æ­¥ï¼šçœŸå€¼-&gt;åŸç -&gt;è¡¥ç </span><br><span class="line">    çœŸå€¼ï¼š8</span><br><span class="line">    åŸç ï¼š0000 1000  </span><br><span class="line">    åç ï¼š0000 1000</span><br><span class="line">    è¡¥ç ï¼š0000 1000</span><br><span class="line"></span><br><span class="line">    çœŸå€¼ï¼š-9</span><br><span class="line">    åŸç ï¼š1000 1001  </span><br><span class="line">    åç ï¼š1111 0110</span><br><span class="line">    è¡¥ç ï¼š1111 0111</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒæ­¥ï¼šè¡¥ç ä¹‹é—´çš„è¿ç®—ï¼Œæ­¤å¤„ä¸ºç›¸åŠ </span><br><span class="line">    8çš„è¡¥ç ï¼š0000 1000</span><br><span class="line">   -9çš„è¡¥ç ï¼š1111 0111</span><br><span class="line">  ç›¸åŠ å¾—è¡¥ç ï¼š1111 1111 </span><br><span class="line">    </span><br><span class="line">ç¬¬ä¸‰æ­¥ï¼šè¡¥ç -&gt;åç -&gt;åŸç -&gt;çœŸå€¼</span><br><span class="line"> è¡¥ç -&gt;åç </span><br><span class="line">        è¡¥ç ç»“æœï¼š1111 1111</span><br><span class="line">        ç¬¦å·ä½æ˜¯1ï¼Œä¸ºè´Ÿæ•°ï¼Œå‚ç…§ä¸Šå›¾2çš„æ­¥éª¤</span><br><span class="line"></span><br><span class="line">        è¡¥ç -&gt;åç ï¼š-1ï¼Œå¾—åˆ°åç ï¼š1111 1110</span><br><span class="line">    </span><br><span class="line">    åç -&gt;åŸç ï¼šç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™ä½å–åï¼Œå¾—åˆ°åŸç ï¼š1000 0001</span><br><span class="line">    </span><br><span class="line">    åŸç -&gt;çœŸå€¼ï¼š-1</span><br></pre></td></tr></table></figure>

<p> éå¸¸éœ‡æ’¼äººå¿ƒçš„è®¾è®¡ï¼Œæœ‰äº†è¡¥ç ä»¥åï¼Œå‡æ³•éƒ½å¯ä»¥å½“åšåŠ æ³•å»è¿ç®—ï¼Œä½ å¯çŸ¥é“ï¼Œè¿™å°†æå¤§åœ°ç®€åŒ–è®¡ç®—æœºçš„è¿ç®—è®¾è®¡ã€‚ä¸ä»…å¦‚æ­¤ï¼ï¼ï¼</p>
<p> æˆ‘ä»¬å³å°†ä»‹ç»çš„ä½è¿ç®—ä¹Ÿéƒ½æ˜¯åŸºäºè¡¥ç è¿›è¡Œçš„ï¼Œæ‰€ä»¥ï¼Œä½ è¿˜ä¼šè§‰å¾—egonåœ¨å•°å—¦å—ï¼Ÿå‘µå‘µ</p>
<h2 id="ä¸‰-ä½è¿ç®—"><a href="#ä¸‰-ä½è¿ç®—" class="headerlink" title="ä¸‰ ä½è¿ç®—"></a><strong>ä¸‰ ä½è¿ç®—</strong></h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æŒ‰ä½ä¸&amp;ï¼šä¸¤ä½å…¨ä¸º1ï¼Œç»“æœæ‰ä¸º1ï¼Œå¦åˆ™ä¸º0</span><br><span class="line">æŒ‰ä½æˆ–|ï¼šä¸¤ä½åªè¦å­˜åœ¨ä¸€ä¸ª1ï¼Œç»“æœå°±ä¸º1ï¼Œå¦åˆ™ä¸º0</span><br><span class="line">æŒ‰ä½å¼‚æˆ–^ï¼šåªæœ‰åœ¨ä¸¤ä½ä¸ç›¸åŒï¼Œå³ä¸€ä¸ªä¸º0ä¸€ä¸ªä¸º1çš„æƒ…å†µä¸‹ï¼Œç»“æœæ‰ä¸º1ï¼Œå¦åˆ™ä¸º0</span><br><span class="line">&lt;&lt; nï¼šå„äºŒè¿›åˆ¶ä½å…¨éƒ¨å·¦ç§»nä½ï¼Œé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥0</span><br><span class="line">&gt;&gt; n: å„äºŒè¿›åˆ¶ä½å…¨éƒ¨å³ç§»nä½ï¼Œå¦‚æœæ˜¯æ­£æ•°ï¼Œåˆ™é«˜ä½è¡¥0ï¼Œå¦‚æœæ˜¯è´Ÿæ•°åˆ™é«˜ä½è¡¥1</span><br></pre></td></tr></table></figure>

<p>####3.1 æŒ‰ä½ä¸&amp;</p>
<p>ç¤ºä¾‹1ï¼š8 &amp; -3</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€æ­¥ï¼šçœŸå€¼-&gt;åŸç -&gt;åç -&gt;è¡¥ç </span><br><span class="line">    çœŸå€¼ï¼š8</span><br><span class="line">    åŸç ï¼š0000 1000  </span><br><span class="line">    åç ï¼š0000 1000</span><br><span class="line">    è¡¥ç ï¼š0000 1000</span><br><span class="line"></span><br><span class="line">    çœŸå€¼ï¼š-3</span><br><span class="line">    åŸç ï¼š1000 0011  </span><br><span class="line">    åç ï¼š1111 1100</span><br><span class="line">    è¡¥ç ï¼š1111 1101</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒæ­¥ï¼šè¡¥ç ä¹‹é—´çš„è¿ç®—ï¼Œæ­¤å¤„ä¸º&amp;</span><br><span class="line">    8çš„è¡¥ç ï¼š0000 1000</span><br><span class="line">   -3çš„è¡¥ç ï¼š1111 1101</span><br><span class="line">    &amp;å¾—è¡¥ç ï¼š0000 1000</span><br><span class="line">    </span><br><span class="line">ç¬¬ä¸‰æ­¥ï¼šè¡¥ç -&gt;åç -&gt;åŸç -&gt;çœŸå€¼</span><br><span class="line">    ä¸Šä¸€æ­¥å¾—åˆ°çš„è¡¥ç ç»“æœï¼š0000 1000</span><br><span class="line">    ç¬¦å·ä½æ˜¯0ï¼Œä¸ºæ­£æ•°ï¼Œé‚£ä¹ˆå°±ç®€å•äº†ï¼Œæ­£æ•°çš„åŸã€åã€è¡¥ç éƒ½ä¸€æ ·ï¼Œæ‰€ä»¥ä¸€æ­¥åˆ°ä½</span><br><span class="line">    è¡¥ç -&gt;åç -&gt;åŸç ï¼š0000 1000</span><br><span class="line">    </span><br><span class="line">    åŸç -&gt;çœŸå€¼ï¼š8</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹2ï¼š-8 &amp; -9</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€æ­¥ï¼šçœŸå€¼-&gt;åŸç -&gt;è¡¥ç </span><br><span class="line">    çœŸå€¼ï¼š-8</span><br><span class="line">    åŸç ï¼š1000 1000  </span><br><span class="line">    åç ï¼š1111 0111</span><br><span class="line">    è¡¥ç ï¼š1111 1000</span><br><span class="line"></span><br><span class="line">    çœŸå€¼ï¼š-9</span><br><span class="line">    åŸç ï¼š1000 1001  </span><br><span class="line">    åç ï¼š1111 0110</span><br><span class="line">    è¡¥ç ï¼š1111 0111</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒæ­¥ï¼šè¡¥ç ä¹‹é—´çš„è¿ç®—ï¼Œæ­¤å¤„ä¸º&amp;</span><br><span class="line">   -8çš„è¡¥ç ï¼š1111 1000</span><br><span class="line">   -9çš„è¡¥ç ï¼š1111 0111</span><br><span class="line">    &amp;å¾—è¡¥ç ï¼š1111 0000 </span><br><span class="line">    </span><br><span class="line">ç¬¬ä¸‰æ­¥ï¼šè¡¥ç -&gt;åç -&gt;åŸç -&gt;çœŸå€¼</span><br><span class="line"> è¡¥ç -&gt;åç </span><br><span class="line">        è¡¥ç ç»“æœï¼š1111 0000 </span><br><span class="line">        ç¬¦å·ä½æ˜¯1ï¼Œä¸ºè´Ÿæ•°ï¼Œå‚ç…§ä¸Šå›¾2çš„æ­¥éª¤</span><br><span class="line"></span><br><span class="line">        è¡¥ç -&gt;åç ï¼š-1ï¼Œå¾—åˆ°åç ï¼š1110 1111</span><br><span class="line">    </span><br><span class="line">    åç -&gt;åŸç ï¼šç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™ä½å–åï¼Œå¾—åˆ°åŸç ï¼š1001 0000</span><br><span class="line">    </span><br><span class="line">    åŸç -&gt;çœŸå€¼ï¼š-16</span><br></pre></td></tr></table></figure>

<p>####3.2 æŒ‰ä½æˆ–|</p>
<p>ç¤ºä¾‹1ï¼š-8 | -9</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€æ­¥ï¼šçœŸå€¼-&gt;åŸç -&gt;è¡¥ç </span><br><span class="line">    çœŸå€¼ï¼š-8</span><br><span class="line">    åŸç ï¼š1000 1000  </span><br><span class="line">    åç ï¼š1111 0111</span><br><span class="line">    è¡¥ç ï¼š1111 1000</span><br><span class="line"></span><br><span class="line">    çœŸå€¼ï¼š-9</span><br><span class="line">    åŸç ï¼š1000 1001  </span><br><span class="line">    åç ï¼š1111 0110</span><br><span class="line">    è¡¥ç ï¼š1111 0111</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒæ­¥ï¼šè¡¥ç ä¹‹é—´çš„è¿ç®—ï¼Œæ­¤å¤„ä¸º|</span><br><span class="line">   -8çš„è¡¥ç ï¼š1111 1000</span><br><span class="line">   -9çš„è¡¥ç ï¼š1111 0111</span><br><span class="line">    |å¾—è¡¥ç ï¼š1111 1111 </span><br><span class="line">    </span><br><span class="line">ç¬¬ä¸‰æ­¥ï¼šè¡¥ç -&gt;åç -&gt;åŸç -&gt;çœŸå€¼</span><br><span class="line"> è¡¥ç -&gt;åç </span><br><span class="line">        è¡¥ç ç»“æœï¼š1111 1111 </span><br><span class="line">        ç¬¦å·ä½æ˜¯1ï¼Œä¸ºè´Ÿæ•°ï¼Œå‚ç…§ä¸Šå›¾2çš„æ­¥éª¤</span><br><span class="line"></span><br><span class="line">        è¡¥ç -&gt;åç ï¼š-1ï¼Œå¾—åˆ°åç ï¼š1111 1110</span><br><span class="line">    </span><br><span class="line">    åç -&gt;åŸç ï¼šç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™ä½å–åï¼Œå¾—åˆ°åŸç ï¼š1000 0001</span><br><span class="line">    </span><br><span class="line">    åŸç -&gt;çœŸå€¼ï¼š-1</span><br></pre></td></tr></table></figure>

<p>####3.3 æŒ‰ä½å¼‚æˆ–^</p>
<p>ç¤ºä¾‹1ï¼š-8 ^ -9</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€æ­¥ï¼šçœŸå€¼-&gt;åŸç -&gt;è¡¥ç </span><br><span class="line">    çœŸå€¼ï¼š-8</span><br><span class="line">    åŸç ï¼š1000 1000  </span><br><span class="line">    åç ï¼š1111 0111</span><br><span class="line">    è¡¥ç ï¼š1111 1000</span><br><span class="line"></span><br><span class="line">    çœŸå€¼ï¼š-9</span><br><span class="line">    åŸç ï¼š1000 1001  </span><br><span class="line">    åç ï¼š1111 0110</span><br><span class="line">    è¡¥ç ï¼š1111 0111</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒæ­¥ï¼šè¡¥ç ä¹‹é—´çš„è¿ç®—ï¼Œæ­¤å¤„ä¸º^</span><br><span class="line">   -8çš„è¡¥ç ï¼š1111 1000</span><br><span class="line">   -9çš„è¡¥ç ï¼š1111 0111</span><br><span class="line">    ^å¾—è¡¥ç ï¼š0000 1111 </span><br><span class="line">    </span><br><span class="line">ç¬¬ä¸‰æ­¥ï¼šè¡¥ç -&gt;åç -&gt;åŸç -&gt;çœŸå€¼</span><br><span class="line">    ä¸Šä¸€æ­¥å¾—åˆ°çš„è¡¥ç ç»“æœï¼š0000 1111</span><br><span class="line">    ç¬¦å·ä½æ˜¯0ï¼Œä¸ºæ­£æ•°ï¼Œé‚£ä¹ˆå°±ç®€å•äº†ï¼Œæ­£æ•°çš„åŸã€åã€è¡¥ç éƒ½ä¸€æ ·ï¼Œæ‰€ä»¥ä¸€æ­¥åˆ°ä½</span><br><span class="line">    è¡¥ç -&gt;åç -&gt;åŸç ï¼š0000 1111</span><br><span class="line">    </span><br><span class="line">    åŸç -&gt;çœŸå€¼ï¼š15</span><br></pre></td></tr></table></figure>

<p>ç¤ºä¾‹2ï¼š^ -8 å•ç‹¬ä¸€ä¸ª^ä»£è¡¨å–åçš„æ„æ€(é€‚ç”¨äºgoï¼Œä¸é€‚ç”¨äºpython)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€æ­¥ï¼šçœŸå€¼-&gt;åŸç -&gt;è¡¥ç </span><br><span class="line">    çœŸå€¼ï¼š-8</span><br><span class="line">    åŸç ï¼š1000 1000  </span><br><span class="line">    åç ï¼š1111 0111</span><br><span class="line">    è¡¥ç ï¼š1111 1000</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒæ­¥ï¼š</span><br><span class="line">   -8çš„è¡¥ç ï¼š1111 1000</span><br><span class="line"> ^å–åå¾—è¡¥ç ï¼š0000 0111 </span><br><span class="line">    </span><br><span class="line">ç¬¬ä¸‰æ­¥ï¼šè¡¥ç -&gt;åç -&gt;åŸç -&gt;çœŸå€¼</span><br><span class="line">    ä¸Šä¸€æ­¥å¾—åˆ°çš„è¡¥ç ç»“æœï¼š0000 0111</span><br><span class="line">    ç¬¦å·ä½æ˜¯0ï¼Œä¸ºæ­£æ•°ï¼Œé‚£ä¹ˆå°±ç®€å•äº†ï¼Œæ­£æ•°çš„åŸã€åã€è¡¥ç éƒ½ä¸€æ ·ï¼Œæ‰€ä»¥ä¸€æ­¥åˆ°ä½</span><br><span class="line">    è¡¥ç -&gt;åç -&gt;åŸç ï¼š0000 0111</span><br><span class="line">    </span><br><span class="line">    åŸç -&gt;çœŸå€¼ï¼š7</span><br></pre></td></tr></table></figure>

<p>####3.4 å‘å·¦ä½ç§»&lt;&lt; n</p>
<p>ç¤ºèŒƒ1ï¼š-8 &lt;&lt; 3</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€æ­¥ï¼šçœŸå€¼-&gt;åŸç -&gt;è¡¥ç </span><br><span class="line">    çœŸå€¼ï¼š-8</span><br><span class="line">    åŸç ï¼š1000 1000  </span><br><span class="line">    åç ï¼š1111 0111</span><br><span class="line">    è¡¥ç ï¼š1111 1000</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒæ­¥ï¼š&lt;&lt; n å„äºŒè¿›åˆ¶ä½å…¨éƒ¨å·¦ç§»nä½ï¼Œé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥0</span><br><span class="line">    è¡¥ç ï¼š1111 1000</span><br><span class="line">    &lt;&lt;3: 1100 0000</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">ç¬¬ä¸‰æ­¥ï¼šè¡¥ç -&gt;åç -&gt;åŸç -&gt;çœŸå€¼</span><br><span class="line"> è¡¥ç -&gt;åç </span><br><span class="line">        è¡¥ç ç»“æœï¼š1100 0000</span><br><span class="line">        ç¬¦å·ä½æ˜¯1ï¼Œä¸ºè´Ÿæ•°ï¼Œå‚ç…§ä¸Šå›¾2çš„æ­¥éª¤</span><br><span class="line"></span><br><span class="line">        è¡¥ç -&gt;åç ï¼š-1ï¼Œå¾—åˆ°åç ï¼š1011 1111</span><br><span class="line">    </span><br><span class="line">    åç -&gt;åŸç ï¼šç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™ä½å–åï¼Œå¾—åˆ°åŸç ï¼š1100 0000</span><br><span class="line">    </span><br><span class="line">    åŸç -&gt;çœŸå€¼ï¼š-64</span><br></pre></td></tr></table></figure>

<p>####3.5 å‘å³ä½ç§»&gt;&gt; n</p>
<p>ç¤ºèŒƒ1ï¼š-8 &gt;&gt; 3</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€æ­¥ï¼šçœŸå€¼-&gt;åŸç -&gt;è¡¥ç </span><br><span class="line">    çœŸå€¼ï¼š-8</span><br><span class="line">    åŸç ï¼š1000 1000  </span><br><span class="line">    åç ï¼š1111 0111</span><br><span class="line">    è¡¥ç ï¼š1111 1000</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒæ­¥ï¼š&gt;&gt; n å„äºŒè¿›åˆ¶ä½å…¨éƒ¨å³ç§»nä½ï¼Œå¦‚æœæ˜¯æ­£æ•°ï¼Œåˆ™é«˜ä½è¡¥0ï¼Œå¦‚æœæ˜¯è´Ÿæ•°åˆ™é«˜ä½è¡¥1</span><br><span class="line">    è¡¥ç ï¼š1111 1000</span><br><span class="line">    &gt;&gt;3: 1111 1111</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">ç¬¬ä¸‰æ­¥ï¼šè¡¥ç -&gt;åç -&gt;åŸç -&gt;çœŸå€¼</span><br><span class="line"> è¡¥ç -&gt;åç </span><br><span class="line">        è¡¥ç ç»“æœï¼š1111 1111</span><br><span class="line">        ç¬¦å·ä½æ˜¯1ï¼Œä¸ºè´Ÿæ•°ï¼Œå‚ç…§ä¸Šå›¾2çš„æ­¥éª¤</span><br><span class="line"></span><br><span class="line">        è¡¥ç -&gt;åç ï¼š-1ï¼Œå¾—åˆ°åç ï¼š1111 1110</span><br><span class="line">    </span><br><span class="line">    åç -&gt;åŸç ï¼šç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™ä½å–åï¼Œå¾—åˆ°åŸç ï¼š1000 0001</span><br><span class="line">    </span><br><span class="line">    åŸç -&gt;çœŸå€¼ï¼š-1</span><br></pre></td></tr></table></figure>

<p>ç¤ºèŒƒ2ï¼š8 &gt;&gt; 3</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€æ­¥ï¼šçœŸå€¼-&gt;åŸç -&gt;è¡¥ç </span><br><span class="line">    çœŸå€¼ï¼š8</span><br><span class="line">    åŸç ï¼š0000 1000  </span><br><span class="line">    åç ï¼š0000 1000</span><br><span class="line">    è¡¥ç ï¼š0000 1000</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒæ­¥ï¼š&gt;&gt; n å„äºŒè¿›åˆ¶ä½å…¨éƒ¨å³ç§»nä½ï¼Œå¦‚æœæ˜¯æ­£æ•°ï¼Œåˆ™é«˜ä½è¡¥0ï¼Œå¦‚æœæ˜¯è´Ÿè´£åˆ™é«˜ä½è¡¥1</span><br><span class="line">    è¡¥ç ï¼š0000 1000</span><br><span class="line">    &gt;&gt;3: 0000 0001</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">ç¬¬ä¸‰æ­¥ï¼šè¡¥ç -&gt;åç -&gt;åŸç -&gt;çœŸå€¼</span><br><span class="line">    ä¸Šä¸€æ­¥å¾—åˆ°çš„è¡¥ç ç»“æœï¼š0000 0001</span><br><span class="line">    ç¬¦å·ä½æ˜¯0ï¼Œä¸ºæ­£æ•°ï¼Œé‚£ä¹ˆå°±ç®€å•äº†ï¼Œæ­£æ•°çš„åŸã€åã€è¡¥ç éƒ½ä¸€æ ·ï¼Œæ‰€ä»¥ä¸€æ­¥åˆ°ä½</span><br><span class="line">    è¡¥ç -&gt;åç -&gt;åŸç ï¼š0000 0001</span><br><span class="line">    </span><br><span class="line">    åŸç -&gt;çœŸå€¼ï¼š1</span><br></pre></td></tr></table></figure>

<p>ç¤ºèŒƒ3ï¼š-300 &gt;&gt; 8</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€æ­¥ï¼šçœŸå€¼-&gt;åŸç -&gt;è¡¥ç </span><br><span class="line">    çœŸå€¼ï¼š-300  </span><br><span class="line">    åŸç ï¼š1000 0001 0010 1100 # -300 å·²ç»è¶…è¿‡äº†8ä½äºŒè¿›åˆ¶èƒ½è¡¨ç¤ºçš„èŒƒå›´ï¼Œéœ€è¦ç”¨16ä½è¡¨ç¤º</span><br><span class="line">    åç ï¼š1111 1110 1101 0011</span><br><span class="line">    è¡¥ç ï¼š1111 1110 1101 0100</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒæ­¥ï¼š&gt;&gt; n å„äºŒè¿›åˆ¶ä½å…¨éƒ¨å³ç§»nä½ï¼Œå¦‚æœæ˜¯æ­£æ•°ï¼Œåˆ™é«˜ä½è¡¥0ï¼Œå¦‚æœæ˜¯è´Ÿè´£åˆ™é«˜ä½è¡¥1</span><br><span class="line">    è¡¥ç ï¼š1111 1110 1101 0100</span><br><span class="line">    &gt;&gt;8: 1111 1111 1111 1110</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">ç¬¬ä¸‰æ­¥ï¼šè¡¥ç -&gt;åç -&gt;åŸç -&gt;çœŸå€¼</span><br><span class="line"> è¡¥ç -&gt;åç </span><br><span class="line">        è¡¥ç ç»“æœï¼š1111 1111 1111 1110</span><br><span class="line">        ç¬¦å·ä½æ˜¯1ï¼Œä¸ºè´Ÿæ•°ï¼Œå‚ç…§ä¸Šå›¾2çš„æ­¥éª¤</span><br><span class="line"></span><br><span class="line">        è¡¥ç -&gt;åç ï¼š-1ï¼Œå¾—åˆ°åç ï¼š1111 1111 1111 1101</span><br><span class="line">    </span><br><span class="line">    åç -&gt;åŸç ï¼šç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™ä½å–åï¼Œå¾—åˆ°åŸç ï¼š1000 0000 0000 0010</span><br><span class="line">    </span><br><span class="line">    åŸç -&gt;çœŸå€¼ï¼š-2</span><br></pre></td></tr></table></figure>

<h2 id="å››-ä½è¿ç®—é«˜çº§æ“ä½œ"><a href="#å››-ä½è¿ç®—é«˜çº§æ“ä½œ" class="headerlink" title="å›› ä½è¿ç®—é«˜çº§æ“ä½œ"></a><strong>å›› ä½è¿ç®—é«˜çº§æ“ä½œ</strong></h2><p>ä½è¿ç®—æ˜¯ cpu ç›´æ¥æ”¯æŒçš„ï¼Œæ•ˆç‡æœ€é«˜ï¼Œä½è¿ç®—å¯èƒ½åœ¨å¹³å¸¸çš„ç¼–ç¨‹ä¸­ä½¿ç”¨çš„å¹¶ä¸å¤šï¼Œä½†æ¶‰åŠåˆ°åº•å±‚ä¼˜åŒ–ï¼Œä¸€äº›ç®—æ³•åŠæºç å¯èƒ½ä¼šç»å¸¸é‡è§ï¼Œä¸‹é¢æ¥ä»‹ç»ä¸€ä¸‹é£éªšçš„æ“ä½œ</p>
<p>####4.1 ç”¨ä½è¿ç®— &amp; å–ä»£ % å–æ¨¡</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">X % 2^n = X &amp; (2^n â€“ 1)</span><br><span class="line">æ³¨æ„ï¼šç”¨ä½è¿ç®— &amp; æ¥å–ä»£ % å–æ¨¡éœ€è¦è¢«å–æ¨¡çš„æ•°å¿…é¡»æ˜¯2çš„å¹‚æ‰æˆç«‹</span><br></pre></td></tr></table></figure>

<p>ç¤ºèŒƒ1ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">10 % (2^3) ç­‰äº 10 &amp; (2^3-1)</span><br><span class="line">å³</span><br><span class="line">10 % 8 ç­‰äº 10 &amp; 7</span><br></pre></td></tr></table></figure>

<p>ç¤ºèŒƒ2ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">10 % (2^2) ç­‰äº 10 &amp; (2^2-1)</span><br><span class="line">å³</span><br><span class="line">10 % 4 ç­‰äº 10 &amp; 3</span><br></pre></td></tr></table></figure>

<p>####4.2 å°†ä¸€ä¸ªæ•°å·¦ç§» n ä½ï¼Œç›¸å½“äºä¹˜ä»¥äº† 2 çš„ n æ¬¡æ–¹ï¼Œå³ç§»nä½ï¼Œç›¸å½“äºé™¤ä»¥2çš„næ¬¡æ–¹å–æ•´</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">10 &lt;&lt; 3 ç­‰åŒäº10 * 2^3 </span><br><span class="line">10 &gt;&gt; 3 ç­‰åŒäº10 / 3</span><br></pre></td></tr></table></figure>

<h3 id="4-3-åˆ¤æ–­å¥‡å¶"><a href="#4-3-åˆ¤æ–­å¥‡å¶" class="headerlink" title="4.3 åˆ¤æ–­å¥‡å¶"></a><strong>4.3 åˆ¤æ–­å¥‡å¶</strong></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ &amp; è¿ç®—ç¬¦çš„ç‰¹æ€§ï¼Œæ¥åˆ¤æ–­äºŒè¿›åˆ¶æ•°ç¬¬ä¸€ä½æ˜¯0è¿˜æ˜¯1ã€‚</span><br><span class="line">ç”¨if ((a &amp; 1) == 0) ä»£æ›¿ if (a % 2 == 0)æ¥åˆ¤æ–­aæ˜¯ä¸æ˜¯å¶æ•°ã€‚</span><br></pre></td></tr></table></figure>

<h3 id="4-4-äº¤äº’æ•°å€¼"><a href="#4-4-äº¤äº’æ•°å€¼" class="headerlink" title="4.4 äº¤äº’æ•°å€¼"></a><strong>4.4 äº¤äº’æ•°å€¼</strong></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1ã€å€ŸåŠ©ä¸´æ—¶å˜é‡æ¥äº¤äº’æ•°å€¼</span><br><span class="line"></span><br><span class="line">    a:=10</span><br><span class="line">    b:=20</span><br><span class="line"></span><br><span class="line">    temp:=a</span><br><span class="line">    a=b</span><br><span class="line">    b=temp</span><br><span class="line"></span><br><span class="line"> fmt.Println(a,b) // ç»“æœ20 10</span><br><span class="line">2ã€å€ŸåŠ©ç´¯åŠ å’Œ</span><br><span class="line">å¦‚æœè€ƒè™‘åˆ°å†…å­˜ï¼Œä¸å¸Œæœ›ä½¿ç”¨ä¸´æ—¶å˜é‡ï¼ˆå…¶å®å°±æ˜¯ä¸ºäº†ç‚«é…·ï¼‰ï¼Œå¯ä»¥è¿™æ ·å®ç°ï¼š</span><br><span class="line"></span><br><span class="line">    a:=10</span><br><span class="line">    b:=20</span><br><span class="line"></span><br><span class="line">    a = a + b</span><br><span class="line">    b = a - b</span><br><span class="line">    a = a - b</span><br><span class="line">    fmt.Println(a,b) // ç»“æœ20 10</span><br><span class="line">    </span><br><span class="line">ä»æ•°å­¦è§’åº¦æ¥åˆ†æä¸€ä¸‹</span><br><span class="line">- ç¬¬ä¸€æ­¥ï¼ša = a + b</span><br><span class="line">- ç¬¬äºŒæ­¥ï¼šb = a - b = (a + b) - b = a</span><br><span class="line">- ç¬¬ä¸‰æ­¥ï¼ša = a - b = (a + b) - b = (a + b) - a = b</span><br><span class="line"></span><br><span class="line">3ã€ä½¿ç”¨ ^ ä½è¿ç®—ç¬¦</span><br><span class="line">å¦‚æœæƒ³è¦æ›´ç‚«é…·ä¸€ç‚¹å¯ä»¥ä½¿ç”¨ ^ æ¥å¸®å¿™å®ç°ï¼š</span><br><span class="line">å…ˆæ¥äº†è§£ä¸€ä¸‹ ^ çš„å‡ ä¸ªç‰¹æ€§ï¼š</span><br><span class="line">a ^ a = 0</span><br><span class="line">a ^ 0 = a</span><br><span class="line">(a ^ b) ^ c = a ^ (b ^ c)</span><br><span class="line"></span><br><span class="line">ä»£ç ï¼š</span><br><span class="line">    a:=10</span><br><span class="line">    b:=20</span><br><span class="line"></span><br><span class="line">    a ^= b;</span><br><span class="line">    b ^= a;</span><br><span class="line">    a ^= b;</span><br><span class="line">    fmt.Println(a,b) // ç»“æœ20 10</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä»æ•°å­¦è§’åº¦æ¥åˆ†æä¸€ä¸‹ï¼š</span><br><span class="line">- ç¬¬ä¸€æ­¥ï¼ša = a ^ b</span><br><span class="line">- ç¬¬äºŒæ­¥ï¼šb = a ^ b = (a ^ b) ^ b = a ^ (b ^ b) = a ^ 0 = a</span><br><span class="line">- ç¬¬ä¸‰æ­¥ï¼ša = a ^ b = (a ^ b) ^ b = (a ^ a) ^ b = b ^ 0 = b</span><br></pre></td></tr></table></figure>

<p>####4.5 é¡¹ç›®ä¸­çš„åº”ç”¨</p>
<p>åœ¨é¡¹ç›®ä¸­å¯ä»¥ç”¨ä½è¿ç®—è¿›è¡Œä¸€äº›çŠ¶æ€çš„è¿ç®—ï¼Œæ•ˆç‡æå…¶é«˜ï¼Œä¾‹å¦‚ï¼šç°åœ¨æˆ‘ä»¬æœ‰ä¸€äº›çˆ±å¥½éœ€æ±‚ï¼Œè¿™äº›çˆ±å¥½æœ‰ è¶³çƒ ç¾½æ¯›çƒ ä¹’ä¹“çƒ ç¯®çƒ æ¸¸æ³³ å¦‚æœæŒ‰ç…§æ•´æ•°çš„å½¢å¼å»å®šä¹‰ï¼Œé‚£å°±æœ‰æ— æ•°å¤šç§æƒ…å†µï¼Œæ¯•ç«Ÿå¯ä»¥ä¸¤ä¸¤ç»„åˆå˜›ï¼Œpythonä¸­çš„åˆ—è¡¨ã€goä¸­çš„æ•°ç»„éƒ½ä¸æ˜¯æœ€ä½³é€‰æ‹©</p>
<p>å¯ä»¥ç›´æ¥ç”¨äºŒè¿›åˆ¶ä½è¡¨ç¤ºï¼Œ1ä»£è¡¨çˆ±å¥½ï¼Œ0ä»£è¡¨æ²¡æœ‰è¯¥çˆ±å¥½</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">çˆ±å¥½ï¼šåªæœ‰è¶³çƒ</span><br><span class="line">è¡¨ç¤ºï¼š1 0 0 0 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">çˆ±å¥½ï¼šä¹’ä¹“çƒã€æ¸¸æ³³</span><br><span class="line">è¡¨ç¤ºï¼š0 0 1 0 1</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥å°±å¯ä»¥ç”¨ä½è¿ç®—è¿›è¡Œä¸€äº›é£éªšçš„æ“ä½œå•¦ï¼Œä¾‹å¦‚</p>
<p>#####åº”ç”¨1ï¼šæ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸä¸ªçˆ±å¥½</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å–œæ¬¢è¶³çƒçš„çŠ¶æ€æ˜¯ï¼š1 0 0 0 0 </span><br><span class="line">     å°æ˜çš„å–œå¥½ï¼š0 1 0 1 0</span><br><span class="line"> ä¸&amp;è®¡ç®—çš„ç»“æœä¸ºï¼š0 0 0 0 0ï¼Œè¿”å›ä½falseï¼Œæ‰€ä»¥å°æ˜ä¸å­˜åœ¨å–œå¥½è¶³çƒçš„çŠ¶æ€</span><br></pre></td></tr></table></figure>

<p>#####åº”ç”¨2ï¼šæ·»åŠ æŸä¸ªçˆ±å¥½</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å–œæ¬¢è¶³çƒï¼š   1 0 0 0 0</span><br><span class="line">å°æ˜çš„å–œå¥½ï¼š 0 1 0 1 0 </span><br><span class="line">æˆ–|è¿ç®—ä¹‹åï¼š 1 1 0 1 0</span><br></pre></td></tr></table></figure>

<h3 id="åº”ç”¨3ï¼šç§»é™¤æŸä¸ªçˆ±å¥½"><a href="#åº”ç”¨3ï¼šç§»é™¤æŸä¸ªçˆ±å¥½" class="headerlink" title="åº”ç”¨3ï¼šç§»é™¤æŸä¸ªçˆ±å¥½"></a><strong>åº”ç”¨3ï¼šç§»é™¤æŸä¸ªçˆ±å¥½</strong></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ï¼ˆä¼ å…¥ï¼‰å–œå¥½è¶³çƒ ï¼š 1 0 0 0 0</span><br><span class="line"></span><br><span class="line">    å°æ˜çš„å–œå¥½ï¼š   1 0 1 0 1</span><br><span class="line">å…ˆå°†è¶³çƒå–å^ ï¼š   0 1 1 1 1</span><br><span class="line">   å†è¿›ä¸&amp;è¿ç®—ï¼š   0 0 1 0 1</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šé£éªšæ“ä½œå‡é€‚ç”¨äºpythonï¼ï¼ï¼egonå¿™å¿™å¨å¨å†™äº†ä¸€å¤©ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°ä½ </p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>52-é™„å½•ä¸ƒï¼šCollectionsä¹‹OrderedDict</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/52_%E9%99%84%E5%BD%95%E4%B8%83%EF%BC%9Acollections%E4%B9%8BOrderedDict/</url>
    <content><![CDATA[<h2 id="collectionsä¹‹OrderedDictğŸ˜€"><a href="#collectionsä¹‹OrderedDictğŸ˜€" class="headerlink" title="collectionsä¹‹OrderedDictğŸ˜€"></a><strong>collectionsä¹‹OrderedDict</strong>ğŸ˜€</h2><p> å¦‚æœæƒ³è®©å­—å…¸æœ‰åºï¼Œå¯ä»¥ä½¿ç”¨collections.OrderedDictï¼Œå®ƒç°åœ¨åœ¨Cä¸­å®ç°ï¼Œè¿™ä½¿å…¶å¿«4åˆ°100å€ã€‚</p>
<p>##1ã€collections.OrderedDictçš„åŸºæœ¬ä½¿ç”¨  å°†ç±»OrderedDictå®ä¾‹åŒ–ä¼šå¾—åˆ°ä¸€ä¸ªdictå­ç±»çš„å®ä¾‹ï¼Œæ”¯æŒé€šå¸¸çš„dictæ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from collections import OrderedDict</span><br><span class="line"></span><br><span class="line">od=OrderedDict()</span><br><span class="line">print(isinstance(od,OrderedDict)) # True</span><br><span class="line">print(isinstance(od,dict)) # True</span><br></pre></td></tr></table></figure>

<p> OrderedDictæ˜¯è®°ä½é”®é¦–æ¬¡æ’å…¥é¡ºåºçš„å­—å…¸ã€‚å¦‚æœæ–°æ¡ç›®è¦†ç›–ç°æœ‰æ¡ç›®ï¼Œåˆ™åŸå§‹æ’å…¥ä½ç½®ä¿æŒä¸å˜ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">od[&#x27;name&#x27;] = &#x27;egon&#x27;</span><br><span class="line">od[&#x27;age&#x27;] = 18</span><br><span class="line">od[&#x27;gender&#x27;] = &#x27;male&#x27;</span><br><span class="line">print(od) # OrderedDict([(&#x27;name&#x27;, &#x27;egon&#x27;), (&#x27;age&#x27;, 18), (&#x27;gender&#x27;, &#x27;male&#x27;)])</span><br><span class="line"></span><br><span class="line">od[&#x27;age&#x27;]=19</span><br><span class="line">print(od) # OrderedDict([(&#x27;name&#x27;, &#x27;egon&#x27;), (&#x27;age&#x27;, 19), (&#x27;gender&#x27;, &#x27;male&#x27;)])</span><br></pre></td></tr></table></figure>

<p> åˆ é™¤æ¡ç›®å¹¶é‡æ–°æ’å…¥ä¼šå°†å…¶ç§»åŠ¨åˆ°æœ«å°¾ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">del od[&#x27;age&#x27;]</span><br><span class="line"></span><br><span class="line">od[&#x27;age&#x27;]=20</span><br><span class="line">print(od) # OrderedDict([(&#x27;name&#x27;, &#x27;egon&#x27;), (&#x27;gender&#x27;, &#x27;male&#x27;), (&#x27;age&#x27;, 20)])</span><br></pre></td></tr></table></figure>

<h2 id="2ã€æ–¹æ³•popitem-last-x3D-True"><a href="#2ã€æ–¹æ³•popitem-last-x3D-True" class="headerlink" title="2ã€æ–¹æ³•popitem(last&#x3D;True)"></a><strong>2ã€æ–¹æ³•popitem(last&#x3D;True)</strong></h2><p> è°ƒç”¨æœ‰åºå­—å…¸çš„popitem()æ–¹æ³•ä¼šåˆ é™¤å¹¶è¿”å›(key, value)å¯¹ã€‚å¦‚æœlastä¸ºçœŸï¼Œåˆ™ä»¥LIFO(åè¿›å…ˆå‡º)é¡ºåºè¿”å›è¿™äº›é”®å€¼å¯¹ï¼Œå¦‚æœä¸ºå‡ï¼Œåˆ™ä»¥FIFO(å…ˆè¿›å…ˆå‡º)é¡ºåºè¿”å›ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from collections import OrderedDict</span><br><span class="line"></span><br><span class="line">od=OrderedDict()</span><br><span class="line"></span><br><span class="line">od[&#x27;k1&#x27;]=&#x27;egon&#x27;</span><br><span class="line">od[&#x27;k2&#x27;]=&#x27;tom&#x27;</span><br><span class="line">od[&#x27;k3&#x27;]=&#x27;jack&#x27;</span><br><span class="line"></span><br><span class="line">print(od.popitem(last=False))</span><br><span class="line">print(od.popitem(last=False))</span><br><span class="line">print(od.popitem(last=False))</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">(&#x27;k1&#x27;, &#x27;egon&#x27;)</span><br><span class="line">(&#x27;k2&#x27;, &#x27;tom&#x27;)</span><br><span class="line">(&#x27;k3&#x27;, &#x27;jack&#x27;)</span><br><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="3ã€æ–¹æ³•move-to-end-key-last-x3D-True"><a href="#3ã€æ–¹æ³•move-to-end-key-last-x3D-True" class="headerlink" title="3ã€æ–¹æ³•move_to_end(key, last&#x3D;True)"></a><strong>3ã€æ–¹æ³•move_to_end(key, last&#x3D;True)</strong></h2><p> è¯¥æ–¹æ³•ç”¨äºå°†ä¸€ä¸ªå·²å­˜åœ¨çš„keyç§»åŠ¨åˆ°æœ‰åºå­—å…¸çš„ä»»ä¸€ç«¯ã€‚å¦‚æœlastä¸ºTrueï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œåˆ™ç§»åŠ¨åˆ°æœ«å°¾ï¼Œå¦‚æœlastä¸ºFalseï¼Œåˆ™ç§»åŠ¨åˆ°å¼€å¤´ã€‚å¦‚æœkeyä¸å­˜åœ¨ï¼Œå¼•å‘KeyError</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from collections import OrderedDict</span><br><span class="line"></span><br><span class="line">od = OrderedDict()</span><br><span class="line"></span><br><span class="line">od = OrderedDict.fromkeys(&#x27;abcde&#x27;)</span><br><span class="line">od.move_to_end(&#x27;b&#x27;)</span><br><span class="line">print(&#x27;&#x27;.join(od.keys())) # acdeb</span><br><span class="line"></span><br><span class="line">od.move_to_end(&#x27;b&#x27;, last=False)</span><br><span class="line">print(&#x27;&#x27;.join(od.keys())) # bacde</span><br></pre></td></tr></table></figure>

<h2 id="4ã€OrderDictå¯¹è±¡ä¹‹é—´çš„ç›¸ç­‰æ€§åˆ¤æ–­"><a href="#4ã€OrderDictå¯¹è±¡ä¹‹é—´çš„ç›¸ç­‰æ€§åˆ¤æ–­" class="headerlink" title="4ã€OrderDictå¯¹è±¡ä¹‹é—´çš„ç›¸ç­‰æ€§åˆ¤æ–­"></a><strong>4ã€OrderDictå¯¹è±¡ä¹‹é—´çš„ç›¸ç­‰æ€§åˆ¤æ–­</strong></h2><p> OrderedDictå¯¹è±¡ä¹‹é—´çš„ç›¸ç­‰æ€§åˆ¤æ–­æ˜¯é¡ºåºæ•æ„Ÿçš„</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åˆ¤æ–­ï¼šod1 == od2</span><br><span class="line">åº•å±‚å®ç°ç›¸å½“äºï¼šlist(od1.items()) == list(od2.items())</span><br></pre></td></tr></table></figure>

<p>OrderedDictå¯¹è±¡ä¸å…¶ä»–æ˜ å°„å¯¹è±¡ä¹‹é—´çš„ç›¸ç­‰æ€§æµ‹è¯•ä¸å¸¸è§„å­—å…¸ç±»ä¼¼ï¼Œå¯¹é¡ºåºä¸æ•æ„Ÿï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ä½¿ç”¨å¸¸è§„å­—å…¸çš„ä»»ä½•ä½ç½®æ›¿æ¢ä¸ºOrderedDictå¯¹è±¡ï¼Œå¹¶ä¸ä¼šå½±å“ä½¿ç”¨ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">od1=OrderedDict()</span><br><span class="line">od2=OrderedDict()</span><br><span class="line">od3=OrderedDict()</span><br><span class="line"></span><br><span class="line">od1[&#x27;k1&#x27;]=111</span><br><span class="line">od1[&#x27;k2&#x27;]=222</span><br><span class="line">od1[&#x27;k3&#x27;]=333</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">od2[&#x27;k1&#x27;]=111</span><br><span class="line">od2[&#x27;k2&#x27;]=222</span><br><span class="line">od2[&#x27;k3&#x27;]=333</span><br><span class="line"></span><br><span class="line">od3[&#x27;k1&#x27;]=111</span><br><span class="line">od3[&#x27;k3&#x27;]=333</span><br><span class="line">od3[&#x27;k2&#x27;]=222</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(od1 == od2) # OrderDictä¹‹é—´çš„ç›¸ç­‰åˆ¤æ–­ï¼Œå³list(od1.items())==list(od2.items())ï¼Œæ‰€ä»¥ç»“æœä¸ºTrue</span><br><span class="line">print(od1 == od3) # OrderDictä¹‹é—´çš„ç›¸ç­‰åˆ¤æ–­ï¼Œå³list(od1.items())==list(od3.items())ï¼Œæ‰€ä»¥ç»“æœä¸ºFalse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">d=&#123;&#x27;k1&#x27;:111,&#x27;k3&#x27;:333,&#x27;k2&#x27;:222&#125; # å®šä¹‰å¸¸è§„å­—å…¸</span><br><span class="line"></span><br><span class="line">print(od1 == d) # OrderDictå¯¹è±¡ä¸å¸¸è§„å­—å…¸æ¯”è¾ƒï¼Œå¯¹é¡ºåºä¸æ•æ„Ÿï¼Œæ‰€ä»¥ç»“æœä¸ºTrue</span><br></pre></td></tr></table></figure>

<h2 id="5ã€OrderedDictæ„é€ å‡½æ•°å’Œupdate"><a href="#5ã€OrderedDictæ„é€ å‡½æ•°å’Œupdate" class="headerlink" title="5ã€OrderedDictæ„é€ å‡½æ•°å’Œupdate()"></a><strong>5ã€OrderedDictæ„é€ å‡½æ•°å’Œupdate()</strong></h2><p> OrderedDictæ„é€ å‡½æ•°å’Œupdate()æ–¹æ³•éƒ½å¯ä»¥æ¥å—å…³é”®å­—å‚æ•°ï¼Œä½†æ˜¯å®ƒä»¬çš„é¡ºåºä¸¢å¤±ï¼Œå› ä¸ºOrderedDictæ„é€ å‡½æ•°å’Œupdate()æ–¹æ³•éƒ½å±äºPythonçš„å‡½æ•°è°ƒç”¨ï¼Œè€ŒPythonçš„å‡½æ•°è°ƒç”¨è¯­ä¹‰ä½¿ç”¨å¸¸è§„æ— åºå­—å…¸ä¼ é€’å…³é”®å­—å‚æ•°ã€‚è¯·åœ¨python2ä¸­æµ‹è¯•</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from collections import OrderedDict</span><br><span class="line">od1=OrderedDict(x=1,y=2,z=3)</span><br><span class="line">print(od1) # é¡ºåºé”™ä¹±ï¼šOrderedDict([(&#x27;y&#x27;, 2), (&#x27;x&#x27;, 1), (&#x27;z&#x27;, 3)])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">od2=OrderedDict()</span><br><span class="line">od2.update(a=1)</span><br><span class="line">od2.update(b=2)</span><br><span class="line">od2.update(c=3)</span><br><span class="line">print(od2) # é¡ºåºæ­£å¸¸ï¼šOrderedDict([(&#x27;a&#x27;, 1), (&#x27;b&#x27;, 2), (&#x27;c&#x27;, 3)])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">od3=OrderedDict()</span><br><span class="line">od3.update(d=4,e=5,f=6)</span><br><span class="line">print(od3) # é¡ºåºé”™ä¹±ï¼šOrderedDict([(&#x27;e&#x27;, 5), (&#x27;d&#x27;, 4), (&#x27;f&#x27;, 6)])</span><br></pre></td></tr></table></figure>

<h2 id="6ã€OrderedDictä¸sortç»“åˆ"><a href="#6ã€OrderedDictä¸sortç»“åˆ" class="headerlink" title="6ã€OrderedDictä¸sortç»“åˆ"></a><strong>6ã€OrderedDictä¸sortç»“åˆ</strong></h2><p> ç”±äºæœ‰åºå­—å…¸ä¼šè®°ä½å…¶æ’å…¥é¡ºåºï¼Œå› æ­¤å¯ä»¥ä¸æ’åºç»“åˆä½¿ç”¨ä»¥åˆ›å»ºæ’åºå­—å…¸ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; # æ ‡å‡†æœªæ’åºçš„å¸¸è§„å­—å…¸</span><br><span class="line">&gt;&gt;&gt; d = &#123;&#x27;banana&#x27;: 3, &#x27;apple&#x27;: 4, &#x27;pear&#x27;: 1, &#x27;orange&#x27;: 2&#125;</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; # æŒ‰ç…§keyæ’åºçš„å­—å…¸</span><br><span class="line">&gt;&gt;&gt; OrderedDict(sorted(d.items(), key=lambda t: t[0]))</span><br><span class="line">OrderedDict([(&#x27;apple&#x27;, 4), (&#x27;banana&#x27;, 3), (&#x27;orange&#x27;, 2), (&#x27;pear&#x27;, 1)])</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; # æŒ‰ç…§valueæ’åºçš„å­—å…¸</span><br><span class="line">&gt;&gt;&gt; OrderedDict(sorted(d.items(), key=lambda t: t[1]))</span><br><span class="line">OrderedDict([(&#x27;pear&#x27;, 1), (&#x27;orange&#x27;, 2), (&#x27;banana&#x27;, 3), (&#x27;apple&#x27;, 4)])</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; # æŒ‰ç…§keyçš„é•¿åº¦æ’åºçš„å­—å…¸</span><br><span class="line">&gt;&gt;&gt; OrderedDict(sorted(d.items(), key=lambda t: len(t[0])))</span><br><span class="line">OrderedDict([(&#x27;pear&#x27;, 1), (&#x27;apple&#x27;, 4), (&#x27;orange&#x27;, 2), (&#x27;banana&#x27;, 3)])</span><br></pre></td></tr></table></figure>

<h2 id="7ã€è‡ªå®šä¹‰OrderDictå˜ä½“"><a href="#7ã€è‡ªå®šä¹‰OrderDictå˜ä½“" class="headerlink" title="7ã€è‡ªå®šä¹‰OrderDictå˜ä½“"></a><strong>7ã€è‡ªå®šä¹‰OrderDictå˜ä½“</strong></h2><p> æˆ‘ä»¬é€šè¿‡ç»§æ‰¿OrderDictç±»æ¥å®ç°åœ¨åŸæœ‰çš„åŸºç¡€ä¹‹ä¸Šä¸Šå®šåˆ¶åŒ–æˆ‘ä»¬çš„å­ç±»ï¼ˆå³OrderDictå˜ä½“ï¼‰ã€‚</p>
<p> æ¯”å¦‚æˆ‘ä»¬åœ¨ç”¨æ–°æ¡ç›®è¦†ç›–ç°æœ‰æ¡ç›®æ—¶ï¼Œæˆ‘ä»¬ä¸æƒ³åƒOrderDictåŸå…ˆé‚£æ ·ä¿ç•™åŸå§‹çš„æ’å…¥ä½ç½®ï¼Œè€Œæ˜¯å°†è¦†ç›–çš„æ¡ç›®ç§»åŠ¨åˆ°ç»“å°¾ï¼Œå®ç°å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">class LastUpdatedOrderedDict(OrderedDict):</span><br><span class="line">    &#x27;Store items in the order the keys were last added&#x27;</span><br><span class="line"></span><br><span class="line">    def __setitem__(self, key, value):</span><br><span class="line">        if key in self:</span><br><span class="line">            del self[key]</span><br><span class="line">        OrderedDict.__setitem__(self, key, value)</span><br><span class="line"></span><br><span class="line">od5=LastUpdatedOrderedDict()</span><br><span class="line">od5[&#x27;k1&#x27;]=111</span><br><span class="line">od5[&#x27;k2&#x27;]=222</span><br><span class="line">od5[&#x27;k3&#x27;]=333</span><br><span class="line">print(od5) # LastUpdatedOrderedDict([(&#x27;k1&#x27;, 111), (&#x27;k2&#x27;, 222), (&#x27;k3&#x27;, 333)])</span><br><span class="line"></span><br><span class="line">od5[&#x27;k2&#x27;]=2222222222</span><br><span class="line">print(od5) # è¦†ç›–çš„å€¼è·‘åˆ°æœ«å°¾ï¼ŒLastUpdatedOrderedDict([(&#x27;k1&#x27;, 111), (&#x27;k3&#x27;, 333), (&#x27;k2&#x27;, 2222222222)])</span><br></pre></td></tr></table></figure>

<p>##8ã€OrderDictä¸collections.Counterç»“åˆ</p>
<p> æœ‰åºå­—å…¸å¯ä»¥ä¸Counterç±»ç»“åˆï¼Œä»¥ä¾¿è®¡æ•°å™¨è®°ä½é¦–æ¬¡é‡åˆ°çš„é¡ºåºå…ƒç´ ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from collections import OrderedDict,Counter</span><br><span class="line"></span><br><span class="line">class OrderedCounter(Counter, OrderedDict):</span><br><span class="line">    &#x27;Counter that remembers the order elements are first encountered&#x27;</span><br><span class="line">    def __repr__(self):</span><br><span class="line">        print(&#x27;====&gt;&#x27;)</span><br><span class="line">        return &#x27;%s(%r)&#x27; % (self.__class__.__name__, OrderedDict(self))</span><br><span class="line">    def __reduce__(self):</span><br><span class="line">        return self.__class__, (OrderedDict(self),)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c1 = Counter([&#x27;bbb&#x27;,&#x27;ccc&#x27;,&#x27;aaa&#x27;,&#x27;aaa&#x27;,&#x27;ccc&#x27;])</span><br><span class="line">print(c1)  # é¡ºåºé”™ä¹±ï¼šCounter(&#123;&#x27;ccc&#x27;: 2, &#x27;aaa&#x27;: 2, &#x27;bbb&#x27;: 1&#125;)</span><br><span class="line"></span><br><span class="line">c2=OrderedCounter([&#x27;bbb&#x27;,&#x27;ccc&#x27;,&#x27;aaa&#x27;,&#x27;aaa&#x27;,&#x27;ccc&#x27;])</span><br><span class="line">print(c2)  # é¡ºåºä¿æŒåŸæœ‰ï¼šOrderedCounter(OrderedDict([(&#x27;bbb&#x27;, 1), (&#x27;ccc&#x27;, 2), (&#x27;aaa&#x27;, 2)]))</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>53-é™„å½•å…«ï¼šCollectionsä¹‹å®¹å™¨æ•°æ®ç±»å‹</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/53_%E9%99%84%E5%BD%95%E5%85%AB%EF%BC%9Acollections--%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
    <content><![CDATA[<p>collectionsæ¨¡å—ï¼š<a href="https://link.zhihu.com/?target=https://yiyibooks.cn/xx/python_352/library/collections.html">https://yiyibooks.cn/xx/python_</a></p>
]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>54-é™„å½•ä¹ï¼šType Hinting</title>
    <url>/2022/07/18/03_Python/01_Python%E5%85%A5%E9%97%A8/54_%E9%99%84%E5%BD%95%E4%B9%9D%EF%BC%9ATypeHinting/</url>
    <content><![CDATA[<p>ç±»å‹æç¤º <strong>Type hinting</strong>ï¼ˆæœ€ä½Pythonç‰ˆæœ¬ä¸º3.5ï¼‰</p>
<p>python3æ–°å¢ç±»å‹æç¤ºåŠŸèƒ½ï¼Œä¾‹å¦‚æˆ‘ä»¬å¯ä»¥ä¸ºå‡½æ•°å¢åŠ ç±»å‹æç¤ºä¿¡æ¯ï¼Œè€Œä¸å½±å“å‡½æ•°æœ¬èº«çš„æ‰§è¡Œï¼š</p>
<p>æ³¨é‡Šçš„ä¸€èˆ¬è§„åˆ™æ˜¯å‚æ•°ååè·Ÿä¸€ä¸ªå†’å·ï¼ˆï¼šï¼‰ï¼Œç„¶åå†è·Ÿä¸€ä¸ªexpressionï¼Œè¿™ä¸ªexpressionå¯ä»¥æ˜¯ä»»ä½•å½¢å¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">def func(a: &#x27;spam&#x27;, b: (1, 10), c: float) -&gt; int:</span><br><span class="line">    return a + b + c</span><br><span class="line"> </span><br><span class="line">&gt;&gt;&gt; func(1, 2, 3)</span><br><span class="line">6</span><br></pre></td></tr></table></figure>

<p>è¿”å›å€¼çš„å½¢å¼æ˜¯ -&gt; intï¼Œannotationå¯è¢«ä¿å­˜ä¸ºå‡½æ•°çš„attributesã€‚æŸ¥çœ‹æ‰€æœ‰çš„annotationï¼Œå¯é€šè¿‡å¦‚ä¸‹è¯­å¥</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; func.__annotations__</span><br><span class="line">&#123;&#x27;c&#x27;: &lt;class &#x27;float&#x27;&gt;, &#x27;a&#x27;: &#x27;spam&#x27;, &#x27;b&#x27;: (1, 10), &#x27;return&#x27;: &lt;class &#x27;int&#x27;&gt;&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸ºå‡½æ•°å¢åŠ äº†æ³¨é‡Šï¼Œå¯ä¸å¯ä»¥ç»§ç»­ä½¿ç”¨é»˜è®¤å‚æ•°å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; def func(a: &#x27;spam&#x27; = 4, b: (1, 10) = 5, c: float = 6) -&gt; int:</span><br><span class="line">...   return a + b + c</span><br><span class="line">... </span><br><span class="line">&gt;&gt;&gt; func(1, 2, 3)</span><br><span class="line">6</span><br><span class="line">&gt;&gt;&gt; func()</span><br><span class="line">15</span><br><span class="line">&gt;&gt;&gt; func(1, c=10)</span><br><span class="line">16</span><br><span class="line">&gt;&gt;&gt; func.__annotations__</span><br><span class="line">&#123;&#x27;c&#x27;: &lt;class &#x27;float&#x27;&gt;, &#x27;a&#x27;: &#x27;spam&#x27;, &#x27;b&#x27;: (1, 10), &#x27;return&#x27;: &lt;class &#x27;int&#x27;&gt;&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Python</category>
        <category>Pythonå…¥é—¨</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--æ–‡ä»¶ACL</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day11-sudo%E4%B8%8Esu/facl/</url>
    <content><![CDATA[<h1 id="ç¬”è®°"><a href="#ç¬”è®°" class="headerlink" title="ç¬”è®°"></a>ç¬”è®°</h1><blockquote>
<p>è¡¥å……ï¼š</p>
<p>â€‹	æƒé™çš„å½’å±</p>
<p>â€‹		a : å±ç»„ã€å±ä¸»ä»¥åŠå…¶ä»–äººçš„æƒé™ä¸€èµ·è®¾ç½®ã€‚</p>
<p>â€‹		o : å…¶ä»–äºº</p>
<p>â€‹		g : å±ç»„</p>
<p>â€‹		u : å±ä¸»</p>
</blockquote>
<h2 id="umask"><a href="#umask" class="headerlink" title="umask"></a>umask</h2><blockquote>
<p>å°±æ˜¯è§£å†³ç›®å½•åŠæ–‡ä»¶çš„é»˜è®¤æƒé™ã€‚</p>
</blockquote>
<ul>
<li>æ–‡ä»¶çš„æœ€é«˜æƒé™æ˜¯å¤šå°‘     777</li>
<li>æ–‡ä»¶å¤¹çš„æœ€é«˜æƒé™æ˜¯å¤šå°‘  777</li>
</ul>
<h2 id="ACL"><a href="#ACL" class="headerlink" title="ACL"></a>ACL</h2><blockquote>
<p>ACLæ˜¯ä¸ºäº†è§£å†³æŸç§ç‰¹æ®Šç¯å¢ƒä¸‹çš„ï¼Œç”¨æˆ·æƒé™éœ€æ±‚ã€‚</p>
</blockquote>
<ul>
<li>setfacl ï¼š è®¾ç½®aclæƒé™</li>
<li>getfacl ï¼šæŸ¥çœ‹ACLæƒé™</li>
</ul>
<h3 id="aclæƒé™å½’å±"><a href="#aclæƒé™å½’å±" class="headerlink" title="aclæƒé™å½’å±"></a>aclæƒé™å½’å±</h3><ul>
<li>u : æŒ‡å®šç”¨æˆ·</li>
<li>g : æŒ‡å®šç»„</li>
<li>o : ä¿®æ”¹å…¶ä»–ç”¨æˆ·æƒé™</li>
<li>m : æŒ‡å®šmaskæƒé™</li>
</ul>
<p>æ³¨ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒACLæƒé™è·Ÿæ™®é€šæƒé™ä¿æŒä¸€è‡´ã€‚</p>
<h2 id="ACL-çš„æµç¨‹"><a href="#ACL-çš„æµç¨‹" class="headerlink" title="ACL çš„æµç¨‹"></a>ACL çš„æµç¨‹</h2><ul>
<li><p>1ã€åˆ›å»ºæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">chmod o+x /root</span><br><span class="line">chmod o+x /root/xiaochen</span><br><span class="line"><span class="built_in">cd</span> xiaochen</span><br><span class="line"></span><br><span class="line">[root@localhost xiaochen]<span class="comment"># touch abc.txt</span></span><br><span class="line">[root@localhost xiaochen]<span class="comment"># chmod 000 abc.txt </span></span><br><span class="line">[root@localhost xiaochen]<span class="comment"># ll</span></span><br><span class="line">total 0</span><br><span class="line">---------- 1 root root 0 Mar 16 11:39 abc.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¼–å†™æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost xiaochen]<span class="comment"># echo 111 &gt; abc.txt </span></span><br><span class="line">[root@localhost xiaochen]<span class="comment"># cat abc.txt </span></span><br><span class="line">111</span><br></pre></td></tr></table></figure>
</li>
<li><p>è®¾ç½®ACLæƒé™</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost xiaochen]<span class="comment"># useradd xiaozhang</span></span><br><span class="line">[root@localhost xiaochen]<span class="comment"># setfacl -m u:xiaozhang:r abc.txt </span></span><br><span class="line">[root@localhost xiaochen]<span class="comment"># getfacl abc.txt </span></span><br><span class="line"><span class="comment"># file: abc.txt</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::---</span><br><span class="line">user:xiaozhang:r--</span><br><span class="line">group::---</span><br><span class="line">mask::r--</span><br><span class="line">other::---</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨ï¼š</span></span><br><span class="line">setfacl -m u:ç”¨æˆ·åç§°:æƒé™(rwx) æ–‡ä»¶åç§°</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># su - xiaozhang</span></span><br><span class="line">[xiaozhang@localhost ~]$ cat /root/xiaochen/abc.txt</span><br><span class="line">111</span><br></pre></td></tr></table></figure></li>
</ul>
<p>mask :  rw-</p>
<p>xxxx :   -w-</p>
<p>-w-</p>
<h2 id="ACLæƒé™çš„åˆ é™¤"><a href="#ACLæƒé™çš„åˆ é™¤" class="headerlink" title="ACLæƒé™çš„åˆ é™¤"></a>ACLæƒé™çš„åˆ é™¤</h2><ul>
<li><p>åˆ é™¤æŸä¸ªæƒé™</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost xiaochen]<span class="comment"># getfacl abc.txt </span></span><br><span class="line"><span class="comment"># file: abc.txt</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::---</span><br><span class="line">user:xiaozhang:r--</span><br><span class="line">group::---</span><br><span class="line">group:xiaochen:r-x		<span class="comment">#effective:r--</span></span><br><span class="line">mask::rw-</span><br><span class="line">other::r--</span><br><span class="line"></span><br><span class="line">[root@localhost xiaochen]<span class="comment"># setfacl -x u:xiaozhang abc.txt</span></span><br><span class="line"></span><br><span class="line">[root@localhost xiaochen]<span class="comment"># getfacl abc.txt </span></span><br><span class="line"><span class="comment"># file: abc.txt</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::---</span><br><span class="line">group::---</span><br><span class="line">group:xiaochen:r-x</span><br><span class="line">mask::r-x</span><br><span class="line">other::r--</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@localhost xiaochen]<span class="comment"># getfacl abc.txt </span></span><br><span class="line"><span class="comment"># file: abc.txt</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::---</span><br><span class="line">group::---</span><br><span class="line">group:xiaochen:r-x</span><br><span class="line">mask::r-x</span><br><span class="line">other::r--</span><br><span class="line"></span><br><span class="line">[root@localhost xiaochen]<span class="comment"># setfacl -x g:xiaochen abc.txt </span></span><br><span class="line">[root@localhost xiaochen]<span class="comment"># getfacl abc.txt </span></span><br><span class="line"><span class="comment"># file: abc.txt</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::---</span><br><span class="line">group::---</span><br><span class="line">mask::---</span><br><span class="line">other::r--</span><br><span class="line"></span><br></pre></td></tr></table></figure>


</li>
<li><p>æ¸…ç©ºaclæƒé™</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost xiaochen]<span class="comment"># getfacl abc.txt </span></span><br><span class="line"><span class="comment"># file: abc.txt</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::---</span><br><span class="line">user:xiaochen:rw-</span><br><span class="line">user:xiaocao:rw-</span><br><span class="line">group::---</span><br><span class="line">group:xiaochen:rw-</span><br><span class="line">group:xiaocao:rw-</span><br><span class="line">mask::rw-</span><br><span class="line">other::r--</span><br><span class="line"></span><br><span class="line">[root@localhost xiaochen]<span class="comment"># setfacl -b abc.txt </span></span><br><span class="line">[root@localhost xiaochen]<span class="comment"># getfacl abc.txt </span></span><br><span class="line"><span class="comment"># file: abc.txt</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::---</span><br><span class="line">group::---</span><br><span class="line">other::r--</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="ACLç»§æ‰¿"><a href="#ACLç»§æ‰¿" class="headerlink" title="ACLç»§æ‰¿"></a>ACLç»§æ‰¿</h2><blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒACLæ˜¯ä¸ä¼šç»§æ‰¿ä¸Šå±‚ç›®å½•çš„æƒé™çš„ã€‚åªæœ‰ç›®å½•è®¾ç½®å¯ç»§æ‰¿å­é›†æ–‡ä»¶æ‰å¯ä»¥ç»§æ‰¿ACLæƒé™ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost linux12]<span class="comment"># setfacl -m d:u:xiaochen:w ../linux12</span></span><br><span class="line">[root@localhost linux12]<span class="comment"># touch bcd.txt</span></span><br><span class="line">[root@localhost linux12]<span class="comment"># ls -l</span></span><br><span class="line">total 0</span><br><span class="line">-rw-r--r--  1 root root 0 Mar 16 15:40 abc.txt</span><br><span class="line">-rw-rw-r--+ 1 root root 0 Mar 16 15:43 bcd.txt</span><br><span class="line">[root@localhost linux12]<span class="comment"># getfacl bcd.txt </span></span><br><span class="line"><span class="comment"># file: bcd.txt</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:xiaochen:-w-</span><br><span class="line">group::r-x			<span class="comment">#effective:r--</span></span><br><span class="line">mask::rw-</span><br><span class="line">other::r--</span><br><span class="line"></span><br><span class="line">[root@localhost linux12]<span class="comment"># </span></span><br></pre></td></tr></table></figure>













]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--ç”¨æˆ·æƒé™</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day10-Linux%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯-usermod"><a href="#ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯-usermod" class="headerlink" title="ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯(usermod)"></a>ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯(usermod)</h1><blockquote>
<p>ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯æœ€ä¸»è¦çš„å‘½ä»¤æ˜¯usermodå‘½ä»¤ï¼Œå…¶å‚æ•°è·ŸuseraddåŸºæœ¬ä¸€è‡´ã€‚</p>
</blockquote>
<ul>
<li><p>ä¿®æ”¹UID</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># tail -1 /etc/passwd</span></span><br><span class="line">xiaoyu:x:2002:2002::/home/xiaoyu:/bin/bash</span><br><span class="line">[root@localhost ~]<span class="comment"># usermod -u 2302 xiaoyu</span></span><br><span class="line">[root@localhost ~]<span class="comment"># tail -1 /etc/passwd</span></span><br><span class="line">xiaoyu:x:2302:2002::/home/xiaoyu:/bin/bash</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹åŸºæœ¬ç»„åŠé™„åŠ ç»„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åŸºæœ¬ç»„ : ä¸€ä¸ªç”¨æˆ·å¿…é¡»æ‹¥æœ‰çš„å“ªä¸ªç»„</span></span><br><span class="line">[root@localhost ~]<span class="comment"># tail -1 /etc/passwd</span></span><br><span class="line">xiaoyu:x:2302:2002::/home/xiaoyu:/bin/bash</span><br><span class="line">[root@localhost ~]<span class="comment"># id xiaoyu</span></span><br><span class="line">uid=2302(xiaoyu) gid=2002(xiaoyu) groups=2002(xiaoyu)</span><br><span class="line">[root@localhost ~]<span class="comment"># usermod -g group1 xiaoyu</span></span><br><span class="line">[root@localhost ~]<span class="comment"># id xiaoyu</span></span><br><span class="line">uid=2302(xiaoyu) gid=2003(group1) groups=2003(group1)</span><br><span class="line">[root@localhost ~]<span class="comment"># tail -1 /etc/passwd</span></span><br><span class="line">xiaoyu:x:2302:2003::/home/xiaoyu:/bin/bash</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é™„åŠ ç»„ ï¼š ç”¨æˆ·åŠ å…¥çš„å…¶ä»–ç”¨æˆ·ç»„</span></span><br><span class="line">[root@localhost ~]<span class="comment"># groupadd group1</span></span><br><span class="line">[root@localhost ~]<span class="comment"># id</span></span><br><span class="line">uid=0(root) gid=0(root) groups=0(root),1000(oldboy),1001(sssssssssssssssssssssss),1002(<span class="built_in">test</span>)</span><br><span class="line">[root@localhost ~]<span class="comment"># usermod -G group1 root</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/group</span></span><br><span class="line">[root@localhost ~]<span class="comment"># tail -1 /etc/group</span></span><br><span class="line">group1:x:2003:root</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹å®¶ç›®å½•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># usermod  -d /home/xiaoyu123 xiaoyu</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨ï¼šä¿®æ”¹å®¶ç›®å½•ä»…ä»…ä¿®æ”¹äº†é…ç½®ï¼Œè€ŒåŸæ¥çš„å®¶ç›®å½•æ–‡ä»¶æ²¡æœ‰è¿ç§»</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹ç”¨æˆ·æè¿°ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># tail -1 /etc/passwd</span></span><br><span class="line">xiaoyu:x:2302:2003::/home/xiaoyu123:/bin/bash</span><br><span class="line">[root@localhost ~]<span class="comment"># usermod -c &quot;è¿™æ˜¯ä¸€ä¸ªç”©é”…&quot; xiaoyu</span></span><br><span class="line">[root@localhost ~]<span class="comment"># tail -1 /etc/passwd</span></span><br><span class="line">xiaoyu:x:2302:2003:è¿™æ˜¯ä¸€ä¸ªç”©é”…:/home/xiaoyu123:/bin/bash</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹ç”¨æˆ·é»˜è®¤è§£æå™¨</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># usermod -s /bin/sh xiaoyu</span></span><br><span class="line">[root@localhost ~]<span class="comment"># tail -1 /etc/passwd</span></span><br><span class="line">xiaoyu:x:2302:2003:è¿™æ˜¯ä¸€ä¸ªç”©é”…:/home/xiaoyu123:/bin/sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>é”å®šä¸è§£é”</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost home]<span class="comment"># usermod -L xiaoyu</span></span><br><span class="line">[root@localhost home]<span class="comment"># usermod -U xiaoyu</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹ç™»å½•åç§°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost home]<span class="comment"># usermod -l dayu xiaoyu</span></span><br><span class="line">[root@localhost home]<span class="comment"># tail -1 /etc/passwd</span></span><br><span class="line">dayu:x:2302:2003:è¿™æ˜¯ä¸€ä¸ªç”©é”…:/home/xiaoyu123:/bin/bash</span><br></pre></td></tr></table></figure>
</li>
<li><p>è¿½åŠ </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost home]<span class="comment"># id dayu</span></span><br><span class="line">uid=2302(dayu) gid=2003(group1) groups=2003(group1),1000(oldboy)</span><br><span class="line">[root@localhost home]<span class="comment"># usermod -G root dayu</span></span><br><span class="line">[root@localhost home]<span class="comment"># id dayu</span></span><br><span class="line">uid=2302(dayu) gid=2003(group1) groups=2003(group1),0(root)</span><br><span class="line">[root@localhost home]<span class="comment"># usermod -G oldboy dayu</span></span><br><span class="line">[root@localhost home]<span class="comment"># id dayu</span></span><br><span class="line">uid=2302(dayu) gid=2003(group1) groups=2003(group1),1000(oldboy)</span><br><span class="line">[root@localhost home]<span class="comment"># usermod -a -G root dayu</span></span><br><span class="line">[root@localhost home]<span class="comment"># id dayu</span></span><br><span class="line">uid=2302(dayu) gid=2003(group1) groups=2003(group1),0(root),1000(oldboy)</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="å¯†ç ï¼ˆpasswdï¼‰"><a href="#å¯†ç ï¼ˆpasswdï¼‰" class="headerlink" title="å¯†ç ï¼ˆpasswdï¼‰"></a>å¯†ç ï¼ˆpasswdï¼‰</h1><blockquote>
<p>ä¿®æ”¹æˆ–æ·»åŠ Linuxæ™®é€šç”¨æˆ·çš„å¯†ç ã€‚ç›´æ¥å½±å“çš„æ–‡ä»¶æ˜¯&#x2F;etc&#x2F;shadow</p>
</blockquote>
<ul>
<li><p>å¢åŠ æˆ–ä¿®æ”¹å¯†ç </p>
<p>å½“ç”¨æˆ·å¯†ç ä¸å­˜åœ¨çš„æ—¶å€™å³ä¸ºå¢åŠ å¯†ç ï¼Œå½“ç”¨æˆ·å¯†ç å­˜åœ¨æ—¶å³ä¸ºä¿®æ”¹å¯†ç ã€‚</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost home]<span class="comment"># useradd password</span></span><br><span class="line">[root@localhost home]<span class="comment"># tail -1 /etc/passwd</span></span><br><span class="line">password:x:2303:2303::/home/password:/bin/bash</span><br><span class="line">[root@localhost home]<span class="comment"># tail -1 /etc/shadow</span></span><br><span class="line">password:!!:18701:0:99999:7:::</span><br><span class="line">[root@localhost home]<span class="comment"># passwd password</span></span><br><span class="line">Changing password <span class="keyword">for</span> user password.</span><br><span class="line">New password: </span><br><span class="line">BAD PASSWORD: The password is a palindrome</span><br><span class="line">Retype new password: </span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line">[root@localhost home]<span class="comment"># tail -1 /etc/passwd</span></span><br><span class="line">password:x:2303:2303::/home/password:/bin/bash</span><br><span class="line">[root@localhost home]<span class="comment"># tail -1 /etc/shadow</span></span><br><span class="line">password:$6$.EmM.4Bl<span class="variable">$f</span>.LimfvMsxxFZq6yFklfyk08JKQORdQovlk2a2dtrpkP31lAMLQpezFqLheBYOTm4Sur9aAqZlC/6MN6wHFBM1:18701:0:99999:7:::</span><br><span class="line">[root@localhost home]<span class="comment"># </span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å…äº¤äº’ä¿®æ”¹å¯†ç </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost home]<span class="comment"># echo &quot;123&quot; | passwd --stdin dayu</span></span><br><span class="line">Changing password <span class="keyword">for</span> user dayu.</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="ç”¨æˆ·ç»„"><a href="#ç”¨æˆ·ç»„" class="headerlink" title="ç”¨æˆ·ç»„"></a>ç”¨æˆ·ç»„</h1><blockquote>
<p>å°±ç±»ä¼¼äºç­çº§ï¼Œæ˜¯æŸä¸ªåŒæƒé™ç”¨æˆ·çš„é›†åˆã€‚</p>
</blockquote>
<h2 id="åˆ›å»ºç»„"><a href="#åˆ›å»ºç»„" class="headerlink" title="åˆ›å»ºç»„"></a>åˆ›å»ºç»„</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost home]<span class="comment"># groupadd group2</span></span><br><span class="line">[root@localhost home]<span class="comment"># tail -1 /etc/group</span></span><br><span class="line">group2:x:2304:</span><br><span class="line">[root@localhost home]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<ul>
<li>æŒ‡å®šgid</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost home]<span class="comment"># groupadd -g 2204 group3</span></span><br><span class="line">[root@localhost home]<span class="comment"># tail -1 /etc/group</span></span><br><span class="line">group3:x:2204:</span><br></pre></td></tr></table></figure>

<ul>
<li>åˆ›å»ºç³»ç»Ÿç»„</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost home]<span class="comment"># groupadd -r group4</span></span><br><span class="line">[root@localhost home]<span class="comment"># tail -1 /etc/group</span></span><br><span class="line">group4:x:996:</span><br></pre></td></tr></table></figure>

<h2 id="ä¿®æ”¹ç»„"><a href="#ä¿®æ”¹ç»„" class="headerlink" title="ä¿®æ”¹ç»„"></a>ä¿®æ”¹ç»„</h2><ul>
<li><p>ä¿®æ”¹åç§°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost home]<span class="comment"># tail -8 /etc/group</span></span><br><span class="line">girl:x:2001:</span><br><span class="line">[root@localhost home]<span class="comment"># groupmod -n boy girl</span></span><br><span class="line">[root@localhost home]<span class="comment"># tail -8 /etc/group</span></span><br><span class="line">boy:x:2001:</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹gid</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost home]<span class="comment"># groupmod -g 2021 boy</span></span><br><span class="line">[root@localhost home]<span class="comment"># tail -8 /etc/group</span></span><br><span class="line">boy:x:2021:</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="åˆ é™¤ç»„"><a href="#åˆ é™¤ç»„" class="headerlink" title="åˆ é™¤ç»„"></a>åˆ é™¤ç»„</h2><blockquote>
<p>ç”¨æˆ·ç»„åœ¨ç³»ç»Ÿä¸­åˆ é™¤ï¼Œå¦‚æœä¸€ä¸ªç»„è¢«ç”¨æˆ·å ç”¨åˆ™ä¸èƒ½åˆ é™¤ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost home]<span class="comment"># groupdel group4</span></span><br><span class="line">[root@localhost home]<span class="comment"># tail -8 /etc/group</span></span><br><span class="line">dajige:x:1003:</span><br><span class="line">abc:x:2000:</span><br><span class="line">xiaoyu:x:2002:</span><br><span class="line">group1:x:2003:root</span><br><span class="line">password:x:2303:</span><br><span class="line">group2:x:2304:</span><br><span class="line">group3:x:2204:</span><br><span class="line">boy:x:2021:</span><br><span class="line">[root@localhost home]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨ï¼šç”¨æˆ·è¢«åˆ é™¤ï¼Œç”¨æˆ·åŸºæœ¬ç»„ä¹Ÿä¼šè¢«åˆ é™¤</span></span><br><span class="line">[root@localhost home]<span class="comment"># useradd test-group-del</span></span><br><span class="line">[root@localhost home]<span class="comment"># tail -1 /etc/passwd</span></span><br><span class="line">test-group-del:x:2304:2305::/home/test-group-del:/bin/bash</span><br><span class="line">[root@localhost home]<span class="comment"># tail -1 /etc/group</span></span><br><span class="line">test-group-del:x:2305:</span><br><span class="line">[root@localhost home]<span class="comment"># userdel -r test-group-del</span></span><br><span class="line">[root@localhost home]<span class="comment"># tail -1 /etc/passwd</span></span><br><span class="line">password:x:2303:2303::/home/password:/bin/bash</span><br><span class="line">[root@localhost home]<span class="comment"># tail -1 /etc/group</span></span><br><span class="line">boy:x:2021:</span><br><span class="line">[root@localhost home]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<h2 id="ç»„æˆå‘˜ç®¡ç†"><a href="#ç»„æˆå‘˜ç®¡ç†" class="headerlink" title="ç»„æˆå‘˜ç®¡ç†"></a>ç»„æˆå‘˜ç®¡ç†</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ ä¸€ä¸ªç»„åˆ°ç”¨æˆ·</span></span><br><span class="line">[root@localhost home]<span class="comment"># useradd gtest</span></span><br><span class="line">[root@localhost home]<span class="comment"># vim /etc/group</span></span><br><span class="line">[root@localhost home]<span class="comment"># id gtest</span></span><br><span class="line">uid=2304(gtest) gid=2305(gtest) groups=2305(gtest),2204(group3)</span><br><span class="line">[root@localhost home]<span class="comment"># gpasswd -a gtest group2</span></span><br><span class="line">Adding user gtest to group group2</span><br><span class="line">[root@localhost home]<span class="comment"># id gtest</span></span><br><span class="line">uid=2304(gtest) gid=2305(gtest) groups=2305(gtest),2304(group2),2204(group3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å¤šä¸ªç»„åˆ°ç”¨æˆ·</span></span><br><span class="line">[root@localhost home]<span class="comment"># gpasswd -M gtest,root,dayu group</span></span><br><span class="line">gpasswd: group <span class="string">&#x27;group&#x27;</span> does not exist <span class="keyword">in</span> /etc/group</span><br><span class="line">[root@localhost home]<span class="comment"># gpasswd -M gtest,root,dayu group3</span></span><br><span class="line">[root@localhost home]<span class="comment"># id root</span></span><br><span class="line">uid=0(root) gid=0(root) groups=0(root),2000(abc),2003(group1),2204(group3)</span><br><span class="line">[root@localhost home]<span class="comment"># id dayu</span></span><br><span class="line">uid=2302(dayu) gid=2003(group1) groups=2003(group1),0(root),1000(oldboy),2204(group3)</span><br><span class="line">[root@localhost home]<span class="comment"># id gtest</span></span><br><span class="line">uid=2304(gtest) gid=2305(gtest) groups=2305(gtest),2304(group2),2204(group3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºä¸€ä¸ªç»„æ·»åŠ ç»„é•¿(ç»„é•¿æœ‰æƒé™å‘ç»„å†…æ·»åŠ ç”¨æˆ·ï¼Œå…¶ä»–ç”¨æˆ·[é™¤rootå¤–]æ²¡æœ‰æƒé™æ·»åŠ ç”¨æˆ·åˆ°è¯¥ç»„)</span></span><br><span class="line">[root@localhost ~]<span class="comment"># gpasswd -A dayu group3</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cat /etc/gshadow</span></span><br><span class="line">group3:!:dayu:gtest,dayu,oldboy</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»„æƒé™</span></span><br><span class="line">[root@localhost ~]<span class="comment"># id dayu</span></span><br><span class="line">uid=2302(dayu) gid=2003(group1) groups=2003(group1),1000(oldboy),2204(group3)</span><br><span class="line">[root@localhost ~]<span class="comment"># chown .group3 /tmp/12.txt </span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l /tmp/12.txt</span></span><br><span class="line">-rw-r--r-- 1 root group3 4 Mar 15 11:35 /tmp/12.txt</span><br><span class="line">[root@localhost ~]<span class="comment"># chmod g+w /tmp/12.txt</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls -l /tmp/12.txt</span></span><br><span class="line">-rw-rw-r-- 1 root group3 4 Mar 15 11:35 /tmp/12.txt</span><br><span class="line">[root@localhost ~]<span class="comment"># su - dayu</span></span><br><span class="line">Last login: Mon Mar 15 11:37:05 CST 2021 on pts/3</span><br><span class="line">[dayu@localhost ~]$ <span class="built_in">echo</span> <span class="string">&quot;456&quot;</span> &gt; /tmp/12.txt </span><br><span class="line">[dayu@localhost ~]$ cat /tmp/12.txt</span><br><span class="line">456</span><br><span class="line">[dayu@localhost ~]$ </span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--sudoå’Œsu</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day11-sudo%E4%B8%8Esu/sudo%20and%20su/</url>
    <content><![CDATA[<h1 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h1><blockquote>
<p>ç”¨äºæ™®é€šç”¨æå‡æƒé™çš„ã€‚</p>
</blockquote>
<ul>
<li><p>ç›¸å…³çš„æ–‡ä»¶ï¼š<code>/etc/sudoers</code></p>
</li>
<li><p>æ£€æŸ¥<code>/etc/sudoers</code>æ˜¯å¦ä¿®æ”¹æ­£ç¡®ï¼švisudo -c</p>
</li>
<li><p>sudoersæ–‡ä»¶æ ¼å¼</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tom       ALL=           (ALL)          ALL</span><br><span class="line">ç”¨æˆ·åç§°   æ‰€æœ‰æœºå™¨å¯ç™»é™†    æ‰€æœ‰IPæˆ–ä¸»æœºå   æ‰€æœ‰çš„æŒ‡ä»¤</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŒ‡ä»¤ç¼–å†™æ ¼å¼</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¿…é¡»å†™å…¨è·¯å¾„ï¼šwhichæŸ¥çœ‹å‘½ä»¤å…¨è·¯å¾„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## åªæ”¯æŒvimå‘½ä»¤ææƒ</span></span><br><span class="line">xianchen ALL=(ALL)  /usr/bin/vim</span><br><span class="line"></span><br><span class="line"><span class="comment">## æ”¯æŒæ‰€æœ‰çš„å‘½ä»¤ææƒ</span></span><br><span class="line">tom ALL=(ALL)  ALL</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸æ”¯æŒæŸä¸ªå‘½ä»¤ææƒ</span></span><br><span class="line">tom ALL=(ALL) ALL, !/usr/bin/vim</span><br><span class="line"></span><br><span class="line"><span class="comment">## ä¸æ”¯æŒæŸä¸ªå‘½ä»¤çš„éƒ¨åˆ†åŠŸèƒ½</span></span><br><span class="line">xiaochen ALL=(ALL)   ALL, !/usr/bin/vim /root/123.txt</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="su"><a href="#su" class="headerlink" title="su"></a>su</h1><ul>
<li><p>su - xxx  å’Œ su xxxä¹‹é—´åŒºåˆ«</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1ã€su - xxx ï¼šç›¸å½“äºåˆ‡æ¢ä¸€ä¸ªçª—å£ï¼Œsu xxx ä»…ä»…åˆ‡æ¢äº†ç”¨æˆ·</span><br><span class="line"></span><br><span class="line">2ã€su - xxx ï¼š åˆ‡æ¢ç”¨æˆ·æ‰§è¡Œçš„ç³»ç»Ÿæ–‡ä»¶è¦å¤šäº su xxx</span><br><span class="line"></span><br><span class="line">3ã€su - xxx æ˜¯ç™»å½•</span><br><span class="line">   su  xxx  åˆ‡æ¢ç”¨æˆ·</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--è™šæ‹Ÿæœºå®‰è£…</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day01-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="day01-è¯¾å ‚ç¬”è®°"><a href="#day01-è¯¾å ‚ç¬”è®°" class="headerlink" title="day01 : è¯¾å ‚ç¬”è®°"></a>day01 : è¯¾å ‚ç¬”è®°</h1><h2 id="å®‰è£…ç³»ç»Ÿ"><a href="#å®‰è£…ç³»ç»Ÿ" class="headerlink" title="å®‰è£…ç³»ç»Ÿ"></a>å®‰è£…ç³»ç»Ÿ</h2><p><strong>1ã€å®‰è£…è™šæ‹Ÿæœº</strong></p>
<p><img src="/.%5Cassets%5Cimage-20210302121236930.png" alt="image-20210302121236930"></p>
<p>è§£å‹ä¸Šè¿°è½¯ä»¶ï¼Œåˆ›å»ºvmware.exeå¿«æ·æ–¹å¼ï¼Œç„¶åç”¨å¿«æ·æ–¹å¼æ‰“å¼€ã€‚</p>
<p><img src="/.%5Cassets%5Cimage-20210302121408360.png" alt="image-20210302121408360"></p>
<p><strong>2ã€åˆ›å»ºè™šæ‹Ÿæœº</strong></p>
<p><img src="/.%5Cassets%5Cimage-20210302121456338.png" alt="image-20210302121456338"></p>
<p><img src="/.%5Cassets%5Cimage-20210302121550128.png" alt="image-20210302121550128"></p>
<p><img src="/.%5Cassets%5Cimage-20210302121622000.png" alt="image-20210302121622000"></p>
<p><img src="/.%5Cassets%5Cimage-20210302121745568.png" alt="image-20210302121745568"></p>
<p><img src="/.%5Cassets%5Cimage-20210302122035359.png" alt="image-20210302122035359"></p>
<p><img src="/.%5Cassets%5Cimage-20210302122256831.png" alt="image-20210302122256831"></p>
<p><img src="/.%5Cassets%5Cimage-20210302122359568.png" alt="image-20210302122359568"></p>
<p><img src="/.%5Cassets%5Cimage-20210302122603313.png" alt="image-20210302122603313"></p>
<p><img src="/.%5Cassets%5Cimage-20210302122657199.png" alt="image-20210302122657199"></p>
<p><img src="/.%5Cassets%5Cimage-20210302123826623.png" alt="image-20210302123826623"></p>
<p><img src="/.%5Cassets%5Cimage-20210302124229475.png" alt="image-20210302124229475"></p>
<p><img src="/.%5Cassets%5Cimage-20210302124308081.png" alt="image-20210302124308081"></p>
<p><img src="/.%5Cassets%5Cimage-20210302124327456.png" alt="image-20210302124327456"></p>
<p><img src="/.%5Cassets%5Cimage-20210302124404318.png" alt="image-20210302124404318"></p>
<p><img src="/.%5Cassets%5Cimage-20210302124713502.png" alt="image-20210302124713502"></p>
<p><img src="/.%5Cassets%5Cimage-20210302124741038.png" alt="image-20210302124741038"></p>
<p><img src="/.%5Cassets%5Cimage-20210302125049653.png" alt="image-20210302125049653"></p>
]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--æ‰“åŒ…ä¸å‹ç¼©</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day08-%E6%89%93%E5%8C%85%E4%B8%8E%E5%8E%8B%E7%BC%A9/%E6%89%93%E5%8C%85%E4%B8%8E%E5%8E%8B%E7%BC%A9%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="æ‰“åŒ…å’Œå‹ç¼©"><a href="#æ‰“åŒ…å’Œå‹ç¼©" class="headerlink" title="æ‰“åŒ…å’Œå‹ç¼©"></a>æ‰“åŒ…å’Œå‹ç¼©</h1><blockquote>
<p>å°†æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹åˆå¹¶æˆä¸€ä¸ªåŒ…ï¼Œç„¶åé€šè¿‡å‹ç¼©ç®—æ³•è¿›è¡Œæ•°æ®å‹ç¼©ï¼Œå‡å°åŒ…çš„ä½“ç§¯ï¼Œæ–¹ä¾¿ç½‘ç»œä¼ è¾“ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">windowsï¼š</span><br><span class="line">	zip</span><br><span class="line">	rar</span><br><span class="line"></span><br><span class="line">linux:</span><br><span class="line">	zip</span><br><span class="line">	tar</span><br><span class="line">	gz</span><br><span class="line">	bz2</span><br><span class="line">	tar.gz</span><br><span class="line">	tar.bz2</span><br><span class="line"></span><br><span class="line">å‹ç¼©ç®—æ³•ï¼š</span><br><span class="line">	gzip</span><br><span class="line">	bzip2</span><br></pre></td></tr></table></figure>

<h2 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h2><blockquote>
<p>æ˜¯ä¸€ä¸ªWindowså’ŒLinuxä¸­å¸¸ç”¨æ‰“åŒ…å‹ç¼©å·¥å…·ï¼Œæ”¯æŒçš„å‹ç¼©ç®—æ³•æ˜¯zipã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">zipå·¥å…·éœ€è¦å®‰è£…</span><br><span class="line">	yum install zip unzip -y</span><br></pre></td></tr></table></figure>

<h3 id="zipå‹ç¼©ä¸€ä¸ªæ–‡ä»¶"><a href="#zipå‹ç¼©ä¸€ä¸ªæ–‡ä»¶" class="headerlink" title="zipå‹ç¼©ä¸€ä¸ªæ–‡ä»¶"></a>zipå‹ç¼©ä¸€ä¸ªæ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼</span></span><br><span class="line">	zip [å‚æ•°] å‹ç¼©åŒ…åç§°  æ–‡ä»¶è·¯å¾„</span><br><span class="line"></span><br><span class="line">[root@abc ~]<span class="comment"># zip 123.zip 123.log </span></span><br><span class="line">  adding: 123.log (deflated 87%)</span><br><span class="line">[root@abc ~]<span class="comment"># ls -l</span></span><br><span class="line">total 4732</span><br><span class="line">-rw-r--r--  1 root root  646165 Mar  9 10:31 123.log</span><br><span class="line">-rw-r--r--  1 root root   85296 Mar 11 11:58 123.zip</span><br></pre></td></tr></table></figure>

<h3 id="zipå‹ç¼©æ–‡ä»¶å¤¹"><a href="#zipå‹ç¼©æ–‡ä»¶å¤¹" class="headerlink" title="zipå‹ç¼©æ–‡ä»¶å¤¹"></a>zipå‹ç¼©æ–‡ä»¶å¤¹</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># éœ€è¦ä¸€ä¸ª-rå‚æ•°å»é€’å½’å‹ç¼©æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰å†…å®¹</span></span><br><span class="line">[root@abc ~]<span class="comment"># zip -r dir.zip dir/</span></span><br><span class="line">  adding: dir/ (stored 0%)</span><br><span class="line">  adding: dir/one/ (stored 0%)</span><br><span class="line">  adding: dir/123.log (deflated 87%)</span><br></pre></td></tr></table></figure>

<h3 id="zipçš„é™é»˜è¾“å‡º"><a href="#zipçš„é™é»˜è¾“å‡º" class="headerlink" title="zipçš„é™é»˜è¾“å‡º"></a>zipçš„é™é»˜è¾“å‡º</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -qï¼šå‚æ•°å°±æ˜¯ä¸è¾“å‡ºä»»ä½•æ‰“åŒ…ä¿¡æ¯</span></span><br><span class="line">[root@abc opt]<span class="comment"># zip -r -q etc.zip /etc/</span></span><br><span class="line">[root@abc opt]<span class="comment"># ls -l</span></span><br><span class="line">total 14200</span><br><span class="line">-rw-r--r-- 1 root root 13674457 Mar 11 12:15 etc.zip</span><br></pre></td></tr></table></figure>

<h3 id="zipè§£å‹å‘½ä»¤ï¼ˆunzipï¼‰"><a href="#zipè§£å‹å‘½ä»¤ï¼ˆunzipï¼‰" class="headerlink" title="zipè§£å‹å‘½ä»¤ï¼ˆunzipï¼‰"></a>zipè§£å‹å‘½ä»¤ï¼ˆunzipï¼‰</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼</span></span><br><span class="line">	unzip [å‚æ•°] å‹ç¼©åŒ…è·¯å¾„</span><br><span class="line"></span><br><span class="line"><span class="comment"># unzipè§£å‹å‘½ä»¤åªèƒ½è§£å‹ç”±zipæ‰“åŒ…çš„å‹ç¼©æ–‡ä»¶</span></span><br><span class="line">[root@abc ~]<span class="comment"># unzip dir.zip </span></span><br><span class="line">Archive:  dir.zip</span><br><span class="line">  inflating: dir/123.log             </span><br><span class="line">[root@abc ~]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¶ä»–å‹ç¼©åŒ…ç”±unzipè§£å‹æ—¶éšå³æŠ¥é”™ã€‚</span></span><br><span class="line">[root@abc opt]<span class="comment"># unzip nginx-.tar.gz</span></span><br><span class="line">Archive:  nginx-.tar.gz</span><br><span class="line">  End-of-central-directory signature not found.  Either this file is not</span><br><span class="line">  a zipfile, or it constitutes one disk of a multi-part archive.  In the</span><br><span class="line">  latter <span class="keyword">case</span> the central directory and zipfile comment will be found on</span><br><span class="line">  the last disk(s) of this archive.</span><br><span class="line">unzip:  cannot find zipfile directory <span class="keyword">in</span> one of nginx-.tar.gz or</span><br><span class="line">        nginx-.tar.gz.zip, and cannot find nginx-.tar.gz.ZIP, period.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å‹ç¼©åŒ…ä¸­å‹ç¼©é‚£äº›å†…å®¹ï¼Œä¸è§£å‹ï¼Ÿ</span></span><br><span class="line"><span class="comment"># åªæŸ¥çœ‹å‹ç¼©åŒ…å†…å®¹ä¸è§£å‹éœ€è¦ä½¿ç”¨ -l å‚æ•°</span></span><br><span class="line">[root@abc opt]<span class="comment"># unzip -l dir.zip </span></span><br><span class="line">Archive:  dir.zip</span><br><span class="line">  Length      Date    Time    Name</span><br><span class="line">---------  ---------- -----   ----</span><br><span class="line">        0  03-11-2021 12:04   dir/</span><br><span class="line">---------                     -------</span><br><span class="line">        0                     1 file</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å‹åˆ°æŒ‡å®šç›®å½•ï¼ˆ-dï¼‰</span></span><br><span class="line">[root@abc ~]<span class="comment"># unzip -d /root/  etc.zip </span></span><br><span class="line">[root@abc opt]<span class="comment"># cd /root/</span></span><br><span class="line">[root@abc ~]<span class="comment"># ls</span></span><br><span class="line">]        anaconda-ks.cfg  dir.zip  index.html           test.pdf.gz  xxxeth0xxx           ç³»ç»Ÿä¼˜åŒ–.md</span><br><span class="line">123.log  demo.txt         etc      nginx-0.1.22.tar.gz  test.txt     ä¸Šä¼ ä¸ä¸‹è½½.md</span><br><span class="line">123.zip  dir              eth0xxx  <span class="built_in">test</span>                 xxxeth0      æ–‡ä»¶ç®¡ç†_(é«˜çº§).pdf</span><br><span class="line"></span><br><span class="line"><span class="comment"># é™é»˜è¾“å‡º(-q)</span></span><br><span class="line">[root@abc ~]<span class="comment"># rm -rf etc</span></span><br><span class="line">[root@abc ~]<span class="comment"># unzip -q -d /root/ /opt/etc.zip </span></span><br><span class="line">[root@abc ~]<span class="comment"># ls -l</span></span><br><span class="line">total 4828</span><br><span class="line">drwxr-xr-x  91 root root    8192 Mar 11 11:16 etc</span><br></pre></td></tr></table></figure>

<h2 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h2><blockquote>
<p>tarå‹ç¼©æ”¯æŒå¤šç§å‹ç¼©ç®—æ³•</p>
<p>tar.gz   gzip (ç”¨çš„æœ€å¤š)</p>
<p>tar.bz2 bzip2</p>
</blockquote>
<h3 id="gzip"><a href="#gzip" class="headerlink" title="gzip"></a>gzip</h3><blockquote>
<p>é€šè¿‡gzipå‹ç¼©ç®—æ³•ï¼Œå°†æ–‡ä»¶å‹ç¼©ä¸€å®šä½“ç§¯ï¼Œæœ‰åˆ©äºä¼ è¾“, ä¸æ”¯æŒæ‰“åŒ…</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc ~]<span class="comment"># ls -l</span></span><br><span class="line">total 4828</span><br><span class="line">-rw-r--r--   1 root root  244977 Mar 10 12:12 index.html</span><br><span class="line">[root@abc ~]<span class="comment"># gzip index.html </span></span><br><span class="line">[root@abc ~]<span class="comment"># ls -l</span></span><br><span class="line">total 4612</span><br><span class="line">-rw-r--r--   1 root root   22652 Mar 10 12:12 index.html.gz</span><br></pre></td></tr></table></figure>

<h4 id="gzipå‹ç¼©ä¸€ä¸ªç›®å½•"><a href="#gzipå‹ç¼©ä¸€ä¸ªç›®å½•" class="headerlink" title="gzipå‹ç¼©ä¸€ä¸ªç›®å½•"></a>gzipå‹ç¼©ä¸€ä¸ªç›®å½•</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc etc]<span class="comment"># gzip -r /etc</span></span><br><span class="line">[root@abc etc]<span class="comment"># ls </span></span><br><span class="line">abrt                        GREP_COLORS.gz               my.cnf.d                 security</span><br><span class="line">adjtime.gz                  groff                        my.cnf.gz                selinux</span><br><span class="line">aliases.db.gz               group-.gz                    NetworkManager           services.gz</span><br><span class="line">aliases.gz                  group.gz                     networks.gz              sestatus.conf.gz</span><br><span class="line">alternatives                grub2.cfg                    nsswitch.conf.bak.gz     sgml</span><br><span class="line">anacrontab.gz               grub.d                       nsswitch.conf.gz         shadow</span><br></pre></td></tr></table></figure>

<h3 id="gzipè§£å‹-d"><a href="#gzipè§£å‹-d" class="headerlink" title="gzipè§£å‹(-d)"></a>gzipè§£å‹(-d)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc ~]<span class="comment"># ls -l</span></span><br><span class="line">-rw-r--r--   1 0 0   22652 Mar 10 12:12 index.html.gz</span><br><span class="line">[root@abc ~]<span class="comment"># gzip -d index.html.gz </span></span><br><span class="line">[root@abc ~]<span class="comment"># ls -l</span></span><br><span class="line">total 4828</span><br><span class="line">-rw-r--r--   1 0 0  244977 Mar 10 12:12 index.html</span><br></pre></td></tr></table></figure>

<h3 id="bzip2"><a href="#bzip2" class="headerlink" title="bzip2"></a>bzip2</h3><blockquote>
<p>ä½¿ç”¨bzip2 å‹ç¼©ç®—æ³•æ¥å‹ç¼©ä¸€å®šä½“ç§¯çš„æ–‡ä»¶ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc ~]<span class="comment"># ls -l</span></span><br><span class="line">total 4828</span><br><span class="line">-rw-r--r--   1 root root  646165 Mar  9 10:31 123.log     </span><br><span class="line">[root@abc ~]<span class="comment"># bzip2 123.log </span></span><br><span class="line">[root@abc ~]<span class="comment"># ls -l</span></span><br><span class="line">total 4240</span><br><span class="line">-rw-r--r--   1 root root       0 Mar 10 12:04 ]</span><br><span class="line">-rw-r--r--   1 root root   42210 Mar  9 10:31 123.log.bz2</span><br></pre></td></tr></table></figure>

<h3 id="bzip2è§£å‹ï¼ˆ-dï¼‰"><a href="#bzip2è§£å‹ï¼ˆ-dï¼‰" class="headerlink" title="bzip2è§£å‹ï¼ˆ-dï¼‰"></a>bzip2è§£å‹ï¼ˆ-dï¼‰</h3><blockquote>
<p>bzip2è§£å‹æ˜¯é’ˆå¯¹äºbzip2å‹ç¼©çš„å‹ç¼©åŒ…æ¥è¿›è¡Œè§£å‹ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc ~]<span class="comment"># ls -l</span></span><br><span class="line">total 4240</span><br><span class="line">-rw-r--r--   1 root root   42210 Mar  9 10:31 123.log.bz2</span><br><span class="line">[root@abc ~]<span class="comment"># bzip2 -d 123.log.bz2 </span></span><br><span class="line">[root@abc ~]<span class="comment"># ls -l</span></span><br><span class="line">total 4828</span><br><span class="line">-rw-r--r--   1 root root  646165 Mar  9 10:31 123.log</span><br></pre></td></tr></table></figure>

<h3 id="tar-1"><a href="#tar-1" class="headerlink" title="tar"></a>tar</h3><blockquote>
<p>tarå…¶å®æ˜¯ä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œä¸å…·å¤‡å‹ç¼©åŠŸèƒ½ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨å‚æ•°è°ƒç”¨å‹ç¼©å·¥å…·æ¥è¿›è¡Œè§£å‹ã€‚</p>
</blockquote>
<h4 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h4><ul>
<li><p>-c : åˆ›å»ºå‹ç¼©åŒ…</p>
</li>
<li><p>-f : æŒ‡å®šå‹ç¼©åŒ…åç§°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc ~]<span class="comment"># tar -c -f test.tar 123.log </span></span><br><span class="line">[root@abc ~]<span class="comment"># ls -l</span></span><br><span class="line">total 5468</span><br><span class="line">-rw-r--r--   1 root root  655360 Mar 11 15:49 test.tar</span><br></pre></td></tr></table></figure>
</li>
<li><p>-z ï¼š æŒ‡å®šä½¿ç”¨gzipå‹ç¼©å·¥å…·è¿›è¡Œå‹ç¼©</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc ~]<span class="comment"># tar  -c -z -f test-one.tar 123.log </span></span><br><span class="line">[root@abc ~]<span class="comment"># ls -l </span></span><br><span class="line">total 5084</span><br><span class="line">-rw-r--r--   1 root root   85279 Mar 11 15:56 test-one.tar</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨ï¼šä½¿ç”¨-zå‚æ•°ï¼Œä¸ä¼šè‡ªåŠ¨æ·»åŠ .gzåç¼€</span></span><br><span class="line"></span><br><span class="line">[root@abc ~]<span class="comment"># tar -c -z -f anaconda.tar.gz  anaconda-ks.cfg </span></span><br><span class="line">[root@abc ~]<span class="comment"># ls -l</span></span><br><span class="line">total 5084</span><br><span class="line">-rw-r--r--   1 root root    1010 Mar 11 15:58 anaconda.tar.gz</span><br></pre></td></tr></table></figure>
</li>
<li><p>-j : æŒ‡å®šä½¿ç”¨bzip2å‹ç¼©å·¥å…·è¿›è¡Œå‹ç¼©</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc ~]<span class="comment"># tar -c -j -f 123-bask-one.tar 123.log </span></span><br><span class="line">[root@abc ~]<span class="comment"># ls -l</span></span><br><span class="line">total 5172</span><br><span class="line">-rw-r--r--   1 root root   42328 Mar 11 16:00 123-bak.tar.bz2</span><br><span class="line">-rw-r--r--   1 root root   42328 Mar 11 16:01 123-bask-one.tar</span><br></pre></td></tr></table></figure>
</li>
<li><p>-J : æŒ‡å®šä½¿ç”¨xzå‹ç¼©å·¥å…·è¿›è¡Œå‹ç¼©</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc test-tar]<span class="comment"># tar -c -J  -f etc.tar.xz /etc/</span></span><br><span class="line">[root@abc ~]<span class="comment"># ls -l</span></span><br><span class="line">-rw-r--r-- 1 root root 9493376 Mar 11 17:00 etc.tar.xz</span><br></pre></td></tr></table></figure>
</li>
<li><p>-t : æŸ¥çœ‹å‹ç¼©åŒ…å†…å®¹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc ~]<span class="comment"># tar -t -f 123-bak.tar.bz2 </span></span><br><span class="line">123.log</span><br><span class="line">[root@abc ~]<span class="comment"># </span></span><br></pre></td></tr></table></figure>
</li>
<li><p>-v ï¼š æ˜¾ç¤ºå‹ç¼©åŒ…å‹ç¼©è¿‡ç¨‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc ~]<span class="comment"># tar -x -v -f etc.tar -C /opt/</span></span><br><span class="line">/etc/centos-release</span><br><span class="line">/etc/DIR_COLORS.lightbgcolor</span><br><span class="line">/etc/libaudit.conf</span><br><span class="line">/etc/mail.rc</span><br></pre></td></tr></table></figure>
</li>
<li><p>-P : å…è®¸ä½¿ç”¨ç»å¯¹è·¯å¾„è¿›è¡Œæ‰“åŒ…</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc ~]<span class="comment"># tar -c -P -f 123-three.tar /etc/passwd</span></span><br><span class="line">[root@abc ~]<span class="comment"># tar -c -f 123-three.tar /etc/passwd</span></span><br><span class="line">tar: Removing leading `/<span class="string">&#x27; from member names</span></span><br><span class="line"><span class="string">[root@abc ~]# </span></span><br></pre></td></tr></table></figure>
</li>
<li><p>-x ï¼š è§£å‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># tarè§£å‹æ˜¯æŒ‰ç…§åŸæ¥çš„è·¯å¾„è¿›è¡Œè§£å‹</span></span><br><span class="line">[root@abc <span class="built_in">test</span>]<span class="comment"># tar -x -f etc.tar </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># tarä¼šè‡ªåŠ¨è¯†åˆ«å‹ç¼©åŠŸèƒ½</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>-C ï¼š æŒ‡å®šè§£å‹è·¯å¾„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc ~]<span class="comment"># tar -x -f etc.tar -C /opt/</span></span><br><span class="line">tar: Removing leading `/<span class="string">&#x27; from member names</span></span><br><span class="line"><span class="string">[root@abc ~]# cd /opt/</span></span><br><span class="line"><span class="string">[root@abc opt]# ls</span></span><br><span class="line"><span class="string">abc23  dir  dir.zip  etc  nginx-0.1.22.tar.gz  nginx-.tar.gz  xxx</span></span><br><span class="line"><span class="string">[root@abc opt]# </span></span><br></pre></td></tr></table></figure>
</li>
<li><p>â€“exclude : æ’é™¤æŸäº›æ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc test-tar]<span class="comment"># tar -c -f abc.tar ./* --exclude=abc7 --exclude=abc5   --exclude=abc1 </span></span><br><span class="line">[root@abc test-tar]<span class="comment"># tar -t -f abc.tar </span></span><br><span class="line">./abc2</span><br><span class="line">./abc3</span><br><span class="line">./abc4</span><br><span class="line">./abc6</span><br><span class="line">./abc8</span><br><span class="line">./abc9</span><br><span class="line">[root@abc test-tar]<span class="comment"># </span></span><br></pre></td></tr></table></figure>
</li>
<li><p>â€“exclude-from : æ ¹æ®æŸä¸ªæ–‡ä»¶åˆ—è¡¨æ’é™¤å¤šä¸ªæ–‡ä»¶</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc test-tar]<span class="comment"># cat list.txt </span></span><br><span class="line">abc995</span><br><span class="line">abc996</span><br><span class="line">abc997</span><br><span class="line">abc998</span><br><span class="line">abc999</span><br><span class="line">[root@abc test-tar]<span class="comment"># tar -c -f abc.tar ./* --exclude-from=list.txt </span></span><br></pre></td></tr></table></figure>
</li>
<li><p>-h : æ‰“åŒ…è½¯è¿æ¥</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@abc test-tar]<span class="comment"># tar -c -h -f bin-h.tar /bin</span></span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">tarå‚æ•°</span><br><span class="line">	-c : åˆ›å»ºå‹ç¼©</span><br><span class="line">	-f ï¼› æŒ‡å®šå‹ç¼©åŒ…åç§°</span><br><span class="line">	-z : ä½¿ç”¨gzipå‹ç¼©å·¥å…·è¿›è¡Œå‹ç¼©</span><br><span class="line">	-j : ä½¿ç”¨bzip2å‹ç¼©å·¥å…·è¿›è¡Œå‹ç¼©</span><br><span class="line">	-J : ä½¿ç”¨xzå‹ç¼©å·¥å…·è¿›è¡Œå‹ç¼©</span><br><span class="line">	-t : æ˜¾ç¤ºå‹ç¼©åŒ…å†…å®¹ï¼Œä¸è§£å‹</span><br><span class="line">	-v : æ˜¾ç¤ºå‹ç¼©è¿‡ç¨‹</span><br><span class="line">	-P : å…è®¸ä½¿ç”¨ç»å¯¹è·¯å¾„è¿›è¡Œå‹ç¼©</span><br><span class="line">	-x : è§£å‹</span><br><span class="line">	-C : æŒ‡å®šè§£å‹è·¯å¾„</span><br><span class="line">	-h : æ‰“åŒ…è½¯è¿æ¥</span><br><span class="line">	--exclude : æ’é™¤æŸäº›æ–‡ä»¶</span><br><span class="line">	--exclude-from : æ ¹æ®æ–‡ä»¶åˆ—è¡¨æ’é™¤å¤šä¸ªæ–‡ä»¶</span><br></pre></td></tr></table></figure>





<h2 id="ä¹ é¢˜"><a href="#ä¹ é¢˜" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1.linuxä¸‹å¸¸è§çš„å‹ç¼©åŒ…ç±»å‹æœ‰å“ªäº›</span><br><span class="line">zip </span><br><span class="line">gz </span><br><span class="line">bz2 </span><br><span class="line">tar.gz </span><br><span class="line">tar.bz </span><br><span class="line">tar</span><br><span class="line"></span><br><span class="line">2.å°†/etc/hostsæ–‡ä»¶ç”¨taræ ¼å¼æ‰“åŒ…ã€‚</span><br><span class="line">tar -c -P -f hosts.tar /etc/hosts</span><br><span class="line"></span><br><span class="line">3.æŸ¥çœ‹æ‰“åŒ…ä¹‹åçš„/etc/hostsçš„æ–‡ä»¶å†…å®¹ï¼Œåœ¨ä¸è§£å‹çš„æƒ…å†µä¸‹æŸ¥çœ‹ã€‚</span><br><span class="line">tar -t -f hosts.tar</span><br><span class="line"></span><br><span class="line">4.ä½¿ç”¨taræ‰“åŒ…/var/<span class="built_in">log</span>/ç›®å½•ã€‚</span><br><span class="line">tar -c -P -f hosts.tar /var/<span class="built_in">log</span>/</span><br><span class="line"></span><br><span class="line">5.ä½¿ç”¨zipæ‰“åŒ…/etcç›®å½•ã€‚</span><br><span class="line">zip -r etc.zip /etc</span><br><span class="line"></span><br><span class="line">6.æŸ¥çœ‹/var/<span class="built_in">log</span>/abc.zipç›®å½•çš„å‹ç¼©åŒ…ä¸­æœ‰å“ªäº›å†…å®¹ã€‚</span><br><span class="line">unzip -l /var/<span class="built_in">log</span>/abc.zip</span><br><span class="line"></span><br><span class="line">7.å°†/var/<span class="built_in">log</span>/abc.zipç›®å½•è§£å‹åˆ°/optç›®å½•ä¸­ã€‚</span><br><span class="line">unzip -d /opt /var/<span class="built_in">log</span>/abc.zip</span><br><span class="line"></span><br><span class="line">10.è§£å‹/etc/abc.tar.gzç›®å½•åˆ°/optç›®å½•ä¸­ã€‚</span><br><span class="line">tar -xf /etc/abc.tar.gz -C /opt</span><br><span class="line"></span><br><span class="line">11.ç”¨zipæ‰“åŒ…/optç›®å½•ï¼Œè¦æ±‚ä¸æ˜¾ç¤ºæ‰“åŒ…è¿‡ç¨‹ã€‚</span><br><span class="line">zip -q opt.zip /opt</span><br><span class="line"></span><br><span class="line">zip [å‚æ•°] å‹ç¼©åŒ…åç§°  å‹ç¼©æ–‡ä»¶è·¯å¾„</span><br><span class="line"> </span><br><span class="line">12.æ‰“åŒ…/etc/ç›®å½•ï¼Œè¦æ±‚æ˜¯.bz2æ ¼å¼</span><br><span class="line">tar -c -j -f etc.tar /etc</span><br><span class="line"></span><br><span class="line">13.æ‰“åŒ…/var/<span class="built_in">log</span>ç›®å½•ï¼Œè¦æ±‚æ˜¯.xzæ ¼å¼</span><br><span class="line">tar -c -J -f log.tar.xz /var/<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line">14.ä½¿ç”¨tarå‘½ä»¤æ‰“åŒ…/etc/æ—¶ï¼Œä¼šå‡ºç°ä¸€ä¸ªåˆ æ ¹çš„æ“ä½œï¼Œæ€æ ·æ‰“åŒ…ä¸ä¼šè¿›è¡Œåˆ æ ¹çš„æ“ä½œ</span><br><span class="line">tar -c -P -f etc.tar /etc</span><br><span class="line"></span><br><span class="line">15.æ‰“åŒ…/etc/ç›®å½•ï¼Œè¦æ±‚ä¸æ‰“åŒ…/etc/hostsè¿™ä¸ªæ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">16.æ‰“åŒ…/etc/ç›®å½•ï¼Œè¦æ±‚ä¸æ‰“åŒ…/etc/hostså’Œ/etc/hostnameè¿™ä¸¤ä¸ªæ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">17.æ‰“åŒ…/etc/ç›®å½•ï¼Œä½†è¦æ’é™¤passwd,shadow,group,gshadow,hosts,hostnameè¿™äº›æ–‡ä»¶ã€‚(ä½ èƒ½ç”¨ä¸¤ç§æ–¹æ³•å®ç°å—)</span><br><span class="line"></span><br><span class="line">18.å·²çŸ¥/etc/grub2.cfgæ–‡ä»¶æ˜¯ä¸ªè½¯è¿æ¥æ–‡ä»¶ï¼Œåœ¨ä½ ä¸çŸ¥é“çš„æƒ…å†µä¸‹ï¼Œè¯·é—®æ€ä¹ˆæ‰“åŒ…è¯¥æ–‡ä»¶çš„çœŸå®æ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">19.æŠŠ/var/<span class="built_in">log</span>/ç›®å½•ä¸­æ‰€æœ‰.<span class="built_in">log</span>çš„æ–‡ä»¶è¿›è¡Œæ‰“åŒ…æˆä¸€ä¸ªå‹ç¼©åŒ…ï¼Œåç§°å®šä¹‰ä¸ºlog.tar.gzçš„å‹ç¼©åŒ…ã€‚</span><br><span class="line"></span><br><span class="line">20.å·²çŸ¥æ–‡ä»¶oldboy.gz,è¯·é—®åœ¨ä¸è§£å‹çš„æƒ…å†µä¸‹ï¼Œæ€æ ·æŸ¥çœ‹è¯¥æ–‡ä»¶çš„å†…å®¹ã€‚</span><br><span class="line"></span><br><span class="line">21.æ‰“åŒ…/etc/ç›®å½•ï¼Œå½“å‰æ—¶é—´æ–¹å¼çš„å‹ç¼©åŒ…:æ¯”å¦‚: 2019-12-24_etc.tar.gz</span><br><span class="line"></span><br><span class="line">22.åˆ›å»º/data/bakç›®å½•ï¼Œç„¶åå¤åˆ¶å¦‚ä¸‹æ–‡ä»¶åˆ°/data/bakç›®å½•ä¸‹</span><br><span class="line"></span><br><span class="line">23.æ¥22é¢˜ï¼Œä½¿ç”¨tarå‘½ä»¤å¯¹/data/bakç›®å½•ä¸‹çš„æ–‡ä»¶åŠç›®å½•ä»¥gzipçš„æ ¼å¼è¿›è¡Œå½’æ¡£å‹ç¼©åˆ°/dataç›®å½•ä¸‹ï¼ˆå‹ç¼©åŒ…çš„åå­—ä»¥è‡ªå·±åå­—å‘½åï¼‰</span><br><span class="line"></span><br><span class="line">24.ä½¿ç”¨tarå‘½ä»¤æŸ¥çœ‹ä¸Šé¢˜/dataç›®å½•ä¸‹å‹ç¼©åŒ…å†…çš„å†…å®¹ã€‚</span><br><span class="line"></span><br><span class="line">25.æŠŠç¬¬23é¢˜/dataç›®å½•ä¸‹çš„å‹ç¼©åŒ…ï¼Œè§£å‹åˆ°/backupç›®å½•ä¸‹</span><br><span class="line"></span><br><span class="line">26.å†æ¬¡ä½¿ç”¨tarå‘½ä»¤æŠŠ/data/bakç›®å½•ä¸‹çš„æ–‡ä»¶åŠç›®å½•ä»¥gzipçš„æ ¼å¼è¿›è¡Œå½’æ¡£å‹ç¼©åˆ°/dataç›®å½•ä¸‹ï¼Œä½†æ˜¯åœ¨è¿›è¡Œå½’æ¡£å‹ç¼©æ—¶ï¼Œæ’é™¤æ–‡ä»¶â€œsudoersâ€ï¼Œç„¶åæŸ¥çœ‹è¯¥å‹ç¼©åŒ…å†…å®¹æ˜¯å¦å­˜åœ¨æ–‡ä»¶â€œsudoersâ€ï¼ˆå‹ç¼©åŒ…åè‡ªè¡Œæ‹Ÿå®šï¼‰</span><br><span class="line"></span><br><span class="line">27.æ‰“åŒ…/etcç›®å½•ä¸‹æ‰€æœ‰æ™®é€šæ–‡ä»¶åˆ°rootç”¨æˆ·å®¶ç›®å½•ã€‚</span><br><span class="line"></span><br><span class="line">28.æ‰“åŒ…/etc/ç›®å½•åˆ°/opt/ç›®å½•ä¸‹ï¼Œåç§°è¦æ±‚ä»¥å½“å‰ä¸»æœºåå’Œipåœ°å€å‘½åï¼Œä¾‹ï¼šoldboy_10.0.0.100.tar.gz</span><br><span class="line"></span><br><span class="line">29.å¦‚ä½•ä½¿ç”¨gzipå‘½ä»¤å¯¹æ–‡ä»¶è¿›è¡Œå‹ç¼©ã€è§£å‹</span><br><span class="line"></span><br><span class="line">30.å¦‚ä½•ç”¨zipå‘½ä»¤å¯¹æ–‡ä»¶ä»¥åŠç›®å½•è¿›è¡Œå‹ç¼©ã€è§£å‹</span><br><span class="line"></span><br><span class="line">32.æ‰“åŒ…optæ•´ä¸ªç›®å½•ï¼Œå¹¶å‘½åtest_opt.tar.gz</span><br><span class="line"></span><br><span class="line">33.æŸ¥çœ‹æ‰“åŒ…å¥½çš„test_opt.tar.gzé‡Œçš„æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">34.å°†æ‰“åŒ…å¥½çš„test_opt.tar.gzå†…å®¹æŒ‡å®šè§£å‹è‡³/tmpç›®å½•</span><br><span class="line"></span><br><span class="line">35.æ‰“åŒ…etcç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä¸è¦ç›®å½•åªè¦æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">36.æ‰“åŒ…etcç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæ’é™¤passwdï¼Œshadow</span><br><span class="line"></span><br><span class="line">37.æ‰“åŒ…etcç›®å½•ä¸‹çš„æ‰€æœ‰ä»¥på¼€å¤´çš„æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">38.æ‰“åŒ…etcç›®å½•ä¸‹æ‰€æœ‰å¤§äº1Mçš„æ–‡ä»¶</span><br></pre></td></tr></table></figure>







<h2 id="ä¹ é¢˜-1"><a href="#ä¹ é¢˜-1" class="headerlink" title="ä¹ é¢˜"></a>ä¹ é¢˜</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">2.æƒé™ä¸­çš„rwx-ï¼Œæ¯ä¸ªå­—ç¬¦æ‰€ä»£è¡¨ä»€ä¹ˆæ„æ€ï¼Ÿå¯¹åº”çš„æ•°å­—æ˜¯ä»€ä¹ˆï¼Ÿ</span><br><span class="line"></span><br><span class="line">r		å¯è¯»		4</span><br><span class="line"></span><br><span class="line">w		å¯å†™		2</span><br><span class="line"></span><br><span class="line">x		å¯æ‰§è¡Œ		1</span><br><span class="line"></span><br><span class="line">-		æ²¡æœ‰æƒé™	0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3.-rwxr-xr-xï¼Œå†™å‡ºå¯¹åº”æ•°å­—æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4.-rwxr--r--ï¼Œå†™å‡ºå¯¹åº”æ•°å­—æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">5.-r-xr-x--xï¼Œå†™å‡ºå¯¹åº”æ•°å­—æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">6.-rw-r-xr-xï¼Œå†™å‡ºå¯¹åº”æ•°å­—æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">7.-r--r--r--ï¼Œå†™å‡ºå¯¹åº”æ•°å­—æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">8.-r-xr-----ï¼Œå†™å‡ºå¯¹åº”æ•°å­—æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">9.---x-w-r--ï¼Œå†™å‡ºå¯¹åº”æ•°å­—æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">10.-rwxr--rw-ï¼Œå†™å‡ºå¯¹åº”æ•°å­—æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">11.-rw-r--r--ï¼Œå†™å‡ºå¯¹åº”æ•°å­—æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">12.---xr--rwxï¼Œå†™å‡ºå¯¹åº”æ•°å­—æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">13.777ï¼Œå†™å‡ºå¯¹åº”å­—æ¯æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">14.545ï¼Œå†™å‡ºå¯¹åº”å­—æ¯æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">15.744ï¼Œå†™å‡ºå¯¹åº”å­—æ¯æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">16.600ï¼Œå†™å‡ºå¯¹åº”å­—æ¯æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">17.641ï¼Œå†™å‡ºå¯¹åº”å­—æ¯æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">18.711ï¼Œå†™å‡ºå¯¹åº”å­—æ¯æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">19.700ï¼Œå†™å‡ºå¯¹åº”å­—æ¯æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">20.555ï¼Œå†™å‡ºå¯¹åº”å­—æ¯æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">21.733ï¼Œå†™å‡ºå¯¹åº”å­—æ¯æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">22.713ï¼Œå†™å‡ºå¯¹åº”å­—æ¯æƒé™</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">23.å»ºä¸€ä¸ªç›®å½•/<span class="built_in">test</span>,æŸ¥çœ‹è¿™ä¸ªç›®å½•çš„é»˜è®¤æƒé™æ˜¯?</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">24.è¿›å…¥/<span class="built_in">test</span>ç›®å½•ä¸­,å»ºä¸€ä¸ªæ–‡ä»¶abc,æŸ¥çœ‹å…¶é»˜è®¤çš„æƒé™ä¸ºï¼Ÿ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">25.åˆ›å»ºä¸€ä¸ªæ–‡ä»¶test.txt,å¹¶å…¶å°†æƒé™æ”¹ä¸º600.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">26.å°†test.txtæ–‡ä»¶çš„æƒé™æ”¹ä¸º755.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">27.å°†test.txtæ–‡ä»¶çš„æƒé™æ”¹ä¸º000.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">28.ä¿®æ”¹test.txtæ–‡ä»¶çš„æƒé™ä¸º644.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">29.ç»™test.txtæ–‡ä»¶çš„å±ä¸»åŠ ä¸Šxæƒé™ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">30.ç»™test.txtæ–‡ä»¶çš„å…¶ä»–ç”¨æˆ·åŠ ä¸Šxæƒé™ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">31.å»é™¤test.txtæ–‡ä»¶çš„æ‰€æœ‰æ‰§è¡Œæƒé™ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">32.ç»™/<span class="built_in">test</span>ç›®å½•åŠç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™ç»Ÿä¸€æ”¹ä¸º744ã€‚</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--è½¯ä»¶åŒ…ç®¡ç†</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day12-%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/%E8%BD%AF%E4%BB%B6%E5%8C%85/</url>
    <content><![CDATA[<h1 id="è½¯ä»¶åŒ…"><a href="#è½¯ä»¶åŒ…" class="headerlink" title="è½¯ä»¶åŒ…"></a>è½¯ä»¶åŒ…</h1><ul>
<li><p>rpmåŒ…æ¥æº</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1ã€æ¥æºç½‘ç»œä¸‹è½½</span><br><span class="line">2ã€æ¥æºæœ¬åœ°ï¼šè‡ªå·±çš„é•œåƒè‡ªå¸¦çš„rpmåŒ…</span><br></pre></td></tr></table></figure>




</li>
<li><p>rpmå‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…</span></span><br><span class="line"></span><br><span class="line">rpm -ivh xxx.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment"># http://nginx.org/packages/centos/7/x86_64/RPMS/</span></span><br><span class="line"></span><br><span class="line">-v : æ˜¾ç¤ºå®‰è£…è¿‡ç¨‹</span><br><span class="line">-i ï¼šæ˜¾ç¤ºå®‰è£…åŒ…çš„è¯¦ç»†ä¿¡æ¯</span><br><span class="line">-h : å®‰è£…åŒ…å“ˆå¸Œæ ‡è®°</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½Nginx rpmå®‰è£…åŒ…çš„å…¨å</span></span><br><span class="line">[root@localhost ~]<span class="comment"># wget http://nginx.org/packages/centos/7/x86_64/RPMS/nginx-1.18.0-1.el7.ngx.x86_64.rpm</span></span><br><span class="line">--2021-03-17 12:16:47--  http://nginx.org/packages/centos/7/x86_64/RPMS/nginx-1.18.0-1.el7.ngx.x86_64.rpm</span><br><span class="line">Resolving nginx.org (nginx.org)... 52.58.199.22, 3.125.197.172, 2a05:d014:edb:5702::6, ...</span><br><span class="line">Connecting to nginx.org (nginx.org)|52.58.199.22|:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 790284 (772K) [application/x-redhat-package-manager]</span><br><span class="line">Saving to: â€˜nginx-1.18.0-1.el7.ngx.x86_64.rpmâ€™</span><br><span class="line"></span><br><span class="line">100%[====================================================&gt;] 790,284      339KB/s   <span class="keyword">in</span> 2.3s   </span><br><span class="line"></span><br><span class="line">2021-03-17 12:16:51 (339 KB/s) - â€˜nginx-1.18.0-1.el7.ngx.x86_64.rpmâ€™ saved [790284/790284]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…rpmå®‰è£…åŒ…</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -ivh nginx-1.18.0-1.el7.ngx.x86_64.rpm </span></span><br><span class="line">warning: nginx-1.18.0-1.el7.ngx.x86_64.rpm: Header V4 RSA/SHA1 Signature, key ID 7bd9bf62: NOKEY</span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]</span></span><br><span class="line">Updating / installing...</span><br><span class="line">   1:nginx-1:1.18.0-1.el7.ngx         <span class="comment">################################# [100%]</span></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Thanks <span class="keyword">for</span> using nginx!</span><br><span class="line"></span><br><span class="line">Please find the official documentation <span class="keyword">for</span> nginx here:</span><br><span class="line">* http://nginx.org/en/docs/</span><br><span class="line"></span><br><span class="line">Please subscribe to nginx-announce mailing list to get</span><br><span class="line">the most important news about nginx:</span><br><span class="line">* http://nginx.org/en/support.html</span><br><span class="line"></span><br><span class="line">Commercial subscriptions <span class="keyword">for</span> nginx are available on:</span><br><span class="line">* http://nginx.com/products/</span><br><span class="line"></span><br><span class="line">----------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment"># éªŒè¯nginxæ˜¯å¦å®‰è£…æˆåŠŸ</span></span><br><span class="line">[root@localhost ~]<span class="comment"># nginx -v</span></span><br><span class="line">nginx version: nginx/1.18.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸è½½</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -e nginx (è½¯ä»¶åŒ…åç§°)</span></span><br><span class="line">[root@localhost ~]<span class="comment"># nginx -v</span></span><br><span class="line">-bash: /usr/sbin/nginx: No such file or directory</span><br><span class="line">[root@localhost ~]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç³»ç»Ÿå½“ä¸­å®‰è£…äº†å“ªäº›rpmè½¯ä»¶åŒ…</span></span><br><span class="line">rpm -qa</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç³»ç»Ÿå½“ä¸­æ˜¯å¦å®‰è£…äº†æŸä¸ªrpmè½¯ä»¶åŒ…</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -q nginxï¼ˆè½¯ä»¶åŒ…åï¼‰</span></span><br><span class="line">nginx-1.18.0-1.el7.ngx.x86_64</span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -q safsdgsfdgfd</span></span><br><span class="line">package safsdgsfdgfd is not installed</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå·²ç»å®‰è£…è¿‡çš„rpmåŒ…è¯¦ç»†ä¿¡æ¯ã€‚</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qi nginx</span></span><br><span class="line">Name        : nginx</span><br><span class="line">Epoch       : 1</span><br><span class="line">Version     : 1.18.0</span><br><span class="line">Release     : 1.el7.ngx</span><br><span class="line">Architecture: x86_64</span><br><span class="line">Install Date: Wed 17 Mar 2021 04:18:55 PM CST</span><br><span class="line">Group       : System Environment/Daemons</span><br><span class="line">Size        : 2830028</span><br><span class="line">License     : 2-clause BSD-like license</span><br><span class="line">Signature   : RSA/SHA1, Tue 21 Apr 2020 11:19:18 PM CST, Key ID abf5bd827bd9bf62</span><br><span class="line">Source RPM  : nginx-1.18.0-1.el7.ngx.src.rpm</span><br><span class="line">Build Date  : Tue 21 Apr 2020 11:07:33 PM CST</span><br><span class="line">Build Host  : ip-10-1-17-101.eu-central-1.compute.internal</span><br><span class="line">Relocations : (not relocatable)</span><br><span class="line">Vendor      : Nginx, Inc.</span><br><span class="line">URL         : http://nginx.org/</span><br><span class="line">Summary     : High performance web server</span><br><span class="line">Description :</span><br><span class="line">nginx [engine x] is an HTTP and reverse proxy server, as well as</span><br><span class="line">a mail proxy server.</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å®‰è£…åŒ…çš„å†…å®¹</span></span><br><span class="line">[root@localhost nginx]<span class="comment"># rpm -ql nginx</span></span><br><span class="line">/etc/logrotate.d/nginx</span><br><span class="line">/etc/nginx</span><br><span class="line">/etc/nginx/conf.d</span><br><span class="line">/etc/nginx/conf.d/default.conf</span><br><span class="line">/etc/nginx/fastcgi_params</span><br><span class="line">/etc/nginx/koi-utf</span><br><span class="line">/etc/nginx/koi-win</span><br><span class="line">/etc/nginx/mime.types</span><br><span class="line">/etc/nginx/modules</span><br><span class="line">/etc/nginx/nginx.conf</span><br><span class="line">/etc/nginx/scgi_params</span><br><span class="line">/etc/nginx/uwsgi_params</span><br><span class="line">/etc/nginx/win-utf</span><br><span class="line">/etc/sysconfig/nginx</span><br><span class="line">/etc/sysconfig/nginx-debug</span><br><span class="line">/usr/lib/systemd/system/nginx-debug.service</span><br><span class="line">/usr/lib/systemd/system/nginx.service</span><br><span class="line">/usr/lib64/nginx</span><br><span class="line">/usr/lib64/nginx/modules</span><br><span class="line">/usr/libexec/initscripts/legacy-actions/nginx</span><br><span class="line">/usr/libexec/initscripts/legacy-actions/nginx/check-reload</span><br><span class="line">/usr/libexec/initscripts/legacy-actions/nginx/upgrade</span><br><span class="line">/usr/sbin/nginx</span><br><span class="line">/usr/sbin/nginx-debug</span><br><span class="line">/usr/share/doc/nginx-1.18.0</span><br><span class="line">/usr/share/doc/nginx-1.18.0/COPYRIGHT</span><br><span class="line">/usr/share/man/man8/nginx.8.gz</span><br><span class="line">/usr/share/nginx</span><br><span class="line">/usr/share/nginx/html</span><br><span class="line">/usr/share/nginx/html/50x.html</span><br><span class="line">/usr/share/nginx/html/index.html</span><br><span class="line">/var/cache/nginx</span><br><span class="line">/var/<span class="built_in">log</span>/nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹é…ç½®ä¿¡æ¯</span></span><br><span class="line">[root@localhost nginx]<span class="comment"># rpm -qc nginx</span></span><br><span class="line">/etc/logrotate.d/nginx</span><br><span class="line">/etc/nginx/conf.d/default.conf</span><br><span class="line">/etc/nginx/fastcgi_params</span><br><span class="line">/etc/nginx/koi-utf</span><br><span class="line">/etc/nginx/koi-win</span><br><span class="line">/etc/nginx/mime.types</span><br><span class="line">/etc/nginx/nginx.conf</span><br><span class="line">/etc/nginx/scgi_params</span><br><span class="line">/etc/nginx/uwsgi_params</span><br><span class="line">/etc/nginx/win-utf</span><br><span class="line">/etc/sysconfig/nginx</span><br><span class="line">/etc/sysconfig/nginx-debug</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ–‡ä»¶å¸®åŠ©ä¿¡æ¯</span></span><br><span class="line">[root@localhost nginx]<span class="comment"># rpm -qd zlib</span></span><br><span class="line">/usr/share/doc/zlib-1.2.7/ChangeLog</span><br><span class="line">/usr/share/doc/zlib-1.2.7/FAQ</span><br><span class="line">/usr/share/doc/zlib-1.2.7/README</span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qf /usr/sbin/nginx</span></span><br><span class="line">nginx-1.18.0-1.el7.ngx.x86_64</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨ -p å¯ä»¥æŸ¥çœ‹æœªå®‰è£…è½¯ä»¶åŒ…çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -qip nginx-1.18.0-1.el7.ngx.x86_64.rpm </span></span><br><span class="line">warning: nginx-1.18.0-1.el7.ngx.x86_64.rpm: Header V4 RSA/SHA1 Signature, key ID 7bd9bf62: NOKEY</span><br><span class="line">Name        : nginx</span><br><span class="line">Epoch       : 1</span><br><span class="line">Version     : 1.18.0</span><br><span class="line">Release     : 1.el7.ngx</span><br><span class="line">Architecture: x86_64</span><br><span class="line">Install Date: (not installed)</span><br><span class="line">Group       : System Environment/Daemons</span><br><span class="line">Size        : 2830028</span><br><span class="line">License     : 2-clause BSD-like license</span><br><span class="line">Signature   : RSA/SHA1, Tue 21 Apr 2020 11:19:18 PM CST, Key ID abf5bd827bd9bf62</span><br><span class="line">Source RPM  : nginx-1.18.0-1.el7.ngx.src.rpm</span><br><span class="line">Build Date  : Tue 21 Apr 2020 11:07:33 PM CST</span><br><span class="line">Build Host  : ip-10-1-17-101.eu-central-1.compute.internal</span><br><span class="line">Relocations : (not relocatable)</span><br><span class="line">Vendor      : Nginx, Inc.</span><br><span class="line">URL         : http://nginx.org/</span><br><span class="line">Summary     : High performance web server</span><br><span class="line">Description :</span><br><span class="line">nginx [engine x] is an HTTP and reverse proxy server, as well as</span><br><span class="line">a mail proxy server.</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‡çº§è½¯ä»¶åŒ…</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -Uvh nginx-1.18.0-1.el7.ngx.x86_64.rpm </span></span><br><span class="line">warning: nginx-1.18.0-1.el7.ngx.x86_64.rpm: Header V4 RSA/SHA1 Signature, key ID 7bd9bf62: NOKEY</span><br><span class="line">Preparing...                          <span class="comment">################################# [100%]</span></span><br><span class="line">Updating / installing...</span><br><span class="line">   1:nginx-1:1.18.0-1.el7.ngx         <span class="comment">################################# [ 50%]</span></span><br><span class="line">Cleaning up / removing...</span><br><span class="line">   2:nginx-1:1.14.0-1.el7_4.ngx       <span class="comment">################################# [100%]</span></span><br><span class="line">[root@localhost ~]<span class="comment"># nginx -v</span></span><br><span class="line">nginx version: nginx/1.18.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼ºåˆ¶åˆ é™¤è½¯ä»¶åŒ…--nodeps</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -e zlib --nodeps</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h2><blockquote>
<p>yumæ˜¯CentOSçš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œè‡ªåŠ¨ä¸ºæˆ‘ä»¬è§£å†³è½¯ä»¶ä¾èµ–é—®é¢˜ã€‚yumåŒ…ç®¡ç†å·¥å…·å¿…é¡»ä½¿ç”¨yumæºæŒ‡å®šè½¯ä»¶ä¸‹è½½åœ°å€å»ä¸‹è½½éœ€è¦å®‰è£…çš„è½¯ä»¶åŒ…ã€‚é…ç½®çš„è·¯å¾„æ˜¯ï¼š&#x2F;etc&#x2F;yum.repos.d</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¸…ç©ºæœ¬æœºæ‰€æœ‰çš„yumæº</span></span><br><span class="line">[root@www yum.repos.d]<span class="comment"># rm -rf /etc/yum.repos.d/*</span></span><br></pre></td></tr></table></figure>



<ul>
<li><p>yumæºå‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„yumæºåˆ—è¡¨</span></span><br><span class="line">[root@www yum.repos.d]<span class="comment"># yum repolist </span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">repo id                   repo name                                           status</span><br><span class="line">base                      <span class="string">&quot;This is local repo, and éå¸¸å±Œ&quot;</span>                    10,072</span><br><span class="line">repolist: 10,072</span><br><span class="line"></span><br><span class="line"><span class="comment"># yumæ¸…ç©ºç¼“å­˜</span></span><br><span class="line">[root@www yum.repos.d]<span class="comment"># yum clean all</span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Cleaning repos: base</span><br><span class="line">Cleaning up list of fastest mirrors</span><br><span class="line">Other repos take up 76 M of disk space (use --verbose <span class="keyword">for</span> details)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹yumç¼“å­˜</span></span><br><span class="line">[root@www yum.repos.d]<span class="comment"># yum makecache</span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>yumæºçš„æ‰§è¡ŒåŸç†</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1ã€éœ€è¦åœ¨/etc/yum.repos.dç›®å½•ä¸‹é…ç½®yumæºåœ°å€</span><br><span class="line">2ã€æ¸…ç©ºç¼“å­˜å»ºç«‹æ–°çš„ç¼“å­˜</span><br><span class="line">3ã€å®‰è£…è½¯ä»¶ï¼ˆè‡ªåŠ¨è§£å†³ä¾èµ–å…³ç³»ï¼‰</span><br></pre></td></tr></table></figure>
</li>
<li><p>yumå¸¸ç”¨çš„åŸºç¡€å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…è½¯ä»¶åŒ…çš„å‘½ä»¤</span></span><br><span class="line">yum install è½¯ä»¶åŒ…åç§°</span><br><span class="line">	-y : å…äº¤äº’å®‰è£…</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸è½½è½¯ä»¶ï¼ˆç›´æ¥å°†è½¯ä»¶çš„ä¾èµ–åŒ…ä¸€èµ·åˆ é™¤ï¼‰</span></span><br><span class="line">yum remove è½¯ä»¶åŒ…åç§°</span><br><span class="line">[root@www yum.repos.d]<span class="comment"># yum remove httpd</span></span><br><span class="line">	-y : å…äº¤äº’ç§»é™¤</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç³»ç»Ÿéœ€è¦æ›´æ–°è½¯ä»¶</span></span><br><span class="line">yum check-update</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°æ‰€æœ‰çš„éœ€è¦æ›´æ–°çš„è½¯ä»¶</span></span><br><span class="line">yum update </span><br><span class="line">	-y ï¼š å…äº¤äº’</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°æŸä¸€ä¸ªè½¯ä»¶</span></span><br><span class="line">yum update (è½¯ä»¶åŒ…åç§°)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡è£…è½¯ä»¶</span></span><br><span class="line">yum reinstall (è½¯ä»¶åŒ…åç§°)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœç´¢è½¯ä»¶åŒ…</span></span><br><span class="line">[root@www httpd]<span class="comment"># yum search ï¼ˆè½¯ä»¶åŒ…åç§°ï¼‰</span></span><br><span class="line">-------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹yumæ‰§è¡Œå†å²</span></span><br><span class="line">yum <span class="built_in">history</span></span><br><span class="line">[root@www httpd]<span class="comment"># yum history info (å†å²IDå·)</span></span><br><span class="line">[root@www httpd]<span class="comment"># yum history undo (å†å²IDå·)</span></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç³»ç»Ÿå½“ä¸­å¯æ›´æ–°çš„è½¯ä»¶åŒ…</span></span><br><span class="line">[root@www yum.repos.d]<span class="comment"># yum check-update </span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"></span><br><span class="line">postfix.x86_64                                        2:2.10.1-9.0.1.el7.centos.plus                                      centosplus</span><br><span class="line">python-perf.x86_64                                    3.10.0-1160.15.2.el7.centos.plus                                    centosplus</span><br><span class="line">[root@www yum.repos.d]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç³»ç»Ÿä¸­æœ‰å“ªäº›ä»“åº“åœ°å€</span></span><br><span class="line">yum repolist    <span class="comment"># æ­£åœ¨å¯ç”¨çš„yumä»“åº“</span></span><br><span class="line">[root@www yum.repos.d]<span class="comment"># yum repolist</span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">repo id                   repo name                                           status</span><br><span class="line">base/7/x86_64             CentOS-7 - Base - repo.huaweicloud.com              10,072</span><br><span class="line">extras/7/x86_64           CentOS-7 - Extras - repo.huaweicloud.com               453</span><br><span class="line">updates/7/x86_64          CentOS-7 - Updates - repo.huaweicloud.com            1,729</span><br><span class="line"></span><br><span class="line">yum repolist all <span class="comment"># æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰çš„yumä»“åº“</span></span><br><span class="line">[root@www yum.repos.d]<span class="comment"># yum repolist all</span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">repo id                                        repo name                                                             status</span><br><span class="line">base/7/x86_64                                  CentOS-7 - Base - repo.huaweicloud.com                                enabled: 10,072</span><br><span class="line">centosplus/7/x86_64                            CentOS-7 - Plus - repo.huaweicloud.com                                disabled</span><br><span class="line">extras/7/x86_64                                CentOS-7 - Extras - repo.huaweicloud.com                              enabled:    453</span><br><span class="line">updates/7/x86_64                               CentOS-7 - Updates - repo.huaweicloud.com                             enabled:  1,72</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ç”¨repoä»“åº“</span></span><br><span class="line">yum install yum-utils -y</span><br><span class="line"></span><br><span class="line">å¯ç”¨ä¸€ä¸ªyumä»“åº“ï¼šyum-config-manager --<span class="built_in">enable</span> (ä»“åº“åç§°)</span><br><span class="line">å…³é—­ä¸€ä¸ªyumä»“åº“ï¼šyum-config-manager --<span class="built_in">disable</span> (ä»“åº“åç§°)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ä¸€ä¸ªä»“åº“ä¸­çš„è½¯ä»¶åŒ…åˆ—è¡¨</span></span><br><span class="line">[root@www yum.repos.d]<span class="comment"># yum list</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹è½¯ä»¶åŒ…ç»„</span></span><br><span class="line">[root@www yum.repos.d]<span class="comment"># yum grouplist</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…è½¯ä»¶åŒ…ç»„</span></span><br><span class="line">[root@www yum.repos.d]<span class="comment"># yum groupinstall &quot;Development Tools&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>æœ¬åœ°yumæºé…ç½®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1ã€å¤‡ä»½/etc/yum.repos.d/ä¸‹çš„æ‰€æ–‡ä»¶</span><br><span class="line">	rm -rf /etc/yum.repos.d/*</span><br><span class="line"></span><br><span class="line">2ã€ç¼–å†™æœ¬åœ°yumæº</span><br><span class="line">[root@www yum.repos.d]<span class="comment"># cat test.repo </span></span><br><span class="line">[base] <span class="comment"># yumæºåç§°</span></span><br><span class="line">name=<span class="string">&quot;This is repo infomation&quot;</span> <span class="comment">#yumæºçš„ç®€ä»‹</span></span><br><span class="line">baseurl=file:///opt    <span class="comment"># æŒ‡å®šyumæºåœ°å€</span></span><br><span class="line">enabled=1				<span class="comment"># æ˜¯å¦å¯ç”¨yumæº</span></span><br><span class="line">gpgcheck=0				<span class="comment"># æ˜¯å¦æ£€æŸ¥gpgç§˜é’¥</span></span><br><span class="line"></span><br><span class="line">3ã€æ›´æ–°ç¼“å­˜</span><br><span class="line">yum makecache</span><br><span class="line"></span><br><span class="line">4ã€å®‰è£…è½¯ä»¶</span><br><span class="line">yum install dos2unix</span><br></pre></td></tr></table></figure>
</li>
<li><p>å…±äº«yumæºé…ç½®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1ã€å®‰è£…ftp</span><br><span class="line">yum install vsftpd -y</span><br><span class="line"></span><br><span class="line">2ã€å¯åŠ¨vsftpd</span><br><span class="line">systemctl <span class="built_in">enable</span> --now vsftpd <span class="comment"># è®¾ç½®å¼€æœºè‡ªå¯åŠ¨å¹¶ä¸”ç«‹å³å¯åŠ¨</span></span><br><span class="line"></span><br><span class="line">3ã€åˆ›å»ºyumæºå…±äº«æ–‡ä»¶å¤¹</span><br><span class="line">[root@www ftp]<span class="comment"># mkdir /var/ftp/centos</span></span><br><span class="line"></span><br><span class="line">4ã€å°†æ˜ åƒä¸­çš„è½¯ä»¶å¤åˆ¶åˆ°/var/ftp/centos</span><br><span class="line">cp -rp /opt/* /var/ftp/centos</span><br><span class="line"></span><br><span class="line">5ã€ç¼–è¾‘æœ¬åœ°yumæºï¼Œæ¥å…¥ftp</span><br><span class="line">[root@localhost yum.repos.d]<span class="comment"># cat local.repo </span></span><br><span class="line">[base]</span><br><span class="line">baseurl=ftp://192.168.15.100/centos</span><br><span class="line">name=<span class="string">&quot;This is ftp repo&quot;</span></span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">6ã€æµ‹è¯•å®‰è£…</span><br><span class="line">yum install dos2unix -y</span><br></pre></td></tr></table></figure>
</li>
<li><p>yumçš„é…ç½®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># yumä»“åº“çš„æœºå™¨ä¸Šæ‰§è¡Œ</span></span><br><span class="line">1ã€ä¿®æ”¹/etc/yum.conf</span><br><span class="line">    cachedir=/var/ftp/centos/Packages   <span class="comment"># æŒ‡å®šyumç¼“å­˜ç›®å½•</span></span><br><span class="line">    keepcache=1							<span class="comment"># ä¸‹è½½çš„ç¼“å­˜è½¯ä»¶ä¸ç«‹å³åˆ é™¤ï¼Œ 0ä¸ºç«‹å³åˆ é™¤</span></span><br><span class="line"></span><br><span class="line">2ã€å®‰è£…ftp</span><br><span class="line">yum install vsftpd -y</span><br><span class="line"></span><br><span class="line">3ã€å¯åŠ¨vsftpd</span><br><span class="line">systemctl <span class="built_in">enable</span> --now vsftpd <span class="comment"># è®¾ç½®å¼€æœºè‡ªå¯åŠ¨å¹¶ä¸”ç«‹å³å¯åŠ¨</span></span><br><span class="line"></span><br><span class="line">4ã€åˆ›å»ºyumæºå…±äº«æ–‡ä»¶å¤¹</span><br><span class="line">[root@www ftp]<span class="comment"># mkdir /var/ftp/centos</span></span><br><span class="line"></span><br><span class="line">5ã€æ›´æ–°yumä»“åº“</span><br><span class="line">[root@www ftp]<span class="comment"># yum clean all</span></span><br><span class="line">[root@www ftp]<span class="comment"># yum makecache</span></span><br><span class="line"></span><br><span class="line">6ã€å»ºç«‹ä¸€ä¸ªå¿«æ·æ–¹å¼</span><br><span class="line"><span class="built_in">cd</span> /var/ftp/centos/Packages/base</span><br><span class="line">ln -s packages Packages</span><br><span class="line"></span><br><span class="line">7ã€å®‰è£…mariadb</span><br><span class="line">yum install mariadb -y</span><br><span class="line"></span><br><span class="line">8ã€å»ºç«‹/var/ftp/centos/Packages/base/repodata</span><br><span class="line">mkdir /var/ftp/centos/Packages/base/repodata</span><br><span class="line"></span><br><span class="line">9ã€æŠŠ/var/ftp/centos/Packages/baseä¸‹é¢çš„è‡ªåŠ¨ç”Ÿæˆçš„å‹ç¼©æ–‡ä»¶å¤åˆ¶åˆ°/var/ftp/centos/Packages/base/repodataç”¨åšè®¤è¯ã€‚</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨yumä»“åº“çš„æœºå™¨ä¸Šæ‰§è¡Œ</span></span><br><span class="line">1ã€å»ºç«‹yumé…ç½®æ–‡ä»¶</span><br><span class="line">[root@localhost ~]<span class="comment"># cat /etc/yum.repos.d/local.repo </span></span><br><span class="line">[base]</span><br><span class="line">baseurl=ftp://192.168.15.100/centos/Packages/base</span><br><span class="line">name=<span class="string">&quot;This is ftp repo&quot;</span></span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">2ã€æ›´æ–°yumä»“åº“</span><br><span class="line">[root@www ftp]<span class="comment"># yum clean all</span></span><br><span class="line">[root@www ftp]<span class="comment"># yum makecache</span></span><br><span class="line"></span><br><span class="line">3ã€æµ‹è¯•å®‰è£…mariadb</span><br><span class="line">yum install mariadb -y</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--ç”¨æˆ·ç»„ç®¡ç†</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day09-%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86/%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h1><h2 id="linuxä¸­ç”¨æˆ·ä»‹ç»"><a href="#linuxä¸­ç”¨æˆ·ä»‹ç»" class="headerlink" title="linuxä¸­ç”¨æˆ·ä»‹ç»"></a>linuxä¸­ç”¨æˆ·ä»‹ç»</h2><p>ä»€ä¹ˆæ˜¯ç”¨æˆ·ï¼Ÿ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ç”¨æˆ·å…¶å®å°±æ˜¯ç›¸å½“äºæƒé™çš„åŒ–èº«ï¼Œ</span><br><span class="line">å¤„äºå®‰å…¨è€ƒè™‘</span><br><span class="line">æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨è¿›å…¥ç³»ç»Ÿä¹‹å‰éƒ½éœ€è¦ç™»å½•ï¼Œæ ¹æ®ç”¨æˆ·ç»™ç›¸åº”æƒé™</span><br></pre></td></tr></table></figure>

<p>Linuxç³»ç»Ÿä¸­ç”¨æˆ·è§’è‰²</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">uid : Linuxç³»ç»Ÿå½“ä¸­ç”¨æˆ·IDï¼ˆç›¸å½“äºèº«ä»½è¯å·ï¼‰</span><br><span class="line">gid : ANTA20163307</span><br><span class="line"></span><br><span class="line">ç”¨æˆ·ç»„å…¶å®æ˜¯ç»Ÿä¸€æŸä¸€ç±»ç”¨æˆ·æƒé™</span><br><span class="line"></span><br><span class="line">éœ€æ±‚ï¼š</span><br><span class="line">	å¤§é¡¹ç›® ï¼š </span><br><span class="line">		å¼€å‘è€…ï¼ša b c d</span><br><span class="line">		è¿ç»´ ï¼š e f</span><br><span class="line">		æµ‹è¯•ï¼šg</span><br><span class="line">	å…±åŒçš„æƒé™ï¼š</span><br></pre></td></tr></table></figure>

<p>è¶…çº§ç”¨æˆ·</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">linuxå½“ä¸­çš„è€å¤§ï¼ˆçš‡å¸ï¼‰: root</span><br><span class="line">Windowså½“ä¸­çš„è€å¤§ï¼šadministrator</span><br></pre></td></tr></table></figure>

<h2 id="ç”¨æˆ·ä¸ç»„ç›¸å…³çš„æ–‡ä»¶"><a href="#ç”¨æˆ·ä¸ç»„ç›¸å…³çš„æ–‡ä»¶" class="headerlink" title="ç”¨æˆ·ä¸ç»„ç›¸å…³çš„æ–‡ä»¶"></a>ç”¨æˆ·ä¸ç»„ç›¸å…³çš„æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cat /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">ç”¨æˆ·åç§°   æ˜¯å¦å­˜åœ¨å¯†ç    uid  gid  ç»„åç§°/æ³¨é‡Šä¿¡æ¯ å®¶ç›®å½•  é»˜è®¤è§£æå™¨ </span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--linuxä¿¡å·</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day17-Linux%E4%BF%A1%E5%8F%B7/%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="ç¬”è®°"><a href="#ç¬”è®°" class="headerlink" title="ç¬”è®°"></a>ç¬”è®°</h1><p>1ã€è®¾ç½®è¿›ç¨‹çš„niceå€¼</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®è¿›ç¨‹çš„ä¼˜å…ˆçº§</span></span><br><span class="line">nice -n -11 bash test.sh</span><br><span class="line"></span><br><span class="line">-n ï¼š è®¾ç½®ä¼˜å…ˆçº§</span><br><span class="line">	æ™®é€šç”¨æˆ·ï¼šï¼ˆ0~19ï¼‰</span><br><span class="line">	è¶…çº§ç”¨æˆ·ï¼šï¼ˆ-20~19ï¼‰</span><br><span class="line">	</span><br><span class="line"><span class="comment"># ç»™æŒ‡å®šè¿›ç¨‹è®¾ç½®ä¼˜å…ˆçº§</span></span><br><span class="line">renice [è®¾ç½®ä¼˜å…ˆçº§] pid</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2ã€Linuxç³»ç»Ÿä¿¡å·</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ä¸­æ–­ä¿¡å·</span><br><span class="line">	ctrl + c</span><br><span class="line">	ctrl + z</span><br><span class="line"></span><br><span class="line">	INT(2) : </span><br><span class="line">		<span class="built_in">kill</span> -[ä¿¡å·åç§°|ä¿¡å·ID]ã€€pid</span><br><span class="line">		</span><br><span class="line">		<span class="built_in">kill</span> -SIGINT  PID</span><br><span class="line">		<span class="built_in">kill</span> -INT     PID</span><br><span class="line">		<span class="built_in">kill</span> -2       PID </span><br><span class="line"></span><br><span class="line">é€€å‡ºä¿¡å·:</span><br><span class="line">	ctrl + d</span><br><span class="line"></span><br><span class="line">æš‚åœä¿¡å·ï¼šå°†è¿›ç¨‹æš‚åœ</span><br><span class="line">	SIGTSTPï¼ˆ20ï¼‰</span><br><span class="line">		<span class="built_in">kill</span> -20 PID </span><br><span class="line">		<span class="built_in">kill</span> -SIGTSTP PID </span><br><span class="line">		<span class="built_in">kill</span> -TSTP PID</span><br><span class="line"></span><br><span class="line">æ€æ­»è¿›ç¨‹ä¿¡å·</span><br><span class="line">	SIGKILL</span><br><span class="line">		<span class="built_in">kill</span> -9 PID </span><br><span class="line">		<span class="built_in">kill</span> -SIGKILL PID</span><br><span class="line">		<span class="built_in">kill</span> -KILL PID</span><br><span class="line">æ³¨ï¼šä¸èƒ½å¤Ÿè¢«æ•æ‰</span><br><span class="line"></span><br><span class="line">ç»ˆæ­¢ä¿¡å·</span><br><span class="line">	SIGTREM</span><br><span class="line">		<span class="built_in">kill</span> -15 PID </span><br><span class="line">		<span class="built_in">kill</span> -SIGTERM PID</span><br><span class="line">		<span class="built_in">kill</span> -TERM PID</span><br><span class="line"></span><br><span class="line">æ³¨ï¼šä¼˜é›…ç»ˆæ­¢è¿›ç¨‹</span><br><span class="line"></span><br><span class="line">æš‚åœå’Œæ¢å¤ä¿¡å·</span><br><span class="line">	SIGCONT : æ¢å¤</span><br><span class="line">	SIGSTOP ï¼šæš‚åœ</span><br><span class="line"></span><br><span class="line">é‡è½½ä¿¡å·</span><br><span class="line">	SIGHUPï¼ˆ1ï¼‰</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1ã€nohup [æ‰§è¡Œçš„å‘½ä»¤] &amp;</span><br><span class="line">åå°å¯åŠ¨ï¼Œä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆä¸€ä¸ªnohub.outæ–‡ä»¶ï¼Œç”¨äºæ‰§è¡Œçš„å‘½ä»¤çš„è¾“å‡ºã€‚</span><br><span class="line">2ã€setsid : å®é™…ä¸Šå¼€äº†ä¸€ä¸ªå­¤å„¿è¿›ç¨‹</span><br><span class="line">3ã€ï¼ˆæ‰§è¡Œçš„å‘½ä»¤&amp;ï¼‰</span><br><span class="line">4ã€screen  å¼€å¯ä¸€ä¸ªå­çª—å£</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--ç£ç›˜åˆ†åŒº</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day19-%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA/01_%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="ä¸€ã€ç£ç›˜åˆ†åŒºæ–¹æ¡ˆ"><a href="#ä¸€ã€ç£ç›˜åˆ†åŒºæ–¹æ¡ˆ" class="headerlink" title="ä¸€ã€ç£ç›˜åˆ†åŒºæ–¹æ¡ˆ"></a>ä¸€ã€ç£ç›˜åˆ†åŒºæ–¹æ¡ˆ</h2><h3 id="1-1-MBRä¸GPTä»‹ç»"><a href="#1-1-MBRä¸GPTä»‹ç»" class="headerlink" title="1.1 MBRä¸GPTä»‹ç»"></a>1.1 MBRä¸GPTä»‹ç»</h3><p>Linuxä¸­ç£ç›˜åˆ†åŒºæœ‰ä¸¤ç§æ–¹æ¡ˆ</p>
<ul>
<li><strong>MBR</strong>ï¼ˆä¸»å¼•å¯¼è®°å½•ï¼‰</li>
<li><strong>GPT</strong>ï¼ˆGUIDåˆ†åŒºè¡¨ï¼‰</li>
</ul>
<p>**<font color='blue'>MBRåˆ†åŒºæ–¹æ¡ˆ</font>**çš„ç‰¹ç‚¹ï¼ˆæ”¯æŒçš„ç£ç›˜å®¹é‡&lt;&#x3D;2Tï¼‰ï¼š</p>
<ol>
<li>æœ€å¤šæ”¯æŒå››ä¸ªä¸»åˆ†åŒº </li>
<li>åœ¨Linuxä¸Šä½¿ç”¨æ‰©å±•åˆ†åŒºå’Œé€»è¾‘åˆ†åŒºæœ€å¤šå¯ä»¥åˆ›å»º15ä¸ªåˆ†åŒºï¼Œ </li>
<li>ç”±äºåˆ†åŒºä¸­çš„æ•°æ®ä»¥32ä½å­˜å‚¨ï¼Œä½¿ç”¨MBRåˆ†åŒºæ˜¯æœ€å¤§æ”¯æŒ2Tç©ºé—´ã€‚ </li>
<li>ç”¨fdiskç®¡ç†å·¥å…·æ¥åˆ›å»ºMBRåˆ†åŒº</li>
</ol>
<p>**<font color='red'>GPTåˆ†åŒºæ–¹æ¡ˆ</font>**çš„ç‰¹ç‚¹ï¼ˆæ”¯æŒçš„ç£ç›˜å®¹é‡&gt;2Tï¼‰ï¼š</p>
<ol>
<li>æ˜¯UEFIæ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œä¸»æ¿å¿…é¡»è¦æ”¯æŒUEFIæ ‡å‡† </li>
<li>GPTåˆ†åŒºåˆ—è¡¨æ”¯æŒæœ€å¤§128PB(1PB&#x3D;1024TB) </li>
<li>å¯ä»¥å®šä¹‰128ä¸ªåˆ†åŒº </li>
<li>æ²¡æœ‰ä¸»åˆ†åŒºï¼Œæ‰©å±•åˆ†åŒºå’Œé€»è¾‘åˆ†åŒºçš„æ¦‚å¿µï¼Œæ‰€æœ‰åˆ†åŒºéƒ½èƒ½æ ¼å¼åŒ– </li>
<li>gdiskå’Œpartedç®¡ç†å·¥å…·å¯ä»¥åˆ›å»ºGPTåˆ†åŒº</li>
</ol>
<h3 id="1-2-MBRä¸GTPçš„åŒºåˆ«"><a href="#1-2-MBRä¸GTPçš„åŒºåˆ«" class="headerlink" title="1.2 MBRä¸GTPçš„åŒºåˆ«"></a>1.2 MBRä¸GTPçš„åŒºåˆ«</h3><table>
<thead>
<tr>
<th>å¯¹æ¯”é¡¹</th>
<th>MBR</th>
<th>GPT</th>
</tr>
</thead>
<tbody><tr>
<td>æ–°æ—§åº¦</td>
<td>æ—§</td>
<td>æ–°</td>
</tr>
<tr>
<td>æ”¯æŒçš„ç¡¬ç›˜å®¹é‡å¤§å°</td>
<td>æœ€å¤§2TB</td>
<td>æ”¯æŒ2Tä»¥ä¸Š</td>
</tr>
<tr>
<td>åˆ†åŒºè®¡æ•°</td>
<td>æœ€å¤šæ”¯æŒ4ä¸ªä¸»åˆ†åŒºæˆ–3ä¸ªä¸»åˆ†åŒºä¸€ä¸ªæ‰©å±•åˆ†åŒº</td>
<td>æœ€å¤šæ”¯æŒ128ä¸ªåˆ†åŒº,éƒ¨åˆ†ä¸»åˆ†åŒºã€æ‰©å±•åˆ†åŒº</td>
</tr>
<tr>
<td>å®‰å…¨åŠŸèƒ½</td>
<td>ä¸æä¾›ä»»ä½•å®‰å…¨åŠŸèƒ½</td>
<td>æ”¯æŒCRC32æ ¡éªŒå’Œæœºåˆ¶</td>
</tr>
</tbody></table>
<h2 id="äºŒã€åˆ†åŒºå·¥å…·ä½¿ç”¨"><a href="#äºŒã€åˆ†åŒºå·¥å…·ä½¿ç”¨" class="headerlink" title="äºŒã€åˆ†åŒºå·¥å…·ä½¿ç”¨"></a>äºŒã€åˆ†åŒºå·¥å…·ä½¿ç”¨</h2><h3 id="2-1-MBRåˆ†åŒºå·¥å…·fdisk"><a href="#2-1-MBRåˆ†åŒºå·¥å…·fdisk" class="headerlink" title="2.1 MBRåˆ†åŒºå·¥å…·fdisk"></a>2.1 MBRåˆ†åŒºå·¥å…·fdisk</h3><h3 id="2-2-GPTåˆ†åŒºå·¥å…·gdisk"><a href="#2-2-GPTåˆ†åŒºå·¥å…·gdisk" class="headerlink" title="2.2 GPTåˆ†åŒºå·¥å…·gdisk"></a>2.2 GPTåˆ†åŒºå·¥å…·gdisk</h3><h3 id="2-3-GPTåˆ†åŒºå·¥å…·parted"><a href="#2-3-GPTåˆ†åŒºå·¥å…·parted" class="headerlink" title="2.3 GPTåˆ†åŒºå·¥å…·parted"></a>2.3 GPTåˆ†åŒºå·¥å…·parted</h3><p>â€‹	partedç”¨äºå¯¹ç£ç›˜ï¼ˆæˆ–RAIDç£ç›˜ï¼‰è¿›è¡Œåˆ†åŒºåŠç®¡ç†ï¼Œä¸fdiskåˆ†åŒºå·¥å…·ç›¸æ¯”ï¼Œæ”¯æŒ2TBä»¥ä¸Šçš„ç£ç›˜åˆ†åŒºï¼Œå¹¶ä¸”å…è®¸è°ƒæ•´åˆ†åŒºçš„å¤§å°ï¼Œ<font color='red'>æ”¯æŒå‘½ä»¤è¡Œæ–¹å¼æˆ–äº¤äº’å¼æ–¹å¼</font>ï¼Œå¸¸ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>partedäº¤äº’å‘½ä»¤</th>
<th>è¯´ æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>check NUMBER</td>
<td>åšä¸€æ¬¡ç®€å•çš„æ–‡ä»¶ç³»ç»Ÿæ£€æµ‹</td>
</tr>
<tr>
<td>cp [FROM-DEVICE] FROM-NUMBER TO-NUMBER</td>
<td>å¤åˆ¶æ–‡ä»¶ç³»ç»Ÿåˆ°å¦ä¸€ä¸ªåˆ†åŒº</td>
</tr>
<tr>
<td>help [COMMAND]</td>
<td>æ˜¾ç¤ºæ‰€æœ‰çš„å‘½ä»¤å¸®åŠ©</td>
</tr>
<tr>
<td>mklabel,mktable LABEL-TYPE</td>
<td>åˆ›å»ºæ–°çš„ç£ç›˜å·æ ‡ï¼ˆåˆ†åŒºè¡¨ï¼‰</td>
</tr>
<tr>
<td>mkfs NUMBER FS-TYPE</td>
<td>åœ¨åˆ†åŒºä¸Šå»ºç«‹æ–‡ä»¶ç³»ç»Ÿ</td>
</tr>
<tr>
<td>mkpart PART-TYPE [FS-TYPE] START END</td>
<td>åˆ›å»ºä¸€ä¸ªåˆ†åŒº</td>
</tr>
<tr>
<td>mkpartfs PART-TYPE FS-TYPE START END</td>
<td>åˆ›å»ºåˆ†åŒºï¼Œå¹¶å»ºç«‹æ–‡ä»¶ç³»ç»Ÿ</td>
</tr>
<tr>
<td>move NUMBER START END</td>
<td>ç§»åŠ¨åˆ†åŒº</td>
</tr>
<tr>
<td>name NUMBER NAME</td>
<td>ç»™åˆ†åŒºå‘½å</td>
</tr>
<tr>
<td>print [devices|free|list,all|NUMBER]</td>
<td>æ˜¾ç¤ºåˆ†åŒºè¡¨ã€æ´»åŠ¨è®¾å¤‡ã€ç©ºé—²ç©ºé—´ã€æ‰€æœ‰åˆ†åŒº</td>
</tr>
<tr>
<td>quit</td>
<td>é€€å‡º</td>
</tr>
<tr>
<td>rescue START END</td>
<td>ä¿®å¤ä¸¢å¤±çš„åˆ†åŒº</td>
</tr>
<tr>
<td>resize NUMBER START END</td>
<td>ä¿®æ”¹åˆ†åŒºå¤§å°</td>
</tr>
<tr>
<td>rm NUMBER</td>
<td>åˆ é™¤åˆ†åŒº</td>
</tr>
<tr>
<td>select DEVICE</td>
<td>é€‰æ‹©éœ€è¦ç¼–è¾‘çš„è®¾å¤‡</td>
</tr>
<tr>
<td>set NUMBER FLAG STATE</td>
<td>æ”¹å˜åˆ†åŒºæ ‡è®°</td>
</tr>
<tr>
<td>toggle [NUMBER [FLAG]]</td>
<td>åˆ‡æ¢åˆ†åŒºè¡¨çš„çŠ¶æ€</td>
</tr>
<tr>
<td>unit UNIT</td>
<td>è®¾ç½®é»˜è®¤çš„å•ä½</td>
</tr>
<tr>
<td>Version</td>
<td>æ˜¾ç¤ºç‰ˆæœ¬</td>
</tr>
</tbody></table>
<blockquote>
<p>å…³äºmkpartä¸PART-TYPEï¼ˆFS-TYPEï¼‰çš„è§£é‡Šï¼š</p>
<p>Make a part-type partition for filesystem fs-type (if specified), beginning at start and ending at end (by default in megabytes).  fs-type can  be  one  of  â€œbtrfsâ€,  â€œext2â€, â€œext3â€, â€œext4â€, â€œfat16â€, â€œfat32â€, â€œhfsâ€, â€œhfs+â€, â€œlinux-swapâ€, â€œntfsâ€, â€œreiserfsâ€, or â€œxfsâ€.  part-type should be one of â€œprimaryâ€, â€œlogicalâ€, or â€œextendedâ€.</p>
</blockquote>
<h4 id="2-3-1-ä½¿ç”¨parted"><a href="#2-3-1-ä½¿ç”¨parted" class="headerlink" title="2.3.1 ä½¿ç”¨parted"></a>2.3.1 ä½¿ç”¨parted</h4><h4 id="2-3-1-1-åˆ—å‡ºæ‰€æœ‰å—è®¾å¤‡åˆ†åŒºæƒ…å†µ"><a href="#2-3-1-1-åˆ—å‡ºæ‰€æœ‰å—è®¾å¤‡åˆ†åŒºæƒ…å†µ" class="headerlink" title="2.3.1.1 åˆ—å‡ºæ‰€æœ‰å—è®¾å¤‡åˆ†åŒºæƒ…å†µ"></a>2.3.1.1 åˆ—å‡ºæ‰€æœ‰å—è®¾å¤‡åˆ†åŒºæƒ…å†µ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹å½“å‰æœ‰å“ªäº›å—è®¾å¤‡</span></span><br><span class="line">[root@lb01 ~]# lsblk</span><br><span class="line">NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda      8:0    0   50G  0 disk</span><br><span class="line">â”œâ”€sda1   8:1    0    1G  0 part /boot</span><br><span class="line">â”œâ”€sda2   8:2    0    2G  0 part [SWAP]</span><br><span class="line">â””â”€sda3   8:3    0   47G  0 part /</span><br><span class="line">sdb      8:16   0   10G  0 disk</span><br><span class="line">sr0     11:0    1  792M  0 rom</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹åˆ†åŒºæƒ…å†µ</span></span><br><span class="line">[root@lb01 ~]# parted -l</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sda: 53.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    Type     File system     Flags</span><br><span class="line"> 1      1049kB  1075MB  1074MB  primary  xfs             boot</span><br><span class="line"> 2      1075MB  3223MB  2149MB  primary  linux-swap(v1)</span><br><span class="line"> 3      3223MB  53.7GB  50.5GB  primary  xfs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Error: /dev/sdb: unrecognised disk label	# sdbè¿˜æ²¡æœ‰åˆ†åŒº</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 10.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: unknown</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Warning: Unable to open /dev/sr0 read-write (Read-only file system).  /dev/sr0</span><br><span class="line">has been opened read-only.</span><br><span class="line">Model: NECVMWar VMware IDE CDR10 (scsi)</span><br><span class="line">Disk /dev/sr0: 830MB</span><br><span class="line">Sector size (logical/physical): 2048B/2048B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start  End     Size    Type     File system  Flags</span><br><span class="line"> 2      885kB  37.7MB  36.8MB  primary</span><br></pre></td></tr></table></figure>

<h4 id="2-3-1-2-åˆ›å»ºåˆ†åŒº"><a href="#2-3-1-2-åˆ›å»ºåˆ†åŒº" class="headerlink" title="2.3.1.2 åˆ›å»ºåˆ†åŒº"></a>2.3.1.2 åˆ›å»ºåˆ†åŒº</h4><blockquote>
<p>æ¡ˆä¾‹ï¼šåœ¨&#x2F;dev&#x2F;sdbä¸­åˆ›å»ºä¸€ä¸ª1GBçš„åˆ†åŒº</p>
</blockquote>
<p>aã€å‘½ä»¤è¡Œæ–¹å¼ï¼Œåˆ›å»ºä¸€ä¸ªä¸»åˆ†åŒº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è½¬æ¢ä¸ºMBRåˆ†åŒºæ–¹æ¡ˆmsdos, GPTæ–¹æ¡ˆä¸ºgpt</span></span><br><span class="line">[root@lb01 ~]# parted /dev/sdb mklabel msdos</span><br><span class="line">Information: You may need to update /etc/fstab.</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºä¸»åˆ†åŒº</span></span><br><span class="line">[root@lb01 ~]# parted /dev/sdb mkpart primary ext4 0GB 1GB  # æŠŠ1GBæ¢æˆ100%å°±æ˜¯åˆ†å®Œå‰©ä½™ç©ºé—´</span><br><span class="line">Information: You may need to update /etc/fstab.</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# lsblk</span><br><span class="line">NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda      8:0    0   50G  0 disk</span><br><span class="line">â”œâ”€sda1   8:1    0    1G  0 part /boot</span><br><span class="line">â”œâ”€sda2   8:2    0    2G  0 part [SWAP]</span><br><span class="line">â””â”€sda3   8:3    0   47G  0 part /</span><br><span class="line">sdb      8:16   0   10G  0 disk</span><br><span class="line">â””â”€sdb1   8:17   0  953M  0 part</span><br><span class="line">sr0     11:0    1  792M  0 rom</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>bã€å†ç”¨äº¤äº’æ–¹å¼ï¼Œç»§ç»­åˆ›å»ºä¸€ä¸ªä¸»åˆ†åŒº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# parted</span><br><span class="line">GNU Parted 3.1</span><br><span class="line">Using /dev/sda</span><br><span class="line">Welcome to GNU Parted! Type &#x27;help&#x27; to view a list of commands.</span><br><span class="line">(parted) select /dev/sdb # é€‰æ‹©å—è®¾å¤‡</span><br><span class="line">Using /dev/sdb</span><br><span class="line">(parted) mkpart	# æ–°å»ºåˆ†åŒº</span><br><span class="line">Partition type?  primary/extended? primary</span><br><span class="line">File system type?  [ext2]? ext4</span><br><span class="line">Start? 1GB</span><br><span class="line">End? 2GB</span><br></pre></td></tr></table></figure>

<p>cã€æ‰©å±•åˆ†åŒºä¸é€»è¾‘åˆ†åŒºçš„åˆ›å»º</p>
<blockquote>
<p>æ‰©å±•åˆ†åŒºæœ€å¤šåªæœ‰ä¸€ä¸ªï¼Œå†åˆ›å»ºä¼šæç¤ºé€‰æ‹©primary&#x2F;logical</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(parted) select /dev/sdb</span><br><span class="line">Using /dev/sdb</span><br><span class="line">(parted) print</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 10.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    Type      File system  Flags</span><br><span class="line"> 1      1049kB  1000MB  999MB   primary   ext4</span><br><span class="line"> 2      1000MB  4000MB  3000MB  extended               lba</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç»™æ‰©å±•åˆ†åŒº2åˆ›å»ºä¸€ä¸ªé€»è¾‘åˆ†åŒºï¼ˆä½¿ç”¨èŒƒå›´åªèƒ½åœ¨æ‰©å±•åˆ†åŒº2çš„èŒƒå›´å†…ï¼‰</span></span><br><span class="line">(parted) mkpart logical 1GB 2GB</span><br><span class="line">(parted) print</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 10.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    Type      File system  Flags</span><br><span class="line"> 1      1049kB  1000MB  999MB   primary   ext4</span><br><span class="line"> 2      1000MB  4000MB  3000MB  extended               lba</span><br><span class="line"> 5      1001MB  2000MB  998MB   logical</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ç»™æ‰©å±•åˆ†åŒº2å†åˆ›å»ºä¸€ä¸ªé€»è¾‘åˆ†åŒº</span></span><br><span class="line">(parted) mkpart logical 2GB 3GB</span><br><span class="line">(parted) print</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 10.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    Type      File system  Flags</span><br><span class="line"> 1      1049kB  1000MB  999MB   primary   ext4</span><br><span class="line"> 2      1000MB  4000MB  3000MB  extended               lba</span><br><span class="line"> 5      1001MB  2000MB  998MB   logical</span><br><span class="line"> 6      2001MB  3000MB  999MB   logical</span><br></pre></td></tr></table></figure>

<h4 id="2-3-1-3-æŸ¥çœ‹åˆ†åŒº"><a href="#2-3-1-3-æŸ¥çœ‹åˆ†åŒº" class="headerlink" title="2.3.1.3 æŸ¥çœ‹åˆ†åŒº"></a>2.3.1.3 æŸ¥çœ‹åˆ†åŒº</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">(parted) print # æ‰“å°åˆ†åŒº</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 10.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size   Type     File system  Flags</span><br><span class="line"> 1      1049kB  1000MB  999MB  primary</span><br><span class="line"> 2      1000MB  2000MB  999MB  primary</span><br><span class="line"> </span><br><span class="line"> (parted) print free # æŸ¥çœ‹å‰©ä½™ç©ºé—´</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 10.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    Type     File system  Flags</span><br><span class="line">        32.3kB  1049kB  1016kB           Free Space</span><br><span class="line"> 1      1049kB  1000MB  999MB   primary</span><br><span class="line"> 2      1000MB  2000MB  999MB   primary</span><br><span class="line">        2000MB  10.7GB  8738MB           Free Space</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-3-1-4-è°ƒæ•´åˆ†åŒºå¤§å°"><a href="#2-3-1-4-è°ƒæ•´åˆ†åŒºå¤§å°" class="headerlink" title="2.3.1.4 è°ƒæ•´åˆ†åŒºå¤§å°"></a>2.3.1.4 è°ƒæ•´åˆ†åŒºå¤§å°</h4><blockquote>
<p>å°†åˆ†åŒº2ä»1GBæ‰©å±•åˆ°2GB</p>
<p>PSï¼šv2.4ä¹‹åçš„ç‰ˆæœ¬ï¼Œresizeå‘½ä»¤å·²ç»ç§»é™¤ï¼Œæ›´æ–°åˆ°3.1-32ç‰ˆæœ¬æœ‰resizepart</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# parted /dev/sdb print</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 10.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size   Type     File system  Flags</span><br><span class="line"> 1      1049kB  1000MB  999MB  primary</span><br><span class="line"> 2      1000MB  2000MB  999MB  primary</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è°ƒæ•´åˆ†åŒº2çš„å¤§å°ä¸º2GB</span></span><br><span class="line">[root@lb01 ~]# parted /dev/sdb resizepart 2 3GB	(3GBæ˜¯æŒ‡ENDä½ç½®ï¼Œå³ä½¿ç”¨1GB-3GBçš„ç©ºé—´ï¼Œå…±2GB)</span><br><span class="line">Information: You may need to update /etc/fstab.</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# parted /dev/sdb print</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 10.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    Type     File system  Flags</span><br><span class="line"> 1      1049kB  1000MB  999MB   primary</span><br><span class="line"> 2      1000MB  3000MB  2000MB  primary</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta"> #</span><span class="bash"> å¦‚æœå·²ç»æ ¼å¼åŒ–å¹¶æŒ‚è½½ä½¿ç”¨ï¼Œéœ€è¦é‡æ–°è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå¤§å°</span></span><br><span class="line"> [root@lb01 ~]# resize2fs /dev/sdb2</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç¼©å°åˆ†åŒºå¤§å°ä¼šæ€æ ·ï¼Ÿå°†æç¤ºæœ‰æ•°æ®ä¸¢å¤±çš„é£é™©</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# parted /dev/sdb resizepart 2 2GB</span><br><span class="line">Warning: Shrinking a partition can cause data loss, are you sure you want to continue?</span><br><span class="line">Yes/No?</span><br></pre></td></tr></table></figure>

<h4 id="2-3-1-5-åˆ é™¤åˆ†åŒº"><a href="#2-3-1-5-åˆ é™¤åˆ†åŒº" class="headerlink" title="2.3.1.5 åˆ é™¤åˆ†åŒº"></a>2.3.1.5 åˆ é™¤åˆ†åŒº</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# parted /dev/sdb print</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 10.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    Type     File system  Flags</span><br><span class="line"> 1      1049kB  1000MB  999MB   primary</span><br><span class="line"> 2      1000MB  4000MB  3000MB  primary  ext4</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# parted /dev/sdb rm 2   // åˆ é™¤2å·åˆ†åŒºï¼Œå› ä¸ºå·²æŒ‚è½½ï¼Œä¼šæç¤ºè¦å…ˆå¸è½½</span><br><span class="line">Error: Partition /dev/sdb2 is being used. You must unmount it before you modify it with Parted.</span><br><span class="line">[root@lb01 ~]# umount /dev/sdb2</span><br><span class="line">[root@lb01 ~]# parted /dev/sdb rm 2 // åˆ é™¤æˆåŠŸ</span><br><span class="line">Information: You may need to update /etc/fstab.</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# print</span><br><span class="line">-bash: print: command not found</span><br><span class="line">[root@lb01 ~]# parted /dev/sdb print</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 10.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size   Type     File system  Flags</span><br><span class="line"> 1      1049kB  1000MB  999MB  primary</span><br></pre></td></tr></table></figure>

<h4 id="2-3-1-6-è®¾ç½®-x2F-æ›´æ”¹åˆ†åŒºæ ‡å¿—"><a href="#2-3-1-6-è®¾ç½®-x2F-æ›´æ”¹åˆ†åŒºæ ‡å¿—" class="headerlink" title="2.3.1.6 è®¾ç½®&#x2F;æ›´æ”¹åˆ†åŒºæ ‡å¿—"></a>2.3.1.6 è®¾ç½®&#x2F;æ›´æ”¹åˆ†åŒºæ ‡å¿—</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# parted /dev/sdb set 1 lvm on</span><br><span class="line">Information: You may need to update /etc/fstab.</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# parted /dev/sdb print</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 10.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size   Type     File system  Flags</span><br><span class="line"> 1      1049kB  1000MB  999MB  primary               lvm</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹æœ‰å“ªäº›æ ‡å¿—å¯ä»¥è®¾ç½®</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# parted</span><br><span class="line">GNU Parted 3.1</span><br><span class="line">Using /dev/sda</span><br><span class="line">Welcome to GNU Parted! Type &#x27;help&#x27; to view a list of commands.</span><br><span class="line">(parted) help set</span><br><span class="line">  set NUMBER FLAG STATE                    change the FLAG on partition NUMBER</span><br><span class="line"></span><br><span class="line">        NUMBER is the partition number used by Linux.  On MS-DOS disk labels, the primary partitions number from 1 to 4, logical partitions from 5 onwards.</span><br><span class="line">        FLAG is one of: boot, root, swap, hidden, raid, lvm, lba, hp-service, palo, prep, msftres, bios_grub, atvrecv, diag, legacy_boot</span><br><span class="line">        STATE is one of: on, off</span><br></pre></td></tr></table></figure>

<h4 id="2-3-16-GPTåˆ†åŒºæ–¹æ¡ˆä¸‹çš„NAMEæ ‡ç­¾"><a href="#2-3-16-GPTåˆ†åŒºæ–¹æ¡ˆä¸‹çš„NAMEæ ‡ç­¾" class="headerlink" title="2.3.16 GPTåˆ†åŒºæ–¹æ¡ˆä¸‹çš„NAMEæ ‡ç­¾"></a>2.3.16 GPTåˆ†åŒºæ–¹æ¡ˆä¸‹çš„NAMEæ ‡ç­¾</h4><p>GPTåˆ†åŒºçš„print</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# parted /dev/sdb print</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 10.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start  End  Size  File system  Name  Flags</span><br></pre></td></tr></table></figure>

<p>MBRåˆ†åŒºçš„print</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# parted /dev/sdb mklabel msdos</span><br><span class="line">Warning: The existing disk label on /dev/sdb will be destroyed and all data on this disk will be lost. Do you want to continue?</span><br><span class="line">Yes/No? Yes</span><br><span class="line">Information: You may need to update /etc/fstab.</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# parted /dev/sdb print</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 10.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start  End  Size  Type  File system  Flags</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong><font color='red'>å¯è§GPTæ ‡å¿—ä¸­å¤šäº†ä¸€ä¸ªNameæ ‡ç­¾</font></strong></p>
</blockquote>
<p>ä½¿ç”¨çš„æ—¶å€™GPTåˆ†åŒºæ–¹å¼å¯ä»¥æŒ‡å®šåˆ†åŒºåï¼Œä¸ç”¨æŒ‡å®šä¸»åˆ†åŒºã€æ‰©å±•åˆ†åŒºè¿™äº›ç±»å‹</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# parted /dev/sdb mkpart BOOT 0GB 1GB</span><br><span class="line">Information: You may need to update /etc/fstab.</span><br><span class="line"></span><br><span class="line">[root@lb01 ~]# parted /dev/sdb print</span><br><span class="line">Model: VMware, VMware Virtual S (scsi)</span><br><span class="line">Disk /dev/sdb: 10.7GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size   File system  Name  Flags</span><br><span class="line"> 1      1049kB  1000MB  999MB  xfs          BOOT</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯MBRå°±ä¸èƒ½</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# parted /dev/sdb mkpart BOOT 0GB 1GB</span><br><span class="line">parted: invalid token: BOOT</span><br><span class="line">Partition type?  primary/extended?</span><br><span class="line">[root@lb01 ~]# parted /dev/sdb mkpart primary BOOT 0GB 1GB</span><br><span class="line">parted: invalid token: BOOT</span><br><span class="line">File system type?  [ext2]?</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ã€ç£ç›˜æŒ‚è½½"><a href="#ä¸‰ã€ç£ç›˜æŒ‚è½½" class="headerlink" title="ä¸‰ã€ç£ç›˜æŒ‚è½½"></a>ä¸‰ã€ç£ç›˜æŒ‚è½½</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1ã€å¼€æœºè‡ªåŠ¨æŒ‚è½½</span><br><span class="line">	å¼€æœºè‡ªåŠ¨æ‰§è¡Œï¼š/etc/rc.local</span><br><span class="line">	</span><br><span class="line">	chmod +x /etc/ec.local</span><br><span class="line">	</span><br><span class="line">	echo &quot;mount /dev/sdc1 /root/test&quot; &gt;&gt; /etc/rc.local</span><br><span class="line"></span><br><span class="line">2ã€ä¿®æ”¹é…ç½®æ–‡ä»¶ /etc/fstab</span><br><span class="line">/dev/sdc100     /opt    xfs         defaults   0      0</span><br><span class="line">è®¾å¤‡				æŒ‚è½½ç‚¹  æ–‡ä»¶ç³»ç»Ÿç±»å‹   æŒ‚è½½ç±»å‹  æ˜¯å¦å¤‡ä»½  æ˜¯å¦æ£€æµ‹</span><br><span class="line">UUID=1327e665-44b3-4223-a93b-69c36ec602f9   /root/oldboy  xfs   defaults 0 0</span><br><span class="line"></span><br><span class="line"> /dev/sdc100  ç­‰ä»·äº  UUID</span><br><span class="line"></span><br><span class="line">3ã€æŸ¥è¯¢è®¾å¤‡UUID</span><br><span class="line">	[root@localhost ~]# blkid </span><br><span class="line">/dev/sdc1: UUID=&quot;b5797ad6-9b98-452c-8962-fa12f6590fa6&quot; TYPE=&quot;xfs&quot; PARTLABEL=&quot;Linux filesystem&quot;</span><br></pre></td></tr></table></figure>

<h2 id="å››ã€åˆ›å»ºSWAPåˆ†åŒº"><a href="#å››ã€åˆ›å»ºSWAPåˆ†åŒº" class="headerlink" title="å››ã€åˆ›å»ºSWAPåˆ†åŒº"></a>å››ã€åˆ›å»ºSWAPåˆ†åŒº</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1ã€åˆ›å»ºä¸€ä¸ªç¡¬ç›˜åˆ†åŒº</span><br><span class="line"></span><br><span class="line">2ã€åˆ¶ä½œswapåˆ†åŒº</span><br><span class="line">mkswap /dev/sdb3</span><br><span class="line"></span><br><span class="line">3ã€æ¿€æ´»swap</span><br><span class="line">swapon /dev/sdb3</span><br><span class="line"></span><br><span class="line">4ã€å…³é—­swap</span><br><span class="line">swapoff </span><br><span class="line"></span><br><span class="line">5ã€è‡ªåŠ¨æŒ‚è½½</span><br><span class="line">	5.1ã€</span><br><span class="line">        echo &quot;mkswap /dev/sdb3&quot; &gt;&gt; /etc/rc.local</span><br><span class="line">        echo &quot;swapon /dev/sdb3&quot; &gt;&gt; /etc/rc.local</span><br><span class="line">	5.2ã€</span><br><span class="line">		echo &quot;/dev/sdb3  swap  swap  defaults 0  0&quot; &gt;&gt; /etc/fstab</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--è¿›ç¨‹ç®¡ç†</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day16-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h1><p>ç¨‹åºï¼šå®‰è£…åŒ…</p>
<p>è¿›ç¨‹ï¼šæ­£åœ¨è¿è¡Œçš„å®ä¾‹</p>
<p>CPUï¼šè®¡ç®—</p>
<p>å†…å­˜ï¼šå­˜å‚¨CPUè®¡ç®—ä½¿ç”¨çš„ä¸´æ—¶æ•°æ®</p>
<p>å­˜å‚¨ï¼š</p>
<p>è¿›ç¨‹å’Œçº¿ç¨‹</p>
<p>åƒµå°¸è¿›ç¨‹å’Œå­¤å„¿è¿›ç¨‹</p>
<p>åƒµå°¸è¿›ç¨‹ï¼šè¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç»“æŸäº†ï¼Œä½†æ˜¯PIDæœªè¢«å›æ”¶</p>
<p>å­¤å„¿è¿›ç¨‹ï¼šçˆ¶è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç»“æŸäº†ï¼Œä½†æ˜¯å­è¿›ç¨‹æœªç»“æŸï¼Œå­è¿›ç¨‹è¢«ç³»ç»Ÿè¿›ç¨‹æ¥æ”¶</p>
<p>1ã€æŸ¥çœ‹è¿›ç¨‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤ï¼šps, é»˜è®¤æŸ¥çœ‹å½“å‰è¿›ç¨‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚æ•°</span></span><br><span class="line">-a : æŸ¥è¯¢æ‰€æœ‰è¿›ç¨‹</span><br><span class="line">-x : æŸ¥çœ‹åå°æ‰€æœ‰çš„è¿›ç¨‹</span><br><span class="line">-u : æŸ¥çœ‹è¿›ç¨‹çš„ç”¨æˆ·</span><br><span class="line"></span><br><span class="line">USER ï¼š å¼€å¯å½“å‰è¿›ç¨‹çš„ç”¨æˆ·</span><br><span class="line">PID  ï¼š å½“å‰è¿›ç¨‹çš„IDå·</span><br><span class="line">%CPU ï¼š CPUçš„ä½¿ç”¨ç‡</span><br><span class="line">%MEM ï¼š å†…å­˜ä½¿ç”¨ç‡</span><br><span class="line">VSZ  ï¼š è¿›ç¨‹å¯åŠ¨æ—¶é»˜è®¤å‘è®¡ç®—æœºç”³è¯·çš„å†…å­˜</span><br><span class="line">RSS  ï¼š è¿›ç¨‹è¿è¡Œæ—¶å®é™…ä½¿ç”¨çš„å†…å­˜</span><br><span class="line">TTY  ï¼š è¿›ç¨‹è¿è¡Œçš„ç»ˆç«¯</span><br><span class="line">	ï¼Ÿï¼š åå°è¿è¡Œï¼ˆæ²¡æœ‰ç»ˆç«¯ï¼‰</span><br><span class="line">	ttyï¼šä½¿ç”¨ç³»ç»Ÿç»ˆç«¯</span><br><span class="line">	ptsï¼šä½¿ç”¨è™šæ‹Ÿç»ˆç«¯</span><br><span class="line">STAT ï¼šè¿›ç¨‹è¿è¡ŒçŠ¶æ€</span><br><span class="line">	R ï¼š æ­£åœ¨è¿è¡Œä¸­çš„è¿›ç¨‹</span><br><span class="line">	+ ï¼š åœ¨å‰å°è¿è¡Œ</span><br><span class="line">	S ï¼š ç¡çœ ä¸­çŠ¶æ€</span><br><span class="line">	D ï¼š ä¸å¯ä¸­æ–­ç¡çœ </span><br><span class="line">	T ï¼š åœæ­¢çŠ¶æ€</span><br><span class="line">	Z :  åƒµå°¸çŠ¶æ€</span><br><span class="line">	X ï¼š æ­»æ‰çš„è¿›ç¨‹</span><br><span class="line">	&lt; : ä¼˜å…ˆçº§è¾ƒé«˜çš„è¿›ç¨‹</span><br><span class="line">	N ï¼šä¼˜å…ˆçº§è¾ƒä½çš„è¿›ç¨‹</span><br><span class="line">	s : åŒ…å«å­è¿›ç¨‹       yum install psmisc -y </span><br><span class="line">	l : å·²çº¿ç¨‹çš„æ–¹å¼è¿è¡Œ</span><br><span class="line">	| ï¼š ä»£è¡¨ç®¡é“</span><br><span class="line">START ï¼š è¿›ç¨‹çš„å¯åŠ¨æ—¶é—´</span><br><span class="line">TIME  ï¼š å ç”¨CPUçš„æ—¶é—´</span><br><span class="line">COMMAND ï¼š è¿›ç¨‹æ‰§è¡Œçš„å‘½ä»¤</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-e : æ˜¾ç¤ºæ‰€æœ‰çš„è¿›ç¨‹</span><br><span class="line">-f : æ ¼å¼åŒ–è¾“å‡ºåŒæ—¶æ˜¾ç¤ºPPID</span><br><span class="line"></span><br><span class="line">PPID ï¼š çˆ¶è¿›ç¨‹ID</span><br></pre></td></tr></table></figure>

<p>2ã€top</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ ¹æ®ä¸€å®šé¢‘ç‡çš„å»ç›‘æ§ç³»ç»Ÿ</span></span><br><span class="line"></span><br><span class="line">upå‰æ˜¯ç³»ç»Ÿæ—¶é—´</span><br><span class="line">upåæ˜¯å¼€å¯çš„æ—¶é—´</span><br><span class="line"></span><br><span class="line">load average: 0.01, 0.42, 0.73</span><br><span class="line">0.01  ï¼š ä¸€åˆ†é’Ÿå¹³å‡è´Ÿè½½</span><br><span class="line">0.42  ï¼š äº”åˆ†é’Ÿå¹³å‡è´Ÿè½½</span><br><span class="line">0.73  ï¼š åäº”åˆ†é’Ÿå¹³å‡è´Ÿè½½</span><br><span class="line"></span><br><span class="line">å¹³å‡è´Ÿè½½ï¼š</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># CPUåŠ å‹å·¥å…·</span></span><br><span class="line">stress --cpu [éœ€è¦åŠ å‹çš„ç³»ç»Ÿæ ¸å¿ƒæ•°] --timeout [åŠ å‹çš„æ—¶é—´]</span><br><span class="line"></span><br><span class="line"><span class="comment"># CPU æ€§èƒ½åŠ å‹å·¥å…·</span></span><br><span class="line"><span class="comment">## æ·»åŠ epelæºï¼ˆepelæºä¸»è¦ç”¨æ¥å®‰è£…çº¢å¸½ç³»åˆ—æ“ä½œç³»ç»Ÿé™„åŠ è½¯ä»¶ï¼‰</span></span><br><span class="line">yum install stress -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># CPU æ€§èƒ½åˆ†æå·¥å…·</span></span><br><span class="line">yum install sysstat -y</span><br><span class="line"></span><br><span class="line">mpstat -P ALL 3   </span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›ç¨‹æ€§èƒ½åˆ†æâ¼¯å…·</span></span><br><span class="line">pidstat -u 1 5  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Tasks</span><br><span class="line">Tasks: 125 total,   1 running, 124 sleeping,   0 stopped,   0 zombie</span><br><span class="line"></span><br><span class="line">total : å½“å‰ç³»ç»Ÿä¸€å…±è¿è¡Œçš„æ˜¯125ä¸ªè¿›ç¨‹</span><br><span class="line">running : æ­£åœ¨è¿è¡Œçš„æ˜¯1ä¸ª</span><br><span class="line">sleeping : 124ä¸ªå¤„äºç¡çœ çŠ¶æ€</span><br><span class="line">stopped : åœæ­¢è¿è¡Œçš„è¿›ç¨‹æ•°</span><br><span class="line">zombie  ï¼šåƒµå°¸è¿›ç¨‹æ•°</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%Cpu0  :  0.0 us,  0.0 sy,  0.0 ni,100.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line"></span><br><span class="line">us ï¼šåœ¨å•ä½æ—¶é—´è¿›ç¨‹ä½¿ç”¨CPUæ‰€å ç”¨çš„æ—¶é—´ç™¾åˆ†æ¯”</span><br><span class="line">sy : åœ¨å•ä½æ—¶é—´å†…ç³»ç»Ÿè¿›ç¨‹å ç”¨CPUæ—¶é—´ç™¾åˆ†æ¯”</span><br><span class="line">ni : åœ¨å•ä½æ—¶é—´å†…ä¼˜å…ˆä½¿ç”¨CPUæ‰€å æ—¶é—´ç™¾åˆ†æ¯”</span><br><span class="line">id ï¼šåœ¨å•ä½æ—¶é—´å†…CPUç©ºé—²æ‰€å æ—¶é—´ç™¾åˆ†æ¯”</span><br><span class="line">wa : åœ¨å•ä½æ—¶é—´å†…CPUé˜»å¡æ€æ‰€å CPUæ—¶é—´çš„ç™¾åˆ†æ¯”</span><br><span class="line">hi : ç¡¬ä»¶ä¸­æ–­</span><br><span class="line">si : è½¯ä»¶ä¸­æ–­</span><br><span class="line">st : å…¶ä»–å ç”¨CPUæ—¶é—´ç™¾åˆ†æ¯”</span><br><span class="line"></span><br><span class="line">KiB Mem :  2027892 total,  1234180 free,   176352 used,   617360 buff/cache</span><br><span class="line"></span><br><span class="line">total ï¼šç³»ç»Ÿæ€»å†…å­˜</span><br><span class="line">free  ï¼šç³»ç»Ÿç©ºé—²å†…å­˜</span><br><span class="line">used  : ç³»ç»Ÿä½¿ç”¨å†…å­˜</span><br><span class="line">buff/cache ï¼š ç¼“å­˜ä½¿ç”¨å†…å­˜</span><br><span class="line">avail Mem ï¼š</span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND  </span><br><span class="line">  </span><br><span class="line">PID ï¼š è¿›ç¨‹ç¼–å·</span><br><span class="line">USER ï¼š å¯åŠ¨è¿›ç¨‹çš„ç”¨æˆ·</span><br><span class="line">PR : ä¼˜å…ˆçº§</span><br><span class="line">NI ï¼šniceå€¼</span><br><span class="line">VIRT ï¼š è™šæ‹Ÿå†…å­˜</span><br><span class="line">RES  ï¼š ä½¿ç”¨å†…å­˜</span><br><span class="line">SHR  ï¼š å…±äº«å†…å­˜</span><br><span class="line">%CPU ï¼š cpuä½¿ç”¨ç‡</span><br><span class="line">%MEM ï¼šå†…å­˜ä½¿ç”¨ç‡</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3ã€topå¿«æ·é”®</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">æŒ‰1 : å±•ç¤ºæ‰€æœ‰çš„CPUçš„è¯¦æƒ…</span><br><span class="line">æŒ‰s : è®¾ç½®topç›‘æ§é¢‘ç‡ï¼ˆé»˜è®¤3ç§’ï¼‰</span><br><span class="line">æŒ‰m : æŒ‰ç…§å†…å­˜æ’åº </span><br><span class="line">æŒ‰z : æ·»åŠ é¢œè‰²</span><br><span class="line">æŒ‰p : æŒ‰ç…§CPUæ’åº</span><br><span class="line">æŒ‰l : å±•ç¤ºCPUæ€»è´Ÿè½½ï¼ˆé»˜è®¤æ˜¾ç¤ºï¼‰</span><br></pre></td></tr></table></figure>

<p>4ã€topçš„å‚æ•°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-d ï¼š è®¾ç½®topçš„åˆ·æ–°é¢‘ç‡</span><br><span class="line">-p :  è®¾ç½®æŸ¥çœ‹çš„è¿›ç¨‹PID</span><br><span class="line">	top -d 1 -p `pgrep nginx | head -1`</span><br><span class="line"></span><br><span class="line">-u :  æŸ¥è¯¢æŒ‡å®šç”¨æˆ·çš„ç»å¸¸çš„è¿›ç¨‹</span><br><span class="line">	top -u oldboy</span><br><span class="line"></span><br><span class="line">-n : è¡¨ç¤ºæŸ¥è¯¢næ¬¡</span><br><span class="line">	 top -d 0.1 -u oldboy -n 20</span><br></pre></td></tr></table></figure>







<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[epel]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 7 - <span class="variable">$basearch</span></span><br><span class="line">baseurl=https://mirrors.tuna.tsinghua.edu.cn/epel/7/<span class="variable">$basearch</span></span><br><span class="line"><span class="comment">#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-7&amp;arch=$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[epel-debuginfo]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 7 - <span class="variable">$basearch</span> - Debug</span><br><span class="line">baseurl=https://mirrors.tuna.tsinghua.edu.cn/epel/7/<span class="variable">$basearch</span>/debug</span><br><span class="line"><span class="comment">#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-debug-7&amp;arch=$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=0</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[epel-source]</span><br><span class="line">name=Extra Packages <span class="keyword">for</span> Enterprise Linux 7 - <span class="variable">$basearch</span> - Source</span><br><span class="line">baseurl=https://mirrors.tuna.tsinghua.edu.cn/epel/7/SRPMS</span><br><span class="line"><span class="comment">#mirrorlist=https://mirrors.fedoraproject.org/metalink?repo=epel-source-7&amp;arch=$basearch</span></span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=0</span><br><span class="line">gpgcheck=0</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--yumä»“åº“</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day13-yum%E4%BB%93%E5%BA%93/yum%E4%BB%93%E5%BA%93/</url>
    <content><![CDATA[<h1 id="yumä»“åº“"><a href="#yumä»“åº“" class="headerlink" title="yumä»“åº“"></a>yumä»“åº“</h1><p>1ã€å…‹éš†ä¸¤å°ä¸»æœº</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yumä»“åº“ä¸»æœº</span><br><span class="line">	å¤–ç½‘åœ°å€ï¼š192.168.15.30</span><br><span class="line">	å†…ç½‘åœ°å€ï¼š172.16.1.30</span><br><span class="line"></span><br><span class="line">yumæµ‹è¯•ä¸»æœº</span><br><span class="line">	å¤–ç½‘åœ°å€ï¼š192.168.15.31</span><br><span class="line">	å†…ç½‘åœ°å€ï¼š172.16.1.31</span><br><span class="line"></span><br><span class="line">ä¿®æ”¹çš„å‘½ä»¤ï¼š</span><br><span class="line">	vim /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">	vim /etc/sysconfig/network-scripts/ifcfg-eth1</span><br><span class="line">	</span><br><span class="line">	é‡å¯ç½‘å¡ï¼šsystemctl restart network</span><br><span class="line">	</span><br><span class="line">	ä¿®æ”¹ä¸»æœºåï¼š</span><br><span class="line">		yumä»“åº“ä¸»æœºï¼šhostnamectl set-hostname warehouse</span><br><span class="line">		yumæµ‹è¯•ä¸»æœºï¼šhostnamectl set-hostname yum-test</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<p>2ã€é…ç½®yumä»“åº“</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1ã€éœ€è¦æœ‰ä¸€ä¸ªè½¯ä»¶åŒ…ç›®å½•ï¼Œå­˜æ”¾è½¯ä»¶åŒ…çš„</span><br><span class="line">[root@warehouse ~]<span class="comment"># mkdir /backup</span></span><br><span class="line">	</span><br><span class="line">	1.1ã€ç¼“å­˜yumå®‰è£…ä¸‹è½½çš„è½¯ä»¶åŒ…</span><br><span class="line">	[root@warehouse 7]<span class="comment"># vim /etc/yum.conf</span></span><br><span class="line">	[main]</span><br><span class="line">    cachedir=/var/cache/yum/<span class="variable">$basearch</span>/<span class="variable">$releasever</span></span><br><span class="line">    keepcache=1</span><br><span class="line">    [root@warehouse ~]<span class="comment"># yum install mariadb -y</span></span><br><span class="line">	</span><br><span class="line">	1.2ã€å°†ç¼“å­˜çš„è½¯ä»¶åŒ…å¤åˆ¶åˆ°yumä»“åº“ç›®å½•</span><br><span class="line">	[root@warehouse ~]<span class="comment"># cd /var/cache/yum/x86_64/7/base/packages/</span></span><br><span class="line">	[root@warehouse packages]<span class="comment"># cp -rp ./* /backup/</span></span><br><span class="line">    [root@warehouse packages]<span class="comment"># cd /backup/</span></span><br><span class="line">    [root@warehouse backup]<span class="comment"># ll</span></span><br><span class="line">    total 8964</span><br><span class="line">    -rw-r--r-- 1 root root 9175948 Oct 15 02:55 mariadb-5.5.68-1.el7.x86_64.rpm</span><br><span class="line">	</span><br><span class="line">2ã€å»ºç«‹è½¯ä»¶åŒ…ä¾èµ–å…³ç³»</span><br><span class="line">	[root@warehouse backup]<span class="comment"># yum install createrepo -y</span></span><br><span class="line">	[root@warehouse backup]<span class="comment"># createrepo /backup/</span></span><br><span class="line">    Spawning worker 0 with 1 pkgs</span><br><span class="line">    Spawning worker 1 with 0 pkgs</span><br><span class="line">    Workers Finished</span><br><span class="line">    Saving Primary metadata</span><br><span class="line">    Saving file lists metadata</span><br><span class="line">    Saving other metadata</span><br><span class="line">    Generating sqlite DBs</span><br><span class="line">    Sqlite DBs complete</span><br><span class="line">    [root@warehouse backup]<span class="comment"># ll</span></span><br><span class="line">    total 8968</span><br><span class="line">    -rw-r--r-- 1 root root 9175948 Oct 15 02:55 mariadb-5.5.68-1.el7.x86_64.rpm</span><br><span class="line">    drwxr-xr-x 2 root root    4096 Mar 18 08:54 repodata</span><br><span class="line">    [root@warehouse backup]<span class="comment"># ll repodata/</span></span><br><span class="line">    total 28</span><br><span class="line">    -rw-r--r-- 1 root root 1970 Mar 18 08:54 5d54624b2aa7a1fe974ff5553a9a78289683189c6a7b60c8c1421ecf011d270f-other.sqlite.bz2</span><br><span class="line">    -rw-r--r-- 1 root root 3449 Mar 18 08:54 5e68ee34f7e8f1a11a039f55c990bcc044f16bceb6af7f4486b55d518ad91346-primary.sqlite.bz2</span><br><span class="line">    -rw-r--r-- 1 root root  539 Mar 18 08:54 6e94b0fa1d98955542fb8238348ea171be7a130ba97573eb3ac756e1aadcec50-filelists.xml.gz</span><br><span class="line">    -rw-r--r-- 1 root root 1291 Mar 18 08:54 a9afb0b2457f41f5c2d64744a07d5d12599e6c2588c870ae73568cf345a0abca-other.xml.gz</span><br><span class="line">    -rw-r--r-- 1 root root 1333 Mar 18 08:54 cf41627875b17ef4bea5f0ea566ac63a5c83adc606d3ca730a74944ceb969028-primary.xml.gz</span><br><span class="line">    -rw-r--r-- 1 root root 1158 Mar 18 08:54 f34cbfd9e5608e8402041e98100f853e913f3df04d6946874c73ba31a78969ba-filelists.sqlite.bz2</span><br><span class="line">    -rw-r--r-- 1 root root 2969 Mar 18 08:54 repomd.xml</span><br><span class="line">    [root@warehouse backup]<span class="comment"># </span></span><br></pre></td></tr></table></figure>

<p>3ã€æµ‹è¯•è¿æ¥ï¼ˆæœ¬åœ°ç‰ˆæœ¬ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1ã€å¤‡ä»½ç³»ç»Ÿæ‰€æœ‰çš„yumæº</span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># mkdir backup1</span></span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># mv *.repo backup1</span></span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># vim local.repo</span></span><br><span class="line">[<span class="built_in">local</span>]</span><br><span class="line">name=<span class="string">&quot;This is xxx&quot;</span></span><br><span class="line">baseurl=file:///backup</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸…ç†yumç¼“å­˜</span></span><br><span class="line">[root@warehouse ~]<span class="comment"># yum clean all</span></span><br><span class="line">[root@warehouse ~]<span class="comment"># rm -rf /var/cache/yum/x86_64/7/*</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆæ–°çš„yumç¼“å­˜</span></span><br><span class="line">[root@warehouse ~]<span class="comment"># yum makecache</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•è¿æ¥</span></span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># rpm -e mariadb</span></span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># rpm -ql mariadb</span></span><br><span class="line">package mariadb is not installed</span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># yum install mariadb</span></span><br></pre></td></tr></table></figure>



<p>4ã€æµ‹è¯•è¿æ¥ï¼ˆè¿œç¨‹ç‰ˆæœ¬ï¼‰</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#########################  yumä»“åº“æœºå™¨ä¸Šæ‰§è¡Œ  ###################################</span></span><br><span class="line">1ã€å¤‡ä»½ç³»ç»Ÿæ‰€æœ‰çš„yumæº</span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># mkdir local</span></span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># mv *.repo local</span></span><br><span class="line"></span><br><span class="line">2ã€å®‰è£…è¿œç¨‹è®¿é—®è½¯ä»¶</span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># mv backup1/*  .</span></span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># yum install vsftpd -y</span></span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># systemctl enable --now vsftpd </span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/vsftpd.service to /usr/lib/systemd/system/vsftpd.service.</span><br><span class="line"></span><br><span class="line">3ã€é…ç½®ç³»ç»Ÿyumä»“åº“</span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># cd /var/ftp</span></span><br><span class="line">[root@warehouse ftp]<span class="comment"># mkdir yum_warehouse</span></span><br><span class="line"></span><br><span class="line">4ã€å°†è½¯ä»¶åŒ…å¤åˆ¶åˆ°yumä»“åº“ç›®å½•</span><br><span class="line">[root@warehouse ftp]<span class="comment"># cp -rp /backup/* /var/ftp/yum_warehouse/</span></span><br><span class="line">[root@warehouse ftp]<span class="comment"># ll yum_warehouse/</span></span><br><span class="line">total 8968</span><br><span class="line">-rw-r--r-- 1 root root 9175948 Oct 15 02:55 mariadb-5.5.68-1.el7.x86_64.rpm</span><br><span class="line">drwxr-xr-x 2 root root    4096 Mar 18 08:54 repodata</span><br><span class="line"></span><br><span class="line">5ã€å»ºç«‹yumè½¯ä»¶åŒ…ä¾èµ–å…³ç³»</span><br><span class="line">[root@warehouse ftp]<span class="comment"># createrepo /var/ftp/yum_warehouse/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#########################  yumæµ‹è¯•æœºå™¨ä¸Šæ‰§è¡Œ  ###################################</span></span><br><span class="line">1ã€æœ¬æœºæµ‹è¯•ç½‘ç»œè¿æ¥</span><br><span class="line">    1ã€å¤‡ä»½ç³»ç»Ÿæ‰€æœ‰çš„yumæº</span><br><span class="line">    [root@warehouse ftp]<span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line">    [root@warehouse yum.repos.d]<span class="comment"># mv *.repo backup1</span></span><br><span class="line">    [root@warehouse yum.repos.d]<span class="comment"># vim local.repo</span></span><br><span class="line">    [root@warehouse yum.repos.d]<span class="comment"># cat local.repo </span></span><br><span class="line">    [local-ftp]</span><br><span class="line">    name=<span class="string">&quot;This is ftp server&quot;</span></span><br><span class="line">    baseurl=ftp://172.16.1.30/yum_warehouse</span><br><span class="line">    gpgcheck=0</span><br><span class="line">    enabled=1</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ¸…ç†yumç¼“å­˜</span></span><br><span class="line">    [root@warehouse ~]<span class="comment"># yum clean all</span></span><br><span class="line">    [root@warehouse ~]<span class="comment"># rm -rf /var/cache/yum/x86_64/7/*</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç”Ÿæˆæ–°çš„yumç¼“å­˜</span></span><br><span class="line">    [root@warehouse ~]<span class="comment"># yum makecache</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># æµ‹è¯•è¿æ¥</span></span><br><span class="line">    [root@warehouse yum.repos.d]<span class="comment"># rpm -e mariadb</span></span><br><span class="line">    [root@warehouse yum.repos.d]<span class="comment"># rpm -ql mariadb</span></span><br><span class="line">    package mariadb is not installed</span><br><span class="line">    [root@warehouse yum.repos.d]<span class="comment"># yum install mariadb</span></span><br><span class="line"></span><br><span class="line">2ã€yumæµ‹è¯•æœºå™¨æ‰§è¡Œ</span><br><span class="line">	1ã€å¤‡ä»½yumä»“åº“å†…å®¹</span><br><span class="line">	[root@yum-test ~]<span class="comment"># cd /etc/yum.repos.d/</span></span><br><span class="line">    [root@yum-test yum.repos.d]<span class="comment"># mkdir backup1</span></span><br><span class="line">    [root@yum-test yum.repos.d]<span class="comment"># mv *.repo backup1</span></span><br><span class="line">    [root@yum-test yum.repos.d]<span class="comment"># ll</span></span><br><span class="line">    total 0</span><br><span class="line">    drwxr-xr-x. 2 root root 187 Mar  4 09:55 backup</span><br><span class="line">    drwxr-xr-x  2 root root 220 Mar 18 09:20 backup1</span><br><span class="line">    [root@yum-test yum.repos.d]<span class="comment"># </span></span><br><span class="line">    </span><br><span class="line">    2ã€ç¼–å†™æœ¬åœ°yumæºé…ç½®æ–‡ä»¶</span><br><span class="line">    [root@yum-test yum.repos.d]<span class="comment"># vim local.repo</span></span><br><span class="line">    [root@yum-test yum.repos.d]<span class="comment"># cat local.repo </span></span><br><span class="line">    [loacl-ftp-30]</span><br><span class="line">    name=<span class="string">&quot;This is 30 ftp server&quot;</span></span><br><span class="line">    baseurl=ftp://172.16.1.30/yum_warehouse</span><br><span class="line">    gpgcheck=0</span><br><span class="line">    enabled=1</span><br><span class="line">    </span><br><span class="line">    3ã€æ¸…ç†yumç¼“å­˜</span><br><span class="line">    [root@yum-test yum.repos.d]<span class="comment"># yum clean all</span></span><br><span class="line">    [root@yum-test yum.repos.d]<span class="comment"># rm -rf /var/cache/yum/x86_64/7/*</span></span><br><span class="line">    </span><br><span class="line">    4ã€ç”Ÿæˆyumç¼“å­˜</span><br><span class="line">    [root@yum-test yum.repos.d]<span class="comment"># yum makecache</span></span><br><span class="line">    </span><br><span class="line">    5ã€æµ‹è¯•å®‰è£…</span><br><span class="line">    [root@yum-test yum.repos.d]<span class="comment"># yum install mariadb</span></span><br></pre></td></tr></table></figure>



<p>4ã€åŒæ­¥è¿œç¨‹yumä»“åº“å†…å®¹åˆ°æœ¬æœº</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1ã€å®‰è£…åä¸ºäº‘é•œåƒä»“åº“</span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># rm -rf /etc/yum.repos.d/*</span></span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># wget -O /etc/yum.repos.d/CentOS-Base.repo https://repo.huaweicloud.com/repository/conf/CentOS-7-reg.repo</span></span><br><span class="line"></span><br><span class="line">2ã€ç”Ÿæˆyumç¼“å­˜</span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># yum clean all</span></span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># rm -rf /var/cache/yum/x86_64/7/*</span></span><br><span class="line">[root@warehouse yum.repos.d]<span class="comment"># yum makecache</span></span><br><span class="line"></span><br><span class="line">3ã€åŒæ­¥åä¸ºäº‘é•œåƒç«™è½¯ä»¶åŒ…åˆ°æœ¬åœ°yumä»“åº“</span><br><span class="line">[root@warehouse ftp]<span class="comment"># yum install yum-utils -y</span></span><br><span class="line">[root@warehouse ftp]<span class="comment"># reposync -r (ä»“åº“åç§°ï¼šyum repolist)</span></span><br><span class="line"></span><br><span class="line">4ã€å»ºç«‹ä¾èµ–å…³ç³»</span><br><span class="line">[root@warehouse ftp]<span class="comment"># createrepo base</span></span><br><span class="line"></span><br><span class="line">5ã€æµ‹è¯•</span><br><span class="line">    [loacl-ftp-30]</span><br><span class="line">    name=<span class="string">&quot;This is 30 ftp server&quot;</span></span><br><span class="line">    baseurl=ftp://172.16.1.30/base</span><br><span class="line">    gpgcheck=0</span><br><span class="line">    enabled=1</span><br></pre></td></tr></table></figure>

<p><img src="/.%5Cassets%5Cimage-20210318112338781.png" alt="image-20210318112338781"></p>
]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--netstatä½¿ç”¨</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day18-netstat%E4%BD%BF%E7%94%A8/%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="ç¬”è®°"><a href="#ç¬”è®°" class="headerlink" title="ç¬”è®°"></a>ç¬”è®°</h1><p>1ã€netstat</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">netstatä¸»è¦ç”¨æ¥æŸ¥è¯¢ç³»ç»Ÿç«¯å£ç›¸å…³é—®é¢˜</span><br><span class="line"></span><br><span class="line">æ³¨ï¼šè¦ä½¿ç”¨netstatï¼Œéœ€è¦å®‰è£…yum install -y net-tools</span><br><span class="line"></span><br><span class="line"><span class="comment"># netstatå¸¸ç”¨å‚æ•°</span></span><br><span class="line">-t : æ‰“å°tcpé“¾æ¥çš„è¿›ç¨‹</span><br><span class="line">-u : æ‰“å°UDPé“¾æ¥çš„è¿›ç¨‹</span><br><span class="line">-l : ç›‘å¬</span><br><span class="line">-p : æ‰“å°è¿›ç¨‹çš„PID</span><br><span class="line">-n : ä¸åè§£ï¼Œä¸å°†ipåœ°å€è§£ææˆåŸŸååŒæ—¶ä¸å°†ç«¯å£è§£ææˆå¯¹åº”çš„åè®®åç§°</span><br><span class="line"></span><br><span class="line">netstat -nutlp</span><br></pre></td></tr></table></figure>

<p>2ã€åˆ†åŒº</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç³»ç»Ÿç£ç›˜</span></span><br><span class="line">[root@localhost ~]<span class="comment"># lsblk </span></span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0    0   20G  0 disk </span><br><span class="line">â”œâ”€sda1            8:1    0    1G  0 part /boot</span><br><span class="line">â””â”€sda2            8:2    0   19G  0 part </span><br><span class="line">  â”œâ”€centos-root 253:0    0   18G  0 lvm  /</span><br><span class="line">  â””â”€centos-swap 253:1    0    1G  0 lvm  [SWAP]</span><br><span class="line">sdb               8:16   0   40G  0 disk </span><br><span class="line">sdc               8:32   0  3.9T  0 disk </span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ†åŒº</span></span><br><span class="line">[root@localhost ~]<span class="comment"># fdisk /dev/sdb </span></span><br><span class="line"></span><br><span class="line">n : æ–°å»ºä¸€ä¸ªåˆ†åŒº</span><br><span class="line">p : æŸ¥çœ‹åˆ†åŒºæƒ…å†µ</span><br><span class="line">m ï¼šæŸ¥çœ‹å¸®åŠ©</span><br><span class="line">d : åˆ é™¤åˆ†åŒº</span><br><span class="line">w ï¼›ä¿å­˜åˆ†åŒºä¿®æ”¹å†…å®¹</span><br></pre></td></tr></table></figure>

<p>3ã€ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿçš„æµç¨‹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1ã€è£…ç¡¬ç›˜</span><br><span class="line"></span><br><span class="line">2ã€æŸ¥çœ‹å½“å‰ç³»ç»Ÿç¡¬ç›˜</span><br><span class="line">[root@localhost a]<span class="comment"># lsblk </span></span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0    0   20G  0 disk </span><br><span class="line">â”œâ”€sda1            8:1    0    1G  0 part /boot</span><br><span class="line">â””â”€sda2            8:2    0   19G  0 part </span><br><span class="line">  â”œâ”€centos-root 253:0    0   18G  0 lvm  /</span><br><span class="line">  â””â”€centos-swap 253:1    0    1G  0 lvm  [SWAP]</span><br><span class="line">sdb               8:16   0   40G  0 disk </span><br><span class="line">sdc               8:32   0  3.9T  0 disk </span><br><span class="line">sr0              11:0    1  4.3G  0 rom  </span><br><span class="line"></span><br><span class="line">3ã€åˆ†åŒº</span><br><span class="line">	2TB ä»¥ä¸‹çš„ç¡¬ç›˜ï¼Œä½¿ç”¨MBRåˆ†åŒº</span><br><span class="line">	2TB ä»¥ä¸Šçš„ç¡¬ç›˜ï¼Œä½¿ç”¨GPTåˆ†åŒº</span><br><span class="line">	</span><br><span class="line">	fdisk /dev/sdb</span><br><span class="line"></span><br><span class="line">4ã€æ ¼å¼åŒ–åˆ†åŒºï¼ˆå°†åˆ†åŒºåšæˆæ–‡ä»¶ç³»ç»Ÿï¼‰</span><br><span class="line">	mkfs.xfs /dev/sdb1</span><br><span class="line"></span><br><span class="line">5ã€æŒ‚è½½åˆ†åŒº</span><br><span class="line">	mount /dev/sdb1  /a</span><br><span class="line"></span><br><span class="line">6ã€æ£€æµ‹</span><br><span class="line">	df</span><br><span class="line">		-h : æ˜¾ç¤ºç¡¬ç›˜å¤§å°å•ä½</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨ï¼šæŒ‚è½½å“ªä¸ªç¡¬ç›˜åˆ™æ˜¾ç¤ºå¯¹åº”ç¡¬ç›˜é‡Œé¢çš„å†…å®¹</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--é€»è¾‘å·ç®¡ç†</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day19-%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA/02_%E9%80%BB%E8%BE%91%E5%8D%B7%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<h2 id="ä¸€ã€LVMä»‹ç»"><a href="#ä¸€ã€LVMä»‹ç»" class="headerlink" title="ä¸€ã€LVMä»‹ç»"></a>ä¸€ã€LVMä»‹ç»</h2><p>â€‹	é€»è¾‘å·ç®¡ç†LVMæ˜¯ä¸€ä¸ªå¤šæ‰å¤šè‰ºçš„ç¡¬ç›˜ç³»ç»Ÿå·¥å…·ã€‚æ— è®ºåœ¨Linuxæˆ–è€…å…¶ä»–ç±»ä¼¼çš„ç³»ç»Ÿï¼Œéƒ½æ˜¯éå¸¸çš„å¥½ç”¨ã€‚ä¼ ç»Ÿåˆ†åŒºä½¿ç”¨å›ºå®šå¤§å°åˆ†åŒºï¼Œé‡æ–°è°ƒæ•´å¤§å°ååˆ†éº»çƒ¦ã€‚ä½†æ˜¯ï¼ŒLVMå¯ä»¥åˆ›å»ºå’Œç®¡ç†â€œé€»è¾‘â€å·ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ç‰©ç†ç¡¬ç›˜ã€‚å¯ä»¥è®©ç®¡ç†å‘˜å¼¹æ€§çš„ç®¡ç†é€»è¾‘å·çš„æ‰©å¤§ç¼©å°ï¼Œæ“ä½œç®€å•ï¼Œè€Œä¸æŸåå·²å­˜å‚¨çš„æ•°æ®ã€‚å¯ä»¥éšæ„å°†æ–°çš„ç¡¬ç›˜æ·»åŠ åˆ°LVMï¼Œä»¥ç›´æ¥æ‰©å±•å·²ç»å­˜åœ¨çš„é€»è¾‘å·ã€‚LVMå¹¶ä¸éœ€è¦é‡å¯å°±å¯ä»¥è®©å†…æ ¸çŸ¥é“åˆ†åŒºçš„å­˜åœ¨ã€‚</p>
<p>LVMä½¿ç”¨åˆ†å±‚ç»“æ„ï¼Œå¦‚ä¸‹å¦‚æ‰€ç¤ºï¼š</p>
<p><img src="/02_%E9%80%BB%E8%BE%91%E5%8D%B7%E7%AE%A1%E7%90%86.assets/134408sa12dauefffyszfg.jpg" alt="img"></p>
<p>â€‹	å›¾ä¸­é¡¶éƒ¨ï¼Œé¦–å…ˆæ˜¯å®é™…çš„ç‰©ç†ç£ç›˜åŠå…¶åˆ’åˆ†çš„åˆ†åŒºå’Œå…¶ä¸Šçš„ç‰©ç†å·ï¼ˆPVï¼‰ã€‚ä¸€ä¸ªæˆ–å¤šä¸ªç‰©ç†å·å¯ä»¥ç”¨æ¥åˆ›å»ºå·ç»„ï¼ˆVGï¼‰ã€‚ç„¶ååŸºäºå·ç»„å¯ä»¥åˆ›å»ºé€»è¾‘å·ï¼ˆLVï¼‰ã€‚åªè¦åœ¨å·ç»„ä¸­æœ‰å¯ç”¨ç©ºé—´ï¼Œå°±å¯ä»¥éšå¿ƒæ‰€æ¬²çš„åˆ›å»ºé€»è¾‘å·ã€‚æ–‡ä»¶ç³»ç»Ÿå°±æ˜¯åœ¨é€»è¾‘å·ä¸Šåˆ›å»ºçš„ï¼Œç„¶åå¯ä»¥åœ¨æ“ä½œç³»ç»ŸæŒ‚è½½å’Œè®¿é—®</p>
<h2 id="äºŒã€LVMä½¿ç”¨"><a href="#äºŒã€LVMä½¿ç”¨" class="headerlink" title="äºŒã€LVMä½¿ç”¨"></a>äºŒã€LVMä½¿ç”¨</h2><h3 id="2-1-ç£ç›˜å‡†å¤‡"><a href="#2-1-ç£ç›˜å‡†å¤‡" class="headerlink" title="2.1 ç£ç›˜å‡†å¤‡"></a>2.1 ç£ç›˜å‡†å¤‡</h3><p>åŠ è£…ä¸¤å—ç¡¬ç›˜ï¼Œsdb-10Gä¸sdc-5G</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# lsblk</span><br><span class="line">NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda      8:0    0   50G  0 disk</span><br><span class="line">â”œâ”€sda1   8:1    0    1G  0 part /boot</span><br><span class="line">â”œâ”€sda2   8:2    0    2G  0 part [SWAP]</span><br><span class="line">â””â”€sda3   8:3    0   47G  0 part /</span><br><span class="line">sdb      8:16   0   10G  0 disk</span><br><span class="line">sdc      8:32   0    5G  0 disk</span><br><span class="line">sr0     11:0    1  792M  0 rom</span><br></pre></td></tr></table></figure>

<p>ç»™sbdåˆ›å»ºLVMåˆ†åŒº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# fdisk /dev/sdb</span><br><span class="line">Welcome to fdisk (util-linux 2.23.2).</span><br><span class="line"></span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write command.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (m for help): n  # æ–°å»ºåˆ†åŒº</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p):</span><br><span class="line">Using default response p</span><br><span class="line">Partition number (1-4, default 1):</span><br><span class="line">First sector (2048-20971519, default 2048):</span><br><span class="line">Using default value 2048</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (2048-20971519, default 20971519): +2G</span><br><span class="line">Partition 1 of type Linux and of size 2 GiB is set</span><br><span class="line"></span><br><span class="line">Command (m for help): t  # å°†åˆ†åŒºæ”¹ä¸ºLVMåˆ†åŒº</span><br><span class="line">Selected partition 1</span><br><span class="line">Hex code (type L to list all codes): L</span><br><span class="line"></span><br><span class="line"> 0  Empty           24  NEC DOS         81  Minix / old Lin bf  Solaris</span><br><span class="line"> 1  FAT12           27  Hidden NTFS Win 82  Linux swap / So c1  DRDOS/sec (FAT-</span><br><span class="line"> 2  XENIX root      39  Plan 9          83  Linux           c4  DRDOS/sec (FAT-</span><br><span class="line"> 3  XENIX usr       3c  PartitionMagic  84  OS/2 hidden C:  c6  DRDOS/sec (FAT-</span><br><span class="line"> 4  FAT16 &lt;32M      40  Venix 80286     85  Linux extended  c7  Syrinx</span><br><span class="line"> 5  Extended        41  PPC PReP Boot   86  NTFS volume set da  Non-FS data</span><br><span class="line"> 6  FAT16           42  SFS             87  NTFS volume set db  CP/M / CTOS / .</span><br><span class="line"> 7  HPFS/NTFS/exFAT 4d  QNX4.x          88  Linux plaintext de  Dell Utility</span><br><span class="line"> 8  AIX             4e  QNX4.x 2nd part 8e  Linux LVM       df  BootIt</span><br><span class="line"> 9  AIX bootable    4f  QNX4.x 3rd part 93  Amoeba          e1  DOS access</span><br><span class="line"> a  OS/2 Boot Manag 50  OnTrack DM      94  Amoeba BBT      e3  DOS R/O</span><br><span class="line"> b  W95 FAT32       51  OnTrack DM6 Aux 9f  BSD/OS          e4  SpeedStor</span><br><span class="line"> c  W95 FAT32 (LBA) 52  CP/M            a0  IBM Thinkpad hi eb  BeOS fs</span><br><span class="line"> e  W95 FAT16 (LBA) 53  OnTrack DM6 Aux a5  FreeBSD         ee  GPT</span><br><span class="line"> f  W95 Ext&#x27;d (LBA) 54  OnTrackDM6      a6  OpenBSD         ef  EFI (FAT-12/16/</span><br><span class="line">10  OPUS            55  EZ-Drive        a7  NeXTSTEP        f0  Linux/PA-RISC b</span><br><span class="line">11  Hidden FAT12    56  Golden Bow      a8  Darwin UFS      f1  SpeedStor</span><br><span class="line">12  Compaq diagnost 5c  Priam Edisk     a9  NetBSD          f4  SpeedStor</span><br><span class="line">14  Hidden FAT16 &lt;3 61  SpeedStor       ab  Darwin boot     f2  DOS secondary</span><br><span class="line">16  Hidden FAT16    63  GNU HURD or Sys af  HFS / HFS+      fb  VMware VMFS</span><br><span class="line">17  Hidden HPFS/NTF 64  Novell Netware  b7  BSDI fs         fc  VMware VMKCORE</span><br><span class="line">18  AST SmartSleep  65  Novell Netware  b8  BSDI swap       fd  Linux raid auto</span><br><span class="line">1b  Hidden W95 FAT3 70  DiskSecure Mult bb  Boot Wizard hid fe  LANstep</span><br><span class="line">1c  Hidden W95 FAT3 75  PC/IX           be  Solaris boot    ff  BBT</span><br><span class="line">1e  Hidden W95 FAT1 80  Old Minix</span><br><span class="line">Hex code (type L to list all codes): 8e</span><br><span class="line">Changed type of partition &#x27;Linux&#x27; to &#x27;Linux LVM&#x27;</span><br><span class="line"></span><br><span class="line">Command (m for help): p</span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 10.7 GB, 10737418240 bytes, 20971520 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x0005122b</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1            2048     4196351     2097152   8e  Linux LVM</span><br></pre></td></tr></table></figure>

<p>é‡å¤æ·»åŠ ï¼Œå†åŠ ä¸€ä¸ª3Gï¼Œä¸€ä¸ª2Gçš„åˆ†åŒºï¼Œå¯è§åˆ†åŒºè¡¨å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# fdisk -l /dev/sdb</span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 10.7 GB, 10737418240 bytes, 20971520 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x0005122b</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdb1            2048     4196351     2097152   8e  Linux LVM</span><br><span class="line">/dev/sdb2         4196352    10487807     3145728   8e  Linux LVM</span><br><span class="line">/dev/sdb3        10487808    14682111     2097152   8e  Linux LVM</span><br></pre></td></tr></table></figure>

<h3 id="2-2-åˆ›å»ºç‰©ç†å·ï¼ˆPVï¼‰"><a href="#2-2-åˆ›å»ºç‰©ç†å·ï¼ˆPVï¼‰" class="headerlink" title="2.2 åˆ›å»ºç‰©ç†å·ï¼ˆPVï¼‰"></a>2.2 åˆ›å»ºç‰©ç†å·ï¼ˆPVï¼‰</h3><p>å®‰è£…LVMå·¥å…·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# yum install lvm2 </span><br></pre></td></tr></table></figure>

<p>å°†å‡†å¤‡å¥½çš„LVMåˆ†åŒºç”Ÿæˆä¸ºç‰©ç†å·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# pvcreate /dev/sdb1</span><br><span class="line">WARNING: ext4 signature detected on /dev/sdb1 at offset 1080. Wipe it? [y/n]: y</span><br><span class="line">  Wiping ext4 signature on /dev/sdb1.</span><br><span class="line">  Physical volume &quot;/dev/sdb1&quot; successfully created.</span><br><span class="line">[root@lb01 ~]# pvcreate /dev/sdb2</span><br><span class="line">  Physical volume &quot;/dev/sdb2&quot; successfully created.</span><br><span class="line">[root@lb01 ~]# pvcreate /dev/sdb3</span><br><span class="line">  Physical volume &quot;/dev/sdb3&quot; successfully created.</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹ç‰©ç†å·ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# pvdisplay</span><br><span class="line">  &quot;/dev/sdb1&quot; is a new physical volume of &quot;2.00 GiB&quot;</span><br><span class="line">  --- NEW Physical volume ---</span><br><span class="line">  PV Name               /dev/sdb1</span><br><span class="line">  VG Name</span><br><span class="line">  PV Size               2.00 GiB</span><br><span class="line">  Allocatable           NO</span><br><span class="line">  PE Size               0</span><br><span class="line">  Total PE              0</span><br><span class="line">  Free PE               0</span><br><span class="line">  Allocated PE          0</span><br><span class="line">  PV UUID               YUHdrd-AH1x-ew0m-Mp9i-3GHp-S4zc-XxlDJM</span><br><span class="line"></span><br><span class="line">  &quot;/dev/sdb2&quot; is a new physical volume of &quot;3.00 GiB&quot;</span><br><span class="line">  --- NEW Physical volume ---</span><br><span class="line">  PV Name               /dev/sdb2</span><br><span class="line">  VG Name</span><br><span class="line">  PV Size               3.00 GiB</span><br><span class="line">  Allocatable           NO</span><br><span class="line">  PE Size               0</span><br><span class="line">  Total PE              0</span><br><span class="line">  Free PE               0</span><br><span class="line">  Allocated PE          0</span><br><span class="line">  PV UUID               wGDQvx-7zfs-g018-wqx4-Y8rh-1kWT-PnLuFu</span><br><span class="line"></span><br><span class="line">  &quot;/dev/sdb3&quot; is a new physical volume of &quot;2.00 GiB&quot;</span><br><span class="line">  --- NEW Physical volume ---</span><br><span class="line">  PV Name               /dev/sdb3</span><br><span class="line">  VG Name</span><br><span class="line">  PV Size               2.00 GiB</span><br><span class="line">  Allocatable           NO</span><br><span class="line">  PE Size               0</span><br><span class="line">  Total PE              0</span><br><span class="line">  Free PE               0</span><br><span class="line">  Allocated PE          0</span><br><span class="line">  PV UUID               fykcuR-jooY-WKbi-yM8j-7fQ5-mhnH-JCkXC8</span><br></pre></td></tr></table></figure>

<p>è¡¥å……ï¼šå¦‚ä½•åˆ é™¤ç‰©ç†å·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# pvremove /dev/sdb1</span><br></pre></td></tr></table></figure>

<h3 id="2-3-åˆ›å»ºå·ç»„ï¼ˆVGï¼‰"><a href="#2-3-åˆ›å»ºå·ç»„ï¼ˆVGï¼‰" class="headerlink" title="2.3 åˆ›å»ºå·ç»„ï¼ˆVGï¼‰"></a>2.3 åˆ›å»ºå·ç»„ï¼ˆVGï¼‰</h3><p>å°†&#x2F;dev&#x2F;sdb{1,2,3}åˆå¹¶ä¸ºå·ç»„vg01</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# vgcreate vg01 /dev/sdb1 /dev/sdb2 /dev/sdb3</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹å·ç»„ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# vgdisplay</span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               vg01</span><br><span class="line">  System ID</span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        3</span><br><span class="line">  Metadata Sequence No  1</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                0</span><br><span class="line">  Open LV               0</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                3</span><br><span class="line">  Act PV                3</span><br><span class="line">  VG Size               &lt;6.99 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              1789</span><br><span class="line">  Alloc PE / Size       0 / 0</span><br><span class="line">  Free  PE / Size       1789 / &lt;6.99 GiB</span><br><span class="line">  VG UUID               gzeouH-16qO-n6xv-V6VM-A9ep-eK6E-ODuIwU</span><br></pre></td></tr></table></figure>

<p>è¡¥å……ï¼šå¦‚ä½•åˆ é™¤å·ç»„</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# vgremove vg01</span><br><span class="line">  Volume group &quot;vg01&quot; successfully removed</span><br></pre></td></tr></table></figure>

<h3 id="2-4-åˆ›å»ºé€»è¾‘å·ï¼ˆLVï¼‰"><a href="#2-4-åˆ›å»ºé€»è¾‘å·ï¼ˆLVï¼‰" class="headerlink" title="2.4 åˆ›å»ºé€»è¾‘å·ï¼ˆLVï¼‰"></a>2.4 åˆ›å»ºé€»è¾‘å·ï¼ˆLVï¼‰</h3><p>åˆ›å»ºä¸€ä¸ªåä¸ºlv01ï¼Œå¤§å°ä¸º100Mçš„é€»è¾‘å·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# lvcreate -L 100M -n lv01 vg01</span><br><span class="line">  Logical volume &quot;lv01&quot; created.</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹é€»è¾‘å·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# lvdisplay</span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/vg01/lv01</span><br><span class="line">  LV Name                lv01</span><br><span class="line">  VG Name                vg01</span><br><span class="line">  LV UUID                xFksnb-ENc2-mEo4-5gEb-yaJj-wP2c-oFuBeT</span><br><span class="line">  LV Write Access        read/write</span><br><span class="line">  LV Creation host, time lb01, 2021-09-01 20:39:16 +0800</span><br><span class="line">  LV Status              available</span><br><span class="line"><span class="meta">  #</span><span class="bash"> open                 0</span></span><br><span class="line">  LV Size                100.00 MiB</span><br><span class="line">  Current LE             25</span><br><span class="line">  Segments               1</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently set to     8192</span><br><span class="line">  Block device           253:0</span><br></pre></td></tr></table></figure>

<p>è¡¥å……ï¼šåˆ é™¤é€»è¾‘å·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# lvremove /dev/vg01/lv02</span><br><span class="line">Do you really want to remove active logical volume vg01/lv02? [y/n]: y</span><br><span class="line">  Logical volume &quot;lv02&quot; successfully removed</span><br></pre></td></tr></table></figure>

<h3 id="2-5-é€»è¾‘å·æŒ‚è½½"><a href="#2-5-é€»è¾‘å·æŒ‚è½½" class="headerlink" title="2.5 é€»è¾‘å·æŒ‚è½½"></a>2.5 é€»è¾‘å·æŒ‚è½½</h3><p>æ ¼å¼åŒ–é€»è¾‘å·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# mkfs.ext4 /dev/vg01/lv01</span><br><span class="line">mke2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">Filesystem label=</span><br><span class="line">OS type: Linux</span><br><span class="line">Block size=1024 (log=0)</span><br><span class="line">Fragment size=1024 (log=0)</span><br><span class="line">Stride=0 blocks, Stripe width=0 blocks</span><br><span class="line">25688 inodes, 102400 blocks</span><br><span class="line">5120 blocks (5.00%) reserved for the super user</span><br><span class="line">First data block=1</span><br><span class="line">Maximum filesystem blocks=33685504</span><br><span class="line">13 block groups</span><br><span class="line">8192 blocks per group, 8192 fragments per group</span><br><span class="line">1976 inodes per group</span><br><span class="line">Superblock backups stored on blocks:</span><br><span class="line">        8193, 24577, 40961, 57345, 73729</span><br><span class="line"></span><br><span class="line">Allocating group tables: done</span><br><span class="line">Writing inode tables: done</span><br><span class="line">Creating journal (4096 blocks): done</span><br><span class="line">Writing superblocks and filesystem accounting information: done</span><br></pre></td></tr></table></figure>

<p>æŒ‚è½½é€»è¾‘å·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# mkdir /mnt/test-lv01</span><br><span class="line">[root@lb01 ~]# mount /dev/vg01/lv01 /mnt/test-lv01</span><br><span class="line">[root@lb01 ~]# df -h</span><br><span class="line">Filesystem             Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda3               47G  1.9G   46G   4% /</span><br><span class="line">devtmpfs               479M     0  479M   0% /dev</span><br><span class="line">tmpfs                  489M     0  489M   0% /dev/shm</span><br><span class="line">tmpfs                  489M  6.8M  482M   2% /run</span><br><span class="line">tmpfs                  489M     0  489M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1             1014M  119M  896M  12% /boot</span><br><span class="line">tmpfs                   98M     0   98M   0% /run/user/0</span><br><span class="line">/dev/mapper/vg01-lv01   93M  1.6M   85M   2% /mnt/test-lv01</span><br></pre></td></tr></table></figure>

<h3 id="2-6-æ‰©å±•é€»è¾‘å·"><a href="#2-6-æ‰©å±•é€»è¾‘å·" class="headerlink" title="2.6 æ‰©å±•é€»è¾‘å·"></a>2.6 æ‰©å±•é€»è¾‘å·</h3><p>å¸è½½é€»è¾‘å·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# umount /dev/vg01/lv01</span><br></pre></td></tr></table></figure>

<p>å°†é€»è¾‘å·lv01è°ƒæ•´ä¸º200M</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# lvresize -L 200M /dev/vg01/lv01 </span><br><span class="line">  Size of logical volume vg01/lv01 changed from 100.00 MiB (25 extents) to 200.00 MiB (50 extents).</span><br><span class="line">  Logical volume vg01/lv01 successfully resized.</span><br></pre></td></tr></table></figure>

<p>æ£€æŸ¥ç£ç›˜é”™è¯¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# e2fsck -f /dev/vg01/lv01</span><br><span class="line">e2fsck 1.42.9 (28-Dec-2013)</span><br><span class="line">Pass 1: Checking inodes, blocks, and sizes</span><br><span class="line">Pass 2: Checking directory structure</span><br><span class="line">Pass 3: Checking directory connectivity</span><br><span class="line">Pass 4: Checking reference counts</span><br><span class="line">Pass 5: Checking group summary information</span><br><span class="line">/dev/vg01/lv01: 11/25688 files (9.1% non-contiguous), 8896/102400 blocks</span><br></pre></td></tr></table></figure>

<p>è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿå¤§å°</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# resize2fs /dev/vg01/lv01</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹é€»è¾‘å·ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# lvdisplay</span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/vg01/lv01</span><br><span class="line">  LV Name                lv01</span><br><span class="line">  VG Name                vg01</span><br><span class="line">  LV UUID                svm5Xk-B8jZ-QhZw-egCm-x6b2-e5Jt-wvMi2F</span><br><span class="line">  LV Write Access        read/write</span><br><span class="line">  LV Creation host, time lb01, 2021-09-01 20:41:53 +0800</span><br><span class="line">  LV Status              available</span><br><span class="line"><span class="meta">  #</span><span class="bash"> open                 0</span></span><br><span class="line">  LV Size                200.00 MiB</span><br><span class="line">  Current LE             50</span><br><span class="line">  Segments               2</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently set to     8192</span><br><span class="line">  Block device           253:0</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>

<p>é‡æ–°æŒ‚è½½ä½¿ç”¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# !mount</span><br><span class="line">mount /dev/vg01/lv01 /mnt/test-lv01</span><br><span class="line">[root@lb01 ~]# df -h</span><br><span class="line">Filesystem             Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda3               47G  1.9G   46G   4% /</span><br><span class="line">devtmpfs               479M     0  479M   0% /dev</span><br><span class="line">tmpfs                  489M     0  489M   0% /dev/shm</span><br><span class="line">tmpfs                  489M  6.8M  482M   2% /run</span><br><span class="line">tmpfs                  489M     0  489M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1             1014M  119M  896M  12% /boot</span><br><span class="line">tmpfs                   98M     0   98M   0% /run/user/0</span><br><span class="line">/dev/mapper/vg01-lv01  190M  1.6M  175M   1% /mnt/test-lv01</span><br></pre></td></tr></table></figure>

<h3 id="2-7-ç¼©å‡é€»è¾‘å·"><a href="#2-7-ç¼©å‡é€»è¾‘å·" class="headerlink" title="2.7 ç¼©å‡é€»è¾‘å·"></a>2.7 ç¼©å‡é€»è¾‘å·</h3><p>å¸è½½é€»è¾‘å·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# umount /dev/vg01/lv01</span><br></pre></td></tr></table></figure>

<p>æ£€æŸ¥ç£ç›˜é”™è¯¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# e2fsck -f /dev/vg01/lv01</span><br><span class="line">e2fsck 1.42.9 (28-Dec-2013)</span><br><span class="line">Pass 1: Checking inodes, blocks, and sizes</span><br><span class="line">Pass 2: Checking directory structure</span><br><span class="line">Pass 3: Checking directory connectivity</span><br><span class="line">Pass 4: Checking reference counts</span><br><span class="line">Pass 5: Checking group summary information</span><br><span class="line">/dev/vg01/lv01: 11/49400 files (9.1% non-contiguous), 11884/204800 blocks</span><br></pre></td></tr></table></figure>

<p>ç¼©å‡æ–‡ä»¶ç³»ç»Ÿå¤§å°ï¼Œæ›´æ–°ext4ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# resize2fs /dev/vg01/lv01 100M</span><br><span class="line">resize2fs 1.42.9 (28-Dec-2013)</span><br><span class="line">Resizing the filesystem on /dev/vg01/lv01 to 102400 (1k) blocks.</span><br><span class="line">The filesystem on /dev/vg01/lv01 is now 102400 blocks long.</span><br></pre></td></tr></table></figure>

<p>å®Œæˆåï¼Œå‡å°é€»è¾‘å·å¤§å°</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# lvresize -L 100M /dev/vg01/lv01</span><br><span class="line">  WARNING: Reducing active logical volume to 100.00 MiB.</span><br><span class="line">  THIS MAY DESTROY YOUR DATA (filesystem etc.)</span><br><span class="line">Do you really want to reduce vg01/lv01? [y/n]: y</span><br><span class="line">  Size of logical volume vg01/lv01 changed from 200.00 MiB (50 extents) to 100.00 MiB (25 extents).</span><br><span class="line">  Logical volume vg01/lv01 successfully resized.</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹é€»è¾‘å·ä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# lvdisplay</span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/vg01/lv01</span><br><span class="line">  LV Name                lv01</span><br><span class="line">  VG Name                vg01</span><br><span class="line">  LV UUID                svm5Xk-B8jZ-QhZw-egCm-x6b2-e5Jt-wvMi2F</span><br><span class="line">  LV Write Access        read/write</span><br><span class="line">  LV Creation host, time lb01, 2021-09-01 20:41:53 +0800</span><br><span class="line">  LV Status              available</span><br><span class="line"><span class="meta">  #</span><span class="bash"> open                 0</span></span><br><span class="line">  LV Size                100.00 MiB</span><br><span class="line">  Current LE             25</span><br><span class="line">  Segments               1</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently set to     8192</span><br><span class="line">  Block device           253:0</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>

<p>æŒ‚è½½ä½¿ç”¨</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# !mo</span><br><span class="line">mount /dev/vg01/lv01 /mnt/test-lv01</span><br><span class="line">[root@lb01 ~]# df -h</span><br><span class="line">Filesystem             Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda3               47G  1.9G   46G   4% /</span><br><span class="line">devtmpfs               479M     0  479M   0% /dev</span><br><span class="line">tmpfs                  489M     0  489M   0% /dev/shm</span><br><span class="line">tmpfs                  489M  6.8M  482M   2% /run</span><br><span class="line">tmpfs                  489M     0  489M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1             1014M  119M  896M  12% /boot</span><br><span class="line">tmpfs                   98M     0   98M   0% /run/user/0</span><br><span class="line">/dev/mapper/vg01-lv01   93M  1.6M   85M   2% /mnt/test-lv01</span><br></pre></td></tr></table></figure>

<h3 id="2-8-VGå¢åŠ ä¸€å—ç£ç›˜"><a href="#2-8-VGå¢åŠ ä¸€å—ç£ç›˜" class="headerlink" title="2.8 VGå¢åŠ ä¸€å—ç£ç›˜"></a>2.8 VGå¢åŠ ä¸€å—ç£ç›˜</h3><p>æ–°ç›˜åˆ›å»ºlvmåˆ†åŒº</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# fdisk /dev/sdc</span><br><span class="line">Welcome to fdisk (util-linux 2.23.2).</span><br><span class="line"></span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write command.</span><br><span class="line"></span><br><span class="line">Device does not contain a recognized partition table</span><br><span class="line">Building a new DOS disklabel with disk identifier 0x05ff27fa.</span><br><span class="line"></span><br><span class="line">Command (m for help): n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p):</span><br><span class="line">Using default response p</span><br><span class="line">Partition number (1-4, default 1):</span><br><span class="line">First sector (2048-10485759, default 2048):</span><br><span class="line">Using default value 2048</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (2048-10485759, default 10485759): +4G</span><br><span class="line">Partition 1 of type Linux and of size 4 GiB is set</span><br><span class="line"></span><br><span class="line">Command (m for help): t</span><br><span class="line">Selected partition 1</span><br><span class="line">Hex code (type L to list all codes):</span><br><span class="line">Hex code (type L to list all codes): 8e</span><br><span class="line">Changed type of partition &#x27;Linux&#x27; to &#x27;Linux LVM&#x27;</span><br><span class="line"></span><br><span class="line">Command (m for help): p</span><br><span class="line"></span><br><span class="line">Disk /dev/sdc: 5368 MB, 5368709120 bytes, 10485760 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x05ff27fa</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sdc1            2048     8390655     4194304   8e  Linux LVM</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºç‰©ç†å·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# pvcreate /dev/sdc1</span><br><span class="line">  Physical volume &quot;/dev/sdc1&quot; successfully created.</span><br></pre></td></tr></table></figure>

<p>æ‰©å®¹VG</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# vgextend vg01 /dev/sdc1</span><br><span class="line">  Volume group &quot;vg01&quot; successfully extended</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹VGä¿¡æ¯</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# vgdisplay vg01</span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               vg01</span><br><span class="line">  System ID</span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        4</span><br><span class="line">  Metadata Sequence No  10</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                2</span><br><span class="line">  Open LV               1</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                4</span><br><span class="line">  Act PV                4</span><br><span class="line">  VG Size               10.98 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              2812</span><br><span class="line">  Alloc PE / Size       50 / 200.00 MiB</span><br><span class="line">  Free  PE / Size       2762 / &lt;10.79 GiB</span><br><span class="line">  VG UUID               2Tjzna-XmXI-9MQ7-zeyc-AARV-84r5-jyymkf</span><br></pre></td></tr></table></figure>

<blockquote>
<p>PSï¼šå°½ç®¡æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„ç£ç›˜åšç¤ºèŒƒï¼Œå…¶å®åªè¦æ˜¯â€˜8eâ€™ç±»å‹çš„ç£ç›˜åˆ†åŒºéƒ½å¯ä»¥ç”¨æ¥æ‰©å±•å·ç»„ã€‚</p>
</blockquote>
<p>åœ¨VGä¸­åˆ›å»ºLVï¼Œå¯ä»¥çœ‹åˆ°ç£ç›˜éƒ½ç”¨ä¸Šäº†</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@lb01 ~]# lvcreate -L 10G -n lv03 vg01</span><br><span class="line">  Logical volume &quot;lv03&quot; created.</span><br><span class="line">[root@lb01 ~]# lsblk</span><br><span class="line">NAME          MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda             8:0    0   50G  0 disk</span><br><span class="line">â”œâ”€sda1          8:1    0    1G  0 part /boot</span><br><span class="line">â”œâ”€sda2          8:2    0    2G  0 part [SWAP]</span><br><span class="line">â””â”€sda3          8:3    0   47G  0 part /</span><br><span class="line">sdb             8:16   0   10G  0 disk</span><br><span class="line">â”œâ”€sdb1          8:17   0    2G  0 part</span><br><span class="line">â”‚ â”œâ”€vg01-lv01 253:0    0  100M  0 lvm  /mnt/test-lv01</span><br><span class="line">â”‚ â”œâ”€vg01-lv02 253:1    0  100M  0 lvm</span><br><span class="line">â”‚ â””â”€vg01-lv03 253:2    0   10G  0 lvm</span><br><span class="line">â”œâ”€sdb2          8:18   0    3G  0 part</span><br><span class="line">â”‚ â””â”€vg01-lv03 253:2    0   10G  0 lvm</span><br><span class="line">â””â”€sdb3          8:19   0    2G  0 part</span><br><span class="line">  â””â”€vg01-lv03 253:2    0   10G  0 lvm</span><br><span class="line">sdc             8:32   0    5G  0 disk</span><br><span class="line">â””â”€sdc1          8:33   0    4G  0 part</span><br><span class="line">  â””â”€vg01-lv03 253:2    0   10G  0 lvm</span><br><span class="line">sr0            11:0    1  792M  0 rom</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--ddä¸æ–‡ä»¶ç³»ç»Ÿå¤‡ä»½</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day20-dd%E4%B8%8E%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%A4%87%E4%BB%BD/%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h2 id="ç¬”è®°"><a href="#ç¬”è®°" class="headerlink" title="ç¬”è®°"></a>ç¬”è®°</h2><p>1ã€ddå‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">dd <span class="keyword">if</span>=/dev/zero of=/dev/sdb bs=500M count=1 </span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> : ä»å“ªé‡Œè¯»æ–‡ä»¶</span><br><span class="line">of : å†™å…¥åˆ°å“ªé‡Œ</span><br><span class="line">bs : å†™å…¥500M</span><br><span class="line">count : å†™ä¸€å—</span><br></pre></td></tr></table></figure>

<p>2ã€æ¨¡æ‹Ÿæ–‡ä»¶ç³»ç»Ÿå‡ºé—®é¢˜</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1ã€ç›´æ¥å‘ç¡¬ç›˜ä¸­å†™æ•°æ®ï¼Œä¸èƒ½æµ‹è¯•å‘åˆ†åŒºå†™æ•°æ®</span><br><span class="line">2ã€å¸è½½ä¹‹åé‡æ–°æŒ‚è½½</span><br><span class="line">[root@localhost ~]<span class="comment"># mount /dev/sdc1 /root/test</span></span><br><span class="line">mount: mount /dev/sdc1 on /root/<span class="built_in">test</span> failed: Structure needs cleaning</span><br><span class="line"></span><br><span class="line">3ã€å¯¹æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œä¿®å¤</span><br><span class="line">xfs_repair [ç£ç›˜æˆ–åˆ†åŒºè·¯å¾„]</span><br><span class="line"></span><br><span class="line">æ³¨ï¼š xfs_repairä¿®æ”¹ç¡¬ç›˜ä¹‹åï¼Œç¡¬ç›˜æ•°æ®ä¸¢å¤±ï¼Œæ‰€ä»¥å¯¹é‡è¦çš„æ•°æ®è¦è¿›è¡Œæ•°æ®å¤‡ä»½</span><br></pre></td></tr></table></figure>

<p>3ã€æ–‡ä»¶ç³»ç»Ÿçš„å¤‡ä»½ä¸æ¢å¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">å¤‡ä»½ï¼šå¦å¤–åœ¨ä¿å­˜ä¸€ä»½</span><br><span class="line">æ¢å¤ï¼šå°†ä»¥å‰ä¿å­˜çš„æ•°æ®è¿›è¡Œè¿˜åŸ</span><br><span class="line"></span><br><span class="line">touch 1.txt</span><br><span class="line"><span class="built_in">echo</span> aaaa &gt; 1.txt</span><br><span class="line">cp  1.txt   2.txt</span><br><span class="line"></span><br><span class="line">rm 1.txt</span><br><span class="line"></span><br><span class="line">cp 2.txt 1.txt</span><br><span class="line"></span><br><span class="line">1.log   1T = 1024G</span><br><span class="line"></span><br><span class="line">å…¨é‡å¤‡ä»½å’Œå¢é‡å¤‡ä»½</span><br><span class="line">å…¨é‡å¤‡ä»½ï¼šå°†éœ€è¦å¤‡ä»½çš„æ–‡ä»¶å…¨éƒ¨å¤åˆ¶ä¸€ä»½</span><br><span class="line">å¢é‡å¤‡ä»½ï¼šåœ¨åŸæ¥å¤‡ä»½åŸºç¡€ä¸Šï¼ŒæŠŠæ–°å¢æ•°æ®é‡æ–°å¤‡ä»½ä¸€ä»½</span><br><span class="line"></span><br><span class="line">å¤‡ä»½ä¸æ¢å¤çš„å‘½ä»¤</span><br><span class="line">xfsdump : å¤‡ä»½çš„å‘½ä»¤</span><br><span class="line">xfsrestore  : æ¢å¤çš„å‘½ä»¤</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤‡ä»½çš„æ­¥éª¤</span></span><br><span class="line">1ã€å®‰è£…å¤‡ä»½å‘½ä»¤</span><br><span class="line">[root@localhost <span class="built_in">test</span>]<span class="comment"># yum install xfsdump -y</span></span><br><span class="line"></span><br><span class="line">2ã€å¤‡ä»½çš„ç­‰çº§</span><br><span class="line">0  å…¨é‡å¤‡ä»½</span><br><span class="line"></span><br><span class="line">1 ~ 9 å¢é‡å¤‡ä»½ï¼ˆç­‰çº§ï¼‰</span><br><span class="line"></span><br><span class="line">3ã€å¤‡ä»½çš„å‚æ•°</span><br><span class="line">-L ï¼šè®°å½•æ¯æ¬¡å¤‡ä»½çš„åœ°æ–¹</span><br><span class="line">-M ï¼šæ³¨é‡Šï¼Œæ­¤æ¬¡å¤‡ä»½çš„æ³¨é‡Š</span><br><span class="line">-l ï¼šæŒ‡å®šå¤‡ä»½çš„ç­‰çº§</span><br><span class="line">-f ï¼šå¤‡ä»½çš„æ–‡ä»¶åç§°</span><br><span class="line">-I ï¼šæŸ¥çœ‹å¤‡ä»½ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">4ã€å¤‡ä»½çš„æ¡ä»¶ï¼ˆé™åˆ¶ï¼‰</span><br><span class="line">	1ã€å¿…é¡»ä½¿ç”¨rootæƒé™</span><br><span class="line">	2ã€åªèƒ½å¤‡ä»½å·²ç»æŒ‚è½½çš„å†…å®¹</span><br><span class="line">	3ã€åªèƒ½å¤‡ä»½xfsæ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">	4ã€åªèƒ½å¤Ÿç”¨xfsrestoreæ¥æ¢å¤</span><br><span class="line"></span><br><span class="line">5ã€å¤‡ä»½çš„å‘½ä»¤æ ¼å¼</span><br><span class="line">xfsdump [å‚æ•°] å¤‡ä»½è·¯å¾„</span><br><span class="line">xfsdump -L sdb1_bak -M <span class="string">&quot;sbd1_from_xxx&quot;</span> -l 0 -f sdb1_from_bak_1 /root/oldboy</span><br><span class="line"></span><br><span class="line">6ã€æ•°æ®æ¢å¤</span><br><span class="line">xfsrestore</span><br><span class="line"></span><br><span class="line">7ã€æ¢å¤æ•°æ®çš„å‚æ•°</span><br><span class="line">-f : æŒ‡å®šå¤‡ä»½çš„æ–‡ä»¶è·¯å¾„</span><br><span class="line"></span><br><span class="line">8ã€æ¢å¤çš„æ ¼å¼</span><br><span class="line">xfsrestore [å‚æ•°] æ¢å¤çš„è·¯å¾„</span><br><span class="line">[root@localhost oldboy]<span class="comment"># xfsrestore -f /root/sdb1_from_bak_3 /root/oldboy/</span></span><br></pre></td></tr></table></figure>

<p>4ã€LVM</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1ã€ä»€ä¹ˆæ˜¯lvm</span><br><span class="line"></span><br><span class="line">ä½ å¦‚ä½•ä¿è¯ä½ çš„ç¡¬ç›˜ç©ºé—´æ°å¥½å¤Ÿç”¨ï¼Ÿ</span><br><span class="line">å¦‚æœä½ çš„ç¡¬ç›˜ä½ å¤Ÿç”¨äº†æ€ä¹ˆæ‰©å®¹ï¼Ÿ</span><br><span class="line"></span><br><span class="line">LVMæ˜¯æ–‡ä»¶ç³»ç»Ÿç®¡ç†å·¥å…·</span><br><span class="line"></span><br><span class="line">/root/oldboy ---&gt;  lv[5G]</span><br><span class="line">/root/oldboy ---&gt;  lv[3G]</span><br><span class="line"></span><br><span class="line">2ã€LVMçš„ä¼˜ç‚¹</span><br><span class="line">	1ã€å¯ä»¥åŠ¨æ€æ‰©å®¹ä¸ç¼©å®¹</span><br><span class="line">	2ã€å¯ä»¥å°†æ–°å¢åŠ çš„ç¡¬ç›˜æ·»åŠ åˆ°VGå­˜å‚¨æ± </span><br><span class="line">	3ã€å¯ä»¥çªç ´ç‰©ç†å­˜å‚¨å·çš„é™åˆ¶</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3ã€ä½¿ç”¨lvm</span><br><span class="line">	1ã€å®‰è£…lvmè½¯ä»¶åŒ…</span><br><span class="line">		yum install lvm2 -y</span><br><span class="line">	2ã€å°†ç£ç›˜äº¤ç»™pv</span><br><span class="line">		pvreate [ç£ç›˜|ç£ç›˜åˆ†åŒº]</span><br><span class="line">	3ã€æŸ¥çœ‹pv</span><br><span class="line">		pvs</span><br><span class="line">		pvscan</span><br><span class="line">	4ã€åˆ›å»ºvg</span><br><span class="line">		vgcreate [vgåç§°] [pvè·¯å¾„]</span><br><span class="line">	5ã€æŸ¥çœ‹vg</span><br><span class="line">	6ã€åˆ›å»ºlvmé€»è¾‘å·ï¼ˆlvï¼‰</span><br><span class="line">		-L ï¼š åˆ›å»ºé€»è¾‘å·çš„å¤§å°</span><br><span class="line">		-n : é€»è¾‘å·çš„åå­—</span><br><span class="line">		lvcreate [å‚æ•°] é€»è¾‘å·åç§°</span><br><span class="line">	7ã€åˆ¶ä½œæ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">		mkfs.xfs /dev/vg1/xxx</span><br><span class="line">	</span><br><span class="line">	8ã€æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">		mount [lvçš„è·¯å¾„] [æŒ‚è½½ç‚¹çš„è·¯å¾„]</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--é˜²ç«å¢™ä¸iptables</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day22-%E9%98%B2%E7%81%AB%E5%A2%99%E4%B8%8Eiptables/iptables%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h1 id="iptablesä½¿ç”¨æ‰‹å†Œ"><a href="#iptablesä½¿ç”¨æ‰‹å†Œ" class="headerlink" title="iptablesä½¿ç”¨æ‰‹å†Œ"></a>iptablesä½¿ç”¨æ‰‹å†Œ</h1><h2 id="ä¸€ã€ç®€å•å®è·µ"><a href="#ä¸€ã€ç®€å•å®è·µ" class="headerlink" title="ä¸€ã€ç®€å•å®è·µ"></a>ä¸€ã€ç®€å•å®è·µ</h2><blockquote>
<p>ä»ä¿¡æ¯æŸ¥çœ‹ã€ä¿å­˜è§„åˆ™ã€æ¸…é™¤è§„åˆ™ã€æ¢å¤è§„åˆ™ã€æ›´æ”¹è§„åˆ™äº”ä¸ªæ–¹é¢æ¥å­¦ä¹ ã€‚</p>
</blockquote>
<h3 id="1-1-ä¿¡æ¯æŸ¥çœ‹"><a href="#1-1-ä¿¡æ¯æŸ¥çœ‹" class="headerlink" title="1.1 ä¿¡æ¯æŸ¥çœ‹"></a>1.1 ä¿¡æ¯æŸ¥çœ‹</h3><p>æŸ¥çœ‹ç°æœ‰è§„åˆ™</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# iptables -L</span><br><span class="line">Chain INPUT (policy ACCEPT)</span><br><span class="line">target     prot opt source               destination</span><br><span class="line">neutron-linuxbri-INPUT  all  --  anywhere             anywhere</span><br><span class="line">nova-api-INPUT  all  --  anywhere             anywhere</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT)</span><br><span class="line">target     prot opt source               destination</span><br><span class="line">neutron-filter-top  all  --  anywhere             anywhere</span><br><span class="line">neutron-linuxbri-FORWARD  all  --  anywhere             anywhere</span><br><span class="line">nova-filter-top  all  --  anywhere             anywhere</span><br><span class="line">nova-api-FORWARD  all  --  anywhere             anywhere</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹ç°æœ‰è§„åˆ™ï¼Œæ˜¾ç¤ºä¸»æœºipå’Œç«¯å£å·ï¼Œ-n</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# iptables -L -n</span><br><span class="line">Chain INPUT (policy ACCEPT)</span><br><span class="line">target     prot opt source               destination</span><br><span class="line">neutron-linuxbri-INPUT  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">nova-api-INPUT  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT)</span><br><span class="line">target     prot opt source               destination</span><br><span class="line">neutron-filter-top  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">neutron-linuxbri-FORWARD  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">nova-filter-top  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">nova-api-FORWARD  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç»“æœæ˜¾ç¤ºï¼š</p>
<p>é»˜è®¤æ˜¾ç¤ºä¸‰æ¡é“¾çš„è§„åˆ™INPUTã€FORWARDã€OUTPUTï¼Œè€Œä¸”æ‰€æœ‰çš„è§„åˆ™éƒ½æ˜¯é»˜è®¤æ¥å—çš„</p>
<p>æ¯æ¡é“¾ä¸‹é¢æ˜¾ç¤ºçš„ä¿¡æ¯æ˜¯ï¼š</p>
<p>åŠ¨ä½œ  åè®® å‚æ•° æºåœ°å€ ç›®æ ‡åœ°å€</p>
</blockquote>
<p>æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼Œ-v</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# iptables -L -n -v</span><br><span class="line">Chain INPUT (policy ACCEPT 11839 packets, 2842K bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">11839 2842K neutron-linuxbri-INPUT  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">12985 3090K nova-api-INPUT  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">    0     0 neutron-filter-top  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 neutron-linuxbri-FORWARD  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 nova-filter-top  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 nova-api-FORWARD  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç»“æœæ˜¾ç¤ºï¼š</p>
<p>-væ˜¾ç¤ºçš„å†…å®¹æ¯”-L -n æ˜¾ç¤ºçš„å†…å®¹å¤šäº†å››ä¸ªå­—æ®µ</p>
<p>pkts  è§„åˆ™åŒ¹é…åˆ°çš„æŠ¥æ–‡æ•°é‡çš„å¤šå°‘</p>
<p>bytes è§„åˆ™åŒ¹é…åˆ°çš„æŠ¥æ–‡å†…å®¹é‡çš„å¤§å°</p>
<p>in   è§„åˆ™åŒ¹é…åˆ°çš„æµå…¥çš„æ¥å£ï¼Œ*ä»£è¡¨ä»»æ„æ¥å£</p>
<p>out   è§„åˆ™åŒ¹é…åˆ°çš„æµå‡ºçš„æ¥å£</p>
</blockquote>
<p>æ˜¾ç¤ºè§„åˆ™çš„æ ‡å· â€“line-numbers</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# iptables -L -n -v --line-numbers</span><br><span class="line">Chain INPUT (policy ACCEPT 13663 packets, 3221K bytes)</span><br><span class="line">num   pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">1    13663 3221K neutron-linuxbri-INPUT  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">2    14809 3469K nova-api-INPUT  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)</span><br><span class="line">num   pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">1        0     0 neutron-filter-top  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">2        0     0 neutron-linuxbri-FORWARD  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">3        0     0 nova-filter-top  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">4        0     0 nova-api-FORWARD  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<p>æ‰“å°è§„åˆ™å‘½ä»¤ï¼Œå°†é˜²ç«å¢™çš„ç¼–å†™å‘½ä»¤ç»™æˆ‘ä»¬æ‰“å°å‡ºæ¥ï¼Œå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æ¥å­¦ä¹ è§„åˆ™çš„ç¼–å†™ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# iptables -S</span><br><span class="line">-P INPUT ACCEPT</span><br><span class="line">-P FORWARD ACCEPT</span><br><span class="line">-P OUTPUT ACCEPT</span><br><span class="line">-N neutron-filter-top</span><br><span class="line">-N neutron-linuxbri-FORWARD</span><br><span class="line">-N neutron-linuxbri-INPUT</span><br><span class="line">-N neutron-linuxbri-OUTPUT</span><br><span class="line">-N neutron-linuxbri-local</span><br><span class="line">-N neutron-linuxbri-scope</span><br><span class="line">-N neutron-linuxbri-sg-chain</span><br><span class="line">-N neutron-linuxbri-sg-fallback</span><br><span class="line">-N nova-api-FORWARD</span><br><span class="line">-N nova-api-INPUT</span><br><span class="line">-N nova-api-OUTPUT</span><br><span class="line">-N nova-api-local</span><br><span class="line">-N nova-filter-top</span><br><span class="line">-A INPUT -j neutron-linuxbri-INPUT</span><br><span class="line">-A INPUT -j nova-api-INPUT</span><br><span class="line">-A FORWARD -j neutron-filter-top</span><br><span class="line">-A FORWARD -j neutron-linuxbri-FORWARD</span><br><span class="line">-A FORWARD -j nova-filter-top</span><br><span class="line">-A FORWARD -j nova-api-FORWARD</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<h3 id="1-2-ä¿å­˜è§„åˆ™"><a href="#1-2-ä¿å­˜è§„åˆ™" class="headerlink" title="1.2 ä¿å­˜è§„åˆ™"></a>1.2 ä¿å­˜è§„åˆ™</h3><blockquote>
<p>ä½¿ç”¨ iptables-saveå‘½ä»¤å¯ä»¥ä¿å­˜è§„åˆ™</p>
</blockquote>
<p>å°†å½“å‰çš„è§„åˆ™ä¿å­˜åˆ°æ–‡ä»¶ä¸­</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@controller ~]# iptables-save &gt; iptables.rules</span><br><span class="line">[root@controller ~]# cat iptables.rules</span><br><span class="line"><span class="meta">#</span><span class="bash"> Generated by iptables-save v1.4.21 on Wed Oct 20 09:22:53 2021</span></span><br><span class="line">*filter</span><br><span class="line">:INPUT ACCEPT [16785:3861723]</span><br><span class="line">:FORWARD ACCEPT [0:0]</span><br><span class="line">:OUTPUT ACCEPT [16549:3883715]</span><br><span class="line">:neutron-filter-top - [0:0]</span><br><span class="line">:neutron-linuxbri-FORWARD - [0:0]</span><br><span class="line">:neutron-linuxbri-INPUT - [0:0]</span><br><span class="line">:neutron-linuxbri-OUTPUT - [0:0]</span><br><span class="line">:neutron-linuxbri-local - [0:0]</span><br><span class="line">:neutron-linuxbri-scope - [0:0]</span><br><span class="line">:neutron-linuxbri-sg-chain - [0:0]</span><br><span class="line">:neutron-linuxbri-sg-fallback - [0:0]</span><br><span class="line">:nova-api-FORWARD - [0:0]</span><br><span class="line">:nova-api-INPUT - [0:0]</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<h3 id="1-3-æ¸…é™¤è§„åˆ™"><a href="#1-3-æ¸…é™¤è§„åˆ™" class="headerlink" title="1.3 æ¸…é™¤è§„åˆ™"></a>1.3 æ¸…é™¤è§„åˆ™</h3><p>æ¸…é™¤å•ä¸ªè§„åˆ™</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å…ˆæŸ¥çœ‹</span></span><br><span class="line">[root@controller ~]# iptables -L -n --line-numbers</span><br><span class="line">Chain INPUT (policy ACCEPT)</span><br><span class="line">num  target     prot opt source               destination</span><br><span class="line">1    neutron-linuxbri-INPUT  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">2    nova-api-INPUT  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT)</span><br><span class="line">num  target     prot opt source               destination</span><br><span class="line">1    neutron-filter-top  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">2    neutron-linuxbri-FORWARD  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">3    nova-filter-top  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">4    nova-api-FORWARD  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">....</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ é™¤FORWARDçš„ç¬¬2æ¡è§„åˆ™</span></span><br><span class="line">[root@controller ~]# iptables -D FORWARD 2</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å†æ¬¡æŸ¥çœ‹ï¼Œåˆ é™¤æˆåŠŸ</span></span><br><span class="line">[root@controller ~]# iptables -L -n --line-numbers</span><br><span class="line">Chain INPUT (policy ACCEPT)</span><br><span class="line">num  target     prot opt source               destination</span><br><span class="line">1    neutron-linuxbri-INPUT  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">2    nova-api-INPUT  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT)</span><br><span class="line">num  target     prot opt source               destination</span><br><span class="line">1    neutron-filter-top  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">2    nova-filter-top  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">3    nova-api-FORWARD  all  --  0.0.0.0/0            0.0.0.0/0</span><br><span class="line">....</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœä¸æŒ‡å®šåˆ é™¤çš„åºå·ï¼Œä¼šæŠ¥é”™</span></span><br><span class="line">[root@controller ~]# iptables -D FORWARD</span><br><span class="line">iptables: Bad rule (does a matching rule exist in that chain?).</span><br></pre></td></tr></table></figure>

<p>æ¸…é™¤è§„åˆ™è®¡æ•°</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹åŸå†…å®¹</span></span><br><span class="line">[root@controller ~]# iptables -L -n -v</span><br><span class="line">Chain INPUT (policy ACCEPT 3196 packets, 657K bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">23118 5147K neutron-linuxbri-INPUT  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">24264 5395K nova-api-INPUT  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">    0     0 neutron-filter-top  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 nova-filter-top  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 nova-api-FORWARD  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">....</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ¸…é™¤è§„åˆ™è®¡æ•° -Z</span></span><br><span class="line">[root@controller ~]# iptables -Z</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹æ•ˆæœï¼Œpktsä¸byteså‡å°‘ï¼Œå³è§„åˆ™åŒ¹é…åˆ°çš„æŠ¥æ–‡æ•°é‡ä¸æŠ¥æ–‡å†…å®¹å¤§å°å‡å‡å°‘ï¼Œæ¸…é™¤æˆåŠŸ</span></span><br><span class="line">[root@controller ~]# iptables -L -n -v</span><br><span class="line">Chain INPUT (policy ACCEPT 58 packets, 11344 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">   58 11344 neutron-linuxbri-INPUT  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">   58 11344 nova-api-INPUT  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">    0     0 neutron-filter-top  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 nova-filter-top  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 nova-api-FORWARD  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<p>æ¸…é™¤æ‰€æœ‰è§„åˆ™</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ¸…é™¤é»˜è®¤è§„åˆ™</span></span><br><span class="line">[root@controller ~]# iptables -F</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ¸…é™¤è‡ªå®šä¹‰è§„åˆ™</span></span><br><span class="line">[root@controller ~]# iptables -X</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹æ•ˆæœ</span></span><br><span class="line">[root@controller ~]# iptables -L -n -v</span><br><span class="line">Chain INPUT (policy ACCEPT 424 packets, 84770 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line"></span><br><span class="line">Chain OUTPUT (policy ACCEPT 398 packets, 83826 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br></pre></td></tr></table></figure>

<h3 id="1-4-æ¢å¤è§„åˆ™"><a href="#1-4-æ¢å¤è§„åˆ™" class="headerlink" title="1.4 æ¢å¤è§„åˆ™"></a>1.4 æ¢å¤è§„åˆ™</h3><p>ä»å¤‡ä»½æ–‡ä»¶æ¢å¤è§„åˆ™</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä»æ–‡ä»¶æ¢å¤</span></span><br><span class="line">[root@controller ~]# iptables-restore &lt; iptables.rules</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹ç¡®è®¤å·²æ¢å¤</span></span><br><span class="line">[root@controller ~]# iptables -L -n -v</span><br><span class="line">Chain INPUT (policy ACCEPT 268 packets, 46570 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">  268 46570 neutron-linuxbri-INPUT  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">  268 46570 nova-api-INPUT  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">    0     0 neutron-filter-top  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 neutron-linuxbri-FORWARD  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 nova-filter-top  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 nova-api-FORWARD  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<h3 id="1-5-æ›´æ”¹è§„åˆ™"><a href="#1-5-æ›´æ”¹è§„åˆ™" class="headerlink" title="1.5 æ›´æ”¹è§„åˆ™"></a>1.5 æ›´æ”¹è§„åˆ™</h3><p>å¯ä»¥ä»ACCEPTæ”¹ä¸ºDROP</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹åŸè§„åˆ™</span></span><br><span class="line">[root@controller ~]# iptables -L -n -v</span><br><span class="line">Chain INPUT (policy ACCEPT 342 packets, 49890 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line"> 4455  836K neutron-linuxbri-INPUT  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line"> 4455  836K nova-api-INPUT  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">    0     0 neutron-filter-top  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 neutron-linuxbri-FORWARD  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 nova-filter-top  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 nova-api-FORWARD  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">....</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -P ä¿®æ”¹</span></span><br><span class="line">[root@controller ~]# iptables -P FORWARD DROP</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å†æ¬¡æŸ¥çœ‹ï¼ŒFORWARDé“¾ä¿®æ”¹DROPæˆåŠŸ</span></span><br><span class="line">[root@controller ~]# iptables -L -n -v</span><br><span class="line">Chain INPUT (policy ACCEPT 38 packets, 5017 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line"> 4849  905K neutron-linuxbri-INPUT  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line"> 4849  905K nova-api-INPUT  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy DROP 0 packets, 0 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">    0     0 neutron-filter-top  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 neutron-linuxbri-FORWARD  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 nova-filter-top  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 nova-api-FORWARD  all  --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<blockquote>
<p>-P æ›´æ”¹çš„è§„åˆ™ï¼Œä½¿ç”¨ -F ä¸èƒ½è‡ªåŠ¨è¿˜åŸ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">[root@controller ~]<span class="comment"># iptables -F</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">[root@controller ~]<span class="comment"># iptables -L -n -v</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">Chain INPUT (policy ACCEPT 36 packets, 6554 bytes)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">pkts bytes target     prot opt <span class="keyword">in</span>     out     <span class="built_in">source</span>               destination</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">Chain FORWARD (policy DROP 0 packets, 0 bytes)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">pkts bytes target     prot opt <span class="keyword">in</span>     out     <span class="built_in">source</span>               destination</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">....</span></span><br></pre></td></tr></table></figure>
</blockquote>
<p>é‡å¯iptablesæœåŠ¡åï¼Œå¯ä»¥ä½¿ç”¨ç³»ç»Ÿæ‰€æœ‰é»˜è®¤è§„åˆ™</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ¸…é™¤æ‰€æœ‰é»˜è®¤è§„åˆ™</span></span><br><span class="line">[root@controller ~]# iptables -F</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æŸ¥çœ‹ï¼Œæ²¡æœ‰é»˜è®¤è§„åˆ™</span></span><br><span class="line">[root@controller ~]# iptables -L -n -v</span><br><span class="line">Chain INPUT (policy ACCEPT 8 packets, 520 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line"></span><br><span class="line">Chain OUTPUT (policy ACCEPT 4 packets, 448 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡å¯iptablesæœåŠ¡</span></span><br><span class="line">[root@controller ~]# systemctl restart iptables</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å†æ¬¡æŸ¥çœ‹ï¼Œæ–°å¢äº†ç³»ç»Ÿçš„é»˜è®¤è§„åˆ™</span></span><br><span class="line">[root@controller ~]# iptables -L -n -v</span><br><span class="line">Chain INPUT (policy ACCEPT 0 packets, 0 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">    6   432 ACCEPT     all  --  *      *       0.0.0.0/0            0.0.0.0/0            state RELATED,ESTABLISHED</span><br><span class="line">    0     0 ACCEPT     icmp --  *      *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 ACCEPT     all  --  lo     *       0.0.0.0/0            0.0.0.0/0</span><br><span class="line">    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            state NEW tcp dpt:22</span><br><span class="line">    0     0 REJECT     all  --  *      *       0.0.0.0/0            0.0.0.0/0            reject-with icmp-host-prohibited</span><br><span class="line"></span><br><span class="line">Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br><span class="line">    0     0 REJECT     all  --  *      *       0.0.0.0/0            0.0.0.0/0            reject-with icmp-host-prohibited</span><br><span class="line"></span><br><span class="line">Chain OUTPUT (policy ACCEPT 4 packets, 544 bytes)</span><br><span class="line"> pkts bytes target     prot opt in     out     source               destination</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
  <entry>
    <title>è¿ç»´ä¹‹åŸºç¡€å‘½ä»¤--è®¡åˆ’ä»»åŠ¡</title>
    <url>/2022/07/06/01_%E8%BF%90%E7%BB%B4/01-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/day21-%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1/</url>
    <content><![CDATA[<h1 id="è®¡åˆ’ä»»åŠ¡"><a href="#è®¡åˆ’ä»»åŠ¡" class="headerlink" title="è®¡åˆ’ä»»åŠ¡"></a>è®¡åˆ’ä»»åŠ¡</h1><p>1ã€Crontabè¡¨è¾¾å¼</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">*  *  *  * * </span><br><span class="line">åˆ† æ—¶ æ—¥ æœˆ å‘¨</span><br><span class="line"></span><br><span class="line">æ¯å¤©çš„å‡Œæ™¨2ç‚¹   02ï¼š00     00 02 * * *</span><br><span class="line">æ¯æœˆæ‰§è¡Œä¸€æ¬¡    00  00  01  * *</span><br><span class="line">æ¯ä¸ªæœˆçš„ä¸€å·é›¶ç‚¹é›¶æ—¶é›¶åˆ†åŒæ—¶è¿™ä¸€å¤©æ—¶æ˜ŸæœŸå…­ 00  00  01  *  6</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2ã€ç³»ç»Ÿçº§åˆ«çš„è®¡åˆ’ä»»åŠ¡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">1ã€/etc/crontab</span><br><span class="line"></span><br><span class="line">2ã€å¦‚ä¸‹çš„ç›®å½•</span><br><span class="line">    /etc/cron.hourly/ <span class="comment"># ç³»ç»Ÿå®šæ—¶ä»»åŠ¡æ¯ä¸ªâ¼©æ—¶è¿â¾è¿™ä¸ªâ½¬å½•â¾¥çš„å†…å®¹</span></span><br><span class="line">    /etc/cron.daily/ <span class="comment"># ç³»ç»Ÿå®šæ—¶ä»»åŠ¡æ¯å¤©è¿â¾è¿™ä¸ªâ½¬å½•â¾¥çš„å†…å®¹</span></span><br><span class="line">    /etc/cron.weekly/ <span class="comment"># ç³»ç»Ÿå®šæ—¶ä»»åŠ¡æ¯å‘¨è¿â¾è¿™ä¸ªâ½¬å½•â¾¥çš„å†…å®¹</span></span><br><span class="line">    /etc/cron.monthly/ <span class="comment"># ç³»ç»Ÿå®šæ—¶ä»»åŠ¡æ¯â½‰è¿â¾è¿™ä¸ªâ½¬å½•â¾¥çš„å†…å®¹</span></span><br></pre></td></tr></table></figure>

<p>3ã€ç”¨æˆ·çº§åˆ«çš„è®¡åˆ’ä»»åŠ¡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">crontab -e</span><br><span class="line"></span><br><span class="line">-e : ç¼–è¾‘è®¡åˆ’ä»»åŠ¡</span><br><span class="line">-l : æŸ¥çœ‹è®¡åˆ’ä»»åŠ¡</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨ï¼šç”¨æˆ·çº§åˆ«çš„è®¡åˆ’ä»»åŠ¡å­˜æ”¾åœ¨/var/spool/cron/ï¼Œä¸åŒçš„ç”¨æˆ·å­˜æ”¾çš„è®¡åˆ’ä»»åŠ¡æ˜¯ä»¥å…¶è‡ªå·±çš„åå­—å‘½åçš„è„šæœ¬</span></span><br></pre></td></tr></table></figure>

<p>4ã€crontabè¯­æ³•</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1 3 5</span></span><br><span class="line">00 00 1,3,5 * *</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1åˆ°5å·</span></span><br><span class="line">00 00 1-5</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¯å‡ åˆ†é’Ÿï¼Œæ¯å‡ ä¸ªå°æ•°ï¼Œæ¯å‡ å¤©</span></span><br><span class="line">0/2  /2 </span><br><span class="line">00 0/2    00 /2</span><br><span class="line">00 00 0/2   00 00 /2</span><br></pre></td></tr></table></figure>



<p>5ã€æ¯3åˆ†é’ŸåŒæ­¥ä¸€ä¸‹ç³»ç»Ÿæ—¶é—´</p>
]]></content>
      <categories>
        <category>è¿ç»´</category>
        <category>ï¼ˆä¸€ï¼‰åŸºç¡€å‘½ä»¤</category>
      </categories>
  </entry>
</search>
