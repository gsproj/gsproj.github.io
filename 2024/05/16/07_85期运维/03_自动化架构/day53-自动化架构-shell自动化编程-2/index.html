<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>day53-自动化架构-shell自动化编程（二） | Haris的小站</title><meta name="author" content="Haris"><meta name="copyright" content="Haris"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="自动化架构-shell自动化编程（二）今日内容：  Shell数学运算 Shell逻辑判断  一、Shell数学运算1.1 运算符常用运算符：    shell-运算符 含义    + 加法符号   - 减法符号   * 乘法符号   / 除法符号   % 取余   ^或** 幂、指数 2^10=1024 10个2相乘.   i=i+1 i++ 计数，计算次数   j">
<meta property="og:type" content="article">
<meta property="og:title" content="day53-自动化架构-shell自动化编程（二）">
<meta property="og:url" content="http://gsproj.github.io/2024/05/16/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day53-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84-shell%E8%87%AA%E5%8A%A8%E5%8C%96%E7%BC%96%E7%A8%8B-2/index.html">
<meta property="og:site_name" content="Haris的小站">
<meta property="og:description" content="自动化架构-shell自动化编程（二）今日内容：  Shell数学运算 Shell逻辑判断  一、Shell数学运算1.1 运算符常用运算符：    shell-运算符 含义    + 加法符号   - 减法符号   * 乘法符号   / 除法符号   % 取余   ^或** 幂、指数 2^10=1024 10个2相乘.   i=i+1 i++ 计数，计算次数   j">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://gsproj.github.io/img/%E5%A4%B4%E5%83%8F.png">
<meta property="article:published_time" content="2024-05-16T07:23:52.000Z">
<meta property="article:modified_time" content="2024-08-02T01:48:34.361Z">
<meta property="article:author" content="Haris">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://gsproj.github.io/img/%E5%A4%B4%E5%83%8F.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "day53-自动化架构-shell自动化编程（二）",
  "url": "http://gsproj.github.io/2024/05/16/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day53-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84-shell%E8%87%AA%E5%8A%A8%E5%8C%96%E7%BC%96%E7%A8%8B-2/",
  "image": "http://gsproj.github.io/img/%E5%A4%B4%E5%83%8F.png",
  "datePublished": "2024-05-16T07:23:52.000Z",
  "dateModified": "2024-08-02T01:48:34.361Z",
  "author": [
    {
      "@type": "Person",
      "name": "Haris",
      "url": "http://gsproj.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://gsproj.github.io/2024/05/16/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day53-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84-shell%E8%87%AA%E5%8A%A8%E5%8C%96%E7%BC%96%E7%A8%8B-2/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'day53-自动化架构-shell自动化编程（二）',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/modify.css"><style>#article-container.post-content h1:before, h2:before, h3:before, h4:before, h5:before, h6:before { -webkit-animation: avatar_turn_around 1s linear infinite; -moz-animation: avatar_turn_around 1s linear infinite; -o-animation: avatar_turn_around 1s linear infinite; -ms-animation: avatar_turn_around 1s linear infinite; animation: avatar_turn_around 1s linear infinite; }</style><meta name="generator" content="Hexo 7.3.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="/css/loading-bar.css"><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg" style="background-image: url(/img/猫.png);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/%E5%A4%B4%E5%83%8F.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">210</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">30</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/car2.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Haris的小站</span></a><a class="nav-page-title" href="/"><span class="site-name">day53-自动化架构-shell自动化编程（二）</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">day53-自动化架构-shell自动化编程（二）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-05-16T07:23:52.000Z" title="发表于 2024-05-16 15:23:52">2024-05-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-02T01:48:34.361Z" title="更新于 2024-08-02 09:48:34">2024-08-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%BF%90%E7%BB%B4/">运维</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%BF%90%E7%BB%B4/%EF%BC%88%E4%BA%8C%EF%BC%89%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/">（二）综合架构</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><div class="top-img" style="background-image: url(/img/car2.png);"></div><article class="container post-content" id="article-container"><h1 id="自动化架构-shell自动化编程（二）"><a href="#自动化架构-shell自动化编程（二）" class="headerlink" title="自动化架构-shell自动化编程（二）"></a>自动化架构-shell自动化编程（二）</h1><p>今日内容：</p>
<ol>
<li>Shell数学运算</li>
<li>Shell逻辑判断</li>
</ol>
<h1 id="一、Shell数学运算"><a href="#一、Shell数学运算" class="headerlink" title="一、Shell数学运算"></a>一、Shell数学运算</h1><h2 id="1-1-运算符"><a href="#1-1-运算符" class="headerlink" title="1.1 运算符"></a>1.1 运算符</h2><p>常用运算符：</p>
<table>
<thead>
<tr>
<th>shell-运算符</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>+</td>
<td>加法符号</td>
</tr>
<tr>
<td>-</td>
<td>减法符号</td>
</tr>
<tr>
<td>*</td>
<td>乘法符号</td>
</tr>
<tr>
<td>/</td>
<td>除法符号</td>
</tr>
<tr>
<td>%</td>
<td>取余</td>
</tr>
<tr>
<td>^或** 幂、指数</td>
<td>2^10=1024 10个2相乘.</td>
</tr>
<tr>
<td>i=i+1 i++</td>
<td>计数，计算次数</td>
</tr>
<tr>
<td>j=j+5  j+=5</td>
<td>求和，累加</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>并且，前一个命令执行成功，再执行后面的命令(判断)</td>
</tr>
<tr>
<td>||</td>
<td>或者，前一个命令执行失败了，再执行后面的命令(判断)</td>
</tr>
</tbody></table>
<p>实验：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">随机数字对n取余，可以得到0到n-1范围内的随机数</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如：得到0-4的随机数</span></span><br><span class="line">echo $RANDOM % 5 | bc</span><br><span class="line">4</span><br><span class="line">echo $RANDOM % 5 | bc</span><br><span class="line">2</span><br><span class="line">echo $RANDOM % 5 | bc</span><br><span class="line">1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查目录是否存在</span></span><br><span class="line">ls /etc &amp;&amp; echo 目录存在</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">目录不存在则创建</span></span><br><span class="line">ls /data || mkdir -p /data</span><br></pre></td></tr></tbody></table></figure>

<h2 id="1-2-运算方法（重要）"><a href="#1-2-运算方法（重要）" class="headerlink" title="1.2 运算方法（重要）"></a>1.2 运算方法（重要）</h2><p>常用运算方法</p>
<table>
<thead>
<tr>
<th>运算的命令/符号</th>
<th>说明</th>
<th>应用场景</th>
</tr>
</thead>
<tbody><tr>
<td>awk</td>
<td>可以进行计算，带小数，可以与shell脚本进行变量传递</td>
<td>一般计算都可以用awk.</td>
</tr>
<tr>
<td>bc</td>
<td>带小数</td>
<td>一般计算都可以用bc.需要安装.</td>
</tr>
<tr>
<td>expr</td>
<td>进行计算,整数</td>
<td>一般用于检查输入内容是否为数字(方法之一).</td>
</tr>
<tr>
<td>let</td>
<td>进行计算,整数,变量直接使用即可</td>
<td>用于计算iՎҡ</td>
</tr>
<tr>
<td>$(())</td>
<td>进行计算，整数,变量直接使用即可。</td>
<td></td>
</tr>
<tr>
<td>$[]</td>
<td>进行计算，整数,变量直接使用即可。</td>
<td></td>
</tr>
</tbody></table>
<h3 id="1-2-1-使用awk计算（推荐）"><a href="#1-2-1-使用awk计算（推荐）" class="headerlink" title="1.2.1 使用awk计算（推荐）"></a>1.2.1 使用awk计算（推荐）</h3><blockquote>
<p>小数正常，10/20正常显示0.5</p>
</blockquote>
<p>基础用法</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@mn01[ /server/scripts/devops-shell]#awk 'BEGIN{print 1/3}'</span><br><span class="line">0.333333</span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#awk 'BEGIN{print 1/3 * 100}'</span><br><span class="line">32.3333</span><br></pre></td></tr></tbody></table></figure>

<p>在awk中使用shell变量</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">定义变量</span></span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#num1=100</span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#num2=200</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用变量</span></span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#awk -vn1=$num1 -vn2=$num2 'BEGIN{print n1/n2}'</span><br><span class="line">0.5</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>提示：</p>
<p>awk -v选项用于创建或修改awk中的变量。 </p>
<p><strong>-v是shell脚本与awk桥梁</strong></p>
<p>在awk中各种变量直接使用即可，不要加上$n1,如果加上了会被awk识别为取列  </p>
</blockquote>
<h3 id="1-2-2-使用bc计算"><a href="#1-2-2-使用bc计算" class="headerlink" title="1.2.2 使用bc计算"></a>1.2.2 使用bc计算</h3><blockquote>
<p>加上-l选项，小数正常，10/20正常显示0.50000</p>
</blockquote>
<p>熟悉基本使用方法</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-l 显示小数</span></span><br><span class="line">echo 1/3 |bc -l</span><br><span class="line">echo 2^10 |bc -l</span><br></pre></td></tr></tbody></table></figure>



<h3 id="1-2-3-使用expr计算"><a href="#1-2-3-使用expr计算" class="headerlink" title="1.2.3 使用expr计算"></a>1.2.3 使用expr计算</h3><blockquote>
<p>小数异常，10 / 20 = 0</p>
</blockquote>
<p>推荐用于判断变量是否是数字</p>
<p>用于计算坑很多，：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">不加空格报错</span></span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#expr 1+1</span><br><span class="line">1+1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">加空格正常</span></span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#expr 1 + 1</span><br><span class="line">2</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">到了乘法，不加转义符也报错</span></span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#expr 2 * 2</span><br><span class="line">expr: syntax error</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">加了转义符，乘法正常</span></span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#expr 2 \* 2</span><br><span class="line">4</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">除法</span></span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#expr 2 / 2</span><br><span class="line">1</span><br></pre></td></tr></tbody></table></figure>

<p>你以为就这些？还有个大坑！</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">$?常用来检测前一句命令是否执行正常</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">我们来执行一条<span class="built_in">expr</span>命令</span></span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#expr 1 + 1</span><br><span class="line">2</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">看似很正常</span></span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#echo $?</span><br><span class="line">0</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">再执行一条</span></span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#expr 0 + 0</span><br><span class="line">0</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">不是吧！明明成功了，为什么返回1</span></span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#echo $?</span><br><span class="line">1</span><br></pre></td></tr></tbody></table></figure>

<h4 id="案例：检测输入内容是否是数字"><a href="#案例：检测输入内容是否是数字" class="headerlink" title="案例：检测输入内容是否是数字"></a>案例：检测输入内容是否是数字</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############################################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">File Name:07_check_num.sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Version:V1.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Author:Haris Gong</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Organization:gsproj.github.io</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Desc:检测输入的内容是不是数字</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############################################################</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">输入</span></span><br><span class="line">read -p "请输入数字: " num</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检测</span></span><br><span class="line">expr $num \* 0 + 1 &amp;&gt;/dev/null &amp;&amp; echo "$num是数字"</span><br><span class="line">expr $num \* 0 + 1 &amp;&gt;/dev/null || echo "$num不是数字"</span><br></pre></td></tr></tbody></table></figure>

<p>测试</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@mn01[ /server/scripts/devops-shell]#bash 07_check_num.sh</span><br><span class="line">请输入数字: dadsadsa</span><br><span class="line">dadsadsa不是数字</span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#bash 07_check_num.sh</span><br><span class="line">请输入数字: 123123</span><br><span class="line">123123是数字</span><br></pre></td></tr></tbody></table></figure>

<p>实现原理：expr可以判断是不是整数</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@mn01[ /]#num=rewrew</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">计算失败</span></span><br><span class="line">[root@mn01[ /]#expr $num \* 0 + 1</span><br><span class="line">expr: non-integer argument</span><br><span class="line"></span><br><span class="line">[root@mn01[ /]#num=321321</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">计算成功</span></span><br><span class="line">[root@mn01[ /]#expr $num \* 0 + 1</span><br><span class="line">1</span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-2-4-使用let进行计算"><a href="#1-2-4-使用let进行计算" class="headerlink" title="1.2.4 使用let进行计算"></a>1.2.4 使用let进行计算</h3><blockquote>
<p>小数异常，10/20=0</p>
</blockquote>
<p>基本使用</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">定义变量</span></span><br><span class="line">[root@mn01[ /]#n1=666</span><br><span class="line">[root@mn01[ /]#n2=999</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可以直接使用变量</span></span><br><span class="line">[root@mn01[ /]#let c=n1+n2</span><br><span class="line">[root@mn01[ /]#echo $c</span><br><span class="line">1665</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">还可以进行累加</span></span><br><span class="line">[root@mn01[ /]#let c++</span><br><span class="line">[root@mn01[ /]#echo $c</span><br><span class="line">1666</span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-2-5-使用-进行计算"><a href="#1-2-5-使用-进行计算" class="headerlink" title="1.2.5 使用$(())进行计算"></a>1.2.5 使用$(())进行计算</h3><blockquote>
<p>小数异常，10/20=0</p>
</blockquote>
<p>基本使用</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">直接计算</span></span><br><span class="line">[root@mn01[ /]#echo $((n1+n2))</span><br><span class="line">1665</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">赋值给变量</span></span><br><span class="line">[root@mn01[ /]#d=$((n1+n2))</span><br><span class="line">[root@mn01[ /]#echo $d</span><br><span class="line">1665</span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-2-6-使用-进行计算"><a href="#1-2-6-使用-进行计算" class="headerlink" title="1.2.6 使用$[]进行计算"></a>1.2.6 使用$[]进行计算</h3><blockquote>
<p>小数异常，10/20=0</p>
</blockquote>
<p>基本用法，跟$(())类似</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@mn01[ /]#echo $[n1+n2]</span><br><span class="line">1665</span><br><span class="line">[root@mn01[ /]#d=$[n1+n2]</span><br><span class="line">[root@mn01[ /]#echo $d</span><br><span class="line">1665</span><br></pre></td></tr></tbody></table></figure>

<h2 id="1-3-运算案例"><a href="#1-3-运算案例" class="headerlink" title="1.3 运算案例"></a>1.3 运算案例</h2><h3 id="案例1：计算器"><a href="#案例1：计算器" class="headerlink" title="案例1：计算器"></a>案例1：计算器</h3><p>参数传入脚本中2个参数，进行计算，输出结果，要求</p>
 <figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sh 11.num_calc.sh 10 20</span><br><span class="line">计算10-20:结果</span><br><span class="line">计算10+20:结果</span><br><span class="line">计算10*20:结果</span><br><span class="line">计算10/20:结果</span><br></pre></td></tr></tbody></table></figure>

<p>实现：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############################################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">File Name:08_num_calc.sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Version:V1.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Author:Haris Gong</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Organization:gsproj.github.io</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Desc: 计算器</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############################################################</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">num1=$1</span><br><span class="line">num2=$2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">参数判断</span></span><br><span class="line">expr $num1 \* 0 + $num2 \* 0 + 1 &amp;&gt;/dev/null || {</span><br><span class="line">  echo "参数错误!"</span><br><span class="line">  echo "Usage: $0 数字1 数字2"</span><br><span class="line">  exit 1</span><br><span class="line">}</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">计算</span></span><br><span class="line">echo "计算$num1 - $num2 = `awk -vn1=$num1 -vn2=$num2 'BEGIN{print n1 - n2}'`"</span><br><span class="line">echo "计算$num1 + $num2 = `awk -vn1=$num1 -vn2=$num2 'BEGIN{print n1 + n2}'`"</span><br><span class="line">echo "计算$num1 * $num2 = `awk -vn1=$num1 -vn2=$num2 'BEGIN{print n1 * n2}'`"</span><br><span class="line">echo "计算$num1 / $num2 = `awk -vn1=$num1 -vn2=$num2 'BEGIN{print n1 / n2}'`"</span><br></pre></td></tr></tbody></table></figure>

<p>测试</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@mn01[ /server/scripts/devops-shell]#bash 08_num_calc.sh</span><br><span class="line">参数错误!</span><br><span class="line">Usage: 08_num_calc.sh 数字1 数字2</span><br><span class="line">[root@mn01[ /server/scripts/devops-shell]#bash 08_num_calc.sh 10 20</span><br><span class="line">计算10 - 20 = -10</span><br><span class="line">计算10 + 20 = 30</span><br><span class="line">计算10 * 20 = 200</span><br><span class="line">计算10 / 20 = 0.5</span><br></pre></td></tr></tbody></table></figure>

<h3 id="案例2：计算器改写"><a href="#案例2：计算器改写" class="headerlink" title="案例2：计算器改写"></a>案例2：计算器改写</h3><p>改成read读取参数</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">cat 08_num_calc.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############################################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">File Name:08_num_calc.sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Version:V1.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Author:Haris Gong</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Organization:gsproj.github.io</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Desc: 计算器</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############################################################</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">read -p "请输入数字num1 num2: " num1 num2</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">参数判断</span></span><br><span class="line">expr $num1 \* 0 + $num2 \* 0 + 1 &amp;&gt;/dev/null || {</span><br><span class="line">  echo "参数错误!"</span><br><span class="line">  echo "Usage: $0 数字1 数字2"</span><br><span class="line">  exit 1</span><br><span class="line">}</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">计算</span></span><br><span class="line">echo "计算$num1 - $num2 = `awk -vn1=$num1 -vn2=$num2 'BEGIN{print n1 - n2}'`"</span><br><span class="line">echo "计算$num1 + $num2 = `awk -vn1=$num1 -vn2=$num2 'BEGIN{print n1 + n2}'`"</span><br><span class="line">echo "计算$num1 * $num2 = `awk -vn1=$num1 -vn2=$num2 'BEGIN{print n1 * n2}'`"</span><br><span class="line">echo "计算$num1 / $num2 = `awk -vn1=$num1 -vn2=$num2 'BEGIN{print n1 / n2}'`"</span><br></pre></td></tr></tbody></table></figure>



<h1 id="二、Shell逻辑判断"><a href="#二、Shell逻辑判断" class="headerlink" title="二、Shell逻辑判断"></a>二、Shell逻辑判断</h1><p>逻辑判断分为：</p>
<ul>
<li>条件表达式：最基本的判断（核心）</li>
<li>if判断：更加灵活</li>
<li>case语句：适用于做选择</li>
</ul>
<h2 id="2-1-条件表达式"><a href="#2-1-条件表达式" class="headerlink" title="2.1 条件表达式"></a>2.1 条件表达式</h2><p>条件表达式，也叫条件测试语句，属于判断中的核心，if后面都在使用它</p>
<p>目标:</p>
<ul>
<li>熟练掌握条件表达式的格式.</li>
<li>熟练使用条件表达式进行判断（文件，大小，与或非）</li>
</ul>
<h3 id="2-1-1-格式"><a href="#2-1-1-格式" class="headerlink" title="2.1.1 格式"></a>2.1.1 格式</h3><p>格式如下</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">判断指定路径是否存在且为文件</span></span><br><span class="line">[ -f /etc/hosts ]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者</span></span><br><span class="line">test -f /etc/hosts</span><br></pre></td></tr></tbody></table></figure>

<h4 id="面试题：-和-的区别"><a href="#面试题：-和-的区别" class="headerlink" title="面试题：[]和[[]]的区别"></a>面试题：[]和[[]]的区别</h4><table>
<thead>
<tr>
<th>含义与特点</th>
<th>test或[]</th>
<th>[[]]或(())</th>
</tr>
</thead>
<tbody><tr>
<td>共同点</td>
<td>都可以用于判断</td>
<td>都可以用于判断</td>
</tr>
<tr>
<td>区别1</td>
<td>不支持正则</td>
<td>[[]]支持正则</td>
</tr>
<tr>
<td>区别2</td>
<td>表示逻辑关系(与或非)符号不同 -a -o !  -gt</td>
<td>[[ ]] &amp;&amp; || ! &gt; &lt; &lt;= &gt;=</td>
</tr>
<tr>
<td>应用场景</td>
<td>常见判断</td>
<td>使用正则[[]]<br>进行运算(())</td>
</tr>
</tbody></table>
<h3 id="2-1-2-判断文件"><a href="#2-1-2-判断文件" class="headerlink" title="2.1.2 判断文件"></a>2.1.2 判断文件</h3><p>常用如下</p>
<table>
<thead>
<tr>
<th>条件表达式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>-f</strong></td>
<td>判断指定路径是否存在且为文件，是文件，返回true</td>
</tr>
<tr>
<td><strong>-d</strong></td>
<td>判断指定路径是否存在且为文件夹，是文件夹，返回true</td>
</tr>
<tr>
<td>-x</td>
<td>判断指定路径是否存在且具有可执行权限</td>
</tr>
<tr>
<td>-s</td>
<td>判断指定文件是否存在且有内容(大小&gt;0)，非空为真</td>
</tr>
<tr>
<td>-r</td>
<td>是否具有读权限</td>
</tr>
<tr>
<td>-w</td>
<td>是否具有写权限</td>
</tr>
<tr>
<td>-nt</td>
<td>newer than 对比两个文件修改时间，是否更新</td>
</tr>
<tr>
<td>-ot</td>
<td>older than 对比两个文件修改时间，是否更老</td>
</tr>
<tr>
<td>-L</td>
<td>是否是软连接</td>
</tr>
<tr>
<td>-e</td>
<td>是否存在（任何文件类型）</td>
</tr>
</tbody></table>
<h4 id="检测：文件是否存在"><a href="#检测：文件是否存在" class="headerlink" title="检测：文件是否存在"></a>检测：文件是否存在</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ -f /etc/hosts ] &amp;&amp; echo "成立 " || echo "失败"</span><br><span class="line">[ -f /etchosts ] &amp;&amp; echo "成立 " || echo "失败"</span><br><span class="line">test -f /etchosts &amp;&amp; echo "成立 " || echo "失败"</span><br></pre></td></tr></tbody></table></figure>

<h4 id="检测：目录是否存在"><a href="#检测：目录是否存在" class="headerlink" title="检测：目录是否存在"></a>检测：目录是否存在</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[ -d /etc/ ] &amp;&amp; echo "成立 " || echo "失败"</span><br><span class="line">成立</span><br><span class="line">[ -d /etc/hosts ] &amp;&amp; echo "成立 " || echo "失败"</span><br><span class="line">失败</span><br></pre></td></tr></tbody></table></figure>

<h4 id="检测：是否有执行权限"><a href="#检测：是否有执行权限" class="headerlink" title="检测：是否有执行权限"></a>检测：是否有执行权限</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">检查/etc/rc.d/rc.local是否有执行权限.</span></span><br><span class="line">[ -x /etc/rc.d/rc.local ] &amp;&amp; echo "成立 " || echo "失败"</span><br><span class="line">失败</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在脚本中的使用</span></span><br><span class="line">[ -x /sbin/ip ] || exit 1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ip命令是否有执行权限，如果没有则退出</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="检测：文件是否有内容"><a href="#检测：文件是否有内容" class="headerlink" title="检测：文件是否有内容"></a>检测：文件是否有内容</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建空文件</span></span><br><span class="line">[root@mn01[ /tmp]#&gt;test.sh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">有内容为真（&gt;0），没有内容为假(0)</span></span><br><span class="line">[root@mn01[ /tmp]#[ -s test.sh ] &amp;&amp; echo "有内容" || echo "没内容"</span><br><span class="line">没内容</span><br></pre></td></tr></tbody></table></figure>

<h3 id="2-1-3-对比字符串"><a href="#2-1-3-对比字符串" class="headerlink" title="2.1.3 对比字符串"></a>2.1.3 对比字符串</h3><p>用于对比两个字符串的内容</p>
<table>
<thead>
<tr>
<th>对比选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>“str1” = “str2”</td>
<td>str1是否等于str2，相等为真</td>
</tr>
<tr>
<td>“str1” != “str2”</td>
<td>str1是否不等于str2，不相等为真</td>
</tr>
<tr>
<td>-z “str”</td>
<td>zero 检查str字符串是否是空的，空为真</td>
</tr>
<tr>
<td>-n “str”</td>
<td>no zero 检查str字符串是否不是空的，非空（有内容）为真</td>
</tr>
</tbody></table>
<h4 id="对比两字符串是否相等"><a href="#对比两字符串是否相等" class="headerlink" title="对比两字符串是否相等"></a>对比两字符串是否相等</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">input=start</span><br><span class="line">[ "$input" = "start" ] &amp;&amp; echo "成立 " || echo "失败"</span><br><span class="line">成立</span><br></pre></td></tr></tbody></table></figure>

<p>应用：判断程序是否是Root执行</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ "$UID" != "0" ] &amp;&amp; exit 4</span><br></pre></td></tr></tbody></table></figure>

<p>企业级小技巧：在进行字符串比较的时候，变量尾巴加个x，防止变量为空，造成匹配/执行失败</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">定义变量</span></span><br><span class="line">str1=qwer</span><br><span class="line">str2=asdf</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">对比字符串，加x</span></span><br><span class="line">[ "${str1}x" = "${str2}x" ] &amp;&amp; echo "成立" || echo "失败"</span><br><span class="line">失败</span><br></pre></td></tr></tbody></table></figure>

<h4 id="检查字符串是否为空"><a href="#检查字符串是否为空" class="headerlink" title="检查字符串是否为空"></a>检查字符串是否为空</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">字符串有内容</span></span><br><span class="line">[root@mn01[ /tmp]#echo $str2</span><br><span class="line">test</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">判断是否为空</span></span><br><span class="line">[root@mn01[ /tmp]#[ -z "$str2" ] &amp;&amp; echo "变量为空" || echo "变量非空"</span><br><span class="line">变量非空</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">判断是否为非空</span></span><br><span class="line">[root@mn01[ /tmp]#[ -n "$str2" ] &amp;&amp; echo "变量非空" || echo "变量为空"</span><br><span class="line">变量非空</span><br></pre></td></tr></tbody></table></figure>

<h3 id="2-1-4-比大小"><a href="#2-1-4-比大小" class="headerlink" title="2.1.4 比大小"></a>2.1.4 比大小</h3><p>常用：</p>
<ul>
<li>-eq：equal 等于</li>
<li>-gt：greater than 大于</li>
<li>-lt：less than 小于</li>
</ul>
<table>
<thead>
<tr>
<th>比大小（整数）</th>
<th>[]</th>
<th>[[]]</th>
</tr>
</thead>
<tbody><tr>
<td>大于</td>
<td>-gt</td>
<td>&gt;</td>
</tr>
<tr>
<td>大于等于</td>
<td>-ge</td>
<td>&gt;=</td>
</tr>
<tr>
<td>小于</td>
<td>-lt</td>
<td>&lt;</td>
</tr>
<tr>
<td>小于等于</td>
<td>-le</td>
<td>&lt;=</td>
</tr>
<tr>
<td>等于</td>
<td>-eq</td>
<td>==</td>
</tr>
<tr>
<td>不等于</td>
<td>-ne</td>
<td>!=</td>
</tr>
</tbody></table>
<blockquote>
<p>不支持小数对比，仅支持整数</p>
</blockquote>
<h4 id="比较"><a href="#比较" class="headerlink" title="[]比较"></a>[]比较</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[ 666 -gt 1 ] &amp;&amp; echo "成立 " || echo "失败"</span><br><span class="line">成立</span><br><span class="line">[ 0 -gt -1 ] &amp;&amp; echo "成立 " || echo "失败"</span><br><span class="line">成立</span><br><span class="line">[ 0 -gt -1000 ] &amp;&amp; echo "成立 " || echo "失败"</span><br><span class="line">成立</span><br><span class="line">[ 0 -gt 0.5 ] &amp;&amp; echo "成立 " || echo "失败"</span><br><span class="line">-bash: [: 0.5: 期待整数表达式</span><br><span class="line">失败</span><br></pre></td></tr></tbody></table></figure>

<h4 id="比较-1"><a href="#比较-1" class="headerlink" title="[[]]比较"></a>[[]]比较</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[[ 60 &gt; 6 ]] &amp;&amp; echo "成立 " || echo "失败"</span><br><span class="line">成立</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>注意：</p>
<p>不推荐使用&gt;=这种格式，对比的时候会有语法问题</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">[[ 6 &gt;= 6 ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">"成立 "</span> || <span class="built_in">echo</span> <span class="string">"失败"</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">-bash: 条件表达式中有语法错误</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">-bash: `6<span class="string">' 附近有语法错误</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>这里面也可以用 -gt -lt …….</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">[root@mn01[ /tmp]#[[ 6 -ge 6 ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">"成立 "</span> || <span class="built_in">echo</span> <span class="string">"失败"</span></span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">成立</span></span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h3 id="2-1-5-逻辑判断"><a href="#2-1-5-逻辑判断" class="headerlink" title="2.1.5 逻辑判断"></a>2.1.5 逻辑判断</h3><p>与、或、非</p>
<table>
<thead>
<tr>
<th>逻辑判断</th>
<th>[]</th>
<th>[[]]</th>
</tr>
</thead>
<tbody><tr>
<td>与</td>
<td>-a  (and)</td>
<td>&amp;&amp;</td>
</tr>
<tr>
<td>或</td>
<td>-o (or)</td>
<td>||</td>
</tr>
<tr>
<td>非</td>
<td>!</td>
<td>!</td>
</tr>
</tbody></table>
<p>基本使用：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sex=nv</span><br><span class="line">state=china</span><br><span class="line">[ "$sex" = "nv" -a "$guo" = "china" ] &amp;&amp; echo 肯定能成 || echo 不一定，还需努力</span><br><span class="line">肯定能成</span><br></pre></td></tr></tbody></table></figure>



<h3 id="2-1-6-正则表达式"><a href="#2-1-6-正则表达式" class="headerlink" title="2.1.6 正则表达式"></a>2.1.6 正则表达式</h3><p>初步使用正则</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">变量中只要有0-9的数字就行</span></span><br><span class="line">num=666</span><br><span class="line">[[ $num =~ [0-9] ]] &amp;&amp; echo 成立 || echo 失败</span><br><span class="line">成立</span><br><span class="line"></span><br><span class="line">num=lidao996</span><br><span class="line">[[ $num =~ [0-9] ]] &amp;&amp; echo 成立 || echo 失败</span><br><span class="line">成立 </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开头结尾中间全是数字, 连续数字</span></span><br><span class="line">[[ $num =~ ^[0-9]+$ ]] &amp;&amp; echo 成立 || echo 失败</span><br><span class="line">失败 </span><br><span class="line"></span><br><span class="line">num=666</span><br><span class="line">[[ $num =~ ^[0-9]+$ ]] &amp;&amp; echo 成立 || echo 失败</span><br><span class="line">成立</span><br></pre></td></tr></tbody></table></figure>

<h4 id="案例：优化计算器脚本"><a href="#案例：优化计算器脚本" class="headerlink" title="案例：优化计算器脚本"></a>案例：优化计算器脚本</h4><p>加入正则判断参数是否为数字</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">支持负数的正则</span></span><br><span class="line">"\$num1" =~ ^-?[0-9]+$</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">判断小数正则</span> </span><br><span class="line">^-?[0-9]+\.?[0-9]+$</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/../../../img/image-20240517141734924.png" alt="image-20240517141734924"></p>
<h2 id="2-2-if判断"><a href="#2-2-if判断" class="headerlink" title="2.2 if判断"></a>2.2 if判断</h2><p>应用:if一般与条件表达式一起使用，也可以直接加上命令.</p>
<p>目标:</p>
<ul>
<li>if判断适用于更加复杂的判断与检查</li>
<li>if判断语句的格式</li>
</ul>
<h3 id="2-2-1-单分支判断，if…then"><a href="#2-2-1-单分支判断，if…then" class="headerlink" title="2.2.1 单分支判断，if…then"></a>2.2.1 单分支判断，if…then</h3><p>语法：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if 条件;then</span><br><span class="line">  满足条件后执行的内容。</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者</span></span><br><span class="line">if 条件</span><br><span class="line">then</span><br><span class="line">  满足条件后执行的内容。</span><br><span class="line">fi</span><br></pre></td></tr></tbody></table></figure>

<p>基本使用：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[ $# -eq 2 ] Վҗ {</span><br><span class="line">echo "必须要2个数字"</span><br><span class="line">exit 1</span><br><span class="line">}</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者</span></span><br><span class="line">if [ $# -ne 2 ];then</span><br><span class="line">echo "脚本必须要2个参数"</span><br><span class="line">exit 1</span><br><span class="line">fi</span><br></pre></td></tr></tbody></table></figure>

<h3 id="2-2-2-双分支判断，if-then-else"><a href="#2-2-2-双分支判断，if-then-else" class="headerlink" title="2.2.2 双分支判断，if..then..else"></a>2.2.2 双分支判断，if..then..else</h3><p>语法：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if 条件;then  </span><br><span class="line">  满足条件后执行的内容。</span><br><span class="line">else</span><br><span class="line">  不满足条件执行的内容。</span><br><span class="line">fi</span><br></pre></td></tr></tbody></table></figure>

<p>案例：检查根分区磁盘空间使用率</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@mn01[ /server/scripts/devops-shell]#cat 09_disk_check.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############################################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">File Name:08_disk_check.sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Version:V1.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Author:Haris Gong</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Organization:gsproj.github.io</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Desc: 检查根分区磁盘使用率</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############################################################</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用率&gt;=97%报警</span></span><br><span class="line">error=97</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查询现在的使用率， -w 强匹配</span></span><br><span class="line">root_usage=`df -h | grep -w '/' | awk -F '[ %]+' '{print $(NF - 1)}'`</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">判断</span></span><br><span class="line">if [ $root_usage -ge $error ];then</span><br><span class="line">        echo "磁盘空间不足，请尽快删除无用数据"</span><br><span class="line">else</span><br><span class="line">        echo "磁盘空间正常"</span><br><span class="line">fi</span><br></pre></td></tr></tbody></table></figure>

<p>测试</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@mn01[ /server/scripts/devops-shell]#bash 09_disk_check.sh</span><br><span class="line">磁盘空间正常</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/../../../img/image-20240517143023302.png" alt="image-20240517143023303"></p>
<h3 id="2-2-3-多分支判断"><a href="#2-2-3-多分支判断" class="headerlink" title="2.2.3 多分支判断"></a>2.2.3 多分支判断</h3><p>语法</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if 条件;then</span><br><span class="line">	满足条件后执行的内容。</span><br><span class="line">elif 条件;then #else if</span><br><span class="line">	满足elif条件，执行的内容。</span><br><span class="line">elif 条件;then</span><br><span class="line">	满足elif条件，执行的内容。</span><br><span class="line">else</span><br><span class="line">	不满足条件执行的内容。</span><br><span class="line">fi</span><br></pre></td></tr></tbody></table></figure>

<p>案例：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if [ $num1 -gt $num2 ] ;then</span><br><span class="line">	echo "$num1 大于 $num2"</span><br><span class="line">elif [ $num1 -lt $num2 ] ;then</span><br><span class="line">	echo "$num1 小于 $num2"</span><br><span class="line">else</span><br><span class="line">	echo "$num1 等于 $num2"</span><br><span class="line">fi</span><br></pre></td></tr></tbody></table></figure>

<h3 id="2-2-4-案例-输出指定用户的信息"><a href="#2-2-4-案例-输出指定用户的信息" class="headerlink" title="2.2.4 案例-输出指定用户的信息"></a>2.2.4 案例-输出指定用户的信息</h3><blockquote>
<p>温馨提示：这个脚本未来可以用于做安全检查  </p>
</blockquote>
<p>步骤:</p>
<ul>
<li>执行脚本输入用户名(参数/read)</li>
<li>判断用户是否存在,如果不存在则提示用户不存在,退出脚本.</li>
<li>如果用户存在输出用户的信息  <ul>
<li>是否可以登录(命令解释器)</li>
<li>uid,gid(过滤)</li>
<li>用户家目录</li>
<li>最近1次登录情况</li>
</ul>
</li>
</ul>
<p>输出样式：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">用户名: $user</span><br><span class="line">是否可以登录: $if_login</span><br><span class="line">用户UID,GID: $user_ids</span><br><span class="line">用户家目录: $user_homedir</span><br><span class="line">最近的登录情况: $user_login_info</span><br></pre></td></tr></tbody></table></figure>

<p>实现：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############################################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">File Name:10_check_user.sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Version:V1.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Author:Haris Gong</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Organization:gsproj.github.io</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Desc: 检查用户是否存在</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############################################################</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1、输入用户名</span></span><br><span class="line">read -p "请输入用户名" user</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2、查寻用户</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 变量不能为空</span></span></span><br><span class="line">[ "{user}x" = "x" ] &amp;&amp; {</span><br><span class="line">        echo "输入为空，错误！脚本退出"</span><br><span class="line">        exit 1</span><br><span class="line">}</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 查询是否存在</span></span></span><br><span class="line">id $user &amp;&gt; /dev/null</span><br><span class="line">if [ $? -ne 0 ];then</span><br><span class="line">        echo "用户${user}不存在"</span><br><span class="line">        exit 1</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 如存在, 查询信息</span></span></span><br><span class="line">user_shell=`awk -F: -vname=$user '$1==name{print $NF}' /etc/passwd`</span><br><span class="line">if [ "$user_shell" = "/bin/bash" ];then</span><br><span class="line">        if_login="可以登录"</span><br><span class="line">else</span><br><span class="line">        if_login="无法登录"</span><br><span class="line">fi</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># uid、gid、家目录</span></span></span><br><span class="line">user_ids=`awk -F: -vname=$user '$1==name{print$3,$4}' /etc/passwd`</span><br><span class="line">user_homedir=`awk -F: -vname=$user '$1==name{print $6}' /etc/passwd`</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 登录</span></span></span><br><span class="line">user_login_info=`lastlog |awk -vname=$user '$1==name'`</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">3、输出</span></span><br><span class="line">cat &lt;&lt;EOF</span><br><span class="line">  用户名: $user</span><br><span class="line">  是否可以登录: $if_login</span><br><span class="line">  用户UID,GID: $user_ids</span><br><span class="line">  用户家目录: $user_homedir</span><br><span class="line">  最近的登录情况: $user_login_info</span><br><span class="line">EOF</span><br></pre></td></tr></tbody></table></figure>

<p>测试</p>
<p><img src="/../../../img/image-20240517144531642.png" alt="image-20240517144531642"></p>
<h2 id="2-3-case语句"><a href="#2-3-case语句" class="headerlink" title="2.3 case语句"></a>2.3 case语句</h2><p>条件分支语句，一般用于实现有多种选择的脚本。</p>
<ul>
<li>这个功能用if也能实现，不过使用case语句会更加清晰直观</li>
<li>如服务的状态：start|stop|restart|status</li>
</ul>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">case "变量" in </span><br><span class="line">	start)</span><br><span class="line">		echo "start"</span><br><span class="line">		;;</span><br><span class="line">	stop)</span><br><span class="line">		echo "start"</span><br><span class="line">		;;</span><br><span class="line">	restart)</span><br><span class="line">		echo "start"</span><br><span class="line">		;;</span><br><span class="line">	*)	# 默认</span><br><span class="line">		echo "Error"</span><br><span class="line">esac</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>补充：</p>
<p>case的一个选项可以放多种组合，比如</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash"><span class="keyword">case</span> <span class="string">""</span><span class="variable">$var</span><span class="string">" in</span></span></span><br><span class="line">yes|y|Y|Yes|YES  echo "yes!!";;</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h3 id="2-2-1-案例1-某会所菜单展示"><a href="#2-2-1-案例1-某会所菜单展示" class="headerlink" title="2.2.1 案例1-某会所菜单展示"></a>2.2.1 案例1-某会所菜单展示</h3><p>实现：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############################################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">File Name:11_huisuo.sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Version:V1.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Author:Haris Gong</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Organization:gsproj.github.io</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Desc:</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############################################################</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">1.输出提示</span></span><br><span class="line">cat&lt;&lt;EOF</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############olding私人高级会所#####################</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">###################套餐############################</span></span></span><br><span class="line">输入1,选择 138套餐) 吃饱套餐</span><br><span class="line">输入2,选择 443套餐) 吃饱喝足套餐</span><br><span class="line">输入3,选择 888套餐) 吃喝拉撒套餐</span><br><span class="line">输入4,选择 1688套餐) 你想干啥就干啥套餐</span><br><span class="line">输入其他内容,退出</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2.vars</span></span><br><span class="line">read -p "请输入你的选择：" num</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3、判断</span></span><br><span class="line">case "$num" in</span><br><span class="line">        1)      echo "138套餐) 吃饱套餐" ;;</span><br><span class="line">        2)      echo "443套餐) 吃饱喝足套餐";;</span><br><span class="line">        3)      echo "888套餐) 吃喝拉撒套餐";;</span><br><span class="line">        4)      echo "1688套餐) 你想干啥就干啥套餐";;</span><br><span class="line">        tomcat) echo "8080套餐) 恭喜你获得隐藏套餐 不做人套餐";;</span><br><span class="line">        oldgirl) echo "8443套餐) 恭喜你获得隐藏套餐 老板娘套餐";;</span><br><span class="line">        *)</span><br><span class="line">                echo"退出"</span><br><span class="line">                exit 1</span><br><span class="line">esac</span><br></pre></td></tr></tbody></table></figure>

<h3 id="判断用户输入yes还是no"><a href="#判断用户输入yes还是no" class="headerlink" title="判断用户输入yes还是no"></a>判断用户输入yes还是no</h3><p>实现</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@mn01[ /server/scripts/devops-shell]#cat 12_yesorno.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############################################################</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">File Name:12_yesorno.sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Version:V1.0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Author:Haris Gong</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Organization:gsproj.github.io</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Desc:</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">#############################################################</span></span></span><br><span class="line"></span><br><span class="line">read -p "请输入yes或者no：" var</span><br><span class="line"></span><br><span class="line">case "$var" in</span><br><span class="line">        yes|y|Y|YES|Yes)  echo "Yes!!";;</span><br><span class="line">        no|n|N|NO|No) echo "No!!!";;</span><br><span class="line">        *)</span><br><span class="line">                echo "Error!"</span><br><span class="line">                exit 1</span><br><span class="line">esac</span><br></pre></td></tr></tbody></table></figure>



</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://gsproj.github.io">Haris</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://gsproj.github.io/2024/05/16/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day53-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84-shell%E8%87%AA%E5%8A%A8%E5%8C%96%E7%BC%96%E7%A8%8B-2/">http://gsproj.github.io/2024/05/16/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day53-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84-shell%E8%87%AA%E5%8A%A8%E5%8C%96%E7%BC%96%E7%A8%8B-2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://gsproj.github.io" target="_blank">Haris的小站</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/%E5%A4%B4%E5%83%8F.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer=""></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/05/15/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day52-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84-shell%E8%87%AA%E5%8A%A8%E5%8C%96%E7%BC%96%E7%A8%8B-1/" title="day52-自动化架构-shell自动化编程（一）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">day52-自动化架构-shell自动化编程（一）</div></div><div class="info-2"><div class="info-item-1">自动化架构-shell自动化编程（一）今日内容：  课程内容概览 Shell编程概述 Shell语言分类 Shell编程环境准备 Shell脚本的执行方式 Shell变量（重要）  目标：  能够书写超过100行的脚本:  系统巡检，系统加固，系统优化(初始化)，ngx优化，tomcat优化.   总计完成书读写5000行脚本(读写).  一、课程内容 Shell概述，编程语言 Shell环境准备 Shell语法：变量，判断，循环，函数，数组. Shell与三剑客进阶. 实际案例与项目  二、Shell编程概述常见命令解释器    命令解释器 说明    bash 目前应用最广泛一款命令解释器，红帽系列(默认),Debian,Ubuntu, BASH全称： Bourne-Again SHell   dash 一般debian/ubuntu系统默认的，运行脚本推荐使用bash，如 bash lidao.sh   csh,tcsh 一些unix系统使用   zsh 功能更多，支持更多的插件，可以更好看    注意： shell脚本(.bash...</div></div></div></a><a class="pagination-related" href="/2024/05/17/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day54-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84-shell%E8%87%AA%E5%8A%A8%E5%8C%96%E7%BC%96%E7%A8%8B-3/" title="day54-自动化架构-shell自动化编程（三）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">day54-自动化架构-shell自动化编程（三）</div></div><div class="info-2"><div class="info-item-1">自动化架构-shell自动化编程（三）今日内容： 一、Shell函数1.1 函数基本使用函数有三种定义方式 1234567891011# 方式一：最完整function func() {}# 方式二：最精简，推荐func() {}# 方式三：缺少括号，不太明了function func {}  使用方式二定义函数 123456789101112131415161718[root@mn01[ /server/scripts/devops-shell]#cat 13_func_01.sh#!/bin/bash############################################################### File Name:13_func_01.sh# Version:V1.0# Author:Haris Gong# Organization:gsproj.github.io#...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/%E5%A4%B4%E5%83%8F.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info-name">Haris</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">210</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">30</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84-shell%E8%87%AA%E5%8A%A8%E5%8C%96%E7%BC%96%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">自动化架构-shell自动化编程（二）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81Shell%E6%95%B0%E5%AD%A6%E8%BF%90%E7%AE%97"><span class="toc-number">2.</span> <span class="toc-text">一、Shell数学运算</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E8%BF%90%E7%AE%97%E6%96%B9%E6%B3%95%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%89"><span class="toc-number">2.2.</span> <span class="toc-text">1.2 运算方法（重要）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-%E4%BD%BF%E7%94%A8awk%E8%AE%A1%E7%AE%97%EF%BC%88%E6%8E%A8%E8%8D%90%EF%BC%89"><span class="toc-number">2.2.1.</span> <span class="toc-text">1.2.1 使用awk计算（推荐）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-%E4%BD%BF%E7%94%A8bc%E8%AE%A1%E7%AE%97"><span class="toc-number">2.2.2.</span> <span class="toc-text">1.2.2 使用bc计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-3-%E4%BD%BF%E7%94%A8expr%E8%AE%A1%E7%AE%97"><span class="toc-number">2.2.3.</span> <span class="toc-text">1.2.3 使用expr计算</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E6%A3%80%E6%B5%8B%E8%BE%93%E5%85%A5%E5%86%85%E5%AE%B9%E6%98%AF%E5%90%A6%E6%98%AF%E6%95%B0%E5%AD%97"><span class="toc-number">2.2.3.1.</span> <span class="toc-text">案例：检测输入内容是否是数字</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-4-%E4%BD%BF%E7%94%A8let%E8%BF%9B%E8%A1%8C%E8%AE%A1%E7%AE%97"><span class="toc-number">2.2.4.</span> <span class="toc-text">1.2.4 使用let进行计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-5-%E4%BD%BF%E7%94%A8-%E8%BF%9B%E8%A1%8C%E8%AE%A1%E7%AE%97"><span class="toc-number">2.2.5.</span> <span class="toc-text">1.2.5 使用$(())进行计算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-6-%E4%BD%BF%E7%94%A8-%E8%BF%9B%E8%A1%8C%E8%AE%A1%E7%AE%97"><span class="toc-number">2.2.6.</span> <span class="toc-text">1.2.6 使用$[]进行计算</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E8%BF%90%E7%AE%97%E6%A1%88%E4%BE%8B"><span class="toc-number">2.3.</span> <span class="toc-text">1.3 运算案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1%EF%BC%9A%E8%AE%A1%E7%AE%97%E5%99%A8"><span class="toc-number">2.3.1.</span> <span class="toc-text">案例1：计算器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B2%EF%BC%9A%E8%AE%A1%E7%AE%97%E5%99%A8%E6%94%B9%E5%86%99"><span class="toc-number">2.3.2.</span> <span class="toc-text">案例2：计算器改写</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Shell%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD"><span class="toc-number">3.</span> <span class="toc-text">二、Shell逻辑判断</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E6%9D%A1%E4%BB%B6%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 条件表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.1.1.</span> <span class="toc-text">2.1.1 格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A-%E5%92%8C-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">面试题：[]和[[]]的区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-%E5%88%A4%E6%96%AD%E6%96%87%E4%BB%B6"><span class="toc-number">3.1.2.</span> <span class="toc-text">2.1.2 判断文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%B5%8B%EF%BC%9A%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8"><span class="toc-number">3.1.2.1.</span> <span class="toc-text">检测：文件是否存在</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%B5%8B%EF%BC%9A%E7%9B%AE%E5%BD%95%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8"><span class="toc-number">3.1.2.2.</span> <span class="toc-text">检测：目录是否存在</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%B5%8B%EF%BC%9A%E6%98%AF%E5%90%A6%E6%9C%89%E6%89%A7%E8%A1%8C%E6%9D%83%E9%99%90"><span class="toc-number">3.1.2.3.</span> <span class="toc-text">检测：是否有执行权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%B5%8B%EF%BC%9A%E6%96%87%E4%BB%B6%E6%98%AF%E5%90%A6%E6%9C%89%E5%86%85%E5%AE%B9"><span class="toc-number">3.1.2.4.</span> <span class="toc-text">检测：文件是否有内容</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3-%E5%AF%B9%E6%AF%94%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">3.1.3.</span> <span class="toc-text">2.1.3 对比字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94%E4%B8%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%E5%90%A6%E7%9B%B8%E7%AD%89"><span class="toc-number">3.1.3.1.</span> <span class="toc-text">对比两字符串是否相等</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%E5%90%A6%E4%B8%BA%E7%A9%BA"><span class="toc-number">3.1.3.2.</span> <span class="toc-text">检查字符串是否为空</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-4-%E6%AF%94%E5%A4%A7%E5%B0%8F"><span class="toc-number">3.1.4.</span> <span class="toc-text">2.1.4 比大小</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AF%94%E8%BE%83"><span class="toc-number">3.1.4.1.</span> <span class="toc-text">[]比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AF%94%E8%BE%83-1"><span class="toc-number">3.1.4.2.</span> <span class="toc-text">[[]]比较</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-5-%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD"><span class="toc-number">3.1.5.</span> <span class="toc-text">2.1.5 逻辑判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-6-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.1.6.</span> <span class="toc-text">2.1.6 正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E4%BC%98%E5%8C%96%E8%AE%A1%E7%AE%97%E5%99%A8%E8%84%9A%E6%9C%AC"><span class="toc-number">3.1.6.1.</span> <span class="toc-text">案例：优化计算器脚本</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-if%E5%88%A4%E6%96%AD"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 if判断</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E5%8D%95%E5%88%86%E6%94%AF%E5%88%A4%E6%96%AD%EF%BC%8Cif%E2%80%A6then"><span class="toc-number">3.2.1.</span> <span class="toc-text">2.2.1 单分支判断，if…then</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E5%8F%8C%E5%88%86%E6%94%AF%E5%88%A4%E6%96%AD%EF%BC%8Cif-then-else"><span class="toc-number">3.2.2.</span> <span class="toc-text">2.2.2 双分支判断，if..then..else</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E5%A4%9A%E5%88%86%E6%94%AF%E5%88%A4%E6%96%AD"><span class="toc-number">3.2.3.</span> <span class="toc-text">2.2.3 多分支判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-4-%E6%A1%88%E4%BE%8B-%E8%BE%93%E5%87%BA%E6%8C%87%E5%AE%9A%E7%94%A8%E6%88%B7%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">3.2.4.</span> <span class="toc-text">2.2.4 案例-输出指定用户的信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-case%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.3.</span> <span class="toc-text">2.3 case语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E6%A1%88%E4%BE%8B1-%E6%9F%90%E4%BC%9A%E6%89%80%E8%8F%9C%E5%8D%95%E5%B1%95%E7%A4%BA"><span class="toc-number">3.3.1.</span> <span class="toc-text">2.2.1 案例1-某会所菜单展示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5yes%E8%BF%98%E6%98%AFno"><span class="toc-number">3.3.2.</span> <span class="toc-text">判断用户输入yes还是no</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/26/09_%E9%9F%A9%E5%85%88%E8%B6%85K8S/01-Docker%E5%9F%BA%E7%A1%80/06-Docker%E8%B5%84%E6%BA%90%E9%85%8D%E9%A2%9D/" title="06-Docker资源配额">06-Docker资源配额</a><time datetime="2025-03-26T07:12:52.000Z" title="发表于 2025-03-26 15:12:52">2025-03-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/20/09_%E9%9F%A9%E5%85%88%E8%B6%85K8S/01-Docker%E5%9F%BA%E7%A1%80/05-Docker%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96/" title="05-Docker容器数据持久化">05-Docker容器数据持久化</a><time datetime="2025-03-20T07:12:52.000Z" title="发表于 2025-03-20 15:12:52">2025-03-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/12/09_%E9%9F%A9%E5%85%88%E8%B6%85K8S/01-Docker%E5%9F%BA%E7%A1%80/04-Dockerfile%E5%AE%9E%E6%88%98%E7%AF%87-%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F/" title="04-Dockerfile实战篇-构建镜像">04-Dockerfile实战篇-构建镜像</a><time datetime="2025-03-12T07:12:52.000Z" title="发表于 2025-03-12 15:12:52">2025-03-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/04/09_%E9%9F%A9%E5%85%88%E8%B6%85K8S/01-Docker%E5%9F%BA%E7%A1%80/03-Dockerfile%E5%9F%BA%E7%A1%80%E7%AF%87-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/" title="03-Dockerfile基础篇-基本语法">03-Dockerfile基础篇-基本语法</a><time datetime="2025-03-04T07:12:52.000Z" title="发表于 2025-03-04 15:12:52">2025-03-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/03/09_%E9%9F%A9%E5%85%88%E8%B6%85K8S/01-Docker%E5%9F%BA%E7%A1%80/02-%E8%BF%90%E8%A1%8CDocker%E5%AE%B9%E5%99%A8/" title="02-运行Docker容器">02-运行Docker容器</a><time datetime="2025-03-03T07:12:52.000Z" title="发表于 2025-03-03 15:12:52">2025-03-03</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent;"><div id="footer-wrap"><div class="copyright">©2019 - 2025 By Haris</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><div class="js-pjax"></div><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>