<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>day60-å®¹å™¨æ¶æ„-Dockerï¼ˆäºŒï¼‰ | Harisçš„å°ç«™</title><meta name="author" content="Haris"><meta name="copyright" content="Haris"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="å®¹å™¨æ¶æ„-Docker-02ä»Šæ—¥å†…å®¹ï¼š  Dockerå®¹å™¨ç®¡ç†  ä¸€ã€Dockerå®¹å™¨ç®¡ç†ğŸŒŸğŸŒŸè¿è¡Œèµ·æ¥çš„é•œåƒå¯ä»¥ç§°ä¸ºå®¹å™¨ï¼Œ1ä¸ªå®¹å™¨ç›¸å½“äºæ˜¯1ä¸ªè¿›ç¨‹ã€‚  ä»¥docker containerå¼€å¤´çš„æŒ‡ä»¤ä¸€èˆ¬è¡¨ç¤ºå®¹å™¨ç®¡ç†æŒ‡ä»¤ï¼Œéƒ¨åˆ†æŒ‡ä»¤containerå¯ä»¥çœç•¥   1234# å®Œæ•´å†™æ³•docker container ps# ç¼©ç•¥å†™æ³•docker ps  1.1 å®¹å™¨ç®¡ç†çš„æ“ä½œ1.1.1 æŸ¥çœ‹å®¹å™¨12">
<meta property="og:type" content="article">
<meta property="og:title" content="day60-å®¹å™¨æ¶æ„-Dockerï¼ˆäºŒï¼‰">
<meta property="og:url" content="http://gsproj.github.io/2024/05/24/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day60-%E5%AE%B9%E5%99%A8%E6%9E%B6%E6%9E%84-docker-2/index.html">
<meta property="og:site_name" content="Harisçš„å°ç«™">
<meta property="og:description" content="å®¹å™¨æ¶æ„-Docker-02ä»Šæ—¥å†…å®¹ï¼š  Dockerå®¹å™¨ç®¡ç†  ä¸€ã€Dockerå®¹å™¨ç®¡ç†ğŸŒŸğŸŒŸè¿è¡Œèµ·æ¥çš„é•œåƒå¯ä»¥ç§°ä¸ºå®¹å™¨ï¼Œ1ä¸ªå®¹å™¨ç›¸å½“äºæ˜¯1ä¸ªè¿›ç¨‹ã€‚  ä»¥docker containerå¼€å¤´çš„æŒ‡ä»¤ä¸€èˆ¬è¡¨ç¤ºå®¹å™¨ç®¡ç†æŒ‡ä»¤ï¼Œéƒ¨åˆ†æŒ‡ä»¤containerå¯ä»¥çœç•¥   1234# å®Œæ•´å†™æ³•docker container ps# ç¼©ç•¥å†™æ³•docker ps  1.1 å®¹å™¨ç®¡ç†çš„æ“ä½œ1.1.1 æŸ¥çœ‹å®¹å™¨12">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://gsproj.github.io/img/%E5%A4%B4%E5%83%8F.png">
<meta property="article:published_time" content="2024-05-24T05:08:52.000Z">
<meta property="article:modified_time" content="2024-08-02T01:48:34.361Z">
<meta property="article:author" content="Haris">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://gsproj.github.io/img/%E5%A4%B4%E5%83%8F.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "day60-å®¹å™¨æ¶æ„-Dockerï¼ˆäºŒï¼‰",
  "url": "http://gsproj.github.io/2024/05/24/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day60-%E5%AE%B9%E5%99%A8%E6%9E%B6%E6%9E%84-docker-2/",
  "image": "http://gsproj.github.io/img/%E5%A4%B4%E5%83%8F.png",
  "datePublished": "2024-05-24T05:08:52.000Z",
  "dateModified": "2024-08-02T01:48:34.361Z",
  "author": [
    {
      "@type": "Person",
      "name": "Haris",
      "url": "http://gsproj.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://gsproj.github.io/2024/05/24/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day60-%E5%AE%B9%E5%99%A8%E6%9E%B6%E6%9E%84-docker-2/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æœªæ‰¾åˆ°ç¬¦åˆæ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'day60-å®¹å™¨æ¶æ„-Dockerï¼ˆäºŒï¼‰',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/modify.css"><style>#article-container.post-content h1:before, h2:before, h3:before, h4:before, h5:before, h6:before { -webkit-animation: avatar_turn_around 1s linear infinite; -moz-animation: avatar_turn_around 1s linear infinite; -o-animation: avatar_turn_around 1s linear infinite; -ms-animation: avatar_turn_around 1s linear infinite; animation: avatar_turn_around 1s linear infinite; }</style><meta name="generator" content="Hexo 7.3.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="/css/loading-bar.css"><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg" style="background-image: url(/img/çŒ«.png);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/%E5%A4%B4%E5%83%8F.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">216</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">32</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´çº¿</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/car2.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Harisçš„å°ç«™</span></a><a class="nav-page-title" href="/"><span class="site-name">day60-å®¹å™¨æ¶æ„-Dockerï¼ˆäºŒï¼‰</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´çº¿</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">day60-å®¹å™¨æ¶æ„-Dockerï¼ˆäºŒï¼‰</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-05-24T05:08:52.000Z" title="å‘è¡¨äº 2024-05-24 13:08:52">2024-05-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-08-02T01:48:34.361Z" title="æ›´æ–°äº 2024-08-02 09:48:34">2024-08-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%BF%90%E7%BB%B4/">è¿ç»´</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%BF%90%E7%BB%B4/%EF%BC%88%E4%BA%8C%EF%BC%89%E7%BB%BC%E5%90%88%E6%9E%B6%E6%9E%84/">ï¼ˆäºŒï¼‰ç»¼åˆæ¶æ„</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><div class="top-img" style="background-image: url(/img/car2.png);"></div><article class="container post-content" id="article-container"><h1 id="å®¹å™¨æ¶æ„-Docker-02"><a href="#å®¹å™¨æ¶æ„-Docker-02" class="headerlink" title="å®¹å™¨æ¶æ„-Docker-02"></a>å®¹å™¨æ¶æ„-Docker-02</h1><p>ä»Šæ—¥å†…å®¹ï¼š</p>
<ul>
<li>Dockerå®¹å™¨ç®¡ç†</li>
</ul>
<h1 id="ä¸€ã€Dockerå®¹å™¨ç®¡ç†ğŸŒŸğŸŒŸ"><a href="#ä¸€ã€Dockerå®¹å™¨ç®¡ç†ğŸŒŸğŸŒŸ" class="headerlink" title="ä¸€ã€Dockerå®¹å™¨ç®¡ç†ğŸŒŸğŸŒŸ"></a>ä¸€ã€Dockerå®¹å™¨ç®¡ç†ğŸŒŸğŸŒŸ</h1><p>è¿è¡Œèµ·æ¥çš„é•œåƒå¯ä»¥ç§°ä¸ºå®¹å™¨ï¼Œ1ä¸ªå®¹å™¨ç›¸å½“äºæ˜¯1ä¸ªè¿›ç¨‹ã€‚ </p>
<p>ä»¥<code>docker container</code>å¼€å¤´çš„æŒ‡ä»¤ä¸€èˆ¬è¡¨ç¤ºå®¹å™¨ç®¡ç†æŒ‡ä»¤ï¼Œéƒ¨åˆ†æŒ‡ä»¤containerå¯ä»¥çœç•¥  </p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®Œæ•´å†™æ³•</span></span><br><span class="line">docker container ps</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼©ç•¥å†™æ³•</span></span><br><span class="line">docker ps</span><br></pre></td></tr></tbody></table></figure>

<h2 id="1-1-å®¹å™¨ç®¡ç†çš„æ“ä½œ"><a href="#1-1-å®¹å™¨ç®¡ç†çš„æ“ä½œ" class="headerlink" title="1.1 å®¹å™¨ç®¡ç†çš„æ“ä½œ"></a>1.1 å®¹å™¨ç®¡ç†çš„æ“ä½œ</h2><h3 id="1-1-1-æŸ¥çœ‹å®¹å™¨"><a href="#1-1-1-æŸ¥çœ‹å®¹å™¨" class="headerlink" title="1.1.1 æŸ¥çœ‹å®¹å™¨"></a>1.1.1 æŸ¥çœ‹å®¹å™¨</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@docker01[ ~]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED       STATUS       PORTS                               NAMES</span><br><span class="line">50715f7f85a3   nginx     "/docker-entrypoint.â€¦"   4 hours ago   Up 4 hours   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   bold_bartik</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®Œæ•´å†™æ³•</span></span><br><span class="line">[root@docker01[ ~]#docker container ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED       STATUS       PORTS                               NAMES</span><br><span class="line">50715f7f85a3   nginx     "/docker-entrypoint.â€¦"   4 hours ago   Up 4 hours   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   bold_bartik</span><br></pre></td></tr></tbody></table></figure>

<p>æ¡ˆä¾‹ï¼šæŸ¥çœ‹å½“å‰è¿è¡Œä¸­çš„å®¹å™¨ï¼ŒæŸ¥çœ‹ä¸‹80ç«¯å£æ˜¯å¦è¢«å ç”¨</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@docker01[ ~]#docker ps -a	</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED       STATUS       PORTS                               NAMES</span><br><span class="line">50715f7f85a3   nginx     "/docker-entrypoint.â€¦"   5 hours ago   Up 5 hours   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   bold_bartik</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯è§80ç«¯å£å·²è¢«å ç”¨</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-1-2-åˆ›å»º-è¿è¡Œå®¹å™¨"><a href="#1-1-2-åˆ›å»º-è¿è¡Œå®¹å™¨" class="headerlink" title="1.1.2 åˆ›å»º/è¿è¡Œå®¹å™¨"></a>1.1.2 åˆ›å»º/è¿è¡Œå®¹å™¨</h3><p>åˆ›å»ºå®¹å™¨ï¼ˆä¸€èˆ¬ç›´æ¥ç”¨runï¼‰</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker create åˆ›å»ºå®¹å™¨ --name</span><br></pre></td></tr></tbody></table></figure>

<p>è¿è¡Œå®¹å™¨</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -it -p 80:80 nginx:latest</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é€‰é¡¹è¯´æ˜ï¼š</p>
<ul>
<li>-d å®¹å™¨åå°è¿è¡Œ.</li>
<li>-p ç«¯å£æ˜ å°„,å¤–éƒ¨æˆ–å…¶ä»–æœåŠ¡å™¨æƒ³è¦è®¿é—®å®¹å™¨å†…éƒ¨çš„æŸä¸ªæœåŠ¡çš„ç«¯å£. </li>
<li>-p å¤–éƒ¨ç”¨äºè®¿é—®çš„ç«¯å£:å®¹å™¨å†…éƒ¨æœåŠ¡çš„ç«¯å£</li>
<li>â€“name æŒ‡å®šå®¹å™¨çš„åå­—  </li>
<li>-i ä»¥äº¤äº’å¼æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸<code>-t</code>ä¸€èµ·</li>
<li>-i ä¸ºç¨‹åºé‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸<code>-i</code>ä¸€èµ·</li>
</ul>
<p>docker run çš„èƒŒååšäº†å¾ˆå¤šäº‹æƒ…ï¼š</p>
<ul>
<li>docker create åˆ›å»ºå®¹å™¨.</li>
<li>docker start å¯åŠ¨å®¹å™¨.</li>
<li>docker stop å…³é—­å®¹å™¨. #å‘å®¹å™¨ä¸­çš„ä¸»è¿›ç¨‹,pid 1 è¿›ç¨‹å‘å‡ºä¿¡å·(kill),å…³é—­.</li>
<li>docker restarté‡å¯é‡å¯</li>
</ul>
</blockquote>
<p><strong>æ¡ˆä¾‹01</strong>ï¼šåˆ›å»ºä¸€ä¸ªnginx-alpineçš„å®¹å™¨å¹¶è¿è¡Œ</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»º</span></span><br><span class="line">[root@docker01[ ~]#docker run -d -p 80:80 --name test_nginx_alpine_v1 nginx:stable-alpine </span><br><span class="line">cd4d36318002007a8354146d376e85d1a711ddfdfeb24d1a393258347844f0fa</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹</span></span><br><span class="line">[root@docker01[ ~]#docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS          PORTS                               NAMES</span><br><span class="line">cd4d36318002   nginx:stable-alpine   "/docker-entrypoint.â€¦"   31 seconds ago   Up 31 seconds   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   test_nginx_alpine_v1</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ¡ˆä¾‹02</strong>ï¼šåˆ›å»ºcentoså®¹å™¨ï¼Œå¹¶äº¤äº’è¿è¡Œï¼Œè¿›å…¥å®¹å™¨å†…éƒ¨</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">run åˆ›å»ºå¹¶è¿è¡Œcentoså®¹å™¨</span></span><br><span class="line">[root@docker01[ ~]#docker run -it --name "my_docker_centos" centos</span><br><span class="line">Unable to find image 'centos:latest' locally</span><br><span class="line">latest: Pulling from library/centos</span><br><span class="line">a1d0c7532777: Pull complete </span><br><span class="line">Digest: sha256:a27fd8080b517143cbbbab9dfb7c8571c40d67d534bbdee55bd6c473f432b177</span><br><span class="line">Status: Downloaded newer image for centos:latest</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å› ä¸º-ité€‰é¡¹çš„ä½¿ç”¨ï¼Œå·²ç»è¿›å…¥å®¹å™¨å†…éƒ¨ï¼ŒæŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬</span></span><br><span class="line">[root@631cf5e874ba /]# cat /etc/system-release</span><br><span class="line">CentOS Linux release 8.4.2105</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<p>ä»¥<code>-it</code>è¿è¡Œçš„å®¹å™¨ï¼Œå¦‚æœé€€å‡ºäº†ä¼šæ€ä¹ˆæ ·ï¼Ÿ</p>
<ul>
<li>å®¹å™¨é€€å‡ºåï¼Œç›´æ¥å…³é—­</li>
</ul>
<p><strong>è¿™ä¹Ÿæ˜¯<code>-it</code>çš„ç¼ºç‚¹ï¼</strong></p>
</blockquote>
<h3 id="1-1-3-å¯åŠ¨-åœæ­¢å®¹å™¨"><a href="#1-1-3-å¯åŠ¨-åœæ­¢å®¹å™¨" class="headerlink" title="1.1.3 å¯åŠ¨/åœæ­¢å®¹å™¨"></a>1.1.3 å¯åŠ¨/åœæ­¢å®¹å™¨</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨å®¹å™¨</span></span><br><span class="line">docker start</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœæ­¢å®¹å™¨</span></span><br><span class="line">docker stop </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯å®¹å™¨</span></span><br><span class="line">docker restart </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¼ºåˆ¶åœæ­¢å®¹å™¨</span></span><br><span class="line">docker kill </span><br></pre></td></tr></tbody></table></figure>

<p>æ¡ˆä¾‹ï¼šä»¥ä¸Šæ–¹æ³•å‡åœ¨å®¹å™¨ä¸Šç”¨ä¸€é</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@docker01[ ~]#docker stop cd4d36318002</span><br><span class="line">cd4d36318002</span><br><span class="line">[root@docker01[ ~]#docker restart cd4d36318002</span><br><span class="line">cd4d36318002</span><br><span class="line">[root@docker01[ ~]#docker start cd4d36318002</span><br><span class="line">cd4d36318002</span><br><span class="line">[root@docker01[ ~]#docker kill -s 9 cd4d36318002</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-sè¡¨ç¤ºä¿¡å· -s 9 ç­‰äº <span class="built_in">kill</span> -9 pidå¼ºåˆ¶ç»“æŸ</span></span><br><span class="line">cd4d36318002</span><br><span class="line">[root@docker01[ ~]#docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND                  CREATED              STATUS                        PORTS     NAMES</span><br><span class="line">cd4d36318002   nginx:stable-alpine   "/docker-entrypoint.â€¦"   About a minute ago   Exited (137) 11 seconds ago             test_nginx_alpine_v1</span><br></pre></td></tr></tbody></table></figure>



<h3 id="1-1-4-åˆ é™¤å®¹å™¨"><a href="#1-1-4-åˆ é™¤å®¹å™¨" class="headerlink" title="1.1.4 åˆ é™¤å®¹å™¨"></a>1.1.4 åˆ é™¤å®¹å™¨</h3><p>å•ä¸ªåˆ é™¤</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm</span><br></pre></td></tr></tbody></table></figure>

<p>æ‰¹é‡åˆ é™¤</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f `docker ps -a -q`</span><br></pre></td></tr></tbody></table></figure>

<p>æ¡ˆä¾‹ï¼šåˆ é™¤å·²æœ‰çš„å®¹å™¨</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰¾åˆ°ä¸€ä¸ªå®¹å™¨</span></span><br><span class="line">[root@docker01[ ~]#docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED       STATUS       PORTS                               NAMES</span><br><span class="line">50715f7f85a3   nginx     "/docker-entrypoint.â€¦"   5 hours ago   Up 5 hours   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   bold_bartik</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤ï¼Œä¸æˆåŠŸï¼Œå› ä¸ºå®¹å™¨æ­£åœ¨è¿è¡Œ</span></span><br><span class="line">[root@docker01[ ~]#docker  rm 50715f7f85a3</span><br><span class="line">Error response from daemon: cannot remove container "/bold_bartik": container is running: stop the container before removing or force remove</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-få¼ºåˆ¶åˆ é™¤</span></span><br><span class="line">[root@docker01[ ~]#docker  rm -f 50715f7f85a3</span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-1-5-è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨"><a href="#1-1-5-è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨" class="headerlink" title="1.1.5 è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨"></a>1.1.5 è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨</h3><p>æ–¹æ³•ä¸€<code>exec</code>ï¼šå°†åˆ†é…ä¸€ä¸ªæ–°çš„ç»ˆç«¯</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it å®¹å™¨id/å®¹å™¨åå­— /bin/bash(/bin/sh)</span><br></pre></td></tr></tbody></table></figure>

<p>æ–¹æ³•äºŒ<code>attach</code>ï¼šä½¿ç”¨ç›¸åŒçš„ç»ˆç«¯</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker attach</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æš‚æ—¶é€€å‡ºï¼šctrl + p, ctrl + q</span></span><br></pre></td></tr></tbody></table></figure>

<p>æ¡ˆä¾‹ï¼šexecè¿›å…¥å·²ç»è¿è¡Œçš„å®¹å™¨</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å·²æœ‰å®¹å™¨</span></span><br><span class="line">[root@docker01[ ~]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS          PORTS                               NAMES</span><br><span class="line">5251e5df489e   nginx:stable-alpine   "/docker-entrypoint.â€¦"   19 minutes ago   Up 19 minutes   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   test_nginx_alpine_v1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥å®¹å™¨</span></span><br><span class="line">[root@docker01[ ~]#docker exec -it test_nginx_alpine_v1 /bin/sh</span><br><span class="line">/ # ls</span><br><span class="line">bin                   etc                   mnt                   run                   tmp</span><br><span class="line">dev                   home                  opt                   sbin                  usr</span><br><span class="line">docker-entrypoint.d   lib                   proc                  srv                   var</span><br><span class="line">docker-entrypoint.sh  media                 root                  sys</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹nginxé¦–é¡µå†…å®¹</span></span><br><span class="line">/ # cd /usr/share/nginx/html</span><br><span class="line">/usr/share/nginx/html # echo "New Page" &gt; /usr/share/nginx/html/index.html </span><br></pre></td></tr></tbody></table></figure>

<p>æµ‹è¯•è®¿é—®</p>
<p><img src="/../../../img/image-20240524154601603.png" alt="image-20240524154601603"></p>
<h4 id="execå’Œattachçš„åŒºåˆ«"><a href="#execå’Œattachçš„åŒºåˆ«" class="headerlink" title="execå’Œattachçš„åŒºåˆ«"></a>execå’Œattachçš„åŒºåˆ«</h4><table>
<thead>
<tr>
<th>docker container æŒ‡ä»¤</th>
<th>exec</th>
<th>attach</th>
</tr>
</thead>
<tbody><tr>
<td>å…±åŒç‚¹</td>
<td>è¿æ¥åˆ°å®¹å™¨</td>
<td>è¿æ¥åˆ°å®¹å™¨</td>
</tr>
<tr>
<td>åŒºåˆ«</td>
<td>è¿æ¥çš„æ—¶å€™åˆ›å»ºç»ˆç«¯</td>
<td>å®¹å™¨è¦æœ‰ç»ˆç«¯(å®¹å™¨è¿›ç¨‹ä¸­è¦æœ‰ä¸ª/bin/bash æˆ–/bin/sh) åªèƒ½è¿æ¥åˆ°å·²æœ‰çš„ç»ˆç«¯ä¸­.</td>
</tr>
<tr>
<td>åŒºåˆ«</td>
<td>ä¸åŒçš„execè¿æ¥äº’ä¸å½±å“,</td>
<td>å…±ç”¨,æ‰€æœ‰è¿æ¥éƒ½ä¸€æ ·</td>
</tr>
</tbody></table>
<h3 id="1-1-6-æŸ¥çœ‹å®¹å™¨ä¿¡æ¯ä¸çŠ¶æ€"><a href="#1-1-6-æŸ¥çœ‹å®¹å™¨ä¿¡æ¯ä¸çŠ¶æ€" class="headerlink" title="1.1.6 æŸ¥çœ‹å®¹å™¨ä¿¡æ¯ä¸çŠ¶æ€"></a>1.1.6 æŸ¥çœ‹å®¹å™¨ä¿¡æ¯ä¸çŠ¶æ€</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker inspect</span><br><span class="line">docker stats</span><br><span class="line">docker top</span><br></pre></td></tr></tbody></table></figure>



<h3 id="1-1-7-å®¹å™¨å¤¯ä½æ‰èƒ½ä¸€ç›´è¿è¡ŒğŸŒŸ"><a href="#1-1-7-å®¹å™¨å¤¯ä½æ‰èƒ½ä¸€ç›´è¿è¡ŒğŸŒŸ" class="headerlink" title="1.1.7 å®¹å™¨å¤¯ä½æ‰èƒ½ä¸€ç›´è¿è¡ŒğŸŒŸ"></a>1.1.7 å®¹å™¨å¤¯ä½æ‰èƒ½ä¸€ç›´è¿è¡ŒğŸŒŸ</h3><p>ä½“ä¼šä¸‹é¢2ä¸ªå‘½ä»¤çš„åŒºåˆ«ï¼š</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name "oldboy_centos_v2" centos</span><br><span class="line">docker run -d --name "oldboy_centos_v2" centos sleep 20</span><br></pre></td></tr></tbody></table></figure>

<p>æ‰§è¡Œåï¼Œæ²¡åŠ <code>sleep</code>çš„å®¹å™¨åˆšè¿è¡Œå°±æ¶ˆå¤±äº†ï¼ŒåŠ äº†<code>sleep</code>çš„å®¹å™¨ç»´æŒäº†20ç§’</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@docker01[ ~]#docker run -d --name "oldboy_centos_v2" centos</span><br><span class="line">fb8ba4d7a6c5dceffc6123953b2ad5235b0b13454ea7a4b0d072bf3fff0201d0</span><br><span class="line">[root@docker01[ ~]#docker ps	</span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS          PORTS                               NAMES</span><br><span class="line">5251e5df489e   nginx:stable-alpine   "/docker-entrypoint.â€¦"   12 minutes ago   Up 12 minutes   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   test_nginx_alpine_v1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">centoså®¹å™¨ä¸è§äº†</span></span><br><span class="line"></span><br><span class="line">[root@docker01[ ~]#docker run -d --name "oldboy_centos_v3" centos sleep 20</span><br><span class="line">bed3239b9850cda3235c73eda64472b8e3bd233ac3a40ede82ddec3acd24d801</span><br><span class="line">[root@docker01[ ~]#docker run -ps</span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS          PORTS                               NAMES</span><br><span class="line">bed3239b9850   centos                "sleep 20"               2 seconds ago    Up 1 second                                         oldboy_centos_v3</span><br><span class="line">5251e5df489e   nginx:stable-alpine   "/docker-entrypoint.â€¦"   12 minutes ago   Up 12 minutes   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   test_nginx_alpine_v1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">centoså®¹å™¨è¿˜åœ¨</span></span><br></pre></td></tr></tbody></table></figure>

<p>è¿™æ˜¯å› ä¸ºå®¹å™¨ä»»åŠ¡æ‰§è¡Œç»“æŸåï¼Œå®ƒä¹Ÿå°±è‡ªåŠ¨é€€å‡ºäº†ï¼Œå› æ­¤ ï¼Œæƒ³è¦å®¹å™¨åœ¨åå°ï¼ˆ-dï¼‰ä¸€ç›´è¿è¡Œï¼Œé‚£ä¹ˆå°±è¦å¯¹å®¹å™¨è¿è¡Œçš„æ—¶å€™<strong>åŠ ä¸Šåˆå§‹å‘½ä»¤ï¼Œä½¿å®¹å™¨å¤¯ä½</strong>(é˜»å¡/å‰å°è¿è¡Œ)</p>
<p>ä¾‹å¦‚ï¼šå¦‚ä½•åå°æŒç»­è¿è¡Œçº¯å‡€ç³»ç»Ÿçš„å®¹å™¨ï¼ˆCentosï¼‰</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€šè¿‡-itdé€‰é¡¹æ¥æŒ‡å®šå‘½ä»¤è§£é‡Šå™¨æŒç»­è¿è¡Œ</span></span><br><span class="line">[root@docker01[ ~]#docker run -itd --name oldboy_centos_v6 centos</span><br><span class="line">c4a59405f253ba62bfaa4f7431be2d21bbd8ca73ce174d27bb8b9f8475c0e872</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®¹å™¨è¿˜åœ¨</span></span><br><span class="line">[root@docker01[ ~]#docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS                      PORTS                               NAMES</span><br><span class="line">c4a59405f253   centos                "/bin/bash"              13 seconds ago   Up 13 seconds                                                   oldboy_centos_v6</span><br><span class="line">...</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥å®¹å™¨</span></span><br><span class="line">[root@docker01[ ~]#docker exec -it oldboy_centos_v6 /bin/bash</span><br><span class="line">[root@c4a59405f253 /]# ls</span><br><span class="line">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br></pre></td></tr></tbody></table></figure>



<h3 id="1-1-8-å®¹å™¨ä¼ è¾“æ–‡ä»¶"><a href="#1-1-8-å®¹å™¨ä¼ è¾“æ–‡ä»¶" class="headerlink" title="1.1.8 å®¹å™¨ä¼ è¾“æ–‡ä»¶"></a>1.1.8 å®¹å™¨ä¼ è¾“æ–‡ä»¶</h3><p>æ€ä¹ˆè·Ÿå®¹å™¨äº’ç›¸ä¼ è¾“æ–‡ä»¶ï¼Ÿä½¿ç”¨<code>docker cp</code>å‘½ä»¤</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th>æº</th>
<th>ç›®æ ‡</th>
</tr>
</thead>
<tbody><tr>
<td>å®¿ä¸»æœºâ€“&gt;å®¹å™¨ ä¸Šä¼ </td>
<td>docker cp</td>
<td>è·¯å¾„æˆ–æ–‡ä»¶</td>
<td>å®¹å™¨:å®¹å™¨ä¸­ç›®å½•</td>
</tr>
<tr>
<td>å®¹å™¨â€“&gt;å®¿ä¸»æœº ä¸‹è½½</td>
<td>docker cp</td>
<td>å®¹å™¨:å®¹å™¨ä¸­ç›®å½•</td>
<td>è·¯å¾„æˆ–æ–‡ä»¶</td>
</tr>
</tbody></table>
<p>æ¡ˆä¾‹01ï¼šä»å®¹å™¨ä¸‹è½½æ–‡ä»¶</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‹·è´å®¹å™¨ä¸­çš„hostsæ–‡ä»¶ä¸‹æ¥</span></span><br><span class="line">[root@docker01[ ~]#docker cp oldboy_centos_v6:/etc/hosts ./docker_centos_hosts</span><br><span class="line">Successfully copied 2.05kB to /root/docker_centos_hosts</span><br></pre></td></tr></tbody></table></figure>

<p>æ¡ˆä¾‹02ï¼šä¸Šä¼ æ–‡ä»¶åˆ°å®¹å™¨</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç™¾åº¦é¦–é¡µï¼Œä¿å­˜åˆ°ç‰©ç†æœº</span></span><br><span class="line">[root@docker01[ ~]#curl -o index.html www.baidu.com</span><br><span class="line"><span class="meta prompt_">  % </span><span class="language-bash">Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span></span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  2381  100  2381    0     0  31048      0 --:--:-- --:--:-- --:--:-- 30922</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸Šä¼ åˆ°nginxå®¹å™¨ï¼Œæ›¿æ¢é¦–é¡µ</span></span><br><span class="line">[root@docker01[ ~]#docker cp index.html test_nginx_alpine_v1:/usr/share/nginx/html/index.html</span><br><span class="line">Successfully copied 4.1kB to test_nginx_alpine_v1:/usr/share/nginx/html/index.html</span><br></pre></td></tr></tbody></table></figure>



<h3 id="1-1-9-commitè‡ªå®šä¹‰é•œåƒğŸŒŸ"><a href="#1-1-9-commitè‡ªå®šä¹‰é•œåƒğŸŒŸ" class="headerlink" title="1.1.9 commitè‡ªå®šä¹‰é•œåƒğŸŒŸ"></a>1.1.9 commitè‡ªå®šä¹‰é•œåƒğŸŒŸ</h3><p>commitç”¨äºå¤„ç†å®¹å™¨ï¼Œç”Ÿæˆé•œåƒ.  </p>
<p>ä½¿ç”¨æµç¨‹:</p>
<ul>
<li>è¿è¡ŒæœåŠ¡é•œåƒæˆ–ç³»ç»Ÿé•œåƒ,å¯åŠ¨åæˆä¸ºå®¹å™¨.</li>
<li>æ ¹æ®æˆ‘ä»¬çš„éœ€æ±‚,å¯¹å®¹å™¨è¿›è¡Œä¿®æ”¹.</li>
<li>æµ‹è¯•å®Œæˆå.</li>
<li>æœ€åé€šè¿‡commitå‘½ä»¤æŠŠå®¹å™¨ä¿å­˜ä¸ºé•œåƒ.</li>
<li>æ ¹æ®æ–°ç”Ÿæˆçš„é•œåƒåˆ›å»ºå®¹å™¨å¹¶æµ‹è¯•.</li>
</ul>
<p>æ¡ˆä¾‹ï¼šä¿®æ”¹nginxå®¹å™¨ï¼Œç”Ÿæˆè‡ªå®šä¹‰é•œåƒ</p>
<ul>
<li>éœ€æ±‚ï¼š<ul>
<li>åŸºäºngxé•œåƒåˆ›å»ºå®¹å™¨</li>
<li>ä¿®æ”¹ç«™ç‚¹ç›®å½• /app/code/restart/ (default.conf)</li>
<li>ä¸Šä¼ ä»£ç ,è§£å‹</li>
<li>æµ‹è¯•</li>
<li>commit</li>
</ul>
</li>
</ul>
<p>1ã€åˆ›å»ºå®¹å™¨</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@docker01[ ~]#docker run -d -p 80:80 --name "commit_nginx" nginx:stable-alpine </span><br><span class="line">d7919255e43900e6ac3b556e1e27dff6ba3c4932fe354e27a62319a215cc20aa</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€è¿›å…¥å®¹å™¨ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå‡†å¤‡ç¯å¢ƒ</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹é…ç½®æ–‡ä»¶</span></span><br><span class="line">/etc/nginx/conf.d # cat default.conf</span><br><span class="line">server {</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  restart.commit.cn;</span><br><span class="line">    root   /app/code/restart;</span><br><span class="line">    location / {</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line">/ # mkdir -p /app/code/restart</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€ä¸Šä¼ htmlä»£ç </p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@docker01[ ~]#echo "RESTART PAGE" &gt; index.html </span><br><span class="line">[root@docker01[ ~]#docker cp index.html  commit_nginx:/app/code/restart</span><br><span class="line">Successfully copied 2.05kB to commit_nginx:/app/code/restart</span><br></pre></td></tr></tbody></table></figure>

<p>é‡å¯æœåŠ¡æµ‹è¯•ä¸‹</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@docker01[ ~]#docker restart d7919255e439</span><br><span class="line">d7919255e439</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/../../../img/image-20240524161534148.png" alt="image-20240524161534148"></p>
<p>4ã€æ ¹æ®å®¹å™¨ç”Ÿæˆé•œåƒ</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@docker01[ ~]#docker commit commit_nginx nginx:stable-alpine_restart_v1</span><br><span class="line">sha256:21ca067362e8bf124ea914db502b69de62053cddcdae61699951abc34f8cf832</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹</span></span><br><span class="line">[root@docker01[ ~]#docker images</span><br><span class="line">REPOSITORY   TAG                        IMAGE ID       CREATED          SIZE</span><br><span class="line">nginx        stable-alpine_restart_v1   21ca067362e8   18 seconds ago   23.2MB</span><br><span class="line">...</span><br></pre></td></tr></tbody></table></figure>

<p>5ã€æ ¹æ®æ–°çš„é•œåƒï¼Œé‡æ–°åˆ›å»ºå®¹å™¨ï¼Œç«¯å£81</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@docker01[ ~]#docker run -d -p 81:80 nginx:stable-alpine_restart_v1 </span><br><span class="line">5477c2d5e0c9fab71a23b8bd6183277c2c4219fef8137ba761474909bbd34817</span><br></pre></td></tr></tbody></table></figure>

<p>æµ‹è¯•è®¿é—®<a target="_blank" rel="noopener" href="http://10.0.0.81:81/">http://10.0.0.81:81</a></p>
<p><img src="/../../../img/image-20240524161910037.png" alt="image-20240524161910037"></p>
<h3 id="1-1-10-å®¹å™¨å¯¼å‡ºå¯¼å…¥"><a href="#1-1-10-å®¹å™¨å¯¼å‡ºå¯¼å…¥" class="headerlink" title="1.1.10 å®¹å™¨å¯¼å‡ºå¯¼å…¥"></a>1.1.10 å®¹å™¨å¯¼å‡ºå¯¼å…¥</h3><p>å¯¼å‡ºå®¹å™¨æˆtaråŒ…</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å®¹å™¨</span></span><br><span class="line">[root@docker01 ~]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE              COMMAND                  CREATED         STATUS         PORTS                               NAMES</span><br><span class="line">e4ee1efb593c   tengine:birds-v1   "nginx -g 'daemon ofâ€¦"   3 seconds ago   Up 2 seconds   0.0.0.0:80-&gt;80/tcp, :::80-&gt;80/tcp   birds_test</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯¼å‡ºå®¹å™¨</span></span><br><span class="line">[root@docker01 ~]#docker export birds_test -o bird_test.tar</span><br></pre></td></tr></tbody></table></figure>

<p>å°†æ‰“åŒ…æ–‡ä»¶æ‹·è´åˆ°å¦ä¸€å°æœºå™¨ä¸­ï¼Œå¯¼å…¥æˆé•œåƒï¼ˆæœ‰å‘ï¼‰</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‹·è´åˆ°docker02ä¸­</span></span><br><span class="line">[root@docker01 ~]#scp bird_test.tar 10.0.0.82:/tmp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker02è™šæ‹Ÿæœºä¸­æ²¡æœ‰ä»»ä½•é•œåƒå’Œå®¹å™¨</span></span><br><span class="line">[root@docker02 ~]#docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID   CREATED   SIZE</span><br><span class="line">[root@docker02 ~]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">docker02å¯¼å…¥</span></span><br><span class="line">[root@docker02 ~]#docker import /tmp/bird_test.tar </span><br><span class="line">sha256:a823ac7e01d4c783ec8f00356662176c5c279b10999fe6f463a4476a9b16bb05</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘ï¼Œå¯¼å…¥åç”Ÿæˆçš„é•œåƒæ²¡æœ‰åå­—æ ‡ç­¾</span></span><br><span class="line">[root@docker02 ~]#docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">&lt;none&gt;       &lt;none&gt;    a823ac7e01d4   11 seconds ago   409MB</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡æ–°æ·»åŠ ä»“åº“åå’Œæ ‡ç­¾</span></span><br><span class="line">[root@docker02 ~]#docker tag a823ac7e01d4 tengine:birds-v1</span><br><span class="line">[root@docker02 ~]#docker images</span><br><span class="line">REPOSITORY   TAG        IMAGE ID       CREATED         SIZE</span><br><span class="line">tengine      birds-v1   a823ac7e01d4   3 minutes ago   409MB</span><br></pre></td></tr></tbody></table></figure>



<h1 id="äºŒã€ç«¯å£æ˜ å°„"><a href="#äºŒã€ç«¯å£æ˜ å°„" class="headerlink" title="äºŒã€ç«¯å£æ˜ å°„"></a>äºŒã€ç«¯å£æ˜ å°„</h1><p>å®¹å™¨çš„ç«¯å£æ˜ å°„æ€ä¹ˆå®ç°çš„ï¼Ÿ</p>
<ul>
<li>ä½¿ç”¨<code>docker run -p</code>çš„æ—¶å€™ï¼Œå¤–ç•Œè®¿é—®dockerå®¹å™¨ä¸­çš„æœåŠ¡æˆ–ç«¯å£ï¼Œéœ€è¦ä½¿ç”¨ç«¯å£æ˜ å°„ã€‚</li>
<li>æœ¬è´¨æ˜¯é€šè¿‡iptables natè§„åˆ™å®ç°çš„ï¼Œåœ¨natè¡¨ä¸­åˆ›å»ºäº†dockerè‡ªå®šä¹‰çš„é“¾</li>
</ul>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@docker01[ ~]#iptables -t nat -nL</span><br><span class="line">Chain PREROUTING (policy ACCEPT)</span><br><span class="line">target     prot opt source               destination         </span><br><span class="line">DOCKER     all  --  0.0.0.0/0            0.0.0.0/0            ADDRTYPE match dst-type LOCAL</span><br><span class="line"></span><br><span class="line">Chain INPUT (policy ACCEPT)</span><br><span class="line">target     prot opt source               destination         </span><br><span class="line"></span><br><span class="line">Chain OUTPUT (policy ACCEPT)</span><br><span class="line">target     prot opt source               destination         </span><br><span class="line">DOCKER     all  --  0.0.0.0/0           !127.0.0.0/8          ADDRTYPE match dst-type LOCA</span><br><span class="line"></span><br><span class="line">Chain POSTROUTING (policy ACCEPT)</span><br><span class="line">target     prot opt source               destination         </span><br><span class="line">MASQUERADE  all  --  172.17.0.0/16        0.0.0.0/0           </span><br><span class="line">MASQUERADE  tcp  --  172.17.0.2           172.17.0.2           tcp dpt:80</span><br><span class="line">MASQUERADE  tcp  --  172.17.0.3           172.17.0.3           tcp dpt:80</span><br><span class="line"></span><br><span class="line">Chain DOCKER (2 references)</span><br><span class="line">target     prot opt source               destination         </span><br><span class="line">RETURN     all  --  0.0.0.0/0            0.0.0.0/0           </span><br><span class="line">DNAT       tcp  --  0.0.0.0/0            0.0.0.0/0            tcp dpt:80 to:172.17.0.2:80</span><br><span class="line">DNAT       tcp  --  0.0.0.0/0            0.0.0.0/0            tcp dpt:81 to:172.17.0.3:80</span><br></pre></td></tr></tbody></table></figure>



<h2 id="2-1-èƒŒåå…·ä½“åšäº†ä»€ä¹ˆï¼Ÿ"><a href="#2-1-èƒŒåå…·ä½“åšäº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2.1 èƒŒåå…·ä½“åšäº†ä»€ä¹ˆï¼Ÿ"></a>2.1 èƒŒåå…·ä½“åšäº†ä»€ä¹ˆï¼Ÿ</h2><ul>
<li>æ·»åŠ äº†å¯¹åº”é˜²ç«å¢™è§„åˆ™</li>
</ul>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç±»ä¼¼äº</span></span><br><span class="line">iptables -t nat -A DOCKER ! -i docker0 -p tcp -m tcp --dport 81 -j DNAT --todestination 10.0.0.81:80</span><br></pre></td></tr></tbody></table></figure>

<p>-<br>  å¼€å¯å†…æ ¸è½¬å‘åŠŸèƒ½(éœ€è¦æˆ‘ä»¬è‡ªå·±å¼€å¯)  </p>
<p>æŸ¥çœ‹ç«¯å£ä¿¡æ¯ï¼š</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@docker01[ ~]#ss -lntup | grep 81</span><br><span class="line">tcp    LISTEN     0      128       *:81                    *:*                   users:(("docker-proxy",pid=26582,fd=4))</span><br><span class="line">tcp    LISTEN     0      128    [::]:81                 [::]:*                   users:(("docker-proxy",pid=26586,fd=4))</span><br></pre></td></tr></tbody></table></figure>



<h2 id="2-2-ç”¨æˆ·è®¿é—®çš„æ—¶å€™ç»å†äº†ä»€ä¹ˆ"><a href="#2-2-ç”¨æˆ·è®¿é—®çš„æ—¶å€™ç»å†äº†ä»€ä¹ˆ" class="headerlink" title="2.2 ç”¨æˆ·è®¿é—®çš„æ—¶å€™ç»å†äº†ä»€ä¹ˆ"></a>2.2 ç”¨æˆ·è®¿é—®çš„æ—¶å€™ç»å†äº†ä»€ä¹ˆ</h2><p>å†…éƒ¨é€šè¿‡<code>è™šæ‹Ÿç½‘å¡</code>æ¥å®ç°åˆ†é…ï¼Œå¦‚å›¾</p>
<p><img src="/../../../img/image-20240524162640454.png" alt="image-20240524162640454"></p>
<h2 id="2-3-ç«¯å£æ˜ å°„çš„æ¡ˆä¾‹"><a href="#2-3-ç«¯å£æ˜ å°„çš„æ¡ˆä¾‹" class="headerlink" title="2.3 ç«¯å£æ˜ å°„çš„æ¡ˆä¾‹"></a>2.3 ç«¯å£æ˜ å°„çš„æ¡ˆä¾‹</h2><h3 id="2-3-1-ä¸€å¯¹ä¸€æ˜ å°„"><a href="#2-3-1-ä¸€å¯¹ä¸€æ˜ å°„" class="headerlink" title="2.3.1 ä¸€å¯¹ä¸€æ˜ å°„"></a>2.3.1 ä¸€å¯¹ä¸€æ˜ å°„</h3><p>è¿˜æ˜¯ä½¿ç”¨<code>docker run -p</code></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name "oldboy_nginx_80" -p 80:80 nginx:1.20.2-alpine</span><br></pre></td></tr></tbody></table></figure>

<p>å…³äº<code>-p</code>é€‰é¡¹çš„è¯¦ç»†æè¿°</p>
<table>
<thead>
<tr>
<th>docker run</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>-pé€‰é¡¹(å°å†™å­—æ¯P) å®¿ä¸»æœºç«¯å£:å®¹å™¨ä¸­çš„ç«¯å£</td>
<td>-p 80:80 -p 443:443</td>
</tr>
<tr>
<td>-p :å®¹å™¨ä¸­ç«¯å£</td>
<td>-p :80 è¡¨ç¤ºå®¿ä¸»æœºç«¯å£éšæœº,å¾ˆå°‘ç”¨.</td>
</tr>
<tr>
<td>-p ç«¯å£èŒƒå›´:ç«¯å£èŒƒå›´</td>
<td>80-88:80-88</td>
</tr>
</tbody></table>
<h3 id="2-3-2-å¤šå¯¹å¤šæ˜ å°„"><a href="#2-3-2-å¤šå¯¹å¤šæ˜ å°„" class="headerlink" title="2.3.2 å¤šå¯¹å¤šæ˜ å°„"></a>2.3.2 å¤šå¯¹å¤šæ˜ å°„</h3><p>æ˜ å°„8080,8081,8082 åˆ°å®¹å™¨ä¸­å®¹å™¨ä¸­ä¹Ÿæ˜¯8080,8081,8082  </p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-dä¸€ä¸ªä¸ªå†™</span></span><br><span class="line">[root@docker01[ ~]#dockedocker run -d -p 8080:8080 -p 8081:8081 -p 8082:8082 -p 86:80 nginx:stable-alpine</span><br><span class="line">43bcb519597f7a2f00ceea65fcb4664c5e52419d80c92c62dd5fbc1ccc2a0f5e</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹çŠ¶æ€</span></span><br><span class="line">[root@docker01[ ~]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND                  CREATED         STATUS         PORTS                                                                                              NAMES</span><br><span class="line">43bcb519597f   nginx:stable-alpine   "/docker-entrypoint.â€¦"   3 seconds ago   Up 2 seconds   0.0.0.0:8080-8082-&gt;8080-8082/tcp, :::8080-8082-&gt;8080-8082/tcp, 0.0.0.0:86-&gt;80/tcp, :::86-&gt;80/tcp   magical_margulis</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹portä¿¡æ¯</span></span><br><span class="line">[root@docker01[ ~]#docker port magical_margulis</span><br><span class="line">80/tcp -&gt; 0.0.0.0:86</span><br><span class="line">80/tcp -&gt; [::]:86</span><br><span class="line">8080/tcp -&gt; 0.0.0.0:8080</span><br><span class="line">8080/tcp -&gt; [::]:8080</span><br><span class="line">8081/tcp -&gt; 0.0.0.0:8081</span><br><span class="line">8081/tcp -&gt; [::]:8081</span><br><span class="line">8082/tcp -&gt; 0.0.0.0:8082</span><br><span class="line">8082/tcp -&gt; [::]:8082	# å®¹å™¨ä¸­çš„ç«¯å£ -&gt; å®¿ä¸»æœºç«¯å£</span><br></pre></td></tr></tbody></table></figure>



<h3 id="2-3-3-IPç»‘å®šç«¯å£"><a href="#2-3-3-IPç»‘å®šç«¯å£" class="headerlink" title="2.3.3 IPç»‘å®šç«¯å£"></a>2.3.3 IPç»‘å®šç«¯å£</h3><p>ç”¨æˆ·åªèƒ½é€šè¿‡å®¿ä¸»æœºçš„æŸä¸ªç½‘å¡è¿æ¥è¿™ä¸ªç«¯å£ï¼Œèµ·å®‰å…¨é˜²æŠ¤ä½œç”¨</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åªèƒ½ç”¨172.16.1.8:12306æ¥è®¿é—®å®¹å™¨çš„80ç«¯å£</span></span><br><span class="line">[root@docker01[ ~]#docker run -d -p 172.16.1.81:12306:80 nginx:stable-alpine</span><br><span class="line">44d0e51e63f65650e0faadd705fb33c944409591b30a4d4731fa1c3643200f75</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹</span></span><br><span class="line">[root@docker01[ ~]#docker ps</span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS          PORTS                       NAMES</span><br><span class="line">44d0e51e63f6   nginx:stable-alpine   "/docker-entrypoint.â€¦"   44 seconds ago   Up 43 seconds   172.16.1.81:12306-&gt;80/tcp   nice_mendel</span><br></pre></td></tr></tbody></table></figure>



<h1 id="ä¸‰ã€æ•°æ®å·æŒ‚è½½"><a href="#ä¸‰ã€æ•°æ®å·æŒ‚è½½" class="headerlink" title="ä¸‰ã€æ•°æ®å·æŒ‚è½½"></a>ä¸‰ã€æ•°æ®å·æŒ‚è½½</h1><h2 id="3-1-ä¸ºä»€ä¹ˆéœ€è¦æŒ‚è½½æ•°æ®"><a href="#3-1-ä¸ºä»€ä¹ˆéœ€è¦æŒ‚è½½æ•°æ®" class="headerlink" title="3.1 ä¸ºä»€ä¹ˆéœ€è¦æŒ‚è½½æ•°æ®"></a>3.1 ä¸ºä»€ä¹ˆéœ€è¦æŒ‚è½½æ•°æ®</h2><p>æ•°æ®æ”¾å®¹å™¨é‡Œï¼Œè¦æ˜¯ä¸å°å¿ƒ<code>rm -f</code>åˆ äº†æ€ä¹ˆåŠï¼Ÿ</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªæ•°æ®æŒä¹…åŒ–çš„é—®é¢˜ï¼Œéœ€è¦è®©æ•°æ®æ°¸ä¹…<strong>ä¿å­˜åœ¨å®¿ä¸»æœº</strong>ä¸­ï¼Œé€šè¿‡æŒ‚è½½çš„æ–¹å¼æŒ‚</p>
<p>åˆ°å®¹å™¨ä¸Š</p>
<p><img src="/../../../img/image-20240524164011370.png" alt="image-20240524164011370"></p>
<h2 id="3-2-é€‰é¡¹è¡¥å……"><a href="#3-2-é€‰é¡¹è¡¥å……" class="headerlink" title="3.2 é€‰é¡¹è¡¥å……"></a>3.2 é€‰é¡¹è¡¥å……</h2><h3 id="3-2-1-docker-runé€‰é¡¹è¡¥å……"><a href="#3-2-1-docker-runé€‰é¡¹è¡¥å……" class="headerlink" title="3.2.1 docker runé€‰é¡¹è¡¥å……"></a>3.2.1 docker runé€‰é¡¹è¡¥å……</h3><p><code>--rm</code>é€‰é¡¹</p>
<ul>
<li>å®¹å™¨é€€å‡ºçš„æ—¶å€™ï¼Œå®¹å™¨è‡ªåŠ¨åˆ é™¤</li>
<li>ä¸€èˆ¬ç”¨äºæµ‹è¯•ï¼Œä¸´æ—¶ä½¿ç”¨å®¹å™¨</li>
</ul>
<p><code>--restart</code>é€‰é¡¹ï¼Œå®¹å™¨çš„é‡å¯ç­–ç•¥</p>
<ul>
<li>always è‡ªåŠ¨é‡å¯</li>
<li>unless-stopped åªåœ¨å®¹å™¨å…³é—­ï¼Œåœæ­¢çš„æ—¶å€™</li>
<li>on-failure åªåœ¨å¤±è´¥çš„æ—¶å€™é‡å¯</li>
<li>é»˜è®¤ï¼Œä¸è‡ªåŠ¨é‡å¯</li>
</ul>
<h3 id="3-2-2-docker-execé€‰é¡¹è¡¥å……"><a href="#3-2-2-docker-execé€‰é¡¹è¡¥å……" class="headerlink" title="3.2.2 docker execé€‰é¡¹è¡¥å……"></a>3.2.2 docker execé€‰é¡¹è¡¥å……</h3><p>åœ¨è¿›å…¥Mysqlæˆ–è€…redisç­‰æ•°æ®åº“æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥execè¿›å…¥æ•°æ®åº“æ“ä½œç»ˆç«¯ï¼Œè€Œä¸æ˜¯/bin/bashï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯¹Mysql</span></span><br><span class="line">docker exec -it å®¹å™¨ mysql -u root -p</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯¹redis</span></span><br><span class="line">docker exec -it å®¹å™¨ redis-cli</span><br></pre></td></tr></tbody></table></figure>

<h2 id="3-3-æŒ‚è½½é¡¹ç›®"><a href="#3-3-æŒ‚è½½é¡¹ç›®" class="headerlink" title="3.3 æŒ‚è½½é¡¹ç›®"></a>3.3 æŒ‚è½½é¡¹ç›®</h2><p>å°†ç«™ç‚¹æ–‡ä»¶/ç«™ç‚¹ç›®å½•ã€é…ç½®æ–‡ä»¶ç›®å½•ã€æ—¥å¿—ç›®å½•ä»¥<code>-v</code>çš„æ–¹å¼æŒ‚è½½</p>
<h3 id="3-3-1-æŒ‚è½½å•ä¸ªç«™ç‚¹æ–‡ä»¶"><a href="#3-3-1-æŒ‚è½½å•ä¸ªç«™ç‚¹æ–‡ä»¶" class="headerlink" title="3.3.1 æŒ‚è½½å•ä¸ªç«™ç‚¹æ–‡ä»¶"></a>3.3.1 æŒ‚è½½å•ä¸ªç«™ç‚¹æ–‡ä»¶</h3><p>ä½¿ç”¨æ•°æ®å·æŒ‚è½½index.htmlåˆ°å®¹å™¨ä¸­çš„/usr/share/nginx/html/index.html  </p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºæœ¬åœ°æ–‡ä»¶</span></span><br><span class="line">mkdir -p /app/docker/test/code</span><br><span class="line">echo "&lt;h1&gt;THIS IS MOUNTED PAGE&lt;/h1&gt;" &gt; /app/docker/test/code/index.html</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿è¡Œå®¹å™¨ï¼ˆæŒ‚è½½å·ï¼‰</span></span><br><span class="line">docker run -d \</span><br><span class="line">--name "docker_volumnt_ngx_v1" \</span><br><span class="line">-p 80:80 \</span><br><span class="line">-v /app/docker/test/code/index.html:/usr/share/nginx/html/index.html \</span><br><span class="line">nginx:stable-alpine</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æŒ‚è½½</span></span><br><span class="line">[root@docker01[ ~]#docker inspect docker_volumnt_ngx_v1 | jq .[].HostConfig.Binds</span><br><span class="line">[</span><br><span class="line">  "/app/docker/test/code/index.html:/usr/share/nginx/html/index.html"</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<p>æµ‹è¯•</p>
<p><img src="/../../../img/image-20240524170033688.png" alt="image-20240524170033688"></p>
<blockquote>
<p>æç¤ºï¼š</p>
<p>å¦‚æœå®¿ä¸»æœºæ–‡ä»¶å†…å®¹æ”¹å˜äº†ï¼Œéœ€è¦<strong>é‡å¯å®¹å™¨æ‰èƒ½ç”Ÿæ•ˆ</strong></p>
</blockquote>
<h3 id="3-3-2-æŒ‚è½½ç«™ç‚¹ç›®å½•"><a href="#3-3-2-æŒ‚è½½ç«™ç‚¹ç›®å½•" class="headerlink" title="3.3.2 æŒ‚è½½ç«™ç‚¹ç›®å½•"></a>3.3.2 æŒ‚è½½ç«™ç‚¹ç›®å½•</h3><p>éœ€æ±‚ï¼š</p>
<ul>
<li>ç”¨æ•°æ®å·æŒ‚è½½ï¼šä»£ç ç›®å½•.</li>
<li>ç”¨æ•°æ®å·æŒ‚è½½ï¼šé…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ç›®å½•.</li>
<li>ç”¨æ•°æ®å·æŒ‚è½½ï¼šæ•°æ®ç›®å½•(æ•°æ®åº“)</li>
<li>è¿˜å¯ä»¥ç”¨äºæ—¥å¿—</li>
</ul>
<blockquote>
<p>è¡¥å……ï¼š</p>
<p>Nginx - alpineé•œåƒçš„é…ç½®æ–‡ä»¶ï¼š</p>
<ul>
<li>é…ç½®æ–‡ä»¶å­ç›®å½•: /app/docker/restart/conf/nginx/conf.d/</li>
<li>æŒ‚è½½åˆ°ï¼š/etc/nginx/conf.d/</li>
<li>é…ç½®æ–‡ä»¶ä¸»ç›®å½•: /app/docker/restart/conf/nginx/nginx.conf</li>
<li>æŒ‚è½½åˆ°ï¼š/etc/nginx/nginx.conf</li>
<li>ç«™ç‚¹ç›®å½•: /app/docker/restart/code/</li>
<li>æŒ‚è½½åˆ°ï¼š/app/code/restart/</li>
</ul>
</blockquote>
<p>å®ç°ï¼š</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç‰©ç†æœºï¼Œåˆ›å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line">[root@docker01[ /app/docker/test/code]#mkdir -p /app/docker/conf/nginx/conf.d /app/docker/code/restart</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨dockerå¹¶æŒ‚è½½æ–‡ä»¶</span></span><br><span class="line">docker run -d --name "oldboy_restart_volume_v1" -p 80:80 \</span><br><span class="line">-v /app/docker/restart/conf/nginx/conf.d/:/etc/nginx/conf.d/ \</span><br><span class="line">-v /app/docker/restart/conf/nginx/nginx.conf:/etc/nginx/nginx.conf \</span><br><span class="line">-v /app/docker/restart/code/:/app/code/restart/ \</span><br><span class="line">--restart=always \</span><br><span class="line">nginx:alpine</span><br></pre></td></tr></tbody></table></figure>



<h2 id="3-4-æ•°æ®å·ç©ºé—´"><a href="#3-4-æ•°æ®å·ç©ºé—´" class="headerlink" title="3.4 æ•°æ®å·ç©ºé—´"></a>3.4 æ•°æ®å·ç©ºé—´</h2><p>åº”ç”¨åœºæ™¯ï¼šåªå…³æ³¨å®¹å™¨ä¸­çš„æ•°æ®ä¸ä¸¢ï¼Œä¸å…³æ³¨æ•°æ®å…·ä½“æ”¾åœ¨å“ªé‡Œ</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºæ•°æ®å·</span></span><br><span class="line">[root@docker01[ /]#docker volume create oldboydata</span><br><span class="line">oldboydata</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ•°æ®å·</span></span><br><span class="line">[root@docker01[ /]#docker volume ls</span><br><span class="line">DRIVER    VOLUME NAME</span><br><span class="line">local     oldboydata</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨ç‰©ç†æœºçš„å®é™…å­˜æ”¾ä½ç½®</span></span><br><span class="line">[root@docker01[ /]#tree /var/lib/docker/volumes/oldboydata/</span><br><span class="line">/var/lib/docker/volumes/oldboydata/</span><br><span class="line">â””â”€â”€ _data</span><br><span class="line">1 directory, 0 files</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŒ‚è½½æ•°æ®å·è¿è¡Œ</span></span><br><span class="line">[root@docker01[ /]#docker run -d --name "nginx_vol" -p 80:80 -v oldboydata:/var/log/nginx/ nginx:stable-alpine</span><br><span class="line">8c2800b434161fd7401b56b45ba236b3e0f10e354baecbc47be03e47e4b70878</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å·²ç»ç”Ÿæ•ˆ</span></span><br><span class="line">[root@docker01[ /app/docker/restart/conf/nginx]#ls -l /var/lib/docker/volumes/</span><br><span class="line">total 24</span><br><span class="line">brw-------. 1 root root 253, 0 May 24 10:35 backingFsBlockDev</span><br><span class="line">-rw-------. 1 root root  32768 May 27 09:09 metadata.db</span><br><span class="line">drwx-----x. 3 root root     19 May 27 09:09 oldboydata</span><br><span class="line">[root@docker01[ /app/docker/restart/conf/nginx]#ls -l /var/lib/docker/volumes/oldboydata/_data/</span><br><span class="line">total 0</span><br><span class="line">lrwxrwxrwx. 1 root root 11 Nov 17  2021 access.log -&gt; /dev/stdout</span><br><span class="line">lrwxrwxrwx. 1 root root 11 Nov 17  2021 error.log -&gt; /dev/stderr</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ³¨æ„ï¼š</p>
<p>nginxå®¹å™¨çš„æ—¥å¿—é»˜è®¤æ˜¯è¾“å‡ºåˆ°dockeræ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºçš„ï¼Œè€Œä¸æ˜¯å­˜æ”¾åœ¨æ–‡</p>
<p>ä»¶ä¸­ã€‚æœªæ¥æŸ¥çœ‹æ—¥å¿—çš„æ—¶å€™ï¼Œä¸ç”¨è¿›å…¥åˆ°å®¹å™¨ï¼Œç„¶åtail/lessä½¿ç”¨å‘½ä»¤æŸ¥çœ‹.</p>
<p>ç›´æ¥ä½¿ç”¨docker logs å®¹å™¨idæˆ–åå­— å°±å¯ä»¥çœ‹æ—¥å¿—ã€‚</p>
<p>ç›¸å½“äºæŸ¥çœ‹access.logæˆ–error.log  </p>
</blockquote>
<h2 id="3-5-éšæœºæ•°æ®å·ï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰"><a href="#3-5-éšæœºæ•°æ®å·ï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰" class="headerlink" title="3.5 éšæœºæ•°æ®å·ï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰"></a>3.5 éšæœºæ•°æ®å·ï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-vä¸æŒ‡å®šå…·ä½“çš„å·æ ‡</span></span><br><span class="line">docker run -d --name "nginx_vol_oldboylogdatav2" -p :80 -v :/var/log/nginx/ nginx:stable-alpine</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ³¨æ„ï¼š</p>
<p>åœ¨Docker version 26.1.3ä¸­ï¼Œæµ‹è¯•å·²ç»ä¸è¡Œäº†ï¼Œä¼šæŠ¥é”™</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">docker: invalid spec: :/var/log/nginx/: empty section between colons</span></span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<h2 id="3-6-å®¹å™¨æ—¶åŒºçš„é—®é¢˜"><a href="#3-6-å®¹å™¨æ—¶åŒºçš„é—®é¢˜" class="headerlink" title="3.6 å®¹å™¨æ—¶åŒºçš„é—®é¢˜"></a>3.6 å®¹å™¨æ—¶åŒºçš„é—®é¢˜</h2><p>è¿›å…¥å®¹å™¨å†…æ‰§è¡Œ</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…tzdataå·¥å…·ï¼Œè®¾ç½®æ—¶åŒº</span></span><br><span class="line">apk update \</span><br><span class="line">&amp;&amp; apk add tzdata \</span><br><span class="line">&amp;&amp; cp /usr/share/zoneinfo/Asia/Shanghai /etc/locatime \</span><br><span class="line">&amp;&amp; echo "Asia/Shanghai" &gt; /etc/timezone</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æµ‹è¯•ï¼Œæ—¶åŒºæ²¡æœ‰ç”Ÿæ•ˆã€‚ã€‚ã€‚ã€‚è¿˜æ˜¯è¦ç”¨æ—¶ç½‘ä¸Šæ‰¾å§</p>
</blockquote>
<h2 id="3-7-æ•°æ®å·ä½¿ç”¨ä¸å®¹å™¨æ¶æ„"><a href="#3-7-æ•°æ®å·ä½¿ç”¨ä¸å®¹å™¨æ¶æ„" class="headerlink" title="3.7 æ•°æ®å·ä½¿ç”¨ä¸å®¹å™¨æ¶æ„"></a>3.7 æ•°æ®å·ä½¿ç”¨ä¸å®¹å™¨æ¶æ„</h2><p>è¿è¡Œå¤šä¸ªdockerçš„æ—¶å€™ï¼Œåªéœ€è¦ç»´æŠ¤ä¸€ä»½ä»£ç </p>
<p><img src="/../../../img/image-20240528140249375.png" alt="image-20240528140249375"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="http://gsproj.github.io">Haris</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://gsproj.github.io/2024/05/24/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day60-%E5%AE%B9%E5%99%A8%E6%9E%B6%E6%9E%84-docker-2/">http://gsproj.github.io/2024/05/24/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day60-%E5%AE%B9%E5%99%A8%E6%9E%B6%E6%9E%84-docker-2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="http://gsproj.github.io" target="_blank">Harisçš„å°ç«™</a>ï¼</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/img/%E5%A4%B4%E5%83%8F.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer=""></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/05/24/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day59-%E5%AE%B9%E5%99%A8%E6%9E%B6%E6%9E%84-docker-1/" title="day59-å®¹å™¨æ¶æ„-Dockerï¼ˆä¸€ï¼‰"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">day59-å®¹å™¨æ¶æ„-Dockerï¼ˆä¸€ï¼‰</div></div><div class="info-2"><div class="info-item-1">å®¹å™¨æ¶æ„-Docker-01ä»Šæ—¥å†…å®¹ï¼š  æœåŠ¡æ¶æ„æ¦‚è¿° å®¹å™¨ä»‹ç» Dockerå¿«é€Ÿä¸Šæ‰‹  ä¸€ã€IAAS PAAS SAASæ¦‚è¿°Iaasï¼šåŸºç¡€è®¾æ–½å³æœåŠ¡ Infrastructure-as-a-Service Paasï¼šå¹³å°å³æœåŠ¡ Platform-as-a-Service Saasï¼šè½¯ä»¶å³æœåŠ¡ Software-as-a-Service Caasï¼šå®¹å™¨å³æœåŠ¡ ä»‹äºIAASå’ŒPAAS IAASï¼ŒPAASï¼ŒSAASè¿™äº›æœåŠ¡ï¼Œç”¨äºå¸®åŠ©äººä»¬æ›´å¿«å®ç°ç›®æ ‡(æ­å»ºç¯å¢ƒ,ä½¿ç”¨äº§å“) ä»å·¦åˆ°å³ï¼Œäººä»¬éœ€è¦ç®¡ç†ä¸ç»´æŠ¤çš„åœ°æ–¹è¶Šæ¥è¶Šå°‘ï¼Œäººä»¬å¯ä»¥æŠŠé‡ç‚¹å…³æ³¨åœ¨ä½¿ç”¨/åº”ç”¨ä¸Š.   æ›´å½¢è±¡ç‚¹ï¼š  IAASå¹³å°:åŸºç¡€è®¾æ–½,é˜¿é‡Œäº‘,äº‘å‚å•†. PAASå¹³å°:æœåŠ¡/è¿è¡Œç¯å¢ƒæ˜¯okï¼Œå…¬æœ‰äº‘ï¼Œè´Ÿè½½å‡è¡¡SLB SAASå¹³å°:æœåŠ¡å·²ç»å‡†å¤‡å¥½ï¼Œæ‚¨ç›´æ¥ç”¨ï¼Œå…·ä½“äº§å“ï¼Œå¦‚processon,wps,äº¿å›¾  å›¾ç¤º-æŠ½è±¡ï¼š  å›¾ç¤º-å…·ä½“ï¼š  äºŒã€å®¹å™¨ä»‹ç»2.1...</div></div></div></a><a class="pagination-related" href="/2024/05/28/07_85%E6%9C%9F%E8%BF%90%E7%BB%B4/03_%E8%87%AA%E5%8A%A8%E5%8C%96%E6%9E%B6%E6%9E%84/day61-%E5%AE%B9%E5%99%A8%E6%9E%B6%E6%9E%84-docker-3/" title="day61-å®¹å™¨æ¶æ„-Dockerï¼ˆä¸‰ï¼‰"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">day61-å®¹å™¨æ¶æ„-Dockerï¼ˆä¸‰ï¼‰</div></div><div class="info-2"><div class="info-item-1">å®¹å™¨æ¶æ„-Docker-03ä»Šæ—¥å†…å®¹ï¼š -  ä¸€ã€å®¹å™¨è‡ªåŠ¨åŒ–Dockerfileæ‰‹åŠ¨è‡ªå®šä¹‰é•œåƒï¼Œå°±åƒåŠ å·¥æµæ°´çº¿ï¼Œéœ€è¦ä¸€ç›´è¿›è¡Œé‡å¤çš„æ“ä½œï¼š  éœ€è¦ä½¿ç”¨Dockerfileæ¥è®©å®ƒè‡ªåŠ¨åŒ–è¿è¡Œ 1.1 æ‰‹åŠ¨å®ç°-åˆ›å»ºtengineé•œåƒç›®æ ‡ï¼šå…ˆæ‰‹åŠ¨åˆ›å»ºtengineé•œåƒï¼Œäº†è§£æµç¨‹ 1.1.1 å¯åŠ¨Ubuntuå®¹å™¨123456# å¯åŠ¨[root@docker01 /]#docker run -itd --name "tengine_bird_v1" ubuntu:20.04 /bin/bash# è¿›å…¥[root@docker01 /]#docker exec -it tengine_bird_v1 /bin/bashroot@281122640a6d:/#   1.1.2 é…ç½®aptæºå¹¶å®‰è£…è½¯ä»¶12345678# æ›¿æ¢ä¸ºé˜¿é‡Œæºroot@281122640a6d:/# sed -ri 's#archive.ubuntu.com|security.ubuntu.com#mirrors.aliyun.com#g'...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/%E5%A4%B4%E5%83%8F.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info-name">Haris</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">216</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">32</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E6%9E%B6%E6%9E%84-Docker-02"><span class="toc-text">å®¹å™¨æ¶æ„-Docker-02</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81Docker%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%F0%9F%8C%9F%F0%9F%8C%9F"><span class="toc-text">ä¸€ã€Dockerå®¹å™¨ç®¡ç†ğŸŒŸğŸŒŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E5%AE%B9%E5%99%A8%E7%AE%A1%E7%90%86%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-text">1.1 å®¹å™¨ç®¡ç†çš„æ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8"><span class="toc-text">1.1.1 æŸ¥çœ‹å®¹å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-%E5%88%9B%E5%BB%BA-%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8"><span class="toc-text">1.1.2 åˆ›å»º/è¿è¡Œå®¹å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-3-%E5%90%AF%E5%8A%A8-%E5%81%9C%E6%AD%A2%E5%AE%B9%E5%99%A8"><span class="toc-text">1.1.3 å¯åŠ¨/åœæ­¢å®¹å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-4-%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8"><span class="toc-text">1.1.4 åˆ é™¤å®¹å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-5-%E8%BF%9B%E5%85%A5%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C%E7%9A%84%E5%AE%B9%E5%99%A8"><span class="toc-text">1.1.5 è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#exec%E5%92%8Cattach%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">execå’Œattachçš„åŒºåˆ«</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-6-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E4%BF%A1%E6%81%AF%E4%B8%8E%E7%8A%B6%E6%80%81"><span class="toc-text">1.1.6 æŸ¥çœ‹å®¹å™¨ä¿¡æ¯ä¸çŠ¶æ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-7-%E5%AE%B9%E5%99%A8%E5%A4%AF%E4%BD%8F%E6%89%8D%E8%83%BD%E4%B8%80%E7%9B%B4%E8%BF%90%E8%A1%8C%F0%9F%8C%9F"><span class="toc-text">1.1.7 å®¹å™¨å¤¯ä½æ‰èƒ½ä¸€ç›´è¿è¡ŒğŸŒŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-8-%E5%AE%B9%E5%99%A8%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6"><span class="toc-text">1.1.8 å®¹å™¨ä¼ è¾“æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-9-commit%E8%87%AA%E5%AE%9A%E4%B9%89%E9%95%9C%E5%83%8F%F0%9F%8C%9F"><span class="toc-text">1.1.9 commitè‡ªå®šä¹‰é•œåƒğŸŒŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-10-%E5%AE%B9%E5%99%A8%E5%AF%BC%E5%87%BA%E5%AF%BC%E5%85%A5"><span class="toc-text">1.1.10 å®¹å™¨å¯¼å‡ºå¯¼å…¥</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84"><span class="toc-text">äºŒã€ç«¯å£æ˜ å°„</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E8%83%8C%E5%90%8E%E5%85%B7%E4%BD%93%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-text">2.1 èƒŒåå…·ä½“åšäº†ä»€ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AE%E7%9A%84%E6%97%B6%E5%80%99%E7%BB%8F%E5%8E%86%E4%BA%86%E4%BB%80%E4%B9%88"><span class="toc-text">2.2 ç”¨æˆ·è®¿é—®çš„æ—¶å€™ç»å†äº†ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%E7%9A%84%E6%A1%88%E4%BE%8B"><span class="toc-text">2.3 ç«¯å£æ˜ å°„çš„æ¡ˆä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-%E4%B8%80%E5%AF%B9%E4%B8%80%E6%98%A0%E5%B0%84"><span class="toc-text">2.3.1 ä¸€å¯¹ä¸€æ˜ å°„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%98%A0%E5%B0%84"><span class="toc-text">2.3.2 å¤šå¯¹å¤šæ˜ å°„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-3-IP%E7%BB%91%E5%AE%9A%E7%AB%AF%E5%8F%A3"><span class="toc-text">2.3.3 IPç»‘å®šç«¯å£</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%95%B0%E6%8D%AE%E5%8D%B7%E6%8C%82%E8%BD%BD"><span class="toc-text">ä¸‰ã€æ•°æ®å·æŒ‚è½½</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E6%8C%82%E8%BD%BD%E6%95%B0%E6%8D%AE"><span class="toc-text">3.1 ä¸ºä»€ä¹ˆéœ€è¦æŒ‚è½½æ•°æ®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E9%80%89%E9%A1%B9%E8%A1%A5%E5%85%85"><span class="toc-text">3.2 é€‰é¡¹è¡¥å……</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-docker-run%E9%80%89%E9%A1%B9%E8%A1%A5%E5%85%85"><span class="toc-text">3.2.1 docker runé€‰é¡¹è¡¥å……</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-docker-exec%E9%80%89%E9%A1%B9%E8%A1%A5%E5%85%85"><span class="toc-text">3.2.2 docker execé€‰é¡¹è¡¥å……</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E6%8C%82%E8%BD%BD%E9%A1%B9%E7%9B%AE"><span class="toc-text">3.3 æŒ‚è½½é¡¹ç›®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-%E6%8C%82%E8%BD%BD%E5%8D%95%E4%B8%AA%E7%AB%99%E7%82%B9%E6%96%87%E4%BB%B6"><span class="toc-text">3.3.1 æŒ‚è½½å•ä¸ªç«™ç‚¹æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2-%E6%8C%82%E8%BD%BD%E7%AB%99%E7%82%B9%E7%9B%AE%E5%BD%95"><span class="toc-text">3.3.2 æŒ‚è½½ç«™ç‚¹ç›®å½•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E6%95%B0%E6%8D%AE%E5%8D%B7%E7%A9%BA%E9%97%B4"><span class="toc-text">3.4 æ•°æ®å·ç©ºé—´</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E9%9A%8F%E6%9C%BA%E6%95%B0%E6%8D%AE%E5%8D%B7%EF%BC%88%E8%BE%83%E5%B0%91%E4%BD%BF%E7%94%A8%EF%BC%89"><span class="toc-text">3.5 éšæœºæ•°æ®å·ï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-%E5%AE%B9%E5%99%A8%E6%97%B6%E5%8C%BA%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">3.6 å®¹å™¨æ—¶åŒºçš„é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-%E6%95%B0%E6%8D%AE%E5%8D%B7%E4%BD%BF%E7%94%A8%E4%B8%8E%E5%AE%B9%E5%99%A8%E6%9E%B6%E6%9E%84"><span class="toc-text">3.7 æ•°æ®å·ä½¿ç”¨ä¸å®¹å™¨æ¶æ„</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/11/17/06_%E6%9D%82%E8%AE%B0/%E7%BA%A2%E5%B8%BD%E7%B3%BB%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F%E6%A0%BC%E5%BC%8F%E5%8C%96/" title="æ— æ ‡é¢˜">æ— æ ‡é¢˜</a><time datetime="2025-11-17T09:30:23.932Z" title="å‘è¡¨äº 2025-11-17 17:30:23">2025-11-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/14/06_%E6%9D%82%E8%AE%B0/%E5%8D%8E%E4%B8%BAUSG6615F%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AESSL%20VPN/" title="åä¸ºUSG6615Fé˜²ç«å¢™é…ç½®SSLVPN">åä¸ºUSG6615Fé˜²ç«å¢™é…ç½®SSLVPN</a><time datetime="2025-05-14T07:00:52.000Z" title="å‘è¡¨äº 2025-05-14 15:00:52">2025-05-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/06/10_%E5%AD%A6%E7%A5%9EK8S/01-Docker%E5%9F%BA%E7%A1%80/01-Dokcer%E5%9F%BA%E7%A1%80/" title="01-DockeråŸºç¡€">01-DockeråŸºç¡€</a><time datetime="2025-05-06T05:52:52.000Z" title="å‘è¡¨äº 2025-05-06 13:52:52">2025-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/30/06_%E6%9D%82%E8%AE%B0/vllm%E9%83%A8%E7%BD%B2Qwen3%E5%A4%A7%E6%A8%A1%E5%9E%8B/" title="VLLMéƒ¨ç½²Qwen3å¤§æ¨¡å‹">VLLMéƒ¨ç½²Qwen3å¤§æ¨¡å‹</a><time datetime="2025-04-30T07:15:52.000Z" title="å‘è¡¨äº 2025-04-30 15:15:52">2025-04-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/21/06_%E6%9D%82%E8%AE%B0/%E5%8D%8E%E4%B8%BA%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%85%8D%E7%BD%AEmux-vlan/" title="åä¸ºäº¤æ¢æœºé…ç½®mux-vlan">åä¸ºäº¤æ¢æœºé…ç½®mux-vlan</a><time datetime="2025-04-21T08:29:52.000Z" title="å‘è¡¨äº 2025-04-21 16:29:52">2025-04-21</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent;"><div id="footer-wrap"><div class="copyright">Â©2019 - 2025 By Haris</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><div class="js-pjax"></div><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>